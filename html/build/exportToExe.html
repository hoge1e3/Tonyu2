<!DOCTYPE html>
<html>
<head>
<title>Export to tonyuexe</title>
<meta charset="utf-8">
<script src="../../js/lib/jquery-1.10.1.js" type="text/javascript"></script>
<script src="../../js/reqConf.js"></script>
<script src="../../js/lib/require.js"></script>
<style>
.on-logged-in { display:none; }
</style>
<script>
requirejs.config(reqConf);
requirejs(["Auth","Util","fs/exportToJsdoit"],function (Auth,Util){
  $(function () {
   var dir=Util.getQueryString("dir", "/Tonyu/Projects/1_Animation/");
   var dirs=dir.split("/");
   dirs.pop();
   var name=dirs.pop();
   $("#prjNameSpan").text(name);
   $("#prjName").val(name);
   Auth.currentUser(function(res) {
      if (res) {
          $(".on-logged-out").hide();
          $(".on-logged-in").show();
          $.ajax({ type:"get", url:"../../edit/get-project-info",data:{project:name},
              success:function (res) {
                  console.log("get-prj",res);
                  var data=JSON.parse(res);
                  if (data.license!="null") $("#license").val(data.license);
                  $("#allowFork").attr("checked",data.allowFork!="false");
                  $("#publishToList").attr("checked",data.publishToList!="false");
              },
              error: function () {
                  alert("Error "+arguments)
              }
          });
      } else {
          $(".on-logged-in").hide();
          $(".on-logged-out").show();
      }
   });
  });
});
</script>
</head>
<body>
<div class="on-logged-out"><a href="../../edit/login">ログイン</a>をしてください</div>
<div class="on-logged-in">
<h1><span id="prjNameSpan"></span>をtonyuexe.appspot.comで公開する </h1>
<div>※<a target="terms" href="../../doc/terms.html">利用規約</a>を確認してください</div>


<form action="../../edit/upload-project" method="POST">
<input type="hidden" id="prjName" name="project"/>
<textarea name="prog" cols=100 rows=24 style="display:none;"></textarea>

<div><input type="checkbox" id="publishToList" name="publishToList" value="true">このプロジェクトをプロジェクト一覧に表示する</div>
<ul>
<li>プロジェクト一覧は，tonyuedit（プロジェクト開発環境），tonyuexe（プロジェクト実行専用サイト）いずれの利用者からも見ることができます．
(現段階では未実装)</li>
</ul>

<div><input type="checkbox" id="allowFork" name="allowFork" value="true">このプロジェクトのForkを許可する</div>
<ul>
<li>Forkとは，他の投稿者がこのプロジェクトのコピーに変更を加えることです．このプロジェクト自身が他の投稿者に変更されることはありません．(現段階では未実装)
</li></ul>

<div>ライセンス
<select name="license" id="license">
<option value="mit">MIT License</option>
<option value="gpl3">GPLv3</option>
</select>
</div>

<hr/>
<input type="submit" value="公開する"/>



</form>
</div>


</body>

</html>
