extends Char;

while(1){
  vx=0;vy=0;
  if (getkey(39)) vx=2; 
  if (getkey(37)) vx=-2;
  if (getkey(40)) vy=2;
  if (getkey(38)) vy=-2;
  x+=vx;y+=vy;
  if (vx!=0 || vy!=0) mv+=1;       
  f=((mv % 8)>=4);
  if ($map.getAt(x,y)==$pat_Drop+1) die(); 
  update();       
}