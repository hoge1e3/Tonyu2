[[ide]]

[[用途別リファレンス]]

*マップエディタ

マップエディタは，ゲーム中に使用するマップを描くためのツールです．

**マップの構成

-マップには、「マップチップ」と呼ばれる画像を格子状に敷き詰めて表示することができます。
-マップは「奥のレイヤー」と「手前のレイヤー」の2層のレイヤーで構成され、それぞれマップチップを独立して配置できます
--奥のレイヤーは、地面（草地、海、穴など）のチップを置くのに適しています
--手前のレイヤーは、地面の上に乗っているもの（木、岩、壁など）のチップを置くのに適しています

**準備

-[[画像リスト>cpats]]に $pat_mapchip を追加されていることを確認
-- 次の画像が標準で用意されていますhttp://tonyuedit.appspot.com/images/mapchip.png
-- 他の画像を利用する場合、画像リストに利用したい画像を追加し、名前を $pat_mapchipにします
-メニューの「ツール」から「マップエディタ」を選択して起動します

**新しいマップを作る

-Load Data?: Y or Nと表示されるので、キーボードのnを押す
-次の値を入力する
--"input row"→縦に設置するチップの個数(デフォルトの画面サイズなら20程度。縦スクロールするゲームならもっと大きくする)
--"input col"→横に設置するチップの個数(デフォルトの画面サイズなら20程度。横スクロールするゲームならもっと大きくする)
--"chipWidth"→設置するチップの横のサイズ(デフォルトの画像なら32)
--"chipHeight"→設置するチップの縦のサイズ(デフォルトの画像なら32)


**マップの編集方法

-画面にマップチップの一覧がでるので、設置したいチップをクリックする、または"set"のボタンをクリックする。

-水色になっている範囲は、マップの範囲をあらわしていて、この範囲内にクリックすることで選択したマップチップを置くことができる

-周りのグレーになった範囲をクリックすると、その方向にスクロールすることができる(カーソルキーも使用可)



**下にあるボタン set base get save erase copy の説明

-set   : 現在選択されているチップを、マップ上の選択されているレイヤーに置くモードになる

-base  : 現在選択されているレイヤーを変えることができる。デフォルトではbase（奥のレイヤー）となっていて、一度クリックするとon（手前のレイヤー）に、さらにクリックするとall（奥と手前のレイヤーを同時に選択）になり、クリックするたびにこの順で変化する

-get   : マップチップ一覧から、使用するチップを選ぶモードになる。チップを選ぶと、自動的にsetモードに切り替わる

-save  : 現在の状態をファイルに保存する。プロンプトが表示されるので、セーブするファイル名(例：stage1.json)を入力してOKを押す

-erase : クリックした場所のマップチップを消去するモードになる。消去されるのは、選択されているレイヤーのチップ。

-copy  : クリックした場所のマップチップをコピーするモードになる。コピーされるのは選択されているレイヤーのチップ。コピーを行うと、自動的にsetモードに切り替わる

**保存したマップを開く

-マップエディタを起動すると Load Data?: Y or Nと表示されるので、キーボードのyを押す
-コンソールにファイル名一覧が出ているので、開きたいファイルの名前を入力する。
※入力されたファイルが存在しないと、Load Failedと表示され、nを押した場合の動作に移動する



**描いたマップをプログラム内で使用する

<<code Main
$map=new Map{chipWidth:32,chipHeight:32};
$map.load("stage1.json");
>>

**参考
-[[マップチップを取得する>mapGet]]
-[[マップチップとの当たり判定]]
-[[マップを書き換える]]
-[[Mapクラス>Map]]

.