[[マップチップとの当たり判定]]

*斜め移動をスムーズにする

[[マップチップとの当たり判定]]のプログラムでは、プレイヤーが斜め移動しているときに壁にひっかかると、まったく動けなくなります。図1のように、壁づたいに移動させたい場合は次のようにします

[[img nanameido.png]]


[[当たり判定を大きくする>マップチップとの当たり判定 - 当たり判定を大きくする]]も参照してください。


<<code Player(一部)
    //マップチップとの当たり判定
    if(hitToChip(x,y) ){
        if (!hitToChip(sx,y)) {
            //x座標を元に戻したらぶつかっていない→x座標だけ元に戻す
            x=sx;
        } else if (!hitToChip(x,sy)) {
            //y座標を元に戻したらぶつかっていない→y座標だけ元に戻す
            y=sy;   
        } else {
            //片方だけ戻してもやっぱりぶつかっている→両方元に戻す
            x=sx;y=sy;
        }
    }
>>


.