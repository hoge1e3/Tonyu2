!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=159)}([function(e,t,n){"use strict";var i,r=n(6),a=n(1),o=n(7),s=n(8),u=n(71),c=n(10),l=n(13),f=n(5).f,p=n(70),h=n(58),m=n(4),g=n(53),v=a.DataView,T=v&&v.prototype,y=a.Int8Array,d=y&&y.prototype,b=a.Uint8ClampedArray,A=b&&b.prototype,V=y&&p(y),k=d&&p(d),R=Object.prototype,I=R.isPrototypeOf,x=m("toStringTag"),w=g("TYPED_ARRAY_TAG"),S=!(!a.ArrayBuffer||!v),O=S&&!!h,E=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M=function(e){return o(e)&&s(P,u(e))};for(i in P)a[i]||(O=!1);if((!O||"function"!=typeof V||V===Function.prototype)&&(V=function(){throw TypeError("Incorrect invocation")},O))for(i in P)a[i]&&h(a[i],V);if((!O||!k||k===R)&&(k=V.prototype,O))for(i in P)a[i]&&h(a[i].prototype,k);if(O&&p(A)!==k&&h(A,k),r&&!s(k,x))for(i in E=!0,f(k,x,{get:function(){return o(this)?this[w]:void 0}}),P)a[i]&&c(a[i],w,i);S&&h&&p(T)!==R&&h(T,R),e.exports={NATIVE_ARRAY_BUFFER:S,NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:E&&w,aTypedArray:function(e){if(M(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(I.call(V,e))return e}else for(var t in P)if(s(P,i)){var n=a[t];if(n&&(e===n||I.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportProto:function(e,t,n){if(r){if(n)for(var i in P){var o=a[i];o&&s(o.prototype,e)&&delete o.prototype[e]}k[e]&&!n||l(k,e,n?t:O&&d[e]||t)}},exportStatic:function(e,t,n){var i,o;if(r){if(h){if(n)for(i in P)(o=a[i])&&s(o,e)&&delete o[e];if(V[e]&&!n)return;try{return l(V,e,n?t:O&&y[e]||t)}catch(e){}}for(i in P)!(o=a[i])||o[e]&&!n||l(o,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||s(P,t)},isTypedArray:M,TypedArray:V,TypedArrayPrototype:k}},function(e,t,n){(function(t){var n="object",i=function(e){return e&&e.Math==Math&&e};e.exports=i(typeof globalThis==n&&globalThis)||i(typeof window==n&&window)||i(typeof self==n&&self)||i(typeof t==n&&t)||Function("return this")()}).call(this,n(122))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(1),r=n(51).f,a=n(10),o=n(13),s=n(74),u=n(86),c=n(76);e.exports=function(e,t){var n,l,f,p,h,m=e.target,g=e.global,v=e.stat;if(n=g?i:v?i[m]||s(m,{}):(i[m]||{}).prototype)for(l in t){if(p=t[l],f=e.noTargetGet?(h=r(n,l))&&h.value:n[l],!c(g?l:m+(v?".":"#")+l,e.forced)&&void 0!==f){if(typeof p==typeof f)continue;u(p,f)}(e.sham||f&&f.sham)&&a(p,"sham",!0),o(n,l,p,e)}}},function(e,t,n){var i=n(1),r=n(52),a=n(53),o=n(93),s=i.Symbol,u=r("wks");e.exports=function(e){return u[e]||(u[e]=o&&s[e]||(o?s:a)("Symbol."+e))}},function(e,t,n){var i=n(6),r=n(83),a=n(11),o=n(24),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(2);e.exports=!i(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(16),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(6),r=n(5),a=n(23);e.exports=i?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(7);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var i=n(67),r=n(73),a=n(14),o=n(9),s=n(91),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,f=6==e,p=5==e||f;return function(h,m,g,v){for(var T,y,d=a(h),b=r(d),A=i(m,g,3),V=o(b.length),k=0,R=v||s,I=t?R(h,V):n?R(h,0):void 0;V>k;k++)if((p||k in b)&&(y=A(T=b[k],k,d),e))if(t)I[k]=y;else if(y)switch(e){case 3:return!0;case 5:return T;case 6:return k;case 2:u.call(I,T)}else if(l)return!1;return f?-1:c||l?l:I}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t,n){var i=n(1),r=n(52),a=n(10),o=n(8),s=n(74),u=n(85),c=n(19),l=c.get,f=c.enforce,p=String(u).split("toString");r("inspectSource",function(e){return u.call(e)}),(e.exports=function(e,t,n,r){var u=!!r&&!!r.unsafe,c=!!r&&!!r.enumerable,l=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||a(n,"name",t),f(n).source=p.join("string"==typeof t?t:"")),e!==i?(u?!l&&e[t]&&(c=!0):delete e[t],c?e[t]=n:a(e,t,n)):c?e[t]=n:s(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&l(this).source||u.call(this)})},function(e,t,n){var i=n(63);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";var i=n(18),r=n(131),a=n(59),o=n(19),s=n(78),u=o.set,c=o.getterFor("Array Iterator");e.exports=s(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:i(e),index:0,kind:t})},function(){var e=c(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(11),r=n(127),a=n(75),o=n(54),s=n(128),u=n(84),c=n(65)("IE_PROTO"),l=function(){},f=function(){var e,t=u("iframe"),n=a.length;for(t.style.display="none",s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),f=e.F;n--;)delete f.prototype[a[n]];return f()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=i(e),n=new l,l.prototype=null,n[c]=e):n=f(),void 0===t?n:r(n,t)},o[c]=!0},function(e,t,n){var i=n(73),r=n(63);e.exports=function(e){return i(r(e))}},function(e,t,n){var i,r,a,o=n(123),s=n(1),u=n(7),c=n(10),l=n(8),f=n(65),p=n(54),h=s.WeakMap;if(o){var m=new h,g=m.get,v=m.has,T=m.set;i=function(e,t){return T.call(m,e,t),t},r=function(e){return g.call(m,e)||{}},a=function(e){return v.call(m,e)}}else{var y=f("state");p[y]=!0,i=function(e,t){return c(e,y,t),t},r=function(e){return l(e,y)?e[y]:{}},a=function(e){return l(e,y)}}e.exports={set:i,get:r,has:a,enforce:function(e){return a(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var i=n(3),r=n(6);i({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:n(5).f})},function(e,t,n){var i=n(13),r=n(133),a=Object.prototype;r!==a.toString&&i(a,"toString",r,{unsafe:!0})},function(e,t,n){"use strict";var i=n(3),r=n(90);i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(7);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(88),r=n(75).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(16),r=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):a(n,t)}},function(e,t,n){"use strict";var i=n(3),r=n(2),a=n(100),o=n(11),s=n(26),u=n(9),c=n(61),l=a.ArrayBuffer,f=a.DataView,p=l.prototype.slice;i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r(function(){return!new l(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(o(this),e);for(var n=o(this).byteLength,i=s(e,n),r=s(void 0===t?n:t,n),a=new(c(this,l))(u(r-i)),h=new f(this),m=new f(a),g=0;i<r;)m.setUint8(g++,h.getUint8(i++));return a}})},function(e,t,n){"use strict";var i=n(0),r=n(137),a=i.aTypedArray;i.exportProto("copyWithin",function(e,t){return r.call(a(this),e,t,arguments.length>2?arguments[2]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=n(12).every,a=i.aTypedArray;i.exportProto("every",function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=n(103),a=i.aTypedArray;i.exportProto("fill",function(e){return r.apply(a(this),arguments)})},function(e,t,n){"use strict";var i=n(0),r=n(12).filter,a=n(61),o=i.aTypedArray,s=i.aTypedArrayConstructor;i.exportProto("filter",function(e){for(var t=r(o(this),e,arguments.length>1?arguments[1]:void 0),n=a(this,this.constructor),i=0,u=t.length,c=new(s(n))(u);u>i;)c[i]=t[i++];return c})},function(e,t,n){"use strict";var i=n(0),r=n(12).find,a=i.aTypedArray;i.exportProto("find",function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=n(12).findIndex,a=i.aTypedArray;i.exportProto("findIndex",function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=n(12).forEach,a=i.aTypedArray;i.exportProto("forEach",function(e){r(a(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=n(66).includes,a=i.aTypedArray;i.exportProto("includes",function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=n(66).indexOf,a=i.aTypedArray;i.exportProto("indexOf",function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(1),r=n(0),a=n(15),o=n(4)("iterator"),s=i.Uint8Array,u=a.values,c=a.keys,l=a.entries,f=r.aTypedArray,p=r.exportProto,h=s&&s.prototype[o],m=!!h&&("values"==h.name||null==h.name),g=function(){return u.call(f(this))};p("entries",function(){return l.call(f(this))}),p("keys",function(){return c.call(f(this))}),p("values",g,!m),p(o,g,!m)},function(e,t,n){"use strict";var i=n(0),r=i.aTypedArray,a=[].join;i.exportProto("join",function(e){return a.apply(r(this),arguments)})},function(e,t,n){"use strict";var i=n(0),r=n(138),a=i.aTypedArray;i.exportProto("lastIndexOf",function(e){return r.apply(a(this),arguments)})},function(e,t,n){"use strict";var i=n(0),r=n(12).map,a=n(61),o=i.aTypedArray,s=i.aTypedArrayConstructor;i.exportProto("map",function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0,function(e,t){return new(s(a(e,e.constructor)))(t)})})},function(e,t,n){"use strict";var i=n(0),r=n(109).left,a=i.aTypedArray;i.exportProto("reduce",function(e){return r(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=n(109).right,a=i.aTypedArray;i.exportProto("reduceRight",function(e){return r(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=i.aTypedArray,a=Math.floor;i.exportProto("reverse",function(){for(var e,t=r(this).length,n=a(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this})},function(e,t,n){"use strict";var i=n(0),r=n(9),a=n(105),o=n(14),s=n(2),u=i.aTypedArray,c=s(function(){new Int8Array(1).set({})});i.exportProto("set",function(e){u(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=o(e),s=r(i.length),c=0;if(s+t>n)throw RangeError("Wrong length");for(;c<s;)this[t+c]=i[c++]},c)},function(e,t,n){"use strict";var i=n(0),r=n(61),a=n(2),o=i.aTypedArray,s=i.aTypedArrayConstructor,u=[].slice,c=a(function(){new Int8Array(1).slice()});i.exportProto("slice",function(e,t){for(var n=u.call(o(this),e,t),i=r(this,this.constructor),a=0,c=n.length,l=new(s(i))(c);c>a;)l[a]=n[a++];return l},c)},function(e,t,n){"use strict";var i=n(0),r=n(12).some,a=i.aTypedArray;i.exportProto("some",function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,n){"use strict";var i=n(0),r=i.aTypedArray,a=[].sort;i.exportProto("sort",function(e){return a.call(r(this),e)})},function(e,t,n){"use strict";var i=n(0),r=n(9),a=n(26),o=n(61),s=i.aTypedArray;i.exportProto("subarray",function(e,t){var n=s(this),i=n.length,u=a(e,i);return new(o(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,r((void 0===t?i:a(t,i))-u))})},function(e,t,n){"use strict";var i=n(1),r=n(0),a=n(2),o=i.Int8Array,s=r.aTypedArray,u=[].toLocaleString,c=[].slice,l=!!o&&a(function(){u.call(new o(1))}),f=a(function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()})||!a(function(){o.prototype.toLocaleString.call([1,2])});r.exportProto("toLocaleString",function(){return u.apply(l?c.call(s(this)):s(this),arguments)},f)},function(e,t,n){"use strict";var i=n(1),r=n(0),a=n(2),o=i.Uint8Array,s=o&&o.prototype,u=[].toString,c=[].join;a(function(){u.call({})})&&(u=function(){return c.call(this)}),r.exportProto("toString",u,(s||{}).toString!=u)},function(e,t,n){var i=n(6),r=n(82),a=n(23),o=n(18),s=n(24),u=n(8),c=n(83),l=Object.getOwnPropertyDescriptor;t.f=i?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return a(!r.f.call(e,t),e[t])}},function(e,t,n){var i=n(1),r=n(74),a=n(64),o=i["__core-js_shared__"]||r("__core-js_shared__",{});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.1.3",mode:a?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var i=n(87),r=n(1),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i=n(1),r=n(94),a=n(90),o=n(10);for(var s in r){var u=i[s],c=u&&u.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(e){c.forEach=a}}},function(e,t,n){var i=n(11),r=n(126);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return i(n),r(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},function(e,t){e.exports={}},function(e,t,n){var i=n(5).f,r=n(8),a=n(4)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){var i=n(11),r=n(56),a=n(4)("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||null==(n=i(o)[a])?t:r(n)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){e.exports=!1},function(e,t,n){var i=n(52),r=n(53),a=i("keys");e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t,n){var i=n(18),r=n(9),a=n(26),o=function(e){return function(t,n,o){var s,u=i(t),c=r(u.length),l=a(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t,n){var i=n(56);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";var i=n(2);e.exports=function(e,t){var n=[][e];return!n||!i(function(){n.call(null,t||function(){throw 1},1)})}},function(e,t,n){"use strict";var i=n(6),r=n(1),a=n(76),o=n(13),s=n(8),u=n(62),c=n(96),l=n(24),f=n(2),p=n(17),h=n(25).f,m=n(51).f,g=n(5).f,v=n(129).trim,T=r.Number,y=T.prototype,d="Number"==u(p(y)),b=function(e){var t,n,i,r,a,o,s,u,c=l(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=v(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(o=(a=c.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||u>r)return NaN;return parseInt(a,i)}return+c};if(a("Number",!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var A,V=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof V&&(d?f(function(){y.valueOf.call(n)}):"Number"!=u(n))?c(new T(b(t)),n,V):b(t)},k=i?h(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),R=0;k.length>R;R++)s(T,A=k[R])&&!s(V,A)&&g(V,A,m(T,A));V.prototype=y,y.constructor=V,o(r,"Number",V)}},function(e,t,n){var i=n(8),r=n(14),a=n(65),o=n(99),s=a("IE_PROTO"),u=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,n){var i=n(62),r=n(4)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:a?i(t):"Object"==(o=i(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(2),r=n(62),a="".split;e.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==r(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var i=n(1),r=n(10);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(2),r=/#|\.prototype\./,a=function(e,t){var n=s[o(e)];return n==c||n!=u&&("function"==typeof t?i(t):!!t)},o=a.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){n(3)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){"use strict";var i=n(3),r=n(132),a=n(70),o=n(58),s=n(60),u=n(10),c=n(13),l=n(4),f=n(64),p=n(59),h=n(98),m=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,v=l("iterator"),T=function(){return this};e.exports=function(e,t,n,l,h,y,d){r(n,t,l);var b,A,V,k=function(e){if(e===h&&S)return S;if(!g&&e in x)return x[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",I=!1,x=e.prototype,w=x[v]||x["@@iterator"]||h&&x[h],S=!g&&w||k(h),O="Array"==t&&x.entries||w;if(O&&(b=a(O.call(new e)),m!==Object.prototype&&b.next&&(f||a(b)===m||(o?o(b,m):"function"!=typeof b[v]&&u(b,v,T)),s(b,R,!0,!0),f&&(p[R]=T))),"values"==h&&w&&"values"!==w.name&&(I=!0,S=function(){return w.call(this)}),f&&!d||x[v]===S||u(x,v,S),p[t]=S,h)if(A={values:k("values"),keys:y?S:k("keys"),entries:k("entries")},d)for(V in A)!g&&!I&&V in x||c(x,V,A[V]);else i({target:t,proto:!0,forced:g||I},A);return A}},function(e,t,n){"use strict";var i=n(3),r=n(1),a=n(6),o=n(135),s=n(0),u=n(100),c=n(72),l=n(23),f=n(10),p=n(9),h=n(102),m=n(105),g=n(24),v=n(8),T=n(71),y=n(7),d=n(17),b=n(58),A=n(25).f,V=n(136),k=n(12).forEach,R=n(108),I=n(5),x=n(51),w=n(19),S=w.get,O=w.set,E=I.f,P=x.f,M=Math.round,N=r.RangeError,D=u.ArrayBuffer,L=u.DataView,F=s.NATIVE_ARRAY_BUFFER_VIEWS,_=s.TYPED_ARRAY_TAG,j=s.TypedArray,W=s.TypedArrayPrototype,C=s.aTypedArrayConstructor,B=s.isTypedArray,q=function(e,t){for(var n=0,i=t.length,r=new(C(e))(i);i>n;)r[n]=t[n++];return r},G=function(e,t){E(e,t,{get:function(){return S(this)[t]}})},U=function(e){var t;return e instanceof D||"ArrayBuffer"==(t=T(e))||"SharedArrayBuffer"==t},z=function(e,t){return B(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Y=function(e,t){return z(e,t=g(t,!0))?l(2,e[t]):P(e,t)},H=function(e,t,n){return!(z(e,t=g(t,!0))&&y(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?E(e,t,n):(e[t]=n.value,e)};a?(F||(x.f=Y,I.f=H,G(W,"buffer"),G(W,"byteOffset"),G(W,"byteLength"),G(W,"length")),i({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:Y,defineProperty:H}),e.exports=function(e,t,n,a){var s=e+(a?"Clamped":"")+"Array",u="get"+e,l="set"+e,g=r[s],v=g,T=v&&v.prototype,I={},x=function(e,n){E(e,n,{get:function(){return function(e,n){var i=S(e);return i.view[u](n*t+i.byteOffset,!0)}(this,n)},set:function(e){return function(e,n,i){var r=S(e);a&&(i=(i=M(i))<0?0:i>255?255:255&i),r.view[l](n*t+r.byteOffset,i,!0)}(this,n,e)},enumerable:!0})};F?o&&(v=n(function(e,n,i,r){return c(e,v,s),y(n)?U(n)?void 0!==r?new g(n,m(i,t),r):void 0!==i?new g(n,m(i,t)):new g(n):B(n)?q(v,n):V.call(v,n):new g(h(n))}),b&&b(v,j),k(A(g),function(e){e in v||f(v,e,g[e])}),v.prototype=T):(v=n(function(e,n,i,r){c(e,v,s);var a,o,u,l=0,f=0;if(y(n)){if(!U(n))return B(n)?q(v,n):V.call(v,n);a=n,f=m(i,t);var g=n.byteLength;if(void 0===r){if(g%t)throw N("Wrong length");if((o=g-f)<0)throw N("Wrong length")}else if((o=p(r)*t)+f>g)throw N("Wrong length");u=o/t}else u=h(n),a=new D(o=u*t);for(O(e,{buffer:a,byteOffset:f,byteLength:o,length:u,view:new L(a)});l<u;)x(e,l++)}),b&&b(v,j),T=v.prototype=d(W)),T.constructor!==v&&f(T,"constructor",v),_&&f(T,_,s),I[s]=v,i({global:!0,forced:v!=g,sham:!F},I),"BYTES_PER_ELEMENT"in v||f(v,"BYTES_PER_ELEMENT",t),"BYTES_PER_ELEMENT"in T||f(T,"BYTES_PER_ELEMENT",t),R(s)}):e.exports=function(){}},function(e,t,n){var i=n(3),r=n(1),a=n(140),o=[].slice,s=function(e){return function(t,n){var i=arguments.length>2,r=i?o.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};i({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:s(r.setTimeout),setInterval:s(r.setInterval)})},function(e,t,n){n(79)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!i.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(6),r=n(2),a=n(84);e.exports=!i&&!r(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(1),r=n(7),a=i.document,o=r(a)&&r(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,n){var i=n(52);e.exports=i("native-function-to-string",Function.toString)},function(e,t,n){var i=n(8),r=n(124),a=n(51),o=n(5);e.exports=function(e,t){for(var n=r(t),s=o.f,u=a.f,c=0;c<n.length;c++){var l=n[c];i(e,l)||s(e,l,u(t,l))}}},function(e,t,n){e.exports=n(1)},function(e,t,n){var i=n(8),r=n(18),a=n(66).indexOf,o=n(54);e.exports=function(e,t){var n,s=r(e),u=0,c=[];for(n in s)!i(o,n)&&i(s,n)&&c.push(n);for(;t.length>u;)i(s,n=t[u++])&&(~a(c,n)||c.push(n));return c}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var i=n(12).forEach,r=n(68);e.exports=r("forEach")?function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(e,t,n){var i=n(7),r=n(92),a=n(4)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[a])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(62);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(2);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var i=n(13),r=Date.prototype,a=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&i(r,"toString",function(){var e=o.call(this);return e==e?a.call(this):"Invalid Date"})},function(e,t,n){var i=n(7),r=n(58);e.exports=function(e,t,n){var a,o;return r&&"function"==typeof(a=t.constructor)&&a!==n&&i(o=a.prototype)&&o!==n.prototype&&r(e,o),e}},function(e,t,n){var i=n(88),r=n(75);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){"use strict";var i,r,a,o=n(70),s=n(10),u=n(8),c=n(4),l=n(64),f=c("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(r=o(o(a)))!==Object.prototype&&(i=r):p=!0),null==i&&(i={}),l||u(i,f)||s(i,f,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){var i=n(2);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){"use strict";var i=n(1),r=n(6),a=n(0).NATIVE_ARRAY_BUFFER,o=n(10),s=n(101),u=n(2),c=n(72),l=n(16),f=n(9),p=n(102),h=n(25).f,m=n(5).f,g=n(103),v=n(60),T=n(19),y=T.get,d=T.set,b=i.ArrayBuffer,A=b,V=i.DataView,k=i.Math,R=i.RangeError,I=k.abs,x=k.pow,w=k.floor,S=k.log,O=k.LN2,E=function(e,t,n){var i,r,a,o=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?x(2,-24)-x(2,-77):0,f=e<0||0===e&&1/e<0?1:0,p=0;for((e=I(e))!=e||e===1/0?(r=e!=e?1:0,i=u):(i=w(S(e)/O),e*(a=x(2,-i))<1&&(i--,a*=2),(e+=i+c>=1?l/a:l*x(2,1-c))*a>=2&&(i++,a/=2),i+c>=u?(r=0,i=u):i+c>=1?(r=(e*a-1)*x(2,t),i+=c):(r=e*x(2,c-1)*x(2,t),i=0));t>=8;o[p++]=255&r,r/=256,t-=8);for(i=i<<t|r,s+=t;s>0;o[p++]=255&i,i/=256,s-=8);return o[--p]|=128*f,o},P=function(e,t){var n,i=e.length,r=8*i-t-1,a=(1<<r)-1,o=a>>1,s=r-7,u=i-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:c?-1/0:1/0;n+=x(2,t),l-=o}return(c?-1:1)*n*x(2,l-t)},M=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},N=function(e){return[255&e]},D=function(e){return[255&e,e>>8&255]},L=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},F=function(e){return E(e,23,4)},_=function(e){return E(e,52,8)},j=function(e,t){m(e.prototype,t,{get:function(){return y(this)[t]}})},W=function(e,t,n,i){var r=p(+n),a=y(e);if(r+t>a.byteLength)throw R("Wrong index");var o=y(a.buffer).bytes,s=r+a.byteOffset,u=o.slice(s,s+t);return i?u:u.reverse()},C=function(e,t,n,i,r,a){var o=p(+n),s=y(e);if(o+t>s.byteLength)throw R("Wrong index");for(var u=y(s.buffer).bytes,c=o+s.byteOffset,l=i(+r),f=0;f<t;f++)u[c+f]=l[a?f:t-f-1]};if(a){if(!u(function(){b(1)})||!u(function(){new b(-1)})||u(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var B,q=(A=function(e){return c(this,A),new b(p(e))}).prototype=b.prototype,G=h(b),U=0;G.length>U;)(B=G[U++])in A||o(A,B,b[B]);q.constructor=A}var z=new V(new A(2)),Y=V.prototype.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||s(V.prototype,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},{unsafe:!0})}else A=function(e){c(this,A,"ArrayBuffer");var t=p(e);d(this,{bytes:g.call(new Array(t),0),byteLength:t}),r||(this.byteLength=t)},V=function(e,t,n){c(this,V,"DataView"),c(e,A,"DataView");var i=y(e).byteLength,a=l(t);if(a<0||a>i)throw R("Wrong offset");if(a+(n=void 0===n?i-a:f(n))>i)throw R("Wrong length");d(this,{buffer:e,byteLength:n,byteOffset:a}),r||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},r&&(j(A,"byteLength"),j(V,"buffer"),j(V,"byteLength"),j(V,"byteOffset")),s(V.prototype,{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return M(W(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return M(W(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return P(W(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return P(W(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){C(this,1,e,N,t)},setUint8:function(e,t){C(this,1,e,N,t)},setInt16:function(e,t){C(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){C(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){C(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){C(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){C(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){C(this,8,e,_,t,arguments.length>2?arguments[2]:void 0)}});v(A,"ArrayBuffer"),v(V,"DataView"),t.ArrayBuffer=A,t.DataView=V},function(e,t,n){var i=n(13);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){var i=n(16),r=n(9);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){"use strict";var i=n(14),r=n(26),a=n(9);e.exports=function(e){for(var t=i(this),n=a(t.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,c=void 0===u?n:r(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){var i=n(4)("iterator"),r=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){r=!0}};o[i]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var a={};a[i]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(e){}return n}},function(e,t,n){var i=n(16);e.exports=function(e,t){var n=i(e);if(n<0||n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var i=n(71),r=n(59),a=n(4)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var i=n(4),r=n(59),a=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[a]===e)}},function(e,t,n){"use strict";var i=n(55),r=n(5),a=n(4),o=n(6),s=a("species");e.exports=function(e){var t=i(e),n=r.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(56),r=n(14),a=n(73),o=n(9),s=function(e){return function(t,n,s,u){i(n);var c=r(t),l=a(c),f=o(c.length),p=e?f-1:0,h=e?-1:1;if(s<2)for(;;){if(p in l){u=l[p],p+=h;break}if(p+=h,e?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:f>p;p+=h)p in l&&(u=n(u,l[p],p,c));return u}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){"use strict";var i=n(3),r=n(1),a=n(64),o=n(6),s=n(93),u=n(2),c=n(8),l=n(92),f=n(7),p=n(11),h=n(14),m=n(18),g=n(24),v=n(23),T=n(17),y=n(97),d=n(25),b=n(141),A=n(89),V=n(51),k=n(5),R=n(82),I=n(10),x=n(13),w=n(52),S=n(65),O=n(54),E=n(53),P=n(4),M=n(111),N=n(112),D=n(60),L=n(19),F=n(12).forEach,_=S("hidden"),j=P("toPrimitive"),W=L.set,C=L.getterFor("Symbol"),B=Object.prototype,q=r.Symbol,G=r.JSON,U=G&&G.stringify,z=V.f,Y=k.f,H=b.f,X=R.f,Z=w("symbols"),Q=w("op-symbols"),K=w("string-to-symbol-registry"),$=w("symbol-to-string-registry"),J=w("wks"),ee=r.QObject,te=!ee||!ee.prototype||!ee.prototype.findChild,ne=o&&u(function(){return 7!=T(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=z(B,t);i&&delete B[t],Y(e,t,n),i&&e!==B&&Y(B,t,i)}:Y,ie=function(e,t){var n=Z[e]=T(q.prototype);return W(n,{type:"Symbol",tag:e,description:t}),o||(n.description=t),n},re=s&&"symbol"==typeof q.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof q},ae=function(e,t,n){e===B&&ae(Q,t,n),p(e);var i=g(t,!0);return p(n),c(Z,i)?(n.enumerable?(c(e,_)&&e[_][i]&&(e[_][i]=!1),n=T(n,{enumerable:v(0,!1)})):(c(e,_)||Y(e,_,v(1,{})),e[_][i]=!0),ne(e,i,n)):Y(e,i,n)},oe=function(e,t){p(e);var n=m(t),i=y(n).concat(le(n));return F(i,function(t){o&&!se.call(n,t)||ae(e,t,n[t])}),e},se=function(e){var t=g(e,!0),n=X.call(this,t);return!(this===B&&c(Z,t)&&!c(Q,t))&&(!(n||!c(this,t)||!c(Z,t)||c(this,_)&&this[_][t])||n)},ue=function(e,t){var n=m(e),i=g(t,!0);if(n!==B||!c(Z,i)||c(Q,i)){var r=z(n,i);return!r||!c(Z,i)||c(n,_)&&n[_][i]||(r.enumerable=!0),r}},ce=function(e){var t=H(m(e)),n=[];return F(t,function(e){c(Z,e)||c(O,e)||n.push(e)}),n},le=function(e){var t=e===B,n=H(t?Q:m(e)),i=[];return F(n,function(e){!c(Z,e)||t&&!c(B,e)||i.push(Z[e])}),i};s||(x((q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=E(e),n=function(e){this===B&&n.call(Q,e),c(this,_)&&c(this[_],t)&&(this[_][t]=!1),ne(this,t,v(1,e))};return o&&te&&ne(B,t,{configurable:!0,set:n}),ie(t,e)}).prototype,"toString",function(){return C(this).tag}),R.f=se,k.f=ae,V.f=ue,d.f=b.f=ce,A.f=le,o&&(Y(q.prototype,"description",{configurable:!0,get:function(){return C(this).description}}),a||x(B,"propertyIsEnumerable",se,{unsafe:!0})),M.f=function(e){return ie(P(e),e)}),i({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:q}),F(y(J),function(e){N(e)}),i({target:"Symbol",stat:!0,forced:!s},{for:function(e){var t=String(e);if(c(K,t))return K[t];var n=q(t);return K[t]=n,$[n]=t,n},keyFor:function(e){if(!re(e))throw TypeError(e+" is not a symbol");if(c($,e))return $[e]},useSetter:function(){te=!0},useSimple:function(){te=!1}}),i({target:"Object",stat:!0,forced:!s,sham:!o},{create:function(e,t){return void 0===t?T(e):oe(T(e),t)},defineProperty:ae,defineProperties:oe,getOwnPropertyDescriptor:ue}),i({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ce,getOwnPropertySymbols:le}),i({target:"Object",stat:!0,forced:u(function(){A.f(1)})},{getOwnPropertySymbols:function(e){return A.f(h(e))}}),G&&i({target:"JSON",stat:!0,forced:!s||u(function(){var e=q();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))})},{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(f(t)||void 0!==e)&&!re(e))return l(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!re(t))return t}),i[1]=t,U.apply(G,i)}}),q.prototype[j]||I(q.prototype,j,q.prototype.valueOf),D(q,"Symbol"),O[_]=!0},function(e,t,n){t.f=n(4)},function(e,t,n){var i=n(87),r=n(8),a=n(111),o=n(5).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||o(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";var i=n(3),r=n(6),a=n(1),o=n(8),s=n(7),u=n(5).f,c=n(86),l=a.Symbol;if(r&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};c(p,l);var h=p.prototype=l.prototype;h.constructor=p;var m=h.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=m.call(e);if(o(f,e))return"";var n=g?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:p})}},function(e,t,n){n(112)("iterator")},function(e,t,n){"use strict";var i=n(56),r=n(7),a=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";o[t]=Function("C,a","return new C("+i.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=a.call(arguments,1),o=function(){var i=n.concat(a.call(arguments));return this instanceof o?s(t,i.length,i):t.apply(e,i)};return r(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t,n){var i=n(54),r=n(7),a=n(8),o=n(5).f,s=n(53),u=n(149),c=s("meta"),l=0,f=Object.isExtensible||function(){return!0},p=function(e){o(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,c)){if(!f(e))return"F";if(!t)return"E";p(e)}return e[c].objectID},getWeakData:function(e,t){if(!a(e,c)){if(!f(e))return!0;if(!t)return!1;p(e)}return e[c].weakData},onFreeze:function(e){return u&&h.REQUIRED&&f(e)&&!a(e,c)&&p(e),e}};i[c]=!0},function(e,t,n){var i=n(11),r=n(107),a=n(9),o=n(67),s=n(106),u=n(150),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,l,f){var p,h,m,g,v,T,y=o(t,n,l?2:1);if(f)p=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(r(h)){for(m=0,g=a(e.length);g>m;m++)if((v=l?y(i(T=e[m])[0],T[1]):y(e[m]))&&v instanceof c)return v;return new c(!1)}p=h.call(e)}for(;!(T=p.next()).done;)if((v=u(p,y,T.value,l))&&v instanceof c)return v;return new c(!1)}).stop=function(e){return new c(!0,e)}},function(e,t,n){"use strict";var i=n(158).charAt,r=n(19),a=n(78),o=r.set,s=r.getterFor("String Iterator");a(String,"String",function(e){o(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=s(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(1),r=n(94),a=n(15),o=n(10),s=n(4),u=s("iterator"),c=s("toStringTag"),l=a.values;for(var f in r){var p=i[f],h=p&&p.prototype;if(h){if(h[u]!==l)try{o(h,u,l)}catch(e){h[u]=l}if(h[c]||o(h,c,f),r[f])for(var m in a)if(h[m]!==a[m])try{o(h,m,a[m])}catch(e){h[m]=a[m]}}}},function(e,t,n){n(79)("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){"use strict";var i=n(3),r=n(12).some;i({target:"Array",proto:!0,forced:n(68)("some")},{some:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(1),r=n(85),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(r.call(a))},function(e,t,n){var i=n(55),r=n(25),a=n(89),o=n(11);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){n(3)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(e,t,n){var i=n(7);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var i=n(6),r=n(5),a=n(11),o=n(97);e.exports=i?Object.defineProperties:function(e,t){a(e);for(var n,i=o(t),s=i.length,u=0;s>u;)r.f(e,n=i[u++],t[n]);return e}},function(e,t,n){var i=n(55);e.exports=i("document","documentElement")},function(e,t,n){var i=n(63),r="["+n(130)+"]",a=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),s=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){var i=n(4),r=n(17),a=n(10),o=i("unscopables"),s=Array.prototype;null==s[o]&&a(s,o,r(null)),e.exports=function(e){s[o][e]=!0}},function(e,t,n){"use strict";var i=n(98).IteratorPrototype,r=n(17),a=n(23),o=n(60),s=n(59),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=r(i,{next:a(1,n)}),o(e,c,!1,!0),s[c]=u,e}},function(e,t,n){"use strict";var i=n(71),r={};r[n(4)("toStringTag")]="z",e.exports="[object z]"!==String(r)?function(){return"[object "+i(this)+"]"}:r.toString},function(e,t,n){n(79)("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){var i=n(1),r=n(2),a=n(104),o=n(0).NATIVE_ARRAY_BUFFER_VIEWS,s=i.ArrayBuffer,u=i.Int8Array;e.exports=!o||!r(function(){u(1)})||!r(function(){new u(-1)})||!a(function(e){new u,new u(null),new u(1.5),new u(e)},!0)||r(function(){return 1!==new u(new s(2),1,void 0).length})},function(e,t,n){var i=n(14),r=n(9),a=n(106),o=n(107),s=n(67),u=n(0).aTypedArrayConstructor;e.exports=function(e){var t,n,c,l,f,p=i(e),h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,v=a(p);if(null!=v&&!o(v))for(f=v.call(p),p=[];!(l=f.next()).done;)p.push(l.value);for(g&&h>2&&(m=s(m,arguments[2],2)),n=r(p.length),c=new(u(this))(n),t=0;n>t;t++)c[t]=g?m(p[t],t):p[t];return c}},function(e,t,n){"use strict";var i=n(14),r=n(26),a=n(9),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=i(this),s=a(n.length),u=r(e,s),c=r(t,s),l=arguments.length>2?arguments[2]:void 0,f=o((void 0===l?s:r(l,s))-c,s-u),p=1;for(c<u&&u<c+f&&(p=-1,c+=f-1,u+=f-1);f-- >0;)c in n?n[u]=n[c]:delete n[u],u+=p,c+=p;return n}},function(e,t,n){"use strict";var i=n(18),r=n(16),a=n(9),o=n(68),s=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,l=o("lastIndexOf");e.exports=c||l?function(e){if(c)return u.apply(this,arguments)||0;var t=i(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=s(o,r(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},function(e,t,n){var i=n(3),r=Math.ceil,a=Math.floor;i({target:"Math",stat:!0},{trunc:function(e){return(e>0?a:r)(e)}})},function(e,t,n){var i=n(55);e.exports=i("navigator","userAgent")||""},function(e,t,n){var i=n(18),r=n(25).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(i(e))}},function(e,t,n){"use strict";var i=n(3),r=n(66).indexOf,a=n(68),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,u=a("indexOf");i({target:"Array",proto:!0,forced:s||u},{indexOf:function(e){return s?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(3),r=n(26),a=n(16),o=n(9),s=n(14),u=n(91),c=n(144),l=n(145),f=Math.max,p=Math.min;i({target:"Array",proto:!0,forced:!l("splice")},{splice:function(e,t){var n,i,l,h,m,g,v=s(this),T=o(v.length),y=r(e,T),d=arguments.length;if(0===d?n=i=0:1===d?(n=0,i=T-y):(n=d-2,i=p(f(a(t),0),T-y)),T+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=u(v,i),h=0;h<i;h++)(m=y+h)in v&&c(l,h,v[m]);if(l.length=i,n<i){for(h=y;h<T-i;h++)g=h+n,(m=h+i)in v?v[g]=v[m]:delete v[g];for(h=T;h>T-i+n;h--)delete v[h-1]}else if(n>i)for(h=T-i;h>y;h--)g=h+n-1,(m=h+i-1)in v?v[g]=v[m]:delete v[g];for(h=0;h<n;h++)v[h+y]=arguments[h+2];return v.length=T-i+n,l}})},function(e,t,n){"use strict";var i=n(24),r=n(5),a=n(23);e.exports=function(e,t,n){var o=i(t);o in e?r.f(e,o,a(0,n)):e[o]=n}},function(e,t,n){var i=n(2),r=n(4)("species");e.exports=function(e){return!i(function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(e,t,n){n(3)({target:"Function",proto:!0},{bind:n(115)})},function(e,t,n){"use strict";var i=n(148),r=n(151);e.exports=i("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},r,!0)},function(e,t,n){"use strict";var i=n(3),r=n(1),a=n(76),o=n(13),s=n(116),u=n(117),c=n(72),l=n(7),f=n(2),p=n(104),h=n(60),m=n(96);e.exports=function(e,t,n,g,v){var T=r[e],y=T&&T.prototype,d=T,b=g?"set":"add",A={},V=function(e){var t=y[e];o(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof T||!(v||y.forEach&&!f(function(){(new T).entries().next()}))))d=n.getConstructor(t,e,g,b),s.REQUIRED=!0;else if(a(e,!0)){var k=new d,R=k[b](v?{}:-0,1)!=k,I=f(function(){k.has(1)}),x=p(function(e){new T(e)}),w=!v&&f(function(){for(var e=new T,t=5;t--;)e[b](t,t);return!e.has(-0)});x||((d=t(function(t,n){c(t,d,e);var i=m(new T,t,d);return null!=n&&u(n,i[b],i,g),i})).prototype=y,y.constructor=d),(I||w)&&(V("delete"),V("has"),g&&V("get")),(w||R)&&V(b),v&&y.clear&&delete y.clear}return A[e]=d,i({global:!0,forced:d!=T},A),h(d,e),v||n.setStrong(d,e,g),d}},function(e,t,n){var i=n(2);e.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,n){var i=n(11);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&i(a.call(e)),t}}},function(e,t,n){"use strict";var i=n(5).f,r=n(17),a=n(101),o=n(67),s=n(72),u=n(117),c=n(78),l=n(108),f=n(6),p=n(116).fastKey,h=n(19),m=h.set,g=h.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,i){s(e,l,t),m(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),f||(e.size=0),null!=i&&u(i,e[c],e,n)}),h=g(t),v=function(e,t,n){var i,r,a=h(e),o=T(e,t);return o?o.value=n:(a.last=o={index:r=p(t,!0),key:t,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=o),i&&(i.next=o),f?a.size++:e.size++,"F"!==r&&(a.index[r]=o)),e},T=function(e,t){var n,i=h(e),r=p(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return a(l.prototype,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=h(this),n=T(this,e);if(n){var i=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),t.first==n&&(t.first=i),t.last==n&&(t.last=r),f?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=h(this),i=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!T(this,e)}}),a(l.prototype,n?{get:function(e){var t=T(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),f&&i(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(e,t,n){var i=t+" Iterator",r=g(t),a=g(i);c(e,t,function(e,t){m(this,{type:i,target:e,state:r(e),kind:t,last:void 0})},function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){n(3)({target:"Object",stat:!0,sham:!n(6)},{create:n(17)})},function(e,t,n){var i=n(3),r=n(2),a=n(14),o=n(70),s=n(99);i({target:"Object",stat:!0,forced:r(function(){o(1)}),sham:!s},{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,n){n(3)({target:"Object",stat:!0},{setPrototypeOf:n(58)})},function(e,t,n){var i=n(3),r=n(55),a=n(56),o=n(11),s=n(7),u=n(17),c=n(115),l=n(2),f=r("Reflect","construct"),p=l(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),h=!l(function(){f(function(){})}),m=p||h;i({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(e,t){a(e),o(t);var n=arguments.length<3?e:a(arguments[2]);if(h&&!p)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(c.apply(e,i))}var r=n.prototype,l=u(s(r)?r:Object.prototype),m=Function.apply.call(e,l,t);return s(m)?m:l}})},function(e,t,n){"use strict";var i=n(13),r=n(11),a=n(2),o=n(157),s=RegExp.prototype,u=s.toString,c=a(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),l="toString"!=u.name;(c||l)&&i(RegExp.prototype,"toString",function(){var e=r(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?o.call(e):n)},{unsafe:!0})},function(e,t,n){"use strict";var i=n(11);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var i=n(16),r=n(63),a=function(e){return function(t,n){var a,o,s=String(r(t)),u=i(n),c=s.length;return u<0||u>=c?e?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){"use strict";n.r(t);n(22),n(20),n(57),n(125),n(95),n(69),n(77);n(15),n(27),n(21),n(134),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"resetSeed",value:function(){this.init=!0,this.x=123456789,this.y=362436069,this.z=521288629,this.w=8867512}},{key:"random",value:function(){this.init||this.resetSeed();var e=this.x^this.x<<11;this.x=this.y,this.y=this.z,this.z=this.w;var t=this.w=this.w^this.w>>>19^e^e>>>8;return t=Math.abs(t)/2147483648%2}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();n(139);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"lerpWave",value:function(e,t){var n=e.getChannelData(0).length,i=t[0].length;if(n==i)for(var r=0;r<2;r++)for(var a=e.getChannelData(r),o=t[r],s=0;s<n;s++)a[s]=o[s];else for(var u=i/n,c=0;c<2;c++)for(var l=e.getChannelData(c),f=t[c],p=0;p<n;p++){var h=p*u,m=Math.trunc(h),g=(m+1)%i,v=h-m,T=f[m]*(1-v)+f[g]*v;l[p]=T}}}],(n=null)&&a(t.prototype,n),i&&a(t,i),e}();n(80),n(81),n(110),n(113),n(114),n(142),n(143),n(146),n(147),n(152),n(153),n(154),n(155),n(156),n(118),n(119);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return f(e,arguments,h(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),p(i,e)})(e)}function f(e,t,n){return(f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&p(r,n.prototype),r}).apply(null,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,h(t).apply(this,arguments))}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,l(Array)),n=t,r=[{key:"delete",value:function(e,t){t==e.length-1?e.pop():0==t?e.shift():e.splice(t,1)}}],(i=null)&&u(n.prototype,i),r&&u(n,r),t}();n(120);function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getInt",value:function(e,t,n){for(var i=0,r=t;r<n;r++)i=(i<<8)+e[r];return i}},{key:"variableLengthToInt",value:function(e,t,n){for(var i=t,r=0;i<n-1&&e[i]>=128;)i<t+4&&(r=(r<<7)+(e[i]-128)),i++;return[r=(r<<7)+e[i],++i-t]}},{key:"chIndicesInsert",value:function(e,t,n,i,r){var a=t.indices;if(a.length<=t.indicesLength+4){if(e.debug)var o=performance.now();for(var s=new Int32Array(Math.floor(2*a.length)),u=a.length-1;u>=0;u--)s[u]=a[u];t.indices=a=s,e.debug&&console.log("malloc",performance.now()-o,s.length)}if(t.indicesLength>=4&&n<a[t.indicesFoot])for(;-1!=t.indicesCur;){if(n<a[t.indicesCur]){t.indicesCur==t.indicesHead?t.indicesHead=t.indicesLength:a[t.indicesPre+3]=t.indicesLength,a[t.indicesLength]=n,a[t.indicesLength+1]=r,a[t.indicesLength+2]=i,a[t.indicesLength+3]=t.indicesCur,t.indicesPre=t.indicesLength,t.indicesLength+=4;break}t.indicesPre=t.indicesCur,t.indicesCur=a[t.indicesCur+3]}else t.indicesLength>=4?a[t.indicesFoot+3]=t.indicesLength:t.indicesHead=0,t.indicesFoot=t.indicesLength,a[t.indicesLength]=n,a[t.indicesLength+1]=r,a[t.indicesLength+2]=i,a[t.indicesLength+3]=-1,t.indicesLength+=4}}],(n=null)&&g(t.prototype,n),i&&g(t,i),e}();function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"init",value:function(e,t){this.updatePreTime=performance.now(),this.pPreTime=performance.now(),this.cPreTime=1e3*e.context.currentTime,this.pTimeSum=0,this.cTimeSum=0,this.cnt=0,this.initCurrentTime=t}},{key:"update",value:function(e){var t=this,n=e.context,i=e.settings,r=e.states,a=performance.now(),o=this.updatePreTime,s=this.pPreTime,u=this.cPreTime,c=this.pTimeSum,l=this.cTimeSum,f=this.cnt,p=a-o,h=a,m=1e3*n.currentTime;c+=h-s,l+=m-u,s=h,u=m;var g=c-l;if(r.latencyTime=g,g>=100?(r.latencyLimitTime+=g,l+=100):g<=-100?l=c:r.latencyLimitTime>0&&(r.latencyLimitTime-=.003*p,r.latencyLimitTime<0&&(r.latencyLimitTime=0)),r.updateIntervalTime=p,r.updateBufTime<p?r.updateBufTime=p:(r.updateBufMaxTime>350&&(r.updateBufMaxTime-=.002*r.updateBufMaxTime),r.updateBufTime<20&&(r.updateBufTime+=5e-4*r.updateBufTime),r.updateBufMaxTime>=10&&r.updateBufMaxTime<340&&(r.updateBufMaxTime+=.002*r.updateBufMaxTime)),r.updateBufTime>r.updateBufMaxTime){if(p>=900&&r.latencyLimitTime<=150)r.updateBufMaxTime+=p;else{var T=p-r.updateBufMaxTime;r.updateBufTime=r.updateBufMaxTime,r.updateBufMaxTime<10?(r.updateBufTime=r.updateBufMaxTime,r.updateBufMaxTime*=1.25):r.updateBufMaxTime+=T/2}r.updateBufMaxTime>1100&&(r.updateBufMaxTime=1100)}r.latencyLimitTime>150&&(l=c,r.latencyLimitTime-=5,r.latencyLimitTime>1e3&&(r.latencyLimitTime=1e3),r.updateBufMaxTime=1,r.updateBufTime=1,p=1);for(var y=0;y<16;y++){var d=e.playData.channels[y].notes,b=r.playIndices[y],A=function(){var a=d[b],o=0==f?t.initCurrentTime-r.startTime:n.currentTime-r.startTime;if(o>=a.stopTime)return"continue";if(0==f&&o>a.startTime+.05)return"continue";if(o+a.startTime<0)return"continue";if(o<a.startTime-r.updateBufTime/1e3)return"break";if(!i.isWebMIDI){if(r.stopFuncs.length>=350&&r.updateBufTime<1e3&&(r.updateBufTime=12,r.updateBufMaxTime=r.updateBufTime),-1!=i.maxPoly||-1!=i.maxPercPoly){var s=0,u=0;if(r.stopFuncs.forEach(function(e){e.note&&(9!=e.note.channel?a.start>=e.note.start&&a.start<e.note.stop&&s++:a.start==e.note.start&&u++)}),9!=a.channel&&s>=i.maxPoly||9==a.channel&&u>=i.maxPercPoly)return"continue"}var c=9!=a.channel?e.createNote(a):e.createPercussionNote(a);if(!c)return"continue";e.pushFunc({note:a,stopFunc:c})}r.noteOnAry.push(a)};e:for(;b<d.length;b++){switch(A()){case"continue":continue;case"break":break e}}r.playIndices[y]=b}if(this.checkNoteOn(e),this.checkNoteOff(e),i.isWebMIDI&&null!=i.WebMIDIPortOutput){for(var V=e.playData.messages,k=e.playData.smfData,R=r.playIndices[16];R<V.length;R++){var I=V[R],x=n.currentTime-r.startTime;if(!(x>I.time+1)){if(x<I.time-1)break;var w=I.smfPtrLen,S=I.smfPtr,O=I.time,E=k[S];if(255!=E)try{if(240==E||247==E){if(i.WebMIDIPortSysEx){var P=v.variableLengthToInt(k,S+1,S+1+4),M=S+1+P[1],N=M+P[0],D=new Uint8Array(1+P[0]);D[0]=E;for(var L=N-M,F=0;F<L;F++)D[F+1]=k[M+F];i.WebMIDIPortOutput.send(D,1e3*(O-n.currentTime+window.performance.now()/1e3+r.startTime))}}else{for(var _=[],j=0;j<w;j++)_.push(k[S+j]);i.WebMIDIPortOutput.send(_,1e3*(O-n.currentTime+window.performance.now()/1e3+r.startTime))}}catch(e){console.log(e,S,w,O,E)}}}r.playIndices[16]=R}f++,this.updatePreTime=a,this.pPreTime=s,this.cPreTime=u,this.pTimeSum=c,this.cTimeSum=l,this.cnt=f}},{key:"checkNoteOn",value:function(e){for(var t=e.context,n=e.trigger,i=e.states,r=e.states.noteOnAry,a=e.states.noteOffAry,o=0;o<r.length;o++){var s=r[o],u=t.currentTime-i.startTime;s.startTime-u<=0&&(m.delete(r,o),a.push(s),n.isNoteTrigger&&n.noteOn(s),o--)}}},{key:"checkNoteOff",value:function(e){for(var t=e.context,n=e.trigger,i=e.states,r=e.states.noteOffAry,a=0;a<r.length;a++){var o=r[a],s=t.currentTime-i.startTime;(9!=o.channel&&o.stopTime-s<=0||9==o.channel&&o.drumStopTime-s<=0)&&(m.delete(r,a),e.clearFunc("note",o),n.isNoteTrigger&&n.noteOff(o),a--)}}}],(n=null)&&T(t.prototype,n),i&&T(t,i),e}();function d(e,t,n,i,r){var a=this,o=this.settings,s=this.context,u=this.states.startTime,c=i?0:e.channel||0,l=e.velocity*Number(i?1:null!=this.channels[c][2]?this.channels[c][2]:1)*o.generateVolume,f=!0;if(l<=0)return{isGainValueZero:!0};var p=l*((e.expression?e.expression[0].value:100)/127),h=s.createGain();if(h.gain.value=p,n?e.expression&&e.expression.forEach(function(e){var t=l*(e.value/127);t>0&&(f=!1),h.gain.setValueAtTime(t,e.time+u)}):p>0&&(f=!1),f)return{isGainValueZero:!0};var m=e.startTime+u,g=e.stopTime+u,v=o.basePitch*Math.pow(Math.pow(2,1/12),(e.pitch||69)-69),T=t?s.createBufferSource():s.createOscillator(),y=s.createStereoPanner?s.createStereoPanner():s.createPanner?s.createPanner():{pan:{setValueAtTime:function(){}}},d=s.createGain(),A=s.createGain();t?(T.loop=!0,T.buffer=this.whitenoise):(T.type=e.type||"sine",T.detune.value=0,T.frequency.value=v,e.pitchBend&&e.pitchBend.forEach(function(t){T.frequency.setValueAtTime(o.basePitch*Math.pow(Math.pow(2,1/12),e.pitch-69+t.value),t.time+u)}));var V,k,R=e.pan&&64!=e.pan[0].value?e.pan[0].value/127*2-1:0;if(function(e,t,n){if(e.createStereoPanner)n>1&&(n=1),t.pan.value=n;else if(e.createPanner){var i=b(n);t.panningModel="equalpower",t.setPosition(i.x,i.y,i.z)}}(s,y,R),s.createStereoPanner||s.createPanner){var I=!0;s.createStereoPanner?e.pan&&e.pan.forEach(function(e){if(I)I=!1;else{var t=64==e.value?0:e.value/127*2-1;t>1&&(t=1),y.pan.setValueAtTime(t,e.time+u)}}):s.createPanner&&(y.positionX?e.pan&&e.pan.forEach(function(e){if(firstPan)firstPan=!1;else{var t=b(64==e.value?0:e.value/127*2-1);y.positionX.setValueAtTime(t.x,e.time+u),y.positionY.setValueAtTime(t.y,e.time+u),y.positionZ.setValueAtTime(t.z,e.time+u)}}):e.pan&&e.pan.forEach(function(e){if(I)I=!1;else{var t=setTimeout(function(){a.clearFunc("pan",t);var n=64==e.value?0:e.value/127*2-1;n>1&&(n=1);var i=b(n);y.setPosition(i.x,i.y,i.z)},1e3*(e.time+u-s.currentTime));a.pushFunc({pan:t,stopFunc:function(){clearTimeout(t)}})}})),T.connect(y),y.connect(h)}else T.connect(h);if(h.connect(d),d.connect(A),A.connect(this.masterGainNode),this.masterGainNode.connect(s.destination),!t&&e.modulation&&(e.modulation.length>=2||e.modulation[0].value>0)){V=s.createOscillator(),k=s.createGain();var x=!0;e.modulation&&e.modulation.forEach(function(e){if(x)x=!1;else{var t=e.value/127;t>1&&(t=1),k.gain.setValueAtTime(10*v/440*t,e.time+u)}});var w=e.modulation?e.modulation[0].value/127:0;w>1&&(w=1),k.gain.value=10*v/440*w,V.frequency.value=6,V.connect(k),k.connect(T.frequency)}if(this.settings.isReverb&&e.reverb&&(e.reverb.length>=2||e.reverb[0].value>0)){var S=this.convolver,O=s.createGain(),E=!0;e.reverb&&e.reverb.forEach(function(e){if(E)E=!1;else{var t=e.value/127;t>1&&(t=1),O.gain.setValueAtTime(t,e.time+u)}});var P=e.reverb?e.reverb[0].value/127:0;P>1&&(P=1),O.gain.value=P,d.connect(A),A.connect(O),O.connect(S)}if(this.settings.isChorus&&e.chorus&&(e.chorus.length>=2||e.chorus[0].value>0)){var M=this.chorusDelayNode,N=s.createGain(),D=!0;e.chorus&&e.chorus.forEach(function(e){if(D)D=!1;else{var t=e.value/127;t>1&&(t=1),N.gain.setValueAtTime(t,e.time+u)}});var L=e.chorus?e.chorus[0].value/127:0;L>1&&(L=1),N.gain.value=L,d.connect(A),A.connect(N),N.connect(M)}return V&&(V.start(m),this.stopAudioNode(V,g,k)),T.start(m),t||i||r||this.stopAudioNode(T,g,A),{start:m,stop:g,pitch:v,channel:c,velocity:l,oscillator:T,panNode:y,gainNode:d,stopGainNode:A,isGainValueZero:!1}}function b(e){e>1&&(e=1);var t={},n=90*e;return t.x=Math.sin(n*(Math.PI/180)),t.y=0,t.z=-Math.cos(n*(Math.PI/180)),t}n(121);function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"measureReverb",value:function(){for(var e=performance.now(),t=0;t<5e5&&!(performance.now()-e>=500);t++);return this.debug&&console.log("measureReverb",t,performance.now()-e),!(t<5e5)}}],(n=null)&&A(t.prototype,n),i&&A(t,i),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){if(this.debug){console.log(e);var t=performance.now()}var n=new Uint8Array(e);if(77!=n[0]||84!=n[1]||104!=n[2]||100!=n[3])return"Not Sandard MIDI File.";var i={};if(i.smf=n,function(e){var t=e.smf,n=4,i={};i.size=v.getInt(t,4,8),i.format=t[9],i.trackcount=v.getInt(t,10,12),i.timemanage=t[12],i.resolution=v.getInt(t,12,14),n+=4+i.size;for(var r=[],a=this.settings.isWebMIDI?17:16,o=0;o<a;o++){var s={};r.push(s),s.indices=new Int32Array(Math.floor(t.length/8)),s.indicesLength=0,s.indicesHead=-1,s.indicesFoot=0,s.indicesCur=0,s.indicesPre=0,s.notes=[]}return e.p=n,e.header=i,e.channels=r,e}.call(this,i),this.debug)var r=performance.now();if(function(e){for(var t=e.smf,n=e.p,i=e.header,r=e.channels,a=[],o=[],s=0,u=0;u<i.trackcount;u++){if(77!=t[n]||84!=t[n+1]||114!=t[n+2]||107!=t[n+3])return"Irregular SMF.";var c=(n+=4)+4+v.getInt(t,n,n+4);n+=4;for(var l=0,f=120,p=0,h=0,m=1,g=void 0;n<c;){if(null!=m){var T=v.variableLengthToInt(t,n,n+5);l+=g=T[0],n+=T[1]}var y=n;switch(t[n]>>4){case 8:case 9:case 10:case 11:case 14:var d=r[15&(m=t[n])];v.chIndicesInsert(this,d,l,n,3),n+=3;break;case 12:case 13:var b=r[15&(m=t[n])];v.chIndicesInsert(this,b,l,n,2),n+=2;break;case 15:switch(t[n]){case 240:case 247:var A=v.variableLengthToInt(t,n+1,n+1+4);if(A[0]>=7&&127==t[n+2]&&127==t[n+3]&&4==t[n+4]&&1==t[n+5])for(var V=0;V<16;V++){var k=r[V];v.chIndicesInsert(this,k,l,n,A[0])}n+=1+A[1]+A[0];break;case 241:n+=2;break;case 242:n+=3;break;case 243:n+=2;break;case 246:case 248:case 250:case 251:case 252:case 254:n+=1;break;case 255:switch(t[n+1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 32:break;case 47:l+=(this.settings.isSkipEnding?0:i.resolution)-g;break;case 81:for(var R=0;R<16;R++){var I=r[R];v.chIndicesInsert(this,I,l,n,6)}h+=60/f/i.resolution*(l-p),p=l,f=6e7/(65536*t[n+3]+256*t[n+4]+t[n+5]),a.push({timing:l,time:h,value:f});break;case 84:break;case 88:o.push({timing:l,value:[t[n+3],Math.pow(2,t[n+4])]})}var x=v.variableLengthToInt(t,n+2,n+2+4);n+=2+x[1]+x[0]}break;default:if(null==m)return"Irregular SMF. ("+n+" byte addr)";t[--n]=m,m=null}this.settings.isWebMIDI&&null!=m&&v.chIndicesInsert(this,r[16],l,y,n-y)}!this.settings.isSkipEnding&&s<l&&(s=l);for(var w=0;w<r.length;w++)r[w].indicesCur=r[w].indicesHead,r[w].indicesPre=r[w].indicesHead}return e.p=n,e.tempoTrack=a,e.beatTrack=o,e.songLength=s,e}.call(this,i),this.debug)var a=performance.now();(function(e){for(var t,n,i,r=this,a=e.smf,o=e.header,s=e.channels,u=e.tempoTrack,c=e.songLength,l=-1,f=-1,p=Number.MAX_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,g=0,v=0,T=function(e){var u=s[e],c=2,T=0,y=64,d=127,b=100,A=0,V=0,R=r.isTonyu2?0:10,I=0,x=127,w=127,S=0,O=127;t=120,n=0,i=0;for(var E=[],P=u.indicesHead,M=u.indices,N=new Array(128),D=function(){var s=M[P],k=M[P+2],D=M[P+3],L=60/t/o.resolution*(s-n)+i,F=a[k]>>4;switch(F){case 8:case 9:if(9==F&&0!=a[k+2]){var _={start:s,stop:null,startTime:L,stopTime:null,pitch:a[k+1],pitchBend:[{timing:s,time:L,value:T}],pan:[{timing:s,time:L,value:y}],expression:[{timing:s,time:L,value:d*(O/127)}],velocity:a[k+2]/127*(b/127),modulation:[{timing:s,time:L,value:A}],holdBeforeStop:null,reverb:[{timing:s,time:L,value:R}],chorus:[{timing:s,time:L,value:I}],instrument:S,channel:e,nextSameNoteOnInterval:-1,drumStopTime:2},j=N[a[k+1]];j&&(j.nextSameNoteOnInterval=L-j.startTime),N[a[k+1]]=_,E.some(function(e,t){var n=u.notes[e];n.pitch==a[k+1]&&null==n.stop&&(n.stop=s,n.stopTime=L,m.delete(E,t))}),E.push(u.notes.length),u.notes.push(_),s<p&&(p=s,h=L)}else E.some(function(e,t){var n=u.notes[e];if(n.pitch==a[k+1]&&null==n.stop)return V>=r.settings.holdOnValue?null==n.holdBeforeStop&&(n.holdBeforeStop=[{timing:s,time:L,value:V}]):(n.stop=s,n.stopTime=L,m.delete(E,t)),s>g&&(g=s,v=L),!0});break;case 10:break;case 11:switch(a[k+1]){case 1:A=a[k+2],E.forEach(function(e){u.notes[e].modulation.push({timing:s,time:L,value:A})});break;case 6:0==x&&0==w&&(c=a[k+2])>24&&(c=24);break;case 7:b=a[k+2];break;case 10:y=a[k+2],E.forEach(function(e){u.notes[e].pan.push({timing:s,time:L,value:y})});break;case 11:d=a[k+2],E.forEach(function(e){u.notes[e].expression.push({timing:s,time:L,value:d*(O/127)})});break;case 64:if((V=a[k+2])<r.settings.holdOnValue)for(var W=E.length-1;W>=0;W--){var C=E[W],B=u.notes[C];null==B.stop&&null!=B.holdBeforeStop&&(B.stop=s,B.stopTime=L,m.delete(E,W))}break;case 91:R=a[k+2],E.forEach(function(e){u.notes[e].reverb.push({timing:s,time:L,value:R})});break;case 93:I=a[k+2],E.forEach(function(e){u.notes[e].chorus.push({timing:s,time:L,value:I})});break;case 98:case 99:a[k+2];break;case 100:x=a[k+2];break;case 101:w=a[k+2];break;case 111:-1==l&&(l=s,f=L)}break;case 12:S=a[k+1];break;case 13:break;case 14:T=(128*a[k+2]+a[k+1]-8192)/8192*c,E.forEach(function(e){u.notes[e].pitchBend.push({timing:s,time:L,value:T})});break;case 15:switch(a[k]){case 240:case 247:if(127==a[k+1]&&127==a[k+2]&&4==a[k+3]&&1==a[k+4]){var q=a[k+6];q>127&&(q=127),O=q,E.forEach(function(e){u.notes[e].expression.push({timing:s,time:L,value:d*(O/127)})})}break;case 255:switch(a[k+1]){case 81:i+=60/t/o.resolution*(s-n),n=s,t=6e7/(65536*a[k+3]+256*a[k+4]+a[k+5])}}break;default:return{v:{v:"Error parseSMF. "}}}P=D};-1!=P;){var L=D();if("object"===k(L))return L.v}u.nowNoteOnIdxAry=E,r.debug||delete u.indices},y=0;y<16;y++){var d=T(y);if("object"===k(d))return d.v}for(y=0;y<16;y++){for(var b=s[y],A=b.nowNoteOnIdxAry,V=function(e){var t=b.notes[A[e]];null==t.stop&&(t.stop=g,t.stopTime=v,["pitchBend","pan","expression","modulation","reverb","chorus"].forEach(function(e){for(var n=t[e],i=n.length-1;i>=1;i--)n[i].timing>g&&m.delete(n,i)}),m.delete(A,e))},R=A.length-1;R>=0;R--)V(R);delete b.nowNoteOnIdxAry}this.settings.isSkipEnding&&(c=g),u.push({timing:c,time:60/t/o.resolution*(c-n)+i,value:120});var I=[];if(this.settings.isWebMIDI)for(var x=s[16],w=120,S=0,O=0,E=x.indicesHead,P=x.indices;-1!=E;){var M=P[E],N=P[E+1],D=P[E+2],L=P[E+3],F=60/w/o.resolution*(M-S)+O;switch(a[D]){case 255:switch(a[D+1]){case 81:O+=60/w/o.resolution*(M-S),S=M,w=6e7/(65536*a[D+3]+256*a[D+4]+a[D+5])}}I.push({time:F,tick:M,smfPtr:D,smfPtrLen:N}),E=L}return e.songLength=c,e.cc111Tick=l,e.cc111Time=f,e.firstNoteOnTiming=p,e.firstNoteOnTime=h,e.lastNoteOffTiming=g,e.lastNoteOffTime=v,this.settings.isWebMIDI&&(e.messages=I,e.smfData=new Uint8Array(a)),e}).call(this,i);var o={};if(o.header=i.header,o.tempoTrack=i.tempoTrack,o.beatTrack=i.beatTrack,o.channels=i.channels,o.songLength=i.songLength,o.cc111Tick=i.cc111Tick,o.cc111Time=i.cc111Time,o.firstNoteOnTiming=i.firstNoteOnTiming,o.firstNoteOnTime=i.firstNoteOnTime,o.lastNoteOffTiming=i.lastNoteOffTiming,o.lastNoteOffTime=i.lastNoteOffTime,this.settings.isWebMIDI&&(o.messages=i.messages,o.smfData=new Uint8Array(n)),this.debug){var s=performance.now();console.log("parseSMF time",s-t),console.log("parseSMF(0/2) time",r-t),console.log("parseSMF(1/2) time",a-r),console.log("parseSMF(2/2) time",s-a),console.log(o)}return o}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var x=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){this.debug=!1,this.isStarted=!1,this.isPlayed=!1,this.isTonyu2=!0,this.settings={masterVolume:1,generateVolume:.15,tempo:120,basePitch:440,resolution:480,isWebMIDI:!1,WebMIDIPortOutputs:null,WebMIDIPortOutput:null,WebMIDIPort:-1,WebMIDIPortSysEx:!0,isReverb:!0,reverbVolume:1.5,isChorus:!0,chorusVolume:.5,isCC111:!0,loop:!1,isSkipBeginning:this.isTonyu2,isSkipEnding:!0,holdOnValue:64,maxPoly:-1,maxPercPoly:-1,isOfflineRendering:!1,isSameDrumSoundOverlap:!1},this.events=[],this.trigger={isNoteTrigger:!0,play:function(){},stop:function(){},noteOn:function(){},noteOff:function(){},songEnd:function(){}},this.states={isPlaying:!1,startTime:0,stopTime:0,stopFuncs:[],webMIDIWaitState:null,webMIDIStopTime:0,playIndices:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],updateBufTime:100,updateBufMaxTime:350,updateIntervalTime:0,latencyLimitTime:0},this.hashedDataList=[],this.hashedMessageList=[],this.playData=null,this.channels=[],this.tempoTrack=[{timing:0,value:120},{timing:0,value:120}],this.cc111Time=-1,this.onSongEndListener=null;for(var n=0;n<17;n++)this.channels.push([0,0,1]);e&&this.init(e,t),"undefined"==typeof performance&&(window.performance={}),performance.now||(performance.now=function(){return Date.now()}),Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991)}.call(this,t,n)}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t){return function(e,t){if(!this.isStarted){this.isStarted=!0;var n=window.AudioContext||window.webkitAudioContext;this.context=e||new n,this.masterGainNode=this.context.createGain(),this.masterGainNode.gain.value=this.settings.masterVolume;var i=this.context.sampleRate,a=i>=48e3?48e3:i;if(t&&t.whitenoise)this.whitenoise=t.whitenoise;else{r.resetSeed();for(var s=1*i,u=1*a,c=[],l=0;l<2;l++){c.push(new Float32Array(u));for(var f=c[l],p=0;p<u;p++){var h=r.random();f[p]=2*h-1}}this.whitenoise=this.context.createBuffer(2,s,i),o.lerpWave(this.whitenoise,c)}if(t&&t.impulseResponse)this.impulseResponse=t.impulseResponse;else{r.resetSeed();for(var m=3.5*i,g=3.5*a,v=[],T=0;T<2;T++){v.push(new Float32Array(g));for(var y=v[T],d=0;d<g;d++){var b=(g-d)/g,A=d/a,V=(A<.03?0:b)*(A>=.03&&A<.031?2*b:b)*(A>=.04&&A<.042?1.5*b:b)*(A>=.05&&A<.054?1.25*b:b)*r.random()*.2*Math.pow(b-.03,4);y[d]=V}}this.impulseResponse=this.context.createBuffer(2,m,this.context.sampleRate),o.lerpWave(this.impulseResponse,v)}this.convolver=this.context.createConvolver(),this.convolver.buffer=this.impulseResponse,this.convolver.normalize=!0,this.convolverGainNode=this.context.createGain(),this.convolverGainNode.gain.value=this.settings.reverbVolume,this.convolver.connect(this.convolverGainNode),this.convolverGainNode.connect(this.masterGainNode),this.masterGainNode.connect(this.context.destination),this.chorusDelayNode=this.context.createDelay(),this.chorusGainNode=this.context.createGain(),this.chorusOscillator=this.context.createOscillator(),this.chorusLfoGainNode=this.context.createGain(),this.chorusDelayNode.delayTime.value=.025,this.chorusLfoGainNode.gain.value=.01,this.chorusOscillator.frequency.value=.05,this.chorusGainNode.gain.value=this.settings.chorusVolume,this.chorusOscillator.connect(this.chorusLfoGainNode),this.chorusLfoGainNode.connect(this.chorusDelayNode.delayTime),this.chorusDelayNode.connect(this.chorusGainNode),this.chorusGainNode.connect(this.masterGainNode),this.masterGainNode.connect(this.context.destination),this.chorusOscillator.start(0),this.isTonyu2&&(this.settings.isReverb=t?t.settings.isReverb:this.measurePerformanceReverb())}}.call(this,e,t)}},{key:"parseSMF",value:function(e){return R.call(this,e)}},{key:"setData",value:function(e){return function(e){if(this.debug)var t=performance.now();if(this.states.isPlaying&&this.stop(),this.playData=e,this.settings.resolution=e.header.resolution,this.settings.tempo=e.tempo||120,this.tempoTrack=e.tempoTrack,this.cc111Time=e.cc111Time,this.firstNoteOnTiming=e.firstNoteOnTiming,this.lastNoteOffTiming=e.lastNoteOffTiming,this.firstNoteOnTime=e.firstNoteOnTime,this.lastNoteOffTime=e.lastNoteOffTime,this.initStatus(),this.debug){var n=performance.now();console.log("setData time",n-t)}return this}.call(this,e)}},{key:"play",value:function(e){return function(e){var t=this,n=this.context,i=this.settings,r=this.trigger,a=this.states;if(!a.isPlaying){if(i.isWebMIDI&&!e){if("completed"!=a.webMIDIWaitState){if("waiting"!=a.webMIDIWaitState){a.webMIDIWaitState="waiting";var o=1e3-1e3*(n.currentTime-a.webMIDIStopTime);0==a.webMIDIStopTime&&(o=1e3),setTimeout(function(){a.webMIDIWaitState="completed",a.isPlaying=!1,t.play()},o)}return}a.webMIDIWaitState=null}var s,u=n.currentTime;if(this.isPlayed=!0,a.isPlaying=!0,a.startTime=a.startTime||a.stopTime?a.startTime+u-a.stopTime:u,a.stopFuncs=[],i.isSkipBeginning){var c=this.firstNoteOnTime;-a.startTime+u<c&&this.setStartTime(c+a.startTime-u)}var l=1e3*((i.isCC111&&-1!=this.cc111Time?this.lastNoteOffTime:this.getTime(Number.MAX_SAFE_INTEGER))-n.currentTime+a.startTime);s=setTimeout(function e(){t.clearFunc("rootTimeout",s),(i.isCC111&&-1!=t.cc111Time?t.lastNoteOffTime:t.getTime(Number.MAX_SAFE_INTEGER))-n.currentTime+a.startTime<=0?(r.songEnd(),t.onSongEnd(),t.fireEvent("songEnd")):(s=setTimeout(e,1),t.pushFunc({rootTimeout:s,stopFunc:function(){clearTimeout(s)}}))},l),this.pushFunc({rootTimeout:s,stopFunc:function(){clearTimeout(s)}}),r.play(),this.fireEvent("play"),y.init(this,u);var f=setInterval(function(){y.update(t)},1);this.pushFunc({rootTimeout:f,stopFunc:function(){clearInterval(f)}})}}.call(this,e)}},{key:"stop",value:function(e){return function(e){var t=this,n=this.states;if(0!=n.isPlaying){if(n.isPlaying=!1,n.stopTime=this.context.currentTime,n.stopFuncs.forEach(function(e){e.stopFunc()}),n.stopFuncs=[],n.playIndices.forEach(function(e,t,n){n[t]=0}),n.noteOnAry=[],n.noteOffAry=[],this.settings.isWebMIDI){if(e)return;if(null==this.settings.WebMIDIPortOutput)return;n.webMIDIStopTime=this.context.currentTime,setTimeout(function(){for(var e=0;e<16;e++)t.settings.WebMIDIPortOutput.send([176+e,120,0])},1e3)}this.trigger.stop(),this.fireEvent("stop")}}.call(this,e)}},{key:"initStatus",value:function(e,t){return function(e,t){if((!this.settings.isWebMIDI||null==this.states.webMIDIWaitState)&&(this.stop(e),this.states={isPlaying:!1,startTime:0,stopTime:0,stopFuncs:[],webMIDIWaitState:null,webMIDIStopTime:this.states.webMIDIStopTime,playIndices:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],updateBufTime:this.states.updateBufTime,updateBufMaxTime:this.states.updateBufMaxTime,updateIntervalTime:this.states.updateIntervalTime,latencyLimitTime:this.states.latencyLimitTime,noteOnAry:[],noteOffAry:[]},this.settings.isWebMIDI&&!t)){if(e)return;if(null==this.settings.WebMIDIPortOutput)return void this.startWebMIDI();if(this.settings.WebMIDIPortSysEx)this.settings.WebMIDIPortOutput.send([240,126,127,9,1,247]);else for(var n=0;n<16;n++)this.settings.WebMIDIPortOutput.send([192+n,0]),this.settings.WebMIDIPortOutput.send([224+n,0,64]),this.settings.WebMIDIPortOutput.send([176+n,100,0]),this.settings.WebMIDIPortOutput.send([176+n,101,0]),this.settings.WebMIDIPortOutput.send([176+n,6,2]),this.settings.WebMIDIPortOutput.send([176+n,100,1]),this.settings.WebMIDIPortOutput.send([176+n,96,0]),this.settings.WebMIDIPortOutput.send([176+n,97,64]),this.settings.WebMIDIPortOutput.send([176+n,7,100]),this.settings.WebMIDIPortOutput.send([176+n,10,64]),this.settings.WebMIDIPortOutput.send([176+n,11,127]),this.settings.WebMIDIPortOutput.send([176+n,98,0]),this.settings.WebMIDIPortOutput.send([176+n,99,0]),this.settings.WebMIDIPortOutput.send([176+n,122,0])}}.call(this,e,t)}},{key:"getTime",value:function(e){return function(e){var t=-1;if(this.tempoTrack&&this.tempoTrack.length>=1){if(e>=this.tempoTrack[this.tempoTrack.length-1].timing)return this.tempoTrack[this.tempoTrack.length-1].time;for(var n=0,i=this.tempoTrack.length-1;;){t=Math.floor(n+(i-n)/2);var r=this.tempoTrack[t].timing;if(e<r)i=t-1;else{if(!(e>r))break;n=t+1}if(n>i){e<r&&t--;break}}}var a=0,o=0,s=120;if(t>=0){var u=this.tempoTrack[t];a=u.time,o=u.timing,s=u.value}return a+=60/s/this.settings.resolution*(e-o)}.call(this,e)}},{key:"getTiming",value:function(e){return function(e){var t=-1;if(this.tempoTrack&&this.tempoTrack.length>=1){if(e>=this.tempoTrack[this.tempoTrack.length-1].time)return this.tempoTrack[this.tempoTrack.length-1].timing;for(var n=0,i=this.tempoTrack.length-1;;){t=Math.floor(n+(i-n)/2);var r=this.tempoTrack[t].time;if(e<r)i=t-1;else{if(!(e>r))break;n=t+1}if(n>i){e<r&&t--;break}}}var a=0,o=0,s=120;if(t>=0){var u=this.tempoTrack[t];a=u.time,o=u.timing,s=u.value}return o+=(e-a)/(60/s/this.settings.resolution)}.call(this,e)}},{key:"createBaseNote",value:function(e,t,n,i,r){return d.call(this,e,t,n,i,r)}},{key:"createNote",value:function(e){return function(e){var t=this,n=this.createBaseNote(e,!1,!0,!1,!0);if(n.isGainValueZero)return null;var i,r=n.oscillator,a=n.gainNode,o=n.stopGainNode,s=!1,u=!1;switch(1e3*this.channels[n.channel][0]||e.instrument){case 1e3:case 6:case 15:case 24:case 26:case 46:case 50:case 51:case 52:case 53:case 54:case 82:case 85:case 86:r.type="sine",a.gain.value*=1.5;break;case 2e3:case 4:case 12:case 13:case 16:case 19:case 20:case 32:case 34:case 45:case 48:case 49:case 55:case 56:case 57:case 61:case 62:case 63:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 84:r.type="square",a.gain.value*=.8;break;case 3e3:case 0:case 1:case 2:case 3:case 6:case 7:case 17:case 18:case 21:case 22:case 23:case 27:case 28:case 29:case 30:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 47:case 59:case 64:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 82:case 87:r.type="sawtooth";break;case 4e3:case 8:case 9:case 10:case 11:case 14:case 25:case 31:case 33:case 35:case 58:case 60:case 83:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:r.type="triangle",a.gain.value*=1.5;break;default:r.type="square"}switch(("sine"==r.type||"triangle"==r.type)&&!s&&n.stop-n.start>.01&&(u=!0),this.channels[n.channel][1]/10||e.instrument){case.2:case 12:case 13:case 45:case 55:s=!0,a.gain.value*=1.1,a.gain.setValueAtTime(a.gain.value,n.start),a.gain.linearRampToValueAtTime(0,n.start+.2),this.stopAudioNode(r,n.start+.2,o);break;case.3:case 0:case 1:case 2:case 3:case 6:case 9:case 11:case 14:case 15:case 32:case 36:case 37:case 46:case 47:a.gain.value*=1.1;var c=(128-e.pitch)/128;a.gain.setValueAtTime(a.gain.value,n.start),a.gain.linearRampToValueAtTime(.85*a.gain.value,n.start+c*c/8),a.gain.linearRampToValueAtTime(.8*a.gain.value,n.start+c*c/4),a.gain.setTargetAtTime(0,n.start+c*c/4,5*c*c),this.stopAudioNode(r,n.stop,o,u);break;case.4:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 34:a.gain.value*=1.1,a.gain.setValueAtTime(a.gain.value,n.start),a.gain.linearRampToValueAtTime(0,n.start+1+4*n.velocity),this.stopAudioNode(r,n.stop,o,u);break;case.5:case 4:case 5:case 7:case 8:case 10:case 33:case 35:a.gain.value*=1,a.gain.setValueAtTime(a.gain.value,n.start),a.gain.linearRampToValueAtTime(.95*a.gain.value,n.start+.1),a.gain.setValueAtTime(.95*a.gain.value,n.start+.1),a.gain.linearRampToValueAtTime(0,n.start+2+10*n.velocity),this.stopAudioNode(r,n.stop,o,u);break;case 119:if(a.gain.value=0,this.stopAudioNode(r,n.stop,o,u),(i=this.createBaseNote(e,!0,!0)).isGainValueZero)break;i.oscillator.playbackRate.setValueAtTime((e.pitch+1)/128,n.start),i.gainNode.gain.setValueAtTime(0,n.start),i.gainNode.gain.linearRampToValueAtTime(1.3,n.start+2),this.stopAudioNode(i.oscillator,n.stop,i.stopGainNode);break;default:a.gain.value*=1.1,a.gain.setValueAtTime(a.gain.value,n.start),this.stopAudioNode(r,n.stop,o,u)}return function(){t.stopAudioNode(r,0,o,!0),i&&i.oscillator&&t.stopAudioNode(i.oscillator,0,i.stopGainNode,!0)}}.call(this,e)}},{key:"createPercussionNote",value:function(e){return function(e){var t=this,n=this.createBaseNote(e,!0,!1);if(n.isGainValueZero)return null;var i=n.oscillator,r=n.gainNode,a=n.stopGainNode,o=n.start,s=this.createBaseNote(e,!1,!1,!0),u=s.oscillator,c=s.gainNode,l=s.stopGainNode,f=e.nextSameNoteOnInterval;o<this.context.currentTime&&(o=this.context.currentTime);var p=0,h=0;switch(e.pitch){case 35:case 36:r.gain.value=.6,i.playbackRate.value=.02,p=.07,c.gain.value=1.1,u.frequency.setValueAtTime(120,o),u.frequency.linearRampToValueAtTime(50,o+.07),h=.07;break;case 38:case 40:i.playbackRate.value=.7,p=.05,c.gain.setValueAtTime(.8,o),c.gain.linearRampToValueAtTime(0,o+.05),u.frequency.setValueAtTime(300,o),u.frequency.linearRampToValueAtTime(200,o+.05),h=.05;break;case 41:case 43:case 45:case 47:case 48:case 50:i.playbackRate.value=.01,p=.1,u.type="square",c.gain.setValueAtTime(1,o),c.gain.linearRampToValueAtTime(.01,o+.1),u.frequency.setValueAtTime(150+20*(e.pitch-40),o),u.frequency.linearRampToValueAtTime(50+20*(e.pitch-40),o+.1),h=.1;break;case 42:case 44:i.playbackRate.value=1.5,p=.02,h=0;break;case 46:i.playbackRate.value=1.5,p=.3,r.gain.setValueAtTime(.9,o),r.gain.linearRampToValueAtTime(0,o+.3),h=0;break;case 49:case 51:case 52:case 53:case 55:case 57:i.playbackRate.value=1.2,p=.5,r.gain.setValueAtTime(1,o),r.gain.linearRampToValueAtTime(0,o+.5),h=0;break;case 51:i.playbackRate.value=1.1,p=.4,r.gain.setValueAtTime(.8,o),r.gain.linearRampToValueAtTime(0,o+.4),h=0;break;case 59:i.playbackRate.value=1.8,p=.3,r.gain.setValueAtTime(.5,o),r.gain.linearRampToValueAtTime(0,o+.3),h=0;break;case 60:case 61:i.playbackRate.value=.03,p=.03,c.gain.setValueAtTime(.8,o),c.gain.linearRampToValueAtTime(0,o+.1),u.frequency.setValueAtTime(400-40*(e.pitch-60),o),u.frequency.linearRampToValueAtTime(450-40*(e.pitch-60),o+.1),h=.1;break;case 62:i.playbackRate.value=.03,p=.03,c.gain.setValueAtTime(1,o),c.gain.linearRampToValueAtTime(0,o+.03),u.frequency.setValueAtTime(200,o),u.frequency.linearRampToValueAtTime(250,o+.03),h=.03;break;case 63:case 64:i.playbackRate.value=.03,p=.03,c.gain.setValueAtTime(1,o),c.gain.linearRampToValueAtTime(0,o+.1),u.frequency.setValueAtTime(200-30*(e.pitch-63),o),u.frequency.linearRampToValueAtTime(250-30*(e.pitch-63),o+.1),h=.1;break;case 56:case 75:i.playbackRate.value=.01,p=.1,c.gain.setValueAtTime(1,o),c.gain.linearRampToValueAtTime(0,o+.1),u.frequency.setValueAtTime(1e3+48*(e.pitch-56),o),h=.1;break;case 80:i.playbackRate.value=5,r.gain.setValueAtTime(.5,o),r.gain.linearRampToValueAtTime(0,o+.2),p=.05,u.type="triangle",c.gain.setValueAtTime(.7,o),c.gain.linearRampToValueAtTime(0,o+.2),u.frequency.setValueAtTime(6e3,o),h=.05;break;case 81:i.playbackRate.value=5,r.gain.setValueAtTime(.9,o),r.gain.linearRampToValueAtTime(0,o+.5),p=.5,u.type="triangle",c.gain.setValueAtTime(.8,o),c.gain.linearRampToValueAtTime(0,o+.3),u.frequency.setValueAtTime(6e3,o),h=.3;break;case 35:case 36:i.playbackRate.value=.25,r.gain.setValueAtTime(0,o),r.gain.linearRampToValueAtTime(.7,o+.004),r.gain.linearRampToValueAtTime(0,o+.008),p=.008,u.frequency.setValueAtTime(35==e.pitch?90:160,o),u.frequency.linearRampToValueAtTime(40,o+.08),c.gain.setValueAtTime(0,o),c.gain.linearRampToValueAtTime(3,o+.02),c.gain.linearRampToValueAtTime(0,o+.08),h=.08;break;case 37:i.playbackRate.value=.26,r.gain.setValueAtTime(1.5,o),r.gain.linearRampToValueAtTime(0,o+.041),p=.041,u.frequency.setValueAtTime(330,o),u.frequency.linearRampToValueAtTime(120,o+.02),c.gain.setValueAtTime(1,o),c.gain.linearRampToValueAtTime(0,o+.02),h=.02;break;case 38:case 40:var m=38==e.pitch?.25:.2;i.playbackRate.value=.7,r.gain.setValueAtTime(1,o),r.gain.linearRampToValueAtTime(0,o+m),p=m,u.frequency.setValueAtTime(38==e.pitch?140:200,o),u.frequency.linearRampToValueAtTime(38==e.pitch?100:160,o+.1),c.gain.setValueAtTime(2,o),c.gain.linearRampToValueAtTime(0,o+.1),h=.1;break;case 39:i.playbackRate.value=.5,r.gain.setValueAtTime(1.3,o),r.gain.linearRampToValueAtTime(0,o+.01),r.gain.setValueAtTime(1.3,o+.0101),r.gain.linearRampToValueAtTime(0,o+.02),r.gain.setValueAtTime(1.3,o+.0201),r.gain.linearRampToValueAtTime(0,o+.09),p=.09,u.type="triangle",u.frequency.setValueAtTime(180,o),c.gain.setValueAtTime(.8,o),c.gain.linearRampToValueAtTime(0,o+.01),c.gain.setValueAtTime(.8,o+.0101),c.gain.linearRampToValueAtTime(0,o+.02),c.gain.setValueAtTime(.8,o+.0201),c.gain.linearRampToValueAtTime(0,o+.03),h=.11;break;case 41:case 43:case 45:case 47:case 48:case 50:var g=e.pitch-41+(e.pitch>=48?1:0);i.playbackRate.value=.3+g/45,r.gain.setValueAtTime(1.5,o),r.gain.linearRampToValueAtTime(0,o+.02),p=.02,u.frequency.setValueAtTime(90+15*g,o),u.frequency.linearRampToValueAtTime(30+7.5*g,o+.5-g/35),c.gain.setValueAtTime(1.5,o),c.gain.linearRampToValueAtTime(0,o+.5-g/35),h=.5-g/35;break;case 42:case 44:i.playbackRate.value=1,42==e.pitch?r.gain.setValueAtTime(.8,o):(r.gain.setValueAtTime(0,o),r.gain.linearRampToValueAtTime(.8,o+.014)),r.gain.linearRampToValueAtTime(0,o+.08),p=.08,c.gain.value=0,h=0;break;case 46:i.playbackRate.setValueAtTime(.35,o),i.playbackRate.linearRampToValueAtTime(.6,o+.1),i.playbackRate.linearRampToValueAtTime(1,o+.3),r.gain.setValueAtTime(1.1,o),r.gain.setTargetAtTime(0,o,.3),p=1.5,c.gain.value=0,h=0;break;case 49:case 57:var v=49==e.pitch?.3:.5,T=49==e.pitch?.4:.7;i.playbackRate.setValueAtTime(v,o),i.playbackRate.linearRampToValueAtTime(T,o+.15),i.playbackRate.linearRampToValueAtTime(.9,o+.4),r.gain.setValueAtTime(1.3,o),r.gain.setTargetAtTime(0,o,.35),p=2,c.gain.value=0,h=0;break;case 51:case 59:i.playbackRate.value=1,r.gain.setValueAtTime(.9,o),r.gain.setTargetAtTime(0,o,.35),p=2,u.type="triangle";var y=51==e.pitch?372:400;u.frequency.setValueAtTime(y,o),c.gain.setValueAtTime(.4,o),c.gain.setTargetAtTime(0,o,.35),h=2;break;case 52:i.playbackRate.setValueAtTime(.17,o),i.playbackRate.linearRampToValueAtTime(.25,o+.1),i.playbackRate.linearRampToValueAtTime(.5,o+.6),r.gain.setValueAtTime(1.3,o),r.gain.setTargetAtTime(0,o,.35),p=2,u.type="triangle",u.frequency.setValueAtTime(382,o),c.gain.setValueAtTime(.2,o),c.gain.setTargetAtTime(0,o,.35),h=2;break;case 53:i.playbackRate.setValueAtTime(.6,o),r.gain.setValueAtTime(1,o),r.gain.setTargetAtTime(0,o,.3),p=2,u.type="triangle",u.frequency.setValueAtTime(377,o),c.gain.setValueAtTime(.5,o),c.gain.setTargetAtTime(0,o,.35),h=2;break;case 55:i.playbackRate.setValueAtTime(.5,o),i.playbackRate.linearRampToValueAtTime(.8,o+.1),i.playbackRate.linearRampToValueAtTime(1,o+.6),r.gain.setValueAtTime(1.5,o),r.gain.setTargetAtTime(0,o,.3),p=1.75,c.gain.value=0,h=0;break;case 54:case 56:i.playbackRate.setValueAtTime(1,o);var d=54==e.pitch?1:.4,b=54==e.pitch?.01:0;r.gain.setValueAtTime(1*d/2,o),r.gain.linearRampToValueAtTime(1*d,o+b),r.gain.setTargetAtTime(0,o+b,.05),p=.3,u.frequency.setValueAtTime(54==e.pitch?6e3:495,o),d=54==e.pitch?1:2,c.gain.setValueAtTime(1*d/2,o),c.gain.linearRampToValueAtTime(1*d,o+b),c.gain.setTargetAtTime(0,o+b,.05),h=.3;break;case 58:i.playbackRate.setValueAtTime(.6,o),i.playbackRate.linearRampToValueAtTime(1,o+.8),r.gain.setValueAtTime(1.5,o),c.gain.setValueAtTime(.5,o);for(var A=0;A<40;A++)r.gain.linearRampToValueAtTime(.1*(40-A)/40,o+A/40*.8),r.gain.linearRampToValueAtTime(1.5*(40-(A+1))/40,o+(A+.99)/40*.8),c.gain.linearRampToValueAtTime(.025*(40-A)/40,o+A/40*.8),c.gain.linearRampToValueAtTime(.25*(40-(A+1))/40,o+(A+.99)/40*.8);r.gain.linearRampToValueAtTime(0,o+.8),c.gain.linearRampToValueAtTime(0,o+.8),p=.8,u.type="triangle",u.frequency.setValueAtTime(1e3,o),h=.8;break;case 80:i.playbackRate.value=1,r.gain.setValueAtTime(.5,o),r.gain.setTargetAtTime(0,o,.015),p=.2,u.type="triangle",u.frequency.setValueAtTime(6e3,o),c.gain.setValueAtTime(2.5,o),c.gain.setTargetAtTime(0,o,.02),h=.3;break;case 81:i.playbackRate.value=5,r.gain.setValueAtTime(.5,o),r.gain.setTargetAtTime(0,o,.08),p=.75,u.type="triangle",u.frequency.setValueAtTime(6e3,o),c.gain.setValueAtTime(2.5,o),c.gain.setTargetAtTime(0,o,.18),h=1;break;case 60:case 61:case 62:case 63:case 64:var V=e.pitch,k=60==V?700:61==V?282:62==V?385:63==V?295:210,R=60==V?.08:61==V?.1:62==V?.03:63==V?.12:.15;i.playbackRate.value=.03,r.gain.setValueAtTime(1.2,o),p=.03,u.frequency.setValueAtTime(.97*k,o),u.frequency.linearRampToValueAtTime(k,o+R),c.gain.setValueAtTime(1.8,o),c.gain.linearRampToValueAtTime(0,o+R),h=R;break;case 65:case 66:var I=65==e.pitch?.22:.25;i.playbackRate.setValueAtTime(65==e.pitch?.25:.22,o),i.playbackRate.linearRampToValueAtTime(65==e.pitch?.2:.18,o+I),r.gain.setValueAtTime(1.3,o),r.gain.linearRampToValueAtTime(.2,o+I/3.5),r.gain.linearRampToValueAtTime(0,o+I),p=I,u.type="triangle",u.frequency.setValueAtTime(65==e.pitch?203.3:145.52,o),u.frequency.linearRampToValueAtTime(65==e.pitch?190:136,o+.1),c.gain.setValueAtTime(3.2,o),c.gain.setTargetAtTime(0,o,.08),h=1;break;case 67:case 68:i.playbackRate.value=1,r.gain.setValueAtTime(.5,o),r.gain.linearRampToValueAtTime(.1,o+.02),r.gain.linearRampToValueAtTime(0,o+.08),p=.08,u.type="triangle",u.frequency.setValueAtTime(67==e.pitch?1430:1055,o),c.gain.setValueAtTime(2,o),c.gain.setTargetAtTime(0,o,.06),h=.75;break;case 69:i.playbackRate.value=1,r.gain.setValueAtTime(.3,o),r.gain.linearRampToValueAtTime(.8,o+.03),r.gain.linearRampToValueAtTime(0,o+.08),p=.08,c.gain.value=0,h=0;break;case 70:i.playbackRate.value=1,r.gain.setValueAtTime(1.2,o),r.gain.linearRampToValueAtTime(0,o+.06),p=.06,c.gain.value=0,h=0;break;case 71:case 72:r.gain.value=0,p=0;var x=71==e.pitch?.07:.4;u.type="triangle",u.frequency.setValueAtTime(71==e.pitch?2408:2105,o),c.gain.setValueAtTime(0,o);for(var w=0;w<74*x;w++)c.gain.linearRampToValueAtTime(2.5,o+(w+.2)/75),c.gain.linearRampToValueAtTime(.5,o+(w+.9)/75);c.gain.linearRampToValueAtTime(0,o+x),h=x;break;case 73:case 74:var S=73==e.pitch?.05:.35;i.playbackRate.setValueAtTime((e.pitch,.2),o),i.playbackRate.linearRampToValueAtTime(73==e.pitch?.7:.5,o+S),r.gain.value=.2;for(var O=0;O<100*S;O++)r.gain.setValueAtTime(.4,o+O/100),r.gain.setValueAtTime(.9,o+(O+.7)/100);p=S,c.gain.value=0,h=0;break;case 75:r.gain.value=0,p=0,u.frequency.setValueAtTime(2181,o),c.gain.setValueAtTime(0,o),c.gain.setValueAtTime(2,o+.005),c.gain.linearRampToValueAtTime(1,o+.015),c.gain.linearRampToValueAtTime(1.5,o+.025),c.gain.linearRampToValueAtTime(0,o+.08),h=.1;break;case 76:case 77:i.playbackRate.value=.1,r.gain.setValueAtTime(1.2,o),r.gain.linearRampToValueAtTime(0,o+.015),p=.015,u.frequency.setValueAtTime(76==e.pitch?800:600,o),c.gain.setValueAtTime(0,o),c.gain.linearRampToValueAtTime(3,o+.005),c.gain.setTargetAtTime(0,o+.005,.02),h=.2;break;case 78:case 79:r.gain.value=0,p=0;var E=78==e.pitch?750:270;u.frequency.setValueAtTime(E,o),u.frequency.linearRampToValueAtTime(E,o+.06),78==e.pitch&&u.frequency.linearRampToValueAtTime(.9*E,o+.18),c.gain.setValueAtTime(0,o),c.gain.linearRampToValueAtTime(1.5,o+.005),c.gain.linearRampToValueAtTime(.5,o+.02),c.gain.linearRampToValueAtTime(3,o+.04),c.gain.linearRampToValueAtTime(2,o+.135),c.gain.linearRampToValueAtTime(0,o+.18),h=.18;break;case 27:i.playbackRate.value=1,r.gain.setValueAtTime(1,o),r.gain.linearRampToValueAtTime(0,o+.002),p=.002,u.frequency.setValueAtTime(1500,o),u.frequency.linearRampToValueAtTime(280,o+.015),u.frequency.linearRampToValueAtTime(0,o+.07),c.gain.setValueAtTime(1.9,o),c.gain.linearRampToValueAtTime(0,o+.07),h=.07;break;case 28:i.playbackRate.value=1,r.gain.setValueAtTime(1.3,o),r.gain.linearRampToValueAtTime(0,o+.01),r.gain.setValueAtTime(1.1,o+.0101),r.gain.linearRampToValueAtTime(0,o+.02),r.gain.setValueAtTime(.9,o+.0201),r.gain.setTargetAtTime(0,o+.0201,.03),p=.2,c.gain.value=0,h=0;break;case 29:case 30:var P=29==e.pitch?.05:.07,M=29==e.pitch?.06:.09,N=29==e.pitch?.07:.11,D=29==e.pitch?.1:.15,L=29==e.pitch?.25:.4,F=29==e.pitch?.1:.06,_=29==e.pitch?.3:.2,j=29==e.pitch?.18:.12;i.playbackRate.setValueAtTime(F,o),i.playbackRate.linearRampToValueAtTime(_,o+P),i.playbackRate.linearRampToValueAtTime(0,o+M),i.playbackRate.linearRampToValueAtTime(_,o+N),i.playbackRate.linearRampToValueAtTime(j,o+D),i.playbackRate.linearRampToValueAtTime(0,o+L),r.gain.setValueAtTime(0,o),r.gain.linearRampToValueAtTime(.4,o+P),r.gain.linearRampToValueAtTime(.1,o+N),r.gain.linearRampToValueAtTime(.3,o+D),r.gain.linearRampToValueAtTime(0,o+L),p=L;var W=29==e.pitch?500:400,C=29==e.pitch?1950:1200,B=29==e.pitch?430:250;u.frequency.setValueAtTime(W,o),u.frequency.linearRampToValueAtTime(C,o+P),u.frequency.linearRampToValueAtTime(0,o+M),u.frequency.linearRampToValueAtTime(C,o+N),u.frequency.linearRampToValueAtTime(B,o+D),u.frequency.linearRampToValueAtTime(0,o+L),c.gain.setValueAtTime(0,o),c.gain.linearRampToValueAtTime(.7,o+P),c.gain.linearRampToValueAtTime(.2,o+N),c.gain.linearRampToValueAtTime(.6,o+D),c.gain.linearRampToValueAtTime(0,o+L),h=L;break;case 31:i.playbackRate.setValueAtTime(.4,o),i.playbackRate.linearRampToValueAtTime(.5,o+.015),r.gain.setValueAtTime(1.2,o),r.gain.setTargetAtTime(0,o,.035),p=.3,u.frequency.setValueAtTime(3140,o),c.gain.setValueAtTime(1.2,o),c.gain.setTargetAtTime(0,o,.012),h=.3;break;case 32:r.gain.value=0,p=0,u.type="square",u.frequency.setValueAtTime(333,o),c.gain.setValueAtTime(0,o),c.gain.linearRampToValueAtTime(4,o+.0016),c.gain.linearRampToValueAtTime(0,o+.0032),h=.0032;break;case 33:case 34:i.playbackRate.setValueAtTime(.17,o),i.playbackRate.linearRampToValueAtTime(.22,o+.01),r.gain.setValueAtTime(1.5,o),r.gain.setTargetAtTime(0,o,.015),p=.3,34==e.pitch?(u.frequency.setValueAtTime(2040,o),c.gain.setValueAtTime(1,o),c.gain.setTargetAtTime(0,o,.12),h=1.1):(c.gain.value=0,h=0);break;case 82:i.playbackRate.value=1,r.gain.setValueAtTime(.5,o),r.gain.linearRampToValueAtTime(1,o+.02),r.gain.linearRampToValueAtTime(0,o+.07),p=.07,c.gain.value=0,h=0;break;case 83:i.playbackRate.value=1,r.gain.setValueAtTime(0,o),r.gain.linearRampToValueAtTime(1.2,o+.015),r.gain.setTargetAtTime(0,o+.015,.06),p=.5,u.type="triangle",u.frequency.setValueAtTime(2709,o),u.frequency.linearRampToValueAtTime(2657,o+.3),c.gain.setValueAtTime(0,o),c.gain.linearRampToValueAtTime(.7,o+.025),c.gain.setTargetAtTime(0,o+.025,.07),h=.5;break;case 84:i.playbackRate.value=1;for(var q=0;q<28;q++)r.gain.setValueAtTime(.1,o+q/24*.45),r.gain.setTargetAtTime(0,o+q/24*.45,.01),u.frequency.setValueAtTime(1380*(1+q/24),o+q/24*.45),c.gain.setValueAtTime(1*(.2+q/24),o+q/24*.45),c.gain.setTargetAtTime(0,o+q/24*.45,27==q?.2:.01);p=.5,h=1.5;break;case 85:i.playbackRate.setValueAtTime(.35,o),r.gain.setValueAtTime(1.3,o),r.gain.setTargetAtTime(0,o,.01),p=.1,u.frequency.setValueAtTime(1730,o),c.gain.setValueAtTime(.5,o),c.gain.setTargetAtTime(0,o,.01),h=.1;break;case 86:case 87:i.playbackRate.setValueAtTime(.02,o),i.playbackRate.linearRampToValueAtTime(.015,o+.5),r.gain.setValueAtTime(0,o),r.gain.linearRampToValueAtTime(2,o+.005),r.gain.setTargetAtTime(0,o+.005,86==e.pitch?.03:.06),p=.5,u.frequency.setValueAtTime(88,o),u.frequency.linearRampToValueAtTime(86,o+.3),c.gain.setValueAtTime(2.5,o),c.gain.setTargetAtTime(0,o,86==e.pitch?.1:.3),h=86==e.pitch?.5:1.5;break;default:i.playbackRate.value=e.pitch/69*2,p=.05,h=0}return this.settings.isSameDrumSoundOverlap||-1==f||(p>f&&(p=f),h>f&&(h=f)),this.stopAudioNode(i,o+p,a),this.stopAudioNode(u,o+h,l),e.drumStopTime=e.startTime+(p>=h?p:h),function(){t.stopAudioNode(i,0,a,!0),t.stopAudioNode(u,0,l,!0)}}.call(this,e)}},{key:"stopAudioNode",value:function(e,t,n,i){return function(e,t,n,i){var r=t-.005,a=t;t<=this.context.currentTime&&(i?(r=this.context.currentTime,a=this.context.currentTime+.005):a=this.context.currentTime);try{i?(e.stop(a),n.gain.cancelScheduledValues(0),n.gain.setValueAtTime(1,r),n.gain.linearRampToValueAtTime(0,a)):e.stop(a)}catch(e){n.gain.cancelScheduledValues(0),i?(n.gain.setValueAtTime(1,r),n.gain.linearRampToValueAtTime(0,a)):n.gain.setValueAtTime(0,a)}}.call(this,e,t,n,i)}},{key:"pushFunc",value:function(e){return function(e){(e.note||e.rootTimeout||e.pan||this.trigger.isNoteTrigger)&&this.states.stopFuncs.push(e)}.call(this,e)}},{key:"clearFunc",value:function(e,t){return function(e,t){("note"==e||"rootTimeout"==e||"pan"==e||this.trigger.isNoteTrigger)&&this.states.stopFuncs.some(function(n,i,r){if(n[e]==t)return m.delete(r,i),!0})}.call(this,e,t)}},{key:"startWebMIDI",value:function(){return function(){var e,t=this;if(navigator.requestMIDIAccess){var n=this.settings.WebMIDIPortSysEx,i=function(i){var r;return e=i.outputs,t.settings.WebMIDIPortOutputs=e,-1==t.settings.WebMIDIPort?t.settings.WebMIDIPortOutputs.forEach(function(e){r||(r=e)}):r=t.settings.WebMIDIPortOutputs.get(settings.WebMIDIPort),t.settings.WebMIDIPortOutput=r,t.settings.WebMIDIPortSysEx=n,r&&(r.open(),t.initStatus()),e};navigator.requestMIDIAccess({sysex:n}).then(i).catch(function e(t){console.log(t),n&&(n=!1,navigator.requestMIDIAccess({sysex:n}).then(i).catch(e))}),window.addEventListener("unload",function(e){for(var n=0;n<16;n++){t.settings.WebMIDIPortOutput.send([176+n,120,0]);for(var i=0;i<128;i++)t.settings.WebMIDIPortOutput.send([128+n,i,0])}})}}.call(this)}},{key:"measurePerformanceReverb",value:function(){return V.measureReverb.call(this)}},{key:"addEventListener",value:function(e,t){this.events.push({type:e,func:t})}},{key:"fireEvent",value:function(e,t){this.events.forEach(function(n){if(n.type==e)try{n.func(t)}catch(e){console.log(e)}})}},{key:"getChannels",value:function(){return this.channels}},{key:"setChannels",value:function(e){var t=this;e.forEach(function(e,n){t.channels[n]=e})}},{key:"initChannels",value:function(){for(var e=0;e<16;e++)this.channels[e]=[0,0,1]}},{key:"getMasterVolume",value:function(){return this.settings.masterVolume}},{key:"setMasterVolume",value:function(e){this.settings.masterVolume=e,this.isStarted&&(this.masterGainNode.gain.value=this.settings.masterVolume)}},{key:"isLoop",value:function(){return this.settings.loop}},{key:"setLoop",value:function(e){this.settings.loop=e}},{key:"isWebMIDI",value:function(){return this.settings.isWebMIDI}},{key:"setWebMIDI",value:function(e){this.settings.isWebMIDI=e}},{key:"isCC111",value:function(){return this.settings.isCC111}},{key:"setCC111",value:function(e){this.settings.isCC111=e}},{key:"setStartTime",value:function(e){this.states.startTime-=e}},{key:"setOnSongEndListener",value:function(e){this.onSongEndListener=e}},{key:"onSongEnd",value:function(){if(this.onSongEndListener&&this.onSongEndListener())return;this.settings.loop&&(this.initStatus(!0),this.settings.isCC111&&-1!=this.cc111Time&&this.setStartTime(this.cc111Time),this.play(!0))}},{key:"isReverb",value:function(){return this.settings.isReverb}},{key:"setReverb",value:function(e){this.settings.isReverb=e}},{key:"getReverbVolume",value:function(){return this.settings.reverbVolume}},{key:"setReverbVolume",value:function(e){this.settings.reverbVolume=e}},{key:"isChorus",value:function(){return this.settings.isChorus}},{key:"setChorus",value:function(e){this.settings.isChorus=e}},{key:"getChorusVolume",value:function(){return this.settings.chorusVolume}},{key:"setChorusVolume",value:function(e){this.settings.chorusVolume=e}}])&&I(t.prototype,n),i&&I(t,i),e}();window.PicoAudio=x}]);