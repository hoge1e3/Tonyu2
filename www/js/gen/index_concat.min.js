function HttpHelper(t){var e={},r=t.lineMark;return e.buf=$("<div>"),e.bufs=[e.buf],e.maxLineNo=-1,e.cur=function(){return e.bufs[e.bufs.length-1]},e.p=function(t){"string"==typeof t&&(t=t.length>0?$("<span>").text(t):null),e.cur()?(e.lineNo>e.maxLineNo&&(e.maxLineNo=e.lineNo,e.cur().append($("<a>").attr({id:r+"-"+e.lineNo,name:r+"-"+e.lineNo}))),t&&e.cur().append(t)):console.log("Warning - Stack underflow")},e.enter=function(t){"string"==typeof t&&(t=$(t)),e.bufs.push(t)},e.exit=function(){var t=e.bufs.pop();e.p(t)},e.h=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e}!function(){var t={};return t.def=function(e,r,n){var i=t.getModuleInfo(t.curName);i.type=n,t.setReqs(i,e),i.func=function(){return r.apply(this,t.getObjs(e))},t.loadIfAvailable(i)},define=function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]&&(t.curName=e.shift());var r=e.shift(),n=e.shift();t.def(r,n,"define")},define.amd={jQuery:!0},requirejs=function(e,r){t.def(e,r,"require")},t.setReqs=function(e,r){r.forEach(function(r){var n=t.getModuleInfo(r);n.loaded||(e.reqs[r]=n,n.revReqs[e.name]=e)})},t.getModuleInfo=function(e){var r=t.modules;return r[e]||(r[e]={name:e,reqs:{},revReqs:{}}),r[e]},t.doLoad=function(e){var r=t.getModuleInfo(e);if(r.loaded)return r.obj;r.loaded=!0;var n=null;if(r.func)n=r.func();else{var i=e.split(/\./);n=function(){return this}(),i.forEach(function(t){n&&(n=n[t])}),null==n&&console.log("Warning: No obj for "+e)}if("define"==r.type&&null==n)throw"No obj for "+e;r.obj=n;for(var o in r.revReqs)t.notifyLoaded(r.revReqs[o],r.name);return n},t.notifyLoaded=function(e,r){delete e.reqs[r],t.loadIfAvailable(e)},t.loadIfAvailable=function(e){for(var r in e.reqs)return;t.doLoad(e.name)},t.getObjs=function(e){var r=[];return e.forEach(function(e){var n=t.doLoad(e);r.push(n)}),r},t.modules={},t.setName=function(e){t.curName&&(t.getModuleInfo(t.curName).func||t.doLoad(t.curName)),e&&(t.curName=e)},requireSimulator=t,t}(),requireSimulator.setName("FS"),define([],function(){var t,e,n={},i="REQJS_",o=0;n.def=function(t,e,r){var i=n.getModuleInfo(t);"function"==typeof e?(r=e,e=n.reqsFromFunc(r),n.setReqs(i,e),i.func=function(){var t={exports:{}},e=r(n.doLoad,t,t.exports);return e||t.exports}):(n.setReqs(i,e),i.func=function(){return r.apply(this,n.getObjs(e))}),n.loadIfAvailable(i)},t=function(t,e,r){n.def(t,e,r)},t.amd={},e=function(t,e){n.def(i+o++,t,e)},n.setReqs=function(t,e){e.forEach(function(e){var r=n.getModuleInfo(e);r.loaded||(t.reqs[e]=r,r.revReqs[t.name]=t)})},n.getModuleInfo=function(t){var e=n.modules;return e[t]=e[t]||{name:t,reqs:{},revReqs:{}}},n.doLoad=function(t){var e=n.getModuleInfo(t);if(e.loaded)return e.obj;e.loaded=!0;var r=e.func();null!=r||t.match(/^REQJS_/)||console.log("Warning: No obj for "+t),e.obj=r;for(var i in e.revReqs)n.notifyLoaded(e.revReqs[i],e.name);return r},n.notifyLoaded=function(t,e){delete t.reqs[e],n.loadIfAvailable(t)},n.loadIfAvailable=function(t){for(var e in t.reqs)return;n.doLoad(t.name)},n.getObjs=function(t){var e=[];return t.forEach(function(t){var r=n.doLoad(t);e.push(r)}),e},n.reqsFromFunc=function(t){var e=t+"",r=[];return e.replace(/require\s*\(\s*["']([^"']+)["']\s*\)/g,function(t,e){r.push(e)}),r},n.modules={},t("extend",[],function(){return function(t,e){for(var r in e)t[r]=e[r]}}),t("assert",[],function(){function t(e){if(e instanceof Array){var r=[];return e.forEach(function(e){r=r.concat(t(e))}),r}return[e]}var e,r=function(e){this.failMesg=t(e||"Assertion failed: ")};r.prototype={_regedType:{},registerType:function(t,e){this._regedType[t]=e},MODE_STRICT:"strict",MODE_DEFENSIVE:"defensive",MODE_BOOL:"bool",fail:function(){var r=e(arguments),n=r.shift();if(r=t(r),r=this.failMesg.concat(n).concat(r).concat(["mode",this._mode]),console.log.apply(console,r),this.isDefensive())return n;if(this.isBool())return!1;throw new Error(r.join(" "))},subAssertion:function(){var n=e(arguments);return n=t(n),new r(this.failMesg.concat(n))},assert:function(t,e){return t?t:this.fail(t,e)},eq:function(t,e){return t!==e?this.fail(t,"!==",e):this.isBool()?!0:t},ne:function(t,e){return t===e?this.fail(t,"===",e):this.isBool()?!0:t},isset:function(t,e){return null==t?this.fail(t,(e||"")+" is null/undef"):this.isBool()?!0:t},is:function(t,e){var r=e,n=t;if(null==r)return this.fail(t,"assert.is: type must be set");if(r._assert_func)return r._assert_func.apply(this,[n]),this.isBool()?!0:t;if(this.assert(null!=t,[t,"should be ",r]),r instanceof Array||"object"==typeof global&&"function"==typeof global.Array&&r instanceof global.Array){if(!t||"number"!=typeof t.length)return this.fail(t,"should be array:");for(var i=this,o=0;o<r.length;o++){var s=i.subAssertion("failed at ",t,"[",o,"]: ");null==r[o]&&console.log("WOW!7",n[o],r[o]),s.is(n[o],r[o])}return this.isBool()?!0:t}if(r===String||"string"==r)return this.assert("string"==typeof n,[n,"should be a string "]),this.isBool()?!0:t;if(r===Number||"number"==r)return this.assert("number"==typeof n,[n,"should be a number"]),this.isBool()?!0:t;if(r instanceof RegExp||"object"==typeof global&&"function"==typeof global.RegExp&&r instanceof global.RegExp)return this.is(n,String),this.assert(r.exec(n),[n,"does not match to",r]),this.isBool()?!0:t;if(r===Function)return this.assert("function"==typeof n,[n,"should be a function"]),this.isBool()?!0:t;if("function"==typeof r)return this.assert(n instanceof r,[n,"should be ",r]),this.isBool()?!0:t;if(r&&"object"==typeof r){for(var a in r){var s=this.subAssertion("failed at ",t,".",a,":");s.is(t[a],r[a])}return this.isBool()?!0:t}if("string"==typeof r){var u=this._regedType[r];return u?this.is(t,u):this.isBool()?!0:t}return this.fail(t,"Invaild type: ",r)},ensureError:function(t,e){try{t()}catch(r){return"string"==typeof e&&i(r+""===e,t+" thrown an error "+r+" but expected:"+e),void console.log("Error thrown successfully: ",r.message)}this.fail(t,"should throw an error",e)},setMode:function(t){this._mode=t},isDefensive:function(){return this._mode===this.MODE_DEFENSIVE},isBool:function(){return this._mode===this.MODE_BOOL},isStrict:function(){return!this.isDefensive()&&!this.isBool()}},e=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e};var n=new r,i=function(){try{return n.assert.apply(n,arguments)}catch(t){throw new Error(t.stack)}};return["setMode","isDefensive","is","isset","ne","eq","ensureError"].forEach(function(t){i[t]=function(){try{return n[t].apply(n,arguments)}catch(e){throw console.log(e.stack),new Error(e.message)}}}),i.fail=n.fail.bind(n),i.MODE_STRICT=n.MODE_STRICT,i.MODE_DEFENSIVE=n.MODE_DEFENSIVE,i.MODE_BOOL=n.MODE_BOOL,i.f=function(t){return{_assert_func:t}},i.opt=function(t){return i.f(function(e){return null==e||e instanceof t})},i.and=function(){var t=e(arguments);return i(t instanceof Array),i.f(function(e){for(var r=this,n=0;n<t.length;n++)r.is(e,t[n])})},i}),t("PathUtil",["assert"],function(t){function e(e,r){return t.is(arguments,[String,String]),e.substring(e.length-r.length)===r}function r(e,r){return t.is(arguments,[String,String]),e.substring(0,r.length)===r}var n,i=/^([a-zA-Z]):/,o=/^([a-z\-]+):\/\/\/?([^\/]+)\//,s=t.f(function(t){this.is(t,String),this.assert(n.isPath(t),[t," is not a path"])}),a=t.f(function(t){this.is(t,String),this.assert(n.isAbsolutePath(t),[t," is not a absolute path"])}),u=t.f(function(t){this.is(t,String),this.assert(!n.isAbsolutePath(t),[t," is not a relative path"])}),c=t.f(function(t){this.is(t,s),this.assert(n.isDir(t),[t," is not a directory path"])}),f=t.and(c,a),l=t.f(function(t){this.is(t,s),this.assert(!n.isDir(t),[t," is not a file path"])}),h="/";return n={Path:s,Absolute:a,Relative:u,Dir:c,File:l,AbsDir:f,SEP:h,endsWith:e,startsWith:r,hasDriveLetter:function(t){return i.exec(t)},isURL:function(t){var e=o.exec(t);if(e)return{protocol:e[1],hostPort:e[2],path:h+t.substring(e[0].length)}},isPath:function(){return t.is(arguments,[String]),!0},isRelativePath:function(e){return t.is(arguments,[String]),n.isPath(e)&&!n.isAbsolutePath(e)},isAbsolutePath:function(e){return t.is(arguments,[String]),n.isPath(e)&&(n.startsWith(e,h)||n.hasDriveLetter(e)||n.isURL(e))},isDir:function(r){return r=n.fixSep(r),t.is(arguments,[s]),e(r,h)},hasBackslashSep:function(t){return t.indexOf("\\")>=0},fixSep:function(e,r){return r=r||"/",t.is(arguments,[String]),t.is(e.replace(/[\\\/]/g,r),s)},directorify:function(e){return n.isDir(e)?e:t.is(e+h,c)},filify:function(e){return n.isDir(e)?t.is(e.substring(0,e.length-1),l):e},splitPath:function(e){t.is(arguments,[s]);var r;if(r=this.isURL(e)){var n=this.splitPath(r.path);return n[0]=r.protocol+"://"+r.hostPort,n}e=e.replace(/\/+/g,h);var i=e.split(h);return""==i[i.length-1]&&(i[i.length-2]+=h,i.pop()),i},name:function(e){return t.is(arguments,[String]),n.splitPath(e).pop()},ext:function(e){t.is(arguments,[String]);var r=n.name(e),i=/\.[a-zA-Z0-9]+$/.exec(r);return i?i[0]:null},truncExt:function(e,r){t.is(e,String);var i=n.name(e);return r=r||n.ext(e),t.is(r,String),i.substring(0,i.length-r.length)},truncSEP:function(e){return t.is(arguments,[s]),n.isDir(e)?e.substring(0,e.length-1):e},endsWith:function(r,i){return t.is(arguments,[String,String]),e(n.name(r),i)},parent:function(e){return t.is(arguments,[String]),n.up(e)},rel:function(e,r){if(""==r)return e;t.is(arguments,[f,u]);var i=n.splitPath(r),o=e;o=o.replace(/\/$/,"");var s=n;return i.forEach(function(t){".."==t||"../"==t?o=s.up(o):(o=o.replace(/\/$/,""),o+=h+("."==t||"./"==t?"":t))}),o},relPath:function(e,r){return t.is(arguments,[a,a]),e.substring(0,r.length)!=r?"../"+n.relPath(e,this.up(r)):e.substring(r.length)},up:function(t){if(t==h)return null;var e=n.splitPath(t);return e.pop(),e.join(h)+h}},["directorify","filify","splitPath","name","rel","relPath","up"].forEach(function(t){var e=n[t];n[t]=function(){var t=!1,r=Array.prototype.slice.call(arguments).map(function(e){return n.hasBackslashSep(e)?(t=!0,n.fixSep(e)):e}),i=e.apply(n,r);return t?n.fixSep(i,"\\"):i}}),n.isAbsolute=n.isAbsolutePath,n.isRelative=n.isRelativePath,"object"==typeof window&&(window.PathUtil=n),n}),t("MIMETypes",[],function(){return{".png":"image/png",".gif":"image/gif",".jpeg":"image/jpeg",".jpg":"image/jpeg",".ico":"image/icon",".wav":"audio/x-wav",".mp3":"audio/mp3",".ogg":"audio/ogg",".midi":"audio/midi",".mid":"audio/midi",".txt":"text/plain",".html":"text/html",".htm":"text/html",".css":"text/css",".js":"text/javascript",".json":"text/json",".zip":"application/zip",".swf":"application/x-shockwave-flash",".pdf":"application/pdf",".doc":"application/word",".xls":"application/excel",".ppt":"application/powerpoint",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".docm":"application/vnd.ms-word.document.macroEnabled.12",".dotx":"application/vnd.openxmlformats-officedocument.wordprocessingml.template",".dotm":"application/vnd.ms-word.template.macroEnabled.12",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xlsm":"application/vnd.ms-excel.sheet.macroEnabled.12",".xltx":"application/vnd.openxmlformats-officedocument.spreadsheetml.template",".xltm":"application/vnd.ms-excel.template.macroEnabled.12",".xlsb":"application/vnd.ms-excel.sheet.binary.macroEnabled.12",".xlam":"application/vnd.ms-excel.addin.macroEnabled.12",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".pptm":"application/vnd.ms-powerpoint.presentation.macroEnabled.12",".potx":"application/vnd.openxmlformats-officedocument.presentationml.template",".potm":"application/vnd.ms-powerpoint.template.macroEnabled.12",".ppsx":"application/vnd.openxmlformats-officedocument.presentationml.slideshow",".ppsm":"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",".ppam":"application/vnd.ms-powerpoint.addin.macroEnabled.12",".tonyu":"text/tonyu",".c":"text/c",".dtl":"text/dolittle"}}),t("DeferredUtil",[],function(){var t,e="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:null,n=function(t){this.res=t};return t={isNativePromise:function(t){return t&&"function"==typeof t.then&&"function"!=typeof t.promise&&"function"==typeof t.catch},isJQPromise:function(t){return t&&"function"==typeof t.then&&"function"==typeof t.promise&&"function"==typeof t.fail},isPromise:function(t){return t&&"function"==typeof t.then&&("function"==typeof t.promise||"function"==typeof t.catch)},all:function(e){return t.promise(function(r,n){var i=[],o=e.length;e.forEach(function(e,s){t.resolve(e).then(function(t){i[s]=t,o--,0===o&&r(i)},n)})})},resolve:function(e){return t.config.useJQ&&t.isJQPromise(e)?e:!t.config.useJQ&&t.isNativePromise(e)?e:t.promise(function(r,n){t.isPromise(e)?e.then(r,n):r(e)})},throwNowIfRejected:function(e){var r,n,i=e.then(function(t){return r||(r="resolved"),t},function(e){return r?t.reject(e):(r="rejected",void(n=e))});if(r||(r="notyet"),"rejected"===r)throw n;return i},assertResolved:function(t){var e,n;if(t.then(function(t){e=t,n=!0}),!n)throw console.log(r),new Error("Promise not resolved");return e},ensureDefer:function(e){return t.promise(function(r,n){var i;t.resolve(e).then(function(t){i?r(t):setTimeout(function(){r(t)},0)}).fail(function(t){i?n(t):setTimeout(function(){n(t)},0)}),i=!0})},directPromise:function(e){return t.timeout(e,0)},then:function(e){return t.directPromise().then(e)},timeout:function(e,r){return t.promise(function(t){setTimeout(function(){t(r)},e||0)})},funcPromise:function(e){if(t.config.useJQ){var r=new $.Deferred;try{e(function(t){r.resolve(t)},function(t){r.reject(t)})}catch(n){r.reject(n)}return r.promise()}if(t.external.Promise)return new t.external.Promise(function(t,r){try{e(t,r)}catch(n){r(n)}});throw new Error("promise is not found")},reject:function(e){if(t.config.useJQ){var r=new $.Deferred;return r.reject(e),r.promise()}return new JQ.external.Promise(function(t,r){r(e)})},throwPromise:function(e){if(t.config.useJQ){var r=new $.Deferred;return setTimeout(function(){r.reject(e)},0),r.promise()}return new JQ.external.Promise(function(t,r){r(e)})},throwF:function(e){return function(){try{return e.apply(this,arguments)}catch(r){return console.log(r,r.stack),t.throwPromise(r)}}},each:function(e,r){if(e instanceof Array)return t.loop(function(n){return n>=e.length?t.brk():t.resolve(r(e[n],n)).then(function(){return n+1})},0);var n=[];for(var i in e)n.push({k:i,v:e[i]});return t.each(n,function(t){return r(t.k,t.v)})},loop:function(e,r){try{for(var i;;){if(r instanceof n)return t.when1(r.res);var o=!0,s=!1,a=e(r),u=t.resolve(a).then(function(i){return r=i,o=!1,r instanceof n?r.res:s?t.loop(e,r):void 0}).fail(function(t){o=!1,i=t});if(i)throw i;if(s=!0,o)return u}}catch(c){return t.reject(c)}},brk:function(t){return new n(t)},tryLoop:function(e,r){return t.loop(t.tr(e),r)},tryEach:function(e,r){return t.loop(e,t.tr(r))},documentReady:function(){return t.callbackToPromise(function(t){$(t)})},requirejs:function(r){if(!e.requirejs)throw new Error("requirejs is not loaded");return t.callbackToPromise(function(t){e.requirejs(r,t)})}},t.NOP=function(t){return t},t.E=function(){console.log("DUE",arguments),t.errorHandler.apply(t,arguments)},t.errorHandler=function(t){console.error.apply(console,arguments),alert(t)},t.setE=function(e){t.errorHandler=e},t.begin=t.try=t.tr=t.throwF,t.promise=t.callbackToPromise=t.funcPromise,t.when1=t.resolve,t.config={},e.$&&e.$.Deferred&&(t.config.useJQ=!0),t.external={Promise:e.Promise},e.DeferredUtil||(e.DeferredUtil=t),t}),t("FS2",["extend","PathUtil","MIMETypes","assert","DeferredUtil"],function(t,e,r,n,i){function o(t){throw new Error(t+" is STUB!")}var s=function(){},a={};return s.addFSType=function(t,e){a[t]=e},s.availFSTypes=function(){return a},t(s.prototype,{err:function(t,e){throw new Error(t+": "+e)},fstype:function(){return"Unknown"},isReadOnly:function(){o("isReadOnly")},supportsSync:function(){return!0},resolveFS:function(t){return n(this.getRootFS()!==this),this.getRootFS().resolveFS(t)},mounted:function(t,e){this.rootFS=t,this.mountPoint=e},inMyFS:function(t){return!this.mountPoint||e.startsWith(t,this.mountPoint)},getRootFS:function(){return n(this.rootFS,"rootFS is not set")},getReturnTypes:function(){o("")},getContent:function(){o("getContent")},getContentAsync:function(){return this.supportsSync()||o("getContentAsync"),i.resolve(this.getContent.apply(this,arguments))},setContent:function(){o("")},setContentAsync:function(t,e,r){var n=this;return n.supportsSync()||o("setContentAsync"),i.resolve(e).then(function(e){return i.resolve(n.setContent(t,e,r))})},appendContent:function(){o("")},appendContentAsync:function(t,e,r){var n=this;return n.supportsSync()||o("appendContentAsync"),i.resolve(e).then(function(e){return i.resolve(n.appendContent(t,e,r))})},getMetaInfo:function(){o("")},setMetaInfo:function(){o("")},mkdir:function(){o("mkdir")},touch:function(){o("touch")},exists:function(){o("exists")},opendir:function(){o("opendir")},opendirAsync:function(){return this.supportsSync()||o("opendirAsync"),i.resolve(this.opendir.apply(this,arguments))},cp:function(t,r,i){n.is(arguments,[e.Absolute,e.Absolute]),this.assertExist(t),i=i||{};var o=this.isDir(t),s=this.getRootFS().resolveFS(r),a=s.isDir(r);if(o||a)throw new Error("only file to file supports");if(this.supportsSync()&&s.supportsSync()){var u=this.getContent(t),c=s.setContent(r,u);return i.a&&s.setMetaInfo(r,this.getMetaInfo(t)),c}return s.setContentAsync(r,this.getContentAsync(t)).then(function(e){return i.a?s.setMetaInfo(r,this.getMetaInfo(t)):e})},mv:function(t,e,r){return this.cp(t,e,r),this.rm(t,{r:!0})},rm:function(){o("")},link:function(t,e){throw new Error("ln "+e+" "+t+" : This FS not support link.")},getURL:function(){o("")}}),s.delegateMethods=function(t,r){for(var i in r)!function(i){n.ne(i,"inMyFS"),t[i]=function(){var t=arguments[0];n.is(t,e.Absolute);var o=this.resolveFS(t);return o!==this?(console.log("Invoked for other fs",this.mountPoint,o.mountPoint),o[i].apply(o,arguments)):r[i].apply(this,arguments)}}(i)},s.delegateMethods(s.prototype,{assertWriteable:function(t){this.isReadOnly(t)&&this.err(t,"read only.")},getContentType:function(t,n){var i=(e.ext(t)+"").toLowerCase();return r[i]||(n||{}).def||"application/octet-stream"},getBlob:function(t,e){var r=this.getContent(t);return e=e||{},e.blobType=e.blobType||Blob,e.binType=e.binType||ArrayBuffer,r.hasPlainText()?new e.blobType([r.toPlainText()],this.getContentType(t)):new e.blobType([r.toBin(e.binType)],this.getContentType(t))},isText:function(t){var r=this.getContentType(t);return e.startsWith(r,"text")},assertExist:function(t,r){this.exists(t,r)||this.err(t,": No such "+(e.isDir(t)?"directory":"file"))},isDir:function(t){return e.isDir(t)},find:function(t,r){n.is(arguments,[e.Absolute]);var i=this.opendir(t,r),o=this,s=[t];return i.forEach(function(n){var i=e.rel(t,n);if(e.isDir(i)){var a=o.resolveFS(i);s=s.concat(a.find(i,r))}else s.push(i)}),s},resolveLink:function(t){n.is(t,e.Absolute);for(var r=t;r;r=e.up(r)){n(!this.mountPoint||e.startsWith(r,this.mountPoint),r+" is out of mountPoint. path="+t);var i=this.isLink(r);if(i){n(i!=r,"l==p=="+i);var o=e.rel(i,e.relPath(t,r));return n(o!=t,"np==path=="+o),n.is(this.getRootFS().resolveFS(o).resolveLink(o),e.Absolute)}if(this.exists(r))return t}return t},isLink:function(){return null},opendirEx:function(t){n.is(t,e.AbsDir);var r=this.opendir(t),i=this,o={};return r.forEach(function(r){var n=e.rel(t,r);o[r]=i.getMetaInfo(n)}),o},getDirTree:function(t,r){r=r||{};var i=r.dest=r.dest||{};r.style=r.style||"flat-absolute",r.excludes=r.excludes||[],n.is(r.excludes,Array),r.base||(r.base=t),n.is(t,e.AbsDir);var o=this.opendirEx(t,r);if("no-recursive"==r.style)return o;var s=this;for(var a in o){var u=o[a],c=e.rel(t,a),f=e.relPath(c,r.base);switch(r.style){case"flat-relative":case"hierarchical":if(r.excludes.indexOf(f)>=0)continue;break;case"flat-absolute":if(r.excludes.indexOf(c)>=0)continue}if(s.isDir(c))switch(r.style){case"flat-absolute":case"flat-relative":s.getDirTree(c,r);break;case"hierarchical":r.dest={},i[a]=s.getDirTree(c,r)}else switch(r.style){case"flat-absolute":i[c]=u;break;case"flat-relative":i[f]=u;break;case"hierarchical":i[a]=u}}return i}}),s}),t("Util",[],function(){function t(t,r){null==r&&(r=""),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=n.exec(window.location.href);return null==i?r:e(i[1])}function e(t){return decodeURIComponent(t.replace(/\+/g,"%20"))}function r(t,e){return t.substring(t.length-e.length)===e}function n(t,e){return t.substring(0,e.length)===e}function i(t){if(t.__privatized)return t;var e={__privatized:!0};for(var r in t)!function(r){var n=t[r];r.match(/^_/)||"function"==typeof n&&(e[r]=function(){var e=n.apply(t,arguments);return e})}(r);return e}function o(t,e){for(var r in e||{})t[r]=e[r];return t}return{getQueryString:t,endsWith:r,startsWith:n,privatize:i,extend:o}}),t("Content",["assert","Util"],function(t,e){var r=function(){},n=e.extend;r.plainText=function(t,e){var n=new r;return n.contentType=e||"text/plain",n.plain=t,n},r.url=function(t){var e=new r;return e.url=t,e},r.buffer2ArrayBuffer=function(e){if(r.isBuffer(e)){var n=new Uint8Array(e),i=n.buffer;if(i instanceof ArrayBuffer)return i;var o=Array.prototype.slice.call(n);return t(new Uint8Array(o).buffer,"n2a: buf is not set")}return t(e,"n2a: a is not set")},r.arrayBuffer2Buffer=function(e){if(e instanceof ArrayBuffer){var r=new Buffer(new Uint8Array(e));return r}return t(e,"a2n: a is not set")},r.bin=function(e,n){t(n,"contentType should be set");var i=new r;if(e&&r.isBuffer(e.buffer))i.arrayBuffer=e.buffer;else if(r.isNodeBuffer(e))i.nodeBuffer=e;else{if(!(e instanceof ArrayBuffer))throw new Error(e+" is not a bin");i.arrayBuffer=e}return i.contentType=n,i},r.looksLikeDataURL=function(t){return t.match(/^data:/)};var i=r.prototype;i.toBin=function(t){if(t=t||(r.hasNodeBuffer()?Buffer:ArrayBuffer),this.nodeBuffer)return t===Buffer?this.nodeBuffer:this.arrayBuffer=r.buffer2ArrayBuffer(this.nodeBuffer);if(this.arrayBuffer)return t===ArrayBuffer?this.arrayBuffer:this.nodeBuffer=r.arrayBuffer2Buffer(this.arrayBuffer);if(this.url){var e=new s(this.url,t);return this.setBuffer(e.buffer)}if(null!=this.plain)return this.setBuffer(r.str2utf8bytes(this.plain,t));throw new Error("No data")},i.setBuffer=function(e){return t(e,"b is not set"),r.isNodeBuffer(e)?this.nodeBuffer=e:this.arrayBuffer=e},i.toArrayBuffer=function(){return this.toBin(ArrayBuffer)},i.toNodeBuffer=function(){return this.toBin(Buffer)},i.toURL=function(){if(this.url)return this.url;if(this.arrayBuffer||null==this.plain||(this.arrayBuffer=r.str2utf8bytes(this.plain,ArrayBuffer)),this.arrayBuffer||this.nodeBuffer){var t=new s(this.arrayBuffer||this.nodeBuffer,this.contentType);return this.url=t.url}throw new Error("No data")},i.toPlainText=function(){if(this.hasPlainText())return this.plain;if(this.url&&!this.hasBin()){var t=new s(this.url,ArrayBuffer);this.arrayBuffer=t.buffer}if(this.hasBin())return this.plain=r.utf8bytes2str(this.nodeBuffer||new Uint8Array(this.arrayBuffer));throw new Error("No data")},i.hasURL=function(){return this.url},i.hasPlainText=function(){return null!=this.plain},i.hasBin=function(){return this.nodeBuffer||this.arrayBuffer},i.hasNodeBuffer=function(){return this.nodeBuffer},i.hasArrayBuffer=function(){return this.arrayBuffer},r.Base64_To_ArrayBuffer=function(t,e){function n(e){throw console.log(e),console.log(t,h),new Error(e)}var i=e||ArrayBuffer;t=t.replace(/[\n=]/g,"");var o=new Object;o[65]=0,o[66]=1,o[67]=2,o[68]=3,o[69]=4,o[70]=5,o[71]=6,o[72]=7,o[73]=8,o[74]=9,o[75]=10,o[76]=11,o[77]=12,o[78]=13,o[79]=14,o[80]=15,o[81]=16,o[82]=17,o[83]=18,o[84]=19,o[85]=20,o[86]=21,o[87]=22,o[88]=23,o[89]=24,o[90]=25,o[97]=26,o[98]=27,o[99]=28,o[100]=29,o[101]=30,o[102]=31,o[103]=32,o[104]=33,o[105]=34,o[106]=35,o[107]=36,o[108]=37,o[109]=38,o[110]=39,o[111]=40,o[112]=41,o[113]=42,o[114]=43,o[115]=44,o[116]=45,o[117]=46,o[118]=47,o[119]=48,o[120]=49,o[121]=50,o[122]=51,o[48]=52,o[49]=53,o[50]=54,o[51]=55,o[52]=56,o[53]=57,o[54]=58,o[55]=59,o[56]=60,o[57]=61,o[43]=62,o[47]=63;var s,a=t.length,u=0,c=0;if(!a)return new i(0);s=Math.floor(a/4*3),"="==t.charAt(a-1)&&(s-=1),"="==t.charAt(a-2)&&(s-=1);for(var f=new i(s),l=r.isNodeBuffer(f)?f:new Uint8Array(f),h=0,d=0;s>d&&(c=o[t.charCodeAt(h)],void 0===c&&n("Invalid letter: "+t.charCodeAt(h)),u=c<<2,h++,c=o[t.charCodeAt(h)],void 0===c&&n("Invalid letter: "+t.charCodeAt(h)),l[d]=u|c>>4&3,u=(15&c)<<4,h++,d++,!(d>=s))&&(c=o[t.charCodeAt(h)],void 0===c&&n("Invalid letter: "+t.charCodeAt(h)),l[d]=u|c>>2&15,u=(3&c)<<6,h++,d++,!(d>=s));)c=o[t.charCodeAt(h)],void 0===c&&n("Invalid letter: "+t.charCodeAt(h)),l[d]=u|c,h++,d++;return f},r.Base64_From_ArrayBuffer=function(t){for(var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],r="",n=new Uint8Array(t),i=n.length,o=0,s=0,a=0;i>a&&(s=n[a],r+=e[s>>2],o=(3&s)<<4,a++,!(a>=i))&&(s=n[a],r+=e[o|s>>4],o=(15&s)<<2,a++,!(a>=i));)s=n[a],r+=e[o|s>>6],r+=e[63&s],a++;var u=i%3;return u&&(r+=e[o]),1==u?r+="==":2==u&&(r+="="),r},r.hasNodeBuffer=function(){return"undefined"!=typeof Buffer},r.isNodeBuffer=function(t){return r.hasNodeBuffer()&&t instanceof Buffer},r.isBuffer=function(t){return t instanceof ArrayBuffer||r.isNodeBuffer(t)},r.utf8bytes2str=function(t){for(var e=[],r=0;r<t.length;r++)e.push("%"+("0"+t[r].toString(16)).slice(-2));return decodeURIComponent(e.join(""))},r.str2utf8bytes=function(t,e){for(var r=encodeURIComponent(t),n=/^%(..)/,i=[],o=0;o<r.length;o++){var s=n.exec(r.substring(o));s?(i.push(parseInt("0x"+s[1])),o+=s[0].length-1):i.push(r.charCodeAt(o))}return"undefined"!=typeof Buffer&&e===Buffer?new Buffer(i):new Uint8Array(i).buffer};var o=r.hasNodeBuffer()?Buffer:ArrayBuffer,s=function(e,n){"string"==typeof e?(this.url=e,this.binType=n||o,this.dataURL2bin(e)):e&&r.isBuffer(e.buffer)?(this.buffer=e.buffer,t.is(n,String),this.contentType=n,this.bin2dataURL(this.buffer,this.contentType)):r.isBuffer(e)?(this.buffer=e,t.is(n,String),this.contentType=n,this.bin2dataURL(this.buffer,this.contentType)):(console.log(arguments),t.fail("Invalid args: ",arguments))};return r.DataURL=s,n(s.prototype,{bin2dataURL:function(e,n){t(r.isBuffer(e)),t.is(n,String);var i=this.dataHeader(n),o=r.Base64_From_ArrayBuffer(e);return t.is(o,String),this.url=i+o},dataURL2bin:function(e){t.is(arguments,[String]);var n=/^data:([^;]+);base64,/i,i=n.exec(e);return t(i,["malformed dataURL:",e]),this.contentType=i[1],this.buffer=r.Base64_To_ArrayBuffer(e.substring(i[0].length),this.binType),t.is(this.buffer,this.binType)},dataHeader:function(e){return t.is(arguments,[String]),"data:"+e+";base64,"},toString:function(){return t.is(this.url,String)}}),r}),t("NativeFS",["FS2","assert","PathUtil","extend","Content"],function(t,e,r,n,i){var o="object"==typeof process;if(!o)return function(){throw new Error("This system not support native FS")};var s=e,a=require("fs"),u=function(t){t&&(e.is(t,r.AbsDir),this.rootPoint=t)},c=r.hasDriveLetter(process.cwd());u.available=!0;var f=r.SEP,l=u.prototype=new t;return l.toNativePath=function(t){return this.rootPoint?(e.is(t,r.Absolute),e(this.inMyFS(t),t+" is not fs of "+this),r.rel(this.rootPoint,r.relPath(t,this.mountPoint||r.SEP))):t},l.arrayBuffer2Buffer=function(t){if(t instanceof ArrayBuffer){var e=new Buffer(new Uint8Array(t));return e}return t},t.addFSType("NativeFS",function(t,e){return new u(e.r)}),u.prototype.fstype=function(){return"Native"+(this.rootPoint?"("+this.rootPoint+")":"")},u.prototype.inMyFS=function(t){return this.mountPoint?r.startsWith(t,this.mountPoint):!(!!c^!!r.hasDriveLetter(t))},t.delegateMethods(u.prototype,{getReturnTypes:function(){return s.is(arguments,[String]),{getContent:ArrayBuffer,opendir:[String]}},getContent:function(t,n){n=n||{},e.is(t,r.Absolute);var o=this.toNativePath(t);return this.assertExist(t),i.bin(a.readFileSync(o),this.getContentType(t))},setContent:function(t,n){e.is(arguments,[r.Absolute,i]);var o=r.up(t);o&&this.getRootFS().resolveFS(o).mkdir(o);var s=this.toNativePath(t);n.hasBin()||!n.hasPlainText()?a.writeFileSync(s,n.toNodeBuffer()):a.writeFileSync(s,n.toPlainText())},appendContent:function(t,n){e.is(arguments,[r.Absolute,i]);var o=r.up(t);o&&this.getRootFS().resolveFS(o).mkdir(o);var s=this.toNativePath(t);n.hasBin()||!n.hasPlainText()?a.appendFileSync(s,n.toNodeBuffer()):a.appendFileSync(s,n.toPlainText())},getMetaInfo:function(t,e){this.assertExist(t,e);var r=this.stat(t);return r.lastUpdate=r.mtime.getTime(),r},setMetaInfo:function(){},isReadOnly:function(){return!1},stat:function(t){e.is(t,r.Absolute);var n=this.toNativePath(t);return a.statSync(n)},mkdir:function(t){if(s.is(arguments,[r.Absolute]),this.exists(t)){if(this.isDir(t))return;throw new Error(this+" is a file. not a dir.")}this.assertWriteable(t);var e=r.up(t);e&&this.getRootFS().resolveFS(e).mkdir(e);var n=this.toNativePath(t);return a.mkdirSync(n),this.assertExist(n)},opendir:function(t,e){s.is(arguments,[String]),e=e||{};var n=this.toNativePath(t),i=r.truncSEP(n),o=a.readdirSync(n);e.nosep||(o=o.map(function(t){var e=a.statSync(i+f+t),r=e.isDirectory()?f:"";return t+r}));var u=[];return s.is(u.concat(o),Array)},rm:function(t,e){s.is(arguments,[r.Absolute]),e=e||{},this.assertExist(t);var n=this.toNativePath(t);return this.isDir(t)?a.rmdirSync(n):a.unlinkSync(n)},exists:function(t){var e=this.toNativePath(t);return a.existsSync(e)},isDir:function(t){return this.exists(t)?this.stat(t).isDirectory():r.isDir(t)},touch:function(t){!this.exists(t)&&this.isDir(t)?this.mkdir(t):this.exists(t)&&a.utimesSync(t,Date.now()/1e3,Date.now()/1e3)},getURL:function(t){return"file:///"+t.replace(/\\/g,"/")}}),u}),t("LSFS",["FS2","PathUtil","extend","assert","Util","Content"],function(t,e,r,n,i,o){function s(){return(new Date).getTime()}var a=function(t,e){n(t," new LSFS fail: no storage"),this.storage=t,this.options=e||{},this.options.useDirCache&&(this.dirCache={})},u=e.isDir.bind(e),c=e.up.bind(e),f=e.endsWith.bind(e),l=(e.Path,e.Absolute),h=e.SEP;return a.ramDisk=function(t){var r={};return r[e.SEP]="{}",t=t||{},"useDirCache"in t||(t.useDirCache=!0),new a(r,t)},t.addFSType("localStorage",function(t,e){return new a(localStorage,e)}),t.addFSType("ram",function(t,e){return a.ramDisk(e)}),a.now=s,a.prototype=new t,a.prototype.resolveKey=function(t){return n.is(t,e.Absolute),this.mountPoint?e.SEP+e.relPath(t,this.mountPoint):t},a.prototype.getItem=function(t){n.is(t,e.Absolute);var r=this.resolveKey(t);return this.storage[r]},a.prototype.setItem=function(t,r){n.is(t,e.Absolute);var i=this.resolveKey(t);n(i.indexOf("..")<0),n(e.startsWith(i,e.SEP)),this.storage[i]=r},a.prototype.removeItem=function(t){n.is(t,e.Absolute);var r=this.resolveKey(t);delete this.storage[r]},a.prototype.itemExists=function(t){n.is(t,e.Absolute);var r=this.resolveKey(t);return n(this.storage,"No storage"),r in this.storage},a.prototype.getDirInfo=function(t){if(n.is(arguments,[e.AbsDir]),null==t)throw new Error("getDir: Null path");if(f(t,h)||(t+=h),n(this.inMyFS(t)),this.dirCache&&this.dirCache[t])return this.dirCache[t];var r={};try{var i=this.getItem(t);i&&(r=JSON.parse(i))}catch(o){console.log("dinfo err : ",t,i)}return this.dirCache&&(this.dirCache[t]=r),r},a.prototype.putDirInfo=function(t,r,i){if(n.is(arguments,[e.AbsDir,Object]),!u(t))throw new Error("Not a directory : "+t);n(this.inMyFS(t)),this.dirCache&&(this.dirCache[t]=r),this.setItem(t,JSON.stringify(r));var o=c(t);if(null!=o&&this.inMyFS(o)){var s=this.getDirInfo(o);this._touch(s,o,e.name(t),i)}},a.prototype._touch=function(t,r,i,o){n.is(arguments,[Object,String,String]),n(this.inMyFS(r)),t[i]||(t[i]={},o&&(t[i].trashed=!0)),o||delete t[i].trashed,t[i].lastUpdate=s(),this.getRootFS().notifyChanged(e.rel(r,i),t[i]),this.putDirInfo(r,t,o)},a.prototype.removeEntry=function(t,e,r){n.is(arguments,[Object,String,String]),t[r]&&(t[r]={lastUpdate:s(),trashed:!0},this.putDirInfo(e,t,!0))
},a.prototype.removeEntryWithoutTrash=function(t,e,r){n.is(arguments,[Object,String,String]),t[r]&&(delete t[r],this.putDirInfo(e,t,!0))},a.prototype.isRAM=function(){return this.storage!==localStorage},a.prototype.fstype=function(){return this.isRAM()?"ramDisk":"localStorage"},a.getUsage=function(){var t=0;for(var e in localStorage)"string"==typeof localStorage[e]&&(t+=localStorage[e].length);return t},a.getCapacity=function(){function t(){try{return localStorage[n+e]=r,e++,i+=r.length,!0}catch(t){return delete localStorage[n+e],!1}}var e=0,r="a",n="___checkls___",i=0,o=Math.pow(2,25);try{for(var s=0;10>s;s++)r+=r;for(var s in localStorage)s.substring(0,n.length)==n?delete localStorage[s]:"string"==typeof localStorage[s]&&(i+=localStorage[s].length);for(var a=i;t()&&r.length<o;)r+=r;for(;r.length>1024;)r=r.substring(r.length/2),t();return{using:a,max:i}}finally{for(var s=0;e>s;s++)delete localStorage[n+s]}},t.delegateMethods(a.prototype,{isReadOnly:function(){return this.options.readOnly},getReturnTypes:function(){return n.is(arguments,[String]),{getContent:String,opendir:[String]}},getContent:function(t){n.is(arguments,[l]),this.assertExist(t);var e,r=this.getItem(t);return e=o.looksLikeDataURL(r)?o.url(r):o.plainText(r)},setContent:function(t,e){n.is(arguments,[l,o]),this.assertWriteable(t);var r=null;e.hasPlainText()&&(r=e.toPlainText(),o.looksLikeDataURL(r)&&(r=null)),null!=r?this.setItem(t,r):this.setItem(t,e.toURL()),this.touch(t)},getMetaInfo:function(t){if(this.assertExist(t,{includeTrashed:!0}),n.is(arguments,[l]),t==e.SEP)return{};var r=n(e.up(t));if(!this.inMyFS(r))return{};var i=e.name(t);n.is(r,e.AbsDir);var o=this.getDirInfo(r);return n(o[i])},setMetaInfo:function(t,r){n.is(arguments,[String,Object]),this.assertWriteable(t);var i=n(e.up(t));if(this.inMyFS(i)){var o=this.getDirInfo(i),s=e.name(t);o[s]=r,this.putDirInfo(i,o,o[s].trashed)}},mkdir:function(t){n.is(arguments,[l]),this.assertWriteable(t),this.touch(t)},opendir:function(t,e){n.is(arguments,[String]),e=e||{};var r=this.getDirInfo(t),i=[];for(var o in r)n(r[o]),(!r[o].trashed||e.includeTrashed)&&i.push(o);return n.is(i,Array)},rm:function(t,r){n.is(arguments,[l]),r=r||{},this.assertWriteable(t);var i=e.up(t);if(null==i||!this.inMyFS(i))throw new Error(t+": cannot remove. It is root of this FS.");if(this.assertExist(t,{includeTrashed:r.noTrash}),e.isDir(t)){var o=this.opendir(t);o.length>0&&this.err(t,"Directory not empty"),r.noTrash&&this.removeItem(t)}else this.removeItem(t);var s=this.getDirInfo(i);r.noTrash?this.removeEntryWithoutTrash(s,i,e.name(t)):this.removeEntry(s,i,e.name(t))},exists:function(t,r){n.is(arguments,[l]),r=r||{};var i=e.name(t),o=e.up(t);if(null==o||!this.inMyFS(o))return!0;var s=this.getDirInfo(o),a=s[i];return a&&a.trashed&&this.itemExists(t)&&this.isDir(t),!a&&this.itemExists(t),a&&!a.trashed&&!a.link&&!this.itemExists(t),a&&!r.includeTrashed&&(a=!a.trashed),!!a},link:function(t,r){n.is(arguments,[e.Absolute,e.Absolute]),this.assertWriteable(t),this.exists(t)&&this.err(t,"file exists"),e.isDir(t)&&!e.isDir(r)&&this.err(t," can not link to file "+r),!e.isDir(t)&&e.isDir(r)&&this.err(t," can not link to directory "+r);var i={};i.link=r,i.lastUpdate=s(),this.setMetaInfo(t,i),n(this.exists(t)),n(this.isLink(t))},isLink:function(t){if(n.is(arguments,[e.Absolute]),!this.exists(t))return null;var r=n(this.getMetaInfo(t));return r.link},touch:function(t){n.is(arguments,[l]),this.assertWriteable(t),this.itemExists(t)||(e.isDir(t)?(this.dirCache&&(this.dirCache[t]={}),this.setItem(t,"{}")):this.setItem(t,""));var r=c(t);if(null!=r)if(this.inMyFS(r)){var i=this.getDirInfo(r);this._touch(i,r,e.name(t),!1)}else n(this.getRootFS()!==this),this.getRootFS().resolveFS(r).touch(r)},getURL:function(t){return this.getContent(t).toURL()},opendirEx:function(t,r){n.is(t,e.AbsDir),r=r||{};var i={},o=this.getDirInfo(t);if(r.includeTrashed)return o;for(var s in o)o[s].trashed||(i[s]=o[s]);return i}}),a}),$.ajaxTransport("+binary",function(t,e,r){return window.FormData&&(t.dataType&&"binary"==t.dataType||t.data&&(window.ArrayBuffer&&t.data instanceof ArrayBuffer||window.Blob&&t.data instanceof Blob))?{send:function(e,r){var n=new XMLHttpRequest,i=t.url,o=t.type,s=t.async||!0,a=t.responseType||"blob",u=t.data||null,c=t.username||null,f=t.password||null;n.addEventListener("load",function(){var e={};e[t.dataType]=n.response,r(n.status,n.statusText,e,n.getAllResponseHeaders())}),n.open(o,i,s,c,f);for(var l in e)n.setRequestHeader(l,e[l]);n.responseType=a,n.send(u)},abort:function(){r.abort()}}:void 0}),t("jquery.binarytransport",function(){}),t("WebFS",["FS2","jquery.binarytransport","DeferredUtil","Content","PathUtil"],function(t,e,r,n,i){var o=function(){},s=o.prototype=new t;return t.addFSType("web",function(){return new o}),s.fstype=function(){return"Web"},s.supportsSync=function(){return!1},s.inMyFS=function(t){return i.isURL(t)},t.delegateMethods(s,{exists:function(){return!0},getContentAsync:function(t){var e=this;return r.promise(function(r,i){$.get(t,function(i){var o=new FileReader;o.addEventListener("loadend",function(){r(n.bin(o.result,e.getContentType(t)))}),o.readAsArrayBuffer(i)},"binary").fail(i)})},getURL:function(t){return t}}),o}),t("Env",["assert","PathUtil"],function(t,e){var r=function(t){this.value=t};return r.prototype={expand:function(e){t.is(e,String);var r=this;return e.replace(/\$\{([a-zA-Z0-9_]+)\}/g,function(t,e){return r.get(e)})},expandPath:function(r){return t.is(r,String),r=this.expand(r),r=r.replace(/\/+/g,"/"),r=r.replace(/^[a-z][a-z]+:\//,function(t){return t+"/"}),t.is(r,e.Path)},get:function(t){return this.value[t]},set:function(t,e){this.value[t]=e}},r});var s=s||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in r,i=function(r){var n=e.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)},o=t.webkitRequestFileSystem,s=t.requestFileSystem||o||t.mozRequestFileSystem,a=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=0,c=function(e){var r=function(){"string"==typeof e?(t.URL||t.webkitURL||t).revokeObjectURL(e):e.remove()};t.chrome?r():setTimeout(r,10)},f=function(t,e,r){e=[].concat(e);for(var n=e.length;n--;){var i=t["on"+e[n]];if("function"==typeof i)try{i.call(t,r||t)}catch(o){a(o)}}},l=function(e,a){var l,h,d,p=this,m=e.type,g=!1,v=function(){f(p,["writestart","progress","write","writeend"])},y=function(){(g||!l)&&(l=(t.URL||t.webkitURL||t).createObjectURL(e)),h?h.location.href=l:void 0==t.open(l,"_blank")&&"undefined"!=typeof safari&&(t.location.href=l),p.readyState=p.DONE,v(),c(l)},b=function(t){return function(){return p.readyState!==p.DONE?t.apply(this,arguments):void 0}},_={create:!0,exclusive:!1};p.readyState=p.INIT,a||(a="download"),n?(l=(t.URL||t.webkitURL||t).createObjectURL(e),r.href=l,r.download=a,i(r),p.readyState=p.DONE,v(),c(l)):(t.chrome&&m&&"application/octet-stream"!==m&&(d=e.slice||e.webkitSlice,e=d.call(e,0,e.size,"application/octet-stream"),g=!0),o&&"download"!==a&&(a+=".download"),("application/octet-stream"===m||o)&&(h=t),s?(u+=e.size,s(t.TEMPORARY,u,b(function(t){t.root.getDirectory("saved",_,b(function(t){var r=function(){t.getFile(a,_,b(function(t){t.createWriter(b(function(r){r.onwriteend=function(e){h.location.href=t.toURL(),p.readyState=p.DONE,f(p,"writeend",e),c(t)},r.onerror=function(){var t=r.error;t.code!==t.ABORT_ERR&&y()},["writestart","progress","write","abort"].forEach(function(t){r["on"+t]=p["on"+t]}),r.write(e),p.abort=function(){r.abort(),p.readyState=p.DONE},p.readyState=p.WRITING}),y)}),y)};t.getFile(a,{create:!1},b(function(t){t.remove(),r()}),b(function(t){t.code===t.NOT_FOUND_ERR?r():y()}))}),y)}),y)):y())},h=l.prototype;return h.abort=function(){this.readyState=this.DONE,f(this,"abort")},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(t,e){return new l(t,e)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=s:"undefined"!=typeof t&&null!==t&&null!=t.amd&&t("FileSaver.min",[],function(){return s}),t("SFile",["extend","assert","PathUtil","Util","Content","FS2","FileSaver.min","DeferredUtil"],function(t,e,r,n,i,o,a,u){var c=function(t,n){e.is(n,r.Absolute),this._path=n,this.rootFS=t,this.fs=t.resolveFS(n),this.isDir()&&!r.isDir(n)&&(this._path+=r.SEP)};return c.is=function(t){return t&&"function"==typeof t.isSFile&&t.isSFile()},c.prototype={isSFile:function(){return!0},setPolicy:function(t){if(this.policy)throw new Error("policy already set");return this.policy=t,this._clone()},getPolicy:function(){return this.policy},_clone:function(){return this._resolve(this.path())},_resolve:function(t,i){var o;if(i=i||{},c.is(t))o=t;else{e.is(t,r.Absolute);var s,a=i.policy||this.policy;if(a&&(s=a.topDir)&&(s.path&&(s=s.path()),!r.startsWith(t,s)))throw new Error(t+": cannot access. Restricted to "+s);o=new c(this.rootFS,t),o.policy=a}return o.policy?n.privatize(o):o},contains:function(t){return e(c.is(t),t+" shoud be a SFile object."),this.isDir()?r.startsWith(t.path(),this.path()):!1},path:function(){return this._path},name:function(){return r.name(this.path())},truncExt:function(t){return r.truncExt(this.path(),t)},ext:function(){return r.ext(this.path())},relPath:function(t){var n=t.path?t.path():t;return r.relPath(this.path(),e.is(n,r.Absolute))},up:function(){var t=this.path(),e=r.up(t);return null==e?null:this._resolve(e)},rel:function(t){e.is(t,r.Relative),this.assertDir();var n=this.path();return this._resolve(r.rel(n,t))},sibling:function(t){return this.up().rel(t)},startsWith:function(t){return r.startsWith(this.name(),t)},endsWith:function(t){return r.endsWith(this.name(),t)},equals:function(t){return t&&"function"==typeof t.path&&t.path()==this.path()},toString:function(){return this.path()},touch:function(){return this.act.fs.touch(this.act.path)},isReadOnly:function(){return this.act.fs.isReadOnly(this.act.path)},isTrashed:function(){var t=this.metaInfo();return t?t.trashed:!1},metaInfo:function(){return 0==arguments.length?this.getMetaInfo.apply(this,arguments):this.setMetaInfo.apply(this,arguments)},getMetaInfo:function(t){return this.act.fs.getMetaInfo(this.act.path,t)},setMetaInfo:function(t,e){return this.act.fs.setMetaInfo(this.act.path,t,e)},getDirTree:function(t){return this.act.fs.getDirTree(this.act.path,t)},assertExists:function(){e(this.exists(),this.path()+" does not exist.")},lastUpdate:function(){return this.assertExists(),this.metaInfo().lastUpdate},exists:function(t){var e=Array.prototype.slice.call(arguments);if("function"==typeof e[0]){var r=e.shift();return u.resolve(this.exists.apply(this,e)).then(r)}t=t||{};var n=this.fs.exists(this.path(),t);return n||t.noFollowLink?n:this.act.fs.exists(this.act.path,{noFollowLink:!0})},rm:function(t){var e=this;if(t=t||{},this.isLink())return u.resolve(this.fs.rm(this.path(),t));var r;return r=this.isDir()&&(t.recursive||t.r)?this.each(function(e){return e.rm(t)}):u.resolve(),r.then(function(){return e.act.fs.rm(e.act.path,t)})},removeWithoutTrash:function(t){t=t||{},t.noTrash=!0,this.rm(t)},isDir:function(){return this.act.fs.isDir(this.act.path)},text:function(t){return"function"==typeof t?this.getText(t):arguments.length>0?this.setText(arguments[0]):this.getText()},setText:function(t){if(e.is(t,String),this.isDir())throw new Error("Cannot write to directory: "+this.path());var r=this.contentType({def:null});return u.throwNowIfRejected(null!==r&&!r.match(/^text/)&&i.looksLikeDataURL(t)?this.setContent(i.url(t)):this.setContent(i.plainText(t)))},appendText:function(t){return e.is(t,String),this.act.fs.appendContent(this.act.path,i.plainText(t))},getContent:function(t){return"function"==typeof t?this.act.fs.getContentAsync(this.act.path).then(t):this.act.fs.getContent(this.act.path)},setContent:function(t){if(this.isDir())throw new Error("Cannot write to directory: "+this.path());return this.act.fs.setContentAsync(this.act.path,t)},getText:function(t){function e(t){try{return t.toPlainText()}catch(e){return t.toURL()}}if("function"==typeof t){return this.getContent(e).then(t)}return e(this.act.fs.getContent(this.act.path))},getDataURL:function(t){return"function"==typeof t?this.getContent(function(t){return t.toURL()}):this.getContent().toURL()},setDataURL:function(t){return this.setContent(i.url(t))},dataURL:function(t){return"string"==typeof t?this.setDataURL(t):"function"==typeof t?this.getDataURL(t):this.getDataURL()},isText:function(){return this.act.fs.isText(this.act.path)},contentType:function(t){return this.act.fs.getContentType(this.act.path,t)},bytes:function(t){return i.isBuffer(t)?this.setBytes(t):this.getBytes()},setBytes:function(t){return this.act.fs.setContent(this.act.path,i.bin(t,this.contentType()))},getBytes:function(t){return t=t||{},this.act.fs.getContent(this.act.path).toBin(t.binType)},getURL:function(){return this.act.fs.getURL(this.act.path)},lines:function(){return this.text().replace(/\r/g,"").split("\n")},obj:function(){var t=this;if(0==arguments.length){var r=t.text();return r?JSON.parse(r):null}t.text(JSON.stringify(e.is(arguments[0],Object)))},copyFrom:function(t,e){return t.copyTo(this,e)},copyTo:function(t,r){e(t&&t.isSFile(),t+" is not a file");var n=this,r=r||{},i=n.isDir(),o=t.isDir();if(!i&&o&&(t=t.rel(n.name()),e(!t.isDir(),t+" is a directory."),o=!1),!i||o){if(i||o)return e(i&&o,"Both src and dst should be dir"),n.each(function(e){return t.rel(e.name()).copyFrom(e,r)});r.echo&&r.echo(n+" -> "+t);var s=this.act.fs.cp(this.act.path,t.getResolvedLinkPath(),r);return s=u.resolve(s),r.a?s.then(function(){return t.setMetaInfo(n.getMetaInfo())}):s}this.err("Cannot move dir "+n.path()+" to file "+t.path())},moveFrom:function(t,e){var r=this;return r.exists(function(n){return r.copyFrom(t,e).then(function(){return t.rm({recursive:!0})},function(t){if(!n)return r.exists(function(t){return t?r.rm({recursive:!0}):void 0}).then(function(){throw t});throw t})})},moveTo:function(t,e){return t.moveFrom(this,e)},assertDir:function(){return e.is(this.path(),r.Dir),this},each:function(t,e){var r=this.assertDir();return r.listFilesAsync(e).then(function(e){return u.each(e,t)})},eachrev:function(t,e){var r=this.assertDir();return r.listFilesAsync(e).then(function(e){return u.each(e.reverse(),t)})},recursive:function(t,e){var r=this.assertDir();return r.each(function(e){return e.isDir()?e.recursive(t):t(e)},e)},listFilesAsync:function(t){e(null==t||"object"==typeof t);var r,n=this.assertDir(),i=this.path();return t=n.convertOptions(t),r||(r=t.order),this.act.fs.opendirAsync(this.act.path,t).then(function(e){for(var o=[],s=0;s<e.length;s++){var a=e[s];t.excludes[i+a]||o.push(n.rel(a))}return"function"==typeof r&&o.sort&&o.sort(r),o})},listFiles:function(t){var e=Array.prototype.slice.call(arguments);return u.assertResolved(this.listFilesAsync.apply(this,e))},ls:function(t){e(null==t||"object"==typeof t);var r=this.assertDir();if(!t)return this.act.fs.opendir(this.act.path,t);var n=r.listFiles(t);return n.map(function(t){return t.name()})},convertOptions:function(t){var i=n.extend({},t),o=(this.assertDir(),this.path());if(i.excludes||(i.excludes={}),i.excludes instanceof Array){var s={};i.excludes.forEach(function(t){r.startsWith(t,"/")?s[t]=1:s[o+t]=1}),i.excludes=s}return e.is(i,{excludes:{}})},mkdir:function(){return this.touch()},link:function(t,e){if(this.exists())throw new Error(this.path()+": exists.");return this.act.fs.link(this.act.path,t.path(),e)},resolveLink:function(){return this._resolve(this.act.path)},isLink:function(){return this.fs.isLink(this.path())},getResolvedLinkPath:function(){return this.act.path},getFS:function(){return this.act.fs},observe:function(t){return this.getFS().getRootFS().addObserver(this.path(),t)},getBlob:function(){return new Blob([this.bytes()],{type:this.contentType()})},download:function(){if(this.isDir())throw new Error(this+": Download dir is not support yet. Use 'zip' instead.");s(this.getBlob(),this.name())},err:function(){var t=Array.prototype.slice.call(arguments);throw console.log.apply(console,t),new Error(t.join(""))}},Object.defineProperty(c.prototype,"act",{get:function(){return this._act?this._act:(this._act={},this._act.path=this.fs.resolveLink(this._path),this._act.fs=this.rootFS.resolveFS(this._act.path),e.is(this._act,{fs:o,path:r.Absolute}),this._act)}}),c}),t("RootFS",["assert","FS2","PathUtil","SFile"],function(t,e,r,n){var i=function(r){t.is(r,e),this.mount(null,r)},o=i.prototype,s={err:function(t,e){throw new Error(t+": "+e)},fstab:function(){return this._fstab=this._fstab||[]},unmount:function(e){t.is(arguments,[r.AbsDir]);var n=this.fstab();console.log(n);for(var i=0;i<n.length;i++)if(n[i].mountPoint==e)return n.splice(i,1),!0;return!1},availFSTypes:function(){return e.availFSTypes()},mount:function(r,n,i){if("string"==typeof n){var o=t(e.availFSTypes()[n],"fstype "+n+" is undefined.");n=o(r,i||{})}t.is(n,e),n.mounted(this,r),this.fstab().unshift(n)},resolveFS:function(n){t.is(n,r.Absolute);var i;return this.fstab().forEach(function(t){i||t.inMyFS(n)&&(i=t)}),i||this.err(n,"Cannot resolve"),t.is(i,e)},get:function(e){return t.is(e,r.Absolute),new n(this.resolveFS(e),e)},addObserver:function(){this.observers=this.observers||[];var e,r;if(2==arguments.length)e=arguments[0],r=arguments[1];else{if(1!=arguments.length)throw new Error("Invalid argument spec");e="",r=arguments[0]}t.is(e,String),t.is(r,Function);var n=this.observers,i={path:e,handler:r,remove:function(){var t=n.indexOf(this);n.splice(t,1)}};return this.observers.push(i),i},notifyChanged:function(t,e){this.observers&&this.observers.forEach(function(n){r.startsWith(t,n.path)&&n.handler(t,e)})},getRootFS:function(){return this}};for(var a in s)o[a]=s[a];return i}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof t&&t.amd)t("jszip",[],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.JSZip=e()}}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return i(r?r:t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,s,a,u,c,f=[],l=0,h=t.length,d=h,p="string"!==n.getTypeOf(t);l<t.length;)d=h-l,p?(e=t[l++],r=h>l?t[l++]:0,i=h>l?t[l++]:0):(e=t.charCodeAt(l++),r=h>l?t.charCodeAt(l++):0,i=h>l?t.charCodeAt(l++):0),s=e>>2,a=(3&e)<<4|r>>4,u=d>1?(15&r)<<2|i>>6:64,c=d>2?63&i:64,f.push(o.charAt(s)+o.charAt(a)+o.charAt(u)+o.charAt(c));return f.join("")},r.decode=function(t){var e,r,n,s,a,u,c,f=0,l=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var d=3*t.length/4;if(t.charAt(t.length-1)===o.charAt(64)&&d--,t.charAt(t.length-2)===o.charAt(64)&&d--,d%1!==0)throw new Error("Invalid base64 input, bad content length.");var p;for(p=i.uint8array?new Uint8Array(0|d):new Array(0|d);f<t.length;)s=o.indexOf(t.charAt(f++)),a=o.indexOf(t.charAt(f++)),u=o.indexOf(t.charAt(f++)),c=o.indexOf(t.charAt(f++)),e=s<<2|a>>4,r=(15&a)<<4|u>>2,n=(3&u)<<6|c,p[l++]=e,64!==u&&(p[l++]=r),64!==c&&(p[l++]=n);return p}},{"./support":30,"./utils":32}],2:[function(t,e){"use strict";function r(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}var n=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/DataLengthProbe"),s=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");r.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(t,e,r){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=r},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\x00\x00",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e){"use strict";function r(){for(var t,e=[],r=0;256>r;r++){t=r;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function n(t,e,r,n){var i=s,o=n+r;t=-1^t;for(var a=n;o>a;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}function i(t,e,r,n){var i=s,o=n+r;t=-1^t;for(var a=n;o>a;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return-1^t}var o=t("./utils"),s=r();e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var r="string"!==o.getTypeOf(t);return r?n(0|e,t,t.length,0):i(0|e,t,t.length,0)}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e){var r=null;r="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:r}},{lie:58}],7:[function(t,e,r){"use strict";function n(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=t("pako"),s=t("./utils"),a=t("./stream/GenericWorker"),u=i?"uint8array":"array";r.magic="\b\x00",s.inherits(n,a),n.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(u,t.data),!1)},n.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},n.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},n.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new n("Deflate",t)},r.uncompressWorker=function(){return new n("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:59}],8:[function(t,e){"use strict";function r(t,e,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var n=t("../utils"),i=t("../stream/GenericWorker"),o=t("../utf8"),s=t("../crc32"),a=t("../signature"),u=function(t,e){var r,n="";for(r=0;e>r;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},c=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16},f=function(t){return 63&(t||0)},l=function(t,e,r,i,l,h){var d,p,m=t.file,g=t.compression,v=h!==o.utf8encode,y=n.transformTo("string",h(m.name)),b=n.transformTo("string",o.utf8encode(m.name)),_=m.comment,w=n.transformTo("string",h(_)),x=n.transformTo("string",o.utf8encode(_)),S=b.length!==m.name.length,k=x.length!==_.length,E="",A="",C="",D=m.dir,T=m.date,I={crc32:0,compressedSize:0,uncompressedSize:0};(!e||r)&&(I.crc32=t.crc32,I.compressedSize=t.compressedSize,I.uncompressedSize=t.uncompressedSize);var B=0;e&&(B|=8),v||!S&&!k||(B|=2048);var F=0,R=0;D&&(F|=16),"UNIX"===l?(R=798,F|=c(m.unixPermissions,D)):(R=20,F|=f(m.dosPermissions,D)),d=T.getUTCHours(),d<<=6,d|=T.getUTCMinutes(),d<<=5,d|=T.getUTCSeconds()/2,p=T.getUTCFullYear()-1980,p<<=4,p|=T.getUTCMonth()+1,p<<=5,p|=T.getUTCDate(),S&&(A=u(1,1)+u(s(y),4)+b,E+="up"+u(A.length,2)+A),k&&(C=u(1,1)+u(s(w),4)+x,E+="uc"+u(C.length,2)+C);var O="";O+="\n\x00",O+=u(B,2),O+=g.magic,O+=u(d,2),O+=u(p,2),O+=u(I.crc32,4),O+=u(I.compressedSize,4),O+=u(I.uncompressedSize,4),O+=u(y.length,2),O+=u(E.length,2);var z=a.LOCAL_FILE_HEADER+O+y+E,P=a.CENTRAL_FILE_HEADER+u(R,2)+O+u(w.length,2)+"\x00\x00\x00\x00"+u(F,4)+u(i,4)+y+E+w;return{fileRecord:z,dirRecord:P}},h=function(t,e,r,i,o){var s="",c=n.transformTo("string",o(i));return s=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+u(t,2)+u(t,2)+u(e,4)+u(r,4)+u(c.length,2)+c},d=function(t){var e="";return e=a.DATA_DESCRIPTOR+u(t.crc32,4)+u(t.compressedSize,4)+u(t.uncompressedSize,4)};n.inherits(r,i),r.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,i.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},r.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=l(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=l(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:d(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,n=h(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},r.prototype.resume=function(){return i.prototype.resume.call(this)?!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0):!1},r.prototype.error=function(t){var e=this._sources;if(!i.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},r.prototype.lock=function(){i.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=r},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var n=t("../compressions"),i=t("./ZipFileWorker"),o=function(t,e){var r=t||e,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i};r.generateWorker=function(t,e,r){var n=new i(e.streamFiles,r,e.platform,e.encodeFileName),s=0;try{t.forEach(function(t,r){s++;var i=o(r.options.compression,e.compression),a=r.options.compressionOptions||e.compressionOptions||{},u=r.dir,c=r.date;r._compressWorker(i,a).withStreamInfo("file",{name:t,dir:u,date:c,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)}),n.entriesCount=s}catch(a){n.error(a)}return n}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}r.prototype=t("./object"),r.prototype.loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.1.5",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=t("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e){"use strict";function r(t){return new i.Promise(function(e,r){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",function(t){r(t)}).on("end",function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}var n=t("./utils"),i=t("./external"),o=t("./utf8"),n=t("./utils"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),u=t("./nodejsUtils");e.exports=function(t,e){var a=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then(function(t){var r=new s(e);return r.load(t),r}).then(function(t){var n=[i.Promise.resolve(t)],o=t.files;if(e.checkCRC32)for(var s=0;s<o.length;s++)n.push(r(o[s]));return i.Promise.all(n)}).then(function(t){for(var r=t.shift(),n=r.files,i=0;i<n.length;i++){var o=n[i];a.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(a.comment=r.zipComment),a})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e){"use strict";function r(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}var n=t("../utils"),i=t("../stream/GenericWorker");n.inherits(r,i),r.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},r.prototype.pause=function(){return i.prototype.pause.call(this)?(this._stream.pause(),!0):!1},r.prototype.resume=function(){return i.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},e.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e){"use strict";function r(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",function(t,e){i.push(t)||i._helper.pause(),r&&r(e)}).on("error",function(t){i.emit("error",t)}).on("end",function(){i.push(null)})}var n=t("readable-stream").Readable,i=t("../utils");i.inherits(r,n),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){return new Buffer(t,e)},allocBuffer:function(t){return Buffer.alloc?Buffer.alloc(t):new Buffer(t)},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume
}}},{}],15:[function(t,e){"use strict";function r(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var n=t("./utf8"),i=t("./utils"),o=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),a=t("./defaults"),u=t("./compressedObject"),c=t("./zipObject"),f=t("./generate"),l=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),d=function(t,e,r){var n,s=i.getTypeOf(e),f=i.extend(r||{},a);f.date=f.date||new Date,null!==f.compression&&(f.compression=f.compression.toUpperCase()),"string"==typeof f.unixPermissions&&(f.unixPermissions=parseInt(f.unixPermissions,8)),f.unixPermissions&&16384&f.unixPermissions&&(f.dir=!0),f.dosPermissions&&16&f.dosPermissions&&(f.dir=!0),f.dir&&(t=m(t)),f.createFolders&&(n=p(t))&&g.call(this,n,!0);var d="string"===s&&f.binary===!1&&f.base64===!1;r&&"undefined"!=typeof r.binary||(f.binary=!d);var v=e instanceof u&&0===e.uncompressedSize;(v||f.dir||!e||0===e.length)&&(f.base64=!1,f.binary=!0,e="",f.compression="STORE",s="string");var y=null;y=e instanceof u||e instanceof o?e:l.isNode&&l.isStream(e)?new h(t,e):i.prepareContent(t,e,f.binary,f.optimizedBinaryString,f.base64);var b=new c(t,y,f);this.files[t]=b},p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},g=function(t,e){return e="undefined"!=typeof e?e:a.createFolders,t=m(t),this.files[t]||d.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],r=e.slice(this.root.length,e.length),r&&e.slice(0,this.root.length)===this.root&&t(r,n))},filter:function(t){var e=[];return this.forEach(function(r,n){t(r,n)&&e.push(n)}),e},file:function(t,e,n){if(1===arguments.length){if(r(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}var o=this.files[this.root+t];return o&&!o.dir?o:null}return t=this.root+t,d.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(r(t))return this.filter(function(e,r){return r.dir&&t.test(e)});var e=this.root+t,n=g.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if(r=i.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),r.type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),("darwin"===r.platform||"freebsd"===r.platform||"linux"===r.platform||"sunos"===r.platform)&&(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var a=r.comment||this.comment||"";e=f.generateWorker(this,r,a)}catch(u){e=new o("error"),e.error(u)}return new s(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return t=t||{},t.type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e){e.exports=t("stream")},{stream:void 0}],17:[function(t,e){"use strict";function r(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}var n=t("./DataReader"),i=t("../utils");i.inherits(r,n),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e){"use strict";function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}var n=t("../utils");r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e){"use strict";function r(t){n.call(this,t)}var n=t("./Uint8ArrayReader"),i=t("../utils");i.inherits(r,n),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e){"use strict";function r(t){n.call(this,t)}var n=t("./DataReader"),i=t("../utils");i.inherits(r,n),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){var e=this.readData(4);return t===e},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e){"use strict";function r(t){n.call(this,t)}var n=t("./ArrayReader"),i=t("../utils");i.inherits(r,n),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e){"use strict";var r=t("../utils"),n=t("../support"),i=t("./ArrayReader"),o=t("./StringReader"),s=t("./NodeBufferReader"),a=t("./Uint8ArrayReader");e.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||n.uint8array?"nodebuffer"===e?new s(t):n.uint8array?new a(r.transformTo("uint8array",t)):new i(r.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e){"use strict";function r(t){n.call(this,"ConvertWorker to "+t),this.destType=t}var n=t("./GenericWorker"),i=t("../utils");i.inherits(r,n),r.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(t,e){"use strict";function r(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var n=t("./GenericWorker"),i=t("../crc32"),o=t("../utils");o.inherits(r,n),r.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e){"use strict";function r(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}var n=t("../utils"),i=t("./GenericWorker");n.inherits(r,i),r.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(t,e){"use strict";function r(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}var n=t("../utils"),i=t("./GenericWorker"),o=16384;n.inherits(r,i),r.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return i.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0):!1},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=o,e=null,r=Math.min(this.max,this.index+t);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,r);break;case"uint8array":e=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":e=this.data.slice(this.index,r)}return this.index=r,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(t,e){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return this.isFinished?!1:(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=r},{}],29:[function(t,e){"use strict";function r(t,e,r){switch(t){case"blob":return s.newBlob(s.transformTo("arraybuffer",e),r);case"base64":return c.encode(e);default:return s.transformTo(t,e)}}function n(t,e){var r,n=0,i=null,o=0;for(r=0;r<e.length;r++)o+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(o),r=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}function i(t,e){return new l.Promise(function(i,o){var s=[],a=t._internalType,u=t._outputType,c=t._mimeType;t.on("data",function(t,r){s.push(t),e&&e(r)}).on("error",function(t){s=[],o(t)}).on("end",function(){try{var t=r(u,n(a,s),c);i(t)}catch(e){o(e)}s=[]}).resume()})}function o(t,e,r){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=e,this._mimeType=r,s.checkSupport(n),this._worker=t.pipe(new a(n)),t.lock()}catch(i){this._worker=new u("error"),this._worker.error(i)}}var s=t("../utils"),a=t("./ConvertWorker"),u=t("./GenericWorker"),c=t("../base64"),f=t("../support"),l=t("../external"),h=null;if(f.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch(d){}o.prototype={accumulate:function(t){return i(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,function(t){e.call(r,t.data,t.meta)}):this._worker.on(t,function(){s.delay(e,arguments,r)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(s.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(i){try{var o=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,s=new o;s.append(n),r.blob=0===s.getBlob("application/zip").size}catch(i){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(i){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";function n(){u.call(this,"utf-8 decode"),this.leftOver=null}function i(){u.call(this,"utf-8 encode")}for(var o=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),u=t("./stream/GenericWorker"),c=new Array(256),f=0;256>f;f++)c[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;c[254]=c[254]=1;var l=function(t){var e,r,n,i,o,a=t.length,u=0;for(i=0;a>i;i++)r=t.charCodeAt(i),55296===(64512&r)&&a>i+1&&(n=t.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),u+=128>r?1:2048>r?2:65536>r?3:4;for(e=s.uint8array?new Uint8Array(u):new Array(u),o=0,i=0;u>o;i++)r=t.charCodeAt(i),55296===(64512&r)&&a>i+1&&(n=t.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),128>r?e[o++]=r:2048>r?(e[o++]=192|r>>>6,e[o++]=128|63&r):65536>r?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},h=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+c[t[r]]>e?r:e},d=function(t){var e,r,n,i,s=t.length,a=new Array(2*s);for(r=0,e=0;s>e;)if(n=t[e++],128>n)a[r++]=n;else if(i=c[n],i>4)a[r++]=65533,e+=i-1;else{for(n&=2===i?31:3===i?15:7;i>1&&s>e;)n=n<<6|63&t[e++],i--;i>1?a[r++]=65533:65536>n?a[r++]=n:(n-=65536,a[r++]=55296|n>>10&1023,a[r++]=56320|1023&n)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)};r.utf8encode=function(t){return s.nodebuffer?a.newBufferFrom(t,"utf-8"):l(t)},r.utf8decode=function(t){return s.nodebuffer?o.transformTo("nodebuffer",t).toString("utf-8"):(t=o.transformTo(s.uint8array?"uint8array":"array",t),d(t))},o.inherits(n,u),n.prototype.processChunk=function(t){var e=o.transformTo(s.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var n=e;e=new Uint8Array(n.length+this.leftOver.length),e.set(this.leftOver,0),e.set(n,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=h(e),a=e;i!==e.length&&(s.uint8array?(a=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(a=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:r.utf8decode(a),meta:t.meta})},n.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=n,o.inherits(i,u),i.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=i},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";function n(t){var e=null;return e=u.uint8array?new Uint8Array(t.length):new Array(t.length),o(t,e)}function i(t){return t}function o(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function s(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=d.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=d.applyCanBeUsed.nodebuffer),i)for(;e>1;)try{return d.stringifyByChunk(t,n,e)}catch(o){e=Math.floor(e/2)}return d.stringifyByChar(t)}function a(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var u=t("./support"),c=t("./base64"),f=t("./nodejsUtils"),l=t("core-js/library/fn/set-immediate"),h=t("./external");r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new i;return o.append(t),o.getBlob(e)}catch(n){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(t,e,r){var n=[],i=0,o=t.length;if(r>=o)return String.fromCharCode.apply(null,t);for(;o>i;)n.push("array"===e||"nodebuffer"===e?String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,o))):String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&1===String.fromCharCode.apply(null,f.allocBuffer(1)).length}catch(t){return!1}}()}};r.applyFromCharCode=s;var p={};p.string={string:i,array:function(t){return o(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return o(t,new Uint8Array(t.length))},nodebuffer:function(t){return o(t,f.allocBuffer(t.length))}},p.array={string:s,array:i,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return f.newBufferFrom(t)}},p.arraybuffer={string:function(t){return s(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:i,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return f.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:i,nodebuffer:function(t){return f.newBufferFrom(t)}},p.nodebuffer={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:i},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e),i=p[n][t](e);return i},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":u.nodebuffer&&f.isBuffer(t)?"nodebuffer":u.uint8array&&t instanceof Uint8Array?"uint8array":u.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){var e=u[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)e=t.charCodeAt(r),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},r.delay=function(t,e,r){l(function(){t.apply(r||null,e||[])})},r.inherits=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,i,o,s){var a=h.Promise.resolve(e).then(function(t){var e=u.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)));return e&&"undefined"!=typeof FileReader?new h.Promise(function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)}):t});return a.then(function(e){var a=r.getTypeOf(e);return a?("arraybuffer"===a?e=r.transformTo("uint8array",e):"string"===a&&(s?e=c.decode(e):i&&o!==!0&&(e=n(e))),e):h.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"core-js/library/fn/set-immediate":36}],33:[function(t,e){"use strict";function r(t){this.files=[],this.loadOptions=t}var n=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=(t("./utf8"),t("./support"));r.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4),i=n===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",r=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44,i=0;n>i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)t=new s({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(0>t){var e=!this.isSignature(0,o.LOCAL_FILE_HEADER);throw new Error(e?"Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html":"Corrupted zip: can't find end of central directory")}this.reader.setIndex(t);var r=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>t)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var s=r-n;if(s>0)this.isSignature(r,o.CENTRAL_FILE_HEADER)||(this.reader.zero=s);else if(0>s)throw new Error("Corrupted zip: missing "+Math.abs(s)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e){"use strict";function r(t,e){this.options=t,this.loadOptions=e}var n=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),u=t("./compressions"),c=t("./support"),f=0,l=3,h=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null};r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(e=h(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,t===f&&(this.dosPermissions=63&this.externalFileAttributes),t===l&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n}},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)?null:s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)?null:s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=r},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e){"use strict";var r=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),i=t("./utf8"),o=t("./compressedObject"),s=t("./stream/GenericWorker"),a=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};a.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");n=t.toLowerCase();var o="string"===n||"text"===n;("binarystring"===n||"text"===n)&&(n="string"),e=this._decompressWorker();var a=!this._dataBinary;a&&!o&&(e=e.pipe(new i.Utf8EncodeWorker)),!a&&o&&(e=e.pipe(new i.Utf8DecodeWorker))}catch(u){e=new s("error"),e.error(u)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new i.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof s?this._data:new n(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")
},f=0;f<u.length;f++)a.prototype[u[f]]=c;e.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e){t("../modules/web.immediate"),e.exports=t("../modules/_core").setImmediate},{"../modules/_core":40,"../modules/web.immediate":56}],37:[function(t,e){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],38:[function(t,e){var r=t("./_is-object");e.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":51}],39:[function(t,e){var r={}.toString;e.exports=function(t){return r.call(t).slice(8,-1)}},{}],40:[function(t,e){var r=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=r)},{}],41:[function(t,e){var r=t("./_a-function");e.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":37}],42:[function(t,e){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":45}],43:[function(t,e){var r=t("./_is-object"),n=t("./_global").document,i=r(n)&&r(n.createElement);e.exports=function(t){return i?n.createElement(t):{}}},{"./_global":46,"./_is-object":51}],44:[function(t,e){var r=t("./_global"),n=t("./_core"),i=t("./_ctx"),o=t("./_hide"),s="prototype",a=function(t,e,u){var c,f,l,h=t&a.F,d=t&a.G,p=t&a.S,m=t&a.P,g=t&a.B,v=t&a.W,y=d?n:n[e]||(n[e]={}),b=y[s],_=d?r:p?r[e]:(r[e]||{})[s];d&&(u=e);for(c in u)f=!h&&_&&void 0!==_[c],f&&c in y||(l=f?_[c]:u[c],y[c]=d&&"function"!=typeof _[c]?u[c]:g&&f?i(l,r):v&&_[c]==l?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[s]=t[s],e}(l):m&&"function"==typeof l?i(Function.call,l):l,m&&((y.virtual||(y.virtual={}))[c]=l,t&a.R&&b&&!b[c]&&o(b,c,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},{"./_core":40,"./_ctx":41,"./_global":46,"./_hide":47}],45:[function(t,e){e.exports=function(t){try{return!!t()}catch(e){return!0}}},{}],46:[function(t,e){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],47:[function(t,e){var r=t("./_object-dp"),n=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,i){return r.f(t,e,n(1,i))}:function(t,e,r){return t[e]=r,t}},{"./_descriptors":42,"./_object-dp":52,"./_property-desc":53}],48:[function(t,e){e.exports=t("./_global").document&&document.documentElement},{"./_global":46}],49:[function(t,e){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":42,"./_dom-create":43,"./_fails":45}],50:[function(t,e){e.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},{}],51:[function(t,e){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],52:[function(t,e,r){var n=t("./_an-object"),i=t("./_ie8-dom-define"),o=t("./_to-primitive"),s=Object.defineProperty;r.f=t("./_descriptors")?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return s(t,e,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},{"./_an-object":38,"./_descriptors":42,"./_ie8-dom-define":49,"./_to-primitive":55}],53:[function(t,e){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],54:[function(t,e){var r,n,i,o=t("./_ctx"),s=t("./_invoke"),a=t("./_html"),u=t("./_dom-create"),c=t("./_global"),f=c.process,l=c.setImmediate,h=c.clearImmediate,d=c.MessageChannel,p=0,m={},g="onreadystatechange",v=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},y=function(t){v.call(t.data)};l&&h||(l=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++p]=function(){s("function"==typeof t?t:Function(t),e)},r(p),p},h=function(t){delete m[t]},"process"==t("./_cof")(f)?r=function(t){f.nextTick(o(v,t,1))}:d?(n=new d,i=n.port2,n.port1.onmessage=y,r=o(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):r=g in u("script")?function(t){a.appendChild(u("script"))[g]=function(){a.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),e.exports={set:l,clear:h}},{"./_cof":39,"./_ctx":41,"./_dom-create":43,"./_global":46,"./_html":48,"./_invoke":50}],55:[function(t,e){var r=t("./_is-object");e.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":51}],56:[function(t){var e=t("./_export"),r=t("./_task");e(e.G+e.B,{setImmediate:r.set,clearImmediate:r.clear})},{"./_export":44,"./_task":54}],57:[function(t,e){(function(t){"use strict";function r(){f=!0;for(var t,e,r=l.length;r;){for(e=l,l=[],t=-1;++t<r;)e[t]();r=l.length}f=!1}function n(t){1!==l.push(t)||f||i()}var i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,a=new o(r),u=t.document.createTextNode("");a.observe(u,{characterData:!0}),i=function(){u.data=s=++s%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){r(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(r,0)};else{var c=new t.MessageChannel;c.port1.onmessage=r,i=function(){c.port2.postMessage(0)}}var f,l=[];e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(t,e){"use strict";function r(){}function n(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,t!==r&&a(this,t)}function i(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function o(t,e,r){d(function(){var n;try{n=e(r)}catch(i){return p.reject(t,i)}n===t?p.reject(t,new TypeError("Cannot resolve promise with itself")):p.resolve(t,n)})}function s(t){var e=t&&t.then;return!t||"object"!=typeof t&&"function"!=typeof t||"function"!=typeof e?void 0:function(){e.apply(t,arguments)}}function a(t,e){function r(e){o||(o=!0,p.reject(t,e))}function n(e){o||(o=!0,p.resolve(t,e))}function i(){e(n,r)}var o=!1,s=u(i);"error"===s.status&&r(s.value)}function u(t,e){var r={};try{r.value=t(e),r.status="success"}catch(n){r.status="error",r.value=n}return r}function c(t){return t instanceof this?t:p.resolve(new this(r),t)}function f(t){var e=new this(r);return p.reject(e,t)}function l(t){function e(t,e){function r(t){s[e]=t,++a!==i||o||(o=!0,p.resolve(c,s))}n.resolve(t).then(r,function(t){o||(o=!0,p.reject(c,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,u=-1,c=new this(r);++u<i;)e(t[u],u);return c}function h(t){function e(t){n.resolve(t).then(function(t){o||(o=!0,p.resolve(a,t))},function(t){o||(o=!0,p.reject(a,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,a=new this(r);++s<i;)e(t[s]);return a}var d=t("immediate"),p={},m=["REJECTED"],g=["FULFILLED"],v=["PENDING"];e.exports=n,n.prototype["catch"]=function(t){return this.then(null,t)},n.prototype.then=function(t,e){if("function"!=typeof t&&this.state===g||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(r);if(this.state!==v){var s=this.state===g?t:e;o(n,s,this.outcome)}else this.queue.push(new i(n,t,e));return n},i.prototype.callFulfilled=function(t){p.resolve(this.promise,t)},i.prototype.otherCallFulfilled=function(t){o(this.promise,this.onFulfilled,t)},i.prototype.callRejected=function(t){p.reject(this.promise,t)},i.prototype.otherCallRejected=function(t){o(this.promise,this.onRejected,t)},p.resolve=function(t,e){var r=u(s,e);if("error"===r.status)return p.reject(t,r.value);var n=r.value;if(n)a(t,n);else{t.state=g,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},p.reject=function(t,e){t.state=m,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},n.resolve=c,n.reject=f,n.all=l,n.race=h},{immediate:57}],59:[function(t,e){var r=t("./lib/utils/common").assign,n=t("./lib/deflate"),i=t("./lib/inflate"),o=t("./lib/zlib/constants"),s={};r(s,n,i,o),e.exports=s},{"./lib/deflate":60,"./lib/inflate":61,"./lib/utils/common":62,"./lib/zlib/constants":65}],60:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=u.assign({level:y,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==m)throw new Error(f[r]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?c.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=a.deflateSetDictionary(this.strm,i),r!==m)throw new Error(f[r]);this._dict_set=!0}}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||f[r.err];return r.result}function o(t,e){return e=e||{},e.raw=!0,i(t,e)}function s(t,e){return e=e||{},e.gzip=!0,i(t,e)}var a=t("./zlib/deflate"),u=t("./utils/common"),c=t("./utils/strings"),f=t("./zlib/messages"),l=t("./zlib/zstream"),h=Object.prototype.toString,d=0,p=4,m=0,g=1,v=2,y=-1,b=0,_=8;n.prototype.push=function(t,e){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?p:d,i.input="string"==typeof t?c.string2buf(t):"[object ArrayBuffer]"===h.call(t)?new Uint8Array(t):t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(o),i.next_out=0,i.avail_out=o),r=a.deflate(i,n),r!==g&&r!==m)return this.onEnd(r),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(n===p||n===v))&&this.onData("string"===this.options.to?c.buf2binstring(u.shrinkBuf(i.output,i.next_out)):u.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&r!==g);return n===p?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m):n===v?(this.onEnd(m),i.avail_out=0,!0):!0},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===m&&(this.result="string"===this.options.to?this.chunks.join(""):u.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=n,r.deflate=i,r.deflateRaw=o,r.gzip=s},{"./utils/common":62,"./utils/strings":63,"./zlib/deflate":67,"./zlib/messages":72,"./zlib/zstream":74}],61:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=s.inflateInit2(this.strm,e.windowBits);if(r!==c.Z_OK)throw new Error(f[r]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||f[r.err];return r.result}function o(t,e){return e=e||{},e.raw=!0,i(t,e)}var s=t("./zlib/inflate"),a=t("./utils/common"),u=t("./utils/strings"),c=t("./zlib/constants"),f=t("./zlib/messages"),l=t("./zlib/zstream"),h=t("./zlib/gzheader"),d=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,i,o,f,l,h=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;n=e===~~e?e:e===!0?c.Z_FINISH:c.Z_NO_FLUSH,h.input="string"==typeof t?u.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?new Uint8Array(t):t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new a.Buf8(p),h.next_out=0,h.avail_out=p),r=s.inflate(h,c.Z_NO_FLUSH),r===c.Z_NEED_DICT&&m&&(l="string"==typeof m?u.string2buf(m):"[object ArrayBuffer]"===d.call(m)?new Uint8Array(m):m,r=s.inflateSetDictionary(this.strm,l)),r===c.Z_BUF_ERROR&&g===!0&&(r=c.Z_OK,g=!1),r!==c.Z_STREAM_END&&r!==c.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0===h.avail_out||r===c.Z_STREAM_END||0===h.avail_in&&(n===c.Z_FINISH||n===c.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=u.utf8border(h.output,h.next_out),o=h.next_out-i,f=u.buf2string(h.output,i),h.next_out=o,h.avail_out=p-o,o&&a.arraySet(h.output,h.output,i,o,0),this.onData(f)):this.onData(a.shrinkBuf(h.output,h.next_out))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((h.avail_in>0||0===h.avail_out)&&r!==c.Z_STREAM_END);return r===c.Z_STREAM_END&&(n=c.Z_FINISH),n===c.Z_FINISH?(r=s.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c.Z_OK):n===c.Z_SYNC_FLUSH?(this.onEnd(c.Z_OK),h.avail_out=0,!0):!0},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===c.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=n,r.inflate=i,r.inflateRaw=o,r.ungzip=i},{"./utils/common":62,"./utils/strings":63,"./zlib/constants":65,"./zlib/gzheader":68,"./zlib/inflate":70,"./zlib/messages":72,"./zlib/zstream":74}],62:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var o=0;n>o;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(n=0,e=0,r=t.length;r>e;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;r>e;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,r,n,i){for(var o=0;n>o;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],63:[function(t,e,r){function n(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;e>n;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var u=new i.Buf8(256),c=0;256>c;c++)u[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;u[254]=u[254]=1,r.string2buf=function(t){var e,r,n,o,s,a=t.length,u=0;for(o=0;a>o;o++)r=t.charCodeAt(o),55296===(64512&r)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),u+=128>r?1:2048>r?2:65536>r?3:4;for(e=new i.Buf8(u),s=0,o=0;u>s;o++)r=t.charCodeAt(o),55296===(64512&r)&&a>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),128>r?e[s++]=r:2048>r?(e[s++]=192|r>>>6,e[s++]=128|63&r):65536>r?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;n>r;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,o,s,a=e||t.length,c=new Array(2*a);for(i=0,r=0;a>r;)if(o=t[r++],128>o)c[i++]=o;else if(s=u[o],s>4)c[i++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&a>r;)o=o<<6|63&t[r++],s--;s>1?c[i++]=65533:65536>o?c[i++]=o:(o-=65536,c[i++]=55296|o>>10&1023,c[i++]=56320|1023&o)}return n(c,i)},r.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+u[t[r]]>e?r:e}},{"./common":62}],64:[function(t,e){"use strict";function r(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}e.exports=r},{}],65:[function(t,e){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],66:[function(t,e){"use strict";function r(){for(var t,e=[],r=0;256>r;r++){t=r;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function n(t,e,r,n){var o=i,s=n+r;t^=-1;for(var a=n;s>a;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}var i=r();e.exports=n},{}],67:[function(t,e,r){"use strict";function n(t,e){return t.msg=O[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(I.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function a(t,e){B._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function c(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function f(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,I.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=F(t.adler,e,i,r):2===t.state.wrap&&(t.adler=R(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function l(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-le?t.strstart-(t.w_size-le):0,c=t.window,f=t.w_mask,l=t.prev,h=t.strstart+fe,d=c[o+s-1],p=c[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do if(r=e,c[r+s]===p&&c[r+s-1]===d&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do;while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&h>o);if(n=fe-(h-o),o=h-fe,n>s){if(t.match_start=e,s=n,n>=a)break;d=c[o+s-1],p=c[o+s]}}while((e=l[e&f])>u&&0!==--i);return s<=t.lookahead?s:t.lookahead}function h(t){var e,r,n,i,o,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-le)){I.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=t.hash_size,e=r;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--r);r=s,e=r;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--r);i+=s}if(0===t.strm.avail_in)break;if(r=f(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=ce)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+ce-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<ce)););}while(t.lookahead<le&&0!==t.strm.avail_in)}function d(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===z)return _e;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,a(t,!1),0===t.strm.avail_out))return _e;if(t.strstart-t.block_start>=t.w_size-le&&(a(t,!1),0===t.strm.avail_out))return _e}return t.insert=0,e===U?(a(t,!0),0===t.strm.avail_out?xe:Se):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?_e:_e}function p(t,e){for(var r,n;;){if(t.lookahead<le){if(h(t),t.lookahead<le&&e===z)return _e;if(0===t.lookahead)break}if(r=0,t.lookahead>=ce&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-le&&(t.match_length=l(t,r)),t.match_length>=ce)if(n=B._tr_tally(t,t.strstart-t.match_start,t.match_length-ce),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ce){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(a(t,!1),0===t.strm.avail_out))return _e}return t.insert=t.strstart<ce-1?t.strstart:ce-1,e===U?(a(t,!0),0===t.strm.avail_out?xe:Se):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?_e:we}function m(t,e){for(var r,n,i;;){if(t.lookahead<le){if(h(t),t.lookahead<le&&e===z)return _e;if(0===t.lookahead)break}if(r=0,t.lookahead>=ce&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ce-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-le&&(t.match_length=l(t,r),t.match_length<=5&&(t.strategy===H||t.match_length===ce&&t.strstart-t.match_start>4096)&&(t.match_length=ce-1)),t.prev_length>=ce&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-ce,n=B._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ce),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ce-1,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return _e}else if(t.match_available){if(n=B._tr_tally(t,0,t.window[t.strstart-1]),n&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return _e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=B._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ce-1?t.strstart:ce-1,e===U?(a(t,!0),0===t.strm.avail_out?xe:Se):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?_e:we}function g(t,e){for(var r,n,i,o,s=t.window;;){if(t.lookahead<=fe){if(h(t),t.lookahead<=fe&&e===z)return _e;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ce&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+fe;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&o>i);t.match_length=fe-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ce?(r=B._tr_tally(t,1,t.match_length-ce),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(a(t,!1),0===t.strm.avail_out))return _e}return t.insert=0,e===U?(a(t,!0),0===t.strm.avail_out?xe:Se):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?_e:we}function v(t,e){for(var r;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===z)return _e;break}if(t.match_length=0,r=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(a(t,!1),0===t.strm.avail_out))return _e}return t.insert=0,e===U?(a(t,!0),0===t.strm.avail_out?xe:Se):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?_e:we}function y(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function b(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=T[t.level].max_lazy,t.good_match=T[t.level].good_length,t.nice_match=T[t.level].nice_length,t.max_chain_length=T[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ce-1,t.match_available=0,t.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*ae),this.dyn_dtree=new I.Buf16(2*(2*oe+1)),this.bl_tree=new I.Buf16(2*(2*se+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(ue+1),this.heap=new I.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=V,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?de:ye,t.adler=2===e.wrap?0:1,e.last_flush=z,B._tr_init(e),L):n(t,$)}function x(t){var e=w(t);return e===L&&b(t.state),e}function S(t,e){return t&&t.state?2!==t.state.wrap?$:(t.state.gzhead=e,L):$}function k(t,e,r,i,o,s){if(!t)return $;var a=1;if(e===Z&&(e=6),0>i?(a=0,i=-i):i>15&&(a=2,i-=16),1>o||o>Q||r!==X||8>i||i>15||0>e||e>9||0>s||s>G)return n(t,$);8===i&&(i=9);var u=new _;return t.state=u,u.strm=t,u.wrap=a,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+ce-1)/ce),u.window=new I.Buf8(2*u.w_size),u.head=new I.Buf16(u.hash_size),u.prev=new I.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new I.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,x(t)}function E(t,e){return k(t,e,X,te,ee,Y)}function A(t,e){var r,a,f,l;if(!t||!t.state||e>N||0>e)return t?n(t,$):$;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===be&&e!==U)return n(t,0===t.avail_out?q:$);if(a.strm=t,r=a.last_flush,a.last_flush=e,a.status===de)if(2===a.wrap)t.adler=0,u(a,31),u(a,139),u(a,8),a.gzhead?(u(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),u(a,255&a.gzhead.time),u(a,a.gzhead.time>>8&255),u(a,a.gzhead.time>>16&255),u(a,a.gzhead.time>>24&255),u(a,9===a.level?2:a.strategy>=K||a.level<2?4:0),u(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(u(a,255&a.gzhead.extra.length),u(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=R(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=pe):(u(a,0),u(a,0),u(a,0),u(a,0),u(a,0),u(a,9===a.level?2:a.strategy>=K||a.level<2?4:0),u(a,ke),a.status=ye);else{var h=X+(a.w_bits-8<<4)<<8,d=-1;d=a.strategy>=K||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=d<<6,0!==a.strstart&&(h|=he),h+=31-h%31,a.status=ye,c(a,h),0!==a.strstart&&(c(a,t.adler>>>16),c(a,65535&t.adler)),t.adler=1}if(a.status===pe)if(a.gzhead.extra){for(f=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>f&&(t.adler=R(t.adler,a.pending_buf,a.pending-f,f)),s(t),f=a.pending,a.pending!==a.pending_buf_size));)u(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>f&&(t.adler=R(t.adler,a.pending_buf,a.pending-f,f)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=me)}else a.status=me;if(a.status===me)if(a.gzhead.name){f=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>f&&(t.adler=R(t.adler,a.pending_buf,a.pending-f,f)),s(t),f=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,u(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>f&&(t.adler=R(t.adler,a.pending_buf,a.pending-f,f)),0===l&&(a.gzindex=0,a.status=ge)}else a.status=ge;if(a.status===ge)if(a.gzhead.comment){f=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>f&&(t.adler=R(t.adler,a.pending_buf,a.pending-f,f)),s(t),f=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,u(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>f&&(t.adler=R(t.adler,a.pending_buf,a.pending-f,f)),0===l&&(a.status=ve)}else a.status=ve;if(a.status===ve&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(u(a,255&t.adler),u(a,t.adler>>8&255),t.adler=0,a.status=ye)):a.status=ye),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,L}else if(0===t.avail_in&&i(e)<=i(r)&&e!==U)return n(t,q);if(a.status===be&&0!==t.avail_in)return n(t,q);if(0!==t.avail_in||0!==a.lookahead||e!==z&&a.status!==be){var p=a.strategy===K?v(a,e):a.strategy===J?g(a,e):T[a.level].func(a,e);if((p===xe||p===Se)&&(a.status=be),p===_e||p===xe)return 0===t.avail_out&&(a.last_flush=-1),L;if(p===we&&(e===P?B._tr_align(a):e!==N&&(B._tr_stored_block(a,0,0,!1),e===j&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,L}return e!==U?L:a.wrap<=0?M:(2===a.wrap?(u(a,255&t.adler),u(a,t.adler>>8&255),u(a,t.adler>>16&255),u(a,t.adler>>24&255),u(a,255&t.total_in),u(a,t.total_in>>8&255),u(a,t.total_in>>16&255),u(a,t.total_in>>24&255)):(c(a,t.adler>>>16),c(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?L:M)}function C(t){var e;return t&&t.state?(e=t.state.status,e!==de&&e!==pe&&e!==me&&e!==ge&&e!==ve&&e!==ye&&e!==be?n(t,$):(t.state=null,e===ye?n(t,W):L)):$}function D(t,e){var r,n,i,s,a,u,c,f,l=e.length;if(!t||!t.state)return $;if(r=t.state,s=r.wrap,2===s||1===s&&r.status!==de||r.lookahead)return $;for(1===s&&(t.adler=F(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new I.Buf8(r.w_size),I.arraySet(f,e,l-r.w_size,r.w_size,0),e=f,l=r.w_size),a=t.avail_in,u=t.next_in,c=t.input,t.avail_in=l,t.next_in=0,t.input=e,h(r);r.lookahead>=ce;){n=r.strstart,i=r.lookahead-(ce-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+ce-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++;while(--i);r.strstart=n,r.lookahead=ce-1,h(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ce-1,r.match_available=0,t.next_in=u,t.input=c,t.avail_in=a,r.wrap=s,L
}var T,I=t("../utils/common"),B=t("./trees"),F=t("./adler32"),R=t("./crc32"),O=t("./messages"),z=0,P=1,j=3,U=4,N=5,L=0,M=1,$=-2,W=-3,q=-5,Z=-1,H=1,K=2,J=3,G=4,Y=0,V=2,X=8,Q=9,te=15,ee=8,re=29,ne=256,ie=ne+1+re,oe=30,se=19,ae=2*ie+1,ue=15,ce=3,fe=258,le=fe+ce+1,he=32,de=42,pe=69,me=73,ge=91,ve=103,ye=113,be=666,_e=1,we=2,xe=3,Se=4,ke=3;T=[new y(0,0,0,0,d),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,m),new y(8,16,32,32,m),new y(8,16,128,128,m),new y(8,32,128,256,m),new y(32,128,258,1024,m),new y(32,258,258,4096,m)],r.deflateInit=E,r.deflateInit2=k,r.deflateReset=x,r.deflateResetKeep=w,r.deflateSetHeader=S,r.deflate=A,r.deflateEnd=C,r.deflateSetDictionary=D,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./messages":72,"./trees":73}],68:[function(t,e){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},{}],69:[function(t,e){"use strict";var r=30,n=12;e.exports=function(t,e){var i,o,s,a,u,c,f,l,h,d,p,m,g,v,y,b,_,w,x,S,k,E,A,C,D;i=t.state,o=t.next_in,C=t.input,s=o+(t.avail_in-5),a=t.next_out,D=t.output,u=a-(e-t.avail_out),c=a+(t.avail_out-257),f=i.dmax,l=i.wsize,h=i.whave,d=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,y=i.distcode,b=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;t:do{15>g&&(m+=C[o++]<<g,g+=8,m+=C[o++]<<g,g+=8),w=v[m&b];e:for(;;){if(x=w>>>24,m>>>=x,g-=x,x=w>>>16&255,0===x)D[a++]=65535&w;else{if(!(16&x)){if(0===(64&x)){w=v[(65535&w)+(m&(1<<x)-1)];continue e}if(32&x){i.mode=n;break t}t.msg="invalid literal/length code",i.mode=r;break t}S=65535&w,x&=15,x&&(x>g&&(m+=C[o++]<<g,g+=8),S+=m&(1<<x)-1,m>>>=x,g-=x),15>g&&(m+=C[o++]<<g,g+=8,m+=C[o++]<<g,g+=8),w=y[m&_];r:for(;;){if(x=w>>>24,m>>>=x,g-=x,x=w>>>16&255,!(16&x)){if(0===(64&x)){w=y[(65535&w)+(m&(1<<x)-1)];continue r}t.msg="invalid distance code",i.mode=r;break t}if(k=65535&w,x&=15,x>g&&(m+=C[o++]<<g,g+=8,x>g&&(m+=C[o++]<<g,g+=8)),k+=m&(1<<x)-1,k>f){t.msg="invalid distance too far back",i.mode=r;break t}if(m>>>=x,g-=x,x=a-u,k>x){if(x=k-x,x>h&&i.sane){t.msg="invalid distance too far back",i.mode=r;break t}if(E=0,A=p,0===d){if(E+=l-x,S>x){S-=x;do D[a++]=p[E++];while(--x);E=a-k,A=D}}else if(x>d){if(E+=l+d-x,x-=d,S>x){S-=x;do D[a++]=p[E++];while(--x);if(E=0,S>d){x=d,S-=x;do D[a++]=p[E++];while(--x);E=a-k,A=D}}}else if(E+=d-x,S>x){S-=x;do D[a++]=p[E++];while(--x);E=a-k,A=D}for(;S>2;)D[a++]=A[E++],D[a++]=A[E++],D[a++]=A[E++],S-=3;S&&(D[a++]=A[E++],S>1&&(D[a++]=A[E++]))}else{E=a-k;do D[a++]=D[E++],D[a++]=D[E++],D[a++]=D[E++],S-=3;while(S>2);S&&(D[a++]=D[E++],S>1&&(D[a++]=D[E++]))}break}}break}}while(s>o&&c>a);S=g>>3,o-=S,g-=S<<3,m&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=s>o?5+(s-o):5-(o-s),t.avail_out=c>a?257+(c-a):257-(a-c),i.hold=m,i.bits=g}},{}],70:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=j,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new y.Buf32(me),e.distcode=e.distdyn=new y.Buf32(ge),e.sane=1,e.back=-1,T):F}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):F}function a(t,e){var r,n;return t&&t.state?(n=t.state,0>e?(r=0,e=-e):(r=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?F:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):F}function u(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=a(t,e),r!==T&&(t.state=null),r):F}function c(t){return u(t,ye)}function f(t){if(be){var e;for(g=new y.Buf32(512),v=new y.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(x(k,t.lens,0,288,g,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;x(E,t.lens,0,32,v,0,t.work,{bits:5}),be=!1}t.lencode=g,t.lenbits=9,t.distcode=v,t.distbits=5}function l(t,e,r,n){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),n>=o.wsize?(y.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),y.arraySet(o.window,e,r-n,i,o.wnext),n-=i,n?(y.arraySet(o.window,e,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(t,e){var r,i,o,s,a,u,c,h,d,p,m,g,v,me,ge,ve,ye,be,_e,we,xe,Se,ke,Ee,Ae=0,Ce=new y.Buf8(4),De=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return F;r=t.state,r.mode===J&&(r.mode=G),a=t.next_out,o=t.output,c=t.avail_out,s=t.next_in,i=t.input,u=t.avail_in,h=r.hold,d=r.bits,p=u,m=c,Se=T;t:for(;;)switch(r.mode){case j:if(0===r.wrap){r.mode=G;break}for(;16>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(2&r.wrap&&35615===h){r.check=0,Ce[0]=255&h,Ce[1]=h>>>8&255,r.check=_(r.check,Ce,2,0),h=0,d=0,r.mode=U;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",r.mode=he;break}if((15&h)!==P){t.msg="unknown compression method",r.mode=he;break}if(h>>>=4,d-=4,xe=(15&h)+8,0===r.wbits)r.wbits=xe;else if(xe>r.wbits){t.msg="invalid window size",r.mode=he;break}r.dmax=1<<xe,t.adler=r.check=1,r.mode=512&h?H:J,h=0,d=0;break;case U:for(;16>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(r.flags=h,(255&r.flags)!==P){t.msg="unknown compression method",r.mode=he;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=he;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(Ce[0]=255&h,Ce[1]=h>>>8&255,r.check=_(r.check,Ce,2,0)),h=0,d=0,r.mode=N;case N:for(;32>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}r.head&&(r.head.time=h),512&r.flags&&(Ce[0]=255&h,Ce[1]=h>>>8&255,Ce[2]=h>>>16&255,Ce[3]=h>>>24&255,r.check=_(r.check,Ce,4,0)),h=0,d=0,r.mode=L;case L:for(;16>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(Ce[0]=255&h,Ce[1]=h>>>8&255,r.check=_(r.check,Ce,2,0)),h=0,d=0,r.mode=M;case M:if(1024&r.flags){for(;16>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(Ce[0]=255&h,Ce[1]=h>>>8&255,r.check=_(r.check,Ce,2,0)),h=0,d=0}else r.head&&(r.head.extra=null);r.mode=$;case $:if(1024&r.flags&&(g=r.length,g>u&&(g=u),g&&(r.head&&(xe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),y.arraySet(r.head.extra,i,s,g,xe)),512&r.flags&&(r.check=_(r.check,i,g,s)),u-=g,s+=g,r.length-=g),r.length))break t;r.length=0,r.mode=W;case W:if(2048&r.flags){if(0===u)break t;g=0;do xe=i[s+g++],r.head&&xe&&r.length<65536&&(r.head.name+=String.fromCharCode(xe));while(xe&&u>g);if(512&r.flags&&(r.check=_(r.check,i,g,s)),u-=g,s+=g,xe)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=q;case q:if(4096&r.flags){if(0===u)break t;g=0;do xe=i[s+g++],r.head&&xe&&r.length<65536&&(r.head.comment+=String.fromCharCode(xe));while(xe&&u>g);if(512&r.flags&&(r.check=_(r.check,i,g,s)),u-=g,s+=g,xe)break t}else r.head&&(r.head.comment=null);r.mode=Z;case Z:if(512&r.flags){for(;16>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(h!==(65535&r.check)){t.msg="header crc mismatch",r.mode=he;break}h=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=J;break;case H:for(;32>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}t.adler=r.check=n(h),h=0,d=0,r.mode=K;case K:if(0===r.havedict)return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=u,r.hold=h,r.bits=d,B;t.adler=r.check=1,r.mode=J;case J:if(e===C||e===D)break t;case G:if(r.last){h>>>=7&d,d-=7&d,r.mode=ce;break}for(;3>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}switch(r.last=1&h,h>>>=1,d-=1,3&h){case 0:r.mode=Y;break;case 1:if(f(r),r.mode=re,e===D){h>>>=2,d-=2;break t}break;case 2:r.mode=Q;break;case 3:t.msg="invalid block type",r.mode=he}h>>>=2,d-=2;break;case Y:for(h>>>=7&d,d-=7&d;32>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if((65535&h)!==(h>>>16^65535)){t.msg="invalid stored block lengths",r.mode=he;break}if(r.length=65535&h,h=0,d=0,r.mode=V,e===D)break t;case V:r.mode=X;case X:if(g=r.length){if(g>u&&(g=u),g>c&&(g=c),0===g)break t;y.arraySet(o,i,s,g,a),u-=g,s+=g,c-=g,a+=g,r.length-=g;break}r.mode=J;break;case Q:for(;14>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(r.nlen=(31&h)+257,h>>>=5,d-=5,r.ndist=(31&h)+1,h>>>=5,d-=5,r.ncode=(15&h)+4,h>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=he;break}r.have=0,r.mode=te;case te:for(;r.have<r.ncode;){for(;3>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}r.lens[De[r.have++]]=7&h,h>>>=3,d-=3}for(;r.have<19;)r.lens[De[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ke={bits:r.lenbits},Se=x(S,r.lens,0,19,r.lencode,0,r.work,ke),r.lenbits=ke.bits,Se){t.msg="invalid code lengths set",r.mode=he;break}r.have=0,r.mode=ee;case ee:for(;r.have<r.nlen+r.ndist;){for(;Ae=r.lencode[h&(1<<r.lenbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(d>=ge);){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(16>ye)h>>>=ge,d-=ge,r.lens[r.have++]=ye;else{if(16===ye){for(Ee=ge+2;Ee>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(h>>>=ge,d-=ge,0===r.have){t.msg="invalid bit length repeat",r.mode=he;break}xe=r.lens[r.have-1],g=3+(3&h),h>>>=2,d-=2}else if(17===ye){for(Ee=ge+3;Ee>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}h>>>=ge,d-=ge,xe=0,g=3+(7&h),h>>>=3,d-=3}else{for(Ee=ge+7;Ee>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}h>>>=ge,d-=ge,xe=0,g=11+(127&h),h>>>=7,d-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=he;break}for(;g--;)r.lens[r.have++]=xe}}if(r.mode===he)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=he;break}if(r.lenbits=9,ke={bits:r.lenbits},Se=x(k,r.lens,0,r.nlen,r.lencode,0,r.work,ke),r.lenbits=ke.bits,Se){t.msg="invalid literal/lengths set",r.mode=he;break}if(r.distbits=6,r.distcode=r.distdyn,ke={bits:r.distbits},Se=x(E,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ke),r.distbits=ke.bits,Se){t.msg="invalid distances set",r.mode=he;break}if(r.mode=re,e===D)break t;case re:r.mode=ne;case ne:if(u>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=u,r.hold=h,r.bits=d,w(t,m),a=t.next_out,o=t.output,c=t.avail_out,s=t.next_in,i=t.input,u=t.avail_in,h=r.hold,d=r.bits,r.mode===J&&(r.back=-1);break}for(r.back=0;Ae=r.lencode[h&(1<<r.lenbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(d>=ge);){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(ve&&0===(240&ve)){for(be=ge,_e=ve,we=ye;Ae=r.lencode[we+((h&(1<<be+_e)-1)>>be)],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(d>=be+ge);){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}h>>>=be,d-=be,r.back+=be}if(h>>>=ge,d-=ge,r.back+=ge,r.length=ye,0===ve){r.mode=ue;break}if(32&ve){r.back=-1,r.mode=J;break}if(64&ve){t.msg="invalid literal/length code",r.mode=he;break}r.extra=15&ve,r.mode=ie;case ie:if(r.extra){for(Ee=r.extra;Ee>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=oe;case oe:for(;Ae=r.distcode[h&(1<<r.distbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(d>=ge);){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(0===(240&ve)){for(be=ge,_e=ve,we=ye;Ae=r.distcode[we+((h&(1<<be+_e)-1)>>be)],ge=Ae>>>24,ve=Ae>>>16&255,ye=65535&Ae,!(d>=be+ge);){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}h>>>=be,d-=be,r.back+=be}if(h>>>=ge,d-=ge,r.back+=ge,64&ve){t.msg="invalid distance code",r.mode=he;break}r.offset=ye,r.extra=15&ve,r.mode=se;case se:if(r.extra){for(Ee=r.extra;Ee>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=he;break}r.mode=ae;case ae:if(0===c)break t;if(g=m-c,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=he;break}g>r.wnext?(g-=r.wnext,v=r.wsize-g):v=r.wnext-g,g>r.length&&(g=r.length),me=r.window}else me=o,v=a-r.offset,g=r.length;g>c&&(g=c),c-=g,r.length-=g;do o[a++]=me[v++];while(--g);0===r.length&&(r.mode=ne);break;case ue:if(0===c)break t;o[a++]=r.length,c--,r.mode=ne;break;case ce:if(r.wrap){for(;32>d;){if(0===u)break t;u--,h|=i[s++]<<d,d+=8}if(m-=c,t.total_out+=m,r.total+=m,m&&(t.adler=r.check=r.flags?_(r.check,o,m,a-m):b(r.check,o,m,a-m)),m=c,(r.flags?h:n(h))!==r.check){t.msg="incorrect data check",r.mode=he;break}h=0,d=0}r.mode=fe;case fe:if(r.wrap&&r.flags){for(;32>d;){if(0===u)break t;u--,h+=i[s++]<<d,d+=8}if(h!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=he;break}h=0,d=0}r.mode=le;case le:Se=I;break t;case he:Se=R;break t;case de:return O;case pe:default:return F}return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=u,r.hold=h,r.bits=d,(r.wsize||m!==t.avail_out&&r.mode<he&&(r.mode<ce||e!==A))&&l(t,t.output,t.next_out,m-t.avail_out)?(r.mode=de,O):(p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,r.total+=m,r.wrap&&m&&(t.adler=r.check=r.flags?_(r.check,o,m,t.next_out-m):b(r.check,o,m,t.next_out-m)),t.data_type=r.bits+(r.last?64:0)+(r.mode===J?128:0)+(r.mode===re||r.mode===V?256:0),(0===p&&0===m||e===A)&&Se===T&&(Se=z),Se)}function d(t){if(!t||!t.state)return F;var e=t.state;return e.window&&(e.window=null),t.state=null,T}function p(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?F:(r.head=e,e.done=!1,T)):F}function m(t,e){var r,n,i,o=e.length;return t&&t.state?(r=t.state,0!==r.wrap&&r.mode!==K?F:r.mode===K&&(n=1,n=b(n,e,o,0),n!==r.check)?R:(i=l(t,e,o,o))?(r.mode=de,O):(r.havedict=1,T)):F}var g,v,y=t("../utils/common"),b=t("./adler32"),_=t("./crc32"),w=t("./inffast"),x=t("./inftrees"),S=0,k=1,E=2,A=4,C=5,D=6,T=0,I=1,B=2,F=-2,R=-3,O=-4,z=-5,P=8,j=1,U=2,N=3,L=4,M=5,$=6,W=7,q=8,Z=9,H=10,K=11,J=12,G=13,Y=14,V=15,X=16,Q=17,te=18,ee=19,re=20,ne=21,ie=22,oe=23,se=24,ae=25,ue=26,ce=27,fe=28,le=29,he=30,de=31,pe=32,me=852,ge=592,ve=15,ye=ve,be=!0;r.inflateReset=s,r.inflateReset2=a,r.inflateResetKeep=o,r.inflateInit=c,r.inflateInit2=u,r.inflate=h,r.inflateEnd=d,r.inflateGetHeader=p,r.inflateSetDictionary=m,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./inffast":69,"./inftrees":71}],71:[function(t,e){"use strict";var r=t("../utils/common"),n=15,i=852,o=592,s=0,a=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,d,p,m,g,v,y){var b,_,w,x,S,k,E,A,C,D=y.bits,T=0,I=0,B=0,F=0,R=0,O=0,z=0,P=0,j=0,U=0,N=null,L=0,M=new r.Buf16(n+1),$=new r.Buf16(n+1),W=null,q=0;for(T=0;n>=T;T++)M[T]=0;for(I=0;p>I;I++)M[e[d+I]]++;for(R=D,F=n;F>=1&&0===M[F];F--);if(R>F&&(R=F),0===F)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(B=1;F>B&&0===M[B];B++);for(B>R&&(R=B),P=1,T=1;n>=T;T++)if(P<<=1,P-=M[T],0>P)return-1;if(P>0&&(t===s||1!==F))return-1;for($[1]=0,T=1;n>T;T++)$[T+1]=$[T]+M[T];for(I=0;p>I;I++)0!==e[d+I]&&(v[$[e[d+I]]++]=I);if(t===s?(N=W=v,k=19):t===a?(N=c,L-=257,W=f,q-=257,k=256):(N=l,W=h,k=-1),U=0,I=0,T=B,S=g,O=R,z=0,w=-1,j=1<<R,x=j-1,t===a&&j>i||t===u&&j>o)return 1;for(;;){E=T-z,v[I]<k?(A=0,C=v[I]):v[I]>k?(A=W[q+v[I]],C=N[L+v[I]]):(A=96,C=0),b=1<<T-z,_=1<<O,B=_;do _-=b,m[S+(U>>z)+_]=E<<24|A<<16|C|0;while(0!==_);for(b=1<<T-1;U&b;)b>>=1;if(0!==b?(U&=b-1,U+=b):U=0,I++,0===--M[T]){if(T===F)break;T=e[d+v[I]]}if(T>R&&(U&x)!==w){for(0===z&&(z=R),S+=B,O=T-z,P=1<<O;F>O+z&&(P-=M[O+z],!(0>=P));)O++,P<<=1;if(j+=1<<O,t===a&&j>i||t===u&&j>o)return 1;w=U&x,m[w]=R<<24|O<<16|S-g|0}}return 0!==U&&(m[S+U]=T-z<<24|64<<16|0),y.bits=R,0}},{"../utils/common":62}],72:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],73:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return 256>t?ue[t]:ue[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,r){t.bi_valid>G-r?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>G-t.bi_valid,t.bi_valid+=r-G):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function c(t,e,r){u(t,r[2*e],r[2*e+1])}function f(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function l(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function h(t,e){var r,n,i,o,s,a,u=e.dyn_tree,c=e.max_code,f=e.stat_desc.static_tree,l=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;J>=o;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;K>r;r++)n=t.heap[r],o=u[2*u[2*n+1]+1]+1,o>p&&(o=p,m++),u[2*n+1]=o,n>c||(t.bl_count[o]++,s=0,n>=d&&(s=h[n-d]),a=u[2*n],t.opt_len+=a*(o+s),l&&(t.static_len+=a*(f[2*n+1]+s)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)i=t.heap[--r],i>c||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}function d(t,e,r){var n,i,o=new Array(J+1),s=0;for(n=1;J>=n;n++)o[n]=s=s+r[n-1]<<1;for(i=0;e>=i;i++){var a=t[2*i+1];0!==a&&(t[2*i]=f(o[a]++,a))}}function p(){var t,e,r,n,o,s=new Array(J+1);for(r=0,n=0;$-1>n;n++)for(fe[n]=r,t=0;t<1<<ee[n];t++)ce[r++]=n;for(ce[r-1]=n,o=0,n=0;16>n;n++)for(le[n]=o,t=0;t<1<<re[n];t++)ue[o++]=n;for(o>>=7;Z>n;n++)for(le[n]=o<<7,t=0;t<1<<re[n]-7;t++)ue[256+o++]=n;for(e=0;J>=e;e++)s[e]=0;for(t=0;143>=t;)se[2*t+1]=8,t++,s[8]++;for(;255>=t;)se[2*t+1]=9,t++,s[9]++;for(;279>=t;)se[2*t+1]=7,t++,s[7]++;for(;287>=t;)se[2*t+1]=8,t++,s[8]++;for(d(se,q+1,s),t=0;Z>t;t++)ae[2*t+1]=5,ae[2*t]=f(t,5);he=new i(se,ee,W+1,q,J),de=new i(ae,re,0,Z,J),pe=new i(new Array(0),ne,0,H,Y)}function m(t){var e;for(e=0;q>e;e++)t.dyn_ltree[2*e]=0;for(e=0;Z>e;e++)t.dyn_dtree[2*e]=0;for(e=0;H>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*V]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function g(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function v(t,e,r,n){g(t),n&&(a(t,r),a(t,~r)),F.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function y(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function b(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&y(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!y(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function _(t,e,r){var n,i,o,a,f=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*f]<<8|t.pending_buf[t.d_buf+2*f+1],i=t.pending_buf[t.l_buf+f],f++,0===n?c(t,i,e):(o=ce[i],c(t,o+W+1,e),a=ee[o],0!==a&&(i-=fe[o],u(t,i,a)),n--,o=s(n),c(t,o,r),a=re[o],0!==a&&(n-=le[o],u(t,n,a)));while(f<t.last_lit);c(t,V,e)}function w(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=K,r=0;u>r;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=2>c?++c:0,o[2*i]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;r>=1;r--)b(t,o,r);i=u;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],b(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,b(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],h(t,e),d(o,c,t.bl_count)}function x(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;r>=n;n++)i=s,s=e[2*(n+1)+1],++a<u&&i===s||(c>a?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*X]++):10>=a?t.bl_tree[2*Q]++:t.bl_tree[2*te]++,a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function S(t,e,r){var n,i,o=-1,s=e[1],a=0,f=7,l=4;for(0===s&&(f=138,l=3),n=0;r>=n;n++)if(i=s,s=e[2*(n+1)+1],!(++a<f&&i===s)){if(l>a){do c(t,i,t.bl_tree);while(0!==--a)}else 0!==i?(i!==o&&(c(t,i,t.bl_tree),a--),c(t,X,t.bl_tree),u(t,a-3,2)):10>=a?(c(t,Q,t.bl_tree),u(t,a-3,3)):(c(t,te,t.bl_tree),u(t,a-11,7));a=0,o=i,0===s?(f=138,l=3):i===s?(f=6,l=3):(f=7,l=4)}}function k(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=H-1;e>=3&&0===t.bl_tree[2*ie[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function E(t,e,r,n){var i;for(u(t,e-257,5),u(t,r-1,5),u(t,n-4,4),i=0;n>i;i++)u(t,t.bl_tree[2*ie[i]+1],3);S(t,t.dyn_ltree,e-1),S(t,t.dyn_dtree,r-1)}function A(t){var e,r=4093624447;for(e=0;31>=e;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return O;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return z;for(e=32;W>e;e++)if(0!==t.dyn_ltree[2*e])return z;return O}function C(t){me||(p(),me=!0),t.l_desc=new o(t.dyn_ltree,he),t.d_desc=new o(t.dyn_dtree,de),t.bl_desc=new o(t.bl_tree,pe),t.bi_buf=0,t.bi_valid=0,m(t)}function D(t,e,r,n){u(t,(j<<1)+(n?1:0),3),v(t,e,r,!0)}function T(t){u(t,U<<1,3),c(t,V,se),l(t)}function I(t,e,r,n){var i,o,s=0;t.level>0?(t.strm.data_type===P&&(t.strm.data_type=A(t)),w(t,t.l_desc),w(t,t.d_desc),s=k(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,i>=o&&(i=o)):i=o=r+5,i>=r+4&&-1!==e?D(t,e,r,n):t.strategy===R||o===i?(u(t,(U<<1)+(n?1:0),3),_(t,se,ae)):(u(t,(N<<1)+(n?1:0),3),E(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),_(t,t.dyn_ltree,t.dyn_dtree)),m(t),n&&g(t)}function B(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(ce[r]+W+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1}var F=t("../utils/common"),R=4,O=0,z=1,P=2,j=0,U=1,N=2,L=3,M=258,$=29,W=256,q=W+1+$,Z=30,H=19,K=2*q+1,J=15,G=16,Y=7,V=256,X=16,Q=17,te=18,ee=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],re=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=512,se=new Array(2*(q+2));n(se);var ae=new Array(2*Z);n(ae);var ue=new Array(oe);n(ue);var ce=new Array(M-L+1);n(ce);var fe=new Array($);n(fe);var le=new Array(Z);n(le);var he,de,pe,me=!1;r._tr_init=C,r._tr_stored_block=D,r._tr_flush_block=I,r._tr_tally=B,r._tr_align=T},{"../utils/common":62}],74:[function(t,e){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}]},{},[10])(10)}),t("zip",["SFile","jszip","FileSaver.min","Util","DeferredUtil"],function(t,e,r,n,i){var o={};return o.zip=function(r,n,o){function a(t,e){return e.each(function(e){if(e.isDir()){var r=t.folder(e.name().replace(/[\/\\]$/,""));return a(r,e)}return e.getContent(function(r){t.file(e.name(),r.toArrayBuffer())})})}t.is(n)||(o=n),o=o||{};var u=new e;return a(u,r).then(function(){return i.resolve(u.generateAsync({type:"arraybuffer",compression:"DEFLATE"}))}).then(function(e){return t.is(n)?n.setBytes(e):void s(new Blob([e],{type:"application/zip"}),r.name().replace(/[\/\\]$/,"")+".zip")})},o.unzip=function(r,n,o){var s,a={};o=o||{},t.is(r)&&(s=r.getContent(),r=s.toArrayBuffer()),o.onCheckFile||(o.onCheckFile=function(t){return o.overwrite?t:t.exists()?!1:t});var u=new e;return i.resolve(u.loadAsync(r)).then(function(){return i.each(u.files,function(e,r){return i.resolve(r.async("arraybuffer")).then(function(e){var i=n.rel(r.name);if(console.log("Inflating",r.name),!i.isDir()){var s={file:i,status:"uploaded"};a[i.path()]=s;var u=FS.Content.bin(e,i.contentType()),c=o.onCheckFile(i,u);return c===!1&&(s.status="cancelled",i=null),t.is(c)&&(i.path()!==c.path()&&(s.redirectedTo=c),i=c),i?i.setContent(u):void 0}})})}).then(function(){return console.log("unzip done",a),a})},o.JSZip=e,o}),t("FS",["FS2","NativeFS","LSFS","WebFS","PathUtil","Env","assert","SFile","RootFS","Content","zip","DeferredUtil"],function(t,e,r,n,i,o,s,a,u,c,f,l){var h={};h.assert=s,h.Content=c,h.Class=t,h.DeferredUtil=l,h.Env=o,h.LSFS=r,h.NativeFS=e,h.PathUtil=i,h.RootFS=u,h.SFile=a,h.WebFS=n,h.zip=f,"object"==typeof window&&(window.FS=h);var d,p=new o({});return l.external.Promise=f.JSZip.external.Promise,h.addFSType=t.addFSType,h.availFSTypes=t.availFSTypes,h.setEnvProvider=function(t){p=t},h.getEnvProvider=function(){return p},h.setEnv=function(t,e){if("object"==typeof t)for(var r in t)p.set(r,t[r]);else p.set(t,e)},h.getEnv=function(t){return"string"==typeof t?p.get(t):p.value},h.init=function(t){d||(t||(t="object"==typeof process?new e:new r(localStorage)),d=new u(t))},h.getRootFS=function(){return h.init(),d},h.get=function(){return h.init(),d.get.apply(d,arguments)},h.expandPath=function(){return p.expandPath.apply(p,arguments)},h.resolve=function(t,e){return h.init(),a.is(t)?t:(t=p.expandPath(t),e&&!i.isAbsolutePath(t)?(e=p.expandPath(e),h.get(e).rel(t)):h.get(t))},h.mount=function(){return h.init(),d.mount.apply(d,arguments)},h.unmount=function(){return h.init(),d.unmount.apply(d,arguments)},h.isFile=function(t){return a.is(t)},h});var a;return e(["FS"],function(t){a=t}),void 0===window.FS&&(window.FS=a),a}),requireSimulator.setName("HttpHelper"),requireSimulator.setName("Arrow"),Arrow=function(){var t={};return t.show=function(t){function e(){t.addClass("tutorial-highlight"),setTimeout(r,200)}function r(){t.removeClass("tutorial-highlight"),o-->0?setTimeout(e,200):n()}function n(){o=0,$.data(t[0],"blinking","f")}if("string"==typeof t&&(t=$(t)),0==t.length)return!1;var i=$.data(t[0],"blinking");if("t"!=i){$.data(t[0],"blinking","t");var o=3;e(),t.click(function(){n()})}},t.showOld=function(t){function e(){n&&(n.attr({src:"images/arrow"+i+".png"}),i=(i+1)%4)}if("string"==typeof t&&(t=$(t)),0==t.length)return!1;var r=t.offset(),n=$("<img>").attr({src:"images/arrow0.png"}).css({font:"40px",position:"absolute",left:r.left,top:r.top+t.height(),color:"red",zIndex:1e3,"z-index":1e3}).appendTo("body"),i=0;return setInterval(e,250),t.click(function(){n&&(n.remove(),n=null)}),!0},t}(),requireSimulator.setName("Util"),Util=function(){function t(t,r){null==r&&(r=""),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=n.exec(window.location.href);return null==i?r:e(i[1])}function e(t){return decodeURIComponent(t.replace(/\+/g,"%20"))}function r(t,e){return t.substring(t.length-e.length)===e}function n(t,e){return t.substring(0,e.length)===e}function i(t){function e(e){throw console.log(e),console.log(t,c),new Error(e)}t=t.replace(/[\n=]/g,"");var r=new Object;r[65]=0,r[66]=1,r[67]=2,r[68]=3,r[69]=4,r[70]=5,r[71]=6,r[72]=7,r[73]=8,r[74]=9,r[75]=10,r[76]=11,r[77]=12,r[78]=13,r[79]=14,r[80]=15,r[81]=16,r[82]=17,r[83]=18,r[84]=19,r[85]=20,r[86]=21,r[87]=22,r[88]=23,r[89]=24,r[90]=25,r[97]=26,r[98]=27,r[99]=28,r[100]=29,r[101]=30,r[102]=31,r[103]=32,r[104]=33,r[105]=34,r[106]=35,r[107]=36,r[108]=37,r[109]=38,r[110]=39,r[111]=40,r[112]=41,r[113]=42,r[114]=43,r[115]=44,r[116]=45,r[117]=46,r[118]=47,r[119]=48,r[120]=49,r[121]=50,r[122]=51,r[48]=52,r[49]=53,r[50]=54,r[51]=55,r[52]=56,r[53]=57,r[54]=58,r[55]=59,r[56]=60,r[57]=61,r[43]=62,r[47]=63;var n,i=t.length,o=0,s=0;if(!i)return new ArrayBuffer(0);n=Math.floor(i/4*3),"="==t.charAt(i-1)&&(n-=1),"="==t.charAt(i-2)&&(n-=1);for(var a=new ArrayBuffer(n),u=new Uint8Array(a),c=0,f=0;n>f&&(s=r[t.charCodeAt(c)],void 0===s&&e("Invalid letter: "+t.charCodeAt(c)),o=s<<2,c++,s=r[t.charCodeAt(c)],void 0===s&&e("Invalid letter: "+t.charCodeAt(c)),u[f]=o|s>>4&3,o=(15&s)<<4,c++,f++,!(f>=n))&&(s=r[t.charCodeAt(c)],void 0===s&&e("Invalid letter: "+t.charCodeAt(c)),u[f]=o|s>>2&15,o=(3&s)<<6,c++,f++,!(f>=n));)s=r[t.charCodeAt(c)],void 0===s&&e("Invalid letter: "+t.charCodeAt(c)),u[f]=o|s,c++,f++;return a}function o(t){for(var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],r="",n=new Uint8Array(t),i=n.length,o=0,s=0,a=0;i>a&&(s=n[a],r+=e[s>>2],o=(3&s)<<4,a++,!(a>=i))&&(s=n[a],r+=e[o|s>>4],o=(15&s)<<2,a++,!(a>=i));)s=n[a],r+=e[o|s>>6],r+=e[63&s],a++;var u=i%3;return u&&(r+=e[o]),1==u?r+="==":2==u&&(r+="="),r}function s(t){if(t.__privatized)return t;var e={__privatized:!0};for(var r in t)!function(r){var n=t[r];r.match(/^_/)||"function"==typeof n&&(e[r]=function(){var e=n.apply(t,arguments);return e})}(r);return e}function a(){return"undefined"!=typeof Buffer}function u(t){return a()&&t instanceof Buffer}function c(t){return t instanceof ArrayBuffer||u(t)}function f(t){for(var e=[],r=0;r<t.length;r++)e.push("%"+("0"+t[r].toString(16)).slice(-2));try{return decodeURIComponent(e.join(""))}catch(n){throw console.log(e.join("")),n}}function l(t,e){for(var r=encodeURIComponent(t),n=/^%(..)/,i=[],o=0;o<r.length;o++){var s=n.exec(r.substring(o));s?(i.push(parseInt("0x"+s[1])),o+=s[0].length-1):i.push(r.charCodeAt(o))}return"undefined"!=typeof Buffer&&e===Buffer?new Buffer(i):new Uint8Array(i).buffer}return{getQueryString:t,endsWith:r,startsWith:n,Base64_To_ArrayBuffer:i,Base64_From_ArrayBuffer:o,utf8bytes2str:f,str2utf8bytes:l,privatize:s,hasNodeBuffer:a,isNodeBuffer:u,isBuffer:c}}(),requireSimulator.setName("WebSite"),define(["FS"],function(t){var e,r=t.PathUtil,n=document.location.href,i=!!n.match(/html\/dev\//)&&!!n.match(/localhost:3/);if(n.match(/jsrun\.it/))e={urlAliases:{"images/Ball.png":"http://jsrun.it/assets/9/X/T/b/9XTbt.png","images/base.png":"http://jsrun.it/assets/6/F/y/3/6Fy3B.png","images/Sample.png":"http://jsrun.it/assets/s/V/S/l/sVSlZ.png","images/neko.png":"http://jsrun.it/assets/f/D/z/z/fDzze.png","images/mapchip.png":"http://jsrun.it/assets/f/u/N/v/fuNvz.png","images/inputPad.png":"http://jsrun.it/assets/r/K/T/Y/rKTY9.png"},top:"",devMode:i,pluginTop:"http://tonyuedit.appspot.com/js/plugins",removeJSOutput:!0};else if(n.match(/tonyuexe\.appspot\.com/)||n.match(/localhost:8887/)||n.match(/\/html\/((dev)|(build))\//))e={urlAliases:{"images/Ball.png":"../../images/Ball.png","images/base.png":"../../images/base.png","images/Sample.png":"../../images/Sample.png","images/neko.png":"../../images/neko.png","images/inputPad.png":"../../images/inputPad.png","images/mapchip.png":"../../images/mapchip.png","images/sound.png":"../../images/sound.png","images/sound_ogg.png":"../../images/sound_ogg.png","images/sound_mp3.png":"../../images/sound_mp3.png","images/sound_mp4.png":"../../images/sound_mp4.png","images/sound_m4a.png":"../../images/sound_m4a.png","images/sound_mid.png":"../../images/sound_mid.png","images/sound_wav.png":"../../images/sound_wav.png","images/ecl.png":"../../images/ecl.png"},top:"../..",devMode:i};else if(n.match(/bitarrow/)||n.match(/localhost.*pub/)){e={};var o=e;e.serverType="BA",o.runtime="../../../runtime/",o.urlAliases={"images/base.png":o.runtime+"images/base.png","images/Sample.png":o.runtime+"images/Sample.png","images/neko.png":o.runtime+"images/neko.png","images/inputPad.png":o.runtime+"images/inputPad.png","images/mapchip.png":o.runtime+"images/mapchip.png","images/sound.png":o.runtime+"images/sound.png","images/sound_ogg.png":o.runtime+"images/sound_ogg.png","images/sound_mp3.png":o.runtime+"images/sound_mp3.png","images/sound_mp4.png":o.runtime+"images/sound_mp4.png","images/sound_m4a.png":o.runtime+"images/sound_m4a.png","images/sound_mid.png":o.runtime+"images/sound_mid.png","images/sound_wav.png":o.runtime+"images/sound_wav.png","images/ecl.png":o.runtime+"images/ecl.png"}
}else e={urlAliases:{},top:".",devMode:i};var s=window.navigator.userAgent.toLowerCase();return e.tablet=-1!=s.indexOf("windows")&&-1!=s.indexOf("touch")||-1!=s.indexOf("ipad")||-1!=s.indexOf("android")&&-1==s.indexOf("mobile")||-1!=s.indexOf("firefox")&&-1!=s.indexOf("tablet")||-1!=s.indexOf("kindle")||-1!=s.indexOf("silk")||-1!=s.indexOf("playbook"),e.mobile=-1!=s.indexOf("windows")&&-1!=s.indexOf("phone")||-1!=s.indexOf("iphone")||-1!=s.indexOf("ipod")||-1!=s.indexOf("android")&&-1!=s.indexOf("mobile")||-1!=s.indexOf("firefox")&&-1!=s.indexOf("mobile")||-1!=s.indexOf("blackberry"),e.pluginTop||(e.pluginTop=e.top+"/js/plugins"),e.disableROM={},n.match(/tonyuedit\.appspot\.com/)||n.match(/localhost:8888/),(n.match(/\.appspot\.com/)||n.match(/localhost:888[87]/))&&(e.serverType="GAE"),n.match(/localhost:3000/)&&(e.serverType="Node"),e.serverTop=n.match(/tonyuexe\.appspot\.com/)||n.match(/localhost:8887/)?e.top+"/exe":e.top+"/edit",e.sampleImg=e.top+"/images",e.blobPath=e.serverTop+"/serveBlob",e.isNW="object"==typeof process&&(process.__node_webkit||process.__nwjs),e.mp3Disabled=e.isNW,e.tonyuHome="/Tonyu/",e.url={getDirInfo:e.serverTop+"/getDirInfo",getFiles:e.serverTop+"/File2LSSync",putFiles:e.serverTop+"/LS2FileSync"},e.PathSep="/",e.isNW?(e.PathSep=require("path").sep,e.cwd=r.directorify(process.cwd().replace(/\\/g,"/")),e.tonyuHome=process.env.TONYU_HOME?r.directorify(process.env.TONYU_HOME):r.rel(e.cwd,"fs/Tonyu/"),e.logdir=process.env.TONYU_LOGDIR,e.wwwDir=r.rel(e.cwd,"www/"),e.platform=process.platform,e.ffmpeg=r.rel(e.cwd,"win32"==e.platform?"ffmpeg/bin/ffmpeg.exe":"ffmpeg/bin/ffmpeg"),e.pkgInfo=require(r.rel(e.cwd,"package.json")),e.projects=process.env.TONYU_PROJECTS?process.env.TONYU_PROJECTS.replace(/\\/g,"/").split(require("path").delimiter):e.pkgInfo&&e.pkgInfo.config&&e.pkgInfo.config.prjDirs?e.pkgInfo.config.prjDirs.map(function(t){return t=r.directorify(t),r.isAbsolute(t)?t:r.rel(e.cwd,t)}):[r.rel(e.cwd,"Projects/"),r.rel(e.tonyuHome,"Projects/")],e.kernelDir=r.rel(e.wwwDir,"Kernel/")):(e.wwwDir=location.protocol+"//"+location.host+"/",e.projects=[r.rel(e.tonyuHome,"Projects/")]),(n.match(/tonyuedit\.appspot\.com/)||n.match(/localhost:888/))&&(e.kernelDir=location.protocol+"//"+location.host+"/Kernel/"),e.compiledKernel=n.match(/tonyuedit\.appspot\.com/)||n.match(/localhost:888/)||e.isNW?e.top+"/Kernel/js/concat.js":"BA"===e.serverType?e.runtime+"lib/tonyu/kernel.js":"http://tonyuexe.appspot.com/Kernel/js/concat.js",t.setEnvProvider(new t.Env(e)),window.WebSite=e}),requireSimulator.setName("assert"),define(["FS"],function(t){return t.assert}),requireSimulator.setName("Shell"),define(["FS","assert"],function(t,e){function r(e,r){var i=n(e);if(t.SFile.is(i)||console.log(i," is not file"),r&&!i.exists())throw new Error(i+": no such file or directory");return i}function n(e){if("string"!=typeof e)return e;var r=i.cwd;return o.isAbsolutePath(e)?t.resolve(e,r):r.rel(e)}var i={},o=e(t.PathUtil);return i.newCommand=function(t,e){this[t]=e},i.cd=function(t){return i.cwd=r(t,!0),i.pwd()},i.vars=Object.create(t.getEnv()),i.mount=function(e,r){if(!e||!e.t){var n=[];for(var i in t.getRootFS().availFSTypes())n.push(i);return void sh.err("-t=("+n.join("|")+") should be specified.")}t.mount(r,e.t,e)},i.unmount=function(e){t.unmount(e)},i.fstab=function(){var e=t.getRootFS(),r=e.fstab(),n=this;r.forEach(function(t){n.echo(t.fstype()+"	"+(t.mountPoint||"<Default>"))})},i.resolve=r,i.pwd=function(){return i.cwd+""},i.ls=function(t){return t=t?r(t,!0):i.cwd,t.ls()},i.cp=function(t,e,n){n||(n={}),n.v&&(i.echo("cp",t,e),n.echo=i.echo.bind(i));var o=r(t,!0),s=r(e);return o.copyTo(s,n)},i.ln=function(t,e,n){var i=r(e),o=r(t,!0);if(i.isDir()&&i.exists()&&(i=i.rel(o.name())),i.exists())throw new Error(i+" exists");return i.link(o,n)},i.rm=function(t,e){if(e||(e={}),e.notrash)return t=r(t,!1),t.removeWithoutTrash(),1;if(t=r(t,!0),t.isDir()&&e.r){var n=t,o=0;return n.each(function(t){t.exists()&&(o+=i.rm(t,e))}),n.rm(),o+1}return t.rm(),1},i.mkdir=function(t){if(t=r(t,!1),t.exists())throw new Error(t+" : exists");return t.mkdir()},i.cat=function(t){return t=r(t,!0),i.echo(t.getContent(function(e){return t.isText()?e.toPlainText():e.toURL()}))},i.resolve=function(t){return t||(t="."),t=r(t)},i.grep=function(t,e,n){function o(t,e,r){n.res&&n.res.push({file:t,lineNo:e,line:r}),i.echo(t+"("+e+"): "+r)}return e=r(e,!0),n||(n={}),n.res||(n.res=[]),e.isDir()?e.each(function(e){i.grep(t,e,n)}):"string"==typeof t&&e.lines().forEach(function(r,n){r.indexOf(t)>=0&&o(e,n+1,r)}),n.res},i.touch=function(t){return t=r(t),t.text(t.exists()?t.text():""),1},i.setout=function(t){i.outUI=t},i.echo=function(){return $.when.apply($,arguments).then(function(){console.log.apply(console,arguments),i.outUI&&i.outUI.log&&i.outUI.log.apply(i.outUI,arguments)})},i.err=function(t){console.log.apply(console,arguments),t&&t.stack&&console.log(t.stack),i.outUI&&i.outUI.err&&i.outUI.err.apply(i.outUI,arguments)},i.clone=function(){var t=Object.create(this);return t.vars=Object.create(this.vars),t},i.getvar=function(t){return this.vars[t]||process&&process.env[t]},i.get=i.getvar,i.set=function(t,e){return this.vars[t]=e},i.strcat=function(){if(1==arguments.length)return arguments[0];for(var t="",e=0;e<arguments.length;e++)t+=arguments[e];return t},i.exists=function(t){return t=this.resolve(t),t.exists()},i.dl=function(t){return t=this.resolve(t||"."),t.download()},i.zip=function(){var e=this,r=Array.prototype.slice.call(arguments).map(function(t){return"string"==typeof t?e.resolve(t):t});return t.zip.zip.apply(t.zip,r)},i.unzip=function(){var e=this,r=Array.prototype.slice.call(arguments).map(function(t){return"string"==typeof t?e.resolve(t):t});return t.zip.unzip.apply(t.zip,r)},i.prompt=function(){},i.ASYNC={r:"SH_ASYNC"},i.help=function(){for(var t in i){var e=i[t];"function"==typeof e&&i.echo(t+(e.description?" - "+e.description:""))}},window.sh||(window.sh=i),"object"==typeof process?(sh.devtool=function(){require("nw.gui").Window.get().showDevTools()},sh.cd(process.cwd().replace(/\\/g,"/"))):sh.cd("/"),i}),requireSimulator.setName("Log"),define(["FS","WebSite","Shell"],function(t,e,r){function n(t,e){return t="00000000000000"+t,t.substring(t.length-e)}function i(t){return t.replace(/\n/g,"\n|")}var o={},s=e.logdir?t.resolve("${logdir}"):null,a=s&&s.exists();if(o.todayDir=function(){var t=new Date,e=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();return s.rel(e+"/").rel(r+"/").rel(n+"/")},o.curFile=function(){var t=new Date,e=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();return o.todayDir().rel(e+"-"+r+"-"+n+".log")},o.curProject=function(){var t=new Date,e=t.getHours(),r=t.getMinutes(),i=t.getSeconds();return o.todayDir().rel("Project/").rel(n(e,2)+"_"+n(r,2)+"_"+n(i,2)+"/")},o.dumpProject=function(t){if(a){var e=o.curProject();r.cp(t,e),o.append("Dumped project to "+e.path())}},!e.logging&&!e.isNW){var u=t.get("/var/log/");u.exists()&&u.fs.storage===localStorage&&u.removeWithoutTrash({r:!0})}return o.append=function(t){if(a){var e=o.curFile(),r=e.exists()?e.text():"";e.text(r+t+"\n")}},o.d=function(t,e){o.append(new Date+": ["+t+"]"+i(e))},o.e=function(t,e){o.append(new Date+": ERROR["+t+"]"+i(e))},o}),requireSimulator.setName("exceptionCatcher"),define([],function(){var t={};return t.f=function(e){if("function"==typeof e){if(e.isTrcf)return e;var r=function(){if(!t.handleException||t.enter)return e.apply(this,arguments);try{return t.enter=!0,e.apply(this,arguments)}catch(r){t.handleException(r)}finally{t.enter=!1}};return r.isTrcf=!0,r}if("object"==typeof e){for(var n in e)e[n]=t.f(e[n]);return e}},t}),requireSimulator.setName("UI"),define(["Util","exceptionCatcher"],function(t,e){var r={},n=e.f;return r=function(){function e(){f.forEach(function(t){t()}),setTimeout(n(e),50)}function i(t){return t instanceof Array?o(t):"string"==typeof t?a(t):t}function o(t){var e=t[0],r=1,n=$("<"+e+">");for("object"!=typeof t[r]||t[r]instanceof Array||t[r]instanceof $||(s(n,t[r],e),r++);r<t.length;)n.append(i(t[r])),r++;return n}function s(e,i){function o(t,r){if(r)if("enterkey"==t)e.on("keypress",n(function(t){13==t.which&&r.apply(e,arguments)}));else if("realtimechange"==t){var o,s=!0;f.push(function(){var t;t="checkbox"==i.type?!!e.prop("checked"):e.val(),(s||o!=t)&&(r.apply(e,[t,o]),o=t),s=!1})}else e.on(t,n(r))}i.$var&&(l[i.$var]=e),i.$edit&&("string"==typeof i.$edit&&(i.$edit={name:i.$edit,type:r.types.String}),i.on||(i.on={}),i.on.realtimechange=n(function(t){h.writeToModel(i.$edit,t,e)}),l[i.$edit.name]||(l[i.$edit.name]=e),h.push({jq:e,params:i}));for(var s in i)if("on"==s)for(var a in i.on)o(a,i.on[a]);else"css"==s&&null!=i[s]?e.css(i[s]):t.startsWith(s,"$")||null==i[s]||e.attr(s,i[s])}function a(t){return $(document.createTextNode(t))}for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var f=[],l={},h=[],d=i(u);return d.$edits=h,d.$vars=l,h.load=function(t){h.model=t,h.forEach(function(t){h.writeToJq(t.params.$edit,t.jq)}),h.validator.on.validate.call(h.validator,h.model)},h.writeToJq=function(t,e){var r=h.model;if(r){for(var n=t.name,i=n.split("."),o=0;o<i.length;o++)r=r[i[o]];r=t.type.toVal(r),"checkbox"==e.attr("type")?e.prop("checked",!!r):e.val(r)}},h.validator={errors:{},show:function(){if(l.validationMessage){l.validationMessage.empty();for(var t in this.errors)l.validationMessage.append(r("div",this.errors[t].mesg))}if(l.OKButton){var e=!0;for(var t in this.errors)e=!1;l.OKButton.attr("disabled",!e)}},on:{validate:function(){}},addError:function(t,e,r){this.errors[t]={mesg:e,jq:r},this.show()},removeError:function(t){delete this.errors[t],this.show()},allOK:function(){for(var t in this.errors)delete this.errors[t];this.show()},isValid:function(){var t=!0;for(var e in this.errors)t=!1;return t}},h.writeToModel=function(t,e,r){var n=h.model;if(n){var i=t.name;try{e=t.type.fromVal(e)}catch(o){return void h.validator.addError(i,o,r)}h.validator.removeError(i);for(var s=i.split("."),a=0;a<s.length;a++)a==s.length-1?h.on.writeToModel(i,e)||(n[s[a]]=e):n=n[s[a]];h.validator.on.validate.call(h.validator,h.model)}},h.on={},h.on.writeToModel=function(){},f.length>0&&setTimeout(n(e),50),d},r.types={String:{toVal:function(t){return t},fromVal:function(t){return t}},Number:{toVal:function(t){return t+""},fromVal:function(t){return parseFloat(t)}}},r}),requireSimulator.setName("Wiki"),define(["HttpHelper","Arrow","Util","WebSite","Log","UI","FS"],function(t,e,r,n,i,o,s){return Wiki=function(r,a,u){function c(t){function e(t){t.stopPropagation(),t.preventDefault()}function r(t){if(u.editMode){var e=t.originalEvent,r=e.dataTransfer.files[0];if(!r.type.match(/image\/(png|gif|jpg)/)[1])return t.stopPropagation(),t.preventDefault(),!1;var n=new FileReader;return n.onload=function(){var t=n.result;a.text(t),i.empty().append(o("img",{src:t}))},n.readAsDataURL(r),t.stopPropagation(),t.preventDefault(),!1}}var i,a;if(l.builtinImages[t])return $("<div>").append($("<img>").attr("src",n.top+"/doc/images/"+t));i=o("div",{style:"margin:10px; padding:10px; border:solid black 1px;",on:{dragover:e,dragenter:e,drop:r}},"(png/gif/jpg)");var c=s.get(n.tonyuHome);return a=c.rel("doc/images/").rel(t),a.exists()&&i.empty().append(o("img",{src:a.text()})),i}function f(t,e,r){function n(){for(var s=[];;){var a=t.indexOf(e,o),u=t.indexOf(r,o);if(u>=0&&(0>a||a>u)){s.push(t.substring(o,u)),o=u;break}if(0>a){s.push(t.substring(o)),o=t.length;break}s.push(t.substring(o,a)),o=a+e.length;var c=n();c.hasBrace=!0,o<t.length&&(o+=r.length),s.push(c)}return i(s),s}function i(t){return t.split=function(t,e){if(1==e)return this;var r=[],n=i([]);return this.forEach(function(o){if("string"==typeof o){var s=o.indexOf(t);if(r.length>=e&&(s=-1),s>=0){if(s>0){var a=o.substring(0,s);n.push(a)}if(s+=t.length,r.push(1!=n.length?n:n[0]),n=i([]),s<o.length){var a=o.substring(s);n.push(a)}}else n.push(o)}else n.push(o)}),r.push(1!=n.length?n:n[0]),r},t.text=function(t){var n=this.hasBrace&&t?e:"";return this.forEach(function(t){n+="string"==typeof t?t:t.text(!0)}),n+=this.hasBrace&&t?r:""},t.toString=function(){return this.text(!0)},t}var o=0;return n(0)}var l={},h={figures:"",plists:""},d="line_marker_",p={},m=[],g=".txt";if(u||(u={}),a&&!a.isDir())throw a+": not a dir";var v,y;l.on=p,l.cd=function(t){v=t,y=v.rel("toc.json")},a&&l.cd(a),l.encodeURL=function(t){return encodeURI(t).replace(/%/g,"")},l.parse=function(r,i,o){function s(t){m[t]={};var e=1,r=function(r,n){var i=m[t][r];return i||(i={refs:[]},m[t][r]=i),n&&(i.no=e++,i.name=h[t]+i.no,i.refs.forEach(function(t){t.text(i.name)})),i};return r}function a(t){function e(t){for(null==t&&(t=0);m.ul>t;)m.ul--,g.exit()}g.lineNo=m.lineNo;var r=0;if(t.match(/^-+/)&&(r=RegExp.lastMatch.length),r>m.ul)for(;r>m.ul;)m.ul++,g.enter("<ul>");else e(r);if(t=t.substring(r),r>0&&g.enter("<li>"),t.match(/^\*+/)){var n=RegExp.rightContext,i="h"+RegExp.lastMatch.length;g.enter("<"+i+">"),p(n),g.exit()}else if(t.match(/^$/))e(),g.p($("<p>"));else if(t.match(/^<<toc(.*)/))m.toc=[m.name],m.blocks.push({name:"toc",exit:function(){y&&!y.isReadOnly()&&y.obj(m.toc),m.toc=null}});else if(t.match(/^<<code(.*)/)){var o=RegExp.$1;if(o=o.replace(/^ */,""),o.length>0){var s,a,u=o.split(/ /,2);if(2==u.length){a=u[0],s=u[1];var c=b(s,!0);g.p($("<div>").addClass("plist").text(c.name+" "+a))}else g.p($("<div>").addClass("plist").text(u))}g.enter("<pre>"),m.blocks.push({name:"code",exit:function(){g.exit()}})}else if(t.match(/^>>/)){var f=m.blocks.pop();f&&f.exit&&f.exit(m)}else if(t.match(/^@@@@(.*)/)){if(m.pclose)g.exit();else{if(RegExp.$1.length>0){var c=b(RegExp.$1,!0);g.p($("<div>").addClass("plist").text(c.name))}g.enter("<pre>")}m.pclose=!m.pclose}else p(t),g.p("\n");r>0&&g.exit(),m.lineNo++}function p(t){function r(t){var r,i=t.text();if(i.match(/^@blink ([^>]+)>([^\s]+)/)){caption=RegExp.$1;var s=RegExp.$2;r=$("<span>").addClass("clickable").text(caption).hover(function(){var t;parent&&parent.Arrow&&(t=parent.Arrow),e&&(t=e),t&&t.show(s)})}else if(i.match(/^@plistref (.*)/)){var a=RegExp.$1,f=b(a);r=$("<strong>").text(f.name),f.refs.push(r)}else if(i.match(/^@editadd/))g.p($("<img>").attr("src",n.top+"/images/editAdd.png"));else if(i.match(/^@figref (.*)/)){var f=v(RegExp.$1);r=$("<strong>").text(f.name),f.refs.push(r)}else if(i.match(/^@cfrag (.*)/)){var d=RegExp.$1;r=$("<code>"),g.enter(r),p(d),g.exit()}else if(i.match(/^@arg (.*)/)){var y=RegExp.$1;r=$("<i>"),g.enter(r),p(y),g.exit()}else{var _=t.split(">",2);if(2==_.length?(i=_[1]+"",caption=_[0]):caption=i,m.toc&&m.toc.push(i),i.match(/\.(png|jpg|gif)$/)&&!i.match(/^http/)){var f=v(i,!0);r=$("<div>").addClass("figure").append(c(i)),g.enter(r),g.enter($("<div>")),g.p(h.figures+f.no+"."),p(caption),g.exit(),g.exit()}else if(i.match(/^https?:\/\//))r=$("<a>").attr({href:i,target:"ext"}).text(caption);else{var w=l.resolveFile(i);if(w.exists()||!w.isReadOnly()&&u.editMode){if(u.useAnchor){var x=w.relPath(o.up()).replace(/\.txt$/,".html");x=l.encodeURL(x),r=$("<a>").attr({href:x}).text(caption)}else r=$("<span>").addClass("clickable").text(caption).click(function(){l.show(w)});w.exists()||r.addClass("notexist")}else r=$("<span>").text(caption)}}g.p(r)}var i="string"==typeof t?f(t,m.beginMark,m.endMark):t;i.forEach(function(t){"string"==typeof t?g.p(t):r(t)})}var m={},g=t({lineMark:d});m.out=g,m.name=i,m.lines=r.split(/\r?\n/),m.lineNo=0,m.ul=0,m.beginMark="[[",m.endMark="]]",m.blocks=[];var v=s("figures"),b=s("plists"),_=[];y&&y.exists()&&(_=y.obj());var w=_.indexOf(i);if(w>=0){var x="",S=_[w-1];S&&(x+="[[>"+S+"]]");var k=_[w+1];k&&(x+=" - [[>"+k+"]]");var E=_[0];0!=w&&(x+=" - [[>"+E+"]]"),m.lines.unshift(x),m.lines.push(x)}return m.lines.forEach(a),g.buf},l.resolveFile=function(t){var e;return e=t.isDir?t:v&&"/"!=t.substring(0,1)?v.rel(t+g):s.get(t)},l.show=function(t){var e=l.resolveFile(t);u.editMode||i.d("wiki","show "+e),l.cd(e.up());var n=e.truncExt(g);if(!e.exists()&&!e.isReadOnly()&&u.editMode){var o=m[m.length-1];e.text(o?"[["+o.truncExt(g)+"]]\n":"")}if(e.exists()){var s=l.parse(e.text(),n,e);r.empty(),r.scrollTop(0),r.append(s),r.append($("<div>").css({height:"100px"}).text("")),p.show&&p.show.apply(l,[e,n]),m.push(e)}else alert(t+" ")},l.back=function(){var t=m.pop();t&&show(t)};var b;return l.highlightLine=function(t){var e=$("#"+d+"-"+t);if(0!=e.length){b&&b.removeClass("wiki-cur-line"),b=e.next(),b.addClass("wiki-cur-line");var n=e.position().top,i=r;0>n&&i.scrollTop(i.scrollTop()+(n-10)/2);var o=i.height()-100;n>o&&i.scrollTop(i.scrollTop()+(n-o+10)/2)}},l.builtinImages={"50_100.png":1,"50_160.png":1,"50_300.png":1,"apple1apple2.png":1,"coords.png":1,"copy60_100.png":1,"firstRunRes.png":1,"firstVarRes.png":1,"itadaki.png":1,"noWaitCat.png":1,"runtimeError.png":1,"sample.png":1,"sayonara.png":1,"syntaxError.png":1},l}}),requireSimulator.setName("Shell2"),define(["Shell","UI","FS","Util"],function(t,e,r,n){var i={};i.show=function(t){var e=i.embed(t);e.dialog({width:600,height:500})},i.embed=function(){i.d||(i.d=e("div",{title:"Shell"},["div",{$var:"inner"},"Type 'help' to show commands.",["br"]]),i.inner=i.d.$vars.inner,t.prompt());var r=i.d;return r},t.cls=function(){i.d.$vars.inner.empty()},t.prompt=function(){function r(t){return 9==t.which?(t.stopPropagation(),t.preventDefault(),s(),!1):void(13==t.which&&(f.empty(),o(u.val())))}function o(){var r=u.val().replace(/^ */,"").replace(/ *$/,"");if(0!=r.length){var n=r.split(/ +/),i=n.shift(),o=t[i];if("function"!=typeof o)return c.append(i+": command not found.");try{var s=[],a=null;n.forEach(function(t){var e=/^-([A-Za-z_0-9]+)(=(.*))?/.exec(t);e?(a||(a={}),a[e[1]]=null!=e[3]?e[3]:1):(a&&s.push(a),a=null,s.push(t))}),a&&s.push(a);var f=o.apply(t,s);if(f===t.ASYNC)return;if("object"==typeof f)if(f instanceof Array){var l=e("table"),h=null,d=0;f.forEach(function(t){h||(h=e("tr").appendTo(l)),h.append(e("td",t)),d++,d%3==0&&(h=null)}),l.appendTo(c)}else c.append(JSON.stringify(f));else c.append(f);t.prompt()}catch(p){t.err(p),t.prompt()}}}function s(){var e=u.val(),r=e.split(" "),i=r.pop(),o=[];if(0==r.length)for(var s in t)"function"==typeof t[s]&&n.startsWith(s,i)&&o.push(s);else{var a=t.resolve(i,!1);if(!a)return;var c=a.isDir()?a:a.up();c.each(function(t){n.startsWith(t.path(),a.path())&&o.push(t.name())})}if(1==o.length){var l=i.split("/");l.pop(),l.push(o[0]),r.push(l.join("/")),u.val(r.join(" ")),f.empty()}else f.text(o.join(", "))}var a=e("div",["input",{$var:"cmd",size:40,on:{keydown:r}}],["pre",{$var:"out","class":"shell out"},["div",{$var:"cand","class":"shell cand"}]]),u=a.$vars.cmd,c=a.$vars.out,f=a.$vars.cand;return t.setout({log:function(){return $.when.apply($,arguments).then(function(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);c.append(t[0]instanceof $?t[0]:e("span",t.join(" ")+"\n"))})},err:function(t){c.append(e("div",{"class":"shell error"},t,["br"],["pre",t.stack]))}}),a.appendTo(i.inner),u.focus(),i.inner.closest(".ui-dialog-content").scrollTop(i.inner.height()),t.ASYNC},t.window=function(){i.show(t.cwd)},t.atest=function(t,e,r){console.log(t,e,r)};var o=t.cat;return t.cat=function(r){return r=t.resolve(r,!0),r.contentType().match(/^image\//)?r.getContent(function(r){t.echo(e("img",{src:r.toURL()}))}):o.apply(t,arguments)},i}),requireSimulator.setName("NewProjectDialog"),define(["UI"],function(t){var e={};return e.show=function(t,r,n){var i=e.embed(t,r,n);i.dialog({width:600})},e.embed=function(r,n,i){if(i||(i={}),!e.d){var o={fromVal:function(t){return""==t?null:FS.get(t)},toVal:function(t){return t?t.path():""}};e.d=t("div",{title:i.ren?"":""},["div",["span",""],["input",{$edit:"name",value:i.defName||"",on:{enterkey:function(){e.d.done()}}}]],["div",["span",""],["input",{$edit:{name:"parentDir",type:o}}]],["div",["span",""],["span",{$var:"dstDir"}]],["div",{$var:"validationMessage",css:{color:"red"}}],["button",{$var:"OKButton",on:{click:function(){e.d.done()}}},"OK"])}var s=e.d,a={name:i.defName||"",parentDir:r};return s.$edits.load(a),s.$edits.validator.on.validate=function(t){return""==t.name?void this.addError("name",""):(t.dstDir=t.parentDir.rel(t.name+"/"),t.dstDir.exists()?void this.addError("name",""):(this.allOK(),void s.$vars.dstDir.text(t.dstDir+"")))},s.done=function(){s.$edits.validator.isValid()&&(n(a.dstDir),s.dialog&&s.dialog("close"))},s},e}),requireSimulator.setName("requestFragment"),define(["WebSite"],function(t){var e={};return e.ajax=function(e){function r(t){return e.redirectTo&&(t.redirectTo=e.redirectTo),t}function n(){$.ajax({type:"post",url:t.serverTop+"/runFragments",data:r({id:a}),success:function(t){return"string"==typeof t&&t.match(/^notCompleted:([\-\d]+)\/([\-\d]+)$/)?(console.log("notcomp",t),f*=2,void setTimeout(n,f)):void e.success(t)},error:e.error,complete:e.complete})}var i=e.THRESH||8e5,o=e.data;if("object"!=typeof o)throw"Data should be object: "+o;if(o=JSON.stringify(o),!e.redirectTo&&("GAE"!=t.serverType||o.length<i))return $.ajax(e);for(var s=[],a=Math.random();o.length>0;)s.push(o.substring(0,i)),o=o.substring(i);var u=s.length,c=0,f=1e3;s.forEach(function(i,o){$.ajax({type:"post",url:t.serverTop+"/sendFragment",data:r({id:a,seq:o,len:u,content:i}),success:function(t){console.log("sendFrag",t,o),c++,c>=u&&setTimeout(n,f)},error:e.error})})},e}),requireSimulator.setName("Sync"),define(["FS","Shell","requestFragment","WebSite"],function(t,e,r,n){function i(t){return t&&t.isDir}var o={};return e.sync=function(){function t(t){return function(){t&&t.apply({},arguments),e.prompt()}}var r,n,s,a=function(){},u=0;return("string"==typeof arguments[u]||i(arguments[u]))&&(r=e.resolve(arguments[u],!0),u++,("string"==typeof arguments[u]||i(arguments[u]))&&(n=e.resolve(arguments[u],!1),u++)),"object"==typeof arguments[u]&&(s=arguments[u],u++),"function"==typeof arguments[u]&&(a=arguments[u],u++),r||(n=r=e.cwd),s&&s.onend&&(s.onend=t(s.onend)),n||(n=r),e.echo("sync args=",r,n,s,a),o.sync(r,n,s,t(a)),e.ASYNC},o.sync=function(){function t(t,r){e.echo("Status: "+t+" param:",r),d.onstatus&&d.onstatus(t,r)}function o(){d.onerror&&d.onerror.apply(this,arguments)}function s(){var e={base:h.path(),excludes:JSON.stringify(d.excludes)};t("getDirInfo",e),$.ajax({type:"get",url:n.serverTop+"/getDirInfo",data:e,success:a,error:o})}function a(r){d.v&&e.echo("getDirInfo",r);var i=l,s=r.data;for(var a in s){var c=i.rel(a),p=c.exists({includeTrashed:!0})&&c.metaInfo(),m=s[a];f(c,a,p,m)}l.recursive(function(t){var e=t.exists({includeTrashed:!0})&&t.metaInfo(),r=t.relPath(l),n=s[r];f(t,r,e,n)},{includeTrashed:!0,excludes:d.excludes}),d.v&&(e.echo("uploads:",g),e.echo("downloads:",v));var y={base:h.path(),paths:JSON.stringify(v)};t("File2LSSync",y),$.ajax({type:"post",url:n.serverTop+"/File2LSSync",data:y,success:u,error:o})}function u(i){e.echo("dlData=",i),d.v&&e.echo("dlData:",i);var s=l;if(!d.test){for(var a in i.data){var u=s.rel(a),f=i.data[a];f.trashed?u.exists()&&u.rm():u.text(f.text),delete f.text,u.metaInfo(f)}var p={base:h.path(),data:JSON.stringify(g)};p.pathInfo="/LS2FileSync",t("LS2FileSync",p),r.ajax({type:"post",url:n.serverTop+"/LS2FileSync",data:p,success:c,error:o})}}function c(t){d.v&&e.echo("LS2FileSync res=",t);var r=[];for(var n in g)r.push(n);t={msg:t,uploads:r,downloads:v},"function"==typeof p&&p(t)}function f(t,r,n,i){if(!y[r])if(y[r]=1,i&&(!n||n.lastUpdate<i.lastUpdate))v.push(r),d.v&&e.echo((n?"":"New")+"Download "+t+" trash="+!!i.trashed);else if(n&&(!i||n.lastUpdate>i.lastUpdate)){var o=n.trashed?{}:{text:t.text()},s=t.metaInfo();for(var a in s)o[a]=s[a];g[r]=o,d.v&&e.echo((i?"":"New")+"Upload "+t+" trash="+!!n.trashed)}}var l,h,d,p,m=0;if(i(arguments[m])&&(l=arguments[m],m++,i(arguments[m])&&(h=arguments[m],m++)),"object"==typeof arguments[m]&&(d=arguments[m],m++),"function"==typeof arguments[m]&&(p=arguments[m],m++),!l)throw"Sync.sync: Local dir must be specified as file object";h||(h=l),d||(d={}),!p&&d.onend&&(p=d.onend),d.test&&(d.v=1),s();var g={},v=[],y={}},e.rsh=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return $.ajax({url:n.serverTop+"/rsh",data:{args:JSON.stringify(t)},success:function(t){e.echo(t)},error:function(t,r,n){e.err(n)},complete:function(){e.prompt()}}),e.ASYNC},o}),requireSimulator.setName("Auth"),define(["WebSite"],function(t){var e={};return e.currentUser=function(e){$.ajax({type:"get",url:t.serverTop+"/currentUser",data:{withCsrfToken:!0},success:function(t){console.log("auth.currentUser",t),t=JSON.parse(t);var r=t.user;"null"==r&&(r=null),console.log("user",r,"csrfToken",t.csrfToken),e(r,t.csrfToken)}})},e.assertLogin=function(r){e.currentUser(function(e,n){return e?r.success(e,n):(window.onLoggedIn=r.success,void r.showLoginLink(t.serverTop+"/login"))})},window.Auth=e,e}),requireSimulator.setName("zip"),define(["FS"],function(t){return t.zip}),requireSimulator.setName("PathUtil"),define(["FS"],function(t){return t.PathUtil}),requireSimulator.setName("extLink"),define(["WebSite","UI","PathUtil","Util","assert"],function(t,e,r,n,i){function o(t,r,n){var i=s(t);if(n)for(var o in n)i[o]=n[o];return e("a",i,r)}function s(e){var r,n=t.platform;return r="win32"==n?{href:"javascript:;",on:{click:a("start",e)}}:"darwin"==n?{href:"javascript:;",on:{click:a("open",e)}}:{href:e,target:"_new"}}function a(t,e){return function(){u(t+" "+e)}}var u=t.isNW?require("child_process").exec:function(){};return o.all=function(){t.isNW&&$("a").each(function(){var t=(location.protocol+"//"+location.host+"/",$(this)),e=t.attr("href");if(e.match(/^http/)){var r=i.is(s(e),{href:String,on:{click:Function}});t.attr("href",r.href),t.click(r.on.click)}})},o}),requireSimulator.setName("DeferredUtil"),define(["FS"],function(t){return t.DeferredUtil}),requireSimulator.setName("Klass"),define(["assert"],function(t){function e(t){var e=/function[^\(]+\(([^\)]*)\)/,r=e.exec(t+"");return r?r[1].replace(/\s/g,"").split(","):[]}function r(t){if("object"!=typeof t)return!1;if(!t)return!1;var e={configurable:1,enumerable:1,value:1,writable:1,get:1,set:1},r=0;for(var n in t){if(!e[n])return!1;r+=e[n]}return r}var n={};return n.define=function(i){function o(e){i.$fields&&t.is(e,i.$fields)}function s(t){if(!l)return t;var r=e(t);return r[0]!==l?t:function(){var e=Array.prototype.slice.call(arguments);return e.unshift(p),t.apply(p,e)}}function a(t){if(!f)return t;if(r(t)){for(var n in t)t[n]=a(t[n]);return t}if("function"!=typeof t)return t;var i=e(t);return i[0]!==f?t:function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),t.apply(this,e)}}var u,c;i.$parent?(c=i.$parent,u=Object.create(c.prototype),u.super=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return c.prototype[e].apply(this,t)}):u={};var f,l;i.$this&&(f=i.$this),i.$singleton&&(l=i.$singleton);var h,d=a(i.$)||function(t){if(t&&"object"==typeof t)for(var e in t)this[e]=t[e]};d instanceof Array&&(h=d,d=function(){for(var t=Array.prototype.slice.call(arguments),e=0;e<h.length;e++)t.length>0&&(this[h[e]]=t.shift())});var p;p=function(){if(!(this instanceof p)){var t=Object.create(u);return d.apply(t,arguments),o(t),t}d.apply(this,arguments),o(this)},c&&(p.super=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),r=t.shift();return c.prototype[r].apply(e,t)}),p.inherit=function(t){return t.$parent=p,n.define(t)},p.prototype=u;for(var m in i)"$"!=m[0]&&("static$"==m.substring(0,7)?p[m.substring(7)]=s(i[m]):r(i[m])?Object.defineProperty(u,m,a(i[m])):u[m]=a(i[m]));return u.$=d,Object.defineProperty(u,"$bind",{get:function(){return this.__bounded||(this.__bounded=new n.Binder(this)),this.__bounded}}),p},n.Function=function(){throw new Exception("Abstract")},n.opt=t.opt,n.Binder=n.define({$this:"t",$:function(t,e){for(var r in e)(function(r){"function"==typeof e[r]&&(t[r]=function(){var t=Array.prototype.slice.call(arguments);return e[r].apply(e,t)})})(r)}}),n}),requireSimulator.setName("DragDrop"),define(["FS"],function(t){var e=t.DeferredUtil,r=t.SFile;return DragDrop={},DragDrop.readFile=function(t){return e.promise(function(e){var r=new FileReader;r.onload=function(){e(r)},r.readAsArrayBuffer(t)})},DragDrop.accept=function(t,n,i){function o(o){var s=n;"function"==typeof s&&(s=s()),t.removeClass(i.draggingClass);var a={},u=o.originalEvent;o.stopPropagation(),o.preventDefault();{var c=Array.prototype.slice.call(u.dataTransfer.files);c.length}return e.each(c,function(t){var n,o=t.name,u=s.rel(o);return e.resolve(i.onCheckFile(u,t)).then(function(e){return e===!1?void(a[u.path()]={file:u,status:"cancelled"}):(n=r.is(e)?e:u,DragDrop.readFile(t).then(function(t){var e=t.result;n.setBytes(e),a[u.path()]={file:u,status:"uploaded"},n.path()!==u.path()&&(a[u.path()].redirectedTo=n)}))})}).then(function(){i.onComplete&&i.onComplete(a)}).fail(function(t){i.onError(t)}),!1}function s(t){t.stopPropagation(),t.preventDefault()}function a(e){e.originalEvent;c++,t.addClass(i.draggingClass)}function u(e){var r=e.originalEvent;console.log("leave",r.target.innerHTML,e),c--,0>=c&&t.removeClass(i.draggingClass)}i=i||{},i.draggingClass=i.draggingClass||"dragging",t.on("dragover",s),t.on("dragenter",a),t.on("dragleave",u),t.on("drop",o),i.onCheckFile||(i.onCheckFile=function(t){return i.overwrite?t:t.exists()?!1:t}),i.onError||(i.onError=function(t){console.error(t)});var c=0},DragDrop}),requireSimulator.setName("ZipImporter"),define(["Klass","FS","Util","DragDrop","DeferredUtil","UI"],function(t,e,r,n,i,o){e.mount("/ram/","ram");var s=(e.zip,e.get("/ram/")),a=t.define({$:function(t,e,r){var i=this;i.elem=e,i.dir=t,i.tmpDir=s.rel(t.name()),r=r||{},i.onComplete=r.onComplete,n.accept(e,i.tmpDir,{onComplete:function(t){i.dialog=o("div",{title:"Zip"},["span",{$var:"mesg"},"ZIP..."]).dialog({modal:!0}),i.mesg=i.dialog.$vars.mesg,i.acceptDrag(t).then(function(){i.dialog.dialog("close"),i.onComplete&&i.onComplete(t)},function(t){i.dialog.dialog("close"),console.error(t)})}})},acceptDrag:function(t){var e=this;return i.each(t,function(t,r){return"uploaded"===r.status&&".zip"===r.file.ext()?e.unzip(r.file):void 0})},unzip:function(t){var r=this;r.mesg.text(t.name()+"...");var n=r.tmpDir.rel(t.truncExt()+"/");return e.zip.unzip(t,n).then(function(){return r.traverse(n)})},traverse:function(t){var e=this;return t.each(function(t){return e.mesg.text(t.name()+"..."),console.log("traverse",t.path()),t.isDir()?e.traverse(t):"options.json"===t.name()?e.importFrom(t.up()):void 0})},importFrom:function(t){var r=this,n=r.dir,i=e.PathUtil.truncSEP(t.name());"src"===i&&(i=e.PathUtil.truncSEP(t.up().name()));var o=i+"/",s=n.rel(o);r.mesg.text(t.name()+""+s.name()+""),console.log("importFrom",t.path(),"to",s.path());for(var a=2;s.exists();)o=i+a+"/",a++,s=n.rel(o);return t.copyTo(s)},checkFromPrjB:function(){var t=this,n=r.getQueryString("fromPrjB");return n?(e.mount("http://www.tonyu.jp/","web"),t.fromPrjB(n)):void 0},fromPrjB:function(){var t=this,r=e.get("http://www.tonyu.jp/project/pages/dl.cgi?userOnly=1&file="+file),n=e.get("/ram/").rel(file);r.copyTo(n).then(function(){return t.unzip(n)})}});return a}),requireSimulator.setName("ProjectItem"),define(["Klass","UI","FS","DeferredUtil","WebSite"],function(t,e,r,n,i){var o,s="javascript:;";return ProjectItem=o=t.define({$this:"t",$:function(t,e,n){var i=e,o=r.PathUtil.truncSEP(i.name());t.prjList=n,t.projectDir=e,t.name=o;var s=t.dom(i);t.u=s,s.appendTo(t.prjList),setTimeout(function(){var t=i.rel("images/").rel("icon_thumbnail.png");t.exists()&&s.$vars.t.attr("src",t.getURL())},10)},hide:function(t){t.u&&t.u.hide()},show:function(t){t.u&&t.u.show()},url:{get:function(t){var e=t.projectDir;return"project.html?dir="+e.path()}},dom:function(t){var r=t.url,n=t.name;return e("div",{"class":"project existentproject"},["a",{href:r,"class":"projectLink"},["img",{$var:"t",src:"../../images/nowprint.png"}]],["div",["a",{href:r,"class":"projectLink projectName"},n],t.submenuExpr()])},submenuExpr:function(t){var e=t.projectDir;return["span",{"class":"dropdown"},["button",{"class":"submenu prjMenuButton",on:{click:t.$bind.openSubmenu},"data-path":e.path()}," "],["span",{"class":"dropdown-content"},["a",{href:s,"class":"submenu",on:{click:t.$bind.rename}},""],["a",{href:s,"class":"submenu",on:{click:t.$bind.download}},"ZIP"],["a",{href:s,"class":"submenu nwmenu",on:{click:t.$bind.openFolder}},""],["a",{href:s,"class":"submenu",on:{click:t.$bind.remove}},""]]]
},download:function(t){return o.closeSubmenu(),r.zip.zip(t.projectDir).catch(n.E)},remove:function(t){function r(){var e=t.rmd.$vars.dl.prop("checked");return(e?t.download():n.resolve()).then(function(){t.projectDir.rm({r:1}),t.u.remove(),t.rmd.dialog("close")}).catch(n.E)}function i(){t.rmd.dialog("close")}o.closeSubmenu(),t.rmd||(t.rmd=e("div",{title:""},["div","",t.name,""],["div",["input",{$var:"dl",type:"checkbox",checked:!0}],["label",{"for":"dl"},"ZIP"]],["div",["button",{on:{click:r}},""],["button",{on:{click:i}},""]])),t.rmd.$vars.dl.prop("checked",!0),t.rmd.dialog()},rename:function(t){o.closeSubmenu();var e=prompt("",t.name);if(e&&""!=e){e=r.PathUtil.truncSEP(e);var i=t.projectDir.sibling(e+"/");return i.exists(function(r){return r?void alert(e+" "):t.projectDir.moveTo(i).then(function(){t.projectDir=i,t.name=i,t.u.find(".projectName").text(e),t.u.find(".projectLink").attr("href",t.url),o.closeSubmenu()}).catch(n.E)})}},openFolder:function(t){{var e=require("nw.gui");process.execPath}e.Shell.showItemInFolder(t.projectDir.path().replace(/\//g,require("path").sep)),o.closeSubmenu()},openSubmenu:function(t){o.addMenuHandler(),o.closeSubmenu(),o.showingSubMenu=t.u.find(".dropdown-content"),o.showingSubMenu.addClass("show"),i.isNW||o.showingSubMenu.find(".nwmenu").hide()},static$closeSubmenu:function(){o.showingSubMenu&&(o.showingSubMenu.removeClass("show"),o.showingSubMenu=null)},static$addMenuHandler:function(){o.menuHandlerAdded||(o.menuHandlerAdded=!0,$("html").click(function(t){$(t.target).hasClass("submenu")||o.closeSubmenu()}))}}),o}),requireSimulator.setName("ide/selProject"),requirejs(["FS","Wiki","Shell","Shell2","NewProjectDialog","UI","Sync","Auth","zip","requestFragment","WebSite","extLink","DeferredUtil","ZipImporter","ProjectItem"],function(t,e,r,n,i,o,s,a,u,c,f,l,h,d,p){$(function(){function e(t,e){function r(){i.show(t,function(t){t.mkdir(),document.location.href="project.html?dir="+t.path()})}if(!t.exists()){if(0!=e)return;t.mkdir()}var s=$("<section>");$("#prjItemList").append(s),s.append(o("h2",{"class":"prjDirHeader"},t.path()));var a=o("div",{"class":"project newprj"},["a",{href:u,on:{click:r}},["img",{$var:"t",src:"../../images/tonew.png"}],["div",""]]);a.appendTo(s);var c;c=o("div",{style:"display: inline-block;"},["button",{"class":"showAll",on:{click:function(){c.remove(),n(t,s)}}},"..."]),s.append(c)}function n(t,e){function r(){e.find(".existentproject").remove(),s(t,e)}return new d(t,e,{onComplete:r}),s(t,e)}function s(t,e){var r=[];return t.each(function(t){if(t.isDir()){var e=t.lastUpdate();r.push([t,e])}}),r=r.sort(function(t,e){return e[1]-t[1]}),h.each(r,function(t){var r=t[0];if(r.isDir()){var n=new p(r,e);return""!=g&&n.name.toLowerCase().indexOf(g)<0&&n.hide(),h.timeout(10)}})}var u="javascript:;";$("#prjItemList").empty();var c,m="",g="";$("#prjItemList").append(c=o("div",["input",{$var:"kw",placeholder:"Search..",value:g}])),setInterval(function(){g=c.$vars.kw.val().toLowerCase(),g!=m&&($(".project").each(function(){var t=$(this),e=t.find(".projectName");""==g||e[0]&&e.text().toLowerCase().indexOf(g)>=0?t.show():t.hide()}),m=g)},1e3);var v=f.projects.map(function(e){return t.get(e)});v.forEach(e),f.isNW&&$("#loginGrp").hide(),a.currentUser(function(t){t?($(".while-logged-out").hide(),$("#login").text(t)):$(".while-logged-in").hide()});var y=$("<iframe>").attr("src",f.top+"/doc/index.html");y.height($(window).height()-$("#navBar").height()),$("#wikiViewArea").append(y),$("#newPrj").click(function(){i.show(t.get(f.projects[0]),function(t){t.mkdir(),document.location.href="project.html?dir="+t.path()})}),SplashScreen.hide(),r.cd(t.get(f.projects[0])),l.all(),r.wikiEditor=function(){document.location.href="wikiEditor.html"},$($("button.showAll").get(0)).click()})}),requireSimulator.setName();