{"version":3,"sources":["runScript_concat.js"],"names":["WORKER_URL","requirejs","require","define","undef","main","req","makeMap","handlers","defined","waiting","config","defining","hasOwn","Object","prototype","hasOwnProperty","aps","slice","jsSuffixRegExp","hasProp","obj","prop","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","i","j","part","baseParts","split","map","starMap","length","nodeIdCompat","test","replace","charAt","concat","splice","join","makeRequire","relName","forceSync","args","arguments","push","apply","makeLoad","depName","value","callDep","Error","splitPrefix","prefix","index","indexOf","substring","makeRelParts","relParts","plugin","parts","relResourceName","f","n","pr","p","exports","e","module","id","uri","makeConfig","deps","callback","cjsModule","ret","usingExports","callbackType","load","undefined","alt","setTimeout","cfg","_defined","amd","jQuery","resMod","R","reqjsSeq","def","reqs","func","m","getModuleInfo","reqsFromFunc","setReqs","doLoad","this","getObjs","loadIfAvailable","forEach","reqm","loaded","revReqs","ms","modules","res","match","console","log","notifyLoaded","dependingMod","loadedModuleName","ary","cur","a","d","s","$a","Assertion","failMesg","flatten","_regedType","registerType","t","MODE_STRICT","MODE_DEFENSIVE","MODE_BOOL","fail","shift","isDefensive","isBool","subAssertion","assert","eq","b","ne","isset","is","type","v","_assert_func","Array","global","na","String","Number","Boolean","RegExp","exec","Function","k","ty","ensureError","action","err","message","setMode","mode","_mode","isStrict","top","stack","bind","opt","and","types","endsWith","str","postfix","PathUtil","driveLetter","url","Path","isPath","Absolute","isAbsolutePath","Relative","Dir","isDir","AbsDir","File","SEP","startsWith","isChildOf","child","parent","path","fixSep","hasDriveLetter","isURL","r","protocol","hostPort","isRelativePath","hasBackslashSep","to","directorify","filify","splitPath","u","pop","ext","truncExt","truncSEP","up","rel","relPath","paths","resPath","base","ps","old","backslashifyAfter","isAbsolute","isRelative","window",".png",".gif",".jpeg",".jpg",".ico",".wav",".mp3",".ogg",".midi",".mid",".mzo",".txt",".html",".htm",".css",".js",".json",".zip",".swf",".pdf",".doc",".xls",".ppt",".docx",".docm",".dotx",".dotm",".xlsx",".xlsm",".xltx",".xltm",".xlsb",".xlam",".pptx",".pptm",".potx",".potm",".ppsx",".ppsm",".ppam",".tonyu",".c",".dtl","DU","root","self","DUBRK","same","isNativePromise","then","promise","catch","isJQPromise","isPromise","all","succ","rest","resolve","useJQ","throwNowIfRejected","state","reject","assertResolved","resolved","ensureDefer","isDeferred","directPromise","timeout","funcPromise","$","Deferred","external","Promise","rej","throwPromise","throwF","each","set","loop","brk","objs","when1","deff1","deff2","r1","dr","r2","tryLoop","tr","tryEach","documentReady","callbackToPromise","NOP","E","errorHandler","error","alert","setE","begin","try","DeferredUtil","extend","P","M","FS","fstypes","stub","addFSType","fsgen","availFSTypes","mesg","fstype","isReadOnly","options","supportsSync","resolveFS","getRootFS","mounted","rootFS","mountPoint","inMyFS","getReturnTypes","getContent","size","ArrayBuffer","toBin","byteLength","getContentAsync","setContent","content","setContentAsync","appendContent","appendContentAsync","getMetaInfo","setMetaInfo","info","mkdir","touch","exists","opendir","opendirAsync","cp","dst","assertExist","srcIsDir","dstfs","dstIsDir","cont","mv","rm","link","getURL","onAddObserver","delegateMethods","methods","fs","assertWriteable","getContentType","toLowerCase","getBlob","c","blobType","Blob","binType","hasPlainText","toPlainText","isText","find","ls","ep","resolveLink","l","isLink","np","opendirEx","dest","getDirTree","style","excludes","meta","relP","getQueryString","key","default_","qs","location","href","decodeURIComponent","privatize","o","__privatized","_global","download","opts","xhr","XMLHttpRequest","open","responseType","onload","saveAs","response","onerror","send","corsEnabled","status","click","node","dispatchEvent","MouseEvent","evt","document","createEvent","initMouseEvent","HTMLAnchorElement","blob","URL","webkitURL","createElement","origin","target","createObjectURL","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","fromCharCode","bom","popup","title","body","innerText","force","isSafari","HTMLElement","safari","isChromeIOS","userAgent","FileReader","reader","onloadend","result","readAsDataURL","Util","Content","plainText","contentType","plain","buffer2ArrayBuffer","isBuffer","Uint8Array","buffer","arrayBuffer2Buffer","Buffer","bin","isNodeBuffer","bufType","nodeBuffer","arrayBuffer","looksLikeDataURL","text","hasNodeBuffer","DataURL","setBuffer","str2utf8bytes","toArrayBuffer","toNodeBuffer","toURL","hasBin","utf8bytes2str","hasURL","hasArrayBuffer","toBlob","Base64_To_ArrayBuffer","base64","A","dic","num","Math","floor","ary_buffer","ary_u8","charCodeAt","Base64_From_ArrayBuffer","data","bytes","toString","encodeURIComponent","parseInt","dataURL2bin","bin2dataURL","head","dataHeader","dataURL","ctype","existsSync","NativeFS","rootPoint","process","cwd","available","Pro","toNativePath","readFileSync","statSync","pa","writeFileSync","appendFileSync","stat","lastUpdate","mtime","getTime","mkdirSync","ts","readdirSync","nosep","isDirectory","rmdirSync","unlinkSync","utimesSync","Date","now","apath","rfs","w","watch","rpath","fpath","eventType","notifyChanged","remove","close","LSFS","storage","useDirCache","dirCache","ramDisk","localStorage","resolveKey","getItem","setItem","removeItem","itemExists","getDirInfo","dinfos","dinfo","JSON","parse","putDirInfo","trashed","stringify","ppath","pdinfo","_touch","removeEntry","removeEntryWithoutTrash","isRAM","getUsage","using","getCapacity","seq","KEY","lim","pow","ru","add","max","readOnly","cs","includeTrashed","pinfo","inf","noTrash","ajaxTransport","originalOptions","jqXHR","FormData","dataType","headers","async","username","password","addEventListener","statusText","getAllResponseHeaders","setRequestHeader","abort","WebFS","get","readAsArrayBuffer","Env","expand","expandPath","FSClass","SFile","_path","isSFile","setPolicy","policy","_clone","getPolicy","_resolve","topdir","topDir","contains","file","bp","pathR","assertDir","sibling","pre","post","equals","act","isTrashed","metaInfo","assertExists","noFollowLink","recursive","removeWithoutTrash","getText","setText","ct","appendText","forceText","getDataURL","setDataURL","setBytes","getBytes","lines","copyFrom","src","copyTo","dstf","progress","echo","getResolvedLinkPath","moveFrom","ex","moveTo","listFilesAsync","eachrev","reverse","fun","dir","convertOptions","_listFiles","ord","order","cvt","di","excludesF","sort","listFiles","nex","getFS","observe","h","addObserver","setBlob","sum","exportAsObject","importFromObject","_1","_2","handler","defineProperty","_act","RootFS","defaultFS","mount","fstab","_fstab","unmount","fact","unshift","_3","observers","remover","observer","ob","fsv","zip","setJSZip","JSZip","dstZip","jszip","folder","generateAsync","compression","unzip","arrayBuf","destDir","onCheckFile","overwrite","loadAsync","files","zipEntry","buf","_buf","redirectedTo","isArray","x","noop","fn","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","newValue","finale","thisArg","_unhandledRejectionFn","len","done","reason","prom","constructor","arr","remaining","val","race","PR","Class","env","setEnvProvider","getEnvProvider","setEnv","getEnv","init","importScripts","postMessage","isFile","code","1","2","3","TonyuThreadF","IT","performance","Tonyu","TT","klass","handleEx","onRuntimeError","addMeta","getMeta","bless","create","removeMeta","classMetas","mm","ensureNamespace","nsp","keys","propReg","params","superclass","includes","fullName","shortName","namespace","methodsF","decls","nso","classes","chkclass","ctx","chkmeta","isShim","extenderFullName","mod","extender","includesRec","extendFrom","initialize","useNew","nonShimParent","prot","props","fbk","methodInfo","fiber","isTonyuObject","getClassInfo","initFullName","isSourceChanged","tonyu","nodeTimestamp","shouldCompile","hasSemanticError","dks","getDependingClasses","globals","getClass","found","ns","nn","nr","lastLoopCheck","resetLoopCheck","disableTime","thread","setGlobal","getGlobal","bindFunc","meth","thiz","not_a_tonyu_object","hasKey","invokeMethod","objName","callFunc","fName","checkNonNull","iterator","run","bootClassName","bootClass","runMode","boot","TPR","currentProject","runningObj","checkLoop","VERSION","ID","random","../lib/assert","../lib/root","./TonyuThread","./tonyuIterator","4","idSeq","TonyuThread","[object Object]","frame","_isDead","cnt","_isWaiting","fSuspended","tryStack","preemptionTime","onEndHandlers","onTerminateHandlers","age","isDead","_threadGroup","objectPoolAge","tGrpObjectPoolAge","isDeadThreadGroup","g","frameFunc","prev","methodName","method","pc","enter","th","termStatus","notifyEnd","retVal","exit","notifyTermination","tst","fb","on","st","exception","kill","lastEx","catchPC","eventSpec","suspend","lastEvent","steps","msg","gotoCatch","stepsLoop","wrapError","re","original","sv","currentThread","preempted","isAlive","5","ArrayValueIterator","ArrayKeyValueIterator","ObjectKeyIterator","elems","ObjectKeyValueIterator","arity","tonyuIterator","TonyuBuilderClient","Worker","WS","SourceFiles","FileMap","BuilderClient","prj","worker","Wrapper","fileMap","getOutputFile","getDir","debugger","srcraw","convert","inited","localPrjDir","ns2depspec","prjDir","remotePrjDir","getNamespace","local","remote","getDependingProjects","dep","compres","sf","convertError","from","changed","convertFromWorkerPath","isTError","fullCompile","nsraw","partialCompile","onCompiled","../lang/SourceFiles","../lib/FileMap","../lib/WorkerServiceB","ProjectFactory","CompiledProject","langMod","StackDecoder","SourceMap","../lang/StackDecoder","../lang/langMod","../lang/source-map","../project/CompiledProject","../project/ProjectFactory","./BuilderClient","vm","SourceFile","sourceMap","outf","mapFile","setAttribute","url2SourceFile","appendChild","tmpdir","uniqFile","F","compileFunction","functions","sourceFile","S","StackTrace","fromError","offline","fileName","line","lineNumber","column","columnNumber","bias","SourceMapConsumer","GREATEST_LOWER_BOUND","pos","originalPositionFor","source","getSourceMapConsumer","sourceMapConsumer","./SourceFiles","./source-map","./stacktrace","getOptions","compiler","myNsp","loadClasses","getEXT","6","factory","installedModules","__webpack_require__","moduleId","SourceMapGenerator","SourceNode","base64VLQ","util","ArraySet","MappingList","aArgs","_file","getArg","_sourceRoot","_skipValidation","_sources","_names","_mappings","_sourcesContents","_version","fromSourceMap","aSourceMapConsumer","sourceRoot","generator","eachMapping","mapping","newMapping","generated","generatedLine","generatedColumn","relative","originalLine","originalColumn","addMapping","sources","sourceContentFor","setSourceContent","_validateMapping","has","aSourceFile","aSourceContent","toSetString","applySourceMap","aSourceMapPath","newSources","newNames","unsortedForEach","aGenerated","aOriginal","aSource","aName","_serializeMappings","next","nameIdx","sourceIdx","previousGeneratedColumn","previousGeneratedLine","previousOriginalColumn","previousOriginalLine","previousName","previousSource","mappings","toArray","compareByGeneratedPositionsInflated","encode","_generateSourcesContent","aSources","aSourceRoot","toJSON","version","names","sourcesContent","aValue","digit","encoded","vlq","toVLQSigned","VLQ_BASE","decode","aStr","aIndex","aOutParam","continuation","shifted","strLen","intToCharMap","number","charCode","aDefaultValue","urlRegexp","dataUrlRegexp","urlParse","aUrl","scheme","auth","host","port","urlGenerate","aParsedUrl","aPath","aRoot","aPathUrl","aRootUrl","joined","level","lastIndexOf","substr","supportsNullProto","identity","isProtoString","strcmp","aStr1","aStr2","fromSetString","compareByOriginalPositions","mappingA","mappingB","onlyCompareOriginal","cmp","compareByGeneratedPositionsDeflated","onlyCompareGenerated","_array","_set","fromArray","aArray","aAllowDuplicates","getOwnPropertyNames","sStr","isDuplicate","idx","at","aIdx","_sorted","_last","aCallback","aThisArg","aMapping","lineA","lineB","columnA","columnB","binarySearch","quickSort","aSourceMap","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","Mapping","lastOffset","_sections","offset","offsetLine","offsetColumn","generatedOffset","consumer","__generatedMappings","_parseMappings","__originalMappings","_charIsMappingSeparator","GENERATED_ORDER","ORIGINAL_ORDER","LEAST_UPPER_BOUND","aContext","aOrder","context","_generatedMappings","_originalMappings","allGeneratedPositionsFor","needle","_findMapping","lastColumn","smc","generatedMappings","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","segment","end","cachedSegments","temp","originalMappings","aNeedle","aMappings","aLineName","aColumnName","aComparator","aBias","search","computeColumnSpans","nextMapping","lastGeneratedColumn","Infinity","hasContentsOfAllSources","some","sc","nullOnMissing","fileUriAbsPath","generatedPositionFor","sectionIndex","section","every","generatedPosition","sectionMappings","adjustedMapping","aHaystack","aCompare","recursiveSearch","aLow","aHigh","mid","swap","y","doQuickSort","comparator","low","high","round","pivot","q","REGEX_NEWLINE","isSourceNode","aLine","aColumn","aChunks","children","sourceContents","fromStringWithSourceMap","aGeneratedCode","aRelativePath","remainingLines","shiftNextLine","lastGeneratedLine","lastMapping","nextLine","addMappingWithCode","aChunk","chunk","prepend","walk","aFn","aSep","newChildren","replaceRight","aPattern","aReplacement","lastChild","walkSourceContents","toStringWithSourceMap","sourceMappingActive","lastOriginalSource","lastOriginalLine","lastOriginalColumn","lastOriginalName","sourceContent","7","ErrorStackParser","StackFrame","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","filter","functionName","parseOpera9","parseOpera11","parseOpera10","stackframe","StackGenerator","backtrace","maxStackSize","callee","$1","caller","isNaN","parseFloat","isFinite","toUpperCase","getArgs","setArgs","getEvalOrigin","evalOrigin","setEvalOrigin","getFunctionName","getFileName","getLineNumber","getColumnNumber","./util","./base64","8","9","_","C","./array-set","./base64-vlq","./binary-search","./quick-sort","10","11","StackTraceGPS","onreadystatechange","readyState","responseText","atob","sourceCache","sourceMapConsumerCache","ajax","_atob","_get","_getSourceMapConsumer","pinpoint","getMappedLocation","findFunctionName","min","source-map/lib/source-map-consumer","12","generateArtificially","getSync","instrument","__stacktraceOriginalFn","deinstrument","report","error-stack-parser","stack-generator","stacktrace-gps","sidesList","sides","fromSide","toSide","idseq","queue","readyQueue","procReverse","ready","sendError","assign","je","isReady","readyPromise","terminate","WorkerService","install","serv","addType","createCore","include","loadDependingClasses","urlBased","createDirBasedCore","outJS","addDependencyResolver","spec","./ProjectFactory","resolvers","fromDependencySpec","fromDir","ProjectCore","dependingProjects","dprj","dirBasedMod","rdir","getOptionsFile","lang","outF","outputFile","nb","PP","img","height","width","newImage","getContext","drawImage","pixels","getImageData","getPixel","cv","imagePixelData","ofs","G","B","setPixel","parse1Pattern","isParseError","image","hex","trans","dx","dy","PatterParseError","sx","sy","newim","nc","newImD","newD","ey","putImageData","yy","xx","boundsInSrc","er","WebSite","tablet","mobile","Platform","loc","devMode","WebSite_runType","urlAliases","builtinAssetNames","images/Ball.png","images/base.png","images/Sample.png","images/inputPad.png","images/neko.png","images/mapchip.png","pluginTop","sampleImg","isNW","__node_webkit","__nwjs","mp4Disabled","tonyuHome","PathSep","noconcat","sep","TONYU_HOME","logdir","TONYU_LOGDIR","wwwDir","platform","ffmpeg","pkgInfo","TONYU_PROJECTS","projects","delimiter","prjDirs","kernelDir","compiledKernel","uploadTmpUrl","newVersionUrl","scriptServer","hoge","BuiltinAssets","removeJSOutput","images/sound.png","images/sound_ogg.png","images/sound_mp3.png","images/sound_mp4.png","images/sound_m4a.png","images/sound_mid.png","images/sound_wav.png","images/ecl.png","serverType","runtime","disableROM","serverTop","blobPath","getFiles","putFiles","Assets","baseDir","mp3Disabled","oggf","asFile","IL","cache","resImgs","onLoad","resa","resImg","excludeEmpty","urlKey","proc","im","attr","pw","ph","pwidth","pheight","rw","rh","parse1","imgDOM","ImageList","currentUser","onend","withCsrfToken","success","user","csrfToken","assertLogin","onLoggedIn","showLoginLink","Auth","BLOB_PATH_EXPR","upload","project","fd","getElementById","append","processData","isBlobURL","uploadToExe","bis","getBlobInfos","bi","draw","canvas","Image","onld","clb","cw","ch","cctx","calcw","calch","clearRect","marginw","marginh","left","IR","TN","NAME","WIDTH","HEIGHT","delay","$Screen","toDataURL","rsrc","getResource","prjdir","imfile","item","imgs","images","setResource","crt","plugins","installed","box2d","detection","symbol","timbre","gif","Mezonet","PicoAudio","jquery_ui","convOpt","detectNeeded","hasInGlobal","loadAll","namea","loadNext","reqj","request","pluginName","thumbnail","rawRun","detectPlugins","fixBootRunClasses","runScriptMode","rawBoot","getResourceFile","resFile","chg","imgSnd","defaultResource","hasSoundResource","sounds","getThumbnail","convertBlobInfos","getName","loadResource","sp","setImageList","hasMZO","hasMIDI","addPlugin","removePlugin","setOptions","requestPlugin","loadPlugins","mc","fixClassName","mainClass","bc","className","showProgress","initCanvas","$mainCanvas","SplashScreen","sysMod","CP","ide","kernel","curDebugger","rp","getIframeProject","onTonyuDebuggerReady","showError","setDebugger","ifrm","querySelector","contentWindow","Project","disconnectDebugger","renameClassName","stop","Shell","mustExist","resolve2","newCommand","cd","pwd","vars","fst","sh","ln","notrash","cat","grep","pattern","lineNo","setout","ui","outUI","when","clone","getvar","strcat","dl","prompt","ASYNC","help","description","devtool","Window","showDevTools","STF","toObj","div","innerHTML","textContent","cols","unwrap","toByteArray","T2MediaLib","_context","picoAudio","soundDataAry","bgmPlayerMax","bgmPlayerAry","masterVolume","seMasterVolume","bgmMasterVolume","playingAudio","audioVolume","audioTempo","audioDataAry","seSources","disabled","AudioContext","webkitAudioContext","T2MediaLib_BGMPlayer","allClearSoundData","dataAry","clearSoundData","allRemoveDecodedSoundData","soundData","isDecodeComplete","isDecoding","removeDecodedData","removeDecodedSoundData","getMasterVolume","setMasterVolume","vol","bgmPlayer","onChangeBGMMasterVolume","createSoundFromArray","array1","array2","T2MediaLib_SoundData","numOfChannels","audioBuffer","createBuffer","sampleRate","buffer1","getChannelData","buffer2","onDecodeComplete","loadSound","callbacks","isLoadAndDecode","that","onLoadComplete","decodeSound","onError","errorID","fileData","isLoadComplete","decodedCallbacksAry","bgmPlayerId","onDecode","smf","parseSMF","Source","retAry","searchOggLoop","tagLoopStart","tagLoopEnd","decodeAudioData","activate","isContextResumed","resume","isActivated","createBufferSource","connect","destination","start","noteOn","getSoundFileData","soundDataObj","getSoundDecodedData","decodedData","getCurrentTime","currentTime","playSE","pan","rate","loopStart","loopEnd","duration","bgm","playback","Start","AudioBuffer","durationStart","createGain","createGainNode","gainNode","panNode","createPanner","playbackRate","panningModel","offset_adj","panAngle","panX","sin","PI","panZ","cos","positionX","positionY","positionZ","setPosition","gain","volumeValue","panValue","playStartTime","playOffset","plusTime","noteOff","onended","event","stopSE","sourceObj","AudioBufferSourceNode","cancelScheduledValues","linearRampToValueAtTime","stopAllSE","getSEMasterVolume","setSEMasterVolume","getSEVolume","setSEVolume","getSERate","setSERate","getSEPan","setSEPan","isSELoop","setSELoop","getSELoopStartTime","setSELoopStartTime","getSELoopEndTime","setSELoopEndTime","playBGM","_getBgmPlayer","stopBGM","pauseBGM","resumeBGM","getBGMMasterVolume","setBGMMasterVolume","getBGMVolume","setBGMVolume","getBGMTempo","setBGMTempo","tempo","getBGMPan","setBGMPan","isBGMLoop","setBGMLoop","getBGMLoopStartTime","setBGMLoopStartTime","getBGMLoopEndTime","setBGMLoopEndTime","getBGMCurrentTime","getBGMLength","getPlayingBGMName","setOnBGMEndListener","listener","getPlayingBGMState","getBGMPicoAudio","isTagLoop","setTagLoop","getBGMPlayerMax","allStopBGM","allResetBGM","loadAudio","audio","Audio","play","createMediaElementSource","playAudio","startTime","pause","volume","stopAudio","pauseAudio","resumeAudio","setAudioVolume","setAudioTempo","setAudioPosition","time","getAudioData","getAudioCurrentTime","getAudioLength","tagSize","startIdx","lengthIdx","loopLength","isPicoAudio","isMezonetPlayback","Playback","t2MediaLib","arg_id","playingBGMState","playingBGMStatePending","playingBGM","playingBGMName","bgmPause","bgmPauseTime","bgmPauseCurrentTime","bgmPauseTempo","bgmPauseLoop","bgmPauseLoopStart","bgmPauseLoopEnd","bgmVolume","bgmTempo","bgmPan","picoAudioSetDataBGMName","PICO_AUDIO_VOLUME_COEF","succFunc","pending","_setPlayingBGMState","_initPicoAudio","setData","initStatus","setLoop","bgmLengthTime","MAX_SAFE_INTEGER","setStartTime","Stop","setVolume","setRate","isLoop","time2","currenTime","minusTime","getTrackTime","states","setOnSongEndListener","isNone","isTrcf","handleException","EC","UI","expr","listeners","$vars","$edits","model","edit","writeToJq","$edit","jq","validator","validate","toVal","errors","show","validationMessage","empty","OKButton","ok","addError","removeError","allOK","isValid","writeToModel","fromVal","li","tag","$var","realtimechange","css","eType","ev","which","first","parseAttr","parseArray","createTextNode","UIDiag","isPrimitive","parseMesg","defTitle","multiLine","confirm","sendF","dialog","_default","getStatus","geom","position","my","of","enterkey","focus","resultValue","doResize","overflow","margin","class","appendTo","resize","Debugger","Events","getHandler","noCatch","setErrorHandler","fire","_Tonyu","$currentProject","$debugger","DebuggerCore","BuilderClient4Sys","IDEProject","ScriptTagFS","rt","com","home","ramHome","hide","locs","prjPath","actualFilesDir","fo","defaultOptions","defaultSuperClass","kernelEditable","debuggerPrj","restart","displayMode","jump","idePrj","animationFrame","requestAnimationFrame","diagnose"],"mappings":"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","sourcesContent":["(function (WORKER_URL) {\n\t\t\t\t/**\r\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\r\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\r\n */\r\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\r\n//be followed.\r\n/*global setTimeout: false */\r\n\r\nvar requirejs, require, define;\r\n(function (undef) {\r\n    var main, req, makeMap, handlers,\r\n        defined = {},\r\n        waiting = {},\r\n        config = {},\r\n        defining = {},\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        aps = [].slice,\r\n        jsSuffixRegExp = /\\.js$/;\r\n\r\n    function hasProp(obj, prop) {\r\n        return hasOwn.call(obj, prop);\r\n    }\r\n\r\n    /**\r\n     * Given a relative module name, like ./something, normalize it to\r\n     * a real name that can be mapped to a path.\r\n     * @param {String} name the relative name\r\n     * @param {String} baseName a real name that the name arg is relative\r\n     * to.\r\n     * @returns {String} normalized name\r\n     */\r\n    function normalize(name, baseName) {\r\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\r\n            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\r\n            baseParts = baseName && baseName.split(\"/\"),\r\n            map = config.map,\r\n            starMap = (map && map['*']) || {};\r\n\r\n        //Adjust any relative paths.\r\n        if (name) {\r\n            name = name.split('/');\r\n            lastIndex = name.length - 1;\r\n\r\n            // If wanting node ID compatibility, strip .js from end\r\n            // of IDs. Have to do this here, and not in nameToUrl\r\n            // because node allows either .js or non .js to map\r\n            // to same file.\r\n            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\r\n                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\r\n            }\r\n\r\n            // Starts with a '.' so need the baseName\r\n            if (name[0].charAt(0) === '.' && baseParts) {\r\n                //Convert baseName to array, and lop off the last part,\r\n                //so that . matches that 'directory' and not name of the baseName's\r\n                //module. For instance, baseName of 'one/two/three', maps to\r\n                //'one/two/three.js', but we want the directory, 'one/two' for\r\n                //this normalization.\r\n                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\r\n                name = normalizedBaseParts.concat(name);\r\n            }\r\n\r\n            //start trimDots\r\n            for (i = 0; i < name.length; i++) {\r\n                part = name[i];\r\n                if (part === '.') {\r\n                    name.splice(i, 1);\r\n                    i -= 1;\r\n                } else if (part === '..') {\r\n                    // If at the start, or previous value is still ..,\r\n                    // keep them so that when converted to a path it may\r\n                    // still work when converted to a path, even though\r\n                    // as an ID it is less than ideal. In larger point\r\n                    // releases, may be better to just kick out an error.\r\n                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\r\n                        continue;\r\n                    } else if (i > 0) {\r\n                        name.splice(i - 1, 2);\r\n                        i -= 2;\r\n                    }\r\n                }\r\n            }\r\n            //end trimDots\r\n\r\n            name = name.join('/');\r\n        }\r\n\r\n        //Apply map config if available.\r\n        if ((baseParts || starMap) && map) {\r\n            nameParts = name.split('/');\r\n\r\n            for (i = nameParts.length; i > 0; i -= 1) {\r\n                nameSegment = nameParts.slice(0, i).join(\"/\");\r\n\r\n                if (baseParts) {\r\n                    //Find the longest baseName segment match in the config.\r\n                    //So, do joins on the biggest to smallest lengths of baseParts.\r\n                    for (j = baseParts.length; j > 0; j -= 1) {\r\n                        mapValue = map[baseParts.slice(0, j).join('/')];\r\n\r\n                        //baseName segment has  config, find if it has one for\r\n                        //this name.\r\n                        if (mapValue) {\r\n                            mapValue = mapValue[nameSegment];\r\n                            if (mapValue) {\r\n                                //Match, update name to the new value.\r\n                                foundMap = mapValue;\r\n                                foundI = i;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (foundMap) {\r\n                    break;\r\n                }\r\n\r\n                //Check for a star map match, but just hold on to it,\r\n                //if there is a shorter segment match later in a matching\r\n                //config, then favor over this star map.\r\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\r\n                    foundStarMap = starMap[nameSegment];\r\n                    starI = i;\r\n                }\r\n            }\r\n\r\n            if (!foundMap && foundStarMap) {\r\n                foundMap = foundStarMap;\r\n                foundI = starI;\r\n            }\r\n\r\n            if (foundMap) {\r\n                nameParts.splice(0, foundI, foundMap);\r\n                name = nameParts.join('/');\r\n            }\r\n        }\r\n\r\n        return name;\r\n    }\r\n\r\n    function makeRequire(relName, forceSync) {\r\n        return function () {\r\n            //A version of a require function that passes a moduleName\r\n            //value for items that may need to\r\n            //look up paths relative to the moduleName\r\n            var args = aps.call(arguments, 0);\r\n\r\n            //If first arg is not require('string'), and there is only\r\n            //one arg, it is the array form without a callback. Insert\r\n            //a null so that the following concat is correct.\r\n            if (typeof args[0] !== 'string' && args.length === 1) {\r\n                args.push(null);\r\n            }\r\n            return req.apply(undef, args.concat([relName, forceSync]));\r\n        };\r\n    }\r\n\r\n    function makeNormalize(relName) {\r\n        return function (name) {\r\n            return normalize(name, relName);\r\n        };\r\n    }\r\n\r\n    function makeLoad(depName) {\r\n        return function (value) {\r\n            defined[depName] = value;\r\n        };\r\n    }\r\n\r\n    function callDep(name) {\r\n        if (hasProp(waiting, name)) {\r\n            var args = waiting[name];\r\n            delete waiting[name];\r\n            defining[name] = true;\r\n            main.apply(undef, args);\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\r\n            throw new Error('No ' + name);\r\n        }\r\n        return defined[name];\r\n    }\r\n\r\n    //Turns a plugin!resource to [plugin, resource]\r\n    //with the plugin being undefined if the name\r\n    //did not have a plugin prefix.\r\n    function splitPrefix(name) {\r\n        var prefix,\r\n            index = name ? name.indexOf('!') : -1;\r\n        if (index > -1) {\r\n            prefix = name.substring(0, index);\r\n            name = name.substring(index + 1, name.length);\r\n        }\r\n        return [prefix, name];\r\n    }\r\n\r\n    //Creates a parts array for a relName where first part is plugin ID,\r\n    //second part is resource ID. Assumes relName has already been normalized.\r\n    function makeRelParts(relName) {\r\n        return relName ? splitPrefix(relName) : [];\r\n    }\r\n\r\n    /**\r\n     * Makes a name map, normalizing the name, and using a plugin\r\n     * for normalization if necessary. Grabs a ref to plugin\r\n     * too, as an optimization.\r\n     */\r\n    makeMap = function (name, relParts) {\r\n        var plugin,\r\n            parts = splitPrefix(name),\r\n            prefix = parts[0],\r\n            relResourceName = relParts[1];\r\n\r\n        name = parts[1];\r\n\r\n        if (prefix) {\r\n            prefix = normalize(prefix, relResourceName);\r\n            plugin = callDep(prefix);\r\n        }\r\n\r\n        //Normalize according\r\n        if (prefix) {\r\n            if (plugin && plugin.normalize) {\r\n                name = plugin.normalize(name, makeNormalize(relResourceName));\r\n            } else {\r\n                name = normalize(name, relResourceName);\r\n            }\r\n        } else {\r\n            name = normalize(name, relResourceName);\r\n            parts = splitPrefix(name);\r\n            prefix = parts[0];\r\n            name = parts[1];\r\n            if (prefix) {\r\n                plugin = callDep(prefix);\r\n            }\r\n        }\r\n\r\n        //Using ridiculous property names for space reasons\r\n        return {\r\n            f: prefix ? prefix + '!' + name : name, //fullName\r\n            n: name,\r\n            pr: prefix,\r\n            p: plugin\r\n        };\r\n    };\r\n\r\n    function makeConfig(name) {\r\n        return function () {\r\n            return (config && config.config && config.config[name]) || {};\r\n        };\r\n    }\r\n\r\n    handlers = {\r\n        require: function (name) {\r\n            return makeRequire(name);\r\n        },\r\n        exports: function (name) {\r\n            var e = defined[name];\r\n            if (typeof e !== 'undefined') {\r\n                return e;\r\n            } else {\r\n                return (defined[name] = {});\r\n            }\r\n        },\r\n        module: function (name) {\r\n            return {\r\n                id: name,\r\n                uri: '',\r\n                exports: defined[name],\r\n                config: makeConfig(name)\r\n            };\r\n        }\r\n    };\r\n\r\n    main = function (name, deps, callback, relName) {\r\n        var cjsModule, depName, ret, map, i, relParts,\r\n            args = [],\r\n            callbackType = typeof callback,\r\n            usingExports;\r\n\r\n        //Use name if no relName\r\n        relName = relName || name;\r\n        relParts = makeRelParts(relName);\r\n\r\n        //Call the callback to define the module, if necessary.\r\n        if (callbackType === 'undefined' || callbackType === 'function') {\r\n            //Pull out the defined dependencies and pass the ordered\r\n            //values to the callback.\r\n            //Default to [require, exports, module] if no deps\r\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\r\n            for (i = 0; i < deps.length; i += 1) {\r\n                map = makeMap(deps[i], relParts);\r\n                depName = map.f;\r\n\r\n                //Fast path CommonJS standard dependencies.\r\n                if (depName === \"require\") {\r\n                    args[i] = handlers.require(name);\r\n                } else if (depName === \"exports\") {\r\n                    //CommonJS module spec 1.1\r\n                    args[i] = handlers.exports(name);\r\n                    usingExports = true;\r\n                } else if (depName === \"module\") {\r\n                    //CommonJS module spec 1.1\r\n                    cjsModule = args[i] = handlers.module(name);\r\n                } else if (hasProp(defined, depName) ||\r\n                           hasProp(waiting, depName) ||\r\n                           hasProp(defining, depName)) {\r\n                    args[i] = callDep(depName);\r\n                } else if (map.p) {\r\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\r\n                    args[i] = defined[depName];\r\n                } else {\r\n                    throw new Error(name + ' missing ' + depName);\r\n                }\r\n            }\r\n\r\n            ret = callback ? callback.apply(defined[name], args) : undefined;\r\n\r\n            if (name) {\r\n                //If setting exports via \"module\" is in play,\r\n                //favor that over return value and exports. After that,\r\n                //favor a non-undefined return value over exports use.\r\n                if (cjsModule && cjsModule.exports !== undef &&\r\n                        cjsModule.exports !== defined[name]) {\r\n                    defined[name] = cjsModule.exports;\r\n                } else if (ret !== undef || !usingExports) {\r\n                    //Use the return value from the function.\r\n                    defined[name] = ret;\r\n                }\r\n            }\r\n        } else if (name) {\r\n            //May just be an object definition for the module. Only\r\n            //worry about defining if have a module name.\r\n            defined[name] = callback;\r\n        }\r\n    };\r\n\r\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\r\n        if (typeof deps === \"string\") {\r\n            if (handlers[deps]) {\r\n                //callback in this case is really relName\r\n                return handlers[deps](callback);\r\n            }\r\n            //Just return the module wanted. In this scenario, the\r\n            //deps arg is the module name, and second arg (if passed)\r\n            //is just the relName.\r\n            //Normalize module name, if it contains . or ..\r\n            return callDep(makeMap(deps, makeRelParts(callback)).f);\r\n        } else if (!deps.splice) {\r\n            //deps is a config object, not an array.\r\n            config = deps;\r\n            if (config.deps) {\r\n                req(config.deps, config.callback);\r\n            }\r\n            if (!callback) {\r\n                return;\r\n            }\r\n\r\n            if (callback.splice) {\r\n                //callback is an array, which means it is a dependency list.\r\n                //Adjust args if there are dependencies\r\n                deps = callback;\r\n                callback = relName;\r\n                relName = null;\r\n            } else {\r\n                deps = undef;\r\n            }\r\n        }\r\n\r\n        //Support require(['a'])\r\n        callback = callback || function () {};\r\n\r\n        //If relName is a function, it is an errback handler,\r\n        //so remove it.\r\n        if (typeof relName === 'function') {\r\n            relName = forceSync;\r\n            forceSync = alt;\r\n        }\r\n\r\n        //Simulate async callback;\r\n        if (forceSync) {\r\n            main(undef, deps, callback, relName);\r\n        } else {\r\n            //Using a non-zero value because of concern for what old browsers\r\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\r\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\r\n            //If want a value immediately, use require('id') instead -- something\r\n            //that works in almond on the global level, but not guaranteed and\r\n            //unlikely to work in other AMD implementations.\r\n            setTimeout(function () {\r\n                main(undef, deps, callback, relName);\r\n            }, 4);\r\n        }\r\n\r\n        return req;\r\n    };\r\n\r\n    /**\r\n     * Just drops the config on the floor, but returns req in case\r\n     * the config return value is used.\r\n     */\r\n    req.config = function (cfg) {\r\n        return req(cfg);\r\n    };\r\n\r\n    /**\r\n     * Expose module registry for debugging and tooling\r\n     */\r\n    requirejs._defined = defined;\r\n\r\n    define = function (name, deps, callback) {\r\n        if (typeof name !== 'string') {\r\n            throw new Error('See almond README: incorrect module build, no module name');\r\n        }\r\n\r\n        //This module may not have dependencies\r\n        if (!deps.splice) {\r\n            //deps is not an array, so probably means\r\n            //an object literal or factory function for\r\n            //the value. Adjust args.\r\n            callback = deps;\r\n            deps = [];\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\r\n            waiting[name] = [name, deps, callback];\r\n        }\r\n    };\r\n\r\n    define.amd = {\r\n        jQuery: true\r\n    };\r\n}());\ndefine(\"js/almond\", function(){});\n\n// This is kowareta! because r.js does not generate module name:\r\n//   define(\"FSLib\",[], function () { ...\r\n//(function (global) {\r\n//var useGlobal=(typeof global.define!=\"function\");\r\n//var define=(useGlobal ? define=function(_,f){f();} : global.define);\r\ndefine('FS',[],function () {\r\n    var define,requirejs;\r\n\tvar R={};\r\n\tvar REQJS=\"REQJS_\";\r\n\tvar reqjsSeq=0;\r\n\tR.def=function (name, reqs,func) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (typeof reqs==\"function\") {\r\n\t\t    func=reqs;\r\n\t\t    reqs=R.reqsFromFunc(func);\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t    var module={exports:{}};\r\n    \t\t\tvar res=func(R.doLoad,module,module.exports);\r\n    \t\t\treturn res || module.exports;\r\n    \t\t};\r\n\t\t} else {\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t\treturn func.apply(this, R.getObjs(reqs));\r\n    \t\t};\r\n\t\t}\r\n\t\tR.loadIfAvailable(m);\r\n\t};\r\n\tdefine=function (name,reqs,func) {\r\n\t\tR.def(name, reqs,func);\r\n\t};\r\n\tdefine.amd={};\r\n\trequirejs=function (reqs,func) {\r\n\t\tR.def(REQJS+(reqjsSeq++),reqs,func);\r\n\t};\r\n\tR.setReqs=function (m, reqs) {\r\n\t\treqs.forEach(function (req) {\r\n\t\t\tvar reqm=R.getModuleInfo(req);\r\n\t\t\tif (!reqm.loaded) {\r\n\t\t\t\tm.reqs[req]=reqm;\r\n\t\t\t\treqm.revReqs[m.name]=m;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tR.getModuleInfo=function (name) {\r\n\t\tvar ms=R.modules;\r\n\t\treturn ms[name]=ms[name]||{name:name,reqs:{},revReqs:{}};\r\n\t};\r\n\tR.doLoad=function (name) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (m.loaded) return m.obj;\r\n\t\tm.loaded=true;\r\n\t\tvar res=m.func();\r\n\t    if ( res==null && !name.match(/^REQJS_/)) console.log(\"Warning: No obj for \"+name);\r\n\t\tm.obj=res;\r\n\t\tfor (var i in m.revReqs) {\r\n\t\t\tR.notifyLoaded(m.revReqs[i], m.name);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tR.notifyLoaded=function (dependingMod, loadedModuleName) {\r\n\t    // depengindMod depends on loadedModule\r\n\t\tdelete dependingMod.reqs[loadedModuleName];\r\n\t\tR.loadIfAvailable(dependingMod);\r\n\t};\r\n\tR.loadIfAvailable=function (m) {\r\n\t\tfor (var i in m.reqs) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tR.doLoad(m.name);\r\n\t};\r\n\tR.getObjs=function (ary) {\r\n\t\tvar res=[];\r\n\t\tary.forEach(function (n) {\r\n\t\t\tvar cur=R.doLoad(n);\r\n\t\t\tres.push(cur);\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\tR.reqsFromFunc=function (f) {\r\n\t    var str=f+\"\";\r\n\t    var res=[];\r\n\t    str.replace(/require\\s*\\(\\s*[\"']([^\"']+)[\"']\\s*\\)/g,function (m,a) {\r\n\t       res.push(a);\r\n\t    });\r\n\t    return res;\r\n\t};\r\n\tR.modules={};\r\n\t//requireSimulator=R;\r\n//----------\r\ndefine('extend',[],function (){\r\n   return function extend(d,s) {\r\n      for (var i in s) {d[i]=s[i];}\r\n      return d;\r\n   };\r\n});\r\n\r\ndefine('assert',[],function () {\r\n    var Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a);//.concat([\"(mode:\",this._mode,\")\"]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    var na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Boolean || t==\"boolean\") {\r\n                this.assert(typeof(v)==\"boolean\",[v,\"should be a boolean\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    var na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.stack);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    };\r\n    return assert;\r\n});\r\n\r\ndefine('PathUtil',[\"assert\"],function (assert) {\r\nfunction endsWith(str,postfix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nvar driveLetter=/^([a-zA-Z]):/;\r\n// hyphen on protocol -> chrome-extension://....\r\nvar url=/^([a-z\\-]+):\\/\\/\\/?([^\\/]+)\\//;\r\nvar PathUtil;\r\nvar Path=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isPath(s) , [s, \" is not a path\"]);\r\n});\r\nvar Absolute=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isAbsolutePath(s) , [s, \" is not a absolute path\"]);\r\n});\r\nvar Relative=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( !PathUtil.isAbsolutePath(s) , [s, \" is not a relative path\"]);\r\n});\r\n\r\nvar Dir=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( PathUtil.isDir(s) , [s, \" is not a directory path\"]);\r\n});\r\nvar AbsDir=assert.and(Dir,Absolute);\r\nvar File=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( !PathUtil.isDir(s) , [s, \" is not a file path\"]);\r\n});\r\n\r\nvar SEP=\"/\";\r\nPathUtil={\r\n    Path: Path,Absolute:Absolute, Relative:Relative, Dir:Dir,File:File,\r\n    AbsDir:AbsDir,\r\n    SEP: SEP,\r\n    endsWith: endsWith, startsWith:startsWith,\r\n    isChildOf: function(child, parent) {\r\n        return this.startsWith( this.normalize(child), this.normalize(parent));\r\n    },\r\n    normalize: function (path) {\r\n        return this.fixSep(path,\"/\").replace(/\\/+$/,\"/\");\r\n    },\r\n    hasDriveLetter: function (path) {\r\n        return driveLetter.exec(path);\r\n    },\r\n    isURL: function (path) {\r\n        var r=url.exec(path);\r\n        if (!r) return;\r\n        return {protocol:r[1], hostPort:r[2], path:SEP+path.substring(r[0].length)  };\r\n    },\r\n    isPath: function (path) {\r\n    \tassert.is(arguments,[String]);\r\n\t\treturn true;//!path.match(/\\/\\//);\r\n    },\r\n    isRelativePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) && !PathUtil.isAbsolutePath(path);\r\n    },\r\n    isAbsolutePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) &&\r\n\t\t(PathUtil.startsWith(path,SEP) || PathUtil.hasDriveLetter(path) ||  PathUtil.isURL(path));\r\n    },\r\n    isDir: function (path) {\r\n        path=PathUtil.fixSep(path);\r\n\t\tassert.is(arguments,[Path]);\r\n        return endsWith(path,SEP);\r\n    },\r\n    hasBackslashSep:function (path) {\r\n        return path.indexOf(\"\\\\\")>=0;\r\n    },\r\n    fixSep: function (path,to) {\r\n        to=to||\"/\";\r\n        assert.is(arguments,[String]);\r\n        return assert.is( path.replace(/[\\\\\\/]/g,to), Path);\r\n    },\r\n    directorify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (PathUtil.isDir(path)) return path;\r\n        return assert.is(path+SEP, Dir);\r\n    },\r\n    filify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (!PathUtil.isDir(path)) return path;\r\n        return assert.is(path.substring(0,path.length-1),File);\r\n    },\r\n\tsplitPath: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tvar u;\r\n\t\tif (u=this.isURL(path)) {\r\n\t\t    var p=this.splitPath(u.path);\r\n\t\t    p[0]=u.protocol+\"://\"+u.hostPort;\r\n\t\t    return p;\r\n\t\t}\r\n\t\tpath=path.replace(/\\/+/g,SEP);\r\n\t    var res=path.split(SEP);\r\n        if (res[res.length-1]==\"\") {\r\n            res[res.length-2]+=SEP;\r\n            res.pop();\r\n        }\r\n        return res;\r\n    },\r\n    name: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.splitPath(path).pop();\r\n    },\r\n    ext: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        var n = PathUtil.name(path);\r\n        var r = (/\\.[a-zA-Z0-9]+$/).exec(n);\r\n        if (r) return r[0];\r\n        return null;\r\n    },\r\n    truncExt: function(path, ext) {\r\n\t\tassert.is(path,String);\r\n        var name = PathUtil.name(path);\r\n        ext=ext || PathUtil.ext(path);\r\n        assert.is(ext,String);\r\n        return name.substring(0, name.length - ext.length);\r\n    },\r\n    truncSEP: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tif (!PathUtil.isDir(path)) return path;\r\n\t\treturn path.substring(0,path.length-1);\r\n    },\r\n    endsWith: function(path, postfix) {\r\n\t\tassert.is(arguments,[String,String]);\r\n        return endsWith(PathUtil.name(path), postfix);\r\n    },\r\n    parent: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.up(path);\r\n    },\r\n    rel: function(path,relPath) {\r\n        if (relPath==\"\") return path;\r\n\t\tassert.is(arguments,[AbsDir, Relative]);\r\n    \tvar paths=PathUtil.splitPath(relPath);\r\n        var resPath=path;\r\n        resPath=resPath.replace(/\\/$/,\"\");\r\n        var t=PathUtil;\r\n        paths.forEach(function (n) {\r\n             if (n==\"..\" || n==\"../\") resPath=t.up(resPath);\r\n             else {\r\n                 resPath=resPath.replace(/\\/$/,\"\");\r\n                 resPath+=SEP+(n==\".\"||n==\"./\" ? \"\": n);\r\n             }\r\n        });\r\n        return resPath;\r\n    },\r\n    relPath: function(path,base) {\r\n\t\tassert.is(arguments,[Absolute,Absolute]);\r\n        if (path.substring(0,base.length)!=base) {\r\n            return \"../\"+PathUtil.relPath(path, this.up(base));\r\n        }\r\n        return path.substring(base.length);\r\n    },\r\n    up: function(path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (path==SEP) return null;\r\n        var ps=PathUtil.splitPath(path);\r\n        ps.pop();\r\n        return ps.join(SEP)+SEP;\r\n    }\r\n};\r\n[\"directorify\", \"filify\", \"splitPath\", \"name\", \"rel\", \"relPath\", \"up\"].forEach(function (k) {\r\n    var old=PathUtil[k];\r\n    PathUtil[k]=function () {\r\n        var backslashifyAfter=false;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (PathUtil.hasBackslashSep(e)) {\r\n                backslashifyAfter=true;\r\n                return PathUtil.fixSep(e);\r\n            } else {\r\n                return e;\r\n            }\r\n        });\r\n        var res=old.apply(PathUtil,a);\r\n        if (backslashifyAfter) {\r\n            return PathUtil.fixSep(res,\"\\\\\");\r\n        } else {\r\n            return res;\r\n        }\r\n    };\r\n});\r\n\r\nPathUtil.isAbsolute=PathUtil.isAbsolutePath;\r\nPathUtil.isRelative=PathUtil.isRelativePath;\r\nif (typeof window==\"object\") window.PathUtil=PathUtil;\r\nreturn PathUtil;\r\n});\r\n\r\ndefine('MIMETypes',[], function () {\r\n   return {\r\n      \".png\":\"image/png\",\r\n      \".gif\":\"image/gif\",\r\n      \".jpeg\":\"image/jpeg\",\r\n      \".jpg\":\"image/jpeg\",\r\n      \".ico\":\"image/icon\",\r\n      \".wav\":\"audio/x-wav\",\r\n      \".mp3\":\"audio/mp3\",\r\n      \".ogg\":\"audio/ogg\",\r\n      \".midi\":\"audio/midi\",\r\n      \".mid\":\"audio/midi\",\r\n      \".mzo\":\"audio/mzo\",\r\n      \".txt\":\"text/plain\",\r\n      \".html\":\"text/html\",\r\n      \".htm\":\"text/html\",\r\n      \".css\":\"text/css\",\r\n      \".js\":\"text/javascript\",\r\n      \".json\":\"text/json\",\r\n      \".zip\":\"application/zip\",\r\n      \".swf\":\"application/x-shockwave-flash\",\r\n      \".pdf\":\"application/pdf\",\r\n      \".doc\":\"application/word\",\r\n      \".xls\":\"application/excel\",\r\n      \".ppt\":\"application/powerpoint\",\r\n      '.docx':'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      '.docm':'application/vnd.ms-word.document.macroEnabled.12',\r\n      '.dotx':'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\r\n      '.dotm':'application/vnd.ms-word.template.macroEnabled.12',\r\n      '.xlsx':'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      '.xlsm':'application/vnd.ms-excel.sheet.macroEnabled.12',\r\n      '.xltx':'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\r\n      '.xltm':'application/vnd.ms-excel.template.macroEnabled.12',\r\n      '.xlsb':'application/vnd.ms-excel.sheet.binary.macroEnabled.12',\r\n      '.xlam':'application/vnd.ms-excel.addin.macroEnabled.12',\r\n      '.pptx':'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n      '.pptm':'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\r\n      '.potx':'application/vnd.openxmlformats-officedocument.presentationml.template',\r\n      '.potm':'application/vnd.ms-powerpoint.template.macroEnabled.12',\r\n      '.ppsx':'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\r\n      '.ppsm':'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',\r\n      '.ppam':'application/vnd.ms-powerpoint.addin.macroEnabled.12',\r\n      \".tonyu\":\"text/tonyu\",\r\n      \".c\":\"text/c\",\r\n      \".dtl\":\"text/dolittle\"\r\n   };\r\n});\r\n\r\ndefine('DeferredUtil',[], function () {\r\n    var root=(\r\n        typeof window!==\"undefined\" ? window :\r\n        typeof self!==\"undefined\" ? self :\r\n        typeof global!==\"undefined\" ? global : null\r\n    );\r\n    //  promise.then(S,F)  and promise.then(S).fail(F) is not same!\r\n    //  ->  when fail on S,  F is executed?\r\n    //   same is promise.then(S).then(same,F)\r\n    var DU;\r\n    var DUBRK=function(r){this.res=r;};\r\n    function same(e){return e;}\r\n    DU={\r\n        isNativePromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise!==\"function\") && (typeof p.catch===\"function\") ;\r\n        },\r\n        isJQPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise===\"function\") &&(typeof p.fail===\"function\") ;\r\n        },\r\n        isPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            ((typeof p.promise===\"function\") || (typeof p.catch===\"function\")) ;\r\n        },\r\n        all: function (a) {\r\n            //var a=Array.prototype.slice.call(arguments);\r\n            return DU.promise(function (succ,fail) {\r\n                var res=[],rest=a.length;\r\n                a.forEach(function (p, i) {\r\n                    DU.resolve(p).then(function (r) {\r\n                        res[i]=r;\r\n                        rest--;\r\n                        if (rest===0) {\r\n                            succ(res);\r\n                        }\r\n                    },fail);\r\n                });\r\n            });\r\n        },\r\n        resolve: function (p) {\r\n            if (DU.config.useJQ && DU.isJQPromise(p)) return p;\r\n            if (!DU.config.useJQ && DU.isNativePromise(p)) return p;\r\n            return DU.promise(function (succ,fail) {\r\n                if (DU.isPromise(p)) {\r\n                    p.then(succ,fail);\r\n                } else {\r\n                    succ(p);\r\n                }\r\n            });\r\n            /*if (DU.isPromise(p)) { // NO! it returns Promise when using JQPromise and vise versa.\r\n                return f;\r\n            }\r\n            if (DU.confing.useJQ) {\r\n                return $.when(p);\r\n            }*/\r\n        },\r\n        throwNowIfRejected: function (p) {\r\n            // If Promise p has already rejected, throws the rejeceted reason immediately.\r\n            var state;\r\n            var err;\r\n            var res=p.then(function (r) {\r\n                if (!state) {\r\n                    state=\"resolved\";\r\n                }\r\n                return r;\r\n            },function (e) {\r\n                if (!state) {\r\n                    state=\"rejected\";\r\n                    err=e;\r\n                } else {\r\n                    return DU.reject(e);\r\n                }\r\n            });\r\n            if (!state) state=\"notyet\";\r\n            if (state===\"rejected\") throw err;\r\n            return res;\r\n        },\r\n        assertResolved: function (p) {\r\n            var res,resolved;\r\n            p.then(function (r) {\r\n                res=r;\r\n                resolved=true;\r\n            });\r\n            if (!resolved) {\r\n                throw new Error(\"Promise not resolved\");\r\n            }\r\n            return res;\r\n        },\r\n        /*toJQPromise: function (p) {// From native Promise\r\n            if (!p) return $.when(p);\r\n            if ($.isFunction(p.promise)) return p;\r\n            if (!$.isFunction(p.then) || !$.isFunction(p.catch)) return $.when(p);\r\n            var d=new $.Deferred();\r\n            p.then(function (r) {\r\n                d.resolve(r);\r\n            }).catch(function (r) {\r\n                d.reject(r);\r\n            });\r\n            return d.promise();\r\n        },*/\r\n        ensureDefer: function (v) {\r\n            return DU.promise(function (resolve,reject) {\r\n                var isDeferred;\r\n                DU.resolve(v).then(function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            resolve(r);\r\n                        },0);\r\n                    } else {\r\n                        resolve(r);\r\n                    }\r\n                }).then(same,function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            reject(r);\r\n                        },0);\r\n                    } else {\r\n                        reject(r);\r\n                    }\r\n                });\r\n                isDeferred=true;\r\n            });\r\n        },\r\n        directPromise:function (v) {\r\n            return DU.timeout(v,0);\r\n        },\r\n        then: function (f) {\r\n            return DU.directPromise().then(f);\r\n        },\r\n        timeout:function (timeout,value) {\r\n            return DU.promise(function (resolve) {\r\n                setTimeout(function () {resolve(value);},timeout||0);\r\n            });\r\n        },\r\n        funcPromise:function (f) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                try {\r\n                    f(function (v) {\r\n                        d.resolve(v);\r\n                    },function (e) {\r\n                        d.reject(e);\r\n                    });\r\n                }catch(e) {\r\n                    d.reject(e);\r\n                }\r\n                return d.promise();\r\n            } else if (DU.external.Promise) {\r\n                return new DU.external.Promise(function (resolve,reject) {\r\n                    try {\r\n                        f(resolve,reject);\r\n                    }catch(e) {\r\n                        reject(e);\r\n                    }\r\n                });\r\n            } else {\r\n                throw new Error(\"promise is not found\");\r\n            }\r\n        },\r\n        reject: function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                d.reject(e);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwPromise:function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                setTimeout(function () {\r\n                    d.reject(e);\r\n                }, 0);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwF: function (f) {\r\n            return function () {\r\n                try {\r\n                    return f.apply(this,arguments);\r\n                } catch(e) {\r\n                    console.log(e,e.stack);\r\n                    return DU.throwPromise(e);\r\n                }\r\n            };\r\n        },\r\n        each: function (set,f) {\r\n            if (set instanceof Array) {\r\n                return DU.loop(function (i) {\r\n                    if (i>=set.length) return DU.brk();\r\n                    return DU.resolve(f(set[i],i)).then(function () {\r\n                        return i+1;\r\n                    });\r\n                },0);\r\n            } else {\r\n                var objs=[];\r\n                for (var i in set) {\r\n                    objs.push({k:i,v:set[i]});\r\n                }\r\n                return DU.each(objs,function (e) {\r\n                    return f(e.k, e.v);\r\n                });\r\n            }\r\n        },\r\n        loop: function (f,r) {\r\n            try {\r\n                var err;\r\n                while(true) {\r\n                    if (r instanceof DUBRK) return DU.when1(r.res);\r\n                    var deff1=true, deff2=false;\r\n                    //  not deffered    deferred\r\n                    var r1=f(r);\r\n                    var dr=DU.resolve(r1).then(function (r2) {\r\n                        r=r2;\r\n                        deff1=false;\r\n                        if (r instanceof DUBRK) return r.res;\r\n                        if (deff2) return DU.loop(f,r); //\r\n                    }).then(same,function (e) {\r\n                        deff1=false;\r\n                        err=e;\r\n                    });\r\n                    if (err) throw err;\r\n                    deff2=true;\r\n                    if (deff1) return dr;//\r\n                    //\r\n                }\r\n            }catch (e) {\r\n                return DU.reject(e);\r\n            }\r\n        },\r\n        brk: function (res) {\r\n            return new DUBRK(res);\r\n        },\r\n        tryLoop: function (f,r) {\r\n            return DU.loop(DU.tr(f),r);\r\n        },\r\n        tryEach: function (s,f) {\r\n            return DU.loop(s,DU.tr(f));\r\n        },\r\n        documentReady:function () {\r\n            return DU.callbackToPromise(function (s) {$(s);});\r\n        },\r\n        requirejs:function (modules) {\r\n            if (!root.requirejs) throw new Error(\"requirejs is not loaded\");\r\n            return DU.callbackToPromise(function (s) {\r\n                root.requirejs(modules,s);\r\n            });\r\n        }\r\n    };\r\n    DU.NOP=function (r) {return r;};\r\n    DU.E=function () {\r\n        console.log(\"DUE\",arguments);\r\n        DU.errorHandler.apply(DU,arguments);\r\n    };\r\n    DU.errorHandler=function (e) {\r\n        console.error.apply(console,arguments);\r\n        alert(e);\r\n    };\r\n    DU.setE=function (f) {\r\n        DU.errorHandler=f;\r\n    };\r\n    DU.begin=DU.try=DU.tr=DU.throwF;\r\n    DU.promise=DU.callbackToPromise=DU.funcPromise;\r\n    DU.when1=DU.resolve;\r\n    DU.config={};\r\n    if (root.$ && root.$.Deferred) {\r\n        DU.config.useJQ=true;\r\n    }\r\n    DU.external={Promise:root.Promise};\r\n    if (!root.DeferredUtil) root.DeferredUtil=DU;\r\n    return DU;\r\n});\r\n\r\ndefine('FSClass',[\"extend\",\"PathUtil\",\"MIMETypes\",\"assert\",\"DeferredUtil\"],\r\nfunction (extend, P, M,assert,DU){\r\n    var FS=function () {\r\n    };\r\n    var fstypes={};\r\n    FS.addFSType=function (name,fsgen) {\r\n        fstypes[name]=fsgen;\r\n    };\r\n    FS.availFSTypes=function () {\r\n        return fstypes;\r\n    };\r\n    function stub(n) {\r\n        throw new Error (n+\" is STUB!\");\r\n    }\r\n    extend(FS.prototype, {\r\n        err: function (path, mesg) {\r\n            throw new Error(path+\": \"+mesg);\r\n        },\r\n        fstype:function () {\r\n            return \"Unknown\";\r\n        },\r\n        isReadOnly: function (path, options) {// mainly for check ENTIRELY read only\r\n            stub(\"isReadOnly\");\r\n        },\r\n        supportsSync: function () {\r\n            return true;\r\n        },\r\n        resolveFS:function (path, options) {\r\n            assert(this.getRootFS()!==this);\r\n            return this.getRootFS().resolveFS(path);\r\n        },\r\n        mounted: function (rootFS, mountPoint ) {\r\n            //assert.is(arguments,[FS,P.AbsDir]);\r\n            this.rootFS=rootFS;\r\n            this.mountPoint=mountPoint;\r\n        },\r\n        inMyFS:function (path) {\r\n            return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n        },\r\n        /*dirFromFstab: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var res=(options||{}).res || [];\r\n            this.fstab().forEach(function (tb) {\r\n                if (P.up( tb.path )==path) res.push(P.name(tb.path));\r\n            });\r\n            return res;\r\n        },*/\r\n        getRootFS: function () {\r\n            return assert( this.rootFS, \"rootFS is not set\" );\r\n        },\r\n        //-------- end of mouting\r\n        //-------- spec\r\n        getReturnTypes: function (path, options) {\r\n            //{getContent:String|DataURL|ArrayBuffer|OutputStream|Writer\r\n            //   ,opendir:Array|...}\r\n            stub(\"\");\r\n        },\r\n        //-------  for file\r\n        getContent: function (path, options) {\r\n            // options:{type:String|DataURL|ArrayBuffer|OutputStream|Writer}\r\n            // succ : [type],\r\n            stub(\"getContent\");\r\n        },\r\n        size: function (path) {\r\n            var c=this.getContent(path,{type:ArrayBuffer});\r\n            var l=c.toBin().byteLength;\r\n            return l;\r\n        },\r\n        getContentAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"getContentAsync\");\r\n            return DU.resolve(this.getContent.apply(this,arguments));\r\n        },\r\n        setContent: function (path, content, options) {\r\n            // content: String|ArrayBuffer|InputStream|Reader\r\n            stub(\"\");\r\n        },\r\n        setContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"setContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.setContent(path,content,options));\r\n            });\r\n        },\r\n        appendContent: function (path, content, options) {\r\n            //var nc=this.getContent(path,options).toPlainText()+content.toPlainText();\r\n            //return this.setContent(path, Content.fromPlainText(nc) , options);\r\n            stub(\"\");\r\n        },\r\n        appendContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"appendContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.appendContent(path,content,options));\r\n            });\r\n        },\r\n        getMetaInfo: function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        setMetaInfo: function (path, info, options) {\r\n            stub(\"\");\r\n        },\r\n        mkdir: function (path, options) {\r\n            stub(\"mkdir\");\r\n        },\r\n        touch: function (path) {\r\n            stub(\"touch\");\r\n        },\r\n        exists: function (path, options) {\r\n            // exists return false if path is existent by follwing symlink\r\n            stub(\"exists\");\r\n        },\r\n        opendir: function (path, options) {\r\n            //ret: [String] || Stream<string> // https://nodejs.org/api/stream.html#stream_class_stream_readable\r\n            stub(\"opendir\");\r\n        },\r\n        opendirAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"opendirAsync\");\r\n            return DU.resolve(this.opendir.apply(this,arguments));\r\n        },\r\n        cp: function(path, dst, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertExist(path);\r\n            options=options||{};\r\n            var srcIsDir=this.isDir(path);\r\n            var dstfs=this.getRootFS().resolveFS(dst);\r\n            var dstIsDir=dstfs.isDir(dst);\r\n            if (!srcIsDir && !dstIsDir) {\r\n                if (this.supportsSync() && dstfs.supportsSync()) {\r\n                    var cont=this.getContent(path);\r\n                    var res=dstfs.setContent(dst,cont);\r\n                    if (options.a) {\r\n                        dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                    }\r\n                    return res;\r\n                } else {\r\n                    return dstfs.setContentAsync(\r\n                            dst,\r\n                            this.getContentAsync(path)\r\n                    ).then(function (res) {\r\n                        if (options.a) {\r\n                            return dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                        }\r\n                        return res;\r\n                    });\r\n                }\r\n            } else {\r\n                throw new Error(\"only file to file supports\");\r\n            }\r\n        },\r\n        mv: function (path,to,options) {\r\n            this.cp(path,to,options);\r\n            return this.rm(path,{r:true});\r\n        },\r\n        rm:function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        link: function (path, to, options) {\r\n            throw new Error(\"ln \"+to+\" \"+path+\" : This FS not support link.\");\r\n        },\r\n        getURL: function (path) {\r\n            stub(\"\");\r\n        },\r\n        onAddObserver: function (path) {\r\n        }\r\n    });\r\n    //res=[]; for (var k in a) { res.push(k); } res;\r\n    FS.delegateMethods=function (prototype,  methods) {\r\n        for (var n in methods) {\r\n            (function (n){\r\n                assert.ne(n,\"inMyFS\");\r\n                prototype[n]=function () {\r\n                    var path=arguments[0];\r\n                    assert.is(path,P.Absolute);\r\n                    var fs=this.resolveFS(path);\r\n                    //console.log(n, f.fs===this  ,f.fs, this);\r\n                    if (fs!==this) {\r\n                        console.log(\"Invoked for other fs\",this.mountPoint, fs.mountPoint)\r\n                        //arguments[0]=f.path;\r\n                        return fs[n].apply(fs, arguments);\r\n                    } else {\r\n                        return methods[n].apply(this, arguments);\r\n                    }\r\n                };\r\n            })(n);\r\n        }\r\n    };\r\n    FS.delegateMethods(FS.prototype, {\r\n        assertWriteable: function (path) {\r\n            if (this.isReadOnly(path)) this.err(path, \"read only.\");\r\n        },\r\n        getContentType: function (path, options) {\r\n            var e=(P.ext(path)+\"\").toLowerCase();\r\n            return M[e] || (options||{}).def || \"application/octet-stream\";\r\n        },\r\n        getBlob: function (path, options) {\r\n            var c=this.getContent(path);\r\n            options=options||{};\r\n            options.blobType=options.blobType||Blob;\r\n            options.binType=options.binType||ArrayBuffer;\r\n            if (c.hasPlainText()) {\r\n                return new options.blobType([c.toPlainText()],this.getContentType(path));\r\n            } else {\r\n                return new options.blobType([c.toBin(options.binType)],this.getContentType(path));\r\n            }\r\n        },\r\n        isText:function (path) {\r\n            var m=this.getContentType(path);\r\n            return P.startsWith( m, \"text\");\r\n        },\r\n        assertExist: function (path, options) {\r\n            if (!this.exists(path, options)) {\r\n                this.err(path, \": No such \"+(P.isDir(path)?\"directory\":\"file\"));\r\n            }\r\n        },\r\n        isDir: function (path,options) {\r\n            return P.isDir(path);\r\n        },\r\n        find: function (path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            var ls=this.opendir(path, options);\r\n            var t=this;\r\n            var res=[path];\r\n            ls.forEach(function (e) {\r\n                var ep=P.rel(path, e);\r\n                if (P.isDir(ep)) {\r\n                    var fs=t.resolveFS(ep);\r\n                    res=res.concat(\r\n                            fs.find( ep ,options)\r\n                    );\r\n                } else {\r\n                    res.push( ep );//getPathFromRootFS\r\n                }\r\n            });\r\n            return res;\r\n        },\r\n        resolveLink: function (path) {\r\n            assert.is(path,P.Absolute);\r\n            // returns non-link path\r\n            // ln -s /a/b/ /c/d/\r\n            // resolveLink /a/b/    ->  /a/b/\r\n            // resolveLink /c/d/e/f -> /a/b/e/f\r\n            // resolveLink /c/d/non_existent -> /a/b/non_existent\r\n            // isLink      /c/d/    -> /a/b/\r\n            // isLink      /c/d/e/f -> null\r\n            // ln /testdir/ /ram/files/\r\n            // resolveLink /ram/files/sub/test2.txt -> /testdir/sub/test2.txt\r\n            // path=/ram/files/test.txt\r\n            for (var p=path ; p ; p=P.up(p)) {\r\n                assert(!this.mountPoint || P.startsWith(p, this.mountPoint), p+\" is out of mountPoint. path=\"+path);\r\n                var l=this.isLink(p);  // p=/ram/files/ l=/testdir/\r\n                if (l) {\r\n                    assert(l!=p,\"l==p==\"+l);\r\n                    //        /testdir/    test.txt\r\n                    var np=P.rel(l,P.relPath(path, p));  //   /testdir/test.txt\r\n                    assert(np!=path,\"np==path==\"+np);\r\n                    return assert.is(this.getRootFS().resolveFS(np).resolveLink(np),P.Absolute)  ;\r\n                }\r\n                if (this.exists(p)) return path;\r\n            }\r\n            return path;\r\n        },\r\n        isLink: function (path) {\r\n            return null;\r\n        },\r\n        opendirEx: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var ls=this.opendir(path);\r\n            var t=this;\r\n            var dest={};\r\n            ls.forEach(function (f) {\r\n                var p=P.rel(path,f);\r\n                dest[f]=t.getMetaInfo(p);\r\n            });\r\n            return dest;\r\n        },\r\n        getDirTree: function (path, options) {\r\n            options=options||{};\r\n            var dest=options.dest=options.dest||{};\r\n            options.style=options.style||\"flat-absolute\";\r\n            options.excludes=options.excludes||[];\r\n            assert.is(options.excludes,Array);\r\n            if (!options.base) {\r\n                options.base=path;\r\n            }\r\n            assert.is(path, P.AbsDir);\r\n            var tr=this.opendirEx(path,options);\r\n            if (options.style==\"no-recursive\") return tr;\r\n            var t=this;\r\n            for (var f in tr) {\r\n                var meta=tr[f];\r\n                var p=P.rel(path,f);\r\n                var relP=P.relPath(p,options.base);\r\n                switch(options.style) {\r\n                    case \"flat-relative\":\r\n                    case \"hierarchical\":\r\n                        if (options.excludes.indexOf(relP)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                    case \"flat-absolute\":\r\n                        if (options.excludes.indexOf(p)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                }\r\n                if (t.isDir(p)) {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                    case \"flat-relative\":\r\n                        t.getDirTree(p,options);\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        options.dest={};\r\n                        dest[f]=t.getDirTree(p,options);\r\n                        break;\r\n                    }\r\n                } else {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                        dest[p]=meta;\r\n                        break;\r\n                    case \"flat-relative\":\r\n                        dest[relP]=meta;\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        dest[f]=meta;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return dest;\r\n        }\r\n        /*get: function (path) {\r\n            assert.eq(this.resolveFS(path), this);\r\n            return new SFile(this, path);\r\n            //var r=this.resolveFS(path);\r\n            //return new SFile(r.fs, r.path);\r\n        }*/\r\n\r\n    });\r\n    return FS;\r\n});\r\n\r\ndefine('Util',[],function () {\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction extend(d,s) {\r\n    for (var i in (s||{})) {d[i]=s[i];} \r\n    return d;\r\n}\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    privatize: privatize,extend:extend\r\n};\r\n});\r\n\r\n/*\r\n* FileSaver.js\r\n* A saveAs() FileSaver implementation.\r\n*\r\n* By Eli Grey, http://eligrey.com\r\n*\r\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\r\n* source  : http://purl.eligrey.com/github/FileSaver.js\r\n*/\r\ndefine('FileSaver',[],function (){\r\n\r\n// The one and only way of getting global scope in all environments\r\n// https://stackoverflow.com/q/3277182/1008999\r\nvar _global = typeof window === 'object' && window.window === window\r\n  ? window : typeof self === 'object' && self.self === self\r\n  ? self : typeof global === 'object' && global.global === global\r\n  ? global\r\n  : this\r\n\r\nfunction bom (blob, opts) {\r\n  if (typeof opts === 'undefined') opts = { autoBom: false }\r\n  else if (typeof opts !== 'object') {\r\n    console.warn('Depricated: Expected third argument to be a object')\r\n    opts = { autoBom: !opts }\r\n  }\r\n\r\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\r\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\r\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\r\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\r\n  }\r\n  return blob\r\n}\r\n\r\nfunction download (url, name, opts) {\r\n  var xhr = new XMLHttpRequest()\r\n  xhr.open('GET', url)\r\n  xhr.responseType = 'blob'\r\n  xhr.onload = function () {\r\n    saveAs(xhr.response, name, opts)\r\n  }\r\n  xhr.onerror = function () {\r\n    console.error('could not download file')\r\n  }\r\n  xhr.send()\r\n}\r\n\r\nfunction corsEnabled (url) {\r\n  var xhr = new XMLHttpRequest()\r\n  // use sync to avoid popup blocker\r\n  xhr.open('HEAD', url, false)\r\n  xhr.send()\r\n  return xhr.status >= 200 && xhr.status <= 299\r\n}\r\n\r\n// `a.click()` doesn't work for all browsers (#465)\r\nfunction click(node) {\r\n  try {\r\n    node.dispatchEvent(new MouseEvent('click'))\r\n  } catch (e) {\r\n    var evt = document.createEvent('MouseEvents')\r\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\r\n                          20, false, false, false, false, 0, null)\r\n    node.dispatchEvent(evt)\r\n  }\r\n}\r\n\r\nvar saveAs = _global.saveAs ||\r\n// probably in some web worker\r\n(typeof window !== 'object' || window !== _global)\r\n  ? function saveAs () { /* noop */ }\r\n\r\n// Use download attribute first if possible (#193 Lumia mobile)\r\n: 'download' in HTMLAnchorElement.prototype\r\n? function saveAs (blob, name, opts) {\r\n  var URL = _global.URL || _global.webkitURL\r\n  var a = document.createElement('a')\r\n  name = name || blob.name || 'download'\r\n\r\n  a.download = name\r\n  a.rel = 'noopener' // tabnabbing\r\n\r\n  // TODO: detect chrome extensions & packaged apps\r\n  // a.target = '_blank'\r\n\r\n  if (typeof blob === 'string') {\r\n    // Support regular links\r\n    a.href = blob\r\n    if (a.origin !== location.origin) {\r\n      corsEnabled(a.href)\r\n        ? download(blob, name, opts)\r\n        : click(a, a.target = '_blank')\r\n    } else {\r\n      click(a)\r\n    }\r\n  } else {\r\n    // Support blobs\r\n    a.href = URL.createObjectURL(blob)\r\n    setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\r\n    setTimeout(function () { click(a) }, 0)\r\n  }\r\n}\r\n\r\n// Use msSaveOrOpenBlob as a second approach\r\n: 'msSaveOrOpenBlob' in navigator\r\n? function saveAs (blob, name, opts) {\r\n  name = name || blob.name || 'download'\r\n\r\n  if (typeof blob === 'string') {\r\n    if (corsEnabled(blob)) {\r\n      download(blob, name, opts)\r\n    } else {\r\n      var a = document.createElement('a')\r\n      a.href = blob\r\n      a.target = '_blank'\r\n      setTimeout(function () { click(a) })\r\n    }\r\n  } else {\r\n    navigator.msSaveOrOpenBlob(bom(blob, opts), name)\r\n  }\r\n}\r\n\r\n// Fallback to using FileReader and a popup\r\n: function saveAs (blob, name, opts, popup) {\r\n  // Open a popup immediately do go around popup blocker\r\n  // Mostly only avalible on user interaction and the fileReader is async so...\r\n  popup = popup || open('', '_blank')\r\n  if (popup) {\r\n    popup.document.title =\r\n    popup.document.body.innerText = 'downloading...'\r\n  }\r\n\r\n  if (typeof blob === 'string') return download(blob, name, opts)\r\n\r\n  var force = blob.type === 'application/octet-stream'\r\n  var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\r\n  var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\r\n\r\n  if ((isChromeIOS || (force && isSafari)) && typeof FileReader === 'object') {\r\n    // Safari doesn't allow downloading of blob urls\r\n    var reader = new FileReader()\r\n    reader.onloadend = function () {\r\n      var url = reader.result\r\n      url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\r\n      if (popup) popup.location.href = url\r\n      else location = url\r\n      popup = null // reverse-tabnabbing #460\r\n    }\r\n    reader.readAsDataURL(blob)\r\n  } else {\r\n    var URL = _global.URL || _global.webkitURL\r\n    var url = URL.createObjectURL(blob)\r\n    if (popup) popup.location = url\r\n    else location.href = url\r\n    popup = null // reverse-tabnabbing #460\r\n    setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\r\n  }\r\n}\r\n\r\n_global.saveAs = saveAs.saveAs = saveAs\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = saveAs;\r\n}\r\nreturn saveAs;\r\n});\r\n\r\ndefine('Content',[\"assert\",\"Util\",\"FileSaver\"],function (assert,Util,saveAs) {\r\n    var Content=function () {};\r\n    var extend=Util.extend;\r\n    // ------ constructor\r\n    Content.plainText=function (s,contentType){\r\n        var b=new Content;\r\n        b.contentType=contentType||\"text/plain\";\r\n        b.plain=s;\r\n        return b;\r\n    };\r\n    Content.url=function (s) {\r\n        var b=new Content;\r\n        b.url=s;\r\n        return b;\r\n    };\r\n    Content.buffer2ArrayBuffer = function (a) {\r\n        if (Content.isBuffer(a)) {\r\n            var u=new Uint8Array(a);\r\n            var r=u.buffer;\r\n            if (r instanceof ArrayBuffer) return r;\r\n            var ary=Array.prototype.slice.call(u);\r\n            return assert(new Uint8Array(ary).buffer,\"n2a: buf is not set\");\r\n        }\r\n        return assert(a,\"n2a: a is not set\");\r\n    };\r\n    Content.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return assert(a,\"a2n: a is not set\");\r\n    };\r\n\r\n    Content.bin=function (bin, contentType) {\r\n        assert(contentType, \"contentType should be set\");\r\n        var b=new Content;\r\n        if (Content.isNodeBuffer(bin)) {\r\n            b.bufType=\"node\";\r\n            b.nodeBuffer=bin;\r\n        } else if (bin instanceof ArrayBuffer) {\r\n            b.bufType=\"array2\";\r\n            b.arrayBuffer=bin;\r\n        } else if (bin && Content.isBuffer(bin.buffer)) {\r\n            // in node.js v8.9.1 ,\r\n            ///  bin is Buffer, bin.buffer is ArrayBuffer\r\n            //   and bin.buffer is content of different file(memory leak?) \r\n            b.bufType=\"array1\";\r\n            b.arrayBuffer=bin.buffer;\r\n        } else {\r\n            throw new Error(bin+\" is not a bin\");\r\n        }\r\n        b.contentType=contentType;\r\n        return b;\r\n    };\r\n    Content.looksLikeDataURL=function (text) {\r\n        return text.match(/^data:/);\r\n    };\r\n    Content.download=saveAs;\r\n    // why blob is not here... because blob content requires FileReader (cannot read instantly!)\r\n    //------- methods\r\n    var p=Content.prototype;\r\n    p.toBin = function (binType) {\r\n        binType=binType || (Content.hasNodeBuffer() ? Buffer: ArrayBuffer);\r\n        if (this.nodeBuffer) {\r\n            if (binType===Buffer) {\r\n                return this.nodeBuffer;\r\n            } else {\r\n                return this.arrayBuffer=( Content.buffer2ArrayBuffer(this.nodeBuffer) );\r\n            }\r\n        } else if (this.arrayBuffer) {\r\n            if (binType===ArrayBuffer) {\r\n                return this.arrayBuffer;\r\n            } else {\r\n                return this.nodeBuffer=( Content.arrayBuffer2Buffer(this.arrayBuffer) );\r\n            }\r\n        } else if (this.url) {\r\n            var d=new DataURL(this.url, binType);\r\n            return this.setBuffer(d.buffer);\r\n        } else if (this.plain!=null) {\r\n            return this.setBuffer( Content.str2utf8bytes(this.plain, binType) );\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.setBuffer=function (b) {\r\n        assert(b,\"b is not set\");\r\n        if (Content.isNodeBuffer(b)) {\r\n            return this.nodeBuffer=b;\r\n        } else {\r\n            return this.arrayBuffer=b;\r\n        }\r\n    };\r\n    p.toArrayBuffer=function () {\r\n        return this.toBin(ArrayBuffer);\r\n    };\r\n    p.toNodeBuffer=function () {\r\n        return this.toBin(Buffer);\r\n    };\r\n    p.toURL=function () {\r\n        if (this.url) {\r\n            return this.url;\r\n        } else {\r\n            if (!this.arrayBuffer && this.plain!=null) {\r\n                this.arrayBuffer=Content.str2utf8bytes(this.plain,ArrayBuffer);\r\n            }\r\n            if (this.arrayBuffer || this.nodeBuffer) {\r\n                var d=new DataURL(this.arrayBuffer || this.nodeBuffer,this.contentType);\r\n                return this.url=d.url;\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.toPlainText=function () {\r\n        if (this.hasPlainText()) {\r\n            return this.plain;\r\n        } else {\r\n            if (this.url && !this.hasBin() ) {\r\n                var d=new DataURL(this.url,ArrayBuffer);\r\n                this.arrayBuffer=d.buffer;\r\n            }\r\n            if (this.hasBin()) {\r\n                return this.plain=Content.utf8bytes2str(\r\n                        this.nodeBuffer || new Uint8Array(this.arrayBuffer)\r\n                );\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.hasURL=function (){return this.url;};\r\n    p.hasPlainText=function (){return this.plain!=null;};\r\n    p.hasBin=function (){return this.nodeBuffer || this.arrayBuffer;};\r\n    p.hasNodeBuffer= function () {return this.nodeBuffer;};\r\n    p.hasArrayBuffer= function () {return this.arrayBuffer;};\r\n    p.toBlob=function () {\r\n        return new Blob([this.toBin(ArrayBuffer)],{type:this.contentType});\r\n    };\r\n    p.download=function (name) {\r\n        Content.download(this.toBlob(),name);\r\n    };\r\n    //--------Util funcs\r\n    // From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\n    Content.Base64_To_ArrayBuffer=function (base64,binType){\r\n\t    var A=binType||ArrayBuffer;\r\n        base64=base64.replace(/[\\n=]/g,\"\");\r\n        var dic = new Object();\r\n        dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n        dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n        dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n        dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n        var num = base64.length;\r\n        var n = 0;\r\n        var b = 0;\r\n        var e;\r\n\r\n        if(!num) return (new A(0));\r\n        //if(num < 4) return null;\r\n        //if(num % 4) return null;\r\n\r\n        // AA     12    1\r\n        // AAA    18    2\r\n        // AAAA   24    3\r\n        // AAAAA  30    3\r\n        // AAAAAA 36    4\r\n        // num*6/8\r\n        e = Math.floor(num / 4 * 3);\r\n        if(base64.charAt(num - 1) == '=') e -= 1;\r\n        if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n        var ary_buffer = new A( e );\r\n        var ary_u8 = (Content.isNodeBuffer(ary_buffer) ? ary_buffer : new Uint8Array( ary_buffer ));//new Uint8Array( ary_buffer );\r\n        var i = 0;\r\n        var p = 0;\r\n        while(p < e){\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n            n = (b << 2);\r\n            i ++;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 4) & 0x3);\r\n            n = (b & 0x0f) << 4;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 2) & 0xf);\r\n            n = (b & 0x03) << 6;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | b;\r\n            i ++;\r\n            p ++;\r\n        }\r\n        function fail(m) {\r\n            console.log(m);\r\n            console.log(base64,i);\r\n            throw new Error(m);\r\n        }\r\n        return ary_buffer;\r\n    };\r\n\r\n    Content.Base64_From_ArrayBuffer=function (ary_buffer){\r\n        var dic = [\r\n            'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n            'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n            'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n            'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n        ];\r\n        var base64 = \"\";\r\n        var ary_u8 = new Uint8Array( ary_buffer );\r\n        var num = ary_u8.length;\r\n        var n = 0;\r\n        var b = 0;\r\n\r\n        var i = 0;\r\n        while(i < num){\r\n            b = ary_u8[i];\r\n            base64 += dic[(b >> 2)];\r\n            n = (b & 0x03) << 4;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 4)];\r\n            n = (b & 0x0f) << 2;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 6)];\r\n            base64 += dic[(b & 0x3f)];\r\n            i ++;\r\n        }\r\n\r\n        var m = num % 3;\r\n        if(m){\r\n            base64 += dic[n];\r\n        }\r\n        if(m == 1){\r\n            base64 += \"==\";\r\n        }else if(m == 2){\r\n            base64 += \"=\";\r\n        }\r\n        return base64;\r\n    };\r\n\r\n    Content.hasNodeBuffer=function () {\r\n        return typeof Buffer!=\"undefined\";\r\n    };\r\n    Content.isNodeBuffer=function (data) {\r\n        return (Content.hasNodeBuffer() && data instanceof Buffer);\r\n    };\r\n    Content.isBuffer=function (data) {\r\n        return data instanceof ArrayBuffer || Content.isNodeBuffer(data);\r\n    };\r\n    Content.utf8bytes2str=function (bytes) {\r\n        var e=[];\r\n        for (var i=0 ; i<bytes.length ; i++) {\r\n             e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n        }\r\n        //try {\r\n            return decodeURIComponent(e.join(\"\"));\r\n        /*} catch (er) {\r\n            console.log(e.join(\"\"));\r\n            throw er;\r\n        }*/\r\n    };\r\n    Content.str2utf8bytes=function (str, binType) {\r\n        var e=encodeURIComponent(str);\r\n        var r=/^%(..)/;\r\n        var a=[];\r\n        var ad=0;\r\n        for (var i=0 ; i<e.length; i++) {\r\n            var m=r.exec( e.substring(i));\r\n            if (m) {\r\n                a.push(parseInt(\"0x\"+m[1]));\r\n                i+=m[0].length-1;\r\n            } else a.push(e.charCodeAt(i));\r\n        }\r\n        return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n    };\r\n    //-------- DataURL\r\n    var A=Content.hasNodeBuffer() ? Buffer :ArrayBuffer;\r\n    //var isBuffer=Util.isBuffer;\r\n    var DataURL=function (data, contentType){\r\n      // data: String/Array/ArrayBuffer\r\n      if (typeof data==\"string\") {\r\n          this.url=data;\r\n          this.binType=contentType || A;\r\n          this.dataURL2bin(data);\r\n      } else if (data && Content.isBuffer(data.buffer)) {\r\n          this.buffer=data.buffer;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else if (Content.isBuffer(data)) {\r\n          this.buffer=data;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else {\r\n          console.log(arguments);\r\n          assert.fail(\"Invalid args: \",arguments);\r\n      }\r\n   };\r\n   Content.DataURL=DataURL;\r\n   extend(DataURL.prototype,{\r\n      bin2dataURL: function (b, contentType) {\r\n          assert(Content.isBuffer(b));\r\n          assert.is(contentType,String);\r\n  \t     var head=this.dataHeader(contentType);\r\n\t     var base64=Content.Base64_From_ArrayBuffer(b);\r\n\t     assert.is(base64,String);\r\n\t     return this.url=head+base64;\r\n\t  },\r\n\t  dataURL2bin: function (dataURL) {\r\n          assert.is(arguments,[String]);\r\n\t      var reg=/^data:([^;]+);base64,/i;\r\n\t      var r=reg.exec(dataURL);\r\n\t      assert(r, [\"malformed dataURL:\", dataURL] );\r\n\t      this.contentType=r[1];\r\n\t      this.buffer=Content.Base64_To_ArrayBuffer(dataURL.substring(r[0].length) , this.binType);\r\n          return assert.is(this.buffer , this.binType);\r\n  \t  },\r\n  \t  dataHeader: function (ctype) {\r\n\t      assert.is(arguments,[String]);\r\n\t      return \"data:\"+ctype+\";base64,\";\r\n   \t  },\r\n   \t  toString: function () {return assert.is(this.url,String);}\r\n   });\r\n\r\n    return Content;\r\n});\r\n\r\n/*global process, global, Buffer*/\r\ndefine('NativeFS',[\"FSClass\",\"assert\",\"PathUtil\",\"extend\",\"Content\"],\r\n        function (FS,A,P,extend,Content) {\r\n    var assert=A,fs;\r\n    try {\r\n        fs=global.require(\"fs\");\r\n        fs.existsSync('test.txt');\r\n    }catch(e){\r\n        return function () {\r\n            throw new Error(\"This system not support native FS\");\r\n        };\r\n    }\r\n    var NativeFS=function (rootPoint) {\r\n        if (rootPoint) {\r\n            A.is(rootPoint, P.AbsDir);\r\n            this.rootPoint=rootPoint;\r\n        }\r\n    };\r\n    var hasDriveLetter=P.hasDriveLetter(process.cwd());\r\n    NativeFS.available=true;\r\n    var SEP=P.SEP;\r\n    //var json=JSON; // JSON changes when page changes, if this is node module, JSON is original JSON\r\n    var Pro=NativeFS.prototype=new FS();\r\n    Pro.toNativePath = function (path) {\r\n        // rootPoint: on NativePath   C:/jail/\r\n        // mountPoint: on VirtualFS   /mnt/natfs/\r\n        if (!this.rootPoint) return path;\r\n        A.is(path, P.Absolute);\r\n        A(this.inMyFS(path),path+\" is not fs of \"+this);\r\n        //console.log(\"tonat:MP\",P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP)));\r\n        return P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP));\r\n    };\r\n    Pro.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return a;\r\n    };\r\n\r\n    FS.addFSType(\"NativeFS\",function (path, options) {\r\n            return new NativeFS(options.r);\r\n    });\r\n    NativeFS.prototype.fstype=function () {\r\n        return \"Native\"+(this.rootPoint?\"(\"+this.rootPoint+\")\":\"\");\r\n    };\r\n    NativeFS.prototype.inMyFS=function (path) {\r\n        //console.log(\"inmyfs\",path);\r\n        if (this.mountPoint) {\r\n            return P.startsWith(path, this.mountPoint);\r\n        } else {\r\n//            console.log(path, hasDriveLetter , P.hasDriveLetter(path));\r\n            return !( !!hasDriveLetter ^ !!P.hasDriveLetter(path));\r\n        }\r\n    };\r\n    function E(r){return r;}\r\n    FS.delegateMethods(NativeFS.prototype, {\r\n        getReturnTypes: function(path, options) {\r\n            E(path,options);\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: ArrayBuffer, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function (path, options) {\r\n            options=options||{};\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            this.assertExist(path);\r\n            /*if (this.isText(path)) {\r\n                return Content.plainText( fs.readFileSync(np, {encoding:\"utf8\"}) );\r\n            } else {*/\r\n                return Content.bin( fs.readFileSync(np) , this.getContentType(path));\r\n            //}\r\n        },\r\n        size: function(path) {\r\n            var np=this.toNativePath(path);\r\n            var st=fs.statSync(np);\r\n            return st.size;\r\n        },\r\n        setContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.writeFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.writeFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        appendContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.appendFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.appendFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, options);\r\n            var s=this.stat(path);\r\n            s.lastUpdate=s.mtime.getTime();\r\n            return s;\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            E(path, info, options);\r\n            //options.lastUpdate\r\n\r\n            //TODO:\r\n        },\r\n        isReadOnly: function (path) {\r\n            E(path);\r\n            // TODO:\r\n            return false;\r\n        },\r\n        stat: function (path) {\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            return fs.statSync(np);\r\n        },\r\n        mkdir: function(path, options) {\r\n            options=options||{};\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (this.exists(path)){\r\n                if (this.isDir(path)) {\r\n                    return;\r\n                } else {\r\n                    throw new Error(this+\" is a file. not a dir.\");\r\n                }\r\n            }\r\n            this.assertWriteable(path);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            fs.mkdirSync(np);\r\n            return this.assertExist(np);\r\n        },\r\n        opendir: function (path, options) {\r\n            assert.is(arguments,[String]);\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            var ts=P.truncSEP(np);\r\n            var r=fs.readdirSync(np);\r\n            if (!options.nosep) {\r\n                r=r.map(function (e) {\r\n                    var s=fs.statSync(ts+SEP+e);\r\n                    var ss=s.isDirectory()?SEP:\"\";\r\n                    return e+ss;\r\n                });\r\n            }\r\n            var res=[]; //this.dirFromFstab(path);\r\n            return assert.is(res.concat(r),Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            options=options||{};\r\n            this.assertExist(path);\r\n            var np=this.toNativePath(path);\r\n            if (this.isDir(path)) {\r\n                return fs.rmdirSync(np);\r\n            } else {\r\n                return fs.unlinkSync(np);\r\n            }\r\n        },\r\n        // mv: is Difficult, should check dst.fs==src.fs\r\n        //     and both have not subFileSystems\r\n        exists: function (path, options) {\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            return fs.existsSync(np);\r\n        },\r\n        isDir: function (path) {\r\n            if (!this.exists(path)) {\r\n                return P.isDir(path);\r\n            }\r\n            return this.stat(path).isDirectory();\r\n        },\r\n        /*link: function(path, to, options) {\r\n        }//TODO\r\n        isLink:\r\n        */\r\n        touch: function (path) {\r\n            if (!this.exists(path) && this.isDir(path)) {\r\n                this.mkdir(path);\r\n            } else if (this.exists(path) /*&& !this.isDir(path)*/ ) {\r\n                // TODO(setlastupdate)\r\n                fs.utimesSync(path,Date.now()/1000,Date.now()/1000);\r\n            }\r\n        },\r\n        getURL:function (path) {\r\n            return \"file:///\"+path.replace(/\\\\/g,\"/\");\r\n        },\r\n        onAddObserver: function (apath,options) {\r\n            var t=this;\r\n            var rfs=t.getRootFS();\r\n            options=options||{};\r\n            var isDir=this.isDir(apath);\r\n            //console.log(\"Invoke oao\",options);\r\n            var w=fs.watch(apath, options, function (evt,rpath) {\r\n                //console.log(path);\r\n                var fpath=isDir ? P.rel(apath,rpath) : apath;\r\n                var meta;\r\n                if (t.exists(fpath)) {\r\n                    meta=extend({eventType:evt},t.getMetaInfo(fpath));\r\n                } else {\r\n                    meta={eventType:evt};\r\n                }\r\n                rfs.notifyChanged(fpath,meta);\r\n            });\r\n            return {\r\n                remove: function () {\r\n                    w.close();\r\n                }\r\n            };\r\n        }\r\n    });\r\n    return NativeFS;\r\n});\r\n\r\ndefine('LSFS',[\"FSClass\",\"PathUtil\",\"extend\",\"assert\",\"Util\",\"Content\"],\r\n        function(FS,P,extend,assert,Util,Content) {\r\n    var LSFS = function(storage,options) {\r\n        assert(storage,\" new LSFS fail: no storage\");\r\n    \tthis.storage=storage;\r\n    \tthis.options=options||{};\r\n    \tif (this.options.useDirCache) this.dirCache={};\r\n    };\r\n    var isDir = P.isDir.bind(P);\r\n    var up = P.up.bind(P);\r\n    var endsWith= P.endsWith.bind(P);\r\n    //var getName = P.name.bind(P);\r\n    //var Path=P.Path;\r\n    var Absolute=P.Absolute;\r\n    var SEP= P.SEP;\r\n    function now(){\r\n        return new Date().getTime();\r\n    }\r\n    LSFS.ramDisk=function (options) {\r\n        var s={};\r\n        s[P.SEP]=\"{}\";\r\n        options=options||{};\r\n        if (!(\"useDirCache\" in options)) options.useDirCache=true;\r\n        return new LSFS(s,options);\r\n    };\r\n    FS.addFSType(\"localStorage\",function (path, options) {\r\n        return new LSFS(localStorage,options);\r\n    });\r\n    FS.addFSType(\"ram\",function (path, options) {\r\n        return LSFS.ramDisk(options);\r\n    });\r\n\r\n    LSFS.now=now;\r\n    LSFS.prototype=new FS();\r\n    //private methods\r\n    LSFS.prototype.resolveKey=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        if (this.mountPoint) {\r\n            return P.SEP+P.relPath(path,this.mountPoint);//FromMountPoint(path);\r\n        } else {\r\n            return path;\r\n        }\r\n    };\r\n    LSFS.prototype.getItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        return this.storage[key];\r\n    };\r\n    LSFS.prototype.setItem=function (path, value) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        /*if (key.indexOf(\"..\")>=0) {\r\n            console.log(path,key,value);\r\n        }*/\r\n        assert(key.indexOf(\"..\")<0);\r\n        assert(P.startsWith(key,P.SEP));\r\n        this.storage[key]=value;\r\n    };\r\n    LSFS.prototype.removeItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        delete this.storage[key];\r\n    };\r\n    LSFS.prototype.itemExists=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        assert(this.storage,\"No storage\");\r\n        return key in this.storage;\r\n    };\r\n    /*LSFS.prototype.inMyFS=function (path){\r\n        return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n    };*/\r\n    LSFS.prototype.getDirInfo=function getDirInfo(path) {\r\n        assert.is(arguments,[P.AbsDir]);\r\n        if (path == null) throw new Error(\"getDir: Null path\");\r\n        if (!endsWith(path, SEP)) path += SEP;\r\n        assert(this.inMyFS(path));\r\n        if (this.dirCache && this.dirCache[path]) return this.dirCache[path];\r\n        var dinfo =  {},dinfos;\r\n        try {\r\n            dinfos = this.getItem(path);\r\n            if (dinfos) {\r\n                dinfo = JSON.parse(dinfos);\r\n            }\r\n        } catch (e) {\r\n            console.log(\"dinfo err : \" , path , dinfos);\r\n        }\r\n        if (this.dirCache) this.dirCache[path]=dinfo;\r\n        return dinfo;\r\n    };\r\n    LSFS.prototype.putDirInfo=function putDirInfo(path, dinfo, trashed) {\r\n  \t    assert.is(arguments,[P.AbsDir, Object]);\r\n  \t    if (!isDir(path)) throw new Error(\"Not a directory : \" + path);\r\n  \t    assert(this.inMyFS(path));\r\n  \t    if (this.dirCache) this.dirCache[path] = dinfo;\r\n  \t    this.setItem(path, JSON.stringify(dinfo));\r\n        var ppath = up(path);\r\n        if (ppath == null) return;\r\n        if (!this.inMyFS(ppath)) {\r\n            //assert(this.getRootFS()!==this);\r\n            //this.getRootFS().resolveFS(ppath).touch(ppath);\r\n            return;\r\n        }\r\n        var pdinfo = this.getDirInfo(ppath);\r\n        this._touch(pdinfo, ppath, P.name(path), trashed);\r\n    };\r\n    LSFS.prototype._touch=function _touch(dinfo, path, name, trashed) {\r\n        // path:path of dinfo\r\n        // trashed: this touch is caused by trashing the file/dir.\r\n        assert.is(arguments,[Object, String, String]);\r\n        assert(this.inMyFS(path));\r\n        var eventType=\"change\";\r\n        if (!dinfo[name]) {\r\n            eventType=\"create\";\r\n            dinfo[name] = {};\r\n            if (trashed) dinfo[name].trashed = true;\r\n        }\r\n        if (!trashed) delete dinfo[name].trashed;\r\n        dinfo[name].lastUpdate = now();\r\n        var meta=extend({eventType:eventType},dinfo[name]);\r\n        this.getRootFS().notifyChanged(P.rel(path,name), meta);\r\n        this.putDirInfo(path, dinfo, trashed);\r\n    };\r\n    LSFS.prototype.removeEntry=function removeEntry(dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            dinfo[name] = {\r\n                lastUpdate: now(),\r\n                trashed: true\r\n            };\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"trash\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.removeEntryWithoutTrash=function (dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            delete dinfo[name];\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"delete\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.isRAM=function (){\r\n        return this.storage!==localStorage;\r\n    };\r\n    LSFS.prototype.fstype=function () {\r\n        return (this.isRAM() ? \"ramDisk\" : \"localStorage\" );\r\n    };\r\n    LSFS.getUsage=function () {\r\n        var using=0;\r\n        for (var i in localStorage) {\r\n            if (typeof localStorage[i]==\"string\"){\r\n                using+=localStorage[i].length;\r\n            }\r\n        }\r\n        return using;\r\n    };\r\n    LSFS.getCapacity=function () {\r\n        var seq=0;\r\n        var str=\"a\";\r\n        var KEY=\"___checkls___\";\r\n        var using=0;\r\n        var lim=Math.pow(2,25);//32MB?\r\n        try {\r\n            // make 1KB str\r\n            for (var i=0; i<10 ;i++) {\r\n                str+=str;\r\n            }\r\n            for (var i in localStorage) {\r\n                if (i.substring(0,KEY.length)==KEY) delete localStorage[i];\r\n                else if (typeof localStorage[i]==\"string\"){\r\n                    using+=localStorage[i].length;\r\n                }\r\n            }\r\n            var ru=using;\r\n            while (add()) {\r\n                if (str.length<lim) {\r\n                    str+=str;\r\n                } else break;\r\n            }\r\n            while(str.length>1024) {\r\n                str=str.substring(str.length/2);\r\n                add();\r\n            }\r\n            return {using:ru, max:using};\r\n        } finally {\r\n            for (var i=0; i<seq; i++) {\r\n                 delete localStorage[KEY+i];\r\n            }\r\n        }\r\n        function add() {\r\n            try {\r\n                localStorage[KEY+seq]=str;\r\n                seq++;\r\n                using+=str.length;\r\n                //console.log(\"Added \"+str.length, str.length, using);\r\n                return true;\r\n            } catch(e) {\r\n                delete localStorage[KEY+seq];\r\n                //console.log(\"Add Fail \"+str.length);\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n\r\n    // public methods (with resolve fs)\r\n    FS.delegateMethods(LSFS.prototype, {\r\n        isReadOnly: function () {return this.options.readOnly;},\r\n        getReturnTypes: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: String, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertExist(path); // Do not use this??( because it does not follow symlinks)\r\n            var c;\r\n            var cs=this.getItem(path);\r\n            if (Content.looksLikeDataURL(cs)) {\r\n                c=Content.url(cs);\r\n            } else {\r\n                c=Content.plainText(cs);\r\n            }\r\n            return c;\r\n        },\r\n        setContent: function(path, content, options) {\r\n            assert.is(arguments,[Absolute,Content]);\r\n            this.assertWriteable(path);\r\n            var t=null;\r\n            if (content.hasPlainText()) {\r\n                t=content.toPlainText();\r\n                if (Content.looksLikeDataURL(t)) t=null;\r\n            }\r\n            if (t!=null) {\r\n                this.setItem(path, t);\r\n            } else {\r\n                this.setItem(path, content.toURL());\r\n            }\r\n            this.touch(path);\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, {includeTrashed:true});\r\n            assert.is(arguments,[Absolute]);\r\n            if (path==P.SEP) {\r\n                return {};\r\n            }\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return {};\r\n            }\r\n            var name=P.name(path);\r\n            assert.is(parent,P.AbsDir);\r\n            var pinfo=this.getDirInfo(parent);\r\n            return assert(pinfo[name]);\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            assert.is(arguments,[String,Object]);\r\n            this.assertWriteable(path);\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return;\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            var name=P.name(path);\r\n            pinfo[name]=info;\r\n            this.putDirInfo(parent, pinfo, pinfo[name].trashed);\r\n        },\r\n        mkdir: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n\t\t\tthis.touch(path);\r\n        },\r\n        opendir: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            //succ: iterator<string> // next()\r\n            // options: {includeTrashed:Boolean}\r\n            options=options||{};\r\n            var inf=this.getDirInfo(path);\r\n            var res=[]; //this.dirFromFstab(path);\r\n            for (var i in inf) {\r\n                assert(inf[i]);\r\n                if (!inf[i].trashed || options.includeTrashed) res.push(i);\r\n            }\r\n            return assert.is(res,Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            this.assertWriteable(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) {\r\n                throw new Error(path+\": cannot remove. It is root of this FS.\");\r\n            }\r\n            this.assertExist(path,{includeTrashed:options.noTrash });\r\n            if (P.isDir(path)) {\r\n                var lis=this.opendir(path);\r\n                if (lis.length>0) {\r\n                    this.err(path,\"Directory not empty\");\r\n                }\r\n                if (options.noTrash) {\r\n                    this.removeItem(path);\r\n                }\r\n            } else {\r\n                this.removeItem(path);\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            if (options.noTrash) {\r\n                this.removeEntryWithoutTrash(pinfo, parent, P.name(path) );\r\n            } else {\r\n                this.removeEntry(pinfo, parent, P.name(path) );\r\n            }\r\n        },\r\n        exists: function (path,options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            var name=P.name(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) return true;\r\n            var pinfo=this.getDirInfo(parent);\r\n            var res=pinfo[name];\r\n            if (res && res.trashed && this.itemExists(path)) {\r\n                if (this.isDir(path)) {\r\n\r\n                } else {\r\n                    //assert.fail(\"Inconsistent \"+path+\": trashed, but remains in storage\");\r\n                }\r\n            }\r\n            if (!res && this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": not exists in metadata, but remains in storage\");\r\n            }\r\n            if (res && !res.trashed && !res.link && !this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": exists in metadata, but not in storage\");\r\n            }\r\n            if (res && !options.includeTrashed) {\r\n                res=!res.trashed;\r\n            }\r\n            return !!res;\r\n        },\r\n        link: function(path, to, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertWriteable(path);\r\n            if (this.exists(path)) this.err(path,\"file exists\");\r\n            if (P.isDir(path) && !P.isDir(to)) {\r\n                this.err(path,\" can not link to file \"+to);\r\n            }\r\n            if (!P.isDir(path) && P.isDir(to)) {\r\n                this.err(path,\" can not link to directory \"+to);\r\n            }\r\n            var m={};//assert(this.getMetaInfo(path));\r\n            m.link=to;\r\n            m.lastUpdate=now();\r\n            this.setMetaInfo(path, m);\r\n            //console.log(this.getMetaInfo(path));\r\n            //console.log(this.storage);\r\n            //console.log(this.getMetaInfo(P.up(path)));\r\n            assert(this.exists(path));\r\n            assert(this.isLink(path));\r\n        },\r\n        isLink: function (path) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (!this.exists(path)) return null;\r\n            var m=assert(this.getMetaInfo(path));\r\n            return m.link;\r\n        },\r\n        touch: function (path) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n            if (!this.itemExists(path)) {\r\n                if (P.isDir(path)) {\r\n                    if (this.dirCache) this.dirCache[path]={};\r\n                    this.setItem(path,\"{}\");\r\n                } else {\r\n                    this.setItem(path,\"\");\r\n                }\r\n            }\r\n            var parent=up(path);\r\n            if (parent!=null) {\r\n                if (this.inMyFS(parent)) {\r\n                    var pinfo=this.getDirInfo(parent);\r\n                    this._touch(pinfo, parent , P.name(path), false);\r\n                } else {\r\n                    assert(this.getRootFS()!==this);\r\n                    this.getRootFS().resolveFS(parent).touch(parent);\r\n                }\r\n            }\r\n        },\r\n        getURL: function (path) {\r\n            return this.getContent(path).toURL();\r\n        },\r\n        opendirEx: function (path,options) {\r\n            assert.is(path,P.AbsDir);\r\n            options=options||{};\r\n            var res={};\r\n            var d=this.getDirInfo(path);\r\n            if (options.includeTrashed) {\r\n                //console.log(\"INCLTR\",d);\r\n                return d;\r\n            }\r\n            for (var k in d) {\r\n                if (d[k].trashed) continue;\r\n                res[k]=d[k];\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    return LSFS;\r\n\r\n});\r\n\r\n/**\r\n *\r\n * jquery.binarytransport.js\r\n *\r\n * @description. jQuery ajax transport for making binary data type requests.\r\n * @version 1.0\r\n * @author Henry Algus <henryalgus@gmail.com>\r\n *\r\n */\r\n\r\n// use this transport for \"binary\" data type\r\nif (typeof $!==\"undefined\")\r\n$.ajaxTransport(\"+binary\", function(options, originalOptions, jqXHR){\r\n    // check for conditions and support for blob / arraybuffer response type\r\n    if (window.FormData && ((options.dataType && (options.dataType == 'binary')) || (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) || (window.Blob && options.data instanceof Blob)))))\r\n    {\r\n        return {\r\n            // create new XMLHttpRequest\r\n            send: function(headers, callback){\r\n                // setup all variables\r\n                var xhr = new XMLHttpRequest(),\r\n                url = options.url,\r\n                type = options.type,\r\n                async = options.async || true,\r\n                // blob or arraybuffer. Default is blob\r\n                dataType = options.responseType || \"blob\",\r\n                data = options.data || null,\r\n                username = options.username || null,\r\n                password = options.password || null;\r\n\r\n                xhr.addEventListener('load', function(){\r\n                    var data = {};\r\n                    data[options.dataType] = xhr.response;\r\n                    // make callback and send data\r\n                    callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\r\n                });\r\n\r\n                xhr.open(type, url, async, username, password);\r\n\r\n                // setup custom headers\r\n                for (var i in headers ) {\r\n                    xhr.setRequestHeader(i, headers[i] );\r\n                }\r\n\r\n                xhr.responseType = dataType;\r\n                xhr.send(data);\r\n            },\r\n            abort: function(){\r\n                jqXHR.abort();\r\n            }\r\n        };\r\n    }\r\n});\r\n\r\ndefine(\"jquery.binarytransport\", function(){});\r\n\r\ndefine('WebFS',[\"FSClass\",\"jquery.binarytransport\",\"DeferredUtil\",\"Content\",\"PathUtil\"],\r\n        function (FS,j,DU,Content,P) {\r\n    // FS.mount(location.protocol+\"//\"+location.host+\"/\", \"web\");\r\n    var WebFS=function (){};\r\n    var p=WebFS.prototype=new FS;\r\n    FS.addFSType(\"web\", function () {\r\n        return new WebFS;\r\n    });\r\n    p.fstype=function () {return \"Web\";};\r\n    p.supportsSync=function () {return false;};\r\n    p.inMyFS=function (path) {\r\n        return P.isURL(path);\r\n    };\r\n    FS.delegateMethods(p, {\r\n        exists: function () {return true;},\r\n        getContentAsync: function (path){\r\n            var t=this;\r\n            return DU.promise(function (succ,err) {\r\n                $.get(path,function (blob) {\r\n                    var reader = new FileReader();\r\n                    reader.addEventListener(\"loadend\", function() {\r\n                        succ(Content.bin(reader.result, t.getContentType(path)));\r\n                    });\r\n                    reader.readAsArrayBuffer(blob);\r\n                },\"binary\").fail(err);\r\n            });\r\n        },\r\n        /*setContentAsync: function (path){\r\n\r\n        },*/\r\n        getURL: function (path) {\r\n            return path;\r\n        }\r\n    });\r\n\r\n    return WebFS;\r\n\r\n});\r\ndefine('Env',[\"assert\",\"PathUtil\"],function (A,P) {\r\n    var Env=function (value) {\r\n        this.value=value;\r\n    };\r\n    Env.prototype={\r\n            expand:function (str) {\r\n                A.is(str,String);\r\n                var t=this;\r\n                return str.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (a,key) {\r\n                    return t.get(key);\r\n                });\r\n            },\r\n            expandPath:function (path) {\r\n                A.is(path,String);\r\n                path=this.expand(path);\r\n                path=path.replace(/\\/+/g,\"/\");\r\n                path=path.replace(/^[a-z][a-z]+:\\//, function (r) { return r+\"/\"; } );\r\n                return A.is(path,P.Path);\r\n            },\r\n            get: function (key) {\r\n                return this.value[key];\r\n            },\r\n            set: function (key, value) {\r\n                this.value[key]=value;\r\n            }\r\n    };\r\n    return Env;\r\n});\r\ndefine('SFile',[\"extend\",\"assert\",\"PathUtil\",\"Util\",\"Content\",\"FSClass\",\"FileSaver\",\"DeferredUtil\"],\r\nfunction (extend,A,P,Util,Content,FSClass,saveAs,DU) {\r\n\r\nvar SFile=function (rootFS, path) {\r\n    A.is(path, P.Absolute);\r\n    //A(fs && fs.getReturnTypes, fs);\r\n    this._path=path;\r\n    this.rootFS=rootFS;\r\n    this.fs=rootFS.resolveFS(path);\r\n    /*this.act={};// path/fs after follwed symlink\r\n    this.act.path=this.fs.resolveLink(path);\r\n    this.act.fs=rootFS.resolveFS(this.act.path);\r\n    A.is(this.act, {fs:FSClass, path:P.Absolute});*/\r\n    if (this.isDir() && !P.isDir(path)) {\r\n        this._path+=P.SEP;\r\n    }\r\n};\r\nSFile.is=function (path) {\r\n    return path && typeof (path.isSFile)==\"function\" && path.isSFile();\r\n};\r\nfunction getPath(f) {\r\n    if (SFile.is(f)) {\r\n        return f.path();\r\n    } else {\r\n        A.is(f,P.Absolute);\r\n        return f;\r\n    }\r\n}\r\nSFile.prototype={\r\n    isSFile: function (){return true;},\r\n    setPolicy: function (p) {\r\n        if (this.policy) throw new Error(\"policy already set\");\r\n        this.policy=p;\r\n        return this._clone();\r\n    },\r\n    getPolicy: function (p) {\r\n        return this.policy;\r\n    },\r\n    _clone: function (){\r\n        return this._resolve(this.path());\r\n    },\r\n    _resolve: function (path, options) {\r\n        var res;\r\n        options=options||{};\r\n        if (SFile.is(path)) {\r\n            res=path;\r\n        } else {\r\n            A.is(path,P.Absolute);\r\n            var topdir;\r\n            var policy=options.policy || this.policy;\r\n            if (policy && (topdir=policy.topDir)) {\r\n                if (topdir.path) topdir=topdir.path();\r\n                if (!P.startsWith(path, topdir)) {\r\n                    throw new Error(path+\": cannot access. Restricted to \"+topdir);\r\n                }\r\n            }\r\n            res=new SFile(this.rootFS, path);\r\n            res.policy=policy;\r\n        }\r\n        if (res.policy) {\r\n            return Util.privatize(res);\r\n        } else {\r\n            return res;\r\n        }\r\n    },\r\n    contains: function (file) {\r\n        A(SFile.is(file),file+\" shoud be a SFile object.\");\r\n        if (!this.isDir()) return false;\r\n        return P.startsWith( file.path(), this.path());\r\n    },\r\n    path: function () {\r\n        return this._path;\r\n    },\r\n    name: function () {\r\n        return P.name(this.path());\r\n    },\r\n    truncExt: function (ext) {\r\n        return P.truncExt(this.path(),ext);\r\n    },\r\n    ext: function () {\r\n        return P.ext(this.path());\r\n    },\r\n    relPath: function (base) {\r\n        // base should be SFile or Path from rootFS\r\n        var bp=(base.path ?\r\n                base.path() :\r\n                base );\r\n        return P.relPath(this.path(), A.is(bp,P.Absolute) );\r\n    },\r\n    up: function () {\r\n        var pathR=this.path();\r\n        var pa=P.up(pathR);\r\n        if (pa==null) return null;\r\n        return this._resolve(pa);\r\n    },\r\n    rel: function (relPath) {\r\n        A.is(relPath, P.Relative);\r\n        this.assertDir();\r\n        var pathR=this.path();\r\n        return this._resolve(P.rel(pathR, relPath));\r\n    },\r\n    sibling: function (n) {\r\n        return this.up().rel(n);\r\n    },\r\n    startsWith: function (pre) {\r\n        return P.startsWith(this.name(),pre);\r\n    },\r\n    endsWith: function (post) {\r\n        return P.endsWith(this.name(),post);\r\n    },\r\n    equals:function (o) {\r\n        return (o && typeof o.path==\"function\" && o.path()==this.path());\r\n    },\r\n    toString:function (){\r\n        return this.path();\r\n    },\r\n    //Common\r\n    touch: function () {\r\n        return this.act.fs.touch(this.act.path);\r\n    },\r\n    isReadOnly: function () {\r\n        return this.act.fs.isReadOnly(this.act.path);\r\n    },\r\n    isTrashed:function () {\r\n        var m=this.metaInfo();\r\n        if (!m) return false;\r\n        return m.trashed;\r\n    },\r\n    metaInfo: function () {\r\n        if (arguments.length==0) {\r\n            return this.getMetaInfo.apply(this,arguments);\r\n        } else {\r\n            return this.setMetaInfo.apply(this,arguments);\r\n        }\r\n    },\r\n    getMetaInfo: function (options) {\r\n        return this.act.fs.getMetaInfo(this.act.path,options);\r\n    },\r\n    setMetaInfo: function (info, options) {\r\n        return this.act.fs.setMetaInfo(this.act.path,info, options);\r\n    },\r\n    getDirTree: function (options) {\r\n        return this.act.fs.getDirTree(this.act.path, options);\r\n    },\r\n    assertExists: function () {\r\n        A(this.exists(),this.path()+\" does not exist.\");\r\n    },\r\n    lastUpdate:function () {\r\n        this.assertExists();\r\n        return this.metaInfo().lastUpdate;\r\n    },\r\n    exists: function (options) {\r\n        var args=Array.prototype.slice.call(arguments);\r\n        if (typeof args[0]===\"function\") {\r\n            var f=args.shift();\r\n            return DU.resolve(this.exists.apply(this,args)).then(f);\r\n        }\r\n        options=options||{};\r\n        var p=this.fs.exists(this.path(),options);\r\n        if (p || options.noFollowLink) {\r\n            return p;\r\n        } else {\r\n            return this.act.fs.exists(this.act.path,{noFollowLink:true});\r\n        }\r\n    },\r\n    rm: function (options) {\r\n        //   ln /test/c /a/b/\r\n        //   rm a/b/c/\r\n        //   rm a/b/c/d\r\n        var t=this;\r\n        options=options||{};\r\n        if (this.isLink()) {\r\n            return DU.resolve(this.fs.rm(this.path(),options));\r\n        }\r\n        /*if (!this.exists({noFollowLink:true})) {\r\n            return this.act.fs.rm(this.act.path, options);\r\n        }*/\r\n        var a;\r\n        if (this.isDir() && (options.recursive||options.r)) {\r\n            a=this.each(function (f) {\r\n                return f.rm(options);\r\n            });\r\n        } else {\r\n            a=DU.resolve();\r\n        }\r\n        return a.then(function () {\r\n            return t.act.fs.rm(t.act.path, options);\r\n        });\r\n        //var pathT=this.path();\r\n        //this.fs.rm(pathT, options);\r\n    },\r\n    removeWithoutTrash: function (options) {\r\n        options=options||{};\r\n        options.noTrash=true;\r\n        this.rm(options);\r\n    },\r\n    isDir: function () {\r\n        return this.act.fs.isDir(this.act.path);\r\n    },\r\n    // File\r\n    text:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n\t\t\treturn this.getText(f);\r\n\t\t}\r\n        if (arguments.length>0) {\r\n            return this.setText(arguments[0]);\r\n        } else {\r\n            return this.getText();\r\n        }\r\n    },\r\n    setText:function (t) {\r\n        A.is(t,String);\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        var ct=this.contentType({def:null});\r\n        //if (this.isText()) {\r\n        if (ct!==null && !ct.match(/^text/) && Content.looksLikeDataURL(t)) {\r\n            // bad knowhow: if this is a binary file apparently, convert to URL\r\n            return DU.throwNowIfRejected(this.setContent(Content.url(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.url(t)));\r\n        } else {\r\n            // if use fs.setContentAsync, the error should be handled by .fail\r\n            // setText should throw error immediately (Why? maybe old style of text(\"foo\") did it so...)\r\n            return DU.throwNowIfRejected(this.setContent(Content.plainText(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.plainText(t)));\r\n        }\r\n    },\r\n    appendText:function (t) {\r\n        A.is(t,String);\r\n        //if (this.isText()) {\r\n        return this.act.fs.appendContent(this.act.path, Content.plainText(t));\r\n        /*} else {\r\n            throw new Error(\"append only for text file\");\r\n        }*/\r\n    },\r\n    getContent: function (f) {\r\n        if (typeof f==\"function\") {\r\n            return this.act.fs.getContentAsync(this.act.path).then(f);\r\n        }\r\n        return this.act.fs.getContent(this.act.path);\r\n    },\r\n    setContent: function (c) {\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        // why setContentAsync? AsyncDU.resolvesyncsync...PromiseJQ\r\n        // fs2/promise.js\r\n        return this.act.fs.setContentAsync(this.act.path,c);\r\n    },\r\n\r\n    getText:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n    \t\tvar t=this;\r\n    \t    return this.getContent(forceText).then(f);\r\n    \t}\r\n        return forceText(this.act.fs.getContent(this.act.path));\r\n        /*if (this.isText()) {\r\n            return this.act.fs.getContent(this.act.path).toPlainText();\r\n        } else {\r\n            return this.act.fs.getContent(this.act.path).toURL();\r\n        }*/\r\n        function forceText(c) {\r\n\t    \t//if (t.isText()) {\r\n            try {\r\n                return c.toPlainText();\r\n            } catch(e) {\r\n    \t    \treturn c.toURL();\r\n    \t    }\r\n        }\r\n    },\r\n    getDataURL: function (f) {\r\n        if (typeof f===\"function\") {\r\n            return this.getContent(function (c) {\r\n                return c.toURL();\r\n            });\r\n        }\r\n        return this.getContent().toURL();\r\n    },\r\n    setDataURL: function (u) {\r\n        return this.setContent(Content.url(u));\r\n    },\r\n    dataURL:function (d) {\r\n        if (typeof d===\"string\") return this.setDataURL(d);\r\n        if (typeof d===\"function\") return this.getDataURL(d);\r\n        return this.getDataURL();\r\n    },\r\n    isText: function () {\r\n        return this.act.fs.isText(this.act.path);\r\n    },\r\n    contentType: function (options) {\r\n        return this.act.fs.getContentType(this.act.path,options);\r\n    },\r\n    bytes: function (b) {\r\n        if (Content.isBuffer(b)) return this.setBytes(b);\r\n        return this.getBytes();\r\n    },\r\n    setBytes:function (b) {\r\n        return this.act.fs.setContent(this.act.path, Content.bin(b,this.contentType()));\r\n    },\r\n    getBytes:function (options) {\r\n        options=options||{};\r\n        return this.act.fs.getContent(this.act.path).toBin(options.binType);\r\n    },\r\n    getURL: function () {\r\n        return this.act.fs.getURL(this.act.path);\r\n    },\r\n    lines:function (lines) {\r\n        if (lines instanceof Array) {//WRITE\r\n            return this.text(lines.join(\"\\n\"));\r\n        } else if (typeof lines===\"function\") {//READ async\r\n            return this.text(function (r) {\r\n                return lines(r.replace(/\\r/g,\"\").split(\"\\n\"));\r\n            });\r\n        }\r\n        return this.text().replace(/\\r/g,\"\").split(\"\\n\");\r\n    },\r\n    obj: function () {\r\n        var file=this;\r\n        if (arguments.length==0) {\r\n            var t=file.text();\r\n            if (!t) return null;\r\n            return JSON.parse(t);\r\n        } else {\r\n            file.text(JSON.stringify(A.is(arguments[0],Object) ));\r\n        }\r\n    },\r\n    copyFrom: function (src, options) {\r\n        return src.copyTo(this,options);\r\n    },\r\n    copyTo: function (dst, options) {\r\n        A(dst && dst.isSFile(),dst+\" is not a file\");\r\n        var src=this;\r\n        var options=options||{};\r\n        var srcIsDir=src.isDir();\r\n        var dstIsDir=dst.isDir();\r\n        if (!srcIsDir && dstIsDir) {\r\n            dst=dst.rel(src.name());\r\n            A(!dst.isDir(), dst+\" is a directory.\");\r\n            dstIsDir=false;\r\n        }\r\n        if (srcIsDir && !dstIsDir) {\r\n           this.err(\"Cannot move dir \"+src.path()+\" to file \"+dst.path());\r\n        } else if (!srcIsDir && !dstIsDir) {\r\n            if (options.echo) options.echo(src+\" -> \"+dst);\r\n            var res=this.act.fs.cp(this.act.path, dst.getResolvedLinkPath(),options);\r\n            res=DU.resolve(res);\r\n            if (options.a) {\r\n                return res.then(function () {\r\n                    return dst.setMetaInfo(src.getMetaInfo());\r\n                });\r\n            }\r\n            return res;\r\n        } else {\r\n            A(srcIsDir && dstIsDir,\"Both src and dst should be dir\");\r\n            return src.each(function (s) {\r\n                var r;\r\n                var dstf=dst.rel(s.name());\r\n                if (options.progress) {\r\n                    r=options.progress(dstf,{src:s,dst:dstf});\r\n                }\r\n                return DU.resolve(r).then(function () {\r\n                    return dstf.copyFrom(s, options);\r\n                });\r\n            });\r\n        }\r\n        //file.text(src.text());\r\n        //if (options.a) file.metaInfo(src.metaInfo());\r\n    },\r\n    moveFrom: function (src, options) {\r\n        var t=this;\r\n        return t.exists(function (ex) {\r\n            return t.copyFrom(src,options).then(function () {\r\n                return src.rm({recursive:true});\r\n            },function (e) {\r\n                // rollback\r\n                if (!ex) return t.exists(function (ex) {\r\n                    if (ex) return t.rm({recursive:true});\r\n                }).then(function () {throw e;});\r\n                throw e;\r\n            });\r\n        });\r\n    },\r\n    moveTo: function (dst, options) {\r\n        return dst.moveFrom(this,options);\r\n    },\r\n    // Dir\r\n    assertDir:function () {\r\n        A.is(this.path(),P.Dir);\r\n        return this;\r\n    },\r\n    /*files:function (f,options) {\r\n        var dir=this.assertDir();\r\n        var res=[];\r\n        this.each(function (f) {\r\n            res.add(f);\r\n        },options);\r\n        return res;\r\n    },*/\r\n    each:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls,f);// ls.forEach(f)\r\n        });\r\n    },\r\n    eachrev:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls.reverse(),f);// ls.forEach(f)\r\n        });\r\n    },\r\n    recursive:function (fun,options) {\r\n        var dir=this.assertDir();\r\n        options=dir.convertOptions(options);\r\n        return dir.each(function (f) {\r\n            if (f.isDir()) return f.recursive(fun,options);\r\n            else return fun(f);\r\n        },options);\r\n    },\r\n    _listFiles:function (options,async) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        if (async) {\r\n            return this.act.fs.opendirAsync(this.act.path, options).\r\n            then(cvt);\r\n        } else {\r\n            return cvt( this.act.fs.opendir(this.act.path, options));\r\n        }\r\n        function cvt(di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        }\r\n    },\r\n    listFilesAsync:function (options) {\r\n        return this._listFiles(options,true);\r\n        /*\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        return this.act.fs.opendirAsync(this.act.path, options).\r\n        then(function (di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        });*/\r\n    },\r\n    listFiles:function (options) {\r\n        return this._listFiles(options,false);\r\n        /*var args=Array.prototype.slice.call(arguments);\r\n        return DU.assertResolved(this.listFilesAsync.apply(this,args));*/\r\n    },\r\n    ls:function (options) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        if (!options) {\r\n            return this.act.fs.opendir(this.act.path, options);\r\n        }\r\n        var res=dir.listFiles(options);\r\n        return res.map(function (f) {\r\n            return f.name();\r\n        });\r\n    },\r\n    convertOptions:function(o) {\r\n        var options=Util.extend({},o);\r\n        var dir=this.assertDir();\r\n        var pathR=this.path();\r\n        var excludes=options.excludes || {};\r\n        if (typeof excludes===\"function\") {\r\n            options.excludesF=excludes;\r\n        } else if (typeof excludes===\"object\") {\r\n            if (excludes instanceof Array) {\r\n                var nex={};\r\n                excludes.forEach(function (e) {\r\n                    if (P.startsWith(e,\"/\")) {\r\n                        nex[e]=1;\r\n                    } else {\r\n                        nex[pathR+e]=1;\r\n                    }\r\n                });\r\n                excludes=nex;\r\n            }\r\n            options.excludesF=function (f) {\r\n                return excludes[f.path()];\r\n            };\r\n        }\r\n        return A.is(options,{excludesF:Function});\r\n    },\r\n    mkdir: function () {\r\n        return this.touch();\r\n    },\r\n    link: function (to,options) {// % ln to path\r\n        if (this.exists()) throw new Error(this.path()+\": exists.\");\r\n        return this.act.fs.link(this.act.path,to.path(),options);\r\n    },\r\n    resolveLink:function () {\r\n        return this._resolve(this.act.path);\r\n    },\r\n    isLink: function () {\r\n        return this.fs.isLink(this.path());\r\n    },\r\n    getResolvedLinkPath: function () {\r\n        return this.act.path;\r\n    },\r\n    getFS:function () {\r\n        return this.act.fs;\r\n    },\r\n    observe: function (h) {\r\n        return this.getFS().getRootFS().addObserver(this.path(),h);\r\n    },\r\n    getBlob: function () {\r\n        return new Blob([this.bytes()],{type:this.contentType()});\r\n    },\r\n    setBlob: function (blob) {\r\n        var t=this;\r\n        return DU.promise(function (succ,err) {\r\n            var reader = new FileReader();\r\n            reader.addEventListener(\"loadend\", function() {\r\n                // reader.result contains the contents of blob as a typed array\r\n                DU.resolve(t.setBytes(reader.result)).then(succ);\r\n            });\r\n            reader.readAsArrayBuffer(blob);\r\n        });\r\n    },\r\n    size: function (f) {\r\n        if (!f) {\r\n            if (!this.isDir()) {\r\n                return this.act.fs.size(this.act.path);\r\n                //return this.getBytes().byteLength;\r\n            } else {\r\n                var sum=0;\r\n                this.each(function (f) {\r\n                    sum+=f.size();\r\n                });\r\n                return sum;\r\n            }\r\n        } else {\r\n            //TODO: async\r\n        }\r\n    },\r\n    download: function () {\r\n        if (this.isDir()) throw new Error(this+\": Download dir is not support yet. Use 'zip' instead.\");\r\n        saveAs(this.getBlob(),this.name());;\r\n    },\r\n    err: function () {\r\n        var a=Array.prototype.slice.call(arguments);\r\n        console.log.apply(console,a);\r\n        throw new Error(a.join(\"\"));\r\n    },\r\n    exportAsObject: function (options) {\r\n        var base=this;\r\n        var data={};\r\n        this.recursive(function (f) {\r\n            data[f.relPath(base)]=f.text();\r\n        },options);\r\n        var req={base:base.path(),data:data};\r\n        return req;\r\n    },\r\n    importFromObject: function (data, options) {\r\n        if (typeof data===\"string\") data=JSON.parse(data);\r\n        var data=data.data;\r\n        for (var k in data) {\r\n            this.rel(k).text(data[k]);\r\n        }\r\n    },\r\n    watch: function (_1,_2) {\r\n        var options={},handler=function(){};\r\n        if (typeof _1===\"object\") options=_1;\r\n        if (typeof _2===\"object\") options=_2;\r\n        if (typeof _1===\"function\") handler=_1;\r\n        if (typeof _2===\"function\") handler=_2;\r\n        var rfs=this.getFS().getRootFS();\r\n        //var t=this;\r\n        rfs.addObserver(this.path(),function (path, meta) {\r\n            handler(meta.eventType, rfs.get(path),meta );\r\n        });\r\n    }\r\n};\r\nObject.defineProperty(SFile.prototype,\"act\",{\r\n    get: function () {\r\n        if (this._act) return this._act;\r\n        this._act={};// path/fs after follwed symlink\r\n        this._act.path=this.fs.resolveLink(this._path);\r\n        this._act.fs=this.rootFS.resolveFS(this._act.path);\r\n        A.is(this._act, {fs:FSClass, path:P.Absolute});\r\n        return this._act;\r\n    }\r\n});\r\n\r\nreturn SFile;\r\n});\r\n\r\ndefine('RootFS',[\"assert\",\"FSClass\",\"PathUtil\",\"SFile\"], function (assert,FS,P,SFile) {\r\n    var RootFS=function (defaultFS){\r\n        assert.is(defaultFS,FS);\r\n        this.mount(null, defaultFS);\r\n    };\r\n    var dst=RootFS.prototype;\r\n    var p={\r\n            err: function (path, mesg) {\r\n                throw new Error(path+\": \"+mesg);\r\n            },\r\n            // mounting\r\n            fstab: function () {\r\n                return this._fstab=this._fstab||[];//[{fs:this, path:P.SEP}];\r\n            },\r\n            unmount: function (path, options) {\r\n                assert.is(arguments,[P.AbsDir] );\r\n                var t=this.fstab();\r\n                console.log(t);\r\n                for (var i=0; i<t.length; i++) {\r\n                    if (t[i].mountPoint==path) {\r\n                        t.splice(i,1);\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            availFSTypes:function (){\r\n                return FS.availFSTypes();\r\n            },\r\n            mount: function (path, fs, options) {\r\n                if (typeof fs==\"string\") {\r\n                    var fact=assert( FS.availFSTypes()[fs] ,\"fstype \"+fs+\" is undefined.\");\r\n                    fs=fact(path, options||{});\r\n                }\r\n                assert.is(fs,FS);\r\n                fs.mounted(this, path);\r\n                this.fstab().unshift(fs);\r\n            },\r\n            resolveFS:function (path, options) {\r\n                assert.is(path,P.Absolute);\r\n                var res;\r\n                this.fstab().forEach(function (fs) {\r\n                    if (res) return;\r\n                    if (fs.inMyFS(path)) {\r\n                        res=fs;\r\n                    }\r\n                });\r\n                if (!res) this.err(path,\"Cannot resolve\");\r\n                return assert.is(res,FS);\r\n            },\r\n            get: function (path) {\r\n                assert.is(path,P.Absolute);\r\n                return new SFile(this.resolveFS(path), path);\r\n            },\r\n            addObserver: function (_1,_2,_3) {\r\n                this.observers=this.observers||[];\r\n                var options={},path,f;\r\n                if (typeof _1===\"string\") path=_1;\r\n                if (typeof _2===\"string\") path=_2;\r\n                if (typeof _3===\"string\") path=_3;\r\n                if (typeof _1===\"object\") options=_1;\r\n                if (typeof _2===\"object\") options=_2;\r\n                if (typeof _3===\"object\") options=_3;\r\n                if (typeof _1===\"function\") f=_1;\r\n                if (typeof _2===\"function\") f=_2;\r\n                if (typeof _3===\"function\") f=_3;\r\n                assert.is(path,String);\r\n                assert.is(f,Function);\r\n                var fs=this.resolveFS(path);\r\n                var remover=fs.onAddObserver(path,options);\r\n                var observers=this.observers;\r\n                var observer={\r\n                    path:path,\r\n                    handler:f,\r\n                    remove: function () {\r\n                        var i=observers.indexOf(this);\r\n                        observers.splice(i,1);\r\n                        if (remover) remover.remove();\r\n                    }\r\n                };\r\n                this.observers.push(observer);\r\n                return observer;\r\n            },\r\n            notifyChanged: function (path,metaInfo) {\r\n                if (!this.observers) return;\r\n                this.observers.forEach(function (ob) {\r\n                    if (P.isChildOf(path,ob.path)) {\r\n                        ob.handler(path,metaInfo);\r\n                    }\r\n                });\r\n            },\r\n            getRootFS:function () {\r\n                return this;\r\n            }\r\n    };\r\n    for (var i in p) {\r\n        dst[i]=p[i];\r\n    }\r\n    return RootFS;\r\n});\r\n\r\ndefine('zip',[\"SFile\",/*\"jszip\",*/\"FileSaver\",\"Util\",\"DeferredUtil\"],\r\nfunction (SFile,/*JSZip,*/fsv,Util,DU) {\r\n    var zip={};\r\n    zip.setJSZip=function (JSZip) {\r\n        zip.JSZip=JSZip;\r\n        if (!DU.external.Promise) {\r\n            DU.external.Promise=JSZip.external.Promise;\r\n        }\r\n    };\r\n    if (typeof JSZip!==\"undefined\") zip.setJSZip(JSZip);\r\n    zip.zip=function (dir,dstZip,options) {\r\n        if (!SFile.is(dstZip)) options=dstZip;\r\n        options=options||{};\r\n        var jszip = new zip.JSZip();\r\n        function loop(dst, dir) {\r\n            return dir.each(function (f) {\r\n                var r=DU.resolve();\r\n                if (options.progress) {\r\n                    r=options.progress(f);\r\n                }\r\n                return r.then(function () {\r\n                    if (f.isDir()) {\r\n                        var sf=dst.folder(f.name().replace(/[\\/\\\\]$/,\"\"));\r\n                        return loop(sf, f);\r\n                    } else {\r\n                        return f.getContent(function (c) {\r\n                            dst.file(f.name(),c.toArrayBuffer());\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return loop(jszip, dir).then(function () {\r\n            return DU.resolve(jszip.generateAsync({\r\n                type:\"arraybuffer\",\r\n                compression:\"DEFLATE\"\r\n            }));\r\n        }).then(function (content) {\r\n            //console.log(\"zip.con\",content);\r\n            if (SFile.is(dstZip)) {\r\n                return dstZip.setBytes(content);\r\n            } else {\r\n                saveAs(\r\n                    new Blob([content],{type:\"application/zip\"}),\r\n                    dir.name().replace(/[\\/\\\\]$/,\"\")+\".zip\"\r\n                );\r\n            }\r\n        });\r\n    };\r\n    zip.unzip=function (arrayBuf,destDir,options) {\r\n        var c;\r\n        var status={};\r\n        options=options||{};\r\n        if (SFile.is(arrayBuf)) {\r\n        \tc=arrayBuf.getContent();\r\n        \tarrayBuf=c.toArrayBuffer();\r\n        }\r\n        if (!options.onCheckFile) {\r\n            options.onCheckFile=function (f) {\r\n                if (options.overwrite) {\r\n                    return f;\r\n                } else {\r\n                    if (f.exists()) {\r\n                        return false;\r\n                    }\r\n                    return f;\r\n                }\r\n            };\r\n        }\r\n        var jszip=new zip.JSZip();\r\n        return DU.resolve(jszip.loadAsync(arrayBuf)).then(function () {\r\n            return DU.each(jszip.files,function (key,zipEntry) {\r\n                //var zipEntry=jszip.files[i];\r\n                var buf,dest;\r\n                return DU.resolve(zipEntry.async(\"arraybuffer\")).then(function (_buf) {\r\n                    buf=_buf;\r\n                    dest=destDir.rel(zipEntry.name);\r\n                    if (options.progress) {\r\n                        return DU.resolve(options.progress(dest));\r\n                    }\r\n                }).then(function () {\r\n                    console.log(\"Inflating\",zipEntry.name);\r\n                    if (dest.isDir()) return;\r\n                    var s={\r\n                        file:dest,\r\n                        status:\"uploaded\"\r\n                    };\r\n                    status[dest.path()]=s;\r\n                    var c=FS.Content.bin( buf, dest.contentType() );\r\n                    var res=options.onCheckFile(dest,c);\r\n                    if (res===false) {\r\n                        s.status=\"cancelled\";\r\n                        dest=null;\r\n                    }\r\n                    if (SFile.is(res)) {\r\n                        if (dest.path()!==res.path()) s.redirectedTo=res;\r\n                        dest=res;\r\n                    }\r\n                    if (dest) return dest.setContent(c);\r\n                });\r\n            });\r\n        }).then(function () {\r\n            console.log(\"unzip done\",status);\r\n            return status;\r\n        });\r\n    };\r\n    return zip;\r\n});\r\n\r\n/*(function (global, factory) {\r\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\r\n\ttypeof define === 'function' && define.amd ? define(factory) :\r\n\t(factory());\r\n}(this, (function () { 'use strict';*/\r\n// modified from https://github.com/taylorhakes/promise-polyfill/blob/master/dist/polyfill.js\r\n// if promise resolved immediately, it will run f of then(f)\r\n// P.resolve(5).then(e=>console.log(e)); console.log(3)  ->  show 5 3, while original is 3 5\r\ndefine('promise',[], function() {\r\n\r\n/**\r\n * @this {Promise}\r\n */\r\nfunction finallyConstructor(callback) {\r\n  var constructor = this.constructor;\r\n  return this.then(\r\n    function(value) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        return value;\r\n      });\r\n    },\r\n    function(reason) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        // @ts-ignore\r\n        return constructor.reject(reason);\r\n      });\r\n    }\r\n  );\r\n}\r\n\r\n// Store setTimeout reference so promise-polyfill will be unaffected by\r\n// other code modifying setTimeout (like sinon.useFakeTimers())\r\nvar setTimeoutFunc = setTimeout;\r\n\r\nfunction isArray(x) {\r\n  return Boolean(x && typeof x.length !== 'undefined');\r\n}\r\n\r\nfunction noop() {}\r\n\r\n// Polyfill for Function.prototype.bind\r\nfunction bind(fn, thisArg) {\r\n  return function() {\r\n    fn.apply(thisArg, arguments);\r\n  };\r\n}\r\n\r\n/**\r\n * @constructor\r\n * @param {Function} fn\r\n */\r\nfunction Promise(fn) {\r\n  if (!(this instanceof Promise))\r\n    throw new TypeError('Promises must be constructed via new');\r\n  if (typeof fn !== 'function') throw new TypeError('not a function');\r\n  /** @type {!number} */\r\n  this._state = 0;\r\n  /** @type {!boolean} */\r\n  this._handled = false;\r\n  /** @type {Promise|undefined} */\r\n  this._value = undefined;\r\n  /** @type {!Array<!Function>} */\r\n  this._deferreds = [];\r\n\r\n  doResolve(fn, this);\r\n}\r\n\r\nfunction handle(self, deferred) {\r\n  while (self._state === 3) {\r\n    self = self._value;\r\n  }\r\n  if (self._state === 0) {\r\n    self._deferreds.push(deferred);\r\n    return;\r\n  }\r\n  self._handled = true;\r\n  Promise._immediateFn(function() {\r\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n    if (cb === null) {\r\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n      return;\r\n    }\r\n    var ret;\r\n    try {\r\n      ret = cb(self._value);\r\n    } catch (e) {\r\n      reject(deferred.promise, e);\r\n      return;\r\n    }\r\n    resolve(deferred.promise, ret);\r\n  });\r\n}\r\n\r\nfunction resolve(self, newValue) {\r\n  try {\r\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n    if (newValue === self)\r\n      throw new TypeError('A promise cannot be resolved with itself.');\r\n    if (\r\n      newValue &&\r\n      (typeof newValue === 'object' || typeof newValue === 'function')\r\n    ) {\r\n      var then = newValue.then;\r\n      if (newValue instanceof Promise) {\r\n        self._state = 3;\r\n        self._value = newValue;\r\n        finale(self);\r\n        return;\r\n      } else if (typeof then === 'function') {\r\n        doResolve(bind(then, newValue), self);\r\n        return;\r\n      }\r\n    }\r\n    self._state = 1;\r\n    self._value = newValue;\r\n    finale(self);\r\n  } catch (e) {\r\n    reject(self, e);\r\n  }\r\n}\r\n\r\nfunction reject(self, newValue) {\r\n  self._state = 2;\r\n  self._value = newValue;\r\n  finale(self);\r\n}\r\n\r\nfunction finale(self) {\r\n  if (self._state === 2 && self._deferreds.length === 0) {\r\n    Promise._immediateFn(function() {\r\n      if (!self._handled) {\r\n        Promise._unhandledRejectionFn(self._value);\r\n      }\r\n    });\r\n  }\r\n\r\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n    handle(self, self._deferreds[i]);\r\n  }\r\n  self._deferreds = null;\r\n}\r\n\r\n/**\r\n * @constructor\r\n */\r\nfunction Handler(onFulfilled, onRejected, promise) {\r\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n  this.promise = promise;\r\n}\r\n\r\n/**\r\n * Take a potentially misbehaving resolver function and make sure\r\n * onFulfilled and onRejected are only called once.\r\n *\r\n * Makes no guarantees about asynchrony.\r\n */\r\nfunction doResolve(fn, self) {\r\n  var done = false;\r\n  try {\r\n    fn(\r\n      function(value) {\r\n        if (done) return;\r\n        done = true;\r\n        resolve(self, value);\r\n      },\r\n      function(reason) {\r\n        if (done) return;\r\n        done = true;\r\n        reject(self, reason);\r\n      }\r\n    );\r\n  } catch (ex) {\r\n    if (done) return;\r\n    done = true;\r\n    reject(self, ex);\r\n  }\r\n}\r\n\r\nPromise.prototype['catch'] = function(onRejected) {\r\n  return this.then(null, onRejected);\r\n};\r\n\r\nPromise.prototype.then = function(onFulfilled, onRejected) {\r\n  // @ts-ignore\r\n  var prom = new this.constructor(noop);\r\n\r\n  handle(this, new Handler(onFulfilled, onRejected, prom));\r\n  return prom;\r\n};\r\n\r\nPromise.prototype['finally'] = finallyConstructor;\r\n\r\nPromise.all = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.all accepts an array'));\r\n    }\r\n\r\n    var args = Array.prototype.slice.call(arr);\r\n    if (args.length === 0) return resolve([]);\r\n    var remaining = args.length;\r\n\r\n    function res(i, val) {\r\n      try {\r\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n          var then = val.then;\r\n          if (typeof then === 'function') {\r\n            then.call(\r\n              val,\r\n              function(val) {\r\n                res(i, val);\r\n              },\r\n              reject\r\n            );\r\n            return;\r\n          }\r\n        }\r\n        args[i] = val;\r\n        if (--remaining === 0) {\r\n          resolve(args);\r\n        }\r\n      } catch (ex) {\r\n        reject(ex);\r\n      }\r\n    }\r\n\r\n    for (var i = 0; i < args.length; i++) {\r\n      res(i, args[i]);\r\n    }\r\n  });\r\n};\r\n\r\nPromise.resolve = function(value) {\r\n  if (value && typeof value === 'object' && value.constructor === Promise) {\r\n    return value;\r\n  }\r\n\r\n  return new Promise(function(resolve) {\r\n    resolve(value);\r\n  });\r\n};\r\n\r\nPromise.reject = function(value) {\r\n  return new Promise(function(resolve, reject) {\r\n    reject(value);\r\n  });\r\n};\r\n\r\nPromise.race = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.race accepts an array'));\r\n    }\r\n\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n      Promise.resolve(arr[i]).then(resolve, reject);\r\n    }\r\n  });\r\n};\r\n\r\n// Use polyfill for setImmediate for performance gains\r\nPromise._immediateFn = function (fn) {fn();};/*\r\n  // @ts-ignore\r\n  (typeof setImmediate === 'function' &&\r\n    function(fn) {\r\n      // @ts-ignore\r\n      setImmediate(fn);\r\n    }) ||\r\n  function(fn) {\r\n    setTimeoutFunc(fn, 0);\r\n  };\r\n*/\r\n\r\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(/*err*/) {\r\n  if (typeof console !== 'undefined' && console) {\r\n    //console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\r\n  }\r\n};\r\n/** @suppress {undefinedVars} */\r\n/*\r\nvar globalNS = (function() {\r\n  // the only reliable means to get the global object is\r\n  // `Function('return this')()`\r\n  // However, this causes CSP violations in Chrome apps.\r\n  if (typeof self !== 'undefined') {\r\n    return self;\r\n  }\r\n  if (typeof window !== 'undefined') {\r\n    return window;\r\n  }\r\n  if (typeof global !== 'undefined') {\r\n    return global;\r\n  }\r\n  throw new Error('unable to locate global object');\r\n})();\r\n\r\nif (!('Promise' in globalNS)) {\r\n  globalNS['Promise'] = Promise;\r\n} else if (!globalNS.Promise.prototype['finally']) {\r\n  globalNS.Promise.prototype['finally'] = finallyConstructor;\r\n}*/\r\nreturn Promise;\r\n});\r\n\r\ndefine('FS',[\"FSClass\",\"NativeFS\",\"LSFS\", \"WebFS\", \"PathUtil\",\"Env\",\"assert\",\"SFile\",\"RootFS\",\"Content\",\"zip\",\"DeferredUtil\",\"promise\"],\r\n        function (FSClass,NativeFS,LSFS,WebFS, P,Env,A,SFile,RootFS,Content,zip,DU,PR) {\r\n    var FS={};\r\n    FS.assert=A;\r\n    FS.Content=Content;\r\n    FS.Class=FSClass;\r\n    FS.DeferredUtil=DU;\r\n    if (!DU.config.useJQ) {\r\n        DU.external.Promise=PR;\r\n    }\r\n    FS.Env=Env;\r\n    FS.LSFS=LSFS;\r\n    FS.NativeFS=NativeFS;\r\n    FS.PathUtil=P;\r\n    FS.RootFS=RootFS;\r\n    FS.SFile=SFile;\r\n    FS.WebFS=WebFS;\r\n    FS.zip=zip;\r\n    //if (zip.JSZip) DU.external.Promise=zip.JSZip.external.Promise;\r\n    if (typeof window==\"object\") window.FS=FS;\r\n    var rootFS;\r\n    var env=new Env({});\r\n    FS.addFSType=FSClass.addFSType;\r\n    FS.availFSTypes=FSClass.availFSTypes;\r\n\r\n    FS.setEnvProvider=function (e) {\r\n        env=e;\r\n    };\r\n    FS.getEnvProvider=function () {\r\n        return env;\r\n    };\r\n    FS.setEnv=function (key, value) {\r\n        if (typeof key==\"object\") {\r\n            for (var k in key) {\r\n                env.set(k,key[k]);\r\n            }\r\n        }else {\r\n            env.set(key,value);\r\n        }\r\n    };\r\n    FS.getEnv=function (key) {\r\n        if (typeof key==\"string\") {\r\n            return env.get(key);\r\n        }else {\r\n            return env.value;\r\n        }\r\n    };\r\n    FS.init=function (fs) {\r\n        if (rootFS) return;\r\n        if (!fs) {\r\n            if (NativeFS.available) {\r\n                fs=new NativeFS();\r\n            } else if (typeof localStorage===\"object\") {\r\n                fs=new LSFS(localStorage);\r\n            } else if (typeof importScripts===\"function\") {\r\n                // Worker\r\n                /* global self*/\r\n                self.addEventListener(\"message\", function (e) {\r\n                    var data=e.data;\r\n                    if (typeof data===\"string\") {\r\n                        data=JSON.parse(data);\r\n                    }\r\n                    switch(data.type) {\r\n                    case \"upload\":\r\n                        FS.get(data.base).importFromObject(data.data);\r\n                        break;\r\n                    case \"observe\":\r\n                        rootFS.observe(data.path, function (path,meta) {\r\n                            self.postMessage(JSON.stringify({\r\n                                type: \"changed\",\r\n                                path: path,\r\n                                content: FS.get(path).text(),\r\n                                meta: meta\r\n                            }));\r\n                        });\r\n                        break;\r\n                    }\r\n                });\r\n                fs=LSFS.ramDisk();\r\n            }\r\n        }\r\n        rootFS=new RootFS(fs);\r\n    };\r\n    FS.getRootFS=function () {\r\n        FS.init();\r\n        return rootFS;\r\n    };\r\n    FS.get=function () {\r\n        FS.init();\r\n        return rootFS.get.apply(rootFS,arguments);\r\n    };\r\n    FS.expandPath=function () {\r\n        return env.expandPath.apply(env,arguments);\r\n    };\r\n    FS.resolve=function (path, base) {\r\n        FS.init();\r\n        if (SFile.is(path)) return path;\r\n        path=env.expandPath(path);\r\n        if (base && !P.isAbsolutePath(path)) {\r\n            base=env.expandPath(base);\r\n            return FS.get(base).rel(path);\r\n        }\r\n        return FS.get(path);\r\n    };\r\n    FS.mount=function () {\r\n        FS.init();\r\n        return rootFS.mount.apply(rootFS,arguments);\r\n    };\r\n    FS.unmount=function () {\r\n        FS.init();\r\n        return rootFS.unmount.apply(rootFS,arguments);\r\n    };\r\n    FS.isFile=function (f) {\r\n        return SFile.is(f);\r\n    };\r\n    return FS;\r\n});\r\n\r\n//-----------\r\n\tvar resMod;\r\n\trequirejs([\"FS\"], function (r) {\r\n\t  resMod=r;\r\n\t});\r\n\tif (typeof window!==\"undefined\" && window.FS===undefined) window.FS=resMod;\r\n\tif (typeof module!==\"undefined\") module=resMod;\r\n\treturn resMod;\r\n});\r\n//})(window);\r\n\n(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n    const Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a).concat([\"mode\",this._mode]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    let na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    let na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    }\r\n    module.exports=assert;\r\n\r\n},{}],2:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],3:[function(require,module,exports){\r\n//\t\tfunction (assert,TT,IT,DU) {\r\nvar assert=require(\"../lib/assert\");\r\nvar root=require(\"../lib/root\");\r\nvar TonyuThreadF=require(\"./TonyuThread\");\r\nvar IT=require(\"./tonyuIterator\");\r\nmodule.exports=function () {\r\n\t// old browser support\r\n\tif (!root.performance) {\r\n\t\troot.performance = {};\r\n\t}\r\n\tif (!root.performance.now) {\r\n\t\troot.performance.now = function now() {\r\n\t\t\treturn Date.now();\r\n\t\t};\r\n\t}\r\n\tvar preemptionTime=60;\r\n\tvar klass={};\r\n\tvar Tonyu,TT;\r\n\tfunction thread() {\r\n\t\tvar t=new TT();\r\n\t\tt.handleEx=handleEx;\r\n\t\treturn t;\r\n\t}\r\n\tfunction timeout(t) {\r\n\t\treturn new Promise(function (s) {\r\n\t\t\tsetTimeout(s,t);\r\n\t\t});\r\n\t}\r\n\t/*function animationFrame() {\r\n\t\treturn new Promise( function (f) {\r\n\t\t\trequestAnimationFrame(f);\r\n\t\t});\r\n\t}*/\r\n\r\n\tfunction handleEx(e) {\r\n\t\tif (Tonyu.onRuntimeError) {\r\n\t\t\tTonyu.onRuntimeError(e);\r\n\t\t} else {\r\n\t\t\t//if (typeof $LASTPOS==\"undefined\") $LASTPOS=0;\r\n\t\t\tif (root.alert) root.alert(\"!   : \"+e);\r\n\t\t\tconsole.log(e.stack);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}\r\n\tklass.addMeta=addMeta;\r\n\tfunction addMeta(fn,m) {\r\n\t\t// why use addMeta?\r\n\t\t// because when compiled from source, additional info(src file) is contained.\r\n\t\t// k.meta={...} erases these info\r\n\t\tassert.is(arguments,[String,Object]);\r\n\t\treturn extend(klass.getMeta(fn), m);\r\n\t}\r\n\tklass.removeMeta=function (n) {\r\n\t\tdelete classMetas[n];\r\n\t};\r\n\tklass.getMeta=function (k) {// Class or fullName\r\n\t\tif (typeof k==\"function\") {\r\n\t\t\treturn k.meta;\r\n\t\t} else if (typeof k==\"string\"){\r\n\t\t\tvar mm = classMetas[k];\r\n\t\t\tif (!mm) classMetas[k]=mm={};\r\n\t\t\treturn mm;\r\n\t\t}\r\n\t};\r\n\tklass.ensureNamespace=function (top,nsp) {\r\n\t\tvar keys=nsp.split(\".\");\r\n\t\tvar o=top;\r\n\t\tvar i;\r\n\t\tfor (i=0; i<keys.length; i++) {\r\n\t\t\tvar k=keys[i];\r\n\t\t\tif (!o[k]) o[k]={};\r\n\t\t\to=o[k];\r\n\t\t}\r\n\t\treturn o;\r\n\t};\r\n\t/*Function.prototype.constructor=function () {\r\n\t\tthrow new Error(\"This method should not be called\");\r\n\t};*/\r\n\tklass.propReg=/^__([gs]et)ter__(.*)$/;\r\n\tklass.define=function (params) {\r\n\t\t// fullName, shortName,namspace, superclass, includes, methods:{name/fiber$name: func}, decls\r\n\t\tvar parent=params.superclass;\r\n\t\tvar includes=params.includes;\r\n\t\tvar fullName=params.fullName;\r\n\t\tvar shortName=params.shortName;\r\n\t\tvar namespace=params.namespace;\r\n\t\tvar methodsF=params.methods;\r\n\t\tvar decls=params.decls;\r\n\t\tvar nso=klass.ensureNamespace(Tonyu.classes, namespace);\r\n\t\tvar outerRes;\r\n\t\tfunction chkmeta(m,ctx) {\r\n\t\t\tctx=ctx||{};\r\n\t\t\tif (ctx.isShim) return m;\r\n\t\t\tctx.path=ctx.path||[];\r\n\t\t\tctx.path.push(m);\r\n\t\t\tif (m.isShim) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"Shim found \"+m.extenderFullName);\r\n\t\t\t}\r\n\t\t\tif (m.superclass) chkmeta(m.superclass,ctx);\r\n\t\t\tif (!m.includes) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"includes not found\");\r\n\t\t\t}\r\n\t\t\tm.includes.forEach(function (mod) {\r\n\t\t\t\tchkmeta(mod,ctx);\r\n\t\t\t});\r\n\t\t\tctx.path.pop();\r\n\t\t\treturn m;\r\n\t\t}\r\n\t\tfunction chkclass(c,ctx) {\r\n\t\t\tif (!c.prototype.hasOwnProperty(\"getClassInfo\")) throw new Error(\"NO\");\r\n\t\t\tif (!c.meta) {\r\n\t\t\t\tconsole.log(\"metanotfound\",c);\r\n\t\t\t\tthrow new Error(\"meta not found\");\r\n\t\t\t}\r\n\t\t\tchkmeta(c.meta,ctx);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tfunction extender(parent,ctx) {\r\n\t\t\tvar isShim=!ctx.init;\r\n\t\t\tvar includesRec=ctx.includesRec;\r\n\t\t\tif (includesRec[fullName]) return parent;\r\n\t\t\tincludesRec[fullName]=true;\r\n\t\t\t//console.log(ctx.initFullName, fullName);//,  includesRec[fullName],JSON.stringify(ctx));\r\n\t\t\tincludes.forEach(function (m) {\r\n\t\t\t\tparent=m.extendFrom(parent,extend(ctx,{init:false}));\r\n\t\t\t});\r\n\t\t\tvar methods=typeof methodsF===\"function\"? methodsF(parent):methodsF;\r\n\t\t\t/*if (typeof Profiler!==\"undefined\") {\r\n\t\t\t\tProfiler.profile(methods, fullName);\r\n\t\t\t}*/\r\n\t\t\tvar init=methods.initialize;\r\n\t\t\tdelete methods.initialize;\r\n\t\t\tvar res;\r\n\t\t\tres=(init?\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tinit.apply(this,arguments);\r\n\t\t\t\t}:\r\n\t\t\t\t(parent? function () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tparent.apply(this,arguments);\r\n\t\t\t\t}:function (){\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tres.prototype=bless(parent,{constructor:res});\r\n\t\t\tif (isShim) {\r\n\t\t\t\tres.meta={isShim:true,extenderFullName:fullName};\r\n\t\t\t} else {\r\n\t\t\t\tres.meta=addMeta(fullName,{\r\n\t\t\t\t\tfullName:fullName,shortName:shortName,namespace:namespace,decls:decls,\r\n\t\t\t\t\tsuperclass:ctx.nonShimParent ? ctx.nonShimParent.meta : null,\r\n\t\t\t\t\tincludesRec:includesRec,\r\n\t\t\t\t\tincludes:includes.map(function(c){return c.meta;})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tres.meta.func=res;\r\n\t\t\t// methods: res's own methods(no superclass/modules)\r\n\t\t\tres.methods=methods;\r\n\t\t\tvar prot=res.prototype;\r\n\t\t\tvar props={};\r\n\t\t\tvar propReg=klass.propReg;//^__([gs]et)ter__(.*)$/;\r\n\t\t\tvar k;\r\n\t\t\tfor (k in methods) {\r\n\t\t\t\tif (k.match(/^fiber\\$/)) continue;\r\n\t\t\t\tprot[k]=methods[k];\r\n\t\t\t\tvar fbk=\"fiber$\"+k;\r\n\t\t\t\tif (methods[fbk]) {\r\n\t\t\t\t\tprot[fbk]=methods[fbk];\r\n\t\t\t\t\tprot[fbk].methodInfo=prot[fbk].methodInfo||{name:k,klass:res,fiber:true};\r\n\t\t\t\t\tprot[k].fiber=prot[fbk];\r\n\t\t\t\t}\r\n\t\t\t\tif (k!==\"__dummy\" && !prot[k]) {\r\n\t\t\t\t\tconsole.log(\"WHY!\",prot[k],prot,k);\r\n\t\t\t\t\tthrow new Error(\"WHY!\"+k);\r\n\t\t\t\t}\r\n\t\t\t\tprot[k].methodInfo=prot[k].methodInfo||{name:k,klass:res};\r\n\t\t\t\t// if profile...\r\n\t\t\t\tvar r=propReg.exec(k);\r\n\t\t\t\tif (r) {\r\n\t\t\t\t\t// __(r[1]g/setter)__r[2]\r\n\t\t\t\t\tprops[r[2]]=props[r[2]]||{};\r\n\t\t\t\t\tprops[r[2]][r[1]]=prot[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tprot.isTonyuObject=true;\r\n\t\t\tfor (k in props) {\r\n\t\t\t\tObject.defineProperty(prot, k , props[k]);\r\n\t\t\t}\r\n\t\t\tprot.getClassInfo=function () {\r\n\t\t\t\treturn res.meta;\r\n\t\t\t};\r\n\t\t\treturn chkclass(res,{isShim:isShim});\r\n\t\t}\r\n\t\tvar res=extender(parent,{\r\n\t\t\tinit:true,\r\n\t\t\tinitFullName:fullName,\r\n\t\t\tincludesRec:(parent?extend({},parent.meta.includesRec):{}),\r\n\t\t\tnonShimParent:parent\r\n\t\t});\r\n\t\tres.extendFrom=extender;\r\n\t\t//addMeta(fullName, res.meta);\r\n\t\tnso[shortName]=res;\r\n\t\touterRes=res;\r\n\t\t//console.log(\"defined\", fullName, Tonyu.classes,Tonyu.ID);\r\n\t\treturn chkclass(res,{isShim:false});\r\n\t};\r\n\tklass.isSourceChanged=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.src && k.src.tonyu) {\r\n\t\t\tif (!k.nodeTimestamp) return true;\r\n\t\t\treturn k.src.tonyu.lastUpdate()> k.nodeTimestamp;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tklass.shouldCompile=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.hasSemanticError) return true;\r\n\t\tif (klass.isSourceChanged(k)) return true;\r\n\t\tvar dks=klass.getDependingClasses(k);\r\n\t\tfor (var i=0 ; i<dks.length ;i++) {\r\n\t\t\tif (klass.shouldCompile(dks[i])) return true;\r\n\t\t}\r\n\t};\r\n\tklass.getDependingClasses=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tvar res=[];\r\n\t\tif (k.superclass) res=[k.superclass];\r\n\t\tif (k.includes) res=res.concat(k.includes);\r\n\t\treturn res;\r\n\t};\r\n\tfunction bless( klass, val) {\r\n\t\tif (!klass) return extend({},val);\r\n\t\treturn extend( Object.create(klass.prototype) , val);\r\n\t\t//return extend( new klass() , val);\r\n\t}\r\n\tfunction extend (dst, src) {\r\n\t\tif (src && typeof src==\"object\") {\r\n\t\t\tfor (var i in src) {\r\n\t\t\t\tdst[i]=src[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dst;\r\n\t}\r\n\r\n\t//alert(\"init\");\r\n\tvar globals={};\r\n\tvar classes={};// classes.namespace.classname= function\r\n\tvar classMetas={}; // classes.namespace.classname.meta ( or env.classes / ctx.classes)\r\n\tfunction setGlobal(n,v) {\r\n\t\tglobals[n]=v;\r\n\t}\r\n\tfunction getGlobal(n) {\r\n\t\treturn globals[n];\r\n\t}\r\n\tfunction getClass(n) {\r\n\t\t//CFN: n.split(\".\")\r\n\t\tvar ns=n.split(\".\");\r\n\t\tvar res=classes;\r\n\t\tns.forEach(function (na) {\r\n\t\t\tif (!res) return;\r\n\t\t\tres=res[na];\r\n\t\t});\r\n\t\tif (!res && ns.length==1) {\r\n\t\t\tvar found;\r\n\t\t\tfor (var nn in classes) {\r\n\t\t\t\tvar nr=classes[nn][n];\r\n\t\t\t\tif (nr) {\r\n\t\t\t\t\tif (!res) { res=nr; found=nn+\".\"+n; }\r\n\t\t\t\t\telse throw new Error(\" \"+nn+\".\"+n+\", \"+found);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;//classes[n];\r\n\t}\r\n\tfunction bindFunc(t,meth) {\r\n\t\tif (typeof meth!=\"function\") return meth;\r\n\t\tvar res=function () {\r\n\t\t\treturn meth.apply(t,arguments);\r\n\t\t};\r\n\t\tres.methodInfo=Tonyu.extend({thiz:t},meth.methodInfo||{});\r\n\t\tif (meth.fiber) {\r\n\t\t\tres.fiber=function fiber_func() {\r\n\t\t\t\treturn meth.fiber.apply(t,arguments);\r\n\t\t\t};\r\n\t\t\tres.fiber.methodInfo=Tonyu.extend({thiz:t},meth.fiber.methodInfo||{});\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction invokeMethod(t, name, args, objName) {\r\n\t\tif (!t) throw new Error(objName+\"(=\"+t+\") \"+name+\"\");\r\n\t\tvar f=t[name];\r\n\t\tif (typeof f!=\"function\") throw new Error((objName==\"this\"? \"\": objName+\".\")+name+\"(=\"+f+\")\");\r\n\t\treturn f.apply(t,args);\r\n\t}\r\n\tfunction callFunc(f,args, fName) {\r\n\t\tif (typeof f!=\"function\") throw new Error(fName+\"\");\r\n\t\treturn f.apply({},args);\r\n\t}\r\n\tfunction checkNonNull(v, name) {\r\n\t\tif (v!=v || v==null) throw new Error(name+\"(=\"+v+\")\");\r\n\t\treturn v;\r\n\t}\r\n\tfunction A(args) {\r\n\t\tvar res=[];\r\n\t\tfor (var i=1 ; i<args.length; i++) {\r\n\t\t\tres[i-1]=args[i];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction useNew(c) {\r\n\t\tthrow new Error(\"\"+c+\"new\");\r\n\t}\r\n\tfunction not_a_tonyu_object(o) {\r\n\t\tconsole.log(\"Not a tonyu object: \",o);\r\n\t\tthrow new Error(o+\" is not a tonyu object\");\r\n\t}\r\n\tfunction hasKey(k, obj) {\r\n\t\treturn k in obj;\r\n\t}\r\n\tfunction run(bootClassName) {\r\n\t\tvar bootClass=getClass(bootClassName);\r\n\t\tif (!bootClass) throw new Error( bootClassName+\" \");\r\n\t\tTonyu.runMode=true;\r\n\t\tvar boot=new bootClass();\r\n\t\t//var th=thread();\r\n\t\t//th.apply(boot,\"main\");\r\n\t\tvar TPR=Tonyu.currentProject;\r\n\t\tif (TPR) {\r\n\t\t\t//TPR.runningThread=th;\r\n\t\t\tTPR.runningObj=boot;\r\n\t\t}\r\n\t\t//$LASTPOS=0;\r\n\t\t//th.steps();\r\n\t}\r\n\tvar lastLoopCheck=root.performance.now();\r\n\tvar prevCheckLoopCalled;\r\n\tfunction checkLoop() {\r\n\t\tvar now=root.performance.now();\r\n\t\tif (now-lastLoopCheck>1000) {\r\n\t\t\tresetLoopCheck(10000);\r\n\t\t\tthrow new Error(\"\\n\"+\r\n\t\t\t\t\"    \\n\"+\r\n\t\t\t\t\"   []https://edit.tonyu.jp/doc/options.html\\n\");\r\n\t\t}\r\n\t\tprevCheckLoopCalled=now;\r\n\t}\r\n\tfunction resetLoopCheck(disableTime) {\r\n\t\tlastLoopCheck=root.performance.now()+(disableTime||0);\r\n\t}\r\n\tfunction is(obj,klass) {\r\n\t\tif (!obj) return false;\r\n\t\tif (obj instanceof klass) return true;\r\n\t\tif (typeof obj.getClassInfo===\"function\" && klass.meta) {\r\n\t\t\treturn obj.getClassInfo().includesRec[klass.meta.fullName];\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t//setInterval(resetLoopCheck,16);\r\n\tTonyu={thread:thread, /*threadGroup:threadGroup,*/\r\n\t\t\tklass:klass, bless:bless, extend:extend,\r\n\t\t\tglobals:globals, classes:classes, classMetas:classMetas, setGlobal:setGlobal, getGlobal:getGlobal, getClass:getClass,\r\n\t\t\ttimeout:timeout,//animationFrame:animationFrame, /*asyncResult:asyncResult,*/\r\n\t\t\tbindFunc:bindFunc,not_a_tonyu_object:not_a_tonyu_object,is:is,\r\n\t\t\thasKey:hasKey,invokeMethod:invokeMethod, callFunc:callFunc,checkNonNull:checkNonNull,\r\n\t\t\titerator:IT,run:run,checkLoop:checkLoop,resetLoopCheck:resetLoopCheck,//DeferredUtil:DU,\r\n\t\t\tVERSION:1560828115159,//EMBED_VERSION\r\n\t\t\tA:A,ID:Math.random()};\r\n\tTT=TonyuThreadF(Tonyu);\r\n\tif (root.Tonyu) {\r\n\t\tconsole.error(\"Tonyu called twice!\");\r\n\t\tthrow new Error(\"Tonyu called twice!\");\r\n\t}\r\n\troot.Tonyu=Tonyu;\r\n\treturn Tonyu;\r\n}();\r\n\r\n},{\"../lib/assert\":1,\"../lib/root\":2,\"./TonyuThread\":4,\"./tonyuIterator\":5}],4:[function(require,module,exports){\r\n//\tvar Klass=require(\"../lib/Klass\");\r\nmodule.exports=function (Tonyu) {\r\n\tvar cnts={enterC:{},exitC:0};\r\n\tvar idSeq=1;\r\n\t//try {window.cnts=cnts;}catch(e){}\r\n\tclass TonyuThread {\r\n\t\tconstructor() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis._isDead=false;\r\n\t\t\t//this._isAlive=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t\tthis._isWaiting=false;\r\n\t\t\tthis.fSuspended=false;\r\n\t\t\tthis.tryStack=[];\r\n\t\t\tthis.preemptionTime=60;\r\n\t\t\tthis.onEndHandlers=[];\r\n\t\t\tthis.onTerminateHandlers=[];\r\n\t\t\tthis.id=idSeq++;\r\n\t\t\tthis.age=0; // inc if object pooled\r\n\t\t}\r\n\t\tisAlive() {\r\n\t\t\treturn !this.isDead();\r\n\t\t\t//return this.frame!=null && this._isAlive;\r\n\t\t}\r\n\t\tisDead() {\r\n\t\t\tthis._isDead=this._isDead || (this.frame==null) ||\r\n\t\t\t(this._threadGroup && (\r\n\t\t\t\t\tthis._threadGroup.objectPoolAge!=this.tGrpObjectPoolAge ||\r\n\t\t\t\t\tthis._threadGroup.isDeadThreadGroup()\r\n\t\t\t));\r\n\t\t\treturn this._isDead;\r\n\t\t}\r\n\t\tsetThreadGroup(g) {// g:TonyuThread\r\n\t\t\tthis._threadGroup=g;\r\n\t\t\tthis.tGrpObjectPoolAge=g.objectPoolAge;\r\n\t\t\t//if (g) g.add(fb);\r\n\t\t}\r\n\t\tisWaiting() {\r\n\t\t\treturn this._isWaiting;\r\n\t\t}\r\n\t\tsuspend() {\r\n\t\t\tthis.fSuspended=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t}\r\n\t\tenter(frameFunc) {\r\n\t\t\t//var n=frameFunc.name;\r\n\t\t\t//cnts.enterC[n]=(cnts.enterC[n]||0)+1;\r\n\t\t\tthis.frame={prev:this.frame, func:frameFunc};\r\n\t\t}\r\n\t\tapply(obj, methodName, args) {\r\n\t\t\tif (!args) args=[];\r\n\t\t\tvar method;\r\n\t\t\tif (typeof methodName==\"string\") {\r\n\t\t\t\tmethod=obj[\"fiber$\"+methodName];\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tthrow new Error(\"\"+methodName+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof methodName==\"function\") {\r\n\t\t\t\tmethod=methodName.fiber;\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tvar n=methodName.methodInfo ? methodName.methodInfo.name : methodName.name;\r\n\t\t\t\t\tthrow new Error(\"\"+n+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\targs=[this].concat(args);\r\n\t\t\tvar pc=0;\r\n\t\t\treturn this.enter(function (th) {\r\n\t\t\t\tswitch (pc){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tmethod.apply(obj,args);\r\n\t\t\t\t\tpc=1;break;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tth.termStatus=\"success\";\r\n\t\t\t\t\tth.notifyEnd(th.retVal);\r\n\t\t\t\t\targs[0].exit();\r\n\t\t\t\t\tpc=2;break;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tnotifyEnd(r) {\r\n\t\t\tthis.onEndHandlers.forEach(function (e) {\r\n\t\t\t\te(r);\r\n\t\t\t});\r\n\t\t\tthis.notifyTermination({status:\"success\",value:r});\r\n\t\t}\r\n\t\tnotifyTermination(tst) {\r\n\t\t\tthis.onTerminateHandlers.forEach(function (e) {\r\n\t\t\t\te(tst);\r\n\t\t\t});\r\n\t\t}\r\n\t\ton(type,f) {\r\n\t\t\tif (type===\"end\"||type===\"success\") this.onEndHandlers.push(f);\r\n\t\t\tif (type===\"terminate\") {\r\n\t\t\t\tthis.onTerminateHandlers.push(f);\r\n\t\t\t\tif (this.handleEx) delete this.handleEx;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpromise() {\r\n\t\t\tvar fb=this;\r\n\t\t\treturn new Promise(function (succ,err) {\r\n\t\t\t\tfb.on(\"terminate\",function (st) {\r\n\t\t\t\t\tif (st.status===\"success\") {\r\n\t\t\t\t\t\tsucc(st.value);\r\n\t\t\t\t\t} else if (st.status===\"exception\"){\r\n\t\t\t\t\t\terr(st.exception);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terr(new Error(st.status));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tthen(succ,err) {\r\n\t\t\tif (err) return this.promise().then(succ,err);\r\n\t\t\telse return this.promise().then(succ);\r\n\t\t}\r\n\t\tfail(err) {\r\n\t\t\treturn this.promise().then(e=>e, err);\r\n\t\t}\r\n\t\tgotoCatch(e) {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.tryStack.length==0) {\r\n\t\t\t\tfb.termStatus=\"exception\";\r\n\t\t\t\tfb.kill();\r\n\t\t\t\tif (fb.handleEx) fb.handleEx(e);\r\n\t\t\t\telse fb.notifyTermination({status:\"exception\",exception:e});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfb.lastEx=e;\r\n\t\t\tvar s=fb.tryStack.pop();\r\n\t\t\twhile (fb.frame) {\r\n\t\t\t\tif (s.frame===fb.frame) {\r\n\t\t\t\t\tfb.catchPC=s.catchPC;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfb.frame=fb.frame.prev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tstartCatch() {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar e=fb.lastEx;\r\n\t\t\tfb.lastEx=null;\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\texit(res) {\r\n\t\t\t//cnts.exitC++;\r\n\t\t\tthis.frame=(this.frame ? this.frame.prev:null);\r\n\t\t\tthis.retVal=res;\r\n\t\t}\r\n\t\tenterTry(catchPC) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.push({frame:fb.frame,catchPC:catchPC});\r\n\t\t}\r\n\t\texitTry() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.pop();\r\n\t\t}\r\n\t\twaitEvent(obj,eventSpec) { // eventSpec=[EventType, arg1, arg2....]\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (!obj.on) return;\r\n\t\t\tvar h;\r\n\t\t\teventSpec=eventSpec.concat(function () {\r\n\t\t\t\tfb.lastEvent=arguments;\r\n\t\t\t\tfb.retVal=arguments[0];\r\n\t\t\t\th.remove();\r\n\t\t\t\tfb.steps();\r\n\t\t\t});\r\n\t\t\th=obj.on.apply(obj, eventSpec);\r\n\t\t}\r\n\t\trunAsync(f) {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar succ=function () {\r\n\t\t\t\tfb.retVal=arguments;\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tvar err=function () {\r\n\t\t\t\tvar msg=\"\";\r\n\t\t\t\tfor (var i=0; i<arguments.length; i++) {\r\n\t\t\t\t\tmsg+=arguments[i]+\",\";\r\n\t\t\t\t}\r\n\t\t\t\tif (msg.length==0) msg=\"Async fail\";\r\n\t\t\t\tvar e=new Error(msg);\r\n\t\t\t\te.args=arguments;\r\n\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tfb.suspend();\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tf(succ,err);\r\n\t\t\t},0);\r\n\t\t}\r\n\t\twaitFor(j) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb._isWaiting=true;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (j instanceof TonyuThread) j=j.promise();\r\n\t\t\treturn Promise.resolve(j).then(function (r) {\r\n\t\t\t\tfb.retVal=r;\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t}).then(e=>e,function (e) {\r\n\t\t\t\tfb.gotoCatch(fb.wrapError(e));\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t});\r\n\t\t}\r\n\t\twrapError(e) {\r\n\t\t\tif (e instanceof Error) return e;\r\n\t\t\tvar re=new Error(e);\r\n\t\t\tre.original=e;\r\n\t\t\treturn re;\r\n\t\t}\r\n\t\tresume(retVal) {\r\n\t\t\tthis.retVal=retVal;\r\n\t\t\tthis.steps();\r\n\t\t}\r\n\t\tsteps() {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.isDead()) return;\r\n\t\t\tvar sv=Tonyu.currentThread;\r\n\t\t\tTonyu.currentThread=fb;\r\n\t\t\tfb.cnt=fb.preemptionTime;\r\n\t\t\tfb.preempted=false;\r\n\t\t\tfb.fSuspended=false;\r\n\t\t\twhile (fb.cnt>0 && fb.frame) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//while (new Date().getTime()<lim) {\r\n\t\t\t\t\twhile (fb.cnt-->0 && fb.frame) {\r\n\t\t\t\t\t\tfb.frame.func(fb);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfb.preempted= (!fb.fSuspended) && fb.isAlive();\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tTonyu.currentThread=sv;\r\n\t\t}\r\n\t\tstepsLoop() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.steps();\r\n\t\t\tif (fb.preempted) {\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tfb.stepsLoop();\r\n\t\t\t\t},0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tkill() {\r\n\t\t\tvar fb=this;\r\n\t\t\t//fb._isAlive=false;\r\n\t\t\tfb._isDead=true;\r\n\t\t\tfb.frame=null;\r\n\t\t\tif (!fb.termStatus) {\r\n\t\t\t\tfb.termStatus=\"killed\";\r\n\t\t\t\tfb.notifyTermination({status:\"killed\"});\r\n\t\t\t}\r\n\t\t}\r\n\t\tclearFrame() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis.tryStack=[];\r\n\t\t}\r\n\t}\r\n\treturn TonyuThread;\r\n};\r\n\r\n},{}],5:[function(require,module,exports){\r\n//define([\"Klass\"], function (Klass) {\r\n\t//var Klass=require(\"../lib/Klass\");\r\n\tclass ArrayValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext () {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ArrayKeyValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.i;\r\n\t\t\tthis[1]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push(k);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyValueIterator{\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push([k,set[k]]);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i][0];\r\n\t\t\tthis[1]=this.elems[this.i][1];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction IT(set, arity) {\r\n\t\tif (set.tonyuIterator) {\r\n\t\t\t// TODO: the prototype of class having tonyuIterator will iterate infinitively\r\n\t\t\treturn set.tonyuIterator(arity);\r\n\t\t} else if (set instanceof Array) {\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ArrayValueIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ArrayKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else if (set instanceof Object){\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ObjectKeyIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ObjectKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(set);\r\n\t\t\tthrow new Error(set+\" is not iterable\");\r\n\t\t}\r\n\t}\r\n\tmodule.exports=IT;\r\n//   Tonyu.iterator=IT;\r\n//\treturn IT;\r\n//});\r\n\r\n},{}]},{},[3]);\r\n\ndefine(\"Tonyu\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Tonyu;\n    };\n}(this)));\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define('BuilderClient4Sys',[],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.TonyuBuilderClient = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\nconst root=require(\"../lib/root\");\r\nconst Worker=root.Worker;\r\nconst WS=require(\"../lib/WorkerServiceB\");\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst FileMap=require(\"../lib/FileMap\");\r\n//const FS=(root.parent && root.parent.FS) || root.FS;\r\nconst FS=root.FS;// TODO\r\n\r\nclass BuilderClient {\r\n    constructor(prj,config) {// dirBased\r\n        this.prj=prj;\r\n        let url=config.worker.url;\r\n        if (!url.match(/^blob/)) url+=\"?\"+Math.random();\r\n        this.w=new WS.Wrapper(new Worker(url));\r\n        this.config=config;\r\n        this.fileMap=new FileMap();\r\n    }\r\n    getOutputFile(...f) {return this.prj.getOutputFile(...f);}\r\n    getDir(){return this.prj.getDir();}\r\n    setDebugger(t) {this.debugger=t;}// t:iframe.contentWindow.Debugger\r\n    exec(srcraw) {\r\n        if (this.debugger) return this.debugger.exec(srcraw);\r\n    }\r\n    convertFromWorkerPath(path) {\r\n        return this.fileMap.convert(path,\"remote\",\"local\");\r\n    }\r\n    async init() {\r\n        if (this.inited) return;\r\n        const fileMap=this.fileMap;\r\n        const localPrjDir=this.getDir();\r\n        const files=localPrjDir.exportAsObject({\r\n            excludesF: f=>f.ext()!==\".tonyu\" && f.name()!==\"options.json\"\r\n        });\r\n        const ns2depspec=this.config.worker.ns2depspec;\r\n        const {prjDir:remotePrjDir}=await this.w.run(\"compiler/init\",{\r\n            namespace:this.prj.getNamespace(),\r\n            files, ns2depspec\r\n        });\r\n        fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n        const deps=this.prj.getDependingProjects();//TODO recursive\r\n        for (let dep of deps) {\r\n            const ns=dep.getNamespace();\r\n            if (!ns2depspec[ns]) {\r\n                const localPrjDir=dep.getDir();\r\n                const files=localPrjDir.exportAsObject({\r\n                    excludesF: f=>f.ext()!==\".tonyu\" && f.name()!==\"options.json\"\r\n                });\r\n                const {prjDir:remotePrjDir}=await this.w.run(\"compiler/addDependingProject\",{\r\n                    namespace:ns, files\r\n                });\r\n                fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n            }\r\n        }\r\n        this.inited=true;\r\n    }\r\n    async fullCompile() {\r\n        try {\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/fullCompile\");\r\n            console.log(compres);\r\n            const sf=SourceFiles.add(compres);\r\n            await sf.saveAs(this.getOutputFile());\r\n            await this.exec(compres);\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async partialCompile(f) {\r\n        try {\r\n            const files={};files[f.relPath(this.getDir())]=f.text();\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/postChange\",{files});\r\n            console.log(compres);\r\n            await this.exec(compres);\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async renameClassName(from,to) {\r\n        try {\r\n            await this.init();\r\n            let changed=await this.w.run(\"compiler/renameClassName\",{from,to});\r\n            for (let n in changed) {\r\n                let val=changed[n];\r\n                n=this.convertFromWorkerPath(n);\r\n                if (val==null) {\r\n                    FS.get(n).rm();\r\n                } else {\r\n                    FS.get(n).text(val);\r\n                }\r\n            }\r\n            return changed;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    convertError(e) {\r\n        if (e.isTError) {\r\n            e.src=FS.get(this.convertFromWorkerPath(e.src));\r\n        }\r\n        return e;\r\n    }\r\n    async run() {\r\n        await this.init();\r\n        await this.fullCompile();\r\n        this.getDir().watch(async (e,f)=>{\r\n            console.log(e,f.path());\r\n            if (f.ext()===\".tonyu\") {\r\n                const nsraw=await this.partialCompile(f);\r\n                if (this.config.onCompiled) this.config.onCompiled(nsraw);\r\n\r\n                //if (root.Tonyu.globals.$restart) root.Tonyu.globals.$restart();\r\n            }\r\n        });\r\n    }\r\n}\r\nBuilderClient.SourceFiles=SourceFiles;\r\n//root.TonyuBuilderClient=BuilderClient;\r\nmodule.exports=BuilderClient;\r\n\r\n},{\"../lang/SourceFiles\":3,\"../lib/FileMap\":8,\"../lib/WorkerServiceB\":9,\"../lib/root\":10}],2:[function(require,module,exports){\r\n// Add extra libraries for Tonyu System IDE\r\n//const root=require(\"../lib/root\");\r\nconst BuilderClient=require(\"./BuilderClient\");\r\n\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst ProjectFactory=require(\"../project/ProjectFactory\");\r\nconst CompiledProject=require(\"../project/CompiledProject\");\r\nconst langMod=require(\"../lang/langMod\");\r\nconst StackDecoder=require(\"../lang/StackDecoder\");\r\nconst SourceMap=require(\"../lang/source-map\");\r\nBuilderClient.SourceFiles=SourceFiles;\r\nBuilderClient.ProjectFactory=ProjectFactory;\r\nBuilderClient.CompiledProject=CompiledProject;\r\nBuilderClient.langMod=langMod;\r\nBuilderClient.StackDecoder=StackDecoder;\r\nBuilderClient.SourceMap=SourceMap;\r\nmodule.exports=BuilderClient;\r\n//root.TonyuBuilderClient=BuilderClient;\r\n\r\n},{\"../lang/SourceFiles\":3,\"../lang/StackDecoder\":4,\"../lang/langMod\":5,\"../lang/source-map\":6,\"../project/CompiledProject\":11,\"../project/ProjectFactory\":12,\"./BuilderClient\":1}],3:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n/*const root=require(\"root\");*/\r\nconst root=require(\"../lib/root\");\r\nfunction timeout(t) {\r\n    return new Promise(s=>setTimeout(s,t));\r\n}\r\nlet vm;\r\n/*global global*/\r\nif (typeof global!==\"undefined\" && global.require) {\r\n    vm=global.require(\"vm\");\r\n}\r\nclass SourceFile {\r\n    // var text, sourceMap:S.Sourcemap;\r\n    constructor(text, sourceMap) {\r\n        if (typeof text===\"object\") {\r\n            const params=text;\r\n            sourceMap=params.sourceMap;\r\n            //functions=params.functions;\r\n            text=params.text;\r\n            if (params.url) {\r\n                this.url=params.url;\r\n            }\r\n        }\r\n        this.text=text;\r\n        this.sourceMap=sourceMap && sourceMap.toString();\r\n        //this.functions=functions;\r\n    }\r\n    async saveAs(outf) {\r\n        const mapFile=outf.sibling(outf.name()+\".map\");\r\n        let text=this.text;\r\n        //text+=\"\\n//# traceFunctions=\"+JSON.stringify(this.functions);\r\n        if (this.sourceMap) {\r\n            await mapFile.text(this.sourceMap);\r\n            text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n        }\r\n        await outf.text(text);\r\n        //return Promise.resolve();\r\n    }\r\n    exec(options) {\r\n        return new Promise((resolve, reject)=>{\r\n            if (root.window) {\r\n                const document=root.document;\r\n                let u;\r\n                if (this.url) {\r\n                    u=this.url;\r\n                } else {\r\n                    const b=new root.Blob([this.text], {type: 'text/plain'});\r\n                    u=root.URL.createObjectURL(b);\r\n                }\r\n                const s=document.createElement(\"script\");\r\n                console.log(\"load script\",u);\r\n                s.setAttribute(\"src\",u);\r\n                s.addEventListener(\"load\",e=>{\r\n                    resolve(e);\r\n                });\r\n                this.parent.url2SourceFile[u]=this;\r\n                document.body.appendChild(s);\r\n            } else if (options && options.tmpdir){\r\n                const tmpdir=options.tmpdir;\r\n                const uniqFile=tmpdir.rel(Math.random()+\".js\");\r\n                const mapFile=uniqFile.sibling(uniqFile.name()+\".map\");\r\n                let text=this.text;\r\n                text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n                uniqFile.text(text);\r\n                mapFile.text(this.sourceMap);\r\n                //console.log(\"EX\",uniqFile.exists());\r\n                require(uniqFile.path());\r\n                uniqFile.rm();\r\n                mapFile.rm();\r\n                resolve();\r\n            } else if (root.importScripts && this.url){\r\n                root.importScripts(this.url);\r\n                resolve();\r\n            } else {\r\n                const F=Function;\r\n                const f=(vm? vm.compileFunction(this.text) : new F(this.text));\r\n                resolve(f());\r\n            }\r\n        });\r\n    }\r\n    export() {\r\n        return {text:this.text, sourceMap:this.sourceMap, functions:this.functions};\r\n    }\r\n}\r\nclass SourceFiles {\r\n    constructor() {\r\n        this.url2SourceFile={};\r\n    }\r\n    add(text, sourceMap) {\r\n        const sourceFile=new SourceFile(text, sourceMap);\r\n        /*if (sourceFile.functions) for (let k in sourceFile.functions) {\r\n            this.functions[k]=sourceFile;\r\n        }*/\r\n        sourceFile.parent=this;\r\n        return sourceFile;\r\n    }\r\n\r\n}\r\nmodule.exports=new SourceFiles();\r\n//});/*--end of define--*/\r\n\r\n},{\"../lib/root\":10}],4:[function(require,module,exports){\r\nconst S=require(\"./source-map\");\r\nconst StackTrace=require(\"./stacktrace\");\r\nconst SourceFiles=require(\"./SourceFiles\");\r\nmodule.exports={\r\n    async decode(e) {\r\n        try{\r\n            const tr=await StackTrace.fromError(e,{offline:true});\r\n            tr.forEach(t=>{\r\n                try {\r\n                    const sf=SourceFiles.url2SourceFile[t.fileName];\r\n                    console.log(\"sf\", t.fileName, sf, SourceFiles.url2SourceFile);\r\n                    if (sf) {\r\n                        const opt={\r\n                            line: t.lineNumber, column:t.columnNumber,\r\n                            bias:S.SourceMapConsumer.GREATEST_LOWER_BOUND\r\n                        };\r\n                        const pos=this.originalPositionFor(sf,opt);\r\n                        console.log(\"pos\",opt,pos);\r\n                        if (pos.source) t.fileName=pos.source;\r\n                        if (pos.line) t.lineNumber=pos.line;\r\n                        if (pos.column) t.columnNumber=pos.column;\r\n                    }\r\n                }catch(ex) {\r\n                    console.log(\"Sourcemap error\",ex);\r\n                }\r\n            });\r\n            console.log(\"Converted: \",tr);\r\n            return tr;\r\n        } catch(ex) {\r\n            console.log(\"StackTrace error\",ex);\r\n            if (!e || !e.stack) {\r\n                console.log(\"HennaError\",e);\r\n                return [];\r\n            }\r\n            return e.stack.split(\"\\n\");\r\n        }\r\n    },\r\n    originalPositionFor(sf,opt) {\r\n        const s=this.getSourceMapConsumer(sf);\r\n        if (!s) return opt;\r\n        return s.originalPositionFor(opt);\r\n    },\r\n    getSourceMapConsumer(sf) {\r\n        if (sf.sourceMapConsumer) return sf.sourceMapConsumer;\r\n        sf.sourceMapConsumer=new S.SourceMapConsumer(JSON.parse(sf.sourceMap));\r\n        //console.log(this.sourceMapConsumer);\r\n        return sf.sourceMapConsumer;\r\n    }\r\n};\r\n\r\n},{\"./SourceFiles\":3,\"./source-map\":6,\"./stacktrace\":7}],5:[function(require,module,exports){\r\n    module.exports={\r\n        getNamespace: function () {//override\r\n            var opt=this.getOptions();\r\n            if (opt.compiler && opt.compiler.namespace) return opt.compiler.namespace;\r\n            throw new Error(\"Namespace is not set\");\r\n        },\r\n        async loadDependingClasses() {\r\n            const myNsp=this.getNamespace();\r\n            for (let p of this.getDependingProjects()) {\r\n                if (p.getNamespace()===myNsp) continue;\r\n                await p.loadClasses();\r\n            }\r\n        },\r\n        getEXT() {return \".tonyu\";}\r\n        // loadClasses: stub\r\n    };\r\n\r\n},{}],6:[function(require,module,exports){\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine(\"source-map\",[], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"sourceMap\"] = factory();\r\n\telse\r\n\t\troot[\"sourceMap\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId])\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\texports: {},\r\n/******/ \t\t\tid: moduleId,\r\n/******/ \t\t\tloaded: false\r\n/******/ \t\t};\r\n\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.loaded = true;\r\n\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n\r\n\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/*\r\n\t* Copyright 2009-2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE.txt or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\texports.SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\texports.SourceMapConsumer = __webpack_require__(7).SourceMapConsumer;\r\n\texports.SourceNode = __webpack_require__(10).SourceNode;\r\n\r\n\r\n/***/ },\r\n/* 1 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar util = __webpack_require__(4);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar MappingList = __webpack_require__(6).MappingList;\r\n\r\n\t/**\r\n\t* An instance of the SourceMapGenerator represents a source map which is\r\n\t* being built incrementally. You may pass an object with the following\r\n\t* properties:\r\n\t*\r\n\t*   - file: The filename of the generated source.\r\n\t*   - sourceRoot: A root for all relative URLs in this source map.\r\n\t*/\r\n\tfunction SourceMapGenerator(aArgs) {\r\n\t\tif (!aArgs) {\r\n\t\taArgs = {};\r\n\t\t}\r\n\t\tthis._file = util.getArg(aArgs, 'file', null);\r\n\t\tthis._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\r\n\t\tthis._skipValidation = util.getArg(aArgs, 'skipValidation', false);\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\t\tthis._mappings = new MappingList();\r\n\t\tthis._sourcesContents = null;\r\n\t}\r\n\r\n\tSourceMapGenerator.prototype._version = 3;\r\n\r\n\t/**\r\n\t* Creates a new SourceMapGenerator based on a SourceMapConsumer\r\n\t*\r\n\t* @param aSourceMapConsumer The SourceMap.\r\n\t*/\r\n\tSourceMapGenerator.fromSourceMap =\r\n\t\tfunction SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\r\n\t\tvar sourceRoot = aSourceMapConsumer.sourceRoot;\r\n\t\tvar generator = new SourceMapGenerator({\r\n\t\t\tfile: aSourceMapConsumer.file,\r\n\t\t\tsourceRoot: sourceRoot\r\n\t\t});\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tvar newMapping = {\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: mapping.generatedLine,\r\n\t\t\t\tcolumn: mapping.generatedColumn\r\n\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tnewMapping.source = mapping.source;\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tnewMapping.source = util.relative(sourceRoot, newMapping.source);\r\n\t\t\t}\r\n\r\n\t\t\tnewMapping.original = {\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnewMapping.name = mapping.name;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgenerator.addMapping(newMapping);\r\n\t\t});\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tgenerator.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn generator;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a single mapping from original source line and column to the generated\r\n\t* source's line and column for this source map being created. The mapping\r\n\t* object should have the following properties:\r\n\t*\r\n\t*   - generated: An object with the generated line and column positions.\r\n\t*   - original: An object with the original line and column positions.\r\n\t*   - source: The original source file (relative to the sourceRoot).\r\n\t*   - name: An optional original token name for this mapping.\r\n\t*/\r\n\tSourceMapGenerator.prototype.addMapping =\r\n\t\tfunction SourceMapGenerator_addMapping(aArgs) {\r\n\t\tvar generated = util.getArg(aArgs, 'generated');\r\n\t\tvar original = util.getArg(aArgs, 'original', null);\r\n\t\tvar source = util.getArg(aArgs, 'source', null);\r\n\t\tvar name = util.getArg(aArgs, 'name', null);\r\n\r\n\t\tif (!this._skipValidation) {\r\n\t\t\tthis._validateMapping(generated, original, source, name);\r\n\t\t}\r\n\r\n\t\tif (source != null) {\r\n\t\t\tsource = String(source);\r\n\t\t\tif (!this._sources.has(source)) {\r\n\t\t\tthis._sources.add(source);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (name != null) {\r\n\t\t\tname = String(name);\r\n\t\t\tif (!this._names.has(name)) {\r\n\t\t\tthis._names.add(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mappings.add({\r\n\t\t\tgeneratedLine: generated.line,\r\n\t\t\tgeneratedColumn: generated.column,\r\n\t\t\toriginalLine: original != null && original.line,\r\n\t\t\toriginalColumn: original != null && original.column,\r\n\t\t\tsource: source,\r\n\t\t\tname: name\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file.\r\n\t*/\r\n\tSourceMapGenerator.prototype.setSourceContent =\r\n\t\tfunction SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tvar source = aSourceFile;\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tsource = util.relative(this._sourceRoot, source);\r\n\t\t}\r\n\r\n\t\tif (aSourceContent != null) {\r\n\t\t\t// Add the source content to the _sourcesContents map.\r\n\t\t\t// Create a new _sourcesContents map if the property is null.\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\tthis._sourcesContents = Object.create(null);\r\n\t\t\t}\r\n\t\t\tthis._sourcesContents[util.toSetString(source)] = aSourceContent;\r\n\t\t} else if (this._sourcesContents) {\r\n\t\t\t// Remove the source file from the _sourcesContents map.\r\n\t\t\t// If the _sourcesContents map is empty, set the property to null.\r\n\t\t\tdelete this._sourcesContents[util.toSetString(source)];\r\n\t\t\tif (Object.keys(this._sourcesContents).length === 0) {\r\n\t\t\tthis._sourcesContents = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Applies the mappings of a sub-source-map for a specific source file to the\r\n\t* source map being generated. Each mapping to the supplied source file is\r\n\t* rewritten using the supplied source map. Note: The resolution for the\r\n\t* resulting mappings is the minimium of this map and the supplied map.\r\n\t*\r\n\t* @param aSourceMapConsumer The source map to be applied.\r\n\t* @param aSourceFile Optional. The filename of the source file.\r\n\t*        If omitted, SourceMapConsumer's file property will be used.\r\n\t* @param aSourceMapPath Optional. The dirname of the path to the source map\r\n\t*        to be applied. If relative, it is relative to the SourceMapConsumer.\r\n\t*        This parameter is needed when the two source maps aren't in the same\r\n\t*        directory, and the source map to be applied contains relative source\r\n\t*        paths. If so, those relative source paths need to be rewritten\r\n\t*        relative to the SourceMapGenerator.\r\n\t*/\r\n\tSourceMapGenerator.prototype.applySourceMap =\r\n\t\tfunction SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\r\n\t\tvar sourceFile = aSourceFile;\r\n\t\t// If aSourceFile is omitted, we will use the file property of the SourceMap\r\n\t\tif (aSourceFile == null) {\r\n\t\t\tif (aSourceMapConsumer.file == null) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\r\n\t\t\t\t'or the source map\\'s \"file\" property. Both were omitted.'\r\n\t\t\t);\r\n\t\t\t}\r\n\t\t\tsourceFile = aSourceMapConsumer.file;\r\n\t\t}\r\n\t\tvar sourceRoot = this._sourceRoot;\r\n\t\t// Make \"sourceFile\" relative if an absolute Url is passed.\r\n\t\tif (sourceRoot != null) {\r\n\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t}\r\n\t\t// Applying the SourceMap can add and remove items from the sources and\r\n\t\t// the names array.\r\n\t\tvar newSources = new ArraySet();\r\n\t\tvar newNames = new ArraySet();\r\n\r\n\t\t// Find mappings for the \"sourceFile\"\r\n\t\tthis._mappings.unsortedForEach(function (mapping) {\r\n\t\t\tif (mapping.source === sourceFile && mapping.originalLine != null) {\r\n\t\t\t// Check if it can be mapped by the source map, then update the mapping.\r\n\t\t\tvar original = aSourceMapConsumer.originalPositionFor({\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t});\r\n\t\t\tif (original.source != null) {\r\n\t\t\t\t// Copy mapping\r\n\t\t\t\tmapping.source = original.source;\r\n\t\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tmapping.source = util.join(aSourceMapPath, mapping.source)\r\n\t\t\t\t}\r\n\t\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tmapping.source = util.relative(sourceRoot, mapping.source);\r\n\t\t\t\t}\r\n\t\t\t\tmapping.originalLine = original.line;\r\n\t\t\t\tmapping.originalColumn = original.column;\r\n\t\t\t\tif (original.name != null) {\r\n\t\t\t\tmapping.name = original.name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar source = mapping.source;\r\n\t\t\tif (source != null && !newSources.has(source)) {\r\n\t\t\tnewSources.add(source);\r\n\t\t\t}\r\n\r\n\t\t\tvar name = mapping.name;\r\n\t\t\tif (name != null && !newNames.has(name)) {\r\n\t\t\tnewNames.add(name);\r\n\t\t\t}\r\n\r\n\t\t}, this);\r\n\t\tthis._sources = newSources;\r\n\t\tthis._names = newNames;\r\n\r\n\t\t// Copy sourcesContents of applied map.\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tsourceFile = util.join(aSourceMapPath, sourceFile);\r\n\t\t\t}\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t\t}\r\n\t\t\tthis.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* A mapping can have one of the three levels of data:\r\n\t*\r\n\t*   1. Just the generated position.\r\n\t*   2. The Generated position, original position, and original source.\r\n\t*   3. Generated and original position, original source, as well as a name\r\n\t*      token.\r\n\t*\r\n\t* To maintain consistency, we validate that any new mapping being added falls\r\n\t* in to one of these categories.\r\n\t*/\r\n\tSourceMapGenerator.prototype._validateMapping =\r\n\t\tfunction SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taName) {\r\n\t\tif (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t&& !aOriginal && !aSource && !aName) {\r\n\t\t\t// Case 1.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t\t&& aOriginal && 'line' in aOriginal && 'column' in aOriginal\r\n\t\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t\t&& aOriginal.line > 0 && aOriginal.column >= 0\r\n\t\t\t\t&& aSource) {\r\n\t\t\t// Cases 2 and 3.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('Invalid mapping: ' + JSON.stringify({\r\n\t\t\tgenerated: aGenerated,\r\n\t\t\tsource: aSource,\r\n\t\t\toriginal: aOriginal,\r\n\t\t\tname: aName\r\n\t\t\t}));\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Serialize the accumulated mappings in to the stream of base 64 VLQs\r\n\t* specified by the source map format.\r\n\t*/\r\n\tSourceMapGenerator.prototype._serializeMappings =\r\n\t\tfunction SourceMapGenerator_serializeMappings() {\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousGeneratedLine = 1;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar result = '';\r\n\t\tvar next;\r\n\t\tvar mapping;\r\n\t\tvar nameIdx;\r\n\t\tvar sourceIdx;\r\n\r\n\t\tvar mappings = this._mappings.toArray();\r\n\t\tfor (var i = 0, len = mappings.length; i < len; i++) {\r\n\t\t\tmapping = mappings[i];\r\n\t\t\tnext = ''\r\n\r\n\t\t\tif (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\twhile (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\t\tnext += ';';\r\n\t\t\t\tpreviousGeneratedLine++;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tif (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tnext += ',';\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.generatedColumn\r\n\t\t\t\t\t\t\t\t\t- previousGeneratedColumn);\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tsourceIdx = this._sources.indexOf(mapping.source);\r\n\t\t\tnext += base64VLQ.encode(sourceIdx - previousSource);\r\n\t\t\tpreviousSource = sourceIdx;\r\n\r\n\t\t\t// lines are stored 0-based in SourceMap spec version 3\r\n\t\t\tnext += base64VLQ.encode(mapping.originalLine - 1\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalLine);\r\n\t\t\tpreviousOriginalLine = mapping.originalLine - 1;\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.originalColumn\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalColumn);\r\n\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnameIdx = this._names.indexOf(mapping.name);\r\n\t\t\t\tnext += base64VLQ.encode(nameIdx - previousName);\r\n\t\t\t\tpreviousName = nameIdx;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult += next;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t\t};\r\n\r\n\tSourceMapGenerator.prototype._generateSourcesContent =\r\n\t\tfunction SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\r\n\t\treturn aSources.map(function (source) {\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (aSourceRoot != null) {\r\n\t\t\tsource = util.relative(aSourceRoot, source);\r\n\t\t\t}\r\n\t\t\tvar key = util.toSetString(source);\r\n\t\t\treturn Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\r\n\t\t\t? this._sourcesContents[key]\r\n\t\t\t: null;\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Externalize the source map.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toJSON =\r\n\t\tfunction SourceMapGenerator_toJSON() {\r\n\t\tvar map = {\r\n\t\t\tversion: this._version,\r\n\t\t\tsources: this._sources.toArray(),\r\n\t\t\tnames: this._names.toArray(),\r\n\t\t\tmappings: this._serializeMappings()\r\n\t\t};\r\n\t\tif (this._file != null) {\r\n\t\t\tmap.file = this._file;\r\n\t\t}\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tmap.sourceRoot = this._sourceRoot;\r\n\t\t}\r\n\t\tif (this._sourcesContents) {\r\n\t\t\tmap.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Render the source map being generated to a string.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toString =\r\n\t\tfunction SourceMapGenerator_toString() {\r\n\t\treturn JSON.stringify(this.toJSON());\r\n\t\t};\r\n\r\n\texports.SourceMapGenerator = SourceMapGenerator;\r\n\r\n\r\n/***/ },\r\n/* 2 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*\r\n\t* Based on the Base 64 VLQ implementation in Closure Compiler:\r\n\t* https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\r\n\t*\r\n\t* Copyright 2011 The Closure Compiler Authors. All rights reserved.\r\n\t* Redistribution and use in source and binary forms, with or without\r\n\t* modification, are permitted provided that the following conditions are\r\n\t* met:\r\n\t*\r\n\t*  * Redistributions of source code must retain the above copyright\r\n\t*    notice, this list of conditions and the following disclaimer.\r\n\t*  * Redistributions in binary form must reproduce the above\r\n\t*    copyright notice, this list of conditions and the following\r\n\t*    disclaimer in the documentation and/or other materials provided\r\n\t*    with the distribution.\r\n\t*  * Neither the name of Google Inc. nor the names of its\r\n\t*    contributors may be used to endorse or promote products derived\r\n\t*    from this software without specific prior written permission.\r\n\t*\r\n\t* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n\t* \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n\t* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n\t* A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n\t* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n\t* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n\t* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n\t* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n\t* THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n\t* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n\t* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t*/\r\n\r\n\tvar base64 = __webpack_require__(3);\r\n\r\n\t// A single base 64 digit can contain 6 bits of data. For the base 64 variable\r\n\t// length quantities we use in the source map spec, the first bit is the sign,\r\n\t// the next four bits are the actual value, and the 6th bit is the\r\n\t// continuation bit. The continuation bit tells us whether there are more\r\n\t// digits in this value following this digit.\r\n\t//\r\n\t//   Continuation\r\n\t//   |    Sign\r\n\t//   |    |\r\n\t//   V    V\r\n\t//   101011\r\n\r\n\tvar VLQ_BASE_SHIFT = 5;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\r\n\r\n\t// binary: 011111\r\n\tvar VLQ_BASE_MASK = VLQ_BASE - 1;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_CONTINUATION_BIT = VLQ_BASE;\r\n\r\n\t/**\r\n\t* Converts from a two-complement value to a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\r\n\t*   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\r\n\t*/\r\n\tfunction toVLQSigned(aValue) {\r\n\t\treturn aValue < 0\r\n\t\t? ((-aValue) << 1) + 1\r\n\t\t: (aValue << 1) + 0;\r\n\t}\r\n\r\n\t/**\r\n\t* Converts to a two-complement value from a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\r\n\t*   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\r\n\t*/\r\n\tfunction fromVLQSigned(aValue) {\r\n\t\tvar isNegative = (aValue & 1) === 1;\r\n\t\tvar shifted = aValue >> 1;\r\n\t\treturn isNegative\r\n\t\t? -shifted\r\n\t\t: shifted;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the base 64 VLQ encoded value.\r\n\t*/\r\n\texports.encode = function base64VLQ_encode(aValue) {\r\n\t\tvar encoded = \"\";\r\n\t\tvar digit;\r\n\r\n\t\tvar vlq = toVLQSigned(aValue);\r\n\r\n\t\tdo {\r\n\t\tdigit = vlq & VLQ_BASE_MASK;\r\n\t\tvlq >>>= VLQ_BASE_SHIFT;\r\n\t\tif (vlq > 0) {\r\n\t\t\t// There are still more digits in this value, so we must make sure the\r\n\t\t\t// continuation bit is marked.\r\n\t\t\tdigit |= VLQ_CONTINUATION_BIT;\r\n\t\t}\r\n\t\tencoded += base64.encode(digit);\r\n\t\t} while (vlq > 0);\r\n\r\n\t\treturn encoded;\r\n\t};\r\n\r\n\t/**\r\n\t* Decodes the next base 64 VLQ value from the given string and returns the\r\n\t* value and the rest of the string via the out parameter.\r\n\t*/\r\n\texports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\r\n\t\tvar strLen = aStr.length;\r\n\t\tvar result = 0;\r\n\t\tvar shift = 0;\r\n\t\tvar continuation, digit;\r\n\r\n\t\tdo {\r\n\t\tif (aIndex >= strLen) {\r\n\t\t\tthrow new Error(\"Expected more digits in base 64 VLQ value.\");\r\n\t\t}\r\n\r\n\t\tdigit = base64.decode(aStr.charCodeAt(aIndex++));\r\n\t\tif (digit === -1) {\r\n\t\t\tthrow new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\r\n\t\t}\r\n\r\n\t\tcontinuation = !!(digit & VLQ_CONTINUATION_BIT);\r\n\t\tdigit &= VLQ_BASE_MASK;\r\n\t\tresult = result + (digit << shift);\r\n\t\tshift += VLQ_BASE_SHIFT;\r\n\t\t} while (continuation);\r\n\r\n\t\taOutParam.value = fromVLQSigned(result);\r\n\t\taOutParam.rest = aIndex;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 3 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\r\n\r\n\t/**\r\n\t* Encode an integer in the range of 0 to 63 to a single base 64 digit.\r\n\t*/\r\n\texports.encode = function (number) {\r\n\t\tif (0 <= number && number < intToCharMap.length) {\r\n\t\treturn intToCharMap[number];\r\n\t\t}\r\n\t\tthrow new TypeError(\"Must be between 0 and 63: \" + number);\r\n\t};\r\n\r\n\t/**\r\n\t* Decode a single base 64 character code digit to an integer. Returns -1 on\r\n\t* failure.\r\n\t*/\r\n\texports.decode = function (charCode) {\r\n\t\tvar bigA = 65;     // 'A'\r\n\t\tvar bigZ = 90;     // 'Z'\r\n\r\n\t\tvar littleA = 97;  // 'a'\r\n\t\tvar littleZ = 122; // 'z'\r\n\r\n\t\tvar zero = 48;     // '0'\r\n\t\tvar nine = 57;     // '9'\r\n\r\n\t\tvar plus = 43;     // '+'\r\n\t\tvar slash = 47;    // '/'\r\n\r\n\t\tvar littleOffset = 26;\r\n\t\tvar numberOffset = 52;\r\n\r\n\t\t// 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\r\n\t\tif (bigA <= charCode && charCode <= bigZ) {\r\n\t\treturn (charCode - bigA);\r\n\t\t}\r\n\r\n\t\t// 26 - 51: abcdefghijklmnopqrstuvwxyz\r\n\t\tif (littleA <= charCode && charCode <= littleZ) {\r\n\t\treturn (charCode - littleA + littleOffset);\r\n\t\t}\r\n\r\n\t\t// 52 - 61: 0123456789\r\n\t\tif (zero <= charCode && charCode <= nine) {\r\n\t\treturn (charCode - zero + numberOffset);\r\n\t\t}\r\n\r\n\t\t// 62: +\r\n\t\tif (charCode == plus) {\r\n\t\treturn 62;\r\n\t\t}\r\n\r\n\t\t// 63: /\r\n\t\tif (charCode == slash) {\r\n\t\treturn 63;\r\n\t\t}\r\n\r\n\t\t// Invalid base64 digit.\r\n\t\treturn -1;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 4 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t/**\r\n\t* This is a helper function for getting values from parameter/options\r\n\t* objects.\r\n\t*\r\n\t* @param args The object we are extracting values from\r\n\t* @param name The name of the property we are getting.\r\n\t* @param defaultValue An optional value to return if the property is missing\r\n\t* from the object. If this is not specified and the property is missing, an\r\n\t* error will be thrown.\r\n\t*/\r\n\tfunction getArg(aArgs, aName, aDefaultValue) {\r\n\t\tif (aName in aArgs) {\r\n\t\treturn aArgs[aName];\r\n\t\t} else if (arguments.length === 3) {\r\n\t\treturn aDefaultValue;\r\n\t\t} else {\r\n\t\tthrow new Error('\"' + aName + '\" is a required argument.');\r\n\t\t}\r\n\t}\r\n\texports.getArg = getArg;\r\n\r\n\tvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\r\n\tvar dataUrlRegexp = /^data:.+\\,.+$/;\r\n\r\n\tfunction urlParse(aUrl) {\r\n\t\tvar match = aUrl.match(urlRegexp);\r\n\t\tif (!match) {\r\n\t\treturn null;\r\n\t\t}\r\n\t\treturn {\r\n\t\tscheme: match[1],\r\n\t\tauth: match[2],\r\n\t\thost: match[3],\r\n\t\tport: match[4],\r\n\t\tpath: match[5]\r\n\t\t};\r\n\t}\r\n\texports.urlParse = urlParse;\r\n\r\n\tfunction urlGenerate(aParsedUrl) {\r\n\t\tvar url = '';\r\n\t\tif (aParsedUrl.scheme) {\r\n\t\turl += aParsedUrl.scheme + ':';\r\n\t\t}\r\n\t\turl += '//';\r\n\t\tif (aParsedUrl.auth) {\r\n\t\turl += aParsedUrl.auth + '@';\r\n\t\t}\r\n\t\tif (aParsedUrl.host) {\r\n\t\turl += aParsedUrl.host;\r\n\t\t}\r\n\t\tif (aParsedUrl.port) {\r\n\t\turl += \":\" + aParsedUrl.port\r\n\t\t}\r\n\t\tif (aParsedUrl.path) {\r\n\t\turl += aParsedUrl.path;\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\texports.urlGenerate = urlGenerate;\r\n\r\n\t/**\r\n\t* Normalizes a path, or the path portion of a URL:\r\n\t*\r\n\t* - Replaces consequtive slashes with one slash.\r\n\t* - Removes unnecessary '.' parts.\r\n\t* - Removes unnecessary '<dir>/..' parts.\r\n\t*\r\n\t* Based on code in the Node.js 'path' core module.\r\n\t*\r\n\t* @param aPath The path or url to normalize.\r\n\t*/\r\n\tfunction normalize(aPath) {\r\n\t\tvar path = aPath;\r\n\t\tvar url = urlParse(aPath);\r\n\t\tif (url) {\r\n\t\tif (!url.path) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\t\tpath = url.path;\r\n\t\t}\r\n\t\tvar isAbsolute = exports.isAbsolute(path);\r\n\r\n\t\tvar parts = path.split(/\\/+/);\r\n\t\tfor (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\r\n\t\tpart = parts[i];\r\n\t\tif (part === '.') {\r\n\t\t\tparts.splice(i, 1);\r\n\t\t} else if (part === '..') {\r\n\t\t\tup++;\r\n\t\t} else if (up > 0) {\r\n\t\t\tif (part === '') {\r\n\t\t\t// The first part is blank if the path is absolute. Trying to go\r\n\t\t\t// above the root is a no-op. Therefore we can remove all '..' parts\r\n\t\t\t// directly after the root.\r\n\t\t\tparts.splice(i + 1, up);\r\n\t\t\tup = 0;\r\n\t\t\t} else {\r\n\t\t\tparts.splice(i, 2);\r\n\t\t\tup--;\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t\tpath = parts.join('/');\r\n\r\n\t\tif (path === '') {\r\n\t\tpath = isAbsolute ? '/' : '.';\r\n\t\t}\r\n\r\n\t\tif (url) {\r\n\t\turl.path = path;\r\n\t\treturn urlGenerate(url);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\texports.normalize = normalize;\r\n\r\n\t/**\r\n\t* Joins two paths/URLs.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be joined with the root.\r\n\t*\r\n\t* - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\r\n\t*   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\r\n\t*   first.\r\n\t* - Otherwise aPath is a path. If aRoot is a URL, then its path portion\r\n\t*   is updated with the result and aRoot is returned. Otherwise the result\r\n\t*   is returned.\r\n\t*   - If aPath is absolute, the result is aPath.\r\n\t*   - Otherwise the two paths are joined with a slash.\r\n\t* - Joining for example 'http://' and 'www.example.com' is also supported.\r\n\t*/\r\n\tfunction join(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\t\tif (aPath === \"\") {\r\n\t\taPath = \".\";\r\n\t\t}\r\n\t\tvar aPathUrl = urlParse(aPath);\r\n\t\tvar aRootUrl = urlParse(aRoot);\r\n\t\tif (aRootUrl) {\r\n\t\taRoot = aRootUrl.path || '/';\r\n\t\t}\r\n\r\n\t\t// `join(foo, '//www.example.org')`\r\n\t\tif (aPathUrl && !aPathUrl.scheme) {\r\n\t\tif (aRootUrl) {\r\n\t\t\taPathUrl.scheme = aRootUrl.scheme;\r\n\t\t}\r\n\t\treturn urlGenerate(aPathUrl);\r\n\t\t}\r\n\r\n\t\tif (aPathUrl || aPath.match(dataUrlRegexp)) {\r\n\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// `join('http://', 'www.example.com')`\r\n\t\tif (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\r\n\t\taRootUrl.host = aPath;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\r\n\t\tvar joined = aPath.charAt(0) === '/'\r\n\t\t? aPath\r\n\t\t: normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\r\n\r\n\t\tif (aRootUrl) {\r\n\t\taRootUrl.path = joined;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\t\treturn joined;\r\n\t}\r\n\texports.join = join;\r\n\r\n\texports.isAbsolute = function (aPath) {\r\n\t\treturn aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\r\n\t};\r\n\r\n\t/**\r\n\t* Make a path relative to a URL or another path.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be made relative to aRoot.\r\n\t*/\r\n\tfunction relative(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\r\n\t\taRoot = aRoot.replace(/\\/$/, '');\r\n\r\n\t\t// It is possible for the path to be above the root. In this case, simply\r\n\t\t// checking whether the root is a prefix of the path won't work. Instead, we\r\n\t\t// need to remove components from the root one by one, until either we find\r\n\t\t// a prefix that fits, or we run out of components to remove.\r\n\t\tvar level = 0;\r\n\t\twhile (aPath.indexOf(aRoot + '/') !== 0) {\r\n\t\tvar index = aRoot.lastIndexOf(\"/\");\r\n\t\tif (index < 0) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// If the only part of the root that is left is the scheme (i.e. http://,\r\n\t\t// file:///, etc.), one or more slashes (/), or simply nothing at all, we\r\n\t\t// have exhausted all components, so the path is not relative to the root.\r\n\t\taRoot = aRoot.slice(0, index);\r\n\t\tif (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t++level;\r\n\t\t}\r\n\r\n\t\t// Make sure we add a \"../\" for each component we removed from the root.\r\n\t\treturn Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\r\n\t}\r\n\texports.relative = relative;\r\n\r\n\tvar supportsNullProto = (function () {\r\n\t\tvar obj = Object.create(null);\r\n\t\treturn !('__proto__' in obj);\r\n\t}());\r\n\r\n\tfunction identity (s) {\r\n\t\treturn s;\r\n\t}\r\n\r\n\t/**\r\n\t* Because behavior goes wacky when you set `__proto__` on objects, we\r\n\t* have to prefix all the strings in our set with an arbitrary character.\r\n\t*\r\n\t* See https://github.com/mozilla/source-map/pull/31 and\r\n\t* https://github.com/mozilla/source-map/issues/30\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tfunction toSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn '$' + aStr;\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.toSetString = supportsNullProto ? identity : toSetString;\r\n\r\n\tfunction fromSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn aStr.slice(1);\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.fromSetString = supportsNullProto ? identity : fromSetString;\r\n\r\n\tfunction isProtoString(s) {\r\n\t\tif (!s) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar length = s.length;\r\n\r\n\t\tif (length < 9 /* \"__proto__\".length */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 2) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 3) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 4) !== 116 /* 't' */ ||\r\n\t\t\ts.charCodeAt(length - 5) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 6) !== 114 /* 'r' */ ||\r\n\t\t\ts.charCodeAt(length - 7) !== 112 /* 'p' */ ||\r\n\t\t\ts.charCodeAt(length - 8) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 9) !== 95  /* '_' */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor (var i = length - 10; i >= 0; i--) {\r\n\t\tif (s.charCodeAt(i) !== 36 /* '$' */) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings where the original positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same original source/line/column, but different generated\r\n\t* line and column the same. Useful when searching for a mapping with a\r\n\t* stubbed out mapping.\r\n\t*/\r\n\tfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\r\n\t\tvar cmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0 || onlyCompareOriginal) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByOriginalPositions = compareByOriginalPositions;\r\n\r\n\t/**\r\n\t* Comparator between two mappings with deflated source and name indices where\r\n\t* the generated positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same generated line and column, but different\r\n\t* source/name/original line and column the same. Useful when searching for a\r\n\t* mapping with a stubbed out mapping.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0 || onlyCompareGenerated) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\r\n\r\n\tfunction strcmp(aStr1, aStr2) {\r\n\t\tif (aStr1 === aStr2) {\r\n\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif (aStr1 > aStr2) {\r\n\t\treturn 1;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings with inflated source and name strings where\r\n\t* the generated positions are compared.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = strcmp(mappingA.source, mappingB.source);\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn strcmp(mappingA.name, mappingB.name);\r\n\t}\r\n\texports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\r\n\r\n\r\n/***/ },\r\n/* 5 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar has = Object.prototype.hasOwnProperty;\r\n\r\n\t/**\r\n\t* A data structure which is a combination of an array and a set. Adding a new\r\n\t* member is O(1), testing for membership is O(1), and finding the index of an\r\n\t* element is O(1). Removing elements from the set is not supported. Only\r\n\t* strings are supported for membership.\r\n\t*/\r\n\tfunction ArraySet() {\r\n\t\tthis._array = [];\r\n\t\tthis._set = Object.create(null);\r\n\t}\r\n\r\n\t/**\r\n\t* Static method for creating ArraySet instances from an existing array.\r\n\t*/\r\n\tArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\r\n\t\tvar set = new ArraySet();\r\n\t\tfor (var i = 0, len = aArray.length; i < len; i++) {\r\n\t\tset.add(aArray[i], aAllowDuplicates);\r\n\t\t}\r\n\t\treturn set;\r\n\t};\r\n\r\n\t/**\r\n\t* Return how many unique items are in this ArraySet. If duplicates have been\r\n\t* added, than those do not count towards the size.\r\n\t*\r\n\t* @returns Number\r\n\t*/\r\n\tArraySet.prototype.size = function ArraySet_size() {\r\n\t\treturn Object.getOwnPropertyNames(this._set).length;\r\n\t};\r\n\r\n\t/**\r\n\t* Add the given string to this set.\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tvar isDuplicate = has.call(this._set, sStr);\r\n\t\tvar idx = this._array.length;\r\n\t\tif (!isDuplicate || aAllowDuplicates) {\r\n\t\tthis._array.push(aStr);\r\n\t\t}\r\n\t\tif (!isDuplicate) {\r\n\t\tthis._set[sStr] = idx;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Is the given string a member of this set?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.has = function ArraySet_has(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\treturn has.call(this._set, sStr);\r\n\t};\r\n\r\n\t/**\r\n\t* What is the index of the given string in the array?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tif (has.call(this._set, sStr)) {\r\n\t\treturn this._set[sStr];\r\n\t\t}\r\n\t\tthrow new Error('\"' + aStr + '\" is not in the set.');\r\n\t};\r\n\r\n\t/**\r\n\t* What is the element at the given index?\r\n\t*\r\n\t* @param Number aIdx\r\n\t*/\r\n\tArraySet.prototype.at = function ArraySet_at(aIdx) {\r\n\t\tif (aIdx >= 0 && aIdx < this._array.length) {\r\n\t\treturn this._array[aIdx];\r\n\t\t}\r\n\t\tthrow new Error('No element indexed by ' + aIdx);\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the array representation of this set (which has the proper indices\r\n\t* indicated by indexOf). Note that this is a copy of the internal array used\r\n\t* for storing the members so that no one can mess with internal state.\r\n\t*/\r\n\tArraySet.prototype.toArray = function ArraySet_toArray() {\r\n\t\treturn this._array.slice();\r\n\t};\r\n\r\n\texports.ArraySet = ArraySet;\r\n\r\n\r\n/***/ },\r\n/* 6 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2014 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t/**\r\n\t* Determine whether mappingB is after mappingA with respect to generated\r\n\t* position.\r\n\t*/\r\n\tfunction generatedPositionAfter(mappingA, mappingB) {\r\n\t\t// Optimized for most common case\r\n\t\tvar lineA = mappingA.generatedLine;\r\n\t\tvar lineB = mappingB.generatedLine;\r\n\t\tvar columnA = mappingA.generatedColumn;\r\n\t\tvar columnB = mappingB.generatedColumn;\r\n\t\treturn lineB > lineA || lineB == lineA && columnB >= columnA ||\r\n\t\t\tutil.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\r\n\t}\r\n\r\n\t/**\r\n\t* A data structure to provide a sorted view of accumulated mappings in a\r\n\t* performance conscious manner. It trades a neglibable overhead in general\r\n\t* case for a large speedup in case of mappings being added in order.\r\n\t*/\r\n\tfunction MappingList() {\r\n\t\tthis._array = [];\r\n\t\tthis._sorted = true;\r\n\t\t// Serves as infimum\r\n\t\tthis._last = {generatedLine: -1, generatedColumn: 0};\r\n\t}\r\n\r\n\t/**\r\n\t* Iterate through internal items. This method takes the same arguments that\r\n\t* `Array.prototype.forEach` takes.\r\n\t*\r\n\t* NOTE: The order of the mappings is NOT guaranteed.\r\n\t*/\r\n\tMappingList.prototype.unsortedForEach =\r\n\t\tfunction MappingList_forEach(aCallback, aThisArg) {\r\n\t\tthis._array.forEach(aCallback, aThisArg);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add the given source mapping.\r\n\t*\r\n\t* @param Object aMapping\r\n\t*/\r\n\tMappingList.prototype.add = function MappingList_add(aMapping) {\r\n\t\tif (generatedPositionAfter(this._last, aMapping)) {\r\n\t\tthis._last = aMapping;\r\n\t\tthis._array.push(aMapping);\r\n\t\t} else {\r\n\t\tthis._sorted = false;\r\n\t\tthis._array.push(aMapping);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the flat, sorted array of mappings. The mappings are sorted by\r\n\t* generated position.\r\n\t*\r\n\t* WARNING: This method returns internal data without copying, for\r\n\t* performance. The return value must NOT be mutated, and should be treated as\r\n\t* an immutable borrow. If you want to take ownership, you must make your own\r\n\t* copy.\r\n\t*/\r\n\tMappingList.prototype.toArray = function MappingList_toArray() {\r\n\t\tif (!this._sorted) {\r\n\t\tthis._array.sort(util.compareByGeneratedPositionsInflated);\r\n\t\tthis._sorted = true;\r\n\t\t}\r\n\t\treturn this._array;\r\n\t};\r\n\r\n\texports.MappingList = MappingList;\r\n\r\n\r\n/***/ },\r\n/* 7 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar binarySearch = __webpack_require__(8);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar quickSort = __webpack_require__(9).quickSort;\r\n\r\n\tfunction SourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\treturn sourceMap.sections != null\r\n\t\t? new IndexedSourceMapConsumer(sourceMap)\r\n\t\t: new BasicSourceMapConsumer(sourceMap);\r\n\t}\r\n\r\n\tSourceMapConsumer.fromSourceMap = function(aSourceMap) {\r\n\t\treturn BasicSourceMapConsumer.fromSourceMap(aSourceMap);\r\n\t}\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tSourceMapConsumer.prototype._version = 3;\r\n\r\n\t// `__generatedMappings` and `__originalMappings` are arrays that hold the\r\n\t// parsed mapping coordinates from the source map's \"mappings\" attribute. They\r\n\t// are lazily instantiated, accessed via the `_generatedMappings` and\r\n\t// `_originalMappings` getters respectively, and we only parse the mappings\r\n\t// and create these arrays once queried for a source location. We jump through\r\n\t// these hoops because there can be many thousands of mappings, and parsing\r\n\t// them is expensive, so we only want to do it if we must.\r\n\t//\r\n\t// Each object in the arrays is of the form:\r\n\t//\r\n\t//     {\r\n\t//       generatedLine: The line number in the generated code,\r\n\t//       generatedColumn: The column number in the generated code,\r\n\t//       source: The path to the original source file that generated this\r\n\t//               chunk of code,\r\n\t//       originalLine: The line number in the original source that\r\n\t//                     corresponds to this chunk of generated code,\r\n\t//       originalColumn: The column number in the original source that\r\n\t//                       corresponds to this chunk of generated code,\r\n\t//       name: The name of the original symbol which generated this chunk of\r\n\t//             code.\r\n\t//     }\r\n\t//\r\n\t// All properties except for `generatedLine` and `generatedColumn` can be\r\n\t// `null`.\r\n\t//\r\n\t// `_generatedMappings` is ordered by the generated positions.\r\n\t//\r\n\t// `_originalMappings` is ordered by the original positions.\r\n\r\n\tSourceMapConsumer.prototype.__generatedMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__generatedMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__generatedMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype.__originalMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__originalMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__originalMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype._charIsMappingSeparator =\r\n\t\tfunction SourceMapConsumer_charIsMappingSeparator(aStr, index) {\r\n\t\tvar c = aStr.charAt(index);\r\n\t\treturn c === \";\" || c === \",\";\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthrow new Error(\"Subclasses must implement _parseMappings\");\r\n\t\t};\r\n\r\n\tSourceMapConsumer.GENERATED_ORDER = 1;\r\n\tSourceMapConsumer.ORIGINAL_ORDER = 2;\r\n\r\n\tSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\r\n\tSourceMapConsumer.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Iterate over each mapping between an original source/line/column and a\r\n\t* generated line/column in this source map.\r\n\t*\r\n\t* @param Function aCallback\r\n\t*        The function that is called with each mapping.\r\n\t* @param Object aContext\r\n\t*        Optional. If specified, this object will be the value of `this` every\r\n\t*        time that `aCallback` is called.\r\n\t* @param aOrder\r\n\t*        Either `SourceMapConsumer.GENERATED_ORDER` or\r\n\t*        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\r\n\t*        iterate over the mappings sorted by the generated file's line/column\r\n\t*        order or the original's source/line/column order, respectively. Defaults to\r\n\t*        `SourceMapConsumer.GENERATED_ORDER`.\r\n\t*/\r\n\tSourceMapConsumer.prototype.eachMapping =\r\n\t\tfunction SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\r\n\t\tvar context = aContext || null;\r\n\t\tvar order = aOrder || SourceMapConsumer.GENERATED_ORDER;\r\n\r\n\t\tvar mappings;\r\n\t\tswitch (order) {\r\n\t\tcase SourceMapConsumer.GENERATED_ORDER:\r\n\t\t\tmappings = this._generatedMappings;\r\n\t\t\tbreak;\r\n\t\tcase SourceMapConsumer.ORIGINAL_ORDER:\r\n\t\t\tmappings = this._originalMappings;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(\"Unknown order of iteration.\");\r\n\t\t}\r\n\r\n\t\tvar sourceRoot = this.sourceRoot;\r\n\t\tmappings.map(function (mapping) {\r\n\t\t\tvar source = mapping.source === null ? null : this._sources.at(mapping.source);\r\n\t\t\tif (source != null && sourceRoot != null) {\r\n\t\t\tsource = util.join(sourceRoot, source);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\tsource: source,\r\n\t\t\tgeneratedLine: mapping.generatedLine,\r\n\t\t\tgeneratedColumn: mapping.generatedColumn,\r\n\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\tname: mapping.name === null ? null : this._names.at(mapping.name)\r\n\t\t\t};\r\n\t\t}, this).forEach(aCallback, context);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns all generated line and column information for the original source,\r\n\t* line, and column provided. If no column is provided, returns all mappings\r\n\t* corresponding to a either the line we are searching for or the next\r\n\t* closest line that has any mappings. Otherwise, returns all mappings\r\n\t* corresponding to the given line and either the column we are searching for\r\n\t* or the next closest column that has any offsets.\r\n\t*\r\n\t* The only argument is an object with the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: Optional. the column number in the original source.\r\n\t*\r\n\t* and an array of objects is returned, each with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tSourceMapConsumer.prototype.allGeneratedPositionsFor =\r\n\t\tfunction SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\r\n\t\tvar line = util.getArg(aArgs, 'line');\r\n\r\n\t\t// When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\r\n\t\t// returns the index of the closest mapping less than the needle. By\r\n\t\t// setting needle.originalColumn to 0, we thus find the last mapping for\r\n\t\t// the given line, provided such a mapping exists.\r\n\t\tvar needle = {\r\n\t\t\tsource: util.getArg(aArgs, 'source'),\r\n\t\t\toriginalLine: line,\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column', 0)\r\n\t\t};\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tneedle.source = util.relative(this.sourceRoot, needle.source);\r\n\t\t}\r\n\t\tif (!this._sources.has(needle.source)) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tneedle.source = this._sources.indexOf(needle.source);\r\n\r\n\t\tvar mappings = [];\r\n\r\n\t\tvar index = this._findMapping(needle,\r\n\t\t\t\t\t\t\t\t\t\tthis._originalMappings,\r\n\t\t\t\t\t\t\t\t\t\t\"originalLine\",\r\n\t\t\t\t\t\t\t\t\t\t\"originalColumn\",\r\n\t\t\t\t\t\t\t\t\t\tutil.compareByOriginalPositions,\r\n\t\t\t\t\t\t\t\t\t\tbinarySearch.LEAST_UPPER_BOUND);\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (aArgs.column === undefined) {\r\n\t\t\tvar originalLine = mapping.originalLine;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we found. Since\r\n\t\t\t// mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we found.\r\n\t\t\twhile (mapping && mapping.originalLine === originalLine) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tvar originalColumn = mapping.originalColumn;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we were searching for.\r\n\t\t\t// Since mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we are searching for.\r\n\t\t\twhile (mapping &&\r\n\t\t\t\t\tmapping.originalLine === line &&\r\n\t\t\t\t\tmapping.originalColumn == originalColumn) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mappings;\r\n\t\t};\r\n\r\n\texports.SourceMapConsumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* A BasicSourceMapConsumer instance represents a parsed source map which we can\r\n\t* query for information about the original file positions by giving it a file\r\n\t* position in the generated source.\r\n\t*\r\n\t* The only parameter is the raw source map (either as a JSON string, or\r\n\t* already parsed to an object). According to the spec, source maps have the\r\n\t* following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - sources: An array of URLs to the original source files.\r\n\t*   - names: An array of identifiers which can be referrenced by individual mappings.\r\n\t*   - sourceRoot: Optional. The URL root from which all sources are relative.\r\n\t*   - sourcesContent: Optional. An array of contents of the original source files.\r\n\t*   - mappings: A string of base64 VLQs which contain the actual mappings.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*\r\n\t* Here is an example source map, taken from the source map spec[0]:\r\n\t*\r\n\t*     {\r\n\t*       version : 3,\r\n\t*       file: \"out.js\",\r\n\t*       sourceRoot : \"\",\r\n\t*       sources: [\"foo.js\", \"bar.js\"],\r\n\t*       names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*       mappings: \"AA,AB;;ABCDE;\"\r\n\t*     }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\r\n\t*/\r\n\tfunction BasicSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sources = util.getArg(sourceMap, 'sources');\r\n\t\t// Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\r\n\t\t// requires the array) to play nice here.\r\n\t\tvar names = util.getArg(sourceMap, 'names', []);\r\n\t\tvar sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\r\n\t\tvar sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\r\n\t\tvar mappings = util.getArg(sourceMap, 'mappings');\r\n\t\tvar file = util.getArg(sourceMap, 'file', null);\r\n\r\n\t\t// Once again, Sass deviates from the spec and supplies the version as a\r\n\t\t// string rather than a number, so we use loose equality checking here.\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tsources = sources\r\n\t\t.map(String)\r\n\t\t// Some source maps produce relative source paths like \"./foo.js\" instead of\r\n\t\t// \"foo.js\".  Normalize these first so that future comparisons will succeed.\r\n\t\t// See bugzil.la/1090768.\r\n\t\t.map(util.normalize)\r\n\t\t// Always ensure that absolute sources are internally stored relative to\r\n\t\t// the source root, if the source root is absolute. Not doing this would\r\n\t\t// be particularly problematic when the source root is a prefix of the\r\n\t\t// source (valid, but why??). See github issue #199 and bugzil.la/1188982.\r\n\t\t.map(function (source) {\r\n\t\t\treturn sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\r\n\t\t\t? util.relative(sourceRoot, source)\r\n\t\t\t: source;\r\n\t\t});\r\n\r\n\t\t// Pass `true` below to allow duplicate names and sources. While source maps\r\n\t\t// are intended to be compressed and deduplicated, the TypeScript compiler\r\n\t\t// sometimes generates source maps with duplicates in them. See Github issue\r\n\t\t// #72 and bugzil.la/889492.\r\n\t\tthis._names = ArraySet.fromArray(names.map(String), true);\r\n\t\tthis._sources = ArraySet.fromArray(sources, true);\r\n\r\n\t\tthis.sourceRoot = sourceRoot;\r\n\t\tthis.sourcesContent = sourcesContent;\r\n\t\tthis._mappings = mappings;\r\n\t\tthis.file = file;\r\n\t}\r\n\r\n\tBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* Create a BasicSourceMapConsumer from a SourceMapGenerator.\r\n\t*\r\n\t* @param SourceMapGenerator aSourceMap\r\n\t*        The source map that will be consumed.\r\n\t* @returns BasicSourceMapConsumer\r\n\t*/\r\n\tBasicSourceMapConsumer.fromSourceMap =\r\n\t\tfunction SourceMapConsumer_fromSourceMap(aSourceMap) {\r\n\t\tvar smc = Object.create(BasicSourceMapConsumer.prototype);\r\n\r\n\t\tvar names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\r\n\t\tvar sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\r\n\t\tsmc.sourceRoot = aSourceMap._sourceRoot;\r\n\t\tsmc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmc.sourceRoot);\r\n\t\tsmc.file = aSourceMap._file;\r\n\r\n\t\t// Because we are modifying the entries (by converting string sources and\r\n\t\t// names to indices into the sources and names ArraySets), we have to make\r\n\t\t// a copy of the entry or else bad things happen. Shared mutable state\r\n\t\t// strikes again! See github issue #191.\r\n\r\n\t\tvar generatedMappings = aSourceMap._mappings.toArray().slice();\r\n\t\tvar destGeneratedMappings = smc.__generatedMappings = [];\r\n\t\tvar destOriginalMappings = smc.__originalMappings = [];\r\n\r\n\t\tfor (var i = 0, length = generatedMappings.length; i < length; i++) {\r\n\t\t\tvar srcMapping = generatedMappings[i];\r\n\t\t\tvar destMapping = new Mapping;\r\n\t\t\tdestMapping.generatedLine = srcMapping.generatedLine;\r\n\t\t\tdestMapping.generatedColumn = srcMapping.generatedColumn;\r\n\r\n\t\t\tif (srcMapping.source) {\r\n\t\t\tdestMapping.source = sources.indexOf(srcMapping.source);\r\n\t\t\tdestMapping.originalLine = srcMapping.originalLine;\r\n\t\t\tdestMapping.originalColumn = srcMapping.originalColumn;\r\n\r\n\t\t\tif (srcMapping.name) {\r\n\t\t\t\tdestMapping.name = names.indexOf(srcMapping.name);\r\n\t\t\t}\r\n\r\n\t\t\tdestOriginalMappings.push(destMapping);\r\n\t\t\t}\r\n\r\n\t\t\tdestGeneratedMappings.push(destMapping);\r\n\t\t}\r\n\r\n\t\tquickSort(smc.__originalMappings, util.compareByOriginalPositions);\r\n\r\n\t\treturn smc;\r\n\t\t};\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\treturn this._sources.toArray().map(function (s) {\r\n\t\t\treturn this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\r\n\t\t}, this);\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Provide the JIT with a nice shape / hidden class.\r\n\t*/\r\n\tfunction Mapping() {\r\n\t\tthis.generatedLine = 0;\r\n\t\tthis.generatedColumn = 0;\r\n\t\tthis.source = null;\r\n\t\tthis.originalLine = null;\r\n\t\tthis.originalColumn = null;\r\n\t\tthis.name = null;\r\n\t}\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tvar generatedLine = 1;\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar length = aStr.length;\r\n\t\tvar index = 0;\r\n\t\tvar cachedSegments = {};\r\n\t\tvar temp = {};\r\n\t\tvar originalMappings = [];\r\n\t\tvar generatedMappings = [];\r\n\t\tvar mapping, str, segment, end, value;\r\n\r\n\t\twhile (index < length) {\r\n\t\t\tif (aStr.charAt(index) === ';') {\r\n\t\t\tgeneratedLine++;\r\n\t\t\tindex++;\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\t}\r\n\t\t\telse if (aStr.charAt(index) === ',') {\r\n\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tmapping = new Mapping();\r\n\t\t\tmapping.generatedLine = generatedLine;\r\n\r\n\t\t\t// Because each offset is encoded relative to the previous one,\r\n\t\t\t// many segments often have the same encoding. We can exploit this\r\n\t\t\t// fact by caching the parsed variable length fields of each segment,\r\n\t\t\t// allowing us to avoid a second parse if we encounter the same\r\n\t\t\t// segment again.\r\n\t\t\tfor (end = index; end < length; end++) {\r\n\t\t\t\tif (this._charIsMappingSeparator(aStr, end)) {\r\n\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstr = aStr.slice(index, end);\r\n\r\n\t\t\tsegment = cachedSegments[str];\r\n\t\t\tif (segment) {\r\n\t\t\t\tindex += str.length;\r\n\t\t\t} else {\r\n\t\t\t\tsegment = [];\r\n\t\t\t\twhile (index < end) {\r\n\t\t\t\tbase64VLQ.decode(aStr, index, temp);\r\n\t\t\t\tvalue = temp.value;\r\n\t\t\t\tindex = temp.rest;\r\n\t\t\t\tsegment.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 2) {\r\n\t\t\t\tthrow new Error('Found a source, but no line and column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 3) {\r\n\t\t\t\tthrow new Error('Found a source and line, but no column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcachedSegments[str] = segment;\r\n\t\t\t}\r\n\r\n\t\t\t// Generated column.\r\n\t\t\tmapping.generatedColumn = previousGeneratedColumn + segment[0];\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (segment.length > 1) {\r\n\t\t\t\t// Original source.\r\n\t\t\t\tmapping.source = previousSource + segment[1];\r\n\t\t\t\tpreviousSource += segment[1];\r\n\r\n\t\t\t\t// Original line.\r\n\t\t\t\tmapping.originalLine = previousOriginalLine + segment[2];\r\n\t\t\t\tpreviousOriginalLine = mapping.originalLine;\r\n\t\t\t\t// Lines are stored 0-based\r\n\t\t\t\tmapping.originalLine += 1;\r\n\r\n\t\t\t\t// Original column.\r\n\t\t\t\tmapping.originalColumn = previousOriginalColumn + segment[3];\r\n\t\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\t\tif (segment.length > 4) {\r\n\t\t\t\t// Original name.\r\n\t\t\t\tmapping.name = previousName + segment[4];\r\n\t\t\t\tpreviousName += segment[4];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgeneratedMappings.push(mapping);\r\n\t\t\tif (typeof mapping.originalLine === 'number') {\r\n\t\t\t\toriginalMappings.push(mapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tthis.__generatedMappings = generatedMappings;\r\n\r\n\t\tquickSort(originalMappings, util.compareByOriginalPositions);\r\n\t\tthis.__originalMappings = originalMappings;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Find the mapping that best matches the hypothetical \"needle\" mapping that\r\n\t* we are searching for in the given \"haystack\" of mappings.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._findMapping =\r\n\t\tfunction SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\r\n\t\t\t\t\t\t\t\t\t\t\taColumnName, aComparator, aBias) {\r\n\t\t// To return the position we are searching for, we must first find the\r\n\t\t// mapping for the given position and then return the opposite position it\r\n\t\t// points to. Because the mappings are sorted, we can use binary search to\r\n\t\t// find the best mapping.\r\n\r\n\t\tif (aNeedle[aLineName] <= 0) {\r\n\t\t\tthrow new TypeError('Line must be greater than or equal to 1, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aLineName]);\r\n\t\t}\r\n\t\tif (aNeedle[aColumnName] < 0) {\r\n\t\t\tthrow new TypeError('Column must be greater than or equal to 0, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aColumnName]);\r\n\t\t}\r\n\r\n\t\treturn binarySearch.search(aNeedle, aMappings, aComparator, aBias);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Compute the last column for each generated mapping. The last column is\r\n\t* inclusive.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.computeColumnSpans =\r\n\t\tfunction SourceMapConsumer_computeColumnSpans() {\r\n\t\tfor (var index = 0; index < this._generatedMappings.length; ++index) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\t// Mappings do not contain a field for the last generated columnt. We\r\n\t\t\t// can come up with an optimistic estimate, however, by assuming that\r\n\t\t\t// mappings are contiguous (i.e. given two consecutive mappings, the\r\n\t\t\t// first mapping ends where the second one starts).\r\n\t\t\tif (index + 1 < this._generatedMappings.length) {\r\n\t\t\tvar nextMapping = this._generatedMappings[index + 1];\r\n\r\n\t\t\tif (mapping.generatedLine === nextMapping.generatedLine) {\r\n\t\t\t\tmapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// The last mapping for each line spans the entire line.\r\n\t\t\tmapping.lastGeneratedColumn = Infinity;\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction SourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._generatedMappings,\r\n\t\t\t\"generatedLine\",\r\n\t\t\t\"generatedColumn\",\r\n\t\t\tutil.compareByGeneratedPositionsDeflated,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\tif (mapping.generatedLine === needle.generatedLine) {\r\n\t\t\tvar source = util.getArg(mapping, 'source', null);\r\n\t\t\tif (source !== null) {\r\n\t\t\t\tsource = this._sources.at(source);\r\n\t\t\t\tif (this.sourceRoot != null) {\r\n\t\t\t\tsource = util.join(this.sourceRoot, source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar name = util.getArg(mapping, 'name', null);\r\n\t\t\tif (name !== null) {\r\n\t\t\t\tname = this._names.at(name);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tline: util.getArg(mapping, 'originalLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'originalColumn', null),\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction BasicSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.sourcesContent.length >= this._sources.size() &&\r\n\t\t\t!this.sourcesContent.some(function (sc) { return sc == null; });\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\taSource = util.relative(this.sourceRoot, aSource);\r\n\t\t}\r\n\r\n\t\tif (this._sources.has(aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(aSource)];\r\n\t\t}\r\n\r\n\t\tvar url;\r\n\t\tif (this.sourceRoot != null\r\n\t\t\t&& (url = util.urlParse(this.sourceRoot))) {\r\n\t\t\t// XXX: file:// URIs and absolute paths lead to unexpected behavior for\r\n\t\t\t// many users. We can help them out when they expect file:// URIs to\r\n\t\t\t// behave like it would if they were running a local HTTP server. See\r\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\r\n\t\t\tvar fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\r\n\t\t\tif (url.scheme == \"file\"\r\n\t\t\t\t&& this._sources.has(fileUriAbsPath)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\r\n\t\t\t}\r\n\r\n\t\t\tif ((!url.path || url.path == \"/\")\r\n\t\t\t\t&& this._sources.has(\"/\" + aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// This function is used recursively from\r\n\t\t// IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\r\n\t\t// don't want to throw if we can't find the source - we just want to\r\n\t\t// return null, so we provide a flag to exit gracefully.\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction SourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tvar source = util.getArg(aArgs, 'source');\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tsource = util.relative(this.sourceRoot, source);\r\n\t\t}\r\n\t\tif (!this._sources.has(source)) {\r\n\t\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t\t};\r\n\t\t}\r\n\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\tvar needle = {\r\n\t\t\tsource: source,\r\n\t\t\toriginalLine: util.getArg(aArgs, 'line'),\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._originalMappings,\r\n\t\t\t\"originalLine\",\r\n\t\t\t\"originalColumn\",\r\n\t\t\tutil.compareByOriginalPositions,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (mapping.source === needle.source) {\r\n\t\t\treturn {\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\texports.BasicSourceMapConsumer = BasicSourceMapConsumer;\r\n\r\n\t/**\r\n\t* An IndexedSourceMapConsumer instance represents a parsed source map which\r\n\t* we can query for information. It differs from BasicSourceMapConsumer in\r\n\t* that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\r\n\t* input.\r\n\t*\r\n\t* The only parameter is a raw source map (either as a JSON string, or already\r\n\t* parsed to an object). According to the spec for indexed source maps, they\r\n\t* have the following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*   - sections: A list of section definitions.\r\n\t*\r\n\t* Each value under the \"sections\" field has two fields:\r\n\t*   - offset: The offset into the original specified at which this section\r\n\t*       begins to apply, defined as an object with a \"line\" and \"column\"\r\n\t*       field.\r\n\t*   - map: A source map definition. This source map could also be indexed,\r\n\t*       but doesn't have to be.\r\n\t*\r\n\t* Instead of the \"map\" field, it's also possible to have a \"url\" field\r\n\t* specifying a URL to retrieve a source map from, but that's currently\r\n\t* unsupported.\r\n\t*\r\n\t* Here's an example source map, taken from the source map spec[0], but\r\n\t* modified to omit a section which uses the \"url\" field.\r\n\t*\r\n\t*  {\r\n\t*    version : 3,\r\n\t*    file: \"app.js\",\r\n\t*    sections: [{\r\n\t*      offset: {line:100, column:10},\r\n\t*      map: {\r\n\t*        version : 3,\r\n\t*        file: \"section.js\",\r\n\t*        sources: [\"foo.js\", \"bar.js\"],\r\n\t*        names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*        mappings: \"AAAA,E;;ABCDE;\"\r\n\t*      }\r\n\t*    }],\r\n\t*  }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\r\n\t*/\r\n\tfunction IndexedSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sections = util.getArg(sourceMap, 'sections');\r\n\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\r\n\t\tvar lastOffset = {\r\n\t\tline: -1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tthis._sections = sections.map(function (s) {\r\n\t\tif (s.url) {\r\n\t\t\t// The url field will require support for asynchronicity.\r\n\t\t\t// See https://github.com/mozilla/source-map/issues/16\r\n\t\t\tthrow new Error('Support for url field in sections not implemented.');\r\n\t\t}\r\n\t\tvar offset = util.getArg(s, 'offset');\r\n\t\tvar offsetLine = util.getArg(offset, 'line');\r\n\t\tvar offsetColumn = util.getArg(offset, 'column');\r\n\r\n\t\tif (offsetLine < lastOffset.line ||\r\n\t\t\t(offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\r\n\t\t\tthrow new Error('Section offsets must be ordered and non-overlapping.');\r\n\t\t}\r\n\t\tlastOffset = offset;\r\n\r\n\t\treturn {\r\n\t\t\tgeneratedOffset: {\r\n\t\t\t// The offset fields are 0-based, but we use 1-based indices when\r\n\t\t\t// encoding/decoding from VLQ.\r\n\t\t\tgeneratedLine: offsetLine + 1,\r\n\t\t\tgeneratedColumn: offsetColumn + 1\r\n\t\t\t},\r\n\t\t\tconsumer: new SourceMapConsumer(util.getArg(s, 'map'))\r\n\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\tvar sources = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tfor (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\r\n\t\t\tsources.push(this._sections[i].consumer.sources[j]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sources;\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\t// Find the section containing the generated position we're trying to map\r\n\t\t// to an original position.\r\n\t\tvar sectionIndex = binarySearch.search(needle, this._sections,\r\n\t\t\tfunction(needle, section) {\r\n\t\t\tvar cmp = needle.generatedLine - section.generatedOffset.generatedLine;\r\n\t\t\tif (cmp) {\r\n\t\t\t\treturn cmp;\r\n\t\t\t}\r\n\r\n\t\t\treturn (needle.generatedColumn -\r\n\t\t\t\t\tsection.generatedOffset.generatedColumn);\r\n\t\t\t});\r\n\t\tvar section = this._sections[sectionIndex];\r\n\r\n\t\tif (!section) {\r\n\t\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn section.consumer.originalPositionFor({\r\n\t\t\tline: needle.generatedLine -\r\n\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\tcolumn: needle.generatedColumn -\r\n\t\t\t(section.generatedOffset.generatedLine === needle.generatedLine\r\n\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t: 0),\r\n\t\t\tbias: aArgs.bias\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction IndexedSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\treturn this._sections.every(function (s) {\r\n\t\t\treturn s.consumer.hasContentsOfAllSources();\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\tvar content = section.consumer.sourceContentFor(aSource, true);\r\n\t\t\tif (content) {\r\n\t\t\treturn content;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\t// Only consider this section if the requested source is in the list of\r\n\t\t\t// sources of the consumer.\r\n\t\t\tif (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\r\n\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar generatedPosition = section.consumer.generatedPositionFor(aArgs);\r\n\t\t\tif (generatedPosition) {\r\n\t\t\tvar ret = {\r\n\t\t\t\tline: generatedPosition.line +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tcolumn: generatedPosition.column +\r\n\t\t\t\t(section.generatedOffset.generatedLine === generatedPosition.line\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0)\r\n\t\t\t};\r\n\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthis.__generatedMappings = [];\r\n\t\tthis.__originalMappings = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\t\t\tvar sectionMappings = section.consumer._generatedMappings;\r\n\t\t\tfor (var j = 0; j < sectionMappings.length; j++) {\r\n\t\t\tvar mapping = sectionMappings[j];\r\n\r\n\t\t\tvar source = section.consumer._sources.at(mapping.source);\r\n\t\t\tif (section.consumer.sourceRoot !== null) {\r\n\t\t\t\tsource = util.join(section.consumer.sourceRoot, source);\r\n\t\t\t}\r\n\t\t\tthis._sources.add(source);\r\n\t\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\t\tvar name = section.consumer._names.at(mapping.name);\r\n\t\t\tthis._names.add(name);\r\n\t\t\tname = this._names.indexOf(name);\r\n\r\n\t\t\t// The mappings coming from the consumer for the section have\r\n\t\t\t// generated positions relative to the start of the section, so we\r\n\t\t\t// need to offset them to be relative to the start of the concatenated\r\n\t\t\t// generated file.\r\n\t\t\tvar adjustedMapping = {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tgeneratedLine: mapping.generatedLine +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tgeneratedColumn: mapping.generatedColumn +\r\n\t\t\t\t(section.generatedOffset.generatedLine === mapping.generatedLine\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0),\r\n\t\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t\tthis.__generatedMappings.push(adjustedMapping);\r\n\t\t\tif (typeof adjustedMapping.originalLine === 'number') {\r\n\t\t\t\tthis.__originalMappings.push(adjustedMapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tquickSort(this.__originalMappings, util.compareByOriginalPositions);\r\n\t\t};\r\n\r\n\texports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\r\n\r\n\r\n/***/ },\r\n/* 8 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\texports.GREATEST_LOWER_BOUND = 1;\r\n\texports.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Recursive implementation of binary search.\r\n\t*\r\n\t* @param aLow Indices here and lower do not contain the needle.\r\n\t* @param aHigh Indices here and higher do not contain the needle.\r\n\t* @param aNeedle The element being searched for.\r\n\t* @param aHaystack The non-empty array being searched.\r\n\t* @param aCompare Function which takes two elements and returns -1, 0, or 1.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*/\r\n\tfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\r\n\t\t// This function terminates when one of the following is true:\r\n\t\t//\r\n\t\t//   1. We find the exact element we are looking for.\r\n\t\t//\r\n\t\t//   2. We did not find the exact element, but we can return the index of\r\n\t\t//      the next-closest element.\r\n\t\t//\r\n\t\t//   3. We did not find the exact element, and there is no next-closest\r\n\t\t//      element than the one we are searching for, so we return -1.\r\n\t\tvar mid = Math.floor((aHigh - aLow) / 2) + aLow;\r\n\t\tvar cmp = aCompare(aNeedle, aHaystack[mid], true);\r\n\t\tif (cmp === 0) {\r\n\t\t// Found the element we are looking for.\r\n\t\treturn mid;\r\n\t\t}\r\n\t\telse if (cmp > 0) {\r\n\t\t// Our needle is greater than aHaystack[mid].\r\n\t\tif (aHigh - mid > 1) {\r\n\t\t\t// The element is in the upper half.\r\n\t\t\treturn recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// The exact needle element was not found in this haystack. Determine if\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn aHigh < aHaystack.length ? aHigh : -1;\r\n\t\t} else {\r\n\t\t\treturn mid;\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t// Our needle is less than aHaystack[mid].\r\n\t\tif (mid - aLow > 1) {\r\n\t\t\t// The element is in the lower half.\r\n\t\t\treturn recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn mid;\r\n\t\t} else {\r\n\t\t\treturn aLow < 0 ? -1 : aLow;\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* This is an implementation of binary search which will always try and return\r\n\t* the index of the closest element if there is no exact hit. This is because\r\n\t* mappings between original and generated line/col pairs are single points,\r\n\t* and there is an implicit region between each of them, so a miss just means\r\n\t* that you aren't on the very start of a region.\r\n\t*\r\n\t* @param aNeedle The element you are looking for.\r\n\t* @param aHaystack The array that is being searched.\r\n\t* @param aCompare A function which takes the needle and an element in the\r\n\t*     array and returns -1, 0, or 1 depending on whether the needle is less\r\n\t*     than, equal to, or greater than the element, respectively.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\r\n\t*/\r\n\texports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\r\n\t\tif (aHaystack.length === 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tvar index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\r\n\t\t\t\t\t\t\t\t\taCompare, aBias || exports.GREATEST_LOWER_BOUND);\r\n\t\tif (index < 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\t// We have found either the exact element, or the next-closest element than\r\n\t\t// the one we are searching for. However, there may be more than one such\r\n\t\t// element. Make sure we always return the smallest of these.\r\n\t\twhile (index - 1 >= 0) {\r\n\t\tif (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t--index;\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 9 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t// It turns out that some (most?) JavaScript engines don't self-host\r\n\t// `Array.prototype.sort`. This makes sense because C++ will likely remain\r\n\t// faster than JS when doing raw CPU-intensive sorting. However, when using a\r\n\t// custom comparator function, calling back and forth between the VM's C++ and\r\n\t// JIT'd JS is rather slow *and* loses JIT type information, resulting in\r\n\t// worse generated code for the comparator function than would be optimal. In\r\n\t// fact, when sorting with a comparator, these costs outweigh the benefits of\r\n\t// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\r\n\t// a ~3500ms mean speed-up in `bench/bench.html`.\r\n\r\n\t/**\r\n\t* Swap the elements indexed by `x` and `y` in the array `ary`.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        The array.\r\n\t* @param {Number} x\r\n\t*        The index of the first item.\r\n\t* @param {Number} y\r\n\t*        The index of the second item.\r\n\t*/\r\n\tfunction swap(ary, x, y) {\r\n\t\tvar temp = ary[x];\r\n\t\tary[x] = ary[y];\r\n\t\tary[y] = temp;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a random integer within the range `low .. high` inclusive.\r\n\t*\r\n\t* @param {Number} low\r\n\t*        The lower bound on the range.\r\n\t* @param {Number} high\r\n\t*        The upper bound on the range.\r\n\t*/\r\n\tfunction randomIntInRange(low, high) {\r\n\t\treturn Math.round(low + (Math.random() * (high - low)));\r\n\t}\r\n\r\n\t/**\r\n\t* The Quick Sort algorithm.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t* @param {Number} p\r\n\t*        Start index of the array\r\n\t* @param {Number} r\r\n\t*        End index of the array\r\n\t*/\r\n\tfunction doQuickSort(ary, comparator, p, r) {\r\n\t\t// If our lower bound is less than our upper bound, we (1) partition the\r\n\t\t// array into two pieces and (2) recurse on each half. If it is not, this is\r\n\t\t// the empty array and our base case.\r\n\r\n\t\tif (p < r) {\r\n\t\t// (1) Partitioning.\r\n\t\t//\r\n\t\t// The partitioning chooses a pivot between `p` and `r` and moves all\r\n\t\t// elements that are less than or equal to the pivot to the before it, and\r\n\t\t// all the elements that are greater than it after it. The effect is that\r\n\t\t// once partition is done, the pivot is in the exact place it will be when\r\n\t\t// the array is put in sorted order, and it will not need to be moved\r\n\t\t// again. This runs in O(n) time.\r\n\r\n\t\t// Always choose a random pivot so that an input array which is reverse\r\n\t\t// sorted does not cause O(n^2) running time.\r\n\t\tvar pivotIndex = randomIntInRange(p, r);\r\n\t\tvar i = p - 1;\r\n\r\n\t\tswap(ary, pivotIndex, r);\r\n\t\tvar pivot = ary[r];\r\n\r\n\t\t// Immediately after `j` is incremented in this loop, the following hold\r\n\t\t// true:\r\n\t\t//\r\n\t\t//   * Every element in `ary[p .. i]` is less than or equal to the pivot.\r\n\t\t//\r\n\t\t//   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\r\n\t\tfor (var j = p; j < r; j++) {\r\n\t\t\tif (comparator(ary[j], pivot) <= 0) {\r\n\t\t\ti += 1;\r\n\t\t\tswap(ary, i, j);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswap(ary, i + 1, j);\r\n\t\tvar q = i + 1;\r\n\r\n\t\t// (2) Recurse on each half.\r\n\r\n\t\tdoQuickSort(ary, comparator, p, q - 1);\r\n\t\tdoQuickSort(ary, comparator, q + 1, r);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Sort the given array in-place with the given comparator function.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t*/\r\n\texports.quickSort = function (ary, comparator) {\r\n\t\tdoQuickSort(ary, comparator, 0, ary.length - 1);\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 10 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\r\n\t// operating systems these days (capturing the result).\r\n\tvar REGEX_NEWLINE = /(\\r?\\n)/;\r\n\r\n\t// Newline character code for charCodeAt() comparisons\r\n\tvar NEWLINE_CODE = 10;\r\n\r\n\t// Private symbol for identifying `SourceNode`s when multiple versions of\r\n\t// the source-map library are loaded. This MUST NOT CHANGE across\r\n\t// versions!\r\n\tvar isSourceNode = \"$$$isSourceNode$$$\";\r\n\r\n\t/**\r\n\t* SourceNodes provide a way to abstract over interpolating/concatenating\r\n\t* snippets of generated JavaScript source code while maintaining the line and\r\n\t* column information associated with the original source code.\r\n\t*\r\n\t* @param aLine The original line number.\r\n\t* @param aColumn The original column number.\r\n\t* @param aSource The original source's filename.\r\n\t* @param aChunks Optional. An array of strings which are snippets of\r\n\t*        generated JS, or other SourceNodes.\r\n\t* @param aName The original identifier.\r\n\t*/\r\n\tfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\r\n\t\tthis.children = [];\r\n\t\tthis.sourceContents = {};\r\n\t\tthis.line = aLine == null ? null : aLine;\r\n\t\tthis.column = aColumn == null ? null : aColumn;\r\n\t\tthis.source = aSource == null ? null : aSource;\r\n\t\tthis.name = aName == null ? null : aName;\r\n\t\tthis[isSourceNode] = true;\r\n\t\tif (aChunks != null) this.add(aChunks);\r\n\t}\r\n\r\n\t/**\r\n\t* Creates a SourceNode from generated code and a SourceMapConsumer.\r\n\t*\r\n\t* @param aGeneratedCode The generated code\r\n\t* @param aSourceMapConsumer The SourceMap for the generated code\r\n\t* @param aRelativePath Optional. The path that relative sources in the\r\n\t*        SourceMapConsumer should be relative to.\r\n\t*/\r\n\tSourceNode.fromStringWithSourceMap =\r\n\t\tfunction SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\r\n\t\t// The SourceNode we want to fill with the generated code\r\n\t\t// and the SourceMap\r\n\t\tvar node = new SourceNode();\r\n\r\n\t\t// All even indices of this array are one line of the generated code,\r\n\t\t// while all odd indices are the newlines between two adjacent lines\r\n\t\t// (since `REGEX_NEWLINE` captures its match).\r\n\t\t// Processed fragments are removed from this array, by calling `shiftNextLine`.\r\n\t\tvar remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\r\n\t\tvar shiftNextLine = function() {\r\n\t\t\tvar lineContents = remainingLines.shift();\r\n\t\t\t// The last line of a file might not have a newline.\r\n\t\t\tvar newLine = remainingLines.shift() || \"\";\r\n\t\t\treturn lineContents + newLine;\r\n\t\t};\r\n\r\n\t\t// We need to remember the position of \"remainingLines\"\r\n\t\tvar lastGeneratedLine = 1, lastGeneratedColumn = 0;\r\n\r\n\t\t// The generate SourceNodes we need a code range.\r\n\t\t// To extract it current and last mapping is used.\r\n\t\t// Here we store the last mapping.\r\n\t\tvar lastMapping = null;\r\n\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tif (lastMapping !== null) {\r\n\t\t\t// We add the code from \"lastMapping\" to \"mapping\":\r\n\t\t\t// First check if there is a new line in between.\r\n\t\t\tif (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\t\t// Associate first line with \"lastMapping\"\r\n\t\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t\tlastGeneratedLine++;\r\n\t\t\t\tlastGeneratedColumn = 0;\r\n\t\t\t\t// The remaining code is added without mapping\r\n\t\t\t} else {\r\n\t\t\t\t// There is no new line in between.\r\n\t\t\t\t// Associate the code between \"lastGeneratedColumn\" and\r\n\t\t\t\t// \"mapping.generatedColumn\" with \"lastMapping\"\r\n\t\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\t\tvar code = nextLine.substr(0, mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t\taddMappingWithCode(lastMapping, code);\r\n\t\t\t\t// No more remaining code, continue\r\n\t\t\t\tlastMapping = mapping;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\t// We add the generated code until the first mapping\r\n\t\t\t// to the SourceNode without any mapping.\r\n\t\t\t// Each line is added as separate string.\r\n\t\t\twhile (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\tnode.add(shiftNextLine());\r\n\t\t\tlastGeneratedLine++;\r\n\t\t\t}\r\n\t\t\tif (lastGeneratedColumn < mapping.generatedColumn) {\r\n\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\tnode.add(nextLine.substr(0, mapping.generatedColumn));\r\n\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn);\r\n\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t}\r\n\t\t\tlastMapping = mapping;\r\n\t\t}, this);\r\n\t\t// We have processed all mappings.\r\n\t\tif (remainingLines.length > 0) {\r\n\t\t\tif (lastMapping) {\r\n\t\t\t// Associate the remaining code in the current line with \"lastMapping\"\r\n\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t}\r\n\t\t\t// and add the remaining lines without any mapping\r\n\t\t\tnode.add(remainingLines.join(\"\"));\r\n\t\t}\r\n\r\n\t\t// Copy sourcesContent into SourceNode\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aRelativePath != null) {\r\n\t\t\t\tsourceFile = util.join(aRelativePath, sourceFile);\r\n\t\t\t}\r\n\t\t\tnode.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn node;\r\n\r\n\t\tfunction addMappingWithCode(mapping, code) {\r\n\t\t\tif (mapping === null || mapping.source === undefined) {\r\n\t\t\tnode.add(code);\r\n\t\t\t} else {\r\n\t\t\tvar source = aRelativePath\r\n\t\t\t\t? util.join(aRelativePath, mapping.source)\r\n\t\t\t\t: mapping.source;\r\n\t\t\tnode.add(new SourceNode(mapping.originalLine,\r\n\t\t\t\t\t\t\t\t\tmapping.originalColumn,\r\n\t\t\t\t\t\t\t\t\tsource,\r\n\t\t\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\t\t\tmapping.name));\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.add = function SourceNode_add(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\taChunk.forEach(function (chunk) {\r\n\t\t\tthis.add(chunk);\r\n\t\t}, this);\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tif (aChunk) {\r\n\t\t\tthis.children.push(aChunk);\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to the beginning of this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\tfor (var i = aChunk.length-1; i >= 0; i--) {\r\n\t\t\tthis.prepend(aChunk[i]);\r\n\t\t}\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tthis.children.unshift(aChunk);\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of JS snippets in this node and its children. The\r\n\t* walking function is called once for each snippet of JS and is passed that\r\n\t* snippet and the its original associated source's line/column location.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walk = function SourceNode_walk(aFn) {\r\n\t\tvar chunk;\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\tchunk = this.children[i];\r\n\t\tif (chunk[isSourceNode]) {\r\n\t\t\tchunk.walk(aFn);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (chunk !== '') {\r\n\t\t\taFn(chunk, { source: this.source,\r\n\t\t\t\t\t\tline: this.line,\r\n\t\t\t\t\t\tcolumn: this.column,\r\n\t\t\t\t\t\tname: this.name });\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\r\n\t* each of `this.children`.\r\n\t*\r\n\t* @param aSep The separator.\r\n\t*/\r\n\tSourceNode.prototype.join = function SourceNode_join(aSep) {\r\n\t\tvar newChildren;\r\n\t\tvar i;\r\n\t\tvar len = this.children.length;\r\n\t\tif (len > 0) {\r\n\t\tnewChildren = [];\r\n\t\tfor (i = 0; i < len-1; i++) {\r\n\t\t\tnewChildren.push(this.children[i]);\r\n\t\t\tnewChildren.push(aSep);\r\n\t\t}\r\n\t\tnewChildren.push(this.children[i]);\r\n\t\tthis.children = newChildren;\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Call String.prototype.replace on the very right-most source snippet. Useful\r\n\t* for trimming whitespace from the end of a source node, etc.\r\n\t*\r\n\t* @param aPattern The pattern to replace.\r\n\t* @param aReplacement The thing to replace the pattern with.\r\n\t*/\r\n\tSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\r\n\t\tvar lastChild = this.children[this.children.length - 1];\r\n\t\tif (lastChild[isSourceNode]) {\r\n\t\tlastChild.replaceRight(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse if (typeof lastChild === 'string') {\r\n\t\tthis.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse {\r\n\t\tthis.children.push(''.replace(aPattern, aReplacement));\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file. This will be added to the SourceMapGenerator\r\n\t* in the sourcesContent field.\r\n\t*\r\n\t* @param aSourceFile The filename of the source file\r\n\t* @param aSourceContent The content of the source file\r\n\t*/\r\n\tSourceNode.prototype.setSourceContent =\r\n\t\tfunction SourceNode_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tthis.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of SourceNodes. The walking function is called for each\r\n\t* source file content and is passed the filename and source content.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walkSourceContents =\r\n\t\tfunction SourceNode_walkSourceContents(aFn) {\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\t\tif (this.children[i][isSourceNode]) {\r\n\t\t\tthis.children[i].walkSourceContents(aFn);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sources = Object.keys(this.sourceContents);\r\n\t\tfor (var i = 0, len = sources.length; i < len; i++) {\r\n\t\t\taFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return the string representation of this source node. Walks over the tree\r\n\t* and concatenates all the various snippets together to one string.\r\n\t*/\r\n\tSourceNode.prototype.toString = function SourceNode_toString() {\r\n\t\tvar str = \"\";\r\n\t\tthis.walk(function (chunk) {\r\n\t\tstr += chunk;\r\n\t\t});\r\n\t\treturn str;\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the string representation of this source node along with a source\r\n\t* map.\r\n\t*/\r\n\tSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\r\n\t\tvar generated = {\r\n\t\tcode: \"\",\r\n\t\tline: 1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tvar map = new SourceMapGenerator(aArgs);\r\n\t\tvar sourceMappingActive = false;\r\n\t\tvar lastOriginalSource = null;\r\n\t\tvar lastOriginalLine = null;\r\n\t\tvar lastOriginalColumn = null;\r\n\t\tvar lastOriginalName = null;\r\n\t\tthis.walk(function (chunk, original) {\r\n\t\tgenerated.code += chunk;\r\n\t\tif (original.source !== null\r\n\t\t\t&& original.line !== null\r\n\t\t\t&& original.column !== null) {\r\n\t\t\tif(lastOriginalSource !== original.source\r\n\t\t\t|| lastOriginalLine !== original.line\r\n\t\t\t|| lastOriginalColumn !== original.column\r\n\t\t\t|| lastOriginalName !== original.name) {\r\n\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\tline: original.line,\r\n\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t});\r\n\t\t\t}\r\n\t\t\tlastOriginalSource = original.source;\r\n\t\t\tlastOriginalLine = original.line;\r\n\t\t\tlastOriginalColumn = original.column;\r\n\t\t\tlastOriginalName = original.name;\r\n\t\t\tsourceMappingActive = true;\r\n\t\t} else if (sourceMappingActive) {\r\n\t\t\tmap.addMapping({\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t}\r\n\t\t\t});\r\n\t\t\tlastOriginalSource = null;\r\n\t\t\tsourceMappingActive = false;\r\n\t\t}\r\n\t\tfor (var idx = 0, length = chunk.length; idx < length; idx++) {\r\n\t\t\tif (chunk.charCodeAt(idx) === NEWLINE_CODE) {\r\n\t\t\tgenerated.line++;\r\n\t\t\tgenerated.column = 0;\r\n\t\t\t// Mappings end at eol\r\n\t\t\tif (idx + 1 === length) {\r\n\t\t\t\tlastOriginalSource = null;\r\n\t\t\t\tsourceMappingActive = false;\r\n\t\t\t} else if (sourceMappingActive) {\r\n\t\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\t\tline: original.line,\r\n\t\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\t\tline: generated.line,\r\n\t\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tgenerated.column++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t});\r\n\t\tthis.walkSourceContents(function (sourceFile, sourceContent) {\r\n\t\tmap.setSourceContent(sourceFile, sourceContent);\r\n\t\t});\r\n\r\n\t\treturn { code: generated.code, map: map };\r\n\t};\r\n\r\n\texports.SourceNode = SourceNode;\r\n\r\n\r\n/***/ }\r\n/******/ ])\r\n});\r\n;\r\n},{}],7:[function(require,module,exports){\r\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.StackTrace=e()}}(function(){var e;return function n(e,r,t){function o(a,s){if(!r[a]){if(!e[a]){var u=\"function\"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error(\"Cannot find module '\"+a+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(n){var r=e[a][1][n];return o(r?r:n)},l,l.exports,n,e,r,t)}return r[a].exports}for(var i=\"function\"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"error-stack-parser\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){\"use strict\";var n=/(^|@)\\S+\\:\\d+/,r=/^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m,t=/^(eval@)?(\\[native code\\])?$/;return{parse:function(e){if(\"undefined\"!=typeof e.stacktrace||\"undefined\"!=typeof e[\"opera#sourceloc\"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error(\"Cannot parse given Error object\")},extractLocation:function(e){if(e.indexOf(\":\")===-1)return[e];var n=/(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/,r=n.exec(e.replace(/[\\(\\)]/g,\"\"));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(n){var t=n.stack.split(\"\\n\").filter(function(e){return!!e.match(r)},this);return t.map(function(n){n.indexOf(\"(eval \")>-1&&(n=n.replace(/eval code/g,\"eval\").replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g,\"\"));var r=n.replace(/^\\s+/,\"\").replace(/\\(eval code/g,\"(\").split(/\\s+/).slice(1),t=this.extractLocation(r.pop()),o=r.join(\" \")||void 0,i=[\"eval\",\"<anonymous>\"].indexOf(t[0])>-1?void 0:t[0];return new e({functionName:o,fileName:i,lineNumber:t[1],columnNumber:t[2],source:n})},this)},parseFFOrSafari:function(n){var r=n.stack.split(\"\\n\").filter(function(e){return!e.match(t)},this);return r.map(function(n){if(n.indexOf(\" > eval\")>-1&&(n=n.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g,\":$1\")),n.indexOf(\"@\")===-1&&n.indexOf(\":\")===-1)return new e({functionName:n});var r=/((.*\".+\"[^@]*)?[^@]*)(?:@)/,t=n.match(r),o=t&&t[1]?t[1]:void 0,i=this.extractLocation(n.replace(r,\"\"));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:n})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(\"\\n\")>-1&&e.message.split(\"\\n\").length>e.stacktrace.split(\"\\n\").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)/i,t=n.message.split(\"\\n\"),o=[],i=2,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera10:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i,t=n.stacktrace.split(\"\\n\"),o=[],i=0,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera11:function(r){var t=r.stack.split(\"\\n\").filter(function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return t.map(function(n){var r,t=n.split(\"@\"),o=this.extractLocation(t.pop()),i=t.shift()||\"\",a=i.replace(/<anonymous function(: (\\w+))?>/,\"$2\").replace(/\\([^\\)]*\\)/g,\"\")||void 0;i.match(/\\(([^\\)]*)\\)/)&&(r=i.replace(/^[^\\(]+\\(([^\\)]*)\\)$/,\"$1\"));var s=void 0===r||\"[arguments not available]\"===r?void 0:r.split(\",\");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:n})},this)}}})},{stackframe:3}],2:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stack-generator\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(n){var r=[],t=10;\"object\"==typeof n&&\"number\"==typeof n.maxStackSize&&(t=n.maxStackSize);for(var o=arguments.callee;o&&r.length<t&&o.arguments;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\\s+([\\w$]+))+\\s*\\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch(s){break}}return r}}})},{stackframe:3}],3:[function(n,r,t){!function(n,o){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stackframe\",[],o):\"object\"==typeof t?r.exports=o():n.StackFrame=o()}(this,function(){\"use strict\";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function t(e){if(e instanceof Object)for(var r=0;r<u.length;r++)e.hasOwnProperty(u[r])&&void 0!==e[u[r]]&&this[\"set\"+n(u[r])](e[u[r]])}var o=[\"isConstructor\",\"isEval\",\"isNative\",\"isToplevel\"],i=[\"columnNumber\",\"lineNumber\"],a=[\"fileName\",\"functionName\",\"source\"],s=[\"args\"],u=o.concat(i,a,s);t.prototype={getArgs:function(){return this.args},setArgs:function(e){if(\"[object Array]\"!==Object.prototype.toString.call(e))throw new TypeError(\"Args must be an Array\");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof t)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError(\"Eval Origin must be an Object or StackFrame\");this.evalOrigin=new t(e)}},toString:function(){var n=this.getFunctionName()||\"{anonymous}\",r=\"(\"+(this.getArgs()||[]).join(\",\")+\")\",t=this.getFileName()?\"@\"+this.getFileName():\"\",o=e(this.getLineNumber())?\":\"+this.getLineNumber():\"\",i=e(this.getColumnNumber())?\":\"+this.getColumnNumber():\"\";return n+r+t+o+i}};for(var c=0;c<o.length;c++)t.prototype[\"get\"+n(o[c])]=r(o[c]),t.prototype[\"set\"+n(o[c])]=function(e){return function(n){this[e]=Boolean(n)}}(o[c]);for(var l=0;l<i.length;l++)t.prototype[\"get\"+n(i[l])]=r(i[l]),t.prototype[\"set\"+n(i[l])]=function(n){return function(r){if(!e(r))throw new TypeError(n+\" must be a Number\");this[n]=Number(r)}}(i[l]);for(var f=0;f<a.length;f++)t.prototype[\"get\"+n(a[f])]=r(a[f]),t.prototype[\"set\"+n(a[f])]=function(e){return function(n){this[e]=String(n)}}(a[f]);return t})},{}],4:[function(e,n,r){function t(){this._array=[],this._set=Object.create(null)}var o=e(\"./util\"),i=Object.prototype.hasOwnProperty;t.fromArray=function(e,n){for(var r=new t,o=0,i=e.length;o<i;o++)r.add(e[o],n);return r},t.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},t.prototype.add=function(e,n){var r=o.toSetString(e),t=i.call(this._set,r),a=this._array.length;t&&!n||this._array.push(e),t||(this._set[r]=a)},t.prototype.has=function(e){var n=o.toSetString(e);return i.call(this._set,n)},t.prototype.indexOf=function(e){var n=o.toSetString(e);if(i.call(this._set,n))return this._set[n];throw new Error('\"'+e+'\" is not in the set.')},t.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error(\"No element indexed by \"+e)},t.prototype.toArray=function(){return this._array.slice()},r.ArraySet=t},{\"./util\":10}],5:[function(e,n,r){function t(e){return e<0?(-e<<1)+1:(e<<1)+0}function o(e){var n=1===(1&e),r=e>>1;return n?-r:r}var i=e(\"./base64\"),a=5,s=1<<a,u=s-1,c=s;r.encode=function(e){var n,r=\"\",o=t(e);do n=o&u,o>>>=a,o>0&&(n|=c),r+=i.encode(n);while(o>0);return r},r.decode=function(e,n,r){var t,s,l=e.length,f=0,p=0;do{if(n>=l)throw new Error(\"Expected more digits in base 64 VLQ value.\");if(s=i.decode(e.charCodeAt(n++)),s===-1)throw new Error(\"Invalid base64 digit: \"+e.charAt(n-1));t=!!(s&c),s&=u,f+=s<<p,p+=a}while(t);r.value=o(f),r.rest=n}},{\"./base64\":6}],6:[function(e,n,r){var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\"\");r.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError(\"Must be between 0 and 63: \"+e)},r.decode=function(e){var n=65,r=90,t=97,o=122,i=48,a=57,s=43,u=47,c=26,l=52;return n<=e&&e<=r?e-n:t<=e&&e<=o?e-t+c:i<=e&&e<=a?e-i+l:e==s?62:e==u?63:-1}},{}],7:[function(e,n,r){function t(e,n,o,i,a,s){var u=Math.floor((n-e)/2)+e,c=a(o,i[u],!0);return 0===c?u:c>0?n-u>1?t(u,n,o,i,a,s):s==r.LEAST_UPPER_BOUND?n<i.length?n:-1:u:u-e>1?t(e,u,o,i,a,s):s==r.LEAST_UPPER_BOUND?u:e<0?-1:e}r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,n,o,i){if(0===n.length)return-1;var a=t(-1,n.length,e,n,o,i||r.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===o(n[a],n[a-1],!0);)--a;return a}},{}],8:[function(e,n,r){function t(e,n,r){var t=e[n];e[n]=e[r],e[r]=t}function o(e,n){return Math.round(e+Math.random()*(n-e))}function i(e,n,r,a){if(r<a){var s=o(r,a),u=r-1;t(e,s,a);for(var c=e[a],l=r;l<a;l++)n(e[l],c)<=0&&(u+=1,t(e,u,l));t(e,u+1,l);var f=u+1;i(e,n,r,f-1),i(e,n,f+1,a)}}r.quickSort=function(e,n){i(e,n,0,e.length-1)}},{}],9:[function(e,n,r){function t(e){var n=e;return\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\"))),null!=n.sections?new a(n):new o(n)}function o(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),t=s.getArg(n,\"sources\"),o=s.getArg(n,\"names\",[]),i=s.getArg(n,\"sourceRoot\",null),a=s.getArg(n,\"sourcesContent\",null),u=s.getArg(n,\"mappings\"),l=s.getArg(n,\"file\",null);if(r!=this._version)throw new Error(\"Unsupported version: \"+r);t=t.map(String).map(s.normalize).map(function(e){return i&&s.isAbsolute(i)&&s.isAbsolute(e)?s.relative(i,e):e}),this._names=c.fromArray(o.map(String),!0),this._sources=c.fromArray(t,!0),this.sourceRoot=i,this.sourcesContent=a,this._mappings=u,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function a(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),o=s.getArg(n,\"sections\");if(r!=this._version)throw new Error(\"Unsupported version: \"+r);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error(\"Support for url field in sections not implemented.\");var n=s.getArg(e,\"offset\"),r=s.getArg(n,\"line\"),o=s.getArg(n,\"column\");if(r<i.line||r===i.line&&o<i.column)throw new Error(\"Section offsets must be ordered and non-overlapping.\");return i=n,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new t(s.getArg(e,\"map\"))}})}var s=e(\"./util\"),u=e(\"./binary-search\"),c=e(\"./array-set\").ArraySet,l=e(\"./base64-vlq\"),f=e(\"./quick-sort\").quickSort;t.fromSourceMap=function(e){return o.fromSourceMap(e)},t.prototype._version=3,t.prototype.__generatedMappings=null,Object.defineProperty(t.prototype,\"_generatedMappings\",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),t.prototype.__originalMappings=null,Object.defineProperty(t.prototype,\"_originalMappings\",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),t.prototype._charIsMappingSeparator=function(e,n){var r=e.charAt(n);return\";\"===r||\",\"===r},t.prototype._parseMappings=function(e,n){throw new Error(\"Subclasses must implement _parseMappings\")},t.GENERATED_ORDER=1,t.ORIGINAL_ORDER=2,t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.prototype.eachMapping=function(e,n,r){var o,i=n||null,a=r||t.GENERATED_ORDER;switch(a){case t.GENERATED_ORDER:o=this._generatedMappings;break;case t.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error(\"Unknown order of iteration.\")}var u=this.sourceRoot;o.map(function(e){var n=null===e.source?null:this._sources.at(e.source);return null!=n&&null!=u&&(n=s.join(u,n)),{source:n,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},t.prototype.allGeneratedPositionsFor=function(e){var n=s.getArg(e,\"line\"),r={source:s.getArg(e,\"source\"),originalLine:n,originalColumn:s.getArg(e,\"column\",0)};if(null!=this.sourceRoot&&(r.source=s.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var t=[],o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var a=i.originalLine;i&&i.originalLine===a;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===n&&i.originalColumn==c;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o]}return t},r.SourceMapConsumer=t,o.prototype=Object.create(t.prototype),o.prototype.consumer=t,o.fromSourceMap=function(e){var n=Object.create(o.prototype),r=n._names=c.fromArray(e._names.toArray(),!0),t=n._sources=c.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file;for(var a=e._mappings.toArray().slice(),u=n.__generatedMappings=[],l=n.__originalMappings=[],p=0,g=a.length;p<g;p++){var h=a[p],m=new i;m.generatedLine=h.generatedLine,m.generatedColumn=h.generatedColumn,h.source&&(m.source=t.indexOf(h.source),m.originalLine=h.originalLine,m.originalColumn=h.originalColumn,h.name&&(m.name=r.indexOf(h.name)),l.push(m)),u.push(m)}return f(n.__originalMappings,s.compareByOriginalPositions),n},o.prototype._version=3,Object.defineProperty(o.prototype,\"sources\",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?s.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,n){for(var r,t,o,a,u,c=1,p=0,g=0,h=0,m=0,d=0,v=e.length,_=0,y={},w={},b=[],C=[];_<v;)if(\";\"===e.charAt(_))c++,_++,p=0;else if(\",\"===e.charAt(_))_++;else{for(r=new i,r.generatedLine=c,a=_;a<v&&!this._charIsMappingSeparator(e,a);a++);if(t=e.slice(_,a),o=y[t])_+=t.length;else{for(o=[];_<a;)l.decode(e,_,w),u=w.value,_=w.rest,o.push(u);if(2===o.length)throw new Error(\"Found a source, but no line and column\");if(3===o.length)throw new Error(\"Found a source and line, but no column\");y[t]=o}r.generatedColumn=p+o[0],p=r.generatedColumn,o.length>1&&(r.source=m+o[1],m+=o[1],r.originalLine=g+o[2],g=r.originalLine,r.originalLine+=1,r.originalColumn=h+o[3],h=r.originalColumn,o.length>4&&(r.name=d+o[4],d+=o[4])),C.push(r),\"number\"==typeof r.originalLine&&b.push(r)}f(C,s.compareByGeneratedPositionsDeflated),this.__generatedMappings=C,f(b,s.compareByOriginalPositions),this.__originalMappings=b},o.prototype._findMapping=function(e,n,r,t,o,i){if(e[r]<=0)throw new TypeError(\"Line must be greater than or equal to 1, got \"+e[r]);if(e[t]<0)throw new TypeError(\"Column must be greater than or equal to 0, got \"+e[t]);return u.search(e,n,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=this._findMapping(n,this._generatedMappings,\"generatedLine\",\"generatedColumn\",s.compareByGeneratedPositionsDeflated,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===n.generatedLine){var i=s.getArg(o,\"source\",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=s.join(this.sourceRoot,i)));var a=s.getArg(o,\"name\",null);return null!==a&&(a=this._names.at(a)),{source:i,line:s.getArg(o,\"originalLine\",null),column:s.getArg(o,\"originalColumn\",null),name:a}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=s.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=s.urlParse(this.sourceRoot))){var t=e.replace(/^file:\\/\\//,\"\");if(\"file\"==r.scheme&&this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];if((!r.path||\"/\"==r.path)&&this._sources.has(\"/\"+e))return this.sourcesContent[this._sources.indexOf(\"/\"+e)]}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var n=s.getArg(e,\"source\");if(null!=this.sourceRoot&&(n=s.relative(this.sourceRoot,n)),!this._sources.has(n))return{line:null,column:null,lastColumn:null};n=this._sources.indexOf(n);var r={source:n,originalLine:s.getArg(e,\"line\"),originalColumn:s.getArg(e,\"column\")},o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=o,a.prototype=Object.create(t.prototype),a.prototype.constructor=t,a.prototype._version=3,Object.defineProperty(a.prototype,\"sources\",{get:function(){for(var e=[],n=0;n<this._sections.length;n++)for(var r=0;r<this._sections[n].consumer.sources.length;r++)e.push(this._sections[n].consumer.sources[r]);return e}}),a.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=u.search(n,this._sections,function(e,n){var r=e.generatedLine-n.generatedOffset.generatedLine;return r?r:e.generatedColumn-n.generatedOffset.generatedColumn}),t=this._sections[r];return t?t.consumer.originalPositionFor({line:n.generatedLine-(t.generatedOffset.generatedLine-1),column:n.generatedColumn-(t.generatedOffset.generatedLine===n.generatedLine?t.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},a.prototype.sourceContentFor=function(e,n){for(var r=0;r<this._sections.length;r++){var t=this._sections[r],o=t.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer.sources.indexOf(s.getArg(e,\"source\"))!==-1){var t=r.consumer.generatedPositionFor(e);if(t){var o={line:t.line+(r.generatedOffset.generatedLine-1),column:t.column+(r.generatedOffset.generatedLine===t.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},a.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var t=this._sections[r],o=t.consumer._generatedMappings,i=0;i<o.length;i++){var a=o[i],u=t.consumer._sources.at(a.source);null!==t.consumer.sourceRoot&&(u=s.join(t.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var c=t.consumer._names.at(a.name);this._names.add(c),c=this._names.indexOf(c);var l={source:u,generatedLine:a.generatedLine+(t.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(t.generatedOffset.generatedLine===a.generatedLine?t.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),\"number\"==typeof l.originalLine&&this.__originalMappings.push(l)}f(this.__generatedMappings,s.compareByGeneratedPositionsDeflated),f(this.__originalMappings,s.compareByOriginalPositions)},r.IndexedSourceMapConsumer=a},{\"./array-set\":4,\"./base64-vlq\":5,\"./binary-search\":7,\"./quick-sort\":8,\"./util\":10}],10:[function(e,n,r){function t(e,n,r){if(n in e)return e[n];if(3===arguments.length)return r;throw new Error('\"'+n+'\" is a required argument.')}function o(e){var n=e.match(v);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var n=\"\";return e.scheme&&(n+=e.scheme+\":\"),n+=\"//\",e.auth&&(n+=e.auth+\"@\"),e.host&&(n+=e.host),e.port&&(n+=\":\"+e.port),e.path&&(n+=e.path),n}function a(e){var n=e,t=o(e);if(t){if(!t.path)return e;n=t.path}for(var a,s=r.isAbsolute(n),u=n.split(/\\/+/),c=0,l=u.length-1;l>=0;l--)a=u[l],\".\"===a?u.splice(l,1):\"..\"===a?c++:c>0&&(\"\"===a?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return n=u.join(\"/\"),\"\"===n&&(n=s?\"/\":\".\"),t?(t.path=n,i(t)):n}function s(e,n){\"\"===e&&(e=\".\"),\"\"===n&&(n=\".\");var r=o(n),t=o(e);if(t&&(e=t.path||\"/\"),r&&!r.scheme)return t&&(r.scheme=t.scheme),i(r);if(r||n.match(_))return n;if(t&&!t.host&&!t.path)return t.host=n,i(t);var s=\"/\"===n.charAt(0)?n:a(e.replace(/\\/+$/,\"\")+\"/\"+n);return t?(t.path=s,i(t)):s}function u(e,n){\"\"===e&&(e=\".\"),e=e.replace(/\\/$/,\"\");for(var r=0;0!==n.indexOf(e+\"/\");){var t=e.lastIndexOf(\"/\");if(t<0)return n;if(e=e.slice(0,t),e.match(/^([^\\/]+:\\/)?\\/*$/))return n;++r}return Array(r+1).join(\"../\")+n.substr(e.length+1)}function c(e){return e}function l(e){return p(e)?\"$\"+e:e}function f(e){return p(e)?e.slice(1):e}function p(e){if(!e)return!1;var n=e.length;if(n<9)return!1;if(95!==e.charCodeAt(n-1)||95!==e.charCodeAt(n-2)||111!==e.charCodeAt(n-3)||116!==e.charCodeAt(n-4)||111!==e.charCodeAt(n-5)||114!==e.charCodeAt(n-6)||112!==e.charCodeAt(n-7)||95!==e.charCodeAt(n-8)||95!==e.charCodeAt(n-9))return!1;for(var r=n-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function g(e,n,r){var t=e.source-n.source;return 0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t||r?t:(t=e.generatedColumn-n.generatedColumn,0!==t?t:(t=e.generatedLine-n.generatedLine,0!==t?t:e.name-n.name))))}function h(e,n,r){var t=e.generatedLine-n.generatedLine;return 0!==t?t:(t=e.generatedColumn-n.generatedColumn,0!==t||r?t:(t=e.source-n.source,0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t?t:e.name-n.name))))}function m(e,n){return e===n?0:e>n?1:-1}function d(e,n){var r=e.generatedLine-n.generatedLine;return 0!==r?r:(r=e.generatedColumn-n.generatedColumn,0!==r?r:(r=m(e.source,n.source),0!==r?r:(r=e.originalLine-n.originalLine,0!==r?r:(r=e.originalColumn-n.originalColumn,0!==r?r:m(e.name,n.name)))))}r.getArg=t;var v=/^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/,_=/^data:.+\\,.+$/;r.urlParse=o,r.urlGenerate=i,r.normalize=a,r.join=s,r.isAbsolute=function(e){return\"/\"===e.charAt(0)||!!e.match(v)},r.relative=u;var y=function(){var e=Object.create(null);return!(\"__proto__\"in e)}();r.toSetString=y?c:l,r.fromSetString=y?c:f,r.compareByOriginalPositions=g,r.compareByGeneratedPositionsDeflated=h,r.compareByGeneratedPositionsInflated=d},{}],11:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace-gps\",[\"source-map\",\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"source-map/lib/source-map-consumer\"),n(\"stackframe\")):o.StackTraceGPS=i(o.SourceMap||o.sourceMap,o.StackFrame)}(this,function(e,n){\"use strict\";function r(e){return new Promise(function(n,r){var t=new XMLHttpRequest;t.open(\"get\",e),t.onerror=r,t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<300||\"file://\"===e.substr(0,7)&&t.responseText?n(t.responseText):r(new Error(\"HTTP status: \"+t.status+\" retrieving \"+e)))},t.send()})}function t(e){if(\"undefined\"!=typeof window&&window.atob)return window.atob(e);throw new Error(\"You must supply a polyfill for window.atob in this environment\")}function o(e){if(\"undefined\"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error(\"You must supply a polyfill for JSON.parse in this environment\")}function i(e,n){for(var r=[/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/,/function\\s+([^('\"`]*?)\\s*\\(([^)]*)\\)/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/,/\\b(?!(?:if|for|switch|while|with|catch)\\b)(?:(?:static)\\s+)?(\\S+)\\s*\\(.*?\\)\\s*\\{/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*\\(.*?\\)\\s*=>/],t=e.split(\"\\n\"),o=\"\",i=Math.min(n,20),a=0;a<i;++a){var s=t[n-a-1],u=s.indexOf(\"//\");if(u>=0&&(s=s.substr(0,u)),s){o=s+o;for(var c=r.length,l=0;l<c;l++){var f=r[l].exec(o);if(f&&f[1])return f[1]}}}}function a(){if(\"function\"!=typeof Object.defineProperty||\"function\"!=typeof Object.create)throw new Error(\"Unable to consume source maps in older browsers\")}function s(e){if(\"object\"!=typeof e)throw new TypeError(\"Given StackFrame is not an object\");if(\"string\"!=typeof e.fileName)throw new TypeError(\"Given file name is not a String\");if(\"number\"!=typeof e.lineNumber||e.lineNumber%1!==0||e.lineNumber<1)throw new TypeError(\"Given line number must be a positive integer\");if(\"number\"!=typeof e.columnNumber||e.columnNumber%1!==0||e.columnNumber<0)throw new TypeError(\"Given column number must be a non-negative integer\");return!0}function u(e){for(var n,r,t=/\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/gm;r=t.exec(e);)n=r[1];if(n)return n;throw new Error(\"sourceMappingURL not found\")}function c(e,r,t){return new Promise(function(o,i){var a=r.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(a.source){var s=r.sourceContentFor(a.source);s&&(t[a.source]=s),o(new n({functionName:a.name||e.functionName,args:e.args,fileName:a.source,lineNumber:a.line,columnNumber:a.column}))}else i(new Error(\"Could not get original source for given stackframe and source map\"))})}return function l(f){return this instanceof l?(f=f||{},this.sourceCache=f.sourceCache||{},this.sourceMapConsumerCache=f.sourceMapConsumerCache||{},this.ajax=f.ajax||r,this._atob=f.atob||t,this._get=function(e){return new Promise(function(n,r){var t=\"data:\"===e.substr(0,5);if(this.sourceCache[e])n(this.sourceCache[e]);else if(f.offline&&!t)r(new Error(\"Cannot make network requests in offline mode\"));else if(t){var o=/^data:application\\/json;([\\w=:\"-]+;)*base64,/,i=e.match(o);if(i){var a=i[0].length,s=e.substr(a),u=this._atob(s);this.sourceCache[e]=u,n(u)}else r(new Error(\"The encoding of the inline sourcemap is not supported\"))}else{var c=this.ajax(e,{method:\"get\"});this.sourceCache[e]=c,c.then(n,r)}}.bind(this))},this._getSourceMapConsumer=function(n,r){return new Promise(function(t,i){if(this.sourceMapConsumerCache[n])t(this.sourceMapConsumerCache[n]);else{var a=new Promise(function(t,i){return this._get(n).then(function(n){\"string\"==typeof n&&(n=o(n.replace(/^\\)\\]\\}'/,\"\"))),\"undefined\"==typeof n.sourceRoot&&(n.sourceRoot=r),t(new e.SourceMapConsumer(n))},i)}.bind(this));this.sourceMapConsumerCache[n]=a,t(a)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(n,r){this.getMappedLocation(e).then(function(e){function r(){n(e)}this.findFunctionName(e).then(n,r)[\"catch\"](r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(r,t){s(e),this._get(e.fileName).then(function(t){var o=e.lineNumber,a=e.columnNumber,s=i(t,o,a);r(s?new n({functionName:s,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:a}):e)},t)[\"catch\"](t)}.bind(this))},void(this.getMappedLocation=function(e){return new Promise(function(n,r){a(),s(e);var t=this.sourceCache,o=e.fileName;this._get(o).then(function(r){var i=u(r),a=\"data:\"===i.substr(0,5),s=o.substring(0,o.lastIndexOf(\"/\")+1);return\"/\"===i[0]||a||/^https?:\\/\\/|^\\/\\//i.test(i)||(i=s+i),this._getSourceMapConsumer(i,s).then(function(r){return c(e,r,t).then(n)[\"catch\"](function(){n(e)})})}.bind(this),r)[\"catch\"](r)}.bind(this))})):new l(f)}})},{\"source-map/lib/source-map-consumer\":9,stackframe:3}],12:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace\",[\"error-stack-parser\",\"stack-generator\",\"stacktrace-gps\"],i):\"object\"==typeof t?r.exports=i(n(\"error-stack-parser\"),n(\"stack-generator\"),n(\"stacktrace-gps\")):o.StackTrace=i(o.ErrorStackParser,o.StackGenerator,o.StackTraceGPS)}(this,function(e,n,r){function t(e,n){var r={};return[e,n].forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}),r}function o(e){return e.stack||e[\"opera#sourceloc\"]}function i(e,n){return\"function\"==typeof n?e.filter(n):e}var a={filter:function(e){return(e.functionName||\"\").indexOf(\"StackTrace$$\")===-1&&(e.functionName||\"\").indexOf(\"ErrorStackParser$$\")===-1&&(e.functionName||\"\").indexOf(\"StackTraceGPS$$\")===-1&&(e.functionName||\"\").indexOf(\"StackGenerator$$\")===-1},sourceCache:{}},s=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var n=s();return o(n)?this.fromError(n,e):this.generateArtificially(e)},getSync:function(r){r=t(a,r);var u=s(),c=o(u)?e.parse(u):n.backtrace(r);return i(c,r.filter)},fromError:function(n,o){o=t(a,o);var s=new r(o);return new Promise(function(r){var t=i(e.parse(n),o.filter);r(Promise.all(t.map(function(e){return new Promise(function(n){function r(){n(e)}s.pinpoint(e).then(n,r)[\"catch\"](r)})})))}.bind(this))},generateArtificially:function(e){e=t(a,e);var r=n.backtrace(e);return\"function\"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,n,r,t){if(\"function\"!=typeof e)throw new Error(\"Cannot instrument non-function object\");if(\"function\"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(n,r)[\"catch\"](r),e.apply(t||this,arguments)}catch(i){throw o(i)&&this.fromError(i).then(n,r)[\"catch\"](r),i}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if(\"function\"!=typeof e)throw new Error(\"Cannot de-instrument non-function object\");return\"function\"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,n,r,t){return new Promise(function(o,i){var a=new XMLHttpRequest;if(a.onerror=i,a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<400?o(a.responseText):i(new Error(\"POST to \"+n+\" failed with status: \"+a.status)))},a.open(\"post\",n),a.setRequestHeader(\"Content-Type\",\"application/json\"),t&&\"object\"==typeof t.headers){var s=t.headers;for(var u in s)s.hasOwnProperty(u)&&a.setRequestHeader(u,s[u])}var c={stack:e};void 0!==r&&null!==r&&(c.message=r),a.send(JSON.stringify(c))})}}})},{\"error-stack-parser\":1,\"stack-generator\":2,\"stacktrace-gps\":11}]},{},[12])(12)});\r\n\r\n\r\n},{}],8:[function(require,module,exports){\r\nclass FileMap {\r\n    constructor(){this.sidesList=[];}\r\n    add(sides) {// {sideA:path, sideB:path}\r\n        this.sidesList.push(sides);\r\n    }\r\n    convert(path, fromSide, toSide) {\r\n        for (let sides of this.sidesList) {\r\n            if (path.startsWith(sides[fromSide])) {\r\n                return sides[toSide]+path.substring(sides[fromSide].length);\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n}\r\nmodule.exports=FileMap;\r\n\r\n},{}],9:[function(require,module,exports){\r\n/*global Worker*/\r\n// Browser Side\r\nlet idseq=0;\r\nclass Wrapper {\r\n    constructor(worker) {\r\n        const t=this;\r\n        t.idseq=1;\r\n        t.queue={};\r\n        t.worker=worker;\r\n        t.readyQueue=[];\r\n        worker.addEventListener(\"message\",function (e) {\r\n            var d=e.data;\r\n            if (d.reverse) {\r\n                t.procReverse(e);\r\n            } else if (d.ready) {\r\n                t.ready();\r\n            } else if (d.id) {\r\n                t.queue[d.id](d);\r\n                delete t.queue[d.id];\r\n            }\r\n        });\r\n        t.run(\"WorkerService/isReady\").then(function (r) {\r\n            if (r) t.ready();\r\n        });\r\n    }\r\n    procReverse(e) {\r\n        const t=this;\r\n        var d=e.data;\r\n        var id=d.id;\r\n        var path=d.path;\r\n        var params=d.params;\r\n        try {\r\n            Promise.resolve(paths[path](params)).then(function (r) {\r\n                t.worker.postMessage({\r\n                    reverse:true,\r\n                    status:\"ok\",\r\n                    id:id,\r\n                    result: r\r\n                });\r\n            },sendError);\r\n        } catch(err) {\r\n            sendError(err);\r\n        }\r\n        function sendError(e) {\r\n            e=Object.assign({name:e.name, message:e.message, stack:e.stack},e||{});\r\n            try {\r\n                const j=JSON.stringify(e);\r\n                e=JSON.parse(j);\r\n            } catch(je) {\r\n                e=e ? e.message || e+\"\" : \"unknown\";\r\n                console.log(\"WorkerServiceW\", je, e);\r\n            }\r\n            t.worker.postMessage({\r\n                reverse: true,\r\n                id:id, error:e, status:\"error\"\r\n            });\r\n        }\r\n    }\r\n    ready() {\r\n        const t=this;\r\n        if (t.isReady) return;\r\n        t.isReady=true;\r\n        console.log(\"Worker is ready!\");\r\n        t.readyQueue.forEach(function (f){ f();});\r\n    }\r\n    readyPromise() {\r\n        const t=this;\r\n        return new Promise(function (succ) {\r\n            if (t.isReady) return succ();\r\n            t.readyQueue.push(succ);\r\n        });\r\n    }\r\n    run(path, params) {\r\n        const t=this;\r\n        return t.readyPromise().then(function() {\r\n            return new Promise(function (succ,err) {\r\n                var id=t.idseq++;\r\n                t.queue[id]=function (e) {\r\n                    //console.log(\"Status\",e);\r\n                    if (e.status==\"ok\") {\r\n                        succ(e.result);\r\n                    } else {\r\n                        err(e.error);\r\n                    }\r\n                };\r\n                t.worker.postMessage({\r\n                    id: id,\r\n                    path: path,\r\n                    params: params\r\n                });\r\n            });\r\n        });\r\n    }\r\n    terminate() {\r\n        const t=this;\r\n        t.worker.terminate();\r\n    }\r\n}\r\nvar paths={};\r\nconst WorkerService={\r\n    Wrapper:Wrapper,\r\n    load: function (src) {\r\n        var w=new Worker(src);\r\n        return new Wrapper(w);\r\n    },\r\n    install: function (path, func) {\r\n        paths[path]=func;\r\n    },\r\n    serv: function (path,func) {\r\n        this.install(path,func);\r\n    }\r\n};\r\nWorkerService.serv(\"console/log\", function (params){\r\n    console.log.apply(console,params);\r\n});\r\nmodule.exports=WorkerService;\r\n\r\n},{}],10:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],11:[function(require,module,exports){\r\n/*define(function (require,exports,module) {\r\n    const F=require(\"ProjectFactory\");\r\n    const root=require(\"root\");\r\n    const SourceFiles=require(\"SourceFiles\");\r\n    const langMod=require(\"langMod\");\r\n    */\r\n    const F=require(\"./ProjectFactory\");\r\n    const root=require(\"../lib/root\");\r\n    const SourceFiles=require(\"../lang/SourceFiles\");\r\n    //const A=require(\"../lib/assert\");\r\n    const langMod=require(\"../lang/langMod\");\r\n\r\n    F.addType(\"compiled\",params=> {\r\n        if (params.namespace && params.url) return urlBased(params);\r\n        if (params.dir) return dirBased(params);\r\n        console.error(\"Invalid compiled project\", params);\r\n        throw new Error(\"Invalid compiled project\");\r\n    });\r\n    function urlBased(params) {\r\n        const ns=params.namespace;\r\n        const url=params.url;\r\n        const res=F.createCore();\r\n        return res.include(langMod).include({\r\n            getNamespace:function () {return ns;},\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes ns=\",ns,\"url=\",url);\r\n                await this.loadDependingClasses();\r\n                const s=SourceFiles.add({url});\r\n                await s.exec();\r\n                console.log(\"Loaded compiled classes ns=\",ns,\"url=\",url);\r\n            },\r\n        });\r\n    }\r\n    function dirBased(params) {\r\n        const res=F.createDirBasedCore(params);\r\n        return res.include(langMod).include({\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes params=\",params);\r\n                await this.loadDependingClasses();\r\n                const outJS=this.getOutputFile();\r\n                const map=outJS.sibling(outJS.name()+\".map\");\r\n                const sf=SourceFiles.add({\r\n                    text:outJS.text(),\r\n                    sourceMap:map.exists() && map.text(),\r\n                });\r\n                await sf.exec();\r\n                console.log(\"Loaded compiled classes params=\",params);\r\n            }\r\n        });\r\n    }\r\n    exports.create=params=>F.create(\"compiled\",params);\r\n    F.addDependencyResolver((prj, spec)=> {\r\n        if (spec.dir && prj.resolve) {\r\n            return F.create(\"compiled\",{dir:prj.resolve(spec.dir)});\r\n        }\r\n        if (spec.namespace && spec.url) {\r\n            return F.create(\"compiled\",spec);\r\n        }\r\n    });\r\n//});/*--end of define--*/\r\n\r\n},{\"../lang/SourceFiles\":3,\"../lang/langMod\":5,\"../lib/root\":10,\"./ProjectFactory\":12}],12:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n    // This factory will be widely used, even BitArrow.\r\n\r\n\r\n    let Compiler, SourceFiles,sysMod,run2Mod;\r\n    const  resolvers=[],types={};\r\n    exports.addDependencyResolver=(f)=>{\r\n        //f: (prj, spec) => prj\r\n        resolvers.push(f);\r\n    };\r\n    exports.addType=(n,f)=>{\r\n        types[n]=f;\r\n    };\r\n    exports.fromDependencySpec=function (prj,spec) {\r\n        if (typeof spec==\"string\") {\r\n            var prjDir=prj.resolve(spec);\r\n            return this.fromDir(prjDir);\r\n        }\r\n        for (let f of resolvers) {\r\n            const res=f(prj,spec);\r\n            if (res) return res;\r\n        }\r\n        console.error(\"Invalid dep spec\", spec);\r\n        throw new Error(\"Invalid dep spec\", spec);\r\n        /* else if (typeof dprj==\"object\") {\r\n            return this.create(\"compiled\", {\r\n                namespace:dprj.namespace,\r\n                url: FS.expandPath(dprj.compiledURL)\r\n            });\r\n        }*/\r\n    };\r\n    exports.create=function (type,params) {\r\n        if (!types[type]) throw new Error(`Invalid type ${type}`);\r\n        return types[type](params);\r\n    };\r\n    class ProjectCore {\r\n        getPublishedURL(){}//TODO\r\n        getOptions(opt) {return {};}//stub\r\n        getName() {\r\n            return this.dir.name().replace(/\\/$/,\"\");\r\n        }\r\n        getDependingProjects() {\r\n            var opt=this.getOptions();\r\n            var dp=(opt.compiler && opt.compiler.dependingProjects) || [];\r\n            return dp.map(dprj=>\r\n                ProjectCore.factory.fromDependencySpec(this,dprj)\r\n            );\r\n        }\r\n        include(mod) {\r\n            for (let k of Object.getOwnPropertyNames(mod)) {\r\n                if (typeof mod[k]===\"function\") this[k]=mod[k];\r\n            }\r\n            return this;\r\n        }\r\n        delegate(obj) {\r\n            if (obj.constructor.prototype) {\r\n                const add=k=>{\r\n                    if (typeof obj[k]===\"function\") this[k]=(...args)=>obj[k](...args);\r\n                };\r\n                for (let k of Object.getOwnPropertyNames(obj.constructor.prototype)) add(k);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n    ProjectCore.factory=exports;\r\n    exports.createCore=()=>new ProjectCore();\r\n    const dirBasedMod={\r\n        getDir() {return this.dir;},\r\n        resolve(rdir){// not in compiledProject\r\n            if (rdir instanceof Array) {\r\n                var res=[];\r\n                rdir.forEach(function (e) {\r\n                    res.push(this.resolve(e));\r\n                });\r\n                return res;\r\n            }\r\n            if (typeof rdir==\"string\") {\r\n                /*global FS*/ //TODO\r\n                if (typeof FS!==\"undefined\") {\r\n                    return FS.resolve(rdir, this.getDir().path());\r\n                } else {\r\n                    return this.getDir().rel(rdir);\r\n                }\r\n            }\r\n            if (!rdir || !rdir.isDir) throw new Error(\"Cannot TPR.resolve: \"+rdir);\r\n            return rdir;\r\n        },\r\n        getOptions(opt) {\r\n            return this.getOptionsFile().obj();\r\n        },\r\n        getOptionsFile() {// not in compiledProject\r\n            var resFile=this.dir.rel(\"options.json\");\r\n            return resFile;\r\n        },\r\n        setOptions(opt) {// not in compiledProject\r\n            return this.getOptionsFile().obj(opt);\r\n        },\r\n        getOutputFile(lang) {// not in compiledProject\r\n            var opt=this.getOptions();\r\n            var outF=this.resolve(opt.compiler.outputFile||\"js/concat.js\");\r\n            if (outF.isDir()) {\r\n                throw new Error(\"out: directory style not supported\");\r\n            }\r\n            return outF;\r\n        },\r\n        removeOutputFile() {// not in compiledProject\r\n            this.getOutputFile().rm();\r\n        },\r\n        path(){return this.dir.path();},// not in compiledProject\r\n        getEXT() {throw new Error(\"getEXT must be overriden.\");},//stub\r\n        sourceFiles() {\r\n            const res={};\r\n            const ext=this.getEXT();\r\n    \t\tthis.dir.recursive(collect);\r\n    \t\tfunction collect(f) {\r\n    \t\t\tif (f.endsWith(ext)) {\r\n    \t\t\t\tvar nb=f.truncExt(ext);\r\n    \t\t\t\tres[nb]=f;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn res;\r\n        }\r\n    };\r\n    exports.createDirBasedCore=function (params) {\r\n        const res=this.createCore();\r\n        res.dir=params.dir;\r\n        return res.include(dirBasedMod);\r\n    };\r\n//});/*--end of define--*/\r\n\r\n},{}]},{},[2])(2)\r\n});\r\n\ndefine('ProjectFactory',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.ProjectFactory;\r\n});\r\n\ndefine('BuilderClient',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient;\r\n});\r\n\n/*global window,self,global*/\r\ndefine('root',[],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\ndefine('PatternParser',[\"Tonyu\"], function (Tonyu) {\r\n    var PP=function (img, options) {\r\n        this.options=options || {};\r\n        this.img=img;\r\n        this.height = img.height;\r\n        this.width = img.width;\r\n        var cv=this.newImage(img.width, img.height);\r\n        var ctx=cv.getContext(\"2d\");\r\n        ctx.drawImage(img, 0,0);\r\n        this.ctx=ctx;\r\n        this.pixels=this.ctx.getImageData(0, 0, img.width, img.height).data;\r\n        this.base=this.getPixel(0,0);\r\n    };\r\n    Tonyu.extend(PP.prototype,{\r\n        newImage: function (w,h) {\r\n            var cv=document.createElement(\"canvas\");\r\n            cv.width=w;\r\n            cv.height=h;\r\n            return cv;\r\n        },\r\n        getPixel: function (x,y) {\r\n            var imagePixelData = this.pixels;\r\n            var ofs=(x+y*this.width)*4;\r\n            var R = imagePixelData[0+ofs];\r\n            var G = imagePixelData[1+ofs];\r\n            var B = imagePixelData[2+ofs];\r\n            var A = imagePixelData[3+ofs];\r\n            return ((((A*256)+B)*256)+G)*256+R;\r\n        },\r\n        setPixel: function (x,y,p) {\r\n            var ofs=(x+y*this.width)*4;\r\n            this.pixels[0+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[1+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[2+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[3+ofs]=p & 255;\r\n        },\r\n        parse: function () {\r\n            try {\r\n                //console.log(\"parse()\");\r\n                var res=[];// List of charpattern\r\n                for (var y=0; y<this.height ;y++) {\r\n                    for (var x=0; x<this.width ;x++) {\r\n                        var c=this.getPixel(x, y);\r\n                        if (c!=this.base) {\r\n                            res.push(this.parse1Pattern(x,y));\r\n                        }\r\n                    }\r\n                }\r\n                //console.log(\"parsed:\"+res.lenth);\r\n                return res;\r\n            } catch (p) {\r\n                if (p.isParseError) {\r\n                    console.log(\"parse error! \"+p);\r\n                    return [{image: this.img, x:0, y:0, width:this.width, height:this.height}];\r\n                }\r\n                throw p;\r\n            }\r\n        },\r\n        parse1Pattern:function (x,y) {\r\n            function hex(s){return s;}\r\n            var trans=this.getPixel(x, y);\r\n            var dx=x,dy=y;\r\n            var base=this.base;\r\n            var width=this.width, height=this.height;\r\n            while (dx<width) {\r\n                var pixel = this.getPixel(dx,dy);\r\n                if (pixel!=trans) break;\r\n                dx++;\r\n            }\r\n            if (dx>=width || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dx--;\r\n            while (dy<height) {\r\n                if (this.getPixel(dx,dy)!=trans) break;\r\n                dy++;\r\n            }\r\n            if (dy>=height || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dy--;\r\n            var sx=x+1,sy=y+1,w=dx-sx,h=dy-sy;\r\n            //console.log(\"PP\",sx,sy,w,h,dx,dy);\r\n            if (w*h==0) throw PatterParseError(dx, dy,\"w*h==0\");\r\n            var newim=this.newImage(w,h);\r\n            var nc=newim.getContext(\"2d\");\r\n            var newImD=nc.getImageData(0,0,w,h);\r\n            var newD=newImD.data;\r\n            var di=0;\r\n            for (var ey=sy ; ey<dy ; ey++) {\r\n                for (var ex=sx ; ex<dx ; ex++) {\r\n                    var p=this.getPixel(ex, ey);\r\n                    if (p==trans) {\r\n                        newD[di++]=0;\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                    } else {\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                    }\r\n                }\r\n            }\r\n            nc.putImageData(newImD,0,0);\r\n            for (var yy=sy-1; yy<=dy; yy++) {\r\n                for (var xx=sx-1; xx<=dx; xx++) {\r\n                    this.setPixel(xx,yy, base);\r\n                }\r\n            }\r\n            if (this.options.boundsInSrc) {\r\n                return {x:sx,y:sy,width:w,height:h};\r\n            }\r\n            return {image:newim, x:0, y:0, width:w, height:h};\r\n            function PatterParseError(x,y,msg) {\r\n                return {toString: function () {\r\n                    return \"at (\"+x+\",\"+y+\") :\"+msg;\r\n                }, isParseError:true};\r\n            }\r\n        }\r\n\r\n    });\r\n    return PP;\r\n});\r\n\nUtil=(function () {\r\n\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\n// From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\nfunction Base64_To_ArrayBuffer(base64){\r\n    base64=base64.replace(/[\\n=]/g,\"\");\r\n    var dic = new Object();\r\n    dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n    dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n    dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n    dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n    var num = base64.length;\r\n    var n = 0;\r\n    var b = 0;\r\n    var e;\r\n\r\n    if(!num) return (new ArrayBuffer(0));\r\n    //if(num < 4) return null;\r\n    //if(num % 4) return null;\r\n\r\n    // AA     12    1\r\n    // AAA    18    2\r\n    // AAAA   24    3\r\n    // AAAAA  30    3\r\n    // AAAAAA 36    4\r\n    // num*6/8\r\n    e = Math.floor(num / 4 * 3);\r\n    if(base64.charAt(num - 1) == '=') e -= 1;\r\n    if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n    var ary_buffer = new ArrayBuffer( e );\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var i = 0;\r\n    var p = 0;\r\n    while(p < e){\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n        n = (b << 2);\r\n        i ++;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 4) & 0x3);\r\n        n = (b & 0x0f) << 4;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 2) & 0xf);\r\n        n = (b & 0x03) << 6;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | b;\r\n        i ++;\r\n        p ++;\r\n    }\r\n    function fail(m) {\r\n        console.log(m);\r\n        console.log(base64,i);\r\n        throw new Error(m);\r\n    }\r\n    return ary_buffer;\r\n}\r\n\r\nfunction Base64_From_ArrayBuffer(ary_buffer){\r\n    var dic = [\r\n        'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n        'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n        'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n        'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n    ];\r\n    var base64 = \"\";\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var num = ary_u8.length;\r\n    var n = 0;\r\n    var b = 0;\r\n\r\n    var i = 0;\r\n    while(i < num){\r\n        b = ary_u8[i];\r\n        base64 += dic[(b >> 2)];\r\n        n = (b & 0x03) << 4;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 4)];\r\n        n = (b & 0x0f) << 2;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 6)];\r\n        base64 += dic[(b & 0x3f)];\r\n        i ++;\r\n    }\r\n\r\n    var m = num % 3;\r\n    if(m){\r\n        base64 += dic[n];\r\n    }\r\n    if(m == 1){\r\n        base64 += \"==\";\r\n    }else if(m == 2){\r\n        base64 += \"=\";\r\n    }\r\n    return base64;\r\n}\r\n\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction hasNodeBuffer() {\r\n    return typeof Buffer!=\"undefined\";\r\n}\r\nfunction isNodeBuffer(data) {\r\n    return (hasNodeBuffer() && data instanceof Buffer);\r\n}\r\nfunction isBuffer(data) {\r\n    return data instanceof ArrayBuffer || isNodeBuffer(data);\r\n}\r\nfunction utf8bytes2str(bytes) {\r\n    var e=[];\r\n    for (var i=0 ; i<bytes.length ; i++) {\r\n         e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n    }\r\n    try {\r\n        return decodeURIComponent(e.join(\"\"));\r\n    } catch (er) {\r\n        console.log(e.join(\"\"));\r\n        throw er;\r\n    }\r\n}\r\nfunction str2utf8bytes(str, binType) {\r\n    var e=encodeURIComponent(str);\r\n    var r=/^%(..)/;\r\n    var a=[];\r\n    var ad=0;\r\n    for (var i=0 ; i<e.length; i++) {\r\n        var m=r.exec( e.substring(i));\r\n        if (m) {\r\n            a.push(parseInt(\"0x\"+m[1]));\r\n            i+=m[0].length-1;\r\n        } else a.push(e.charCodeAt(i));\r\n    }\r\n    return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n}\r\n\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    Base64_To_ArrayBuffer:Base64_To_ArrayBuffer,\r\n    Base64_From_ArrayBuffer:Base64_From_ArrayBuffer,\r\n    utf8bytes2str: utf8bytes2str,\r\n    str2utf8bytes: str2utf8bytes,\r\n    privatize: privatize,\r\n    hasNodeBuffer:hasNodeBuffer,\r\n    isNodeBuffer: isNodeBuffer,\r\n    isBuffer: isBuffer\r\n};\r\n})();\r\n\ndefine(\"Util\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Util;\n    };\n}(this)));\n\ndefine('Platform',[],function () {\r\n    var WebSite={};\r\n    // from https://w3g.jp/blog/js_browser_sniffing2015\r\n    var u=window.navigator.userAgent.toLowerCase();\r\n    WebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1)\r\n    || u.indexOf(\"ipad\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1)\r\n    || u.indexOf(\"kindle\") != -1\r\n    || u.indexOf(\"silk\") != -1\r\n    || u.indexOf(\"playbook\") != -1;\r\n    WebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1)\r\n    || u.indexOf(\"iphone\") != -1\r\n    || u.indexOf(\"ipod\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || u.indexOf(\"blackberry\") != -1;\r\n    return WebSite;\r\n});\r\n\n/*global process, require, BuiltinAssets */\r\ndefine('WebSite',[\"FS\",\"Platform\"], function (FS,Platform) {\r\n\tvar P=FS.PathUtil;\r\n\tvar loc=document.location.href;\r\n\tvar devMode=!!loc.match(/html\\/dev\\//) && !!loc.match(/localhost:3/);\r\n\tvar WebSite;\r\n\tvar prot=location.protocol;\r\n\tvar k;\r\n\tif (!prot.match(/^http/)) prot=\"https:\";\r\n\tswitch(window.WebSite_runType) {\r\n\tcase \"IDE\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.builtinAssetNames={\r\n\t\t\t\"images/Ball.png\":1,\r\n\t\t\t\"images/base.png\":1,\r\n\t\t\t\"images/Sample.png\":1,\r\n\t\t\t\"images/inputPad.png\":1,\r\n\t\t\t\"images/neko.png\":1,\r\n\t\t\t\"images/mapchip.png\":1\r\n\t\t};\r\n\t\tif (!WebSite.pluginTop) {\r\n\t\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\t}\r\n\t\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.noconcat=true;\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\t\tif (process.env.TONYU_HOME) {\r\n\t\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t\t}\r\n\t\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\t\td=P.directorify(d);\r\n\t\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t\t}\r\n\t\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t} else {\r\n\t\t\tif (loc.match(/edit\\.tonyu\\.jp\\/n\\//)) {\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/n/\";\r\n\t\t\t} else {\r\n\t\t\t\t// Why?\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\t\t}\r\n\t\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t// compiledKernel is URL , not file path.\r\n\t\t// It is correct as long as the html pages in www/ (not html/build|dev )\r\n\t\tWebSite.compiledKernel=\"Kernel/js/concat.js\";   //P.rel(WebSite.kernelDir,\"js/concat.js\");\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.version=2;\r\n\t\tWebSite.hoge=\"fuga\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"singleHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tif (typeof BuiltinAssets===\"object\") {\r\n\t\t\tfor (k in BuiltinAssets) {\r\n\t\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.scriptServer=\"http://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.pluginTop=WebSite.scriptServer+\"js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.compiledKernel=WebSite.scriptServer+\"Kernel/js/concat.js\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"multiHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t}\r\n\t\t// this sets at runScript2.js\r\n\t\t//WebSite.compiledKernel=WebSite.top+\"/js/kernel.js\";\r\n\t\t//-------------\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\t}\r\n\r\n\tif (loc.match(/jsrun\\.it/)) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"http:\"+\"//jsrun.it/assets/9/X/T/b/9XTbt.png\",\r\n\t\t\t\t\"images/base.png\":\"http:\"+\"//jsrun.it/assets/6/F/y/3/6Fy3B.png\",\r\n\t\t\t\t\"images/Sample.png\":\"http:\"+\"//jsrun.it/assets/s/V/S/l/sVSlZ.png\",\r\n\t\t\t\t\"images/neko.png\":\"http:\"+\"//jsrun.it/assets/f/D/z/z/fDzze.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"http:\"+\"//jsrun.it/assets/f/u/N/v/fuNvz.png\"\r\n\t\t\t},top:\"\",devMode:devMode,\r\n\t\t\tpluginTop: \"https://edit.tonyu.jp/js/plugins\",\r\n\t\t\tremoveJSOutput:true\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/) ||\r\n\t\t(\r\n\t\t/*(\r\n\t\t\tloc.match(/^chrome-extension:/) ||\r\n\t\t\tloc.match(/localhost/) ||\r\n\t\t\tloc.match(/tonyuedit\\.appspot\\.com/)\r\n\t\t) &&*/\r\n\t\tloc.match(/\\/html\\/((dev)|(build))\\//)\r\n\t\t)\r\n\t) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"../../images/Ball.png\",\r\n\t\t\t\t\"images/base.png\":\"../../images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":\"../../images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":\"../../images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"../../images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":\"../../images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":\"../../images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":\"../../images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":\"../../images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":\"../../images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":\"../../images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":\"../../images/sound_wav.png\",\r\n\t\t\t\t\t\"images/ecl.png\":\"../../images/ecl.png\"\r\n\t\t\t},top:\"../..\",devMode:devMode\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/bitarrow/) ||\r\n\t\tloc.match(/localhost.*pub/))  {\r\n\t\tWebSite={};\r\n\t\tvar WS=WebSite;\r\n\t\tWebSite.serverType=\"BA\";\r\n\t\tWS.runtime=\"../../../runtime/\";\r\n\t\tWS.urlAliases= {\r\n\t\t\t\t\"images/base.png\":WS.runtime+\"images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":WS.runtime+\"images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":WS.runtime+\"images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":WS.runtime+\"images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":WS.runtime+\"images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":WS.runtime+\"images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":WS.runtime+\"images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":WS.runtime+\"images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":WS.runtime+\"images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":WS.runtime+\"images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":WS.runtime+\"images/sound_wav.png\",\r\n\t\t\t\t\"images/ecl.png\":WS.runtime+\"images/ecl.png\"\r\n\t\t};\r\n\t} else {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",devMode:devMode\r\n\t\t};\r\n\t}\r\n\tif (typeof BuiltinAssets===\"object\") {\r\n\t\tfor (k in BuiltinAssets) {\r\n\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t}\r\n\t}\r\n\tWebSite.builtinAssetNames={\r\n\t\t\"images/Ball.png\":1,\r\n\t\t\"images/base.png\":1,\r\n\t\t\"images/Sample.png\":1,\r\n\t\t\"images/neko.png\":1,\r\n\t\t\"images/mapchip.png\":1\r\n\t};\r\n\t// from https://w3g.jp/blog/js_browser_sniffing2015\r\n\tvar u=window.navigator.userAgent.toLowerCase();\r\n\tWebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1) ||\r\n\tu.indexOf(\"ipad\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1) ||\r\n\tu.indexOf(\"kindle\") != -1 ||\r\n\tu.indexOf(\"silk\") != -1 ||\r\n\tu.indexOf(\"playbook\") != -1;\r\n\tWebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1) ||\r\n\tu.indexOf(\"iphone\") != -1 ||\r\n\tu.indexOf(\"ipod\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\tu.indexOf(\"blackberry\") != -1;\r\n\r\n\tif (!WebSite.pluginTop) {\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t}\r\n\tWebSite.disableROM={};\r\n\t/*if (loc.match(/tonyuedit\\.appspot\\.com/) || loc.match(/localhost:8888/) ) {\r\n\t\t//WebSite.disableROM={\"ROM_d.js\":true};\r\n\t}*/\r\n\tif (loc.match(/\\.appspot\\.com/) ||  loc.match(/localhost:888[87]/)) {\r\n\t\tWebSite.serverType=\"GAE\";\r\n\t}\r\n\tif (loc.match(/localhost:3000/) ) {\r\n\t\tWebSite.serverType=\"Node\";\r\n\t}\r\n\tif (loc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/)) {\r\n\t\tWebSite.serverTop=WebSite.top+\"/exe\"; // Fix NetModule.tonyu!!\r\n\t} else {\r\n\t\tWebSite.serverTop=WebSite.top+\"/edit\";// Fix NetModule.tonyu!!\r\n\t}\r\n\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\tWebSite.blobPath=WebSite.serverTop+\"/serveBlob\";        //TODO: urlchange!\r\n\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\tWebSite.mp4Disabled=WebSite.isNW;\r\n\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\tWebSite.url={\r\n\t\tgetDirInfo:WebSite.serverTop+\"/getDirInfo\",\r\n\t\tgetFiles:WebSite.serverTop+\"/File2LSSync\",\r\n\t\tputFiles:WebSite.serverTop+\"/LS2FileSync\"\r\n\t};\r\n\tWebSite.PathSep=\"/\";\r\n\tif (WebSite.isNW) {\r\n\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\tif (process.env.TONYU_HOME) {\r\n\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t} else {\r\n\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t}\r\n\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\tWebSite.platform=process.platform;\r\n\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\td=P.directorify(d);\r\n\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t} else {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/)) {\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=prot+\"//\"+location.host+\"/Kernel/\";\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/) ||\r\n\t\tWebSite.isNW) {\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t} else if (WebSite.serverType===\"BA\") {\r\n\t\tWebSite.compiledKernel=WebSite.runtime+\"lib/tonyu/kernel.js\";\r\n\t} else {\r\n\t\tWebSite.compiledKernel=\"https://edit.tonyu.jp/Kernel/js/concat.js\";\r\n\t\t//WebSite.compiledKernel=prot+\"//tonyuexe.appspot.com/Kernel/js/concat.js\";\r\n\t}\r\n\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t} else {\r\n\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t}\r\n\r\n\tif (loc.match(/((index)|(project))2/)) {\r\n\t\tWebSite.version=2;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.devMode=true;\r\n\t\t} else {\r\n\t\t\tWebSite.devMode=false;\r\n\t\t}\r\n\t}\r\n\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\twindow.WebSite=WebSite;\r\n\treturn WebSite;\r\n});\r\n\ndefine('Assets',[\"WebSite\",\"Util\",\"Tonyu\",\"FS\"],function (WebSite,Util,Tonyu,FS) {\r\n    var Assets={};\r\n    Assets.resolve=function (url, prj, options) {\r\n        options=options||{};\r\n        var baseDir=FS.isFile(prj)?prj:prj.getDir();\r\n        if (url==null) url=\"\";\r\n        url=url.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (t,name) {\r\n            return WebSite[name];\r\n        });\r\n        if (WebSite.urlAliases[url]) url=WebSite.urlAliases[url];\r\n        if (Util.startsWith(url,\"ls:\")) {\r\n            var rel=url.substring(\"ls:\".length);\r\n            if (!baseDir) throw new Error(\"Basedir not specified\");\r\n            var f=baseDir.rel(rel);\r\n            if (!f.exists()) throw new Error(\"Resource file not found: \"+f);\r\n            if (\r\n                (WebSite.mp3Disabled && rel.match(/\\.(mp3)$/)) ||\r\n                (WebSite.mp4Disabled && rel.match(/\\.(mp4|m4a)$/))\r\n            ) {\r\n                var oggf=baseDir.rel(rel.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\"));\r\n                if (oggf.exists()) {\r\n                    f=oggf;\r\n                }\r\n            }\r\n            url=f.getURL();\r\n            if (options.asFile) return f;\r\n        }\r\n        return url;\r\n    };\r\n    Tonyu.Assets=Assets;\r\n    return Assets;\r\n});\r\n\ndefine('assert',[\"FS\"],function (FS){return FS.assert;});\r\n\ndefine('ImageList',[\"PatternParser\",\"Util\",\"Assets\",\"assert\"], function (PP,Util,Assets,assert) {\r\n    var cache={};\r\n    function excludeEmpty(resImgs) {\r\n        var r=[];\r\n        resImgs.forEach(function (resImg,i) {\r\n            if (!resImg || resImg.url==\"\") return;\r\n            r.push(resImg);\r\n        });\r\n        return r;\r\n    }\r\n    var IL;\r\n    IL=function (resImgs, onLoad,options) {\r\n        //  resImgs:[{url: , [pwidth: , pheight:]?  }]\r\n\t    if (!options) options={};\r\n        resImgs=excludeEmpty(resImgs);\r\n        var resa=[];\r\n        var cnt=resImgs.length;\r\n        if (cnt==0) setTimeout(function () {\r\n            var res=[];\r\n            res.names={};\r\n            onLoad(res);\r\n        },0);\r\n        resImgs.forEach(function (resImg,i) {\r\n            console.log(\"loading\", resImg,i);\r\n            var url=resImg.url;\r\n            var urlKey=url;\r\n            if (cache[urlKey]) {\r\n            \tproc.apply(cache[urlKey],[]);\r\n            \treturn;\r\n            }\r\n            url=Assets.resolve(url,options.prj||options.baseDir);\r\n            //if (!Util.startsWith(url,\"data:\")) url+=\"?\" + new Date().getTime();\r\n            var im=$(\"<img>\");\r\n            im.load(function () {\r\n            \tcache[urlKey]=this;\r\n            \tproc.apply(this,[]);\r\n            });\r\n            im.attr(\"src\",url);\r\n            function proc() {\r\n                var pw,ph;\r\n                if (resImg.type==\"single\") {\r\n                    resa[i]=[{image:this, x:0,y:0, width:this.width, height:this.height}];\r\n                } else if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n                    var x=0, y=0, w=this.width, h=this.height;\r\n                    var r=[];\r\n                    while (true) {\r\n                        var rw=pw,rh=ph;\r\n                        if (x+pw>w) rw=w-x;\r\n                        if (y+ph>h) rh=h-y;\r\n                        r.push({image:this, x:x,y:y, width:rw, height:rh});\r\n                        x+=pw;\r\n                        if (x+pw>w) {\r\n                            x=0;\r\n                            y+=ph;\r\n                            if (y+ph>h) break;\r\n                        }\r\n                    }\r\n                    resa[i]=r;\r\n                } else {\r\n                    var p=new PP(this);\r\n                    resa[i]=p.parse();\r\n                }\r\n                resa[i].name=resImg.name;\r\n                assert.is(resa[i],Array);\r\n                cnt--;\r\n                if (cnt==0) {\r\n                    var res=[];\r\n                    var names={};\r\n                    resa.forEach(function (a) {\r\n                        names[a.name]=res.length;\r\n                        res=res.concat(a);\r\n                    });\r\n                    res.names=names;\r\n                    onLoad(res);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    IL.load=IL;\r\n    IL.parse1=function (resImg, imgDOM, options) {\r\n        var pw,ph;\r\n        var res;\r\n        if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n            var x=0, y=0, w=imgDOM.width, h=imgDOM.height;\r\n            var r=[];\r\n            while (true) {\r\n                r.push({image:this, x:x,y:y, width:pw, height:ph});\r\n                x+=pw;\r\n                if (x+pw>w) {\r\n                    x=0;\r\n                    y+=ph;\r\n                    if (y+ph>h) break;\r\n                }\r\n            }\r\n            res=r;\r\n        } else {\r\n            var p=new PP(imgDOM,options);\r\n            res=p.parse();\r\n        }\r\n        res.name=resImg.name;\r\n        return assert.is(res,Array);\r\n    };\r\n\twindow.ImageList=IL;\r\n    return IL;\r\n});\r\n\ndefine('Auth',[\"WebSite\"],function (WebSite) {\r\n    var auth={};\r\n    auth.currentUser=function (onend) {\r\n        //TODO: urlchange!\r\n        $.ajax({type:\"get\",url:WebSite.serverTop+\"/currentUser\",data:{withCsrfToken:true},\r\n            success:function (res) {\r\n                console.log(\"auth.currentUser\",res);\r\n                res=JSON.parse(res);\r\n                var u=res.user;\r\n                if (u==\"null\") u=null;\r\n                console.log(\"user\", u, \"csrfToken\",res.csrfToken);\r\n                onend(u,res.csrfToken);\r\n            }\r\n        });\r\n    };\r\n    auth.assertLogin=function (options) {\r\n        /*if (typeof options==\"function\") options={complete:options};\r\n        if (!options.confirm) options.confirm=\"\";\r\n        if (typeof options.confirm==\"string\") {\r\n            var mesg=options.confirm;\r\n            options.confirm=function () {\r\n                return confirm(mesg);\r\n            };\r\n        }*/\r\n        auth.currentUser(function (user,csrfToken) {\r\n            if (user) {\r\n                return options.success(user,csrfToken);\r\n            }\r\n            window.onLoggedIn=options.success;\r\n            //TODO: urlchange!\r\n            options.showLoginLink(WebSite.serverTop+\"/login\");\r\n        });\r\n    };\r\n    window.Auth=auth;\r\n    return auth;\r\n});\ndefine('Blob',[\"Auth\",\"WebSite\",\"Util\"],function (a,WebSite,Util) {\r\n    var Blob={};\r\n    var BLOB_PATH_EXPR=\"${blobPath}\";\r\n    Blob.BLOB_PATH_EXPR=BLOB_PATH_EXPR;\r\n    Blob.upload=function(user, project, file, options) {\r\n        var fd = new FormData(document.getElementById(\"fileinfo\"));\r\n        if (options.error) {\r\n            options.error=function (r) {alert(r);};\r\n        }\r\n        fd.append(\"theFile\", file);\r\n        fd.append(\"user\",user);\r\n        fd.append(\"project\",project);\r\n        fd.append(\"fileName\",file.name);\r\n      //TODO: urlchange!\r\n        $.ajax({\r\n            type : \"get\",\r\n            url : WebSite.serverTop+\"/blobURL\",\r\n            success : function(url) {\r\n                $.ajax({\r\n                    url : url,\r\n                    type : \"POST\",\r\n                    data : fd,\r\n                    processData : false, // jQuery \r\n                    contentType : false, // jQuery  contentType \r\n                    success : function(res) {\r\n                        console.log(\"Res = \" + res);\r\n                        options.success.apply({},arguments);// $(\"#drag\").append(res);\r\n                    },\r\n                    error: options.error\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Blob.isBlobURL=function (url) {\r\n        if (Util.startsWith(url,BLOB_PATH_EXPR)) {\r\n            var a=url.split(\"/\");\r\n            return {user:a[1], project:a[2], fileName:a[3]};\r\n        }\r\n    };\r\n    // actualURL;\r\n    Blob.url=function(user,project,fileName) {\r\n        return WebSite.blobPath+user+\"/\"+project+\"/\"+fileName;\r\n    };\r\n    Blob.uploadToExe=function (prj, options) {\r\n        var bis=prj.getBlobInfos();\r\n        var cnt=bis.length;\r\n        console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        if (cnt==0) return options.success();\r\n        if (!options.progress) options.progress=function (cnt) {\r\n            console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        };\r\n        bis.forEach(function (bi) {\r\n            var data={csrfToken:options.csrfToken};\r\n            for (var i in bi) data[i]=bi[i];\r\n            $.ajax({\r\n                type:\"get\",\r\n                url: WebSite.serverTop+\"/uploadBlobToExe\",   //TODO: urlchange!\r\n                data:data,\r\n                success: function () {\r\n                     cnt--;\r\n                     if (cnt==0) return options.success();\r\n                     else options.progress(cnt);\r\n                },\r\n                error:options.error\r\n             });\r\n        });\r\n    };\r\n    return Blob;\r\n});\ndefine('ImageRect',[],function () {\r\n    function draw(img, canvas) {\r\n        if (typeof img==\"string\") {\r\n            var i=new Image();\r\n            var res=null;\r\n            var callback=null;\r\n            var onld=function (clb) {\r\n                if (clb) callback=clb;\r\n                if (callback && res) {\r\n                    callback(res);\r\n                }\r\n            };\r\n            i.onload=function () {\r\n                res=draw(i,canvas);\r\n                onld();\r\n            };\r\n            i.src=img;\r\n            return onld;\r\n        }\r\n        var cw=canvas.width;\r\n        var ch=canvas.height;\r\n        var cctx=canvas.getContext(\"2d\");\r\n        var width=img.width;\r\n        var height=img.height;\r\n        var calcw=ch/height*width; // calch=ch\r\n        var calch=cw/width*height; // calcw=cw\r\n        if (calch>ch) calch=ch;\r\n        if (calcw>cw) calcw=cw;\r\n        cctx.clearRect(0,0,cw,ch);\r\n        var marginw=Math.floor((cw-calcw)/2);\r\n        var marginh=Math.floor((ch-calch)/2);\r\n        cctx.drawImage(img,\r\n                0,0,width, height,\r\n                marginw,marginh,calcw, calch );\r\n        return {left: marginw, top:marginh, width:calcw, height:calch,src:img};\r\n    }\r\n    return draw;\r\n});\ndefine('Content',[\"FS\"],function (FS){return FS.Content;});\r\n\ndefine('thumbnail',[\"ImageRect\",\"Content\"],function (IR,Content) {\r\n    var TN={};\r\n    var createThumbnail;\r\n    var NAME=\"$icon_thumbnail\";\r\n    var WIDTH=200;HEIGHT=200;\r\n    TN.set=function (prj,delay) {\r\n        setTimeout(function () { crt(prj);} ,delay);\r\n    };\r\n    TN.get=function (prj) {\r\n        var f=TN.file(prj);\r\n        if (!f.exists()) return null;\r\n        return f.text();\r\n    };\r\n    TN.file=function (prj) {\r\n        var prjdir=prj.getDir();\r\n        var imfile= prjdir.rel(\"images/\").rel(\"icon_thumbnail.png\");\r\n        //console.log(\"Thumb file=\",imfile.path(),imfile.exists());\r\n        return imfile;\r\n    };\r\n    function crt(prj) {\r\n        try {\r\n            var img=Tonyu.globals.$Screen.buf[0];\r\n            var cv=$(\"<canvas>\").attr({width:WIDTH,height:HEIGHT});\r\n            IR(img, cv[0]);\r\n            var url=cv[0].toDataURL();\r\n            var rsrc=prj.getResource();\r\n            var prjdir=prj.getDir();\r\n            var imfile=TN.file(prj);\r\n            imfile.text( url );\r\n            var item={\r\n                name:NAME,\r\n                pwidth:WIDTH,pheight:HEIGHT,\r\n                url:\"ls:\"+imfile.relPath(prjdir)\r\n            };\r\n            var imgs=rsrc.images;\r\n            var add=false;\r\n            for (var i=0 ; i<imgs.length ; i++) {\r\n                if (imgs[i].name==NAME) {\r\n                    imgs[i]=item;\r\n                    add=true;\r\n                }\r\n            }\r\n            if (!add) imgs.push(item);\r\n\r\n            prj.setResource(rsrc);\r\n            console.log(\"setRSRC\",rsrc);\r\n        } catch (e) {\r\n            console.log(\"Create thumbnail failed\",e);\r\n            console.log(e.stack);\r\n        }\r\n    };\r\n    return TN;\r\n});\r\n\ndefine('plugins',[\"WebSite\",\"root\"],function (WebSite,root){\r\n    var plugins={};\r\n    var installed= {\r\n        box2d:{src: \"Box2dWeb-2.1.a.3.min.js\",detection:/BodyActor/,symbol:\"Box2D\" },\r\n        timbre: {src:\"timbre.js\",symbol:\"T\" },\r\n        gif: {src:\"gif-concat.js\",detection:/GIFWriter/,symbol:\"GIF\"},\r\n        Mezonet: {src:\"Mezonet.js\", symbol: \"Mezonet\"},\r\n        PicoAudio: {src:\"PicoAudio.min.js\", symbol:\"PicoAudio\"},\r\n        // single js is required for runScript1.js\r\n        jquery_ui: {src:\"jquery-ui.js\", detection:/\\$InputBox/,symbol:\"$.ui\"}\r\n    };\r\n    plugins.installed=installed;\r\n    plugins.detectNeeded=function (src,res) {\r\n        for (var name in installed) {\r\n            var d=installed[name].detection;\r\n            if (d) {\r\n                var r=d.exec(src);\r\n                if (r) res[name]=1;\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    plugins.loaded=function (name) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        return hasInGlobal(i.symbol);\r\n    };\r\n    function hasInGlobal(name) {\r\n        // name: dot ok\r\n        var g=window;\r\n        name.split(\".\").forEach(function (e) {\r\n            if (!g) return;\r\n            g=g[e];\r\n        });\r\n        return g;\r\n    }\r\n    plugins.loadAll=function (names,options) {\r\n        options=convOpt(options);\r\n        var namea=[];\r\n        for (var name in names) {\r\n            if (installed[name] && !plugins.loaded(name)) {\r\n                namea.push(name);\r\n            }\r\n        }\r\n        var i=0;\r\n        console.log(\"loading plugins\",namea);\r\n        setTimeout(loadNext,0);\r\n        function loadNext() {\r\n            if (i>=namea.length) options.onload();\r\n            else plugins.load(namea[i++],loadNext);\r\n        }\r\n    };\r\n    function convOpt(options) {\r\n        if (typeof options==\"function\") options={onload:options};\r\n        if (!options) options={};\r\n        if (!options.onload) options.onload=function (){};\r\n        return options;\r\n    }\r\n    plugins.load=function (name,options) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        options=convOpt(options);\r\n        var src=WebSite.pluginTop+\"/\"+i.src;\r\n        var reqj=root.requirejs;\r\n        /*if (typeof requireSimulator===\"undefined\") {\r\n            if (typeof requirejs===\"function\") reqj=requirejs;\r\n        } else {\r\n            if (requireSimulator.real) reqj=requireSimulator.real.requirejs;\r\n        }*/\r\n        if (reqj) {\r\n            src=src.replace(/\\.js$/,\"\");\r\n            console.log(\"Loading plugin via requirejs\",src);\r\n            reqj([src], function (res) {\r\n                if (!window[i.symbol] && res) window[i.symbol]=res;\r\n                options.onload(res);\r\n            });\r\n        } else {\r\n            console.log(\"Loading plugin via <script>\",src);\r\n            var s=document.createElement(\"script\");\r\n            s.src=src;\r\n            s.onload=options.onload;\r\n            document.body.appendChild(s);\r\n            //$(\"<script>\").on(\"load\",options.onload).attr(\"src\",src).appendTo(\"body\");\r\n        }\r\n        //setTimeout(options.onload,500);\r\n\r\n    };\r\n    plugins.request=function (name) {\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"Plugin \"+name+\" required\");\r\n        req.pluginName=name;\r\n    };\r\n    return plugins;\r\n});\r\n\ndefine('DeferredUtil',[\"FS\"],function (FS){return FS.DeferredUtil;});\r\n\ndefine('sysMod',[\"Tonyu\", \"FS\", \"ImageList\",\r\n        \"Blob\",\"thumbnail\",\"WebSite\",\"plugins\",\r\n        \"DeferredUtil\"],\r\n        function (Tonyu, FS, ImageList,\r\n                Blob,thumbnail,WebSite,plugins,\r\n                DU) {\r\n// (was TonyuProject)\r\nreturn {\r\n    /*stop:function () {\r\n        var cur=this.runningThread; // Tonyu.getGlobal(\"$currentThreadGroup\");\r\n        if (cur) cur.kill();\r\n        var main=this.runningObj;\r\n        if (main && main.stop) return main.stop();\r\n    },*/\r\n    rawRun:function (bootClassName) {\r\n        if (WebSite.removeJSOutput) {\r\n            var o=this.getOutputFile();\r\n            if (o.exists()) o.rm();\r\n        }\r\n        return this.loadClasses().then(()=>{\r\n            //TPR.compile();\r\n            this.detectPlugins();\r\n            this.fixBootRunClasses();\r\n            if (!this.runScriptMode) thumbnail.set(this, 2000);\r\n            this.rawBoot(bootClassName);\r\n        });\r\n    },\r\n    getResourceFile: function () {\r\n        return this.getDir().rel(\"res.json\");\r\n    },\r\n    getResource: function () {\r\n        var resFile=this.getResourceFile();\r\n        if (resFile.exists()) {\r\n            var res=resFile.obj();\r\n            var chg=false;\r\n            for (var imgSnd in res) {\r\n                var ary=res[imgSnd];\r\n                for (var i=ary.length-1; i>=0 ;i--) {\r\n                    if (!ary[i].url) {\r\n                        ary.splice(i,1);\r\n                        chg=true;\r\n                    }\r\n                }\r\n            }\r\n            if (chg) this.setResource(res);\r\n            return res;\r\n        }\r\n        return Tonyu.defaultResource;\r\n    },\r\n    hasSoundResource: function () {\r\n        var res=this.getResource();\r\n        return res && res.sounds && res.sounds.length>0;\r\n    },\r\n    setResource: function (rsrc) {\r\n        var resFile=this.getResourceFile();\r\n        resFile.obj(rsrc);\r\n    },\r\n    getThumbnail: function () {\r\n        return thumbnail.get(this);\r\n    },\r\n    convertBlobInfos: function (user) {\r\n        var rsrc=this.getResource();\r\n        var name=this.getName();\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        o[k]=[Blob.BLOB_PATH_EXPR,user,name,a.fileName].join(\"/\");\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        this.setResource(rsrc);\r\n    },\r\n    getBlobInfos: function () {\r\n        var rsrc=this.getResource();\r\n        var res=[];\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        res.push(a);\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        return res;\r\n    },\r\n    loadResource: function (next) {\r\n        var r=this.getResource();\r\n        ImageList( r.images, function (r) {\r\n            var sp=Tonyu.getGlobal(\"$Sprites\");\r\n            if (sp) {\r\n                //console.log(\"$Sprites set!\");\r\n                sp.setImageList(r);\r\n            }\r\n            //Sprites.setImageList(r);\r\n            for (var i in r.names) {\r\n                Tonyu.setGlobal(i, r.names[i]);\r\n            }\r\n            if (next) next();\r\n        });\r\n    },\r\n    detectPlugins: function () {\r\n        var opt=this.getOptions();\r\n        var plugins=opt.plugins=opt.plugins||{};\r\n        if (!plugins.Mezonet || !plugins.PicoAudio) {\r\n            var res=this.getResource();\r\n            var hasMZO=false,hasMIDI=false;\r\n            if (res.sounds) res.sounds.forEach(function (item) {\r\n                if (item.url.match(/\\.mzo/)) hasMZO=true;\r\n                if (item.url.match(/\\.midi?/)) hasMIDI=true;\r\n            });\r\n            if (hasMZO) this.addPlugin(\"Mezonet\");\r\n            else this.removePlugin(\"Mezonet\");\r\n            if (hasMIDI) this.addPlugin(\"PicoAudio\");\r\n            else this.removePlugin(\"PicoAudio\");\r\n        }\r\n    },\r\n    addPlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        if (!opt.plugins[name]) {\r\n            opt.plugins[name]=1;\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    removePlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        if (opt.plugins[name]) {\r\n            delete opt.plugins[name];\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    requestPlugin: function (name) {\r\n        this.addPlugin(name);\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"\"+name+\"\");\r\n        req.pluginName=name;\r\n        throw req;\r\n    },\r\n    loadPlugins: function (onload) {\r\n        var opt=this.getOptions();\r\n        return plugins.loadAll(opt.plugins,onload);\r\n    },\r\n    fixBootRunClasses: function () {\r\n        var opt=this.getOptions();\r\n        if (opt.run) {\r\n            var mc=this.fixClassName(opt.run.mainClass);\r\n            var bc=this.fixClassName(opt.run.bootClass);\r\n            if (mc!=opt.run.mainClass  ||  bc!=opt.run.bootClass) {\r\n                opt.run.mainClass=mc;\r\n                opt.run.bootClass=bc;\r\n                this.setOptions(opt);\r\n            }\r\n        }\r\n    },\r\n    fixClassName: function (className) {\r\n        if (Tonyu.classMetas[className]) return className;\r\n        const ns=this.getNamespace();\r\n        console.log(\"NS\", ns);\r\n        let res=Tonyu.classes[ns][className];\r\n        if (res) return `${ns}.${className}`;\r\n        for (var k in Tonyu.classes) {\r\n            res=Tonyu.classes[k][className];\r\n            if (res) return `${k}.${className}`;\r\n        }\r\n        throw new Error(`Cannot fix className ${className}`);\r\n    },\r\n    rawBoot: function (bootClassName) {\r\n        this.showProgress(\"Running \"+bootClassName);\r\n        this.initCanvas();\r\n        Tonyu.run(bootClassName);\r\n    },\r\n    initCanvas: function () {\r\n        Tonyu.globals.$mainCanvas=$(\"canvas\");\r\n    },\r\n    /*isKernelEditable: function () {\r\n    \treturn env.options.kernelEditable;\r\n    },*/\r\n    //TPR.getDir=function () {return dir;};\r\n    //TPR.getName=function () { return dir.name().replace(/\\/$/,\"\"); };\r\n\r\n    showProgress: function (m) {\r\n        console.log(\"PROGRESS\",m);\r\n        /*global SplashScreen*/\r\n        if (typeof SplashScreen!=\"undefined\") {\r\n            SplashScreen.progress(m);\r\n        }\r\n        return DU.promise(function (succ) {\r\n            setTimeout(succ,0);\r\n        });\r\n    }\r\n};\r\n});\r\n\ndefine('CompiledProject',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.CompiledProject;\r\n});\r\n\ndefine('IDEProject',['require','exports','module','ProjectFactory','BuilderClient','root','sysMod','CompiledProject','WebSite'],function (require,exports,module) {\r\n    const F=require(\"ProjectFactory\");\r\n    //const A=require(\"assert\");\r\n    const BuilderClient=require(\"BuilderClient\");\r\n    const root=require(\"root\");\r\n    const sysMod=require(\"sysMod\");\r\n    const CP=require(\"CompiledProject\");\r\n    const WebSite=require(\"WebSite\");\r\n    const langMod=BuilderClient.langMod;\r\n    /*F.addDependencyResolver((prj,spec)=> {\r\n        if (spec.namespace) {\r\n\r\n        }\r\n    });*/\r\n    F.addType(\"IDE\",params=>{\r\n        const ide=params.ide;\r\n        const res=F.createDirBasedCore(params);\r\n        const ns2depspec= {\r\n            kernel: {namespace:\"kernel\", url: WebSite.compiledKernel}\r\n        };\r\n        const c=new BuilderClient(res ,{\r\n            worker: {ns2depspec, url: WORKER_URL}\r\n        });\r\n        F.addDependencyResolver((prj,spec)=>{\r\n            if (ns2depspec[spec.namespace]) {\r\n                return CP.create(ns2depspec[spec.namespace]);\r\n            }\r\n        });\r\n        c.onCompiled=function (src) {\r\n            console.log(\"Sending src\",src);\r\n            const rp=res.getIframeProject();\r\n            if (rp) rp.exec(src).catch(e=>console.error(e));\r\n        };\r\n        let curDebugger;\r\n        root.onTonyuDebuggerReady=d=>{\r\n            d.on(\"runtimeError\",e=>{\r\n                console.log(\"runt\",e.stack.map(s=>s+\"\").join(\"\\n\"));\r\n                ide.showError(e);\r\n            });\r\n            curDebugger=d;\r\n            c.setDebugger(d);\r\n        };\r\n        res.setDebugger=d=>c.setDebugger(d);\r\n        res.compiler=c;\r\n        res.getIframeProject=()=>{\r\n            const ifrm=root.document.querySelector(\"iframe\");\r\n            if (ifrm) return ifrm.contentWindow.Project;\r\n        };\r\n        res.disconnectDebugger=()=>c.setDebugger();\r\n        res.fullCompile=c.fullCompile.bind(c);\r\n        res.partialCompile=c.partialCompile.bind(c);\r\n        res.renameClassName=c.renameClassName.bind(c);\r\n        res.include(sysMod).include(langMod);\r\n        res.stop=()=>{\r\n            try {\r\n                if (curDebugger) curDebugger.stop();\r\n            }catch(e) {\r\n                //Edge: Can't execute code from a freed script\r\n                console.error(e);\r\n            }\r\n        };\r\n        /*res.getOutputFile=function () {\r\n            // relative path in outputFile will fail old version\r\n            var opt=this.getOptions();\r\n            var o=opt.compiler.outputFile||\"js/concat.js\";\r\n            var outF=this.resolve(opt.compiler.outputFile);\r\n            return outF;\r\n        };*/\r\n        console.log(\"res.loadClasses\", res.loadClasses) ;\r\n        /*Object.assign(res,{\r\n            async loadClasses() {\r\n                await this.loadDependingClasses();\r\n\r\n            }\r\n        });*/\r\n        return res;\r\n    });\r\n    exports.create=params=>F.create(\"IDE\",params);\r\n\r\n});\r\n\ndefine('Shell',[\"FS\",\"assert\"],\r\n        function (FS,assert) {\r\n    var Shell={};\r\n    var PathUtil=assert(FS.PathUtil);\r\n    Shell.newCommand=function (name,func) {\r\n        this[name]=func;\r\n    };\r\n    Shell.cd=function (dir) {\r\n        Shell.cwd=resolve(dir,true);\r\n        return Shell.pwd();\r\n    };\r\n    Shell.vars=Object.create(FS.getEnv());\r\n    Shell.mount=function (options, path) {\r\n        //var r=resolve(path);\r\n        if (!options || !options.t) {\r\n            var fst=[];\r\n            for (var k in FS.getRootFS().availFSTypes()) {\r\n                fst.push(k);\r\n            }\r\n            sh.err(\"-t=(\"+fst.join(\"|\")+\") should be specified.\");\r\n            return;\r\n        }\r\n        FS.mount(path,options.t, options);\r\n    };\r\n    Shell.unmount=function (path) {\r\n        FS.unmount(path);\r\n    };\r\n    Shell.fstab=function () {\r\n        var rfs=FS.getRootFS();\r\n        var t=rfs.fstab();\r\n        var sh=this;\r\n        //sh.echo(rfs.fstype()+\"\\t\"+\"<Root>\");\r\n        t.forEach(function (fs) {\r\n            sh.echo(fs.fstype()+\"\\t\"+(fs.mountPoint||\"<Default>\"));\r\n        });\r\n    }\r\n    Shell.resolve=resolve;\r\n    function resolve(v, mustExist) {\r\n        var r=resolve2(v);\r\n        if (!FS.SFile.is(r)) {console.log(r,\" is not file\");}\r\n        if (mustExist && !r.exists()) throw new Error(r+\": no such file or directory\");\r\n        return r;\r\n    }\r\n    function resolve2(v) {\r\n        if (typeof v!=\"string\") return v;\r\n        var c=Shell.cwd;\r\n        if (PathUtil.isAbsolutePath(v)) return FS.resolve(v,c);\r\n        return c.rel(v);\r\n    }\r\n    Shell.pwd=function () {\r\n        return Shell.cwd+\"\";\r\n    };\r\n    Shell.ls=function (dir){\r\n    \tif (!dir) dir=Shell.cwd;\r\n    \telse dir=resolve(dir, true);\r\n        return dir.ls();\r\n    };\r\n    Shell.cp=function (from ,to ,options) {\r\n        if (!options) options={};\r\n        if (options.v) {\r\n            Shell.echo(\"cp\", from ,to);\r\n            options.echo=Shell.echo.bind(Shell);\r\n        }\r\n        var f=resolve(from, true);\r\n        var t=resolve(to);\r\n        return f.copyTo(t,options);\r\n    };\r\n    Shell.ln=function (to , from ,options) {\r\n        var f=resolve(from);\r\n        var t=resolve(to, true);\r\n        if (f.isDir() && f.exists()) {\r\n            f=f.rel(t.name());\r\n        }\r\n        if (f.exists()) {\r\n            throw new Error(f+\" exists\");\r\n        }\r\n        return f.link(t,options);\r\n    };\r\n    Shell.rm=function (file, options) {\r\n        if (!options) options={};\r\n        if (options.notrash) {\r\n            file=resolve(file, false);\r\n            file.removeWithoutTrash();\r\n            return 1;\r\n        }\r\n        file=resolve(file, true);\r\n        if (file.isDir() && options.r) {\r\n            var dir=file;\r\n            var sum=0;\r\n            dir.each(function (f) {\r\n                if (f.exists()) {\r\n                    sum+=Shell.rm(f, options);\r\n                }\r\n            });\r\n            dir.rm();\r\n            return sum+1;\r\n        } else {\r\n            file.rm();\r\n            return 1;\r\n        }\r\n    };\r\n    Shell.mkdir=function (file,options) {\r\n        file=resolve(file, false);\r\n        if (file.exists()) throw new Error(file+\" : exists\");\r\n        return file.mkdir();\r\n\r\n    };\r\n    Shell.cat=function (file,options) {\r\n        file=resolve(file, true);\r\n        return Shell.echo(file.getContent(function (c) {\r\n            if (file.isText()) {\r\n                return c.toPlainText();\r\n            } else {\r\n                return c.toURL();\r\n            }\r\n        }));\r\n    };\r\n    Shell.resolve=function (file) {\r\n        if (!file) file=\".\";\r\n        file=resolve(file);\r\n        return file;\r\n    };\r\n    Shell.grep=function (pattern, file, options) {\r\n        file=resolve(file, true);\r\n        if (!options) options={};\r\n        if (!options.res) options.res=[];\r\n        if (file.isDir()) {\r\n            file.each(function (e) {\r\n                Shell.grep(pattern, e, options);\r\n            });\r\n        } else {\r\n            if (typeof pattern==\"string\") {\r\n                file.lines().forEach(function (line, i) {\r\n                    if (line.indexOf(pattern)>=0) {\r\n                        report(file, i+1, line);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return options.res;\r\n        function report(file, lineNo, line) {\r\n            if (options.res) {\r\n                options.res.push({file:file, lineNo:lineNo,line:line});\r\n            }\r\n            Shell.echo(file+\"(\"+lineNo+\"): \"+line);\r\n\r\n        }\r\n    };\r\n    Shell.touch=function (f) {\r\n    \tf=resolve(f);\r\n    \tf.text(f.exists() ? f.text() : \"\");\r\n    \treturn 1;\r\n    };\r\n    Shell.setout=function (ui) {\r\n        Shell.outUI=ui;\r\n    };\r\n    Shell.echo=function () {\r\n        return $.when.apply($,arguments).then(function () {\r\n            console.log.apply(console,arguments);\r\n            if (Shell.outUI && Shell.outUI.log) Shell.outUI.log.apply(Shell.outUI,arguments);\r\n        });\r\n    };\r\n    Shell.err=function (e) {\r\n        console.log.apply(console,arguments);\r\n        if (e && e.stack) console.log(e.stack);\r\n        if (Shell.outUI && Shell.outUI.err) Shell.outUI.err.apply(Shell.outUI,arguments);\r\n    };\r\n    Shell.clone= function () {\r\n        var r=Object.create(this);\r\n        r.vars=Object.create(this.vars);\r\n        return r;\r\n    };\r\n    Shell.getvar=function (k) {\r\n        return this.vars[k] || (process && process.env[k]);\r\n    };\r\n    Shell.get=Shell.getvar;\r\n    Shell.set=function (k,v) {\r\n        return this.vars[k]=v;\r\n    };\r\n    Shell.strcat=function () {\r\n        if (arguments.length==1) return arguments[0];\r\n        var s=\"\";\r\n        for (var i=0;i<arguments.length;i++) s+=arguments[i];\r\n        return s;\r\n    };\r\n    Shell.exists=function (f) {\r\n        f=this.resolve(f);\r\n        return f.exists();\r\n    };\r\n    Shell.dl=function (f) {\r\n        f=this.resolve(f||\".\");\r\n        return f.download();\r\n    };\r\n    Shell.zip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.zip.apply(FS.zip,a);\r\n    };\r\n    Shell.unzip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.unzip.apply(FS.zip,a);\r\n    };\r\n\r\n    Shell.prompt=function () {};\r\n    Shell.ASYNC={r:\"SH_ASYNC\"};\r\n    Shell.help=function () {\r\n        for (var k in Shell) {\r\n            var c=Shell[k];\r\n            if (typeof c==\"function\") {\r\n                Shell.echo(k+(c.description?\" - \"+c.description:\"\"));\r\n            }\r\n        }\r\n    };\r\n    if (!window.sh) window.sh=Shell;\r\n    if (typeof process==\"object\") {\r\n        sh.devtool=function () { require('nw.gui').Window.get().showDevTools();}\r\n        sh.cd(process.cwd().replace(/\\\\/g,\"/\"));\r\n    } else {\r\n        sh.cd(\"/\");\r\n    }\r\n    return Shell;\r\n});\r\n\ndefine('ScriptTagFS',[\"Content\"],function (Content) {\r\n\tvar STF={};\r\n\tSTF.toObj=function () {\r\n\t    var scrs=$(\"script\");\r\n\t    var res={};\r\n\t    scrs.each(function (){\r\n\t        var s=this;\r\n\t        if (s.type==\"text/tonyu\") {\r\n\t            var fn=$(s).data(\"filename\");\r\n\t            if (fn) {\r\n\t                var l=parseInt($(s).data(\"lastupdate\"));\r\n\t                var w=$(s).data(\"wrap\");\r\n\t\t\t\t\tvar src=unescapeHTML(s.innerHTML);\r\n\t                if (w) {\r\n\t                    w=parseInt(w);\r\n\t                    res[fn]={lastUpdate:l, text:unwrap(src, w)};\r\n\t                } else {\r\n\t                    res[fn]={lastUpdate:l, text:src};\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    });\r\n\t    return res;\r\n\t    function unwrap(str, cols) {\r\n\t        var lines=str.split(\"\\n\");\r\n\t        var buf=\"\";\r\n\t        lines.forEach(function (line) {\r\n\t            if (line.length>cols) {\r\n\t                buf+=line.substring(0,cols);\r\n\t            } else {\r\n\t                buf+=line+\"\\n\";\r\n\t            }\r\n\t        });\r\n\t        return buf;\r\n\t    }\r\n\t};\r\n\tSTF.copyTo=function (dir) {\r\n\t    var o=STF.toObj();\r\n\t    for (var fn in o) {\r\n            var f=dir.rel(fn);\r\n            if (f.isText()) {\r\n                f.text(o[fn].text);\r\n            } else {\r\n                f.setBytes(Content.url(o[fn].text).toByteArray() );\r\n            }\r\n        }\r\n\t};\r\n\tfunction unescapeHTML(str) {\r\n\t\tvar div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = str.replace(/</g,\"&lt;\")\r\n\t\t\t\t\t\t\t .replace(/>/g,\"&gt;\")\r\n\t\t\t\t\t\t\t .replace(/ /g, \"&#32;\")\r\n\t\t\t\t\t\t\t .replace(/\\r/g, \"&#13;\")\r\n\t\t\t\t\t\t\t .replace(/\\n/g, \"&#10;\");\r\n\t\treturn div.textContent || div.innerText;\r\n\t}\r\n\treturn STF;\r\n});\r\n\n/*global webkitAudioContext, AudioContext, AudioBuffer, AudioBufferSourceNode, PicoAudio, Mezonet, WebSite, Util*/\r\n// forked from makkii_bcr's \"T2MediaLib\" http://jsdo.it/makkii_bcr/3ioQ\r\n\r\nvar T2MediaLib = (function(){\r\n    function isPicoAudio(bgm) {\r\n        return typeof PicoAudio!==\"undefined\" && bgm instanceof PicoAudio;\r\n    }\r\n    function isMezonetSource(bgm) {\r\n        return typeof Mezonet!==\"undefined\" && bgm instanceof Mezonet.Source;\r\n    }\r\n    var T2MediaLib = function(_context) {\r\n        this.context = null;\r\n        this.picoAudio = null;\r\n        this.soundDataAry = []; // T2MediaLib_SoundData\r\n        this.bgmPlayerMax = 16;\r\n        this.bgmPlayerAry = []; // T2MediaLib_BGMPlayer\r\n\r\n        this.masterVolume = 1.0;\r\n        this.seMasterVolume = 1.0;\r\n        this.bgmMasterVolume = 1.0;\r\n\r\n        this.playingAudio = null;\r\n        this.audioVolume = 1.0;\r\n        this.audioTempo = 1.0;\r\n        this.audioDataAry = {\r\n            data : []\r\n        };\r\n        this.seSources=[];\r\n        this.init(_context);\r\n    };\r\n\r\n    //  //\r\n    T2MediaLib.prototype.init = function(_context) {\r\n        if (this.inited) return;\r\n        this.inited=true;\r\n        if (this.disabled) return;\r\n        if (!_context) {\r\n            if (window.AudioContext) {\r\n                this.context = new AudioContext();\r\n            } else if (window.webkitAudioContext) {\r\n                this.context = new webkitAudioContext();\r\n            } else {\r\n                this.context = null;\r\n                console.log('Your browser does not support yet Web Audio API');\r\n            }\r\n        } else {\r\n            this.context = _context;\r\n        }\r\n\r\n        // Web Audio API \r\n        if (this.context) {\r\n            // BGMPlayer (16)\r\n            for (var i=0; i<this.bgmPlayerMax; i++) {\r\n                this.bgmPlayerAry[i] = new T2MediaLib_BGMPlayer(this, i);\r\n            }\r\n        }\r\n    };\r\n\r\n    // CLEAR //\r\n    T2MediaLib.prototype.allClearSoundData = function() {\r\n        var dataAry = this.soundDataAry;\r\n        for (var idx in dataAry) {\r\n            delete dataAry[idx];\r\n        }\r\n    };\r\n    T2MediaLib.prototype.clearSoundData = function(idx) {\r\n        var dataAry = this.soundDataAry;\r\n        delete dataAry[idx];\r\n    };\r\n    T2MediaLib.prototype.allRemoveDecodedSoundData = function() {\r\n        var dataAry = this.soundDataAry;\r\n        for (var idx in dataAry) {\r\n            var soundData = dataAry[idx];\r\n            if (soundData == null) continue;\r\n            if (!soundData.isDecodeComplete() && !soundData.isDecoding()) continue;\r\n            soundData.removeDecodedData();\r\n        }\r\n    };\r\n    T2MediaLib.prototype.removeDecodedSoundData = function(idx) {\r\n        var soundData = this.soundDataAry[idx];\r\n        if (soundData == null) return;\r\n        if (!soundData.isDecodeComplete() && !soundData.isDecoding()) return;\r\n        soundData.removeDecodedData();\r\n    };\r\n\r\n\r\n    // SE&BGM //\r\n    T2MediaLib.prototype.getMasterVolume = function() {\r\n        return this.masterVolume;\r\n    };\r\n    T2MediaLib.prototype.setMasterVolume = function(vol) {\r\n        this.masterVolume = vol;\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            var bgmPlayer = this.bgmPlayerAry[i];\r\n            if (!(bgmPlayer instanceof T2MediaLib_BGMPlayer)) continue;\r\n            bgmPlayer.onChangeBGMMasterVolume();\r\n        }\r\n    };\r\n\r\n    // \r\n    T2MediaLib.prototype.createSoundFromArray = function(idx, array1, array2) {\r\n        if (!this.context || this.disabled) {\r\n            return null;\r\n        }\r\n        this.soundDataAry[idx] = new T2MediaLib_SoundData(idx);\r\n\r\n        var ctx = this.context;\r\n        var numOfChannels = array1 != null && array2 != null ? 2 : 1;\r\n        var audioBuffer = ctx.createBuffer(numOfChannels, array1.length, ctx.sampleRate);\r\n        var buffer1 = audioBuffer.getChannelData(0);\r\n        var buffer2 = array2 != null ? audioBuffer.getChannelData(1) : null;\r\n        var i;\r\n        for (i = 0; i < array1.length ; i++) {\r\n             buffer1[i] = array1[i];\r\n        }\r\n        if (buffer2) {\r\n            for (i = 0; i < array2.length ; i++) {\r\n                 buffer2[i] = array2[i];\r\n            }\r\n        }\r\n        this.soundDataAry[idx].onDecodeComplete(audioBuffer);\r\n    };\r\n    // \r\n    T2MediaLib.prototype.loadSound = function(idx, url, callbacks, isLoadAndDecode) { //@hoge1e3\r\n        if (!this.context || this.disabled) {\r\n            return null;\r\n        }\r\n\r\n        this.soundDataAry[idx] = new T2MediaLib_SoundData(idx);\r\n\r\n        // midipicoAudio\r\n        if (url.match(/\\.(midi?)$/) || url.match(/^data:audio\\/mid/)) {\r\n            if (this.picoAudio == null) {\r\n                this.picoAudio = new PicoAudio(this.context);\r\n            }\r\n        }\r\n        if (typeof WebSite==\"object\" && WebSite.mp3Disabled) {\r\n            url=url.replace(/\\.(mp3)$/,\".ogg\");\r\n        }\r\n        if (typeof WebSite==\"object\" && WebSite.mp4Disabled) {\r\n            url=url.replace(/\\.(mp4|m4a)$/,\".ogg\");\r\n        }\r\n        var that = this;\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.onload = function() {\r\n            if (xhr.status === 200 || xhr.status === 0 /*@hoge1e3 for node-webkit base64url */) {\r\n                var arrayBuffer = xhr.response;\r\n                if (arrayBuffer instanceof ArrayBuffer) {\r\n                    that.soundDataAry[idx].onLoadComplete(arrayBuffer);\r\n                    if (isLoadAndDecode) { // \r\n                        that.decodeSound(idx, callbacks);\r\n                    } else { // \r\n                        if (callbacks && callbacks.succ) callbacks.succ(idx);\r\n                    }\r\n                } else {\r\n                    that.soundDataAry[idx].onError(\"XHR_RESPONSE_ERROR\");\r\n                    if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n                }\r\n            } else {\r\n                that.soundDataAry[idx].onError(\"XHR_STATUS_ERROR\");\r\n                if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n            }\r\n        };\r\n        xhr.onerror=function (e) {\r\n            console.log(e+\"\");\r\n            that.soundDataAry[idx].onError(\"XHR_ERROR\");\r\n            if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n        };\r\n\r\n        this.soundDataAry[idx].onLoad(url);\r\n        if (url.match(/^data:/) && typeof Util!==\"undefined\" && Util.Base64_To_ArrayBuffer) {//@hoge1e3\r\n            xhr={onload:xhr.onload};\r\n            xhr.response=Util.Base64_To_ArrayBuffer( url.replace(/^data:audio\\/[a-zA-Z0-9\\-]+;base64,/i,\"\"));\r\n            xhr.status=200;\r\n            xhr.onload();\r\n        } else {\r\n            xhr.open('GET', url, true);\r\n            xhr.responseType = 'arraybuffer';\r\n            try {\r\n                xhr.send(null);\r\n            } catch(e) {\r\n                this.soundDataAry[idx].onError(\"FILE_NOT_FOUND\");\r\n                if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n            }\r\n        }\r\n    };\r\n    // \r\n    T2MediaLib.prototype.decodeSound = function(idx, callbacks) {\r\n        var soundData = this.soundDataAry[idx];\r\n        if (soundData == null) return;\r\n        if (soundData.fileData == null) return;\r\n        if (!soundData.isLoadComplete()) return;\r\n        if (soundData.isDecodeComplete()) return;\r\n\r\n        // Adding Callback\r\n        if (soundData.decodedCallbacksAry == null) {\r\n            soundData.decodedCallbacksAry = []; // \r\n        }\r\n        if (callbacks) {\r\n            if (callbacks.bgmPlayerId != null) { // bgmPlayerIdcallbacks()\r\n                var exists = soundData.decodedCallbacksAry.some(function(c, i) {\r\n                    if (callbacks.bgmPlayerId == c.bgmPlayerId) {\r\n                        soundData.decodedCallbacksAry[i] = callbacks;\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                });\r\n                if (!exists) {\r\n                    soundData.decodedCallbacksAry.push(callbacks);\r\n                }\r\n            } else {\r\n                soundData.decodedCallbacksAry.push(callbacks);\r\n            }\r\n        }\r\n\r\n        if (soundData.isDecoding()) return;\r\n        soundData.onDecode();\r\n        var arrayBuffer = soundData.fileData.slice(0);\r\n        var that = this;\r\n        if (soundData.url.match(/\\.(midi?)$/) || soundData.url.match(/^data:audio\\/mid/)) {\r\n            // Midi\r\n            // PicoAudio.js\r\n            if (this.picoAudio == null) {\r\n                this.picoAudio = new PicoAudio(this.context);\r\n            }\r\n            var smf = new Uint8Array(arrayBuffer);\r\n            var data = this.picoAudio.parseSMF(smf);\r\n            if (typeof data == \"string\") { // parseSMF Error\r\n                console.log('T2MediaLib: Error parseSMF()', data);\r\n                this.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, this.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            } else {\r\n                this.soundDataAry[idx].onDecodeComplete(data);\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.succ == \"function\") {\r\n                        callbacks.succ(idx);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            }\r\n        } else if (soundData.url.match(/\\.mzo$/) || soundData.url.match(/^data:audio\\/mzo/)) {\r\n            //console.log(\"Loading mzo\");\r\n            // MZO\r\n            Mezonet.init().then(function () {\r\n                var a=Array.prototype.slice.call( new Uint8Array(arrayBuffer) );\r\n                that.soundDataAry[idx].onDecodeComplete(new Mezonet.Source(a));\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.succ == \"function\") {\r\n                        callbacks.succ(idx);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            },function (error) {\r\n                if (error instanceof Error) {\r\n                    console.log('T2MediaLib: '+error.message, soundData.url);//@hoge1e3\r\n                } else {\r\n                    console.log('T2MediaLib: Error decodeMZO()', soundData.url);//@hoge1e3\r\n                }\r\n                that.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, that.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            });\r\n            /*var m=new Mezonet(this.context,a);//,{wavOutSpeed:50});\r\n            //m.load(a);\r\n            m.init().then(function (res) {\r\n                // removeDecodeSoundData()\r\n                switch(res.playbackMode.type) {\r\n                case \"Mezonet\":\r\n                that.soundDataAry[idx].onDecodeComplete(m);\r\n                break;\r\n                case \"AudioBuffer\":\r\n                //console.log(idx, res.decodedData);\r\n                that.soundDataAry[idx].onDecodeComplete(res.decodedData);\r\n                break;\r\n                }\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.succ == \"function\") {\r\n                        callbacks.succ(idx);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            },function (error) {\r\n                if (error instanceof Error) {\r\n                    console.log('T2MediaLib: '+error.message, soundData.url);//@hoge1e3\r\n                } else {\r\n                    console.log('T2MediaLib: Error decodeMZO()', soundData.url);//@hoge1e3\r\n                }\r\n                that.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, that.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            }).finally(function () {\r\n                m.terminate();\r\n            });*/\r\n        } else {\r\n            // MP3, Ogg, AAC, WAV\r\n\r\n            // Ogg(LOOPSTART, LOOPLENGTH)\r\n            if (soundData.url.match(/\\.(ogg?)$/) || soundData.url.match(/^data:audio\\/ogg/)) {\r\n                var retAry = this.searchOggLoop(arrayBuffer);\r\n                soundData.tagLoopStart = retAry[0];\r\n                soundData.tagLoopEnd = retAry[1];\r\n            }\r\n\r\n            var successCallback = function(audioBuffer) {\r\n                // removeDecodeSoundData()\r\n                if (that.soundDataAry[idx].isDecoding()) {\r\n                    that.soundDataAry[idx].onDecodeComplete(audioBuffer);\r\n                    soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                        if (typeof callbacks.succ == \"function\") {\r\n                            callbacks.succ(idx);\r\n                        }\r\n                    });\r\n                    soundData.decodedCallbacksAry = null;\r\n                }\r\n            };\r\n            var errorCallback = function(error) {\r\n                if (error instanceof Error) {\r\n                    console.log('T2MediaLib: '+error.message, soundData.url);//@hoge1e3\r\n                } else {\r\n                    console.log('T2MediaLib: Error decodeAudioData()', soundData.url);//@hoge1e3\r\n                }\r\n                that.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, that.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            };\r\n            this.context.decodeAudioData(arrayBuffer, successCallback, errorCallback);\r\n        }\r\n    };\r\n    // Web Audio API(iOS)\r\n    // Chrome Autoplay Policy \r\n    T2MediaLib.prototype.activate = function () {\r\n        this.init();\r\n        if (!this.context) return;\r\n        if (!this.isContextResumed && this.context.resume) { // fix Autoplay Policy in Chrome\r\n            var that = this;\r\n            this.context.resume().then(function () {\r\n                that.isContextResumed = true;\r\n            });\r\n        }\r\n        if (this.isActivated) return;\r\n        this.isActivated=true;\r\n        var buffer = this.context.createBuffer(1, Math.floor(this.context.sampleRate/32), this.context.sampleRate);\r\n        var ary = buffer.getChannelData(0);\r\n        for (var i = 0; i < ary.length; i++) {\r\n             ary[i] = 0; // \r\n        }\r\n        var source = this.context.createBufferSource();\r\n        source.buffer = buffer;\r\n        source.connect(this.context.destination);\r\n        source.start = source.start || source.noteOn;\r\n        source.start(0);\r\n    };\r\n    // \r\n    T2MediaLib.prototype.getSoundFileData = function(idx) {\r\n        var soundDataObj = this.soundDataAry[idx];\r\n        if (soundDataObj) {\r\n            return soundDataObj.fileData;\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n    // \r\n    T2MediaLib.prototype.getSoundDecodedData = function(idx) {\r\n        var soundDataObj = this.soundDataAry[idx];\r\n        if (soundDataObj) {\r\n            return soundDataObj.decodedData;\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n    // AudioContextcurrentTime\r\n    T2MediaLib.prototype.getCurrentTime = function () {//@hoge1e3\r\n        if (!this.context) return null;\r\n        return this.context.currentTime;\r\n    };\r\n\r\n    // SE //\r\n\r\n    T2MediaLib.prototype.playSE = function(idx, vol, pan, rate, offset, loop, loopStart, loopEnd,start,duration) {//add start,duration by @hoge1e3\r\n        if (!this.context) return null;\r\n        var soundData = this.soundDataAry[idx];\r\n        if (soundData == null) return null;\r\n        if (!soundData.isDecodeComplete()) {\r\n            var that = this;\r\n            var callbacks = {};\r\n            callbacks.succ = function(idx) {\r\n                that.playSE(idx, vol, pan, rate, offset, loop, loopStart, loopEnd,start,duration);//@hoge1e3\r\n            };\r\n            callbacks.err = function() {\r\n            };\r\n            this.decodeSound(idx, callbacks);\r\n            return null;\r\n        }\r\n        if (isMezonetSource(soundData.decodedData)) {\r\n            var playback=soundData.decodedData.playback(this.context);\r\n            playback.Start();\r\n            return playback;\r\n        }\r\n\r\n        var audioBuffer = soundData.decodedData;\r\n        if (!(audioBuffer instanceof AudioBuffer)) return null;\r\n\r\n        // \r\n        if (vol == null) {\r\n            vol = 1.0;\r\n        }\r\n        if (pan == null) {\r\n            pan = 0.0;\r\n        }\r\n        if (!rate) rate = 1.0;\r\n        if (!offset) {\r\n            offset = 0;\r\n        } else {\r\n            if      (offset > audioBuffer.duration) offset = audioBuffer.duration;\r\n            else if (offset < 0.0) offset = 0.0;\r\n        }\r\n        var durationStart = duration;\r\n        if (!duration) {\r\n            //duration=undefined; // iOS9duration==undefinedsource.start(start, offset, duration);\r\n            durationStart = 86400; // Number.MAX_SAFE_INTEGERiOS986400(24)\r\n        }\r\n        if (!loop) loop = false;\r\n        if (!loopStart) {\r\n            loopStart = soundData.loopStart||0.0;\r\n        } else {\r\n            if      (loopStart < 0.0) loopStart = 0.0;\r\n            else if (loopStart > audioBuffer.duration) loopStart = audioBuffer.duration;\r\n        }\r\n        if (!loopEnd) {\r\n            loopEnd = audioBuffer.duration;\r\n        } else {\r\n            if      (loopEnd < 0.0) loopEnd = 0.0;\r\n            else if (loopEnd > audioBuffer.duration) loopEnd = audioBuffer.duration;\r\n        }\r\n        start=start||0;//@hoge1e3\r\n\r\n        var source = this.context.createBufferSource();\r\n        this.context.createGain = this.context.createGain || this.context.createGainNode;\r\n        var gainNode = this.context.createGain();\r\n        var panNode = this.context.createPanner();\r\n\r\n        source.buffer = audioBuffer;\r\n        source.loop = loop;\r\n        source.loopStart = loopStart;\r\n        source.loopEnd = loopEnd;//audioBuffer.duration;\r\n        source.playbackRate.value = rate;\r\n\r\n        // \r\n        source.connect(gainNode);\r\n        gainNode.connect(panNode);\r\n        panNode.connect(this.context.destination);\r\n        panNode.panningModel = \"equalpower\";\r\n        if      (pan < -1.0) pan = -1.0;\r\n        else if (pan >  1.0) pan =  1.0;\r\n        var panAngle = pan * 90;\r\n        var panX = Math.sin(panAngle * (Math.PI / 180));\r\n        var panZ = -Math.cos(panAngle * (Math.PI / 180));\r\n        if (pan === -1.0 || pan === 1.0) panZ = 0; // 6.123233995736766e-170\r\n        if (panNode.positionX) {\r\n            panNode.positionX.value = panX;\r\n            panNode.positionY.value = 0;\r\n            panNode.positionZ.value = panZ;\r\n        } else {\r\n            panNode.setPosition(panX, 0, panZ);\r\n        }\r\n        // \r\n        //gainNode.gain.value = vol / (1 + Math.abs(pan));\r\n        // \r\n        gainNode.gain.value = vol * this.seMasterVolume * this.masterVolume;\r\n\r\n        // \r\n        var offset_adj;\r\n        if (loop && loopEnd - loopStart > 0 && offset > loopEnd) {\r\n            offset_adj = loopEnd;\r\n        } else {\r\n            offset_adj = offset;\r\n        }\r\n\r\n        // \r\n        source.gainNode = gainNode;\r\n        source.volumeValue = vol;\r\n        source.panNode = panNode;\r\n        source.panValue = pan;\r\n        source.playStartTime = this.context.currentTime+start;//@hoge1e3\r\n        source.playOffset = offset_adj;\r\n        source.plusTime = offset_adj;\r\n\r\n        // \r\n        source.start = source.start || source.noteOn;\r\n        source.stop  = source.stop  || source.noteOff;\r\n        source.start(start, offset, durationStart);\r\n        // iOS, Firefoxlooptrueduration\r\n        // iOSstopInvalidStateError\r\n        if (loop && duration != null) source.stop(start + duration);\r\n        var t=this;\r\n        t.seSources.push(source);\r\n        source.onended = function(event) {\r\n            source.onended = null;\r\n            var idx=t.seSources.indexOf(source);\r\n            if (idx>=0) t.seSources.splice(idx,1);\r\n        };\r\n        return source;\r\n    };\r\n    T2MediaLib.prototype.stopSE = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        try {\r\n            sourceObj.stop(0);\r\n        } catch(e) { // iOS\r\n            // iOSstopInvalidStateError\r\n            if (sourceObj.gainNode) {\r\n                sourceObj.gainNode.gain.cancelScheduledValues(this.context.currentTime);\r\n                sourceObj.gainNode.gain.linearRampToValueAtTime(0, this.context.currentTime);\r\n            }\r\n        }\r\n        return sourceObj;\r\n    };\r\n    T2MediaLib.prototype.stopAllSE = function(sourceObj) {\r\n        var t=this;\r\n        this.seSources.forEach(function (s) {\r\n            t.stopSE(s);\r\n        });\r\n    };\r\n    T2MediaLib.prototype.getSEMasterVolume = function() {\r\n        return this.seMasterVolume;\r\n    };\r\n    T2MediaLib.prototype.setSEMasterVolume = function(vol) {\r\n        this.seMasterVolume = vol;\r\n    };\r\n    T2MediaLib.prototype.getSEVolume = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.volumeValue;\r\n    };\r\n    T2MediaLib.prototype.setSEVolume = function(sourceObj, vol) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.gainNode.gain.value = vol * this.seMasterVolume * this.masterVolume;\r\n        sourceObj.volumeValue = vol;\r\n        return sourceObj;\r\n    };\r\n    T2MediaLib.prototype.getSERate = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.playbackRate.value;\r\n    };\r\n    T2MediaLib.prototype.setSERate = function(sourceObj, rate) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.playbackRate.value = rate;\r\n    };\r\n    T2MediaLib.prototype.getSEPan = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.panValue;\r\n    };\r\n    T2MediaLib.prototype.setSEPan = function(sourceObj, pan) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        var panNode = sourceObj.panNode;\r\n        if      (pan < -1.0) pan = -1.0;\r\n        else if (pan >  1.0) pan =  1.0;\r\n        var panAngle = pan * 90;\r\n        var panX = Math.sin(panAngle * (Math.PI / 180));\r\n        var panZ = Math.cos(panAngle * (Math.PI / 180));\r\n        if (pan === -1.0 || pan === 1.0) panZ = 0; // 6.123233995736766e-170\r\n        if (panNode.positionX) {\r\n            panNode.positionX.value = panX;\r\n            panNode.positionY.value = 0;\r\n            panNode.positionZ.value = panZ;\r\n        } else {\r\n            panNode.setPosition(panX, 0, panZ);\r\n        }\r\n        sourceObj.panValue = pan;\r\n    };\r\n    T2MediaLib.prototype.isSELoop = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.loop;\r\n    };\r\n    T2MediaLib.prototype.setSELoop = function(sourceObj, loop) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.loop = loop;\r\n    };\r\n    T2MediaLib.prototype.getSELoopStartTime = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.loopStart;\r\n    };\r\n    T2MediaLib.prototype.setSELoopStartTime = function(sourceObj, loopStart) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.loopStart = loopStart;\r\n    };\r\n    T2MediaLib.prototype.getSELoopEndTime = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.loopEnd;\r\n    };\r\n    T2MediaLib.prototype.setSELoopEndTime = function(sourceObj, loopEnd) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.loopEnd = loopEnd;\r\n    };\r\n\r\n    // BGM //\r\n\r\n    T2MediaLib.prototype.playBGM = function(id, idx, loop, offset, loopStart, loopEnd) {\r\n        if (!this.context) return null;\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.playBGM(idx, loop, offset, loopStart, loopEnd);\r\n    };\r\n    T2MediaLib.prototype.stopBGM = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.stopBGM();\r\n    };\r\n    T2MediaLib.prototype.pauseBGM = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.pauseBGM();\r\n    };\r\n    T2MediaLib.prototype.resumeBGM = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.resumeBGM();\r\n    };\r\n    T2MediaLib.prototype.getBGMMasterVolume = function() {\r\n        return this.bgmMasterVolume;\r\n    };\r\n    T2MediaLib.prototype.setBGMMasterVolume = function(vol) {\r\n        this.bgmMasterVolume = vol;\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            var bgmPlayer = this.bgmPlayerAry[i];\r\n            if (!(bgmPlayer instanceof T2MediaLib_BGMPlayer)) continue;\r\n            bgmPlayer.onChangeBGMMasterVolume();\r\n        }\r\n    };\r\n    T2MediaLib.prototype.getBGMVolume = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMVolume();\r\n    };\r\n    T2MediaLib.prototype.setBGMVolume = function(id, vol) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMVolume(vol);\r\n    };\r\n    T2MediaLib.prototype.getBGMTempo = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMTempo();\r\n    };\r\n    T2MediaLib.prototype.setBGMTempo = function(id, tempo) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMTempo(tempo);\r\n    };\r\n    T2MediaLib.prototype.getBGMPan = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMPan();\r\n    };\r\n    T2MediaLib.prototype.setBGMPan = function(id, pan) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMPan(pan);\r\n    };\r\n    T2MediaLib.prototype.isBGMLoop = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.isBGMLoop();\r\n    };\r\n    T2MediaLib.prototype.setBGMLoop = function(id, loop) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMLoop(loop);\r\n    };\r\n    T2MediaLib.prototype.getBGMLoopStartTime = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMLoopStartTime();\r\n    };\r\n    T2MediaLib.prototype.setBGMLoopStartTime = function(id, loopStart) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMLoopStartTime(loopStart);\r\n    };\r\n    T2MediaLib.prototype.getBGMLoopEndTime = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMLoopEndTime();\r\n    };\r\n    T2MediaLib.prototype.setBGMLoopEndTime = function(id, loopEnd) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMLoopEndTime(loopEnd);\r\n    };\r\n    T2MediaLib.prototype.getBGMCurrentTime = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMCurrentTime();\r\n    };\r\n    T2MediaLib.prototype.getBGMLength = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMLength();\r\n    };\r\n    T2MediaLib.prototype.getPlayingBGMName = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getPlayingBGMName();\r\n    };\r\n    T2MediaLib.prototype.setOnBGMEndListener = function(id, listener) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setOnBGMEndListener(listener);\r\n    };\r\n    T2MediaLib.prototype.getPlayingBGMState = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getPlayingBGMState();\r\n    };\r\n    T2MediaLib.prototype.getBGMPicoAudio = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMPicoAudio();\r\n    };\r\n    T2MediaLib.prototype.isTagLoop = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.isTagLoop();\r\n    };\r\n    T2MediaLib.prototype.setTagLoop = function(id, isTagLoop) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setTagLoop(isTagLoop);\r\n    };\r\n    T2MediaLib.prototype.getBGMPlayerMax = function() {\r\n        return this.bgmPlayerMax;\r\n    };\r\n    T2MediaLib.prototype.allStopBGM = function() {\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            this.stopBGM(i);\r\n        }\r\n    };\r\n    T2MediaLib.prototype.allResetBGM = function() {\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            this.stopBGM(i);\r\n            this.setBGMVolume(i, 1.0);\r\n            this.setBGMTempo(i, 1.0);\r\n            this.setBGMPan(i, 0.0);\r\n        }\r\n        this.setMasterVolume(1.0);\r\n        this.setSEMasterVolume(1.0);\r\n        this.setBGMMasterVolume(1.0);\r\n    };\r\n    T2MediaLib.prototype._getBgmPlayer = function(id) {\r\n        if (id < 0 || this.bgmPlayerMax <= id) return null;\r\n        var bgmPlayer = this.bgmPlayerAry[id];\r\n        if (!(bgmPlayer instanceof T2MediaLib_BGMPlayer)) return null;\r\n        return bgmPlayer;\r\n    };\r\n\r\n    // Audio //\r\n\r\n    T2MediaLib.prototype.loadAudio = function(idx, url) {\r\n        var audio = new Audio(url);\r\n        audio.play();\r\n\r\n        this.audioDataAry.data[idx] = null;\r\n\r\n        var that = this;\r\n        audio.addEventListener('loadstart', function() {\r\n            if (!that.context) return null;\r\n            var source = that.context.createMediaElementSource(audio);\r\n            source.connect(that.context.destination);\r\n        }, false);\r\n\r\n        audio.addEventListener('canplay', function() {\r\n            this.audioDataAry.data[idx] = audio;\r\n        }, false);\r\n\r\n        audio.load();\r\n\r\n    };\r\n    T2MediaLib.prototype.playAudio = function(idx, loop, startTime) {\r\n        var audio = this.audioDataAry.data[idx];\r\n        if (!audio) return null;\r\n        if (!startTime) startTime = 0;\r\n\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.pause();\r\n            this.playingAudio.currentTime = 0;\r\n        }\r\n        this.playingAudio = audio;\r\n        audio.loop = loop;\r\n        audio.volume = this.audioVolume;\r\n        audio.currentTime = startTime;\r\n        audio.play();\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.stopAudio = function() {\r\n        var audio = this.playingAudio;\r\n        if (!(audio instanceof Audio)) return null;\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n        this.playingAudio = null;\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.pauseAudio = function() {\r\n        var audio = this.playingAudio;\r\n        if (!audio) return null;\r\n        audio.pause();\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.resumeAudio = function() {\r\n        var audio = this.playingAudio;\r\n        if (!audio) return null;\r\n        audio.play();\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.setAudioVolume = function(vol) {\r\n        this.audioVolume = vol;\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.volume = vol;\r\n        }\r\n    };\r\n    T2MediaLib.prototype.setAudioTempo = function(tempo) {\r\n        this.audioTempo = tempo;\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.playbackRate = tempo;\r\n        }\r\n    };\r\n    T2MediaLib.prototype.setAudioPosition = function(time) {\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.currentTime = time;\r\n        }\r\n    };\r\n    T2MediaLib.prototype.getAudioData = function(idx) {\r\n        return this.audioDataAry.data[idx];\r\n    };\r\n    T2MediaLib.prototype.getAudioCurrentTime = function() {\r\n        if (!(this.playingAudio instanceof Audio)) return null;\r\n        return this.playingAudio.currentTime;\r\n    };\r\n    T2MediaLib.prototype.getAudioLength = function() {\r\n        if (!(this.playingAudio instanceof Audio)) return null;\r\n        return this.playingAudio.duration;\r\n    };\r\n\r\n    // Ogg //\r\n    T2MediaLib.prototype.searchOggLoop = function(arrayBuffer) {\r\n        var buf = new Uint8Array(arrayBuffer.slice(0, 3000));\r\n        var str = String.fromCharCode.apply(null, buf);\r\n        var isVorbis = str.lastIndexOf(\"vorbis\", 0x22);\r\n        if (isVorbis == -1) return [0, 0]; // Vorbis\r\n        var startIdx = str.indexOf(\"LOOPSTART=\");\r\n        var lengthIdx = str.indexOf(\"LOOPLENGTH=\");\r\n        var loopStart = 0;\r\n        var loopLength = 0;\r\n        var sampleRate = buf[40] + (buf[41]<<8) + (buf[42]<<16) + (buf[43]<<24);\r\n        var tagSize,i,c;\r\n        if (startIdx != -1) {\r\n            tagSize = buf[startIdx] + (buf[startIdx+1]<<8) + (buf[startIdx+2]<<16) + (buf[startIdx+3]<<24);\r\n            for (i=startIdx+10; i<startIdx+tagSize; i++) {\r\n                c = str[i];\r\n                if (c < '0' || c > '9') break;\r\n                loopStart = loopStart*10 + (c - '0');\r\n            }\r\n        }\r\n        if (lengthIdx != -1) {\r\n            tagSize = buf[lengthIdx] + (buf[lengthIdx+1]<<8) + (buf[lengthIdx+2]<<16) + (buf[lengthIdx+3]<<24);\r\n            for (i=lengthIdx+11; i<lengthIdx+tagSize; i++) {\r\n                c = str[i];\r\n                if (c < '0' || c > '9') break;\r\n                loopLength = loopLength*10 + (c - '0');\r\n            }\r\n        }\r\n        // \r\n        var loopEnd = (loopStart + loopLength) / sampleRate;\r\n        loopStart /= sampleRate;\r\n        return [loopStart, loopEnd];\r\n    };\r\n\r\n    return T2MediaLib;\r\n})();\r\n\r\n\r\n\r\nvar T2MediaLib_BGMPlayer = (function(){\r\n    function isPicoAudio(bgm) {\r\n        return typeof PicoAudio!==\"undefined\" && bgm instanceof PicoAudio;\r\n    }\r\n    function isMezonetSource(bgm) {\r\n        return typeof Mezonet!==\"undefined\" && bgm instanceof Mezonet.Source;\r\n    }\r\n    function isMezonetPlayback(bgm) {\r\n        return typeof Mezonet!==\"undefined\" && bgm instanceof Mezonet.Playback;\r\n    }\r\n    var T2MediaLib_BGMPlayer = function(t2MediaLib, arg_id) {\r\n        this.t2MediaLib = t2MediaLib;\r\n        this.id = arg_id;\r\n        this.playingBGMState = \"stop\";\r\n        this.playingBGMStatePending = null;\r\n        this.playingBGM = null;\r\n        this.playingBGMName = null;\r\n        this.bgmPause = 0;\r\n        this.bgmPauseTime = 0;\r\n        this.bgmPauseCurrentTime = 0;\r\n        this.bgmPauseTempo = 0;\r\n        this.bgmPauseLoop = false;\r\n        this.bgmPauseLoopStart = 0;\r\n        this.bgmPauseLoopEnd = 0;\r\n        this.bgmVolume = 1.0;\r\n        this.bgmTempo = 1.0;\r\n        this.bgmPan = 0.0;\r\n        this.picoAudio = null;//new PicoAudio(this.context);\r\n        this.picoAudioSetDataBGMName = null; // setDatasetData\r\n        this.PICO_AUDIO_VOLUME_COEF = 1;//0.2;\r\n        this.isTagLoop = true; // Ogg VorbisLOOPSTART,LOOPLENGTH\r\n    };\r\n\r\n    // BGM //\r\n\r\n    T2MediaLib_BGMPlayer.prototype.playBGM = function(idx, loop, offset, loopStart, loopEnd) {\r\n        this.stopBGM();\r\n\r\n        var soundData = this.t2MediaLib.soundDataAry[idx];\r\n        if (soundData == null) return null;\r\n        if (!soundData.isDecodeComplete()) {\r\n            var that = this;\r\n            var callbacks = {};\r\n            callbacks.bgmPlayerId = this.id;\r\n            callbacks.succ = function() {\r\n                var succFunc = function() {\r\n                    var pending = that.playingBGMStatePending; // \r\n                    that._setPlayingBGMState(\"stop\", true);\r\n                    if (pending != \"stop\" && that.playingBGMName == idx) {\r\n                        that.playBGM(idx, loop, offset, loopStart, loopEnd);\r\n                    }\r\n                    if (pending == \"pause\") {\r\n                        that.pauseBGM();\r\n                    }\r\n                };\r\n                var decodedData = soundData.decodedData;\r\n                if (decodedData instanceof Object) { // MIDI\r\n                    // MIDIAudioContext.currenTime\r\n                    // playBGM\r\n                    setTimeout(function(){succFunc();}, 0);\r\n                } else { // MP3, Ogg, AAC, WAV\r\n                    succFunc();\r\n                }\r\n            };\r\n            callbacks.err = function() {\r\n                that._setPlayingBGMState(\"stop\", true);\r\n            };\r\n            this.playingBGMName = idx;\r\n            this._setPlayingBGMState(\"decoding\", true);\r\n            this._setPlayingBGMState(\"play\");\r\n            this.t2MediaLib.decodeSound(idx, callbacks);\r\n            return this;\r\n        }\r\n\r\n        var decodedData = soundData.decodedData;\r\n        if (isMezonetSource(decodedData)) {\r\n            var m=decodedData.playback(this.t2MediaLib.context);\r\n            this.playingBGM = m;\r\n            m.Start();\r\n        } else if (decodedData instanceof AudioBuffer) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.isTagLoop) {\r\n                loopStart = loopStart||soundData.tagLoopStart;\r\n                loopEnd = loopEnd||soundData.tagLoopEnd;\r\n            }\r\n            this.playingBGM = this.t2MediaLib.playSE(idx, this.bgmVolume, this.bgmPan, this.bgmTempo, offset, loop, loopStart, loopEnd);\r\n        } else if (decodedData instanceof Object) {\r\n            // Midi\r\n            this._initPicoAudio();\r\n            if (idx != this.picoAudioSetDataBGMName) {\r\n                this.picoAudio.setData(decodedData);\r\n                this.picoAudioSetDataBGMName = idx;\r\n            } else {\r\n                this.picoAudio.initStatus();\r\n            }\r\n            this.picoAudio.setLoop(loop);\r\n            this.picoAudio.setMasterVolume(this.PICO_AUDIO_VOLUME_COEF * this.bgmVolume *\r\n                 this.t2MediaLib.bgmMasterVolume * this.t2MediaLib.masterVolume);\r\n            if (!offset) {\r\n                offset = 0;\r\n            } else {\r\n                var bgmLengthTime = this.picoAudio.getTime(Number.MAX_SAFE_INTEGER);\r\n                if      (offset > bgmLengthTime) offset = bgmLengthTime;\r\n                else if (offset < 0.0) offset = 0.0;\r\n            }\r\n            this.picoAudio.setStartTime(offset);\r\n            this.picoAudio.play();\r\n            this.playingBGM = this.picoAudio;\r\n        }\r\n        this.playingBGMName = idx;\r\n        this.bgmPause = 0;\r\n        this._setPlayingBGMState(\"play\");\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.stopBGM = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.Stop();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            this.picoAudio.stop();\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            try {\r\n                bgm.stop(0);\r\n            } catch(e) { // iOS\r\n                // iOSstopInvalidStateError\r\n                if (bgm.gainNode) {\r\n                    bgm.gainNode.gain.cancelScheduledValues(this.t2MediaLib.context.currentTime);\r\n                    bgm.gainNode.gain.linearRampToValueAtTime(0, this.t2MediaLib.context.currentTime);\r\n                }\r\n            }\r\n        }\r\n        this.playingBGM = null;\r\n        this.playingBGMName = null;\r\n        this._setPlayingBGMState(\"stop\");\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.pauseBGM = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.pause();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            if (this.bgmPause === 0) {\r\n                this.bgmPauseTime = this.getBGMCurrentTime();\r\n                this.bgmPauseCurrentTime = bgm.context.currentTime;\r\n                bgm.stop();\r\n                this.bgmPause = 1;\r\n            }\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 0) {\r\n                this.bgmPauseTime = this.getBGMCurrentTime();\r\n                this.bgmPauseLoopStart = this.t2MediaLib.getSELoopStartTime(bgm);\r\n                this.bgmPauseLoopEnd = this.t2MediaLib.getSELoopEndTime(bgm);\r\n                this.bgmPauseLoop = this.t2MediaLib.isSELoop(bgm);\r\n                this.bgmPauseCurrentTime = bgm.context.currentTime;\r\n                this.bgmPauseTempo = this.bgmTempo;\r\n                try {\r\n                    bgm.stop(0);\r\n                } catch(e) { // iOS\r\n                    // iOSstopInvalidStateError\r\n                    if (bgm.gainNode) {\r\n                        bgm.gainNode.gain.cancelScheduledValues(this.t2MediaLib.context.currentTime);\r\n                        bgm.gainNode.gain.linearRampToValueAtTime(0, this.t2MediaLib.context.currentTime);\r\n                    }\r\n                }\r\n                this.bgmPause = 1;\r\n            }\r\n        }\r\n        if (this.playingBGMState != \"stop\") {\r\n            this._setPlayingBGMState(\"pause\");\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.resumeBGM = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.resume();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            if (this.bgmPause === 1) {\r\n                bgm.play();\r\n                this.bgmPause = 0;\r\n            }\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                bgm = this.playBGM(this.playingBGMName, this.bgmPauseLoop, this.bgmPauseTime, this.bgmPauseLoopStart, this.bgmPauseLoopEnd);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.onChangeBGMMasterVolume = function() {\r\n        this.setBGMVolume(this.getBGMVolume());\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMVolume = function() {\r\n        return this.bgmVolume;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMVolume = function(vol) {\r\n        var bgm = this.playingBGM;\r\n        this.bgmVolume = vol;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.setVolume(vol);\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            this.picoAudio.setMasterVolume(this.PICO_AUDIO_VOLUME_COEF * vol * this.t2MediaLib.bgmMasterVolume * this.t2MediaLib.masterVolume);\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            bgm.gainNode.gain.value = vol * this.t2MediaLib.bgmMasterVolume * this.t2MediaLib.masterVolume;\r\n            //seMasterVolume\r\n            //this.t2MediaLib.setSEVolume(bgm, vol);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMTempo = function() {\r\n        return this.bgmTempo;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMTempo = function(tempo) {\r\n        // MP3, Ogg, AAC, WAV\r\n        var bgm = this.playingBGM;\r\n\r\n        if (tempo <= 0 || isNaN(tempo)) tempo = 1;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.setRate(tempo);\r\n            return this;\r\n        } else if ((bgm instanceof AudioBufferSourceNode) && this.bgmPause === 0) {\r\n            bgm.plusTime -= (this.t2MediaLib.context.currentTime - bgm.playStartTime) * (tempo - this.bgmTempo);\r\n        }\r\n        this.bgmTempo = tempo;\r\n        this.t2MediaLib.setSERate(bgm, tempo);\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMPan = function() {\r\n        return this.bgmPan;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMPan = function(pan) {\r\n        var bgm = this.playingBGM;\r\n        this.bgmPan = pan;\r\n        if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            this.t2MediaLib.setSEPan(bgm, pan);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.isBGMLoop = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return this.picoAudio.isLoop();\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                return this.bgmPauseLoop;\r\n            } else {\r\n                return this.t2MediaLib.isSELoop(bgm);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMLoop = function(loop) {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            this.picoAudio.setLoop(loop);\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                this.bgmPauseLoop = loop;\r\n            } else {\r\n                this.t2MediaLib.setSELoop(bgm, loop);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMLoopStartTime = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return 0;\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                return this.bgmPauseLoopStart;\r\n            } else {\r\n                return this.t2MediaLib.getSELoopStartTime(bgm);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMLoopStartTime = function(loopStart) {\r\n        var bgm = this.playingBGM;\r\n        if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                this.bgmPauseLoopStart = loopStart;\r\n            } else {\r\n                return this.t2MediaLib.setSELoopStartTime(bgm, loopStart);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMLoopEndTime = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return this.getBGMLength();\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                return this.bgmPauseLoopEnd;\r\n            } else {\r\n                return this.t2MediaLib.getSELoopEndTime(bgm);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMLoopEndTime = function(loopEnd) {\r\n        var bgm = this.playingBGM;\r\n        if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                this.bgmPauseLoopEnd = loopEnd;\r\n            } else {\r\n                return this.t2MediaLib.setSELoopEndTime(bgm, loopEnd);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMCurrentTime = function() {\r\n        var bgm = this.playingBGM;\r\n        var time;\r\n        if (isMezonetPlayback(bgm)){\r\n            return bgm.getTrackTime();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            if (this.bgmPause === 0) {\r\n                time = this.picoAudio.context.currentTime - this.picoAudio.states.startTime;\r\n            } else {\r\n                time = this.bgmPauseTime;\r\n            }\r\n            return time;\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            var time2, currenTime, tempo, plusTime, minusTime, mod;\r\n\r\n            if (this.bgmPause === 0) {\r\n                currenTime = this.t2MediaLib.context.currentTime;\r\n                tempo = this.bgmTempo;\r\n            } else {\r\n                currenTime = this.bgmPauseCurrentTime;\r\n                tempo = this.bgmPauseTempo;\r\n            }\r\n\r\n            time2 = (currenTime - bgm.playStartTime) * tempo + bgm.plusTime;\r\n            if (bgm.loop) {\r\n                if (bgm.loopEnd - bgm.loopStart > 0) { // \r\n\r\n                    if (time2 < bgm.loopStart) { // \r\n                        plusTime  = 0;\r\n                        minusTime = 0;\r\n                        mod = bgm.buffer.duration;\r\n                    } else { // \r\n                        plusTime  = bgm.loopStart;\r\n                        minusTime = bgm.loopStart;\r\n                        mod = bgm.loopEnd - bgm.loopStart;\r\n                    }\r\n                } else { // \r\n                    mod = bgm.buffer.duration;\r\n                    plusTime = 0;\r\n                    minusTime = 0;\r\n                }\r\n            }\r\n\r\n            if (bgm.loop) {\r\n                time = ((time2 - minusTime) % mod) + plusTime;\r\n            } else {\r\n                time = time2;\r\n                if (time > bgm.buffer.duration) time = bgm.buffer.duration;\r\n            }\r\n            return time;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMLength = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return this.picoAudio.getTime(Number.MAX_SAFE_INTEGER);\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            return bgm.buffer.duration;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getPlayingBGMName = function() {\r\n        return this.playingBGMName;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setOnBGMEndListener = function(listener) {\r\n        if (this.picoAudio != null) {\r\n            this.picoAudio.setOnSongEndListener(listener);\r\n        }\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getPlayingBGMState = function() {\r\n        return this.playingBGMState;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMPicoAudio = function() {\r\n        this._initPicoAudio();\r\n        return this.picoAudio;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.isTagLoop = function() {\r\n        return this.isTagLoop;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setTagLoop = function(isTagLoop) {\r\n        this.isTagLoop = isTagLoop;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype._setPlayingBGMState = function(state, force) {\r\n        if (force || this.playingBGMState != \"decoding\") {\r\n            this.playingBGMState = state;\r\n            this.playingBGMStatePending = null;\r\n        } else {\r\n            this.playingBGMStatePending = state;\r\n        }\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype._initPicoAudio = function() {\r\n        if (this.picoAudio == null) {\r\n            if (this.id == 0) {\r\n                this.picoAudio = this.t2MediaLib.picoAudio; // 0T2MediaLib.picoAudio\r\n            }\r\n            if (this.picoAudio == null) {\r\n                this.picoAudio = new PicoAudio(this.t2MediaLib.context, this.t2MediaLib.picoAudio); // AudioContextmax6\r\n            }\r\n        }\r\n    };\r\n\r\n    return T2MediaLib_BGMPlayer;\r\n})();\r\n\r\n\r\n\r\nvar T2MediaLib_SoundData = (function(){\r\n    var T2MediaLib_SoundData = function(idx, url) {\r\n        // \"none\"    :\r\n        // \"loading\" :\r\n        // \"loaded\"  :\r\n        // \"decoding\":\r\n        // \"decoded\" :\r\n        // \"error\"   :\r\n        this.idx = idx;\r\n        this.state = \"none\";\r\n        this.errorID = null;\r\n        this.url = null;\r\n        this.fileData = null;\r\n        this.decodedData = null;\r\n        this.decodedCallbacksAry = null;\r\n        this.tagLoopStart = 0;\r\n        this.tagLoopEnd = 0;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onLoad = function(url) {\r\n        this.state = \"loading\";\r\n        this.url = url;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onLoadComplete = function(data) {\r\n        this.state = \"loaded\";\r\n        this.fileData = data;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onDecode = function() {\r\n        this.state = \"decoding\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onDecodeComplete = function(data) {\r\n        this.state = \"decoded\";\r\n        this.decodedData = data;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onError = function(errorID) {\r\n        this.state = \"error\";\r\n        this.errorID = errorID;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isNone = function() {\r\n        return this.state == \"none\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isLoadComplete = function() {\r\n        switch(this.state) {\r\n            case \"loaded\":\r\n            case \"decoding\":\r\n            case \"decoded\":\r\n                return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isDecoding = function() {\r\n        return this.state == \"decoding\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isDecodeComplete = function() {\r\n        return this.state == \"decoded\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.removeDecodedData = function() {\r\n        this.state = \"loaded\";\r\n        this.decodedData = null;\r\n    };\r\n\r\n    return T2MediaLib_SoundData;\r\n})();\r\n// r.jsfunction(){...var T2Media...}() \r\nwindow.T2MediaLib=T2MediaLib;\r\nwindow.T2MediaLib_BGMPlayer=T2MediaLib_BGMPlayer;\r\nwindow.T2MediaLib_SoundData=T2MediaLib_SoundData;\r\n\ndefine(\"T2MediaLib\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.T2MediaLib;\n    };\n}(this)));\n\ndefine('exceptionCatcher',[], function () {\r\n    var res={};\r\n    res.f=function (f) {\r\n        if (typeof f==\"function\") {\r\n            if (f.isTrcf) return f;\r\n            var r=function () {\r\n                if (res.handleException && !res.enter) {\r\n                    try {\r\n                        res.enter=true;\r\n                        return f.apply(this,arguments);\r\n                    } catch (e) {\r\n                        res.handleException(e);\r\n                    } finally {\r\n                        res.enter=false;\r\n                    }\r\n                } else {\r\n                    return f.apply(this,arguments);\r\n                }\r\n            };\r\n            r.isTrcf=true;\r\n            return r;\r\n        } else if(typeof f==\"object\") {\r\n            for (var k in f) {\r\n                f[k]=res.f(f[k]);\r\n            }\r\n            return f;\r\n        }\r\n    };\r\n    //res.handleException=function (){};\r\n    return res;\r\n});\ndefine('UI',[\"Util\",\"exceptionCatcher\"],function (Util, EC) {\r\n    var UI={};\r\n    var F=EC.f;\r\n    UI=function () {\r\n        var expr=[];\r\n        for (var i=0 ; i<arguments.length ; i++) {\r\n            expr[i]=arguments[i];\r\n        }\r\n        var listeners=[];\r\n        var $vars={};\r\n        var $edits=[];\r\n        var res=parse(expr);\r\n        res.$edits=$edits;\r\n        res.$vars=$vars;\r\n        $.data(res,\"edits\",$edits);\r\n        $.data(res,\"vars\",$vars);\r\n        $edits.load=function (model) {\r\n            $edits.model=model;\r\n            $edits.forEach(function (edit) {\r\n                $edits.writeToJq(edit.params.$edit, edit.jq);\r\n            });\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.writeToJq=function ($edit, jq) {\r\n        \tvar m=$edits.model;\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                m=m[a[i]];\r\n            }\r\n            m=$edit.type.toVal(m);\r\n            if (jq.attr(\"type\")==\"checkbox\") {\r\n                jq.prop(\"checked\",!!m);\r\n            } else {\r\n                jq.val(m);\r\n            }\r\n        };\r\n        $edits.validator={\r\n       \t\terrors:{},\r\n       \t\tshow: function () {\r\n       \t\t\tif ($vars.validationMessage) {\r\n       \t\t\t\t$vars.validationMessage.empty();\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\t$vars.validationMessage.append(UI(\"div\", this.errors[name].mesg));\r\n       \t\t\t\t}\r\n       \t\t\t}\r\n       \t\t\tif ($vars.OKButton) {\r\n       \t\t\t\tvar ok=true;\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\tok=false;\r\n       \t\t\t\t}\r\n       \t\t\t\t$vars.OKButton.attr(\"disabled\", !ok);\r\n       \t\t\t}\r\n       \t\t},\r\n       \t\ton: {\r\n       \t\t\tvalidate: function () {}\r\n       \t\t},\r\n       \t\taddError: function (name, mesg, jq) {\r\n       \t\t\tthis.errors[name]={mesg:mesg, jq:jq};\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tremoveError: function (name) {\r\n       \t\t\tdelete this.errors[name];\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tallOK: function () {\r\n       \t\t\tfor (var i in this.errors) {\r\n       \t\t\t\tdelete this.errors[i];\r\n       \t\t\t}\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tisValid: function () {\r\n       \t\t    var res=true;\r\n       \t\t    for (var i in this.errors) res=false;\r\n       \t\t    return res;\r\n       \t\t}\r\n        };\r\n        $edits.writeToModel=function ($edit, val ,jq) {\r\n            var m=$edits.model;\r\n        \t//console.log($edit, m);\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            try {\r\n                val=$edit.type.fromVal(val);\r\n            } catch (e) {\r\n            \t$edits.validator.addError(name, e, jq);\r\n            \t//$edits.validator.errors[name]={mesg:e, jq:jq};\r\n                //$edits.validator.change(name, e, jq);\r\n                return;\r\n            }\r\n            $edits.validator.removeError(name);\r\n            /*\r\n            if ($edits.validator.errors[name]) {\r\n                delete $edits.validator.errors[name];\r\n                $edits.validator.change(name, null, jq);\r\n            }*/\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                if (i==a.length-1) {\r\n                    if ($edits.on.writeToModel(name,val)) {\r\n\r\n                    } else {\r\n                        m[a[i]]=val;\r\n                    }\r\n                } else {\r\n                    m=m[a[i]];\r\n                }\r\n            }\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.on={};\r\n        $edits.on.writeToModel= function (name, val) {};\r\n\r\n        if (listeners.length>0) {\r\n            setTimeout(F(l),50);\r\n        }\r\n        function l() {\r\n            listeners.forEach(function (li) {\r\n                li();\r\n            });\r\n            setTimeout(F(l),50);\r\n        }\r\n        return res;\r\n        function parse(expr) {\r\n            if (expr instanceof Array) return parseArray(expr);\r\n            else if (typeof expr==\"string\") return parseString(expr);\r\n            else return expr;\r\n        }\r\n        function parseArray(a) {\r\n            var tag=a[0];\r\n            var i=1;\r\n            var res=$(\"<\"+tag+\">\");\r\n            if (typeof a[i]==\"object\" && !(a[i] instanceof Array) && !(a[i] instanceof $) ) {\r\n                parseAttr(res, a[i],tag);\r\n                i++;\r\n            }\r\n            while (i<a.length) {\r\n                res.append(parse(a[i]));\r\n                i++;\r\n            }\r\n            return res;\r\n        }\r\n        function parseAttr(jq, o, tag) {\r\n            if (o.$var) {\r\n                $vars[o.$var]=jq;\r\n            }\r\n            if (o.$edit) {\r\n                if (typeof o.$edit==\"string\") {\r\n                    o.$edit={name: o.$edit, type: UI.types.String};\r\n                }\r\n                if (!o.on) o.on={};\r\n                o.on.realtimechange=F(function (val) {\r\n                    $edits.writeToModel(o.$edit, val, jq);\r\n                });\r\n                if (!$vars[o.$edit.name]) $vars[o.$edit.name]=jq;\r\n                $edits.push({jq:jq,params:o});\r\n            }\r\n            for (var k in o) {\r\n                if (k==\"on\") {\r\n                    for (var e in o.on) on(e, o.on[e]);\r\n                } else if (k==\"css\" && o[k]!=null) {//ADDJSL\r\n                    jq.css(o[k]);\r\n                } else if (!Util.startsWith(k,\"$\") && o[k]!=null) {//ADDJSL\r\n                    jq.attr(k,o[k]);\r\n                }\r\n            }\r\n            function on(eType, li) {\r\n                if (!li) return; //ADDJSL\r\n                if (eType==\"enterkey\") {\r\n                    jq.on(\"keypress\",F(function (ev) {\r\n                        if (ev.which==13) li.apply(jq,arguments);\r\n                    }));\r\n                } else if (eType==\"realtimechange\") {\r\n                    var first=true, prev;\r\n                    listeners.push(function () {\r\n                        var cur;\r\n                        if (o.type==\"checkbox\") {\r\n                            cur=!!jq.prop(\"checked\");\r\n                        } else {\r\n                            cur=jq.val();\r\n                        }\r\n                        if (first || prev!=cur) {\r\n                            li.apply(jq,[cur,prev]);\r\n                            prev=cur;\r\n                        }\r\n                        first=false;\r\n                    });\r\n                } else {\r\n                    jq.on(eType, F(li));\r\n                }\r\n            }\r\n        }\r\n        function parseString(str) {\r\n            return $(document.createTextNode(str));\r\n            //return $(\"<span>\").text(str);\r\n        }\r\n    };\r\n    UI.types={\r\n       String: {\r\n           toVal: function (val) {\r\n               return val;\r\n           },\r\n           fromVal: function (val) {\r\n               return val;\r\n           }\r\n       },\r\n       Number: {\r\n           toVal: function (val) {\r\n               return val+\"\";\r\n           },\r\n           fromVal: function (val) {\r\n               return parseFloat(val);\r\n           }\r\n       }\r\n   };\r\n    return UI;\r\n});\r\n\ndefine('UIDiag',[\"UI\"],function (UI) {\r\n    var UIDiag={};\r\n    function isPrimitive(mesg) {\r\n        return (typeof mesg===\"string\" ||\r\n        typeof mesg===\"number\" ||\r\n        typeof mesg===\"boolean\");\r\n    }\r\n    function parseMesg(mesg,defTitle) {\r\n        if (mesg==null) mesg=\"\";\r\n        if (isPrimitive(mesg)) {\r\n            return {title:defTitle,body:multiLine(mesg)};\r\n        } else if ( (typeof $!==\"undefined\") && mesg instanceof $) {\r\n            return {\r\n                title:mesg.title||defTitle,\r\n                body:mesg\r\n            };\r\n        } else {\r\n            if (isPrimitive(mesg.body)) mesg.body=multiLine(mesg.body);\r\n            return mesg;\r\n        }\r\n    }\r\n    function multiLine(mesg) {\r\n        var lines=(mesg+\"\").split(\"\\n\");\r\n        if (lines.length==1) return lines[0];\r\n        return UI.apply(this,[\"div\"].concat(lines.map(function (e) {\r\n            return [\"div\",e];\r\n        })));\r\n    }\r\n    UIDiag.confirm=function (mesg) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"button\",{on:{click:sendF(true)}},\"OK\"],\r\n                [\"button\",{on:{click:sendF(false)}},\"\"]).dialog({width:\"auto\",close:sendF(false)});\r\n        var d=$.Deferred();\r\n        function sendF(r) {\r\n            return function () { d.resolve(r); di.dialog(\"close\"); di.remove(); };\r\n        }\r\n        return d.promise();\r\n    };\r\n    UIDiag.alert=function (mesg) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"button\",{on:{click:sendF(true)}},\"OK\"]).dialog({width:\"auto\",close:sendF(false)});\r\n        var d=$.Deferred();\r\n        function sendF(r) {\r\n            return function () { d.resolve(r); di.dialog(\"close\"); di.remove(); };\r\n        }\r\n        return d.promise();\r\n    };\r\n    // Compat with $InputBox\r\n    UIDiag.open=function(title,prompt,_default, left, top, width, height) {\r\n        return UIDiag.prompt({title:title,body:prompt},_default,{\r\n            left:left, top:top, width:width, height:height\r\n        });\r\n    };\r\n    UIDiag.getStatus=function () {return UIDiag.status;};\r\n    UIDiag.getText=function () {return UIDiag.val? UIDiag.val.val():\"\";};\r\n    //---\r\n    UIDiag.prompt=function (mesg,value,geom) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        geom=geom||{};\r\n        if (typeof geom.left===\"number\" && typeof geom.top===\"number\") {\r\n            position={my:\"left top\",at:\"left+\"+geom.left+\" top+\"+geom.top, of:\"body\"};\r\n        } else {\r\n            position={of:\"body\",at:\"center\",my:\"center\"};\r\n        }\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"input\",{on:{enterkey:ok},$var:\"val\", value:value}],[\"br\"],\r\n                [\"button\",{on:{click:ok}},\"OK\"],\r\n                [\"button\",{on:{click:cancel}},\"\"]).dialog({\r\n                    width:geom.width||\"auto\",\r\n                    height:geom.height||\"auto\",\r\n                    position:position,\r\n                    close:function (){\r\n                        di.dialog(\"close\");\r\n                        d.resolve();\r\n                    }\r\n                });\r\n        setTimeout(function () {\r\n            di.$vars.val.focus();\r\n            //console.log(\"FOcus\");\r\n        },10);\r\n        UIDiag.status=0;\r\n        UIDiag.val=di.$vars.val;\r\n        var d=$.Deferred();\r\n        function ok() {\r\n            UIDiag.status=1;\r\n            var r=di.$vars.val.val();\r\n            UIDiag.resultValue=r;\r\n            d.resolve(r);\r\n            di.dialog(\"close\");\r\n            di.remove();\r\n        }\r\n        function cancel() {\r\n            UIDiag.status=2;\r\n            di.dialog(\"close\");\r\n            di.remove();\r\n            d.resolve();\r\n        }\r\n        return d.promise();\r\n\r\n    };\r\n    if (typeof window!=\"undefined\") window.UIDiag=UIDiag;\r\n    return UIDiag;\r\n});\r\n\n/*global requirejs*/\r\ndefine('runtime',[\"ImageList\",\"T2MediaLib\",\"UIDiag\"],\r\nfunction (ImageList,T2MediaLib,UIDiag) {\r\n    console.log(\"runtimes loaded\",arguments);\r\n    if (!window.T2MediaLib) window.T2MediaLib=T2MediaLib;\r\n    return {ImageList,T2MediaLib,UIDiag};\r\n});\r\n\ndefine('runScript_common',[], function () {\r\n    return {\r\n        initCanvas: function (doResize) {\r\n            function getMargin() {\r\n                return 0;\r\n            }\r\n\r\n            var margin = getMargin();\r\n            var w=$(window).width();\r\n            var h=$(window).height();\r\n            $(\"body\").css({overflow:\"hidden\", margin:\"0px\"});\r\n            var cv=$(\"<canvas>\").attr({width: w-margin, height:h-margin, class:\"tonyu-canvas\"}).appendTo(\"body\");\r\n\r\n            var u = navigator.userAgent.toLowerCase();\r\n            if (doResize==null) {\r\n                doResize=(u.indexOf(\"iphone\") == -1 &&\r\n                    u.indexOf(\"ipad\") == -1 &&\r\n                    u.indexOf(\"ipod\") == -1\r\n                ) && (!window.parent || window === window.parent);\r\n            }\r\n            if (doResize) {\r\n                $(window).resize(onResize);\r\n            }\r\n            function onResize() {\r\n                var margin = getMargin();\r\n                w=$(window).width();\r\n                h=$(window).height();\r\n                cv.attr({width: w-margin, height: h-margin});\r\n            }\r\n            return cv;\r\n        }\r\n    };\r\n});\r\n\ndefine('DebuggerCore',['require','exports','module'],function (require,exports,module) {\r\n// module.exports:: DI_container -> Debugger\r\nmodule.exports=function ({\r\n    //-- Bundled in BuilderClient4Sys\r\n    SourceFiles,\r\n    ProjectFactory:F,\r\n    CompiledProject:CP,\r\n    langMod,\r\n    StackDecoder,\r\n    //--\r\n    Tonyu,   root, FS,\r\n}) {//------\r\nif (root.Debugger) return root.Debugger;\r\nconst Events={\r\n    handlers:{},\r\n    getHandler(t) {\r\n        this.handlers[t]=this.handlers[t]||[];\r\n        return this.handlers[t];\r\n    },\r\n    fire(type,evt) {\r\n        try {\r\n            this.getHandler(type).forEach(f=>f(evt));\r\n        } catch(e) {\r\n            if (!evt || !evt.noCatch) Tonyu.onRuntimeError(e);\r\n        }\r\n    },\r\n    on(type,...args) {\r\n        const f=args.pop();\r\n        this.getHandler(type).push(f);\r\n    }\r\n};\r\nroot.Debugger={\r\n    ProjectFactory:F, FS,\r\n    setErrorHandler: function () {\r\n        Tonyu.onRuntimeError=async e=>{\r\n            console.error(e);\r\n            const stack=await StackDecoder.decode(e);\r\n            const evt={error:e, message:e.message,stack,noCatch:true};\r\n            Events.fire(\"runtimeError\",evt);\r\n        };\r\n    },\r\n    init: async function (prj,_Tonyu) {\r\n        Tonyu=Tonyu||_Tonyu;\r\n        this.setErrorHandler();\r\n        Tonyu.globals.$currentProject=prj;\r\n        Tonyu.currentProject=prj;\r\n        Tonyu.globals.$debugger=root.Debugger;\r\n        await prj.loadClasses();\r\n        console.log(\"Loading classes COMPLETE\",Tonyu.ID,Tonyu.classes);\r\n    },\r\n    exec: async function (srcraw) {\r\n        await SourceFiles.add(srcraw).exec();\r\n        Events.fire(\"classChanged\");\r\n    },\r\n    create: function (className) {\r\n        try {\r\n            const klass=Tonyu.getClass(className);\r\n            return new klass();\r\n        }catch(e) {\r\n            Tonyu.onRuntimeError(e);\r\n            //console.error(e);\r\n            //StackDecoder.decode(e);\r\n        }\r\n    },\r\n    on:Events.on.bind(Events)\r\n};\r\nif (root.parent && root.parent.onTonyuDebuggerReady) {\r\n    root.parent.onTonyuDebuggerReady(root.Debugger);\r\n}\r\nreturn root.Debugger;\r\n};//--------\r\n});//--- end of define\r\n;\ndefine('Debugger',['require','exports','module','DebuggerCore','BuilderClient4Sys','Tonyu','root','FS'],function (require,exports,module) {\r\nconst DebuggerCore=require(\"DebuggerCore\");\r\nconst BuilderClient4Sys=require(\"BuilderClient4Sys\");\r\nconst Tonyu=require(\"Tonyu\");\r\nconst root=require(\"root\");\r\nconst FS=require(\"FS\");\r\nObject.assign(BuilderClient4Sys,{\r\n    Tonyu, root, FS\r\n});\r\nmodule.exports=DebuggerCore(BuilderClient4Sys);\r\n});\r\n\ndefine('SourceFiles',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.SourceFiles;\r\n});\r\n\n/*global requirejs*/\r\nrequirejs([\"FS\",\"Tonyu\",\"IDEProject\",\"Shell\",\"ScriptTagFS\",\r\n\t\t\t\"runtime\",\"WebSite\",\"root\",\"runScript_common\",\r\n\t\t\t\"Debugger\",\"SourceFiles\",\"sysMod\"],\r\n\t\tfunction (FS,  Tonyu, IDEProject, sh, ScriptTagFS,\r\n\t\t\t\trt,WebSite,root,com,\r\n\t\t\t\tDebugger,SourceFiles,sysMod) {\r\n\t$(function () {\r\n\t\tvar home=FS.get(WebSite.tonyuHome);\r\n\t\tvar ramHome=FS.get(\"/ram/\");\r\n\t\tFS.mount(ramHome.path(), FS.LSFS.ramDisk() );\r\n\t\tTonyu.defaultResource={\r\n\t\t\t\timages:[\r\n\t\t\t\t\t\t{name:\"$pat_base\", url: \"images/base.png\", pwidth:32, pheight:32},\r\n\t\t\t\t\t\t{name:\"$pat_sample\", url: \"images/Sample.png\"},\r\n\t\t\t\t\t\t{name:\"$pat_neko\", url: \"images/neko.png\", pwidth:32, pheight:32},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tsounds:[]\r\n\t\t};\r\n\t\troot.SplashScreen={\r\n\t\t\thide: function () {$(\"#splash\").hide();},\r\n\t\t\tshow:function(){},\r\n\t\t\tprogress:function(t) {$(\"#splash .progress\").text(t);}\r\n\t\t};\r\n\r\n\t\tvar cv=com.initCanvas();\r\n\r\n\r\n\t\tvar locs=location.href.replace(/\\?.*/,\"\").split(/\\//);\r\n\t\tvar prjPath=locs.pop() || \"runscript\";\r\n\t\tvar user=locs.pop() || \"nobody\";\r\n\t\t//if (prjloc.length<0) locs=\"runscript\";\r\n\t\tvar prjDir=ramHome;\r\n\t\tvar actualFilesDir=home.rel(user+\"/\"+prjPath+\"/\");\r\n\t\tramHome.rel(\"files/\").link(actualFilesDir);\r\n\t\t//if (prjDir.exists()) sh.rm(prjDir,{r:1});\r\n\t\tvar fo=ScriptTagFS.toObj();\r\n\t\tfor (var fn in fo) {\r\n\t\t\tvar f=prjDir.rel(fn);\r\n\t\t\tif (!f.isDir()) {\r\n\t\t\t\tvar m=fo[fn];\r\n\t\t\t\tf.text(m.text);\r\n\t\t\t\tdelete m.text;\r\n\t\t\t\tif (m.lastUpdate) f.metaInfo(m);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsh.cd(prjDir);\r\n\t\tTonyu.defaultOptions={\r\n\t\t\t\tcompiler: { defaultSuperClass: \"Actor\"},\r\n\t\t\t\trun: {mainClass: \"Main\", bootClass: \"Boot\"},\r\n\t\t\t\tkernelEditable: false\r\n\t\t};\r\n\t\tconst NOP=e=>e;\r\n\t\tconst debuggerPrj=Debugger.ProjectFactory.create(\"compiled\",{dir:prjDir});\r\n\t\tdebuggerPrj.include(sysMod);\r\n\t\tdebuggerPrj.initCanvas=function () {\r\n\t\t\tTonyu.globals.$mainCanvas=cv;\r\n\t\t};\r\n\t\tDebugger.ProjectFactory.addDependencyResolver((prj,spec)=>{\r\n\t\t\tif (spec.namespace===\"kernel\" && !spec.url && WebSite.compiledKernel) {\r\n\t\t\t\treturn Debugger.ProjectFactory.fromDependencySpec(prj, {\r\n\t\t\t\t\turl: WebSite.compiledKernel, namespace:spec.namespace\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst ide={restart:NOP,stop:NOP,displayMode:NOP,jump:NOP};\r\n\t\tvar idePrj=IDEProject.create({dir:prjDir,ide});//, kernelDir);\r\n\t\tTonyu.animationFrame=()=>new Promise(requestAnimationFrame);// abolish\r\n\r\n\t\tstart().then(NOP,e=>console.error(e));\r\n\t\tasync function start() {\r\n\t\t\t//console.log(\"STA-TO\");\r\n\t\t\tconst r=await idePrj.fullCompile();// fullCompile exec compiled source when debugger is connected, but fails because kernel is not loaded yet\r\n\t\t\tidePrj.setDebugger(Debugger);\r\n\t\t\t//await SourceFiles.add(r).saveAs(idePrj.getOutputFile()); // does in fullCompile\r\n\t\t\tawait Debugger.init(debuggerPrj, Tonyu);// does debuggerPrj.loadClaasses\r\n\t\t\t//console.log(\"RO-DO\");\r\n\t\t\tTonyu.globals.$debugger=Debugger;\r\n\r\n\t\t\tTonyu.currentProject=Tonyu.globals.$currentProject=debuggerPrj;\r\n\t\t\tdebuggerPrj.detectPlugins();\r\n\t\t\tvar o=debuggerPrj.getOptions();\r\n\t\t\tif (o.compiler && o.compiler.diagnose) {\r\n\t\t\t\to.compiler.diagnose=false;\r\n\t\t\t\tdebuggerPrj.setOptions(o);\r\n\t\t\t}\r\n\t\t\tdebuggerPrj.runScriptMode=true;// TODO\r\n\t\t\tTonyu.runMode=true;//TODO\r\n\t\t\tconsole.log(\"RAWBoot\");\r\n\t\t\tdebuggerPrj.rawBoot(o.run.bootClass);\r\n\t\t\tprjDir.watch((type, file)=>{\r\n\t\t\t\tif (!file.endsWith(\".tonyu\")) return;\r\n\t\t\t\tconsole.log(\"modifai\",type,file,arguments);\r\n\t\t\t\tidePrj.partialCompile(file).catch(e=>{\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n});\r\n\ndefine(\"runScript\", function(){});\n\n\n\t\t\t})((()=>{\n\t\t\t\tconst b=new Blob([\"!function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u=\\\"function\\\"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error(\\\"Cannot find module '\\\"+s+\\\"'\\\");throw c.code=\\\"MODULE_NOT_FOUND\\\",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){return i(e[s][1][t]||t)},f,f.exports,t,e,n,r)}return n[s].exports}for(var o=\\\"function\\\"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}}()({1:[function(t,e,n){},{}],2:[function(t,e,n){t(\\\"../runtime/TonyuRuntime\\\");const r=t(\\\"../lang/Builder\\\"),i=t(\\\"../lib/root\\\"),o=(i.Worker,t(\\\"../lib/WorkerServiceW\\\")),s=t(\\\"../lib/FS\\\");i.FS=s;const a=t(\\\"../project/ProjectFactory\\\"),u=t(\\\"../project/CompiledProject\\\");t(\\\"../lang/langMod\\\");let c,f;const l={},p=s.get(\\\"/prj/\\\");function h(t){return t.isTError&&(t.src=t.src.path()),t}a.addDependencyResolver(function(t,e){if(console.log(\\\"RESOLV\\\",e,l),e.namespace&&l[e.namespace])return a.fromDependencySpec(t,l[e.namespace])}),o.serv(\\\"compiler/init\\\",t=>{Object.assign(l,t.ns2depspec||{});const e=t.files,n=p.rel((t.namespace||\\\"user\\\")+\\\"/\\\");return n.importFromObject(e),c=u.create({dir:n}),f=new r(c),{prjDir:n.path()}}),o.serv(\\\"compiler/addDependingProject\\\",t=>{const e=t.files,n=p.rel(t.namespace+\\\"/\\\");n.importFromObject(e);u.create({dir:n});return l[t.namespace]={dir:n.path()},{prjDir:n.path()}}),o.serv(\\\"compiler/fullCompile\\\",async t=>{try{return(await f.fullCompile({destinations:{memory:1}})).export()}catch(t){throw h(t)}}),o.serv(\\\"compiler/postChange\\\",async t=>{try{const e=t.files;let n;for(let t in e){n=t;break}const r=c.getDir().rel(n);return r.text(e[n]),(await f.postChange(r)).export()}catch(t){throw h(t)}}),o.serv(\\\"compiler/renameClassName\\\",async t=>{try{const e=await f.renameClassName(t.from,t.to),n={};for(let t of e)t.exists()?n[t.path()]=t.text():n[t.path()]=null;return n}catch(t){throw h(t)}}),o.ready()},{\\\"../lang/Builder\\\":3,\\\"../lang/langMod\\\":15,\\\"../lib/FS\\\":20,\\\"../lib/WorkerServiceW\\\":21,\\\"../lib/root\\\":23,\\\"../project/CompiledProject\\\":24,\\\"../project/ProjectFactory\\\":25,\\\"../runtime/TonyuRuntime\\\":27}],3:[function(t,e,n){const r=t(\\\"../runtime/TonyuRuntime\\\"),i=t(\\\"./JSGenerator\\\"),o=t(\\\"./Semantics\\\"),s=(t(\\\"../lib/FS\\\"),t(\\\"../lib/assert\\\"),t(\\\"./source-map\\\"),t(\\\"./TypeChecker\\\"),t(\\\"../runtime/TError\\\")),a=t(\\\"./IndentBuffer\\\"),u=t(\\\"./SourceFiles\\\");function c(t){var e={},n=[],i=0;for(var o in t)e[o]=!1,i++;for(;n.length<i;){var a=n.length;for(let r in t)if(!e[r]){var u=t[r];0==f(u).length&&(n.push(u),e[r]=!0)}if(n.length==a){var c=[];for(let n in t)if(!e[n]){c=l(t[n])||[];break}throw s(\\\": \\\"+c.join(\\\"->\\\"),\\\"\\\",0)}}function f(n){let i=r.klass.getDependingClasses(n);return i=i.filter(function(n){return n&&t[n.fullName]&&!n.builtin&&!e[n.fullName]})}function l(t){var e=[],n={};!function t(r){var i;!function(t){if(e.push(t.fullName),n[t.fullName])throw s(\\\": \\\"+e.join(\\\"->\\\"),\\\"\\\",0);n[t.fullName]=!0}(r),f(r).forEach(t),i=e.pop(),delete n[i]}(t)}return n}e.exports=class{constructor(t){this.prj=t}getOptions(){return this.prj.getOptions()}getOutputFile(...t){return this.prj.getOutputFile(...t)}getNamespace(){return this.prj.getNamespace()}getDir(){return this.prj.getDir()}getEXT(){return this.prj.getEXT()}sourceFiles(){return this.prj.sourceFiles()}loadDependingClasses(){return this.prj.loadDependingClasses()}getEnv(){return this.env=this.env||{},this.env.options=this.env.options||this.getOptions(),this.env}requestRebuild(){var t=this.getEnv();for(let e of this.getMyClasses())delete t.classes[e]}getMyClasses(){var t=this.getEnv(),e=this.getNamespace();const n=[];for(var r in t.classes){var i=t.classes[r];i.namespace==e&&n.push(i)}return n}initCtx(t){var e=this.getEnv();return t||(t={}),t.visited||(t={visited:{},classes:e.classes=e.classes||r.classMetas,options:t}),t}fileToClass(t){const e=t.truncExt(this.getEXT()),n=this.getEnv(),r=n.aliases[e];if(!r)return null;return n.classes[r]}postChange(t){const e=this.fileToClass(t);if(e)return console.log(\\\"Ex\\\",e),this.partialCompile(this.reverseDependingClasses(e));{const e=this.addMetaFromFile(t),n={};return n[e.fullName]=e,this.partialCompile(n)}}reverseDependingClasses(t){const e={};let n;e[t.fullName]=t;do{n=!1;for(let t of this.getMyClasses()){if(e[t.fullName])break;for(let i of r.klass.getDependingClasses(t))if(e[i.fullName]){e[t.fullName]=t,n=!0;break}}}while(n);return console.log(\\\"revdep\\\",e),e}addMetaFromFile(t){const e=this.getEnv(),n=t.truncExt(this.getEXT()),i=this.getNamespace(),o=i+\\\".\\\"+n;var s=r.klass.getMeta(o);return r.extend(s,{fullName:o,shortName:n,namespace:i}),s.src=s.src||{},s.src.tonyu=t,e.aliases[n]=o,s}fullCompile(t){const e=this.getDir();t=this.initCtx(t),r=t.options||{},this.showProgress(\\\"Compile: \\\"+e.name()),console.log(\\\"Compile: \\\"+e.path());var n,r,i,o,s,a,u=this.getNamespace();return r.destinations=r.destinations||{memory:!0,file:!0},this.loadDependingClasses(t).then(()=>{for(var e in n=t.classes,(i=this.getEnv()).aliases={},i.classes=n,n){var r=n[e];i.aliases[r.shortName]=r.fullName}return this.showProgress(\\\"scan sources\\\")}).then(()=>{for(var t in o={},s=this.sourceFiles(u),console.log(\\\"Sourcefiles\\\",s),s){var e=s[t];const r=this.addMetaFromFile(e);o[r.fullName]=n[r.fullName]=r}return this.showProgress(\\\"update check\\\")}).then(()=>(a=o,console.log(\\\"compilingClasses\\\",a),this.partialCompile(a,r)))}partialCompile(t,e){let n,r,i=this.getEnv();const s=(e=e||{}).destinations||{memory:!0};return Promise.resolve().then(()=>{for(var e in t)console.log(\\\"initClassDecl: \\\"+e),o.initClassDecls(t[e],i);return this.showProgress(\\\"order\\\")}).then(()=>(n=c(t),console.log(\\\"ORD\\\",n.map(t=>t.fullName)),n.forEach(e=>{t[e.fullName]&&(console.log(\\\"annotate :\\\"+e.fullName),o.annotate(e,i))}),this.showProgress(\\\"genJS\\\"))).then(()=>((r=a({fixLazyLength:6})).traceIndex={},this.genJS(n,{codeBuffer:r,traceIndex:r.traceIndex}))).then(()=>{const t=u.add(r.close(),r.srcmap,r.traceIndex);let e=Promise.resolve();if(s.file){const n=this.getOutputFile();e=t.saveAs(n)}return s.memory&&(e=e.then(e=>t)),e})}genJS(t,e){var n=this.getEnv();for(let r of t)i.genJS(r,n,e);return Promise.resolve()}showProgress(t){console.log(\\\"Progress:\\\",t)}setAMDPaths(t){this.getEnv().amdPaths=t}renameClassName(t,e){return this.fullCompile().then(()=>{const n=[];let r;var i=this.getEnv().classes;for(var o in i){var s=i[o],a=s.src?s.src.tonyu:null,u=s.annotation,c=[];if(u&&a&&a.exists()){if(s.node){if(s.node.ext){const e=s.node.ext.superclassName;console.log(\\\"SPCl\\\",e),e.text===t&&c.push({pos:e.pos,len:e.len})}if(s.node.incl){const e=s.node.incl.includeClassNames;console.log(\\\"incl\\\",e);for(let n of e)n.text===t&&c.push({pos:n.pos,len:n.len})}}for(var f in a.truncExt(\\\".tonyu\\\")===t&&(r=a),console.log(\\\"Check\\\",o),u)try{var l=u[f],p=l.scopeInfo;if(p&&\\\"class\\\"==p.type&&p.name==t){var h=l.node.pos,d=l.node.len;a.text().substring(h,h+d)==t&&(c.push({pos:h,len:d}),console.log(a.path(),h,d,a.text().substring(h-5,h+d+5),\\\"->\\\",e))}}catch(t){console.log(t)}c=c.sort(function(t,e){return e.pos-t.pos}),console.log(a.path(),c);var m=a.text(),g=m;for(let t of c)m=m.substring(0,t.pos)+e+m.substring(t.pos+t.len);g==m||a.isReadOnly()||(console.log(\\\"Refact:\\\",a.path(),m),a.text(m),n.push(a))}else console.log(\\\"No Check\\\",o)}if(r){const t=r.sibling(e+\\\".tonyu\\\");r.moveTo(t),n.push(r),n.push(t)}return n})}}},{\\\"../lib/FS\\\":20,\\\"../lib/assert\\\":22,\\\"../runtime/TError\\\":26,\\\"../runtime/TonyuRuntime\\\":27,\\\"./IndentBuffer\\\":6,\\\"./JSGenerator\\\":7,\\\"./Semantics\\\":9,\\\"./SourceFiles\\\":10,\\\"./TypeChecker\\\":11,\\\"./source-map\\\":18}],4:[function(t,e,n){e.exports=function(){const e=t(\\\"./parser\\\");var n={};function r(t){var e={},n=t;return e.add=function(t){n=n?n.or(t):t},e.get=function(){return n},e}function i(){var t=r(),n={reg:function(n,r,i){var o=function(t,e){var n={eq:function(n){return t==n.type()&&e==n.prio()},type:function(e){return e?e==t:t},prio:function(){return e},toString:function(){return\\\"[\\\"+t+\\\":\\\"+e+\\\"]\\\"}};return n}(n,r);t.add(i.ret(e.create(function(t){return t.opType=o,t})).setName(\\\"(opType \\\"+o+\\\" \\\"+i.name+\\\")\\\"))},get:function(){return t.get()},parse:function(t){return n.get().parse(t)}};return n}var o=i(),s=i(),a=r(),u=[];return n.element=function(t){o.reg(\\\"element\\\",-1,t),a.add(t)},n.getElement=function(){return a.get()},n.prefix=function(t,e){o.reg(\\\"prefix\\\",t,e)},n.postfix=function(t,e){s.reg(\\\"postfix\\\",t,e)},n.infixl=function(t,e){s.reg(\\\"infixl\\\",t,e)},n.infixr=function(t,e){s.reg(\\\"infixr\\\",t,e)},n.infix=function(t,e){s.reg(\\\"infix\\\",t,e)},n.trifixr=function(t,e,n){s.reg(\\\"trifixr\\\",t,e),u[t]=n},n.custom=function(t,e){},n.mkInfix=function(t){n.mkInfix.def=t},n.mkInfix.def=function(t,n,r){return e.setRange({type:\\\"infix\\\",op:n,left:t,right:r})},n.mkInfixl=function(t){n.mkInfixl.def=t},n.mkInfixl.def=function(t,n,r){return e.setRange({type:\\\"infixl\\\",op:n,left:t,right:r})},n.mkInfixr=function(t){n.mkInfixr.def=t},n.mkInfixr.def=function(t,n,r){return e.setRange({type:\\\"infixr\\\",op:n,left:t,right:r})},n.mkPrefix=function(t){n.mkPrefix.def=t},n.mkPrefix.def=function(t,n){return e.setRange({type:\\\"prefix\\\",op:t,right:n})},n.mkPostfix=function(t){n.mkPostfix.def=t},n.mkPostfix.def=function(t,n){return e.setRange({type:\\\"postfix\\\",left:t,op:n})},n.mkTrifixr=function(t){n.mkTrifixr.def=t},n.mkTrifixr.def=function(t,n,r,i,o){return e.setRange({type:\\\"trifixr\\\",left:t,op1:n,mid:r,op2:i,right:o})},n.build=function(){return n.built=e.create(function(t){return function t(e,r){var i,a=r;r=o.parse(r);if(!r.isSuccess())return r;i=r.opType;if(i.type(\\\"prefix\\\")){var c=r.result[0];if(!(r=t(i.prio(),r)).isSuccess())return r;var f=n.mkPrefix.def(c,r.result[0]);if((a=r.clone()).result=[f],!r.nextPostfixOrInfix)return a;r=r.nextPostfixOrInfix}else if(a=r.clone(),!(r=s.parse(r)).isSuccess())return a;for(;;){if((i=r.opType).prio()<e)return a.nextPostfixOrInfix=r,a;if(i.type(\\\"postfix\\\")){const t=n.mkPostfix.def(a.result[0],r.result[0]);if((a=r.clone()).result=[t],!(r=s.parse(r)).isSuccess())return a}else if(i.type(\\\"infixl\\\")){var l=r.result[0];if(!(r=t(i.prio()+1,r)).isSuccess())return a;const e=n.mkInfixl.def(a.result[0],l,r.result[0]);if((a=r.clone()).result=[e],!r.nextPostfixOrInfix)return a;r=r.nextPostfixOrInfix}else if(i.type(\\\"infixr\\\")){const e=r.result[0];if(!(r=t(i.prio(),r)).isSuccess())return a;const o=n.mkInfixr.def(a.result[0],e,r.result[0]);if((a=r.clone()).result=[o],!r.nextPostfixOrInfix)return a;r=r.nextPostfixOrInfix}else if(i.type(\\\"trifixr\\\")){var p=a.result[0],h=r.result[0];if(!(r=t(i.prio()+1,r)).isSuccess())return a;var d=r.result[0];if(!(r=u[i.prio()].parse(r)).isSuccess())return a;var m=r.result[0];if(!(r=t(i.prio(),r)).isSuccess())return a;var g=r.result[0];const e=n.mkTrifixr.def(p,h,d,m,g);if((a=r.clone()).result=[e],!r.nextPostfixOrInfix)return a;r=r.nextPostfixOrInfix}else{const e=r.result[0];if(!(r=t(i.prio()+1,r)).isSuccess())return a;const o=n.mkInfix.def(a.result[0],e,r.result[0]);if((a=r.clone()).result=[o],!r.nextPostfixOrInfix)return a;if(r=r.nextPostfixOrInfix,i.prio()==r.opType.prio())return a.success=!1,a}}}(0,t)}).setName(\\\"ExpBuilt\\\"),n.built},n.lazy=function(){return e.create(function(t){return n.built.parse(t)})},n}},{\\\"./parser\\\":17}],5:[function(t,e,n){const r=function(){const e=t(\\\"./parser\\\");var n=e,i=null;function o(t){return\\\"string\\\"==typeof t?i.get(t):t}return(i=function(t){var n={ands:function(){for(var n=o(arguments[0]),s=1;s<arguments.length;s++)n=n.and(o(arguments[s]));n=n.tap(t),i.defs[t]=n;var a={autoNode:function(){var r=n.ret(function(){for(var n={type:t},r=0;r<arguments.length;r++){var i=arguments[r],o=e.setRange(i);e.addRange(n,o),n[\\\"-element\\\"+r]=i}n.toString=function(){return\\\"(\\\"+this.type+\\\")\\\"}}).setName(t);return i.defs[t]=r,r},ret:function(o){if(0==arguments.length)return n;if(\\\"function\\\"==typeof o)return i.defs[t]=n.ret(o),i.defs[t];for(var s=[],a=function(t){return t},u=0;u<arguments.length;u++){if(\\\"function\\\"==typeof arguments[u]){a=arguments[u];break}s[u]=arguments[u]}var c=n.ret(function(){var n={type:t};n[r.SUBELEMENTS]=[];for(var i=0;i<arguments.length;i++){var o=arguments[i],u=e.setRange(o);e.addRange(n,u),s[i]&&(n[s[i]]=o),n[r.SUBELEMENTS].push(o)}return n.toString=function(){return\\\"(\\\"+this.type+\\\")\\\"},a(n)}).setName(t);return i.defs[t]=c,c}};return a},ors:function(){for(var e=o(arguments[0]),n=1;n<arguments.length;n++)e=e.or(o(arguments[n]));return i.defs[t]=e.setName(t),i.defs[t]}};return n}).defs={},i.get=function(t){return i.defs[t]?i.defs[t]:n.lazy(function(){var e=i.defs[t];if(!e)throw\\\"grammar named '\\\"+t+\\\"' is undefined\\\";return e}).setName(\\\"(Lazy of \\\"+t+\\\")\\\")},i};r.SUBELEMENTS=Symbol(\\\"[SUBELEMENTS]\\\"),e.exports=r},{\\\"./parser\\\":17}],6:[function(t,e,n){const r=t(\\\"../lib/assert\\\"),i=t(\\\"./source-map\\\");e.exports=function(t){t=t||{};var e=function(){var t=arguments,n=t[0],r=0;function i(e){var i=t[++r];if(null==i&&!e)throw console.log(t),new Error(r+\\\"th null param: fmt=\\\"+n);return i}for(;;){var o=n.indexOf(\\\"%\\\");if(o<0){e.print(n);break}e.print(n.substring(0,o)),o++;var s=n.charAt(o);if(\\\"s\\\"==s){var a=i();\\\"string\\\"==typeof a||\\\"number\\\"==typeof a||(null==a?a=\\\"null\\\":a.text&&(e.addMapping(a),a=a.text)),e.print(a),o++}else if(\\\"d\\\"==s){var u=i();if(\\\"number\\\"!=typeof u)throw new Error(u+\\\" is not a number: fmt=\\\"+n);e.print(u),o++}else if(\\\"n\\\"==s)e.ln(),o++;else if(\\\"{\\\"==s)e.indent(),o++;else if(\\\"}\\\"==s)e.dedent(),o++;else if(\\\"%\\\"==s)e.print(\\\"%\\\"),o++;else if(\\\"f\\\"==s)i()(e),o++;else if(\\\"l\\\"==s){var c=i();e.print(e.toLiteral(c)),o++}else if(\\\"v\\\"==s){var f=i();if(!f)throw new Error(\\\"Null %v\\\");if(\\\"object\\\"!=typeof f)throw new Error(\\\"nonobject %v:\\\"+f);e.addMapping(f),e.visitor.visit(f),o++}else if(\\\"z\\\"==s){var l=i();if(\\\"val\\\"in l)return void e.print(l.val);l.inited||e.lazy(l),l.print(),o++}else if(\\\"j\\\"==s){var p=i(),h=p[0],d=p[1],m=!1;if(!d||!d.forEach)throw console.log(d),new Error(d+\\\" is not array. cannot join fmt:\\\"+n);for(let t of d)m&&e.printf(h),m=!0,e.visitor.visit(t);o++}else\\\"D\\\"==s?(i(!0),o++):o+=2;n=n.substring(o)}};return e.addTraceIndex=function(t){this.traceIndex||(this.traceIndex={}),this.traceIndex[t]=1},e.addMapping=function(t){var n;e.srcFile&&(\\\"number\\\"==typeof t.row&&\\\"number\\\"==typeof t.col?n={row:t.row,col:t.col}:\\\"number\\\"==typeof t.pos&&(n=e.srcRCM.getRC(t.pos)),n&&e.srcmap.addMapping({generated:{line:e.bufRow,column:e.bufCol},source:e.srcFile+\\\"\\\",original:{line:n.row,column:n.col}}))},e.setSrcFile=function(t){e.srcFile=t,e.srcRCM=function(t){var e={},n=[],r=0,i=0;return t.split(\\\"\\\\n\\\").forEach(function(t){n.push(r),r+=t.length+1}),n.push(r),e.getRC=function(t){for(;;){if(i<0)return{row:1,col:1};if(i+1>=n.length)return{row:n.length,col:1};if(t<n[i])i--;else{if(!(n[i+1]<=t))return{row:i+1,col:t-n[i]+1};i++}}},e}(t.text()),e.srcmap.setSourceContent(t.path(),t.text())},e.print=function(t){e.buf+=t;var n=(t+\\\"\\\").split(\\\"\\\\n\\\");n.forEach(function(t,r){r<n.length-1?(e.bufCol+=t.length+1,e.bufRow++,e.bufCol=1):e.bufCol+=t.length})},e.dstFile=t.dstFile,e.mapFile=t.mapFile,e.printf=e,e.buf=\\\"\\\",e.bufRow=1,e.bufCol=1,e.srcmap=new i.SourceMapGenerator,e.lazy=function(n){return n||(n={}),t.fixLazyLength?(n.length=n.length||t.fixLazyLength,n.pad=n.pad||\\\" \\\",n.gen=function(){for(var t=\\\"\\\",e=0;e<n.length;e++)t+=n.pad;return t}(),n.puts=[],e.useLengthPlace=!0):(n.gen=(\\\"GENERETID\\\"+Math.random()+\\\"DITERENEG\\\").replace(/\\\\W/g,\\\"\\\"),n.reg=new RegExp(n.gen,\\\"g\\\"),r(!e.useLengthPlace,\\\"GENERETID cannot be used\\\")),n.inited=!0,n.put=function(t){if(this.val=t+\\\"\\\",this.puts){for(this.val.length>this.length&&(e.lazyOverflow=!0);this.val.length<this.length;)this.val+=this.pad;var n=this;this.puts.forEach(function(t){var i=e.buf.length;e.buf=e.buf.substring(0,t)+n.val+e.buf.substring(t+n.length),r.eq(i,e.buf.length)})}return this.reg&&(e.buf=e.buf.replace(this.reg,t)),this.val},n.print=function(){this.puts&&this.puts.push(e.buf.length),e.print(this.gen)},n},e.ln=function(){e.print(\\\"\\\\n\\\"+e.indentBuf)},e.indent=function(){e.indentBuf+=e.indentStr,e.print(\\\"\\\\n\\\"+e.indentBuf)},e.dedent=function(){var t=e.indentStr.length;if(!e.buf.substring(e.buf.length-t).match(/^\\\\s*$/))throw console.log(e.buf),new Error(\\\"Non-space truncated \\\");e.buf=e.buf.substring(0,e.buf.length-t),e.indentBuf=e.indentBuf.substring(0,e.indentBuf.length-t)},e.toLiteral=function(t,e){if(e||(e=\\\"'\\\"),\\\"string\\\"!=typeof t)throw console.log(\\\"no literal \\\",t),new Error(\\\"toLiteral:\\\"+t+\\\" is not a literal\\\");return t=(t=(t=t.replace(/\\\\\\\\/g,\\\"\\\\\\\\\\\\\\\\\\\")).replace(/\\\\r/g,\\\"\\\\\\\\r\\\")).replace(/\\\\n/g,\\\"\\\\\\\\n\\\"),e+(t=\\\"'\\\"==e?t.replace(/'/g,\\\"\\\\\\\\'\\\"):t.replace(/\\\"/g,'\\\\\\\\\\\"'))+e},e.indentBuf=\\\"\\\",e.indentStr=\\\"  \\\",e.close=function(){return e.mapStr=e.srcmap.toString(),e.mapFile&&e.dstFile&&(e.mapFile.text(e.mapStr),e.printf(\\\"%n//# sourceMappingURL=%s%n\\\",e.mapFile.relPath(e.dstFile.up()))),e.dstFile&&e.dstFile.text(e.buf),e.buf},e}},{\\\"../lib/assert\\\":22,\\\"./source-map\\\":18}],7:[function(t,e,n){t(\\\"../runtime/TonyuRuntime\\\");const r=t(\\\"./IndentBuffer\\\"),i=t(\\\"./ObjectMatcher\\\"),o=t(\\\"../runtime/TError\\\"),s=t(\\\"./context\\\"),a=t(\\\"./Visitor\\\"),u=t(\\\"./compiler\\\"),c=t(\\\"../lib/assert\\\");e.exports=u.JSGenerator=function(){var t=\\\"_thread\\\",e=\\\"_this\\\",n=\\\"_arguments\\\",f=\\\"fiber$\\\",l=\\\"__pc\\\",p=\\\"__cnt\\\",h=100,d=\\\"Tonyu.bindFunc\\\",m=\\\"Tonyu.invokeMethod\\\",g=\\\"Tonyu.callFunc\\\",v=\\\"Tonyu.checkNonNull\\\",y=\\\"Tonyu.classes.\\\",b=\\\"Tonyu.globals.\\\",x=\\\"this\\\",w='\\\"use strict\\\";%n',S=\\\"Tonyu.iterator\\\",E=\\\"__superClass\\\",_=u.ScopeTypes,C=u.getScopeType,T=u.annotation;u.getMethod,u.getDependingClasses,u.getParams;return{genJS:function(A,F,D){var L=A.src.tonyu,R=L.text();function k(t){return u.getSource(R,t)}var P=(D=D||{}).codeBuffer||F.codeBuffer||r({fixLazyLength:6}),O=D.traceIndex||{};P.setSrcFile(L);var M=P.printf,N=s(),B=!1,j=i,I=A.decls,U=(I.fields,I.methods),W=(I.natives,_),z=0,G=F.options.compiler.diagnose,q=F.options.compiler.genAMD,J=!F.options.compiler.noLoopCheck;function V(t,e){return T(A.annotation,t,e)}function $(t){return\\\"string\\\"==typeof t?y+(F.aliases[t]||t):t.builtin?t.fullName:y+t.fullName}function H(t,e){return function(n){N.enter(t,function(){K.visit(e)})}}function Q(n,r,i){var o=C(r);if(o==W.THVAR)P.printf(\\\"%s\\\",t);else if(o==W.FIELD||o==W.PROP)P.printf(\\\"%s.%s\\\",e,n);else if(o==W.METHOD)i&&i.noBind?P.printf(\\\"%s.%s\\\",e,n):P.printf(\\\"%s(%s,%s.%s)\\\",d,e,e,n);else if(o==W.CLASS)P.printf(\\\"%s\\\",$(n));else if(o==W.GLOBAL)P.printf(\\\"%s%s\\\",b,n);else{if(o!=W.PARAM&&o!=W.LOCAL&&o!=W.NATIVE&&o!=W.MODULE)throw console.log(\\\"Unknown scope type: \\\",o),new Error(\\\"Unknown scope type: \\\"+o);P.printf(\\\"%s\\\",n)}return r}function Z(t){return function(){(function(t){\\\"compound\\\"==t.type?N.enter({noWait:!0},function(){P.printf(\\\"%j%n\\\",[\\\"%n\\\",t.stmts])}):K.visit(t)}).apply(this,[t])}}var X={type:\\\"THNode\\\"};const K=P.visitor=a({THNode:function(e){P.printf(t)},dummy:function(t){P.printf(\\\"\\\",t)},literal:function(t){P.printf(\\\"%s\\\",t.text)},paramDecl:function(t){P.printf(\\\"%v\\\",t.name)},paramDecls:function(t){P.printf(\\\"(%j)\\\",[\\\", \\\",t.params])},funcDeclHead:function(t){P.printf(\\\"function %v %v\\\",t.name,t.params)},funcDecl:function(t){},return:function(n){if(N.inTry)throw o(\\\"tryreturn\\\",L,n.pos);if(N.noWait)N.threadAvail?n.value?P.printf(\\\"%s.retVal=%v;return;%n\\\",t,n.value):P.printf(\\\"%s.retVal=%s;return;%n\\\",t,e):n.value?P.printf(\\\"return %v;\\\",n.value):P.printf(\\\"return %s;\\\",e);else if(n.value){var r=V(n.value).fiberCall;r?P.printf(\\\"%s.%s%s(%j);%n%s=%s;return;%n%}case %d:%{%s.exit(%s.retVal);return;%n\\\",e,f,r.N,[\\\", \\\",[X].concat(r.A)],l,N.pc,N.pc++,t,t):P.printf(\\\"%s.exit(%v);return;\\\",t,n.value)}else P.printf(\\\"%s.exit(%s);return;\\\",t,e)},number:function(t){P.printf(\\\"%s\\\",t.value)},reservedConst:function(r){\\\"this\\\"==r.text?P.printf(\\\"%s\\\",e):\\\"arguments\\\"==r.text&&N.threadAvail?P.printf(\\\"%s\\\",n):r.text==t?P.printf(\\\"%s\\\",N.threadAvail?t:\\\"null\\\"):P.printf(\\\"%s\\\",r.text)},varDecl:function(n){var r=V(n).varInMain?e+\\\".\\\":\\\"\\\";if(n.value){var i=!N.noWait&&V(n).fiberCall;i?(c.is(N.pc,Number),P.printf(\\\"%s.%s%s(%j);%n%s=%s;return;%n%}case %d:%{%s%v=%s.retVal;%n\\\",e,f,i.N,[\\\", \\\",[X].concat(i.A)],l,N.pc,N.pc++,r,n.name,t)):P.printf(\\\"%s%v = %v;%n\\\",r,n.name,n.value)}},varsDecl:function(t){var e=t.decls.filter(function(t){return t.value});e.length>0&&e.forEach(function(t){P.printf(\\\"%v\\\",t)})},jsonElem:function(t){t.value?P.printf(\\\"%v: %v\\\",t.key,t.value):P.printf(\\\"%v: %f\\\",t.key,function(){Q(t.key.text,V(t).scopeInfo,V(t))})},objlit:function(t){P.printf(\\\"{%j}\\\",[\\\",\\\",t.elems])},arylit:function(t){P.printf(\\\"[%j]\\\",[\\\",\\\",t.elems])},funcExpr:function(t){!function(t){var e=V(t).info;P.printf(\\\"(function %s(%j) {%{%f%n%f%}})\\\",e.name,[\\\",\\\",e.params],et(e),function(){N.enter({noWait:!0,threadAvail:!1,finfo:e},function(){t.body.stmts.forEach(function(t){M(\\\"%v%n\\\",t)})})})}(t)},parenExpr:function(t){P.printf(\\\"(%v)\\\",t.expr)},varAccess:function(t){Q(t.name.text,V(t).scopeInfo,V(t))},exprstmt:function(n){var r={};if(N.noWait||(r=V(n).fiberCall||{}),\\\"noRet\\\"==r.type)P.printf(\\\"%s.%s%s(%j);%n%s=%s;return;%n%}case %d:%{\\\",e,f,r.N,[\\\", \\\",[X].concat(r.A)],l,N.pc,N.pc++);else if(\\\"ret\\\"==r.type)P.printf(\\\"%s.%s%s(%j);%n%s=%s;return;%n%}case %d:%{%v%v%s.retVal;%n\\\",e,f,r.N,[\\\", \\\",[X].concat(r.A)],l,N.pc,N.pc++,r.L,r.O,t);else if(\\\"noRetSuper\\\"==r.type){const t=E;P.printf(\\\"%s.prototype.%s%s.apply( %s, [%j]);%n%s=%s;return;%n%}case %d:%{\\\",t,f,r.S.name.text,e,[\\\", \\\",[X].concat(r.A)],l,N.pc,N.pc++)}else if(\\\"retSuper\\\"==r.type){const n=E;P.printf(\\\"%s.prototype.%s%s.apply( %s, [%j]);%n%s=%s;return;%n%}case %d:%{%v%v%s.retVal;%n\\\",n,f,r.S.name.text,e,[\\\", \\\",[X].concat(r.A)],l,N.pc,N.pc++,r.L,r.O,t)}else P.printf(\\\"%v;\\\",n.expr)},infix:function(t){var e=t.op.text;if(G){if(\\\"+\\\"==e||\\\"-\\\"==e||\\\"*\\\"==e||\\\"/\\\"==e||\\\"%\\\"==e)return void P.printf(\\\"%s(%v,%l)%v%s(%v,%l)\\\",v,t.left,k(t.left),t.op,v,t.right,k(t.right));if(\\\"+=\\\"==e||\\\"-=\\\"==e||\\\"*=\\\"==e||\\\"/=\\\"==e||\\\"%=\\\"==e)return void P.printf(\\\"%v%v%s(%v,%l)\\\",t.left,t.op,v,t.right,k(t.right))}\\\"is\\\"===t.op.type?P.printf(\\\"Tonyu.is(%v,%v)\\\",t.left,t.right):P.printf(\\\"%v%v%v\\\",t.left,t.op,t.right)},trifixr:function(t){P.printf(\\\"%v%v%v%v%v\\\",t.left,t.op1,t.mid,t.op2,t.right)},prefix:function(t){if(\\\"__typeof\\\"!==t.op.text)P.printf(\\\"%v %v\\\",t.op,t.right);else{var e=V(t.right);e.vtype?P.printf(\\\"%l\\\",e.vtype.name||e.vtype.fullName||\\\"No type name?\\\"):P.printf(\\\"%l\\\",\\\"Any\\\")}},postfix:function(t){var n=V(t);if(G){if(n.myMethodCall){const o=n.myMethodCall;var r=o.scopeInfo,i=C(r);return void(i==W.FIELD||i==W.PROP||i==W.METHOD?P.printf(\\\"%s(%s, %l, [%j], %l )\\\",m,e,o.name,[\\\",\\\",o.args],\\\"this\\\"):P.printf(\\\"%s(%v, [%j], %l)\\\",g,t.left,[\\\",\\\",o.args],k(t.left)))}if(n.othersMethodCall){var o=n.othersMethodCall;return void P.printf(\\\"%s(%v, %l, [%j], %l )\\\",m,o.target,o.name,[\\\",\\\",o.args],k(o.target))}if(n.memberAccess){var s=n.memberAccess;return void P.printf(\\\"%s(%v,%l).%s\\\",v,s.target,k(s.target),s.name)}}else if(n.myMethodCall){const t=n.myMethodCall,r=t.scopeInfo;if(C(r)==W.METHOD)return void P.printf(\\\"%s.%s(%j)\\\",e,t.name,[\\\",\\\",t.args])}P.printf(\\\"%v%v\\\",t.left,t.op)},break:function(t){if(N.noWait)P.printf(\\\"break;%n\\\");else{if(N.inTry&&N.exitTryOnJump)throw o(\\\"trybreak;\\\",L,t.pos);if(!N.closestBrk)throw o(\\\"break \\\",L,t.pos);P.printf(\\\"%s=%z; break;%n\\\",l,N.closestBrk)}},continue:function(t){if(N.noWait)P.printf(\\\"continue;%n\\\");else{if(N.inTry&&N.exitTryOnJump)throw o(\\\"trycontinue;\\\",L,t.pos);if(\\\"number\\\"==typeof N.closestCnt)P.printf(\\\"%s=%s; break;%n\\\",l,N.closestCnt);else{if(!N.closestCnt)throw o(\\\"continue \\\",L,t.pos);P.printf(\\\"%s=%z; break;%n\\\",l,N.closestCnt)}}},try:function(e){var n=V(e);if(!N.noWait&&(n.fiberCallRequired||n.hasJump||n.hasReturn)){if(1!=e.catches.length||\\\"catch\\\"!=e.catches[0].type)throw o(\\\"catch1\\\",L,e.pos);var r=e.catches[0],i={},s={};P.printf(\\\"%s.enterTry(%z);%n\\\",t,i),P.printf(\\\"%f\\\",H({inTry:!0,exitTryOnJump:!0},e.stmt)),P.printf(\\\"%s.exitTry();%n\\\",t),P.printf(\\\"%s=%z;break;%n\\\",l,s),P.printf(\\\"%}case %f:%{\\\",function(){P.print(i.put(N.pc++))}),P.printf(\\\"%s=%s.startCatch();%n\\\",r.name.text,t),P.printf(\\\"%v%n\\\",r.stmt),P.printf(\\\"%}case %f:%{\\\",function(){P.print(s.put(N.pc++))})}else N.enter({noWait:!0},function(){P.printf(\\\"try {%{%f%n%}} \\\",Z(e.stmt)),e.catches.forEach(K.visit)})},catch:function(t){P.printf(\\\"catch (%s) {%{%f%n%}}\\\",t.name.text,Z(t.stmt))},throw:function(t){P.printf(\\\"throw %v;%n\\\",t.ex)},switch:function(t){if(N.noWait)P.printf(\\\"switch (%v) {%{%j\\\"+(t.defs?\\\"%n%v\\\":\\\"%D\\\")+\\\"%n%}}\\\",t.value,[\\\"%n\\\",t.cases],t.defs);else{var e=t.cases.map(function(t){return P.lazy()});t.defs&&e.push(P.lazy());var n=P.lazy();P.printf(\\\"switch (%v) {%{%f%n%}}%nbreak;%n\\\",t.value,function(){var r=0;t.cases.forEach(function(t){P.printf(\\\"%}case %v:%{%s=%z;break;%n\\\",t.value,l,e[r]),r++}),t.defs?P.printf(\\\"%}default:%{%s=%z;break;%n\\\",l,e[r]):P.printf(\\\"%}default:%{%s=%z;break;%n\\\",l,n)}),N.enter({closestBrk:n},function(){var r=0;t.cases.forEach(function(t){P.printf(\\\"%}case %f:%{%j%n\\\",function(){P.print(e[r].put(N.pc++))},[\\\"%n\\\",t.stmts]),r++}),t.defs&&P.printf(\\\"%}case %f:%{%j%n\\\",function(){P.print(e[r].put(N.pc++))},[\\\"%n\\\",t.defs.stmts]),P.printf(\\\"case %f:%n\\\",function(){P.print(n.put(N.pc++))})})}},case:function(t){P.printf(\\\"%}case %v:%{%j\\\",t.value,[\\\"%n\\\",t.stmts])},default:function(t){P.printf(\\\"%}default:%{%j\\\",[\\\"%n\\\",t.stmts])},while:function(t){var e=V(t);if(N.noWait||!e.fiberCallRequired&&!e.hasReturn)N.enter({noWait:!0},function(){P.printf(\\\"while (%v) {%{\\\"+(J?\\\"Tonyu.checkLoop();%n\\\":\\\"\\\")+\\\"%f%n%}}\\\",t.cond,Z(t.loop))});else{var n=P.lazy(),r=N.pc++,i=\\\"reservedConst\\\"==t.cond.type&&\\\"true\\\"==t.cond.text;P.printf(\\\"%}case %d:%{\\\"+(i?\\\"%D%D%D\\\":\\\"if (!(%v)) { %s=%z; break; }%n\\\")+\\\"%f%n%s=%s;break;%n%}case %f:%{\\\",r,t.cond,l,n,H({closestBrk:n,closestCnt:r,exitTryOnJump:!1},t.loop),l,r,function(){P.print(n.put(N.pc++))})}},do:function(t){var e=V(t);if(N.noWait||!e.fiberCallRequired&&!e.hasReturn)N.enter({noWait:!0},function(){P.printf(\\\"do {%{\\\"+(J?\\\"Tonyu.checkLoop();%n\\\":\\\"\\\")+\\\"%f%n%}} while (%v);%n\\\",Z(t.loop),t.cond)});else{var n=P.lazy(),r=P.lazy(),i=N.pc++;P.printf(\\\"%}case %d:%{%f%n%}case %f:%{if (%v) { %s=%s; break; }%n%}case %f:%{\\\",i,H({closestBrk:n,closestCnt:r,exitTryOnJump:!1},t.loop),function(){P.print(r.put(N.pc++))},t.cond,l,i,function(){P.print(n.put(N.pc++))})}},for:function(t){var e=V(t);if(\\\"forin\\\"==t.inFor.type){var n=V(t.inFor).iterName;if(N.noWait||!e.fiberCallRequired&&!e.hasReturn)N.enter({noWait:!0},function(){P.printf(\\\"%s=%s(%v,%s);%nwhile(%s.next()) {%{%f%n%f%n%}}\\\",n,S,t.inFor.set,t.inFor.vars.length,n,s(n,t.inFor.isVar,t.inFor.vars),Z(t.loop))});else{var r=P.lazy(),i=N.pc++;P.printf(\\\"%s=%s(%v,%s);%n%}case %d:%{if (!(%s.next())) { %s=%z; break; }%n%f%n%f%n%s=%s;break;%n%}case %f:%{\\\",n,S,t.inFor.set,t.inFor.vars.length,i,n,l,r,s(n,t.inFor.isVar,t.inFor.vars),H({closestBrk:r,closestCnt:i,exitTryOnJump:!1},t.loop),l,i,function(t){t.print(r.put(N.pc++))})}}else if(N.noWait||!e.fiberCallRequired&&!e.hasReturn)N.enter({noWait:!0},function(){\\\"varsDecl\\\"==t.inFor.init.type||\\\"exprstmt\\\"==t.inFor.init.type?P.printf(\\\"%vfor (; %v ; %v) {%{\\\"+(J?\\\"Tonyu.checkLoop();%n\\\":\\\"\\\")+\\\"%v%n%}}\\\",t.inFor.init,t.inFor.cond,t.inFor.next,t.loop):P.printf(\\\"%v%nwhile(%v) {%{\\\"+(J?\\\"Tonyu.checkLoop();%n\\\":\\\"\\\")+\\\"%v%n%v;%n%}}\\\",t.inFor.init,t.inFor.cond,t.loop,t.inFor.next)});else{const e=P.lazy();var o=P.lazy();const n=N.pc++;P.printf(\\\"%v%n%}case %d:%{if (!(%v)) { %s=%z; break; }%n%f%n%}case %f:%{%v;%n%s=%s;break;%n%}case %f:%{\\\",t.inFor.init,n,t.inFor.cond,l,e,H({closestBrk:e,closestCnt:o,exitTryOnJump:!1},t.loop),function(t){t.print(o.put(N.pc++))},t.inFor.next,l,n,function(t){t.print(e.put(N.pc++))})}function s(t,e,n){return function(){n.forEach(function(e,n){var r=V(e);Q(e.text,r.scopeInfo,r),P.printf(\\\"=%s[%s];%n\\\",t,n)})}}},if:function(t){var e=V(t);if(!N.noWait&&(e.fiberCallRequired||e.hasJump||e.hasReturn)){var n=P.lazy(),r=P.lazy();t._else?P.printf(\\\"if (!(%v)) { %s=%z; break; }%n%v%n%s=%z;break;%n%}case %f:%{%v%n%}case %f:%{\\\",t.cond,l,r,t.then,l,n,function(){P.print(r.put(N.pc++))},t._else,function(){P.print(n.put(N.pc++))}):P.printf(\\\"if (!(%v)) { %s=%z; break; }%n%v%n%}case %f:%{\\\",t.cond,l,n,t.then,function(){P.print(n.put(N.pc++))})}else N.enter({noWait:!0},function(){t._else?P.printf(\\\"if (%v) {%{%f%n%}} else {%{%f%n%}}\\\",t.cond,Z(t.then),Z(t._else)):P.printf(\\\"if (%v) {%{%f%n%}}\\\",t.cond,Z(t.then))})},ifWait:function(t){N.noWait?t._else&&P.printf(\\\"%v\\\",t._else):P.printf(\\\"%v\\\",t.then)},empty:function(t){P.printf(\\\";%n\\\")},call:function(t){P.printf(\\\"(%j)\\\",[\\\",\\\",t.args])},objlitArg:function(t){P.printf(\\\"%v\\\",t.obj)},argList:function(t){P.printf(\\\"%j\\\",[\\\",\\\",t.args])},newExpr:function(t){var e=t.params;e?P.printf(\\\"new %v%v\\\",t.klass,e):P.printf(\\\"new %v\\\",t.klass)},scall:function(t){P.printf(\\\"[%j]\\\",[\\\",\\\",t.args])},superExpr:function(t){var n;t.name?(n=t.name.text,P.printf(\\\"%s.prototype.%s.apply( %s, %v)\\\",E,n,e,t.params)):P.printf(\\\"%s.apply( %s, %v)\\\",E,e,t.params)},arrayElem:function(t){P.printf(\\\"[%v]\\\",t.subscript)},member:function(t){P.printf(\\\".%s\\\",t.name)},symbol:function(t){P.print(t.text)},normalFor:function(t){P.printf(\\\"%v; %v; %v\\\",t.init,t.cond,t.next)},compound:function(t){var e=V(t);!N.noWait&&(e.fiberCallRequired||e.hasJump||e.hasReturn)?P.printf(\\\"%j\\\",[\\\"%n\\\",t.stmts]):N.enter({noWait:!0},function(){P.printf(\\\"{%{%j%n%}}\\\",[\\\"%n\\\",t.stmts])})},typeof:function(t){P.printf(\\\"typeof \\\")},instanceof:function(t){P.printf(\\\" instanceof \\\")},is:function(t){P.printf(\\\" instanceof \\\")},regex:function(t){P.printf(\\\"%s\\\",t.text)}});function Y(t,e){e||(e=z+++\\\"\\\");let n=\\\"_trc_\\\"+A.shortName+\\\"_\\\"+e;return O[n]=1,n}function tt(t){var e=V(t).info;P.printf(\\\"function %s(%j) {%{%f%n%f%}}\\\",e.name,[\\\",\\\",e.params],et(e),function(){N.enter({noWait:!0,threadAvail:!1,finfo:e},function(){t.body.stmts.forEach(function(t){M(\\\"%v%n\\\",t)})})})}function et(t){return function(){N.enter({},function(){for(let e in t.locals.varDecls)P.printf(\\\"var %s;%n\\\",e);for(let e in t.locals.subFuncDecls)tt(t.locals.subFuncDecls[e])})}}function nt(t){return j.match(t,{ftype:\\\"constructor\\\"})||j.match(t,{name:\\\"new\\\"})}[\\\"++\\\",\\\"--\\\",\\\"!==\\\",\\\"===\\\",\\\"+=\\\",\\\"-=\\\",\\\"*=\\\",\\\"/=\\\",\\\"%=\\\",\\\">=\\\",\\\"<=\\\",\\\"!=\\\",\\\"==\\\",\\\">>>\\\",\\\">>\\\",\\\"<<\\\",\\\"&&\\\",\\\"||\\\",\\\">\\\",\\\"<\\\",\\\"+\\\",\\\"?\\\",\\\"=\\\",\\\"*\\\",\\\"%\\\",\\\"/\\\",\\\"^\\\",\\\"~\\\",\\\"\\\\\\\\\\\",\\\":\\\",\\\";\\\",\\\",\\\",\\\"!\\\",\\\"&\\\",\\\"|\\\",\\\"-\\\",\\\"delete\\\"].forEach(function(t){K.funcs[t]=function(e){P.printf(\\\"%s\\\",t)}}),K.def=function(t){throw console.log(\\\"Err node=\\\"),console.log(t),new Error(t.type+\\\" is not defined in visitor:compiler2\\\")},K.cnt=0,N.enter({},function(){if(q){M(\\\"define(function (require) {%{\\\");var r={Tonyu:1};for(var i in A.decls.amds)r[i]=1;if(A.superclass){const t=A.superclass.shortName;r[t]=1}(A.includes||[]).forEach(function(t){var e=t.shortName;r[e]=1});for(let t in A.decls.softRefClasses)r[t]=1;for(let t in r)M(\\\"var %s=require('%s');%n\\\",t,t)}var o,s;M((q?\\\"return \\\":\\\"\\\")+\\\"Tonyu.klass.define({%{\\\"),M(\\\"fullName: %l,%n\\\",A.fullName),M(\\\"shortName: %l,%n\\\",A.shortName),M(\\\"namespace: %l,%n\\\",A.namespace),A.superclass&&M(\\\"superclass: %s,%n\\\",$(A.superclass)),M(\\\"includes: [%s],%n\\\",(o=A.includes,s=[],o.forEach(function(t){s.push($(t))}),s).join(\\\",\\\")),M(\\\"methods: function (%s) {%{\\\",E),M(\\\"return {%{\\\");const a=r=>{B&&console.log(\\\"method1\\\",r);var i=U[r];i.params||console.log(\\\"MYSTERY2\\\",i.params,U,A,F),N.enter({noWait:!0,threadAvail:!1},function(){var t,n;n=nt(t=i)?\\\"initialize\\\":t.name,t.params||console.log(\\\"MYSTERY\\\",t.params),M(\\\"%s :function %s(%j) {%{\\\"+w+\\\"var %s=%s;%n%f%n%f%}},%n\\\",n,Y(t.pos,n),[\\\",\\\",t.params],e,x,et(t),function(){N.enter({method:t,finfo:t},function(){t.stmts.forEach(function(t){M(\\\"%v%n\\\",t)})})})}),B&&console.log(\\\"method2\\\",r),i.nowait||N.enter({noWait:!1,threadAvail:!0},function(){!function(r){if(!nt(r)){var i=r.stmts,o=[],s=[],a=o;i.forEach(function(t){V(t).fiberCallRequired&&(a=s),a.push(t)}),M(\\\"%s%s :function %s(%j) {%{\\\"+w+\\\"var %s=%s;%n%svar %s=%s;%nvar %s=0;%n%f%n%f%n\\\",f,r.name,Y(r.pos,\\\"f_\\\"+r.name),[\\\",\\\",[X].concat(r.params)],e,x,r.useArgs?\\\"\\\":\\\"//\\\",n,\\\"Tonyu.A(arguments)\\\",l,et(r),function(){N.enter({method:r,noWait:!0,threadAvail:!0},function(){o.forEach(function(t){M(\\\"%v%n\\\",t)})})}),s.length>0?M(\\\"%s.enter(function %s(%s) {%{if (%s.lastEx) %s=%s.catchPC;%nfor(var %s=%d ; %s--;) {%{switch (%s) {%{%}case 0:%{%f%s.exit(%s);return;%n%}}%n%}}%n%}});%n\\\",t,Y(r.pos,\\\"ent_\\\"+r.name),t,t,l,t,p,h,p,l,function(){N.enter({method:r,finfo:r,pc:1},function(){s.forEach(function(t){M(\\\"%v%n\\\",t)})})},t,e):M(\\\"%s.retVal=%s;return;%n\\\",t,e),M(\\\"%}},%n\\\")}}(i)}),B&&console.log(\\\"method3\\\",r)};for(var u in U)a(u);M(\\\"__dummy: false%n\\\"),M(\\\"%}};%n\\\"),M(\\\"%}},%n\\\"),M(\\\"decls: %s%n\\\",JSON.stringify(function(t){var e={methods:{},fields:{}};for(let n in t.decls.methods)e.methods[n]={nowait:!!t.decls.methods[n].nowait};for(let i in t.decls.fields){var n=t.decls.fields[i],r={};n.vtype&&(\\\"string\\\"==typeof n.vtype?r.vtype=n.vtype:r.vtype=n.vtype.fullName||n.vtype.name),e.fields[i]=r}return e}(A))),M(\\\"%}});\\\"),q&&M(\\\"%n%}});\\\")}),q?(A.src.js=A.src.tonyu.up().rel(A.src.tonyu.truncExt()+\\\".js\\\"),A.src.js.text(P.buf)):A.src.js=P.buf,delete A.jsNotUpToDate,B&&console.log(\\\"method4\\\",P.buf);var rt=P.close();return A.src.map=P.mapStr,rt}}}()},{\\\"../lib/assert\\\":22,\\\"../runtime/TError\\\":26,\\\"../runtime/TonyuRuntime\\\":27,\\\"./IndentBuffer\\\":6,\\\"./ObjectMatcher\\\":8,\\\"./Visitor\\\":12,\\\"./compiler\\\":13,\\\"./context\\\":14}],8:[function(t,e,n){e.exports=function(){var t={},e=\\\"$var\\\",n=\\\"$this\\\";function r(t,r){var i={};return i[e]=t,r&&(i[n]=r),i}t.v=r,t.isVar=function(t){return t&&t[e]};for(var i=\\\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\\\",o=0;o<i.length;o++){var s=i.substring(o,o+1);t[s]=r(s)}return t.match=function(t,r){var i={};return function t(r,i,o){if(r===i)return!0;if(null==r)return!1;if(\\\"string\\\"==typeof r&&i instanceof RegExp)return r.match(i);if(\\\"function\\\"==typeof i)return i(r,o);if(\\\"object\\\"==typeof i){for(var s in i)if(s!=e){var a=s==n?r:r[s],u=i[s];if(!t(a,u,o))return!1}return i[e]&&(o[i[e]]=r),!0}return!1}(t,r,i)?i:null},t}()},{}],9:[function(t,e,n){const r=t(\\\"../runtime/TonyuRuntime\\\"),i=t(\\\"./parse_tonyu2\\\"),o=(t(\\\"./IndentBuffer\\\"),t(\\\"./ObjectMatcher\\\")),s=t(\\\"../runtime/TError\\\"),a=t(\\\"./context\\\"),u=t(\\\"./Visitor\\\"),c=t(\\\"./compiler\\\"),f=(t(\\\"../lib/assert\\\"),t(\\\"./Grammar\\\")),l=t(\\\"../lib/root\\\");e.exports=c.Semantics=function(){var t=c.ScopeTypes,e=c.newScopeType,n=c.getScopeType,p=c.newScope,h=c.genSym,d=c.annotation,m=c.getMethod,g=c.getDependingClasses,v=c.getParams,y={Array:1,String:1,Boolean:1,Number:1,Void:1,Object:1,RegExp:1,Error:1,Date:1};function b(t){var e=this;if(t&&\\\"object\\\"==typeof t){var n;if(!(n=t instanceof Array?t:t[f.SUBELEMENTS]))for(var r in n=[],t)n.push(t[r]);n.forEach(function(t){e.visit(t)})}}return{initClassDecls:function(t,e){var n,r=t.src.tonyu;t.hasSemanticError=!0,t.src&&t.src.js&&(t.jsNotUpToDate=!0),t.node&&t.nodeTimestamp==r.lastUpdate()&&(n=t.node),n||(console.log(\\\"Parse \\\"+r),n=i.parse(r),t.nodeTimestamp=r.lastUpdate());var a={name:\\\"main\\\",stmts:[],pos:0,isMain:!0},c={},f={main:a},l={};t.decls={fields:c,methods:f,natives:l,amds:{},softRefClasses:{}},t.node=n;var p=o;!function(n){var i=e.options.compiler.defaultSuperClass,o=0,h=p.match(n,{ext:{superclassName:{text:p.N,pos:p.P}}});if(h&&(i=h.N,o=h.P,\\\"null\\\"==i&&(i=null)),t.includes=[],(h=p.match(n,{incl:{includeClassNames:p.C}}))&&h.C.forEach(function(n){var i=n.text,o=n.pos,a=e.classes[e.aliases[i]||i];if(!a)throw s(\\\" \\\"+i+\\\"\\\",r,o);t.includes.push(a)}),\\\"Array\\\"==i)t.superclass={name:\\\"Array\\\",fullName:\\\"Array\\\",builtin:!0};else if(i){var d=e.classes[e.aliases[i]||i];if(!d)throw s(\\\" \\\"+i+\\\"\\\",r,o);t.superclass=d}else delete t.superclass;function m(e,n){n=n||e,c[e+\\\"\\\"]={node:n,klass:t.fullName,name:e+\\\"\\\",pos:n.pos}}t.directives={};var g=u({varDecl:function(t){m(t.name,t)},nativeDecl:function(t){},funcDecl:function(t){},funcExpr:function(t){},catch:function(t){},exprstmt:function(e){\\\"literal\\\"===e.expr.type&&e.expr.text.match(/^.field strict.$/)&&(t.directives.field_strict=!0)},forin:function(t){t.isVar&&t.vars.forEach(function(t){m(t)})}});g.def=b,g.visit(n.stmts),n.stmts.forEach(function(e){if(\\\"funcDecl\\\"==e.type){var n=e.head,r=\\\"function\\\";n.ftype&&(r=n.ftype.text);var i=n.name.text,o=n.params?\\\"\\\":n.setter?\\\"__setter__\\\":\\\"__getter__\\\";f[i=o+i]={nowait:!!n.nowait||\\\"\\\"!==o,ftype:r,name:i,klass:t.fullName,head:n,pos:n.pos,stmts:e.body.stmts,node:e}}else\\\"nativeDecl\\\"==e.type?l[e.name.text]=e:a.stmts.push(e)})}(n)},annotate:function(i,f){i.hasSemanticError=!0;var x,w,S=i.src.tonyu,E=S.text(),_=o,C=i.decls,T=(C.fields,C.methods),A=(C.natives,C.amds,t),F={},D=a(),L=!1,R={type:\\\"postfix\\\",left:{type:\\\"postfix\\\",left:_.T,op:{type:\\\"member\\\",name:{text:_.N}}},op:{type:\\\"call\\\",args:_.A}},k={type:\\\"postfix\\\",left:_.T,op:{type:\\\"member\\\",name:{text:_.N}}};x=w={type:\\\"postfix\\\",left:{type:\\\"varAccess\\\",name:{text:_.N}},op:{type:\\\"call\\\",args:_.A}};var P={expr:w},O={expr:{type:\\\"infix\\\",op:_.O,left:_.L,right:w}},M={expr:{type:\\\"superExpr\\\",params:{args:_.A},$var:\\\"S\\\"}},N={expr:{type:\\\"infix\\\",op:_.O,left:_.L,right:{type:\\\"superExpr\\\",params:{args:_.A},$var:\\\"S\\\"}}};function B(t,e){return d(i.annotation,t,e)}function j(t){if(!t.builtin){var n,i=F,o=t.decls;for(n in o||console.log(\\\"DECLNUL\\\",t),o.fields){const r=o.fields[n];i[n]=e(A.FIELD,{klass:t.fullName,name:n,info:r}),r.node&&B(r.node,{info:r})}for(n in o.methods){const a=o.methods[n];var s=r.klass.propReg.exec(n);s?i[s[2]]=e(A.PROP,{klass:t.fullName,name:s[2],info:a}):i[n]=e(A.METHOD,{klass:t.fullName,name:n,info:a}),a.node&&B(a.node,{info:a})}}}function I(t){return m(i,t)}function U(t){return n(D.scope[t])==A.METHOD&&!I(t).nowait}function W(t){if(\\\"varAccess\\\"==t.type||\\\"postfix\\\"==t.type&&(\\\"member\\\"==t.op.type||\\\"arrayElem\\\"==t.op.type))return\\\"varAccess\\\"==t.type&&B(t,{noBind:!0}),!0;throw console.log(\\\"LVal\\\",t),s(\\\"'\\\"+function(t){return c.getSource(E,t)}(t)+\\\"'\\\",S,t.pos)}function z(t){var r=t;t+=\\\"\\\";var o=D.scope[t],a=n(o);if(!a){if(f.amdPaths&&f.amdPaths[t])a=A.MODULE,i.decls.amds[t]=f.amdPaths[t];else{var u=t.match(/^\\\\$/);if((f.options.compiler.field_strict||i.directives.field_strict)&&!u)throw new s(t+\\\"\\\",S,r.pos);a=u?A.GLOBAL:A.FIELD}var l={name:t};a==A.FIELD&&(l.klass=i.name,i.decls.fields[t]=i.decls.fields[t]||{},c.extend(i.decls.fields[t],{klass:i.fullName,name:t})),o=F[t]=e(a,l)}return a==A.CLASS&&(i.decls.softRefClasses[t]=o),o}i.annotation={};var G=u({varDecl:function(t){D.isMain?(B(t,{varInMain:!0}),B(t,{declaringClass:i})):(D.locals.varDecls[t.name.text]=t,B(t,{declaringFunc:D.finfo}))},funcDecl:function(t){D.locals.subFuncDecls[t.head.name.text]=t},funcExpr:function(t){},catch:function(t){D.locals.varDecls[t.name.text]=t},exprstmt:function(t){},forin:function(t){var e=t.isVar;t.vars.forEach(function(t){e&&(D.isMain?(B(t,{varInMain:!0}),B(t,{declaringClass:i})):(D.locals.varDecls[t.text]=t,B(t,{declaringFunc:D.finfo})))});var n=h(\\\"_it_\\\");B(t,{iterName:n}),D.locals.varDecls[n]=t}});function q(t){var e={varDecls:{},subFuncDecls:{}};return D.enter({locals:e},function(){G.visit(t)}),e}function J(t,e){t.forEach(function(t){B(t,e)})}function V(t){D.method&&(D.method.fiberCallRequired=!0),J(t,{fiberCallRequired:!0})}G.def=b;var $=u({varAccess:function(t){var e=z(t.name);n(e),B(t,{scopeInfo:e})},funcDecl:function(t){},funcExpr:function(t){Y(t)},objlit:function(t){var e=this,n={};t.elems.forEach(function(t){var r;if(r=\\\"literal\\\"==t.key.type?t.key.text.substring(1,t.key.text.length-1):t.key.text,n[r])throw s(\\\"'\\\"+r+\\\"'\\\",S,t.pos);n[r]=1,e.visit(t)})},jsonElem:function(t){if(t.value)this.visit(t.value);else{if(\\\"literal\\\"==t.key.type)throw s(\\\"\\\",S,t.pos);B(t,{scopeInfo:z(t.key)})}},do:function(t){var e=this;D.enter({brkable:!0,contable:!0},function(){e.def(t)})},switch:function(t){var e=this;D.enter({brkable:!0},function(){e.def(t)})},while:function(t){var e=this;D.enter({brkable:!0,contable:!0},function(){e.def(t)}),V(this.path)},for:function(t){var e=this;D.enter({brkable:!0,contable:!0},function(){e.def(t)})},forin:function(t){t.vars.forEach(function(t){B(t,{scopeInfo:z(t)})}),this.visit(t.set)},ifWait:function(t){var n=this,r=p(D.scope);r._thread=e(A.THVAR),D.enter({scope:r},function(){n.visit(t.then)}),t._else&&n.visit(t._else),V(this.path)},try:function(t){D.finfo.useTry=!0,this.def(t)},return:function(t){var e;D.noWait||((e=_.match(t.value,w))&&U(e.N)&&(B(t.value,{fiberCall:e}),V(this.path)),J(this.path,{hasReturn:!0})),this.visit(t.value)},break:function(t){if(!D.brkable)throw s(\\\"break switch.\\\",S,t.pos);D.noWait||J(this.path,{hasJump:!0})},continue:function(t){if(!D.contable)throw s(\\\"continue .\\\",S,t.pos);D.noWait||J(this.path,{hasJump:!0})},reservedConst:function(t){\\\"arguments\\\"==t.text&&(D.finfo.useArgs=!0)},postfix:function(t){var e;function n(t,n){return e=_.match(t,n)}if(this.visit(t.left),this.visit(t.op),n(t,x)){var r=B(t.left).scopeInfo;B(t,{myMethodCall:{name:e.N,args:e.A,scopeInfo:r}})}else n(t,R)?B(t,{othersMethodCall:{target:e.T,name:e.N,args:e.A}}):n(t,k)&&B(t,{memberAccess:{target:e.T,name:e.N}})},infix:function(t){var e=t.op.text;\\\"=\\\"!=e&&\\\"+=\\\"!=e&&\\\"-=\\\"!=e&&\\\"*=\\\"!=e&&\\\"/=\\\"!=e&&\\\"%=\\\"!=e||W(t.left),this.def(t)},exprstmt:function(t){var e,n;if(\\\"objlit\\\"===t.expr.type)throw s(\\\"\\\",S,t.pos);if(!D.noWait&&(e=_.match(t,P))&&U(e.N))e.type=\\\"noRet\\\",B(t,{fiberCall:e}),V(this.path);else if(!D.noWait&&(e=_.match(t,O))&&U(e.N))e.type=\\\"ret\\\",B(t,{fiberCall:e}),V(this.path);else if(!D.noWait&&(e=_.match(t,M))&&e.S.name){if(!(n=I(e.S.name.text)))throw new Error(\\\"\\\"+e.S.name.text+\\\" \\\");n.nowait||(e.type=\\\"noRetSuper\\\",e.superclass=i.superclass,B(t,{fiberCall:e}),V(this.path))}else if(!D.noWait&&(e=_.match(t,N))&&e.S.name){if(!(n=I(e.S.name.text)))throw new Error(\\\"\\\"+e.S.name.text+\\\" \\\");n.nowait||(e.type=\\\"retSuper\\\",e.superclass=i.superclass,B(t,{fiberCall:e}),V(this.path))}this.visit(t.expr)},varDecl:function(t){var e;!D.noWait&&(e=_.match(t.value,w))&&U(e.N)&&(e.type=\\\"varDecl\\\",B(t,{fiberCall:e}),V(this.path)),this.visit(t.value),this.visit(t.typeDecl)},typeExpr:function(t){H(t)}});function H(t){t.name;var e=z(t.name),r=n(e);r===A.NATIVE?B(t,{resolvedType:e.value}):r===A.CLASS&&B(t,{resolvedType:e.info})}function Q(t,e){D.enter({scope:e},function(){$.visit(t)})}function Z(t,n){var r=t.locals;for(var i in r.varDecls){var o=e(A.LOCAL,{declaringFunc:t});n[i]=o,B(r.varDecls[i],{scopeInfo:o})}for(let i in r.subFuncDecls){const o=e(A.LOCAL,{declaringFunc:t});n[i]=o,B(r.subFuncDecls[i],{scopeInfo:o})}}function X(t){t.forEach(function(t){t.typeDecl&&H(t.typeDecl.vtype)})}function K(t){D.enter({isMain:t.isMain,finfo:t},function(){t.locals=q(t.stmts),t.params=v(t)}),X(t.params)}function Y(t){var n,r,i=t.body,o=t.head.name?t.head.name.text:\\\"anonymous_\\\"+t.pos;n=_.match(t,{head:{params:{params:_.P}}}),r=n?n.P:[];var s={},a=p(D.scope);return D.enter({finfo:s},function(){r.forEach(function(t){var n=e(A.PARAM,{declaringFunc:s});B(t,{scopeInfo:n}),a[t.name.text]=n}),s.locals=q(i),Z(s,a),Q(i,a)}),s.scope=a,s.name=o,s.params=r,X(s.params),B(t,{info:s}),tt(s.locals,a),s}function tt(t,e){D.enter({scope:e},function(){for(var e in t.subFuncDecls)Y(t.subFuncDecls[e])})}function et(t){var n=p(D.scope);return t.params.forEach(function(r,o){var s=e(A.PARAM,{klass:i.name,name:t.name,no:o,declaringFunc:t});n[r.name.text]=s,B(r,{scopeInfo:s,declaringFunc:t})}),Z(t,n),D.enter({method:t,finfo:t,noWait:!1},function(){Q(t.stmts,n)}),t.scope=n,tt(t.locals,n),n}$.def=b,function(){var t=F;g(i).forEach(j);var n=i.decls;for(let r in n.natives)t[r]=e(A.NATIVE,{name:\\\"native::\\\"+r,value:l[r]});for(let n in y)t[n]=e(A.NATIVE,{name:\\\"native::\\\"+n,value:l[n]});for(let n in f.aliases){var r=f.aliases[n];t[n]=e(A.CLASS,{name:n,fullName:r,info:f.classes[r]})}}(),function(){var t=g(i);for(var e in i.decls.methods){var n=i.decls.methods[e];for(let i of t){var r=i.decls.methods[e];r&&r.nowait&&(n.nowait=!0)}}}(),D.enter({scope:F},function(){for(var t in T){L&&console.log(\\\"anon method1\\\",t);var e=T[t];K(e),et(e)}}),delete i.hasSemanticError}}}()},{\\\"../lib/assert\\\":22,\\\"../lib/root\\\":23,\\\"../runtime/TError\\\":26,\\\"../runtime/TonyuRuntime\\\":27,\\\"./Grammar\\\":5,\\\"./IndentBuffer\\\":6,\\\"./ObjectMatcher\\\":8,\\\"./Visitor\\\":12,\\\"./compiler\\\":13,\\\"./context\\\":14,\\\"./parse_tonyu2\\\":16}],10:[function(t,e,n){const r=t(\\\"../lib/root\\\");let i;\\\"undefined\\\"!=typeof global&&global.require&&(i=global.require(\\\"vm\\\"));class o{constructor(t,e){if(\\\"object\\\"==typeof t){const n=t;e=n.sourceMap,t=n.text,n.url&&(this.url=n.url)}this.text=t,this.sourceMap=e&&e.toString()}async saveAs(t){const e=t.sibling(t.name()+\\\".map\\\");let n=this.text;this.sourceMap&&(await e.text(this.sourceMap),n+=\\\"\\\\n//# sourceMappingURL=\\\"+e.name()),await t.text(n)}exec(e){return new Promise((n,o)=>{if(r.window){const t=r.document;let e;if(this.url)e=this.url;else{const t=new r.Blob([this.text],{type:\\\"text/plain\\\"});e=r.URL.createObjectURL(t)}const i=t.createElement(\\\"script\\\");console.log(\\\"load script\\\",e),i.setAttribute(\\\"src\\\",e),i.addEventListener(\\\"load\\\",t=>{n(t)}),this.parent.url2SourceFile[e]=this,t.body.appendChild(i)}else if(e&&e.tmpdir){const r=e.tmpdir.rel(Math.random()+\\\".js\\\"),i=r.sibling(r.name()+\\\".map\\\");let o=this.text;o+=\\\"\\\\n//# sourceMappingURL=\\\"+i.name(),r.text(o),i.text(this.sourceMap),t(r.path()),r.rm(),i.rm(),n()}else if(r.importScripts&&this.url)r.importScripts(this.url),n();else{const t=Function,e=i?i.compileFunction(this.text):new t(this.text);n(e())}})}export(){return{text:this.text,sourceMap:this.sourceMap,functions:this.functions}}}e.exports=new class{constructor(){this.url2SourceFile={}}add(t,e){const n=new o(t,e);return n.parent=this,n}}},{\\\"../lib/root\\\":23}],11:[function(t,e,n){const r=t(\\\"./Visitor\\\"),i=t(\\\"./Grammar\\\"),o=t(\\\"./compiler\\\"),s=t(\\\"./context\\\");var a=o.ScopeTypes,u=(o.newScopeType,o.getScopeType,o.newScope,o.genSym,o.annotation),c=(o.getMethod,o.getDependingClasses,o.getParams,{});function f(t){var e=this;if(t&&\\\"object\\\"==typeof t){var n;if(!(n=t instanceof Array?t:t[i.SUBELEMENTS]))for(var r in n=[],t)n.push(t[r]);n.forEach(function(t){e.visit(t)})}}c.checkTypeDecl=function(t,e){function n(e,n){return u(t.annotation,e,n)}var i=r({varDecl:function(t){if(t.value&&this.visit(t.value),t.name&&t.typeDecl){var e=n(t.typeDecl.vtype);console.log(\\\"var typeis\\\",t.name+\\\"\\\",t.typeDecl.vtype,e.resolvedType);var r=n(t),i=r.scopeInfo,o=r.info;i?(console.log(\\\"set var type\\\",t.name+\\\"\\\",e.resolvedType),i.vtype=e.resolvedType):o&&(console.log(\\\"set fld type\\\",t.name+\\\"\\\",e.resolvedType),o.vtype=e.resolvedType)}},paramDecl:function(t){if(t.name&&t.typeDecl){console.log(\\\"param typeis\\\",t.name+\\\"\\\",t.typeDecl.vtype+\\\"\\\");var e=n(t.typeDecl.vtype),r=n(t).scopeInfo;r&&e.resolvedType&&(console.log(\\\"set param type\\\",t.name+\\\"\\\",t.typeDecl.vtype+\\\"\\\"),r.vtype=e.resolvedType)}},funcDecl:function(t){var e=t.head,r=n(t).info;e.rtype&&(console.log(\\\"ret typeis\\\",e.name+\\\"\\\",e.rtype.vtype+\\\"\\\"),r.rtype=e.rtype.vtype),this.visit(e),this.visit(t.body)}});i.def=f,i.visit(t.node)},c.checkExpr=function(t,e){function n(e,n){return u(t.annotation,e,n)}var i=r({number:function(t){n(t,{vtype:Number})},literal:function(t){n(t,{vtype:String})},postfix:function(t){var e=n(t);if(e.memberAccess){var r=e.memberAccess,s=function(t){return i.visit(t),n(t).vtype}(r.target);if(s){var a=o.getField(s,r.name);console.log(\\\"GETF\\\",s,r.name,a),a&&a.vtype&&n(t,{vtype:a.vtype})}}else this.visit(t.left),this.visit(t.op)},varAccess:function(e){var r=n(e).scopeInfo;if(r)if(r.vtype)console.log(\\\"VA typeof\\\",e.name+\\\":\\\",r.vtype),n(e,{vtype:r.vtype});else if(r.type===a.FIELD){var i;if(!(i=t.decls.fields[e.name+\\\"\\\"]))return void console.log(\\\"TC Warning: fld not found\\\",t,e.name+\\\"\\\");var o=i.vtype;o?(n(e,{vtype:o}),console.log(\\\"VA typeof\\\",e.name+\\\":\\\",o)):console.log(\\\"VA vtype not found\\\",e.name+\\\":\\\",i)}else r.type,a.PROP}});s();i.def=f,i.visit(t.node)},e.exports=c},{\\\"./Grammar\\\":5,\\\"./Visitor\\\":12,\\\"./compiler\\\":13,\\\"./context\\\":14}],12:[function(t,e,n){e.exports=function(t){var e={funcs:t,path:[],visit:function(n){try{e.path.push(n),e.debug&&console.log(\\\"visit \\\",n.type,n.pos);var r=n?t[n.type]:null;if(r)return r.call(e,n);if(e.def)return e.def.call(e,n)}finally{e.path.pop()}},replace:function(t){return e.def||(e.def=function(t){if(\\\"object\\\"==typeof t)for(var n in t)t[n]&&\\\"object\\\"==typeof t[n]&&(t[n]=e.visit(t[n]));return t}),e.visit(t)}};return e}},{}],13:[function(t,e,n){const r=t(\\\"../runtime/TonyuRuntime\\\"),i=(t(\\\"./ObjectMatcher\\\"),t(\\\"../lib/root\\\"));var o={};r.Compiler=o;o.ScopeTypes={FIELD:\\\"field\\\",METHOD:\\\"method\\\",NATIVE:\\\"native\\\",LOCAL:\\\"local\\\",THVAR:\\\"threadvar\\\",PROP:\\\"property\\\",PARAM:\\\"param\\\",GLOBAL:\\\"global\\\",CLASS:\\\"class\\\",MODULE:\\\"module\\\"};var s=1,a=1;function u(t){return t+(a+++\\\"\\\").replace(/\\\\./g,\\\"\\\")}function c(t){var e={},n=[];return function r(i){if(!e[i.fullName]){if(e[i.fullName]=!0,i.isShim)throw console.log(t,\\\"contains shim \\\",i),new Error(\\\"Contains shim\\\");n.push(i),i.superclass&&r(i.superclass),i.includes&&i.includes.forEach(r)}}(t),n}o.newScopeType=function(t,e){var n={type:t};if(e)for(var r in e)n[r]=e[r];return n.name||(n.name=u(\\\"_\\\"+t+\\\"_\\\")),n},o.getScopeType=function(t){return t?t.type:null},o.newScope=function(t){var e=function(){};return e.prototype=t,new e},o.nullCheck=function(t,e){if(!t)throw e+\\\" is null\\\";return t},o.genSym=u,o.extend=function(t,e){for(var n in e)t[n]=e[n];return t},o.annotation=function(t,e,n){e._id||(e._id=++s);var r=t[e._id];if(r||(r=t[e._id]={node:e}),r.node!==e)throw console.log(\\\"NOMATCH\\\",r.node,e),new Error(\\\"annotation node not match!\\\");if(n)for(var i in n)r[i]=n[i];return r},o.getSource=function(t,e){return t.substring(e.pos,e.pos+e.len)},o.getField=function(t,e){if(t instanceof Function)return null;var n=null;return c(t).forEach(function(t){n||(n=t.decls.fields[e])}),\\\"string\\\"==typeof n.vtype&&(n.vtype=r.classMetas[n.vtype]||i[n.vtype]),n},o.getMethod=function(t,e){var n=null;return c(t).forEach(function(t){n||(n=t.decls.methods[e])}),n},o.getDependingClasses=c,o.getParams=function(t){var e=[];if(!t.head)return e;t.head.setter&&e.push(t.head.setter.value);var n=t.head.params?t.head.params.params:null;if(n&&!n.forEach)throw new Error(t+\\\" is not array \\\");return n&&(e=e.concat(n)),e},e.exports=o},{\\\"../lib/root\\\":23,\\\"../runtime/TonyuRuntime\\\":27,\\\"./ObjectMatcher\\\":8}],14:[function(t,e,n){e.exports=function(){var t={ovrFunc:function(t,e){return e.parent=t,e},enter:function(e,n){var r={};for(let n in e)n.match(/^\\\\$/)?(n=RegExp.rightContext,r[n]=t[n],t[n]=t.ovrFunc(t[n],e[n])):(r[n]=t[n],t[n]=e[n]);var i=n(t);for(let e in r)t[e]=r[e];return i}},e={};for(var n in t.clear=function(){for(var n in t)e[n]||delete t[n]},t)e[n]=!0;return t}},{}],15:[function(t,e,n){e.exports={getNamespace:function(){var t=this.getOptions();if(t.compiler&&t.compiler.namespace)return t.compiler.namespace;throw new Error(\\\"Namespace is not set\\\")},async loadDependingClasses(){const t=this.getNamespace();for(let e of this.getDependingProjects())e.getNamespace()!==t&&await e.loadClasses()},getEXT:()=>\\\".tonyu\\\"}},{}],16:[function(t,e,n){const r=t(\\\"./Grammar\\\"),i=(t(\\\"./IndentBuffer\\\"),t(\\\"./tonyu2_token\\\")),o=t(\\\"./parser\\\"),s=t(\\\"./ExpressionParser2\\\"),a=t(\\\"../runtime/TError\\\");e.exports=function(){var t=o,e={},n=r(),u=n.get,c=(t.StringParser,t.TokensParser.token);function f(t){return JSON.stringify(t)}var l=c(\\\"number\\\").ret(function(t){if(t.type=\\\"number\\\",\\\"string\\\"!=typeof t.text)throw\\\"No text for \\\"+f(t);if(t.value=t.text-0,isNaN(t.value))throw\\\"No value for \\\"+f(t);return t}),p=c(\\\"symbol\\\"),h=c(\\\"symbol\\\");for(var d in i.reserved){var m=c(d);m instanceof o.Parser&&\\\"constructor\\\"!==d&&(h=h.or(m))}var g=c(\\\"===\\\"),v=c(\\\"!==\\\"),y=c(\\\"==\\\"),b=c(\\\"!=\\\"),x=c(\\\">=\\\"),w=c(\\\"<=\\\"),S=c(\\\">\\\"),E=c(\\\"<\\\"),_=c(\\\"&&\\\"),C=c(\\\"||\\\"),T=c(\\\"&\\\"),A=c(\\\"|\\\"),F=c(\\\"^\\\"),D=c(\\\">>\\\"),L=c(\\\"<<\\\"),R=c(\\\">>>\\\"),k=c(\\\"-\\\"),P=c(\\\"+\\\"),O=c(\\\"*\\\"),M=c(\\\"/\\\"),N=c(\\\"%\\\"),B=c(\\\"=\\\"),j=c(\\\"literal\\\"),I=c(\\\"regex\\\");function U(t){return function(){return arguments[t]}}function W(t){return t.sep0(c(\\\",\\\"),!0).and(c(\\\",\\\").opt()).ret(function(t,e){return t})}var z=s(),G=n(\\\"arrayElem\\\").ands(c(\\\"[\\\"),z.lazy(),c(\\\"]\\\")).ret(null,\\\"subscript\\\"),q=n(\\\"argList\\\").ands(c(\\\"(\\\"),W(z.lazy()),c(\\\")\\\")).ret(null,\\\"args\\\"),J=n(\\\"member\\\").ands(c(\\\".\\\"),h).ret(null,\\\"name\\\"),V=n(\\\"parenExpr\\\").ands(c(\\\"(\\\"),z.lazy(),c(\\\")\\\")).ret(null,\\\"expr\\\"),$=n(\\\"varAccess\\\").ands(p).ret(\\\"name\\\"),H=u(\\\"funcExpr\\\").firstTokens([\\\"function\\\",\\\"\\\\\\\\\\\"]),Q=n(\\\"funcExprArg\\\").ands(H).ret(\\\"obj\\\"),Z=u(\\\"objlit\\\").firstTokens(\\\"{\\\"),X=n(\\\"objlitArg\\\").ands(Z).ret(\\\"obj\\\"),K=X.or(Q);function Y(t,e){var n=[];if(t&&!t.args)throw f(t);if(t){var r=o.getRange(t);o.addRange(n,r),t.args.forEach(function(t){n.push(t)})}return e.forEach(function(t){var e=o.getRange(t);o.addRange(n,e),n.push(t.obj)}),n}var tt=q.and(K.rep0()).ret(function(t,e){return Y(t,e)}).or(K.rep1().ret(function(t){return Y(null,t)})),et=(q.or(X),n(\\\"call\\\").ands(tt).ret(\\\"args\\\")),nt=n(\\\"scall\\\").ands(tt).ret(\\\"args\\\"),rt=n(\\\"newExpr\\\").ands(c(\\\"new\\\"),$,et.opt()).ret(null,\\\"klass\\\",\\\"params\\\"),it=n(\\\"superExpr\\\").ands(c(\\\"super\\\"),c(\\\".\\\").and(p).ret(U(1)).opt(),nt).ret(null,\\\"name\\\",\\\"params\\\"),ot=c(\\\"true\\\").or(c(\\\"false\\\")).or(c(\\\"null\\\")).or(c(\\\"undefined\\\")).or(c(\\\"_thread\\\")).or(c(\\\"this\\\")).or(c(\\\"arguments\\\")).ret(function(t){return t.type=\\\"reservedConst\\\",t});z.element(l),z.element(ot),z.element(I),z.element(j),z.element(V),z.element(rt),z.element(it),z.element(H),z.element(Z),z.element(u(\\\"arylit\\\").firstTokens(\\\"[\\\")),z.element($);var st=0;function at(t,e,n){var r={type:\\\"infix\\\",left:t,op:e,right:n};return o.setRange(r),r.toString=function(){return\\\"(\\\"+t+e+n+\\\")\\\"},r}z.infixr(st,B),z.infixr(st,c(\\\"+=\\\")),z.infixr(st,c(\\\"-=\\\")),z.infixr(st,c(\\\"*=\\\")),z.infixr(st,c(\\\"/=\\\")),z.infixr(st,c(\\\"%=\\\")),z.infixr(st,c(\\\"|=\\\")),z.infixr(st,c(\\\"&=\\\")),st++,z.trifixr(st,c(\\\"?\\\"),c(\\\":\\\")),st++,z.infixl(st,C),st++,z.infixl(st,_),st++,z.infixl(st,A),st++,z.infixl(st,F),st++,z.infixl(st,T),st++,z.infix(st,c(\\\"instanceof\\\")),z.infix(st,c(\\\"is\\\")),z.infix(st,g),z.infix(st,v),z.infix(st,y),z.infix(st,b),z.infix(st,x),z.infix(st,w),z.infix(st,S),z.infix(st,E),st++,z.infixl(st,R),z.infixl(st,L),z.infixl(st,D),st++,z.postfix(st+3,c(\\\"++\\\")),z.postfix(st+3,c(\\\"--\\\")),z.infixl(st,k),z.infixl(st,P),st++,z.infixl(st,O),z.infixl(st,M),z.infixl(st,N),st++,z.prefix(st,c(\\\"typeof\\\")),z.prefix(st,c(\\\"__typeof\\\")),z.prefix(st,c(\\\"delete\\\")),z.prefix(st,c(\\\"++\\\")),z.prefix(st,c(\\\"--\\\")),z.prefix(st,c(\\\"+\\\")),z.prefix(st,c(\\\"-\\\")),z.prefix(st,c(\\\"!\\\")),z.prefix(st,c(\\\"~\\\")),st++,st++,z.postfix(st,et),z.postfix(st,J),z.postfix(st,G),z.mkInfixl(at),z.mkInfixr(at);var ut=z.build().setName(\\\"expr\\\").profile(),ct=u(\\\"stmt\\\").firstTokens();n(\\\"exprstmt\\\").ands(ut,c(\\\";\\\")).ret(\\\"expr\\\");n(\\\"compound\\\").ands(c(\\\"{\\\"),ct.rep0(),c(\\\"}\\\")).ret(null,\\\"stmts\\\");var ft=c(\\\"else\\\").and(ct).ret(U(1)),lt=(n(\\\"return\\\").ands(c(\\\"return\\\"),ut.opt(),c(\\\";\\\")).ret(null,\\\"value\\\"),n(\\\"if\\\").ands(c(\\\"if\\\"),c(\\\"(\\\"),ut,c(\\\")\\\"),ct,ft.opt()).ret(null,null,\\\"cond\\\",null,\\\"then\\\",\\\"_else\\\"),n(\\\"forin\\\").ands(c(\\\"var\\\").opt(),p.sep1(c(\\\",\\\"),!0),c(\\\"in\\\").or(c(\\\"of\\\")),ut).ret(\\\"isVar\\\",\\\"vars\\\",\\\"inof\\\",\\\"set\\\")),pt=n(\\\"normalFor\\\").ands(ct,ut.opt(),c(\\\";\\\"),ut.opt()).ret(\\\"init\\\",\\\"cond\\\",null,\\\"next\\\").or(lt),ht=(n(\\\"for\\\").ands(c(\\\"for\\\"),c(\\\"(\\\"),pt,c(\\\")\\\"),\\\"stmt\\\").ret(null,null,\\\"inFor\\\",null,\\\"loop\\\"),n(\\\"while\\\").ands(c(\\\"while\\\"),c(\\\"(\\\"),ut,c(\\\")\\\"),\\\"stmt\\\").ret(null,null,\\\"cond\\\",null,\\\"loop\\\"),n(\\\"do\\\").ands(c(\\\"do\\\"),\\\"stmt\\\",c(\\\"while\\\"),c(\\\"(\\\"),ut,c(\\\")\\\"),c(\\\";\\\")).ret(null,\\\"loop\\\",null,null,\\\"cond\\\",null,null),n(\\\"case\\\").ands(c(\\\"case\\\"),ut,c(\\\":\\\"),ct.rep0()).ret(null,\\\"value\\\",null,\\\"stmts\\\")),dt=n(\\\"default\\\").ands(c(\\\"default\\\"),c(\\\":\\\"),ct.rep0()).ret(null,null,\\\"stmts\\\"),mt=(n(\\\"switch\\\").ands(c(\\\"switch\\\"),c(\\\"(\\\"),ut,c(\\\")\\\"),c(\\\"{\\\"),ht.rep1(),dt.opt(),c(\\\"}\\\")).ret(null,null,\\\"value\\\",null,null,\\\"cases\\\",\\\"defs\\\"),n(\\\"break\\\").ands(c(\\\"break\\\"),c(\\\";\\\")).ret(\\\"brk\\\"),n(\\\"continue\\\").ands(c(\\\"continue\\\"),c(\\\";\\\")).ret(\\\"cont\\\"),n(\\\"finally\\\").ands(c(\\\"finally\\\"),\\\"stmt\\\").ret(null,\\\"stmt\\\"),n(\\\"catch\\\").ands(c(\\\"catch\\\"),c(\\\"(\\\"),p,c(\\\")\\\"),\\\"stmt\\\").ret(null,null,\\\"name\\\",null,\\\"stmt\\\"),n(\\\"catches\\\").ors(\\\"catch\\\",\\\"finally\\\")),gt=(n(\\\"try\\\").ands(c(\\\"try\\\"),\\\"stmt\\\",mt.rep1()).ret(null,\\\"stmt\\\",\\\"catches\\\"),n(\\\"throw\\\").ands(c(\\\"throw\\\"),ut,c(\\\";\\\")).ret(null,\\\"ex\\\"),n(\\\"typeExpr\\\").ands(p).ret(\\\"name\\\")),vt=n(\\\"typeDecl\\\").ands(c(\\\":\\\"),gt).ret(null,\\\"vtype\\\"),yt=n(\\\"varDecl\\\").ands(p,vt.opt(),c(\\\"=\\\").and(ut).ret(U(1)).opt()).ret(\\\"name\\\",\\\"typeDecl\\\",\\\"value\\\"),bt=(n(\\\"varsDecl\\\").ands(c(\\\"var\\\"),yt.sep1(c(\\\",\\\"),!0),c(\\\";\\\")).ret(null,\\\"decls\\\"),n(\\\"paramDecl\\\").ands(p,vt.opt()).ret(\\\"name\\\",\\\"typeDecl\\\")),xt=n(\\\"paramDecls\\\").ands(c(\\\"(\\\"),W(bt),c(\\\")\\\")).ret(null,\\\"params\\\"),wt=n(\\\"setterDecl\\\").ands(c(\\\"=\\\"),bt).ret(null,\\\"value\\\");n(\\\"funcDeclHead\\\").ands(c(\\\"nowait\\\").opt(),c(\\\"function\\\").or(c(\\\"fiber\\\")).or(c(\\\"tk_constructor\\\")).or(c(\\\"\\\\\\\\\\\")).opt(),p.or(c(\\\"new\\\")),wt.opt(),xt.opt(),vt.opt()).ret(\\\"nowait\\\",\\\"ftype\\\",\\\"name\\\",\\\"setter\\\",\\\"params\\\",\\\"rtype\\\");n(\\\"funcDecl\\\").ands(\\\"funcDeclHead\\\",\\\"compound\\\").ret(\\\"head\\\",\\\"body\\\"),n(\\\"nativeDecl\\\").ands(c(\\\"native\\\"),p,c(\\\";\\\")).ret(null,\\\"name\\\"),n(\\\"ifWait\\\").ands(c(\\\"ifwait\\\"),\\\"stmt\\\",ft.opt()).ret(null,\\\"then\\\",\\\"_else\\\"),n(\\\"empty\\\").ands(c(\\\";\\\")).ret(null);ct=n(\\\"stmt\\\").ors(\\\"return\\\",\\\"if\\\",\\\"for\\\",\\\"while\\\",\\\"do\\\",\\\"break\\\",\\\"continue\\\",\\\"switch\\\",\\\"ifWait\\\",\\\"try\\\",\\\"throw\\\",\\\"nativeDecl\\\",\\\"funcDecl\\\",\\\"compound\\\",\\\"exprstmt\\\",\\\"varsDecl\\\",\\\"empty\\\"),n(\\\"funcExprHead\\\").ands(c(\\\"function\\\").or(c(\\\"\\\\\\\\\\\")),p.opt(),xt.opt()).ret(null,\\\"name\\\",\\\"params\\\");n(\\\"funcExpr\\\").ands(\\\"funcExprHead\\\",\\\"compound\\\").ret(\\\"head\\\",\\\"body\\\");var St=n(\\\"jsonElem\\\").ands(p.or(j),c(\\\":\\\").or(c(\\\"=\\\")).and(ut).ret(function(t,e){return e}).opt()).ret(\\\"key\\\",\\\"value\\\"),Et=(n(\\\"objlit\\\").ands(c(\\\"{\\\"),W(St),c(\\\"}\\\")).ret(null,\\\"elems\\\"),n(\\\"arylit\\\").ands(c(\\\"[\\\"),W(ut),c(\\\"]\\\")).ret(null,\\\"elems\\\"),n(\\\"extends\\\").ands(c(\\\"extends\\\"),p.or(c(\\\"null\\\")),c(\\\";\\\")).ret(null,\\\"superclassName\\\")),_t=n(\\\"includes\\\").ands(c(\\\"includes\\\"),p.sep1(c(\\\",\\\"),!0),c(\\\";\\\")).ret(null,\\\"includeClassNames\\\"),Ct=n(\\\"program\\\").ands(Et.opt(),_t.opt(),ct.rep0(),o.TokensParser.eof).ret(\\\"ext\\\",\\\"incl\\\",\\\"stmts\\\");for(var Tt in n.defs)n.defs[Tt].profile();return e.parse=function(e){let n;n=\\\"string\\\"==typeof e?e:e.text(),n+=\\\"\\\\n\\\";var r=i.parse(n);if(!r.isSuccess())throw a(\\\"(Token)\\\",e,r.src.maxPos);var o=r.result[0],s=t.TokensParser.parse(Ct,o);if(s.isSuccess())return s.result[0];var u=o[s.src.maxPos],c=u?u.pos+u.len:n.length;throw a(\\\"\\\",e,c)},e.extension=\\\"tonyu\\\",e}()},{\\\"../runtime/TError\\\":26,\\\"./ExpressionParser2\\\":4,\\\"./Grammar\\\":5,\\\"./IndentBuffer\\\":6,\\\"./parser\\\":17,\\\"./tonyu2_token\\\":19}],17:[function(t,e,n){e.exports=function(){function t(t,e){var n;for(n in e)t[n]=e[n];return t}var e={consoleBuffer:\\\"\\\",options:{traceTap:!1,optimizeFirst:!0,profile:!1,verboseFirst:!1,traceFirstTbl:!1},Parser:n,StringParser:o,nc:r};function n(t){e.options.traceTap?this.parse=function(e){console.log(\\\"tap: name=\\\"+this.name+\\\"  pos=\\\"+(e?e.pos:\\\"?\\\"));var n=t.apply(this,[e]),r=\\\"NOIMG\\\";return n.src&&n.src.str&&(r=n.src.str.substring(n.pos-3,n.pos)+\\\"^\\\"+n.src.str.substring(n.pos,n.pos+3)),n.src&&n.src.tokens&&(r=n.src.tokens[n.pos-1]+\\\"[\\\"+n.src.tokens[n.pos]+\\\"]\\\"+n.src.tokens[n.pos+1]),console.log(\\\"/tap: name=\\\"+this.name+\\\" pos=\\\"+(e?e.pos:\\\"?\\\")+\\\"->\\\"+(n?n.pos:\\\"?\\\")+\\\" \\\"+r+\\\" res=\\\"+(n?n.success:\\\"?\\\")),n}:this.parse=t}function r(t,e){if(null==t)throw e+\\\" is null!\\\";return t}function i(t,e){null!=t&&(this.src={maxPos:0,global:e},\\\"string\\\"==typeof t&&(this.src.str=t),t instanceof Array&&(this.src.tokens=t),this.pos=0,this.result=[],this.success=!0)}e.dispTbl=function(t){var e=\\\"\\\",n={};if(!t)return e;for(var r in t){const e=t[r].name;n[e]||(n[e]=\\\"\\\"),n[e]+=r}for(let t in n)e+=n[t]+\\\"->\\\"+t+\\\",\\\";return e},n.create=function(t){return new n(t)},e.create=n.create,t(n.prototype,{except:function(t){return this.ret(n.create(function(e){return t.apply({},e.result)&&(e.success=!1),e}).setName(\\\"(except \\\"+this.name+\\\")\\\"))},noFollow:function(t){return r(t,\\\"p\\\"),this.ret(n.create(function(e){var n=t.parse(e);return e.success=!n.success,e}).setName(\\\"(\\\"+this.name+\\\" noFollow \\\"+t.name+\\\")\\\"))},andNoUnify:function(t){r(t,\\\"next\\\");var e=this;return n.create(function(n){var r=e.parse(n);if(!r.success)return r;var i=t.parse(r);return i.success&&(i.result=r.result.concat(i.result)),i}).setName(\\\"(\\\"+this.name+\\\" \\\"+t.name+\\\")\\\")},and:function(t){var r=this.andNoUnify(t);if(!this._first)return r;var i=this._first.tbl,o={};for(var s in i)o[s]=i[s].andNoUnify(t);return(r=n.fromFirst(this._first.space,o)).setName(\\\"(\\\"+this.name+\\\" >> \\\"+t.name+\\\")\\\"),e.options.verboseFirst&&console.log(\\\"Created aunify name=\\\"+r.name+\\\" tbl=\\\"+e.dispTbl(o)),r},retNoUnify:function(t){var e,r=this;return e=\\\"function\\\"==typeof t?n.create(function(e){var n=e.clone();return n.result=[t.apply({},e.result)],n}).setName(\\\"retfunc\\\"):t,n.create(function(t){var n=r.parse(t);return n.success?e.parse(n):n}).setName(\\\"(\\\"+this.name+\\\" >= \\\"+e.name+\\\")\\\")},ret:function(t){if(!this._first)return this.retNoUnify(t);var r=this._first.tbl,i={};for(var o in r)i[o]=r[o].retNoUnify(t);const s=n.fromFirst(this._first.space,i);return s.setName(\\\"(\\\"+this.name+\\\" >>= \\\"+t.name+\\\")\\\"),e.options.verboseFirst&&console.log(\\\"Created runify name=\\\"+s.name+\\\" tbl=\\\"+e.dispTbl(i)),s},first:function(t,r){if(!e.options.optimizeFirst)return this;if(null==t)throw\\\"Space is null2!\\\";if(\\\"string\\\"==typeof r){for(var i={},o=0;o<r.length;o++)i[r.substring(o,o+1)]=this;return n.fromFirst(t,i).setName(\\\"(fst \\\"+this.name+\\\")\\\")}if(null==r)return n.fromFirst(t,{ALL:this}).setName(\\\"(fst \\\"+this.name+\\\")\\\");if(\\\"object\\\"==typeof r)throw\\\"this._first={space: space, tbl:ct}\\\";return this},firstTokens:function(t){if(!e.options.optimizeFirst)return this;\\\"string\\\"==typeof t&&(t=[t]);var r={};if(t){var i=this;t.forEach(function(t){r[t]=i})}else r.ALL=this;return n.fromFirstTokens(r).setName(\\\"(fstT \\\"+this.name+\\\")\\\")},unifyFirst:function(r){function i(t,e){return t?e?t.orNoUnify(e).checkTbl():t:e}var o={};this.checkTbl(),r.checkTbl(),t(o,this._first.tbl),function(){var t=r._first.tbl,e={};for(let t in o)e[t]=1;for(let n in t)e[n]=1;delete e.ALL,(o.ALL||t.ALL)&&(o.ALL=i(o.ALL,t.ALL));for(let n in e)o[n]&&t[n]?o[n]=i(o[n],t[n]):o[n]&&!t[n]?o[n]=i(o[n],t.ALL):!o[n]&&t[n]&&(o[n]=i(o.ALL,t[n]))}();var s=n.fromFirst(this._first.space,o).setName(\\\"(\\\"+this.name+\\\")U(\\\"+r.name+\\\")\\\");return e.options.verboseFirst&&console.log(\\\"Created unify name=\\\"+s.name+\\\" tbl=\\\"+e.dispTbl(o)),s},or:function(t){return r(t,\\\"other\\\"),this._first&&t._first&&this._first.space&&this._first.space===t._first.space?this.unifyFirst(t):(e.options.verboseFirst&&console.log(\\\"Cannot unify\\\"+this.name+\\\" || \\\"+t.name+\\\" \\\"+this._first+\\\" - \\\"+t._first),this.orNoUnify(t))},orNoUnify:function(t){var e=this,r=n.create(function(n){var r=e.parse(n);return r.success?r:t.parse(n)});return r.name=\\\"(\\\"+this.name+\\\")|(\\\"+t.name+\\\")\\\",r},setName:function(t){return this.name=t,this._first,this},profile:function(t){return e.options.profile&&(this.parse=this.parse.profile(t||this.name)),this},repN:function(t){var e=this;return t||(t=0),n.create(function(n){for(var r=n,i=[];;){var o,s=e.parse(r);if(!s.success)return i.length>=t?((o=r.clone()).result=[i],o.success=!0,o):((o=n.clone()).success=!1,o);i.push(s.result[0]),r=s}}).setName(\\\"(\\\"+e.name+\\\" * \\\"+t+\\\")\\\")},rep0:function(){return this.repN(0)},rep1:function(){return this.repN(1)},opt:function(){var t=this;return n.create(function(e){var n=t.parse(e);return n.success?n:((e=e.clone()).success=!0,e.result=[null],e)}).setName(\\\"(\\\"+t.name+\\\")?\\\")},sep1:function(t,e){r(this,\\\"value\\\"),r(t,\\\"sep\\\");var n=t.and(this).ret(function(t,n){return e?n:{sep:t,value:n}});return this.and(n.rep0()).ret(function(t,n){var r;if(e){var i=[t];for(r in n)i.push(n[r]);return i}return{head:t,tails:n}}).setName(\\\"(sep1 \\\"+this.name+\\\"~~\\\"+t.name+\\\")\\\")},sep0:function(t){return this.sep1(t,!0).opt().ret(function(t){return t||[]})},tap:function(t){return this},retN:function(t){return this.ret(function(){return arguments[t]})},parseStr:function(t,e){var n=new i(t,e);return this.parse(n)},checkTbl:function(){if(!this._first)return this;var t=this._first.tbl;for(var e in t)if(!t[e].parse)throw this.name+\\\": tbl.\\\"+e+\\\" is not a parser :\\\"+t[e];return this}}),t(i.prototype,{clone:function(){var t=new i;return t.src=this.src,t.pos=this.pos,t.result=this.result.slice(),t.success=this.success,t},updateMaxPos:function(t){t>this.src.maxPos&&(this.src.maxPos=t)},isSuccess:function(){return this.success},getGlobal:function(){return this.src.global||(this.src.global={}),this.src.global}}),n.fromFirst=function(t,r){if(\\\"TOKEN\\\"==t)return n.fromFirstTokens(r);var i=n.create(function(n){var i=t.parse(n),o=i.src.str.substring(i.pos,i.pos+1);return e.options.traceFirstTbl&&console.log(this.name+\\\": first=\\\"+o+\\\" tbl=\\\"+(r[o]?r[o].name:\\\"-\\\")),r[o]?r[o].parse(i):r.ALL?r.ALL.parse(i):(i.success=!1,i)});return i._first={space:t,tbl:r},i.checkTbl(),i},n.fromFirstTokens=function(t){var r=n.create(function(n){var r=n.src.tokens[n.pos],i=r?r.type:null;return e.options.traceFirstTbl&&console.log(this.name+\\\": firstT=\\\"+i+\\\" tbl=\\\"+(t[i]?t[i].name:\\\"-\\\")),null!=i&&t[i]?t[i].parse(n):t.ALL?t.ALL.parse(n):(n.success=!1,n)});return r._first={space:\\\"TOKEN\\\",tbl:t},r.checkTbl(),r};var o={empty:n.create(function(t){var e=t.clone();return e.success=!0,e.result=[null],e}).setName(\\\"E\\\"),fail:n.create(function(t){return t.success=!1,t}).setName(\\\"F\\\"),str:function(t){return this.strLike(function(e,n){return e.substring(n,n+t.length)===t?{len:t.length}:null}).setName(t)},reg:function(t){return(t+\\\"\\\").match(/^\\\\/\\\\^/)||console.log(\\\"Waring regex should have ^ at the head:\\\"+t),this.strLike(function(e,n){var r=t.exec(e.substring(n));return r?(r.len=r[0].length,r):null}).setName(t+\\\"\\\")},strLike:function(r){return n.create(function(n){var i=n.src.str;if(null==i)throw\\\"strLike: str is null!\\\";var o=n.pos,s=r(i,o,n);if(e.options.traceToken&&console.log(\\\"pos=\\\"+o+\\\" r=\\\"+s),s){e.options.traceToken&&console.log(\\\"str:succ\\\"),s.pos=o,s.src=n.src;var a=n.clone();return t(a,{pos:o+s.len,success:!0,result:[s]}),n.updateMaxPos(a.pos),a}return e.options.traceToken&&console.log(\\\"str:fail\\\"),n.success=!1,n}).setName(\\\"STRLIKE\\\")},parse:function(t,e,n){var r=new i(e,n);return t.parse(r)}};o.eof=o.strLike(function(t,e){return e==t.length?{len:0}:null}).setName(\\\"EOF\\\"),e.StringParser=o;var s={token:function(t){return n.create(function(e){var n=e.src.tokens[e.pos];return e.success=!1,n?(n.type==t&&((e=e.clone()).updateMaxPos(e.pos),e.pos++,e.success=!0,e.result=[n]),e):e}).setName(t).firstTokens(t)},parse:function(t,e,n){var r=new i(e,n);return t.parse(r)},eof:n.create(function(t){var e=t.pos>=t.src.tokens.length;return t.success=e,e&&((t=t.clone()).result=[{type:\\\"EOF\\\"}]),t}).setName(\\\"EOT\\\")};return e.TokensParser=s,e.lazy=function(t){var e=null;return n.create(function(n){if(e||(e=t()),!e)throw t+\\\" returned null!\\\";return this.name=t.name,e.parse(n)}).setName(\\\"LZ\\\")},e.addRange=function(t,e){if(null==e)return t;if(\\\"number\\\"!=typeof t.pos)return t.pos=e.pos,t.len=e.len,t;var n=e.pos+e.len,r=t.pos+t.len;return e.pos<t.pos&&(t.pos=e.pos),n>r&&(t.len=n-t.pos),t},e.setRange=function(t){if(null!=t&&\\\"string\\\"!=typeof t&&\\\"number\\\"!=typeof t&&\\\"boolean\\\"!=typeof t){if(null!=e.getRange(t))return t;for(var n in t)if(t.hasOwnProperty(n)){var r=e.setRange(t[n]);e.addRange(t,r)}return t}},e.getRange=function(t){return null==t?null:\\\"number\\\"!=typeof t.pos?null:\\\"number\\\"==typeof t.len?t:null},e}()},{}],18:[function(t,e,n){var r,i;r=this,i=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p=\\\"\\\",n(0)}([function(t,e,n){e.SourceMapGenerator=n(1).SourceMapGenerator,e.SourceMapConsumer=n(7).SourceMapConsumer,e.SourceNode=n(10).SourceNode},function(t,e,n){var r=n(2),i=n(4),o=n(5).ArraySet,s=n(6).MappingList;function a(t){t||(t={}),this._file=i.getArg(t,\\\"file\\\",null),this._sourceRoot=i.getArg(t,\\\"sourceRoot\\\",null),this._skipValidation=i.getArg(t,\\\"skipValidation\\\",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(t){var e=t.sourceRoot,n=new a({file:t.file,sourceRoot:e});return t.eachMapping(function(t){var r={generated:{line:t.generatedLine,column:t.generatedColumn}};null!=t.source&&(r.source=t.source,null!=e&&(r.source=i.relative(e,r.source)),r.original={line:t.originalLine,column:t.originalColumn},null!=t.name&&(r.name=t.name)),n.addMapping(r)}),t.sources.forEach(function(e){var r=t.sourceContentFor(e);null!=r&&n.setSourceContent(e,r)}),n},a.prototype.addMapping=function(t){var e=i.getArg(t,\\\"generated\\\"),n=i.getArg(t,\\\"original\\\",null),r=i.getArg(t,\\\"source\\\",null),o=i.getArg(t,\\\"name\\\",null);this._skipValidation||this._validateMapping(e,n,r,o),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:o})},a.prototype.setSourceContent=function(t,e){var n=t;null!=this._sourceRoot&&(n=i.relative(this._sourceRoot,n)),null!=e?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(n)]=e):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(t,e,n){var r=e;if(null==e){if(null==t.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\\\\'s \\\"file\\\" property. Both were omitted.');r=t.file}var s=this._sourceRoot;null!=s&&(r=i.relative(s,r));var a=new o,u=new o;this._mappings.unsortedForEach(function(e){if(e.source===r&&null!=e.originalLine){var o=t.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=o.source&&(e.source=o.source,null!=n&&(e.source=i.join(n,e.source)),null!=s&&(e.source=i.relative(s,e.source)),e.originalLine=o.line,e.originalColumn=o.column,null!=o.name&&(e.name=o.name))}var c=e.source;null==c||a.has(c)||a.add(c);var f=e.name;null==f||u.has(f)||u.add(f)},this),this._sources=a,this._names=u,t.sources.forEach(function(e){var r=t.sourceContentFor(e);null!=r&&(null!=n&&(e=i.join(n,e)),null!=s&&(e=i.relative(s,e)),this.setSourceContent(e,r))},this)},a.prototype._validateMapping=function(t,e,n,r){if((!(t&&\\\"line\\\"in t&&\\\"column\\\"in t&&t.line>0&&t.column>=0)||e||n||r)&&!(t&&\\\"line\\\"in t&&\\\"column\\\"in t&&e&&\\\"line\\\"in e&&\\\"column\\\"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&n))throw new Error(\\\"Invalid mapping: \\\"+JSON.stringify({generated:t,source:n,original:e,name:r}))},a.prototype._serializeMappings=function(){for(var t,e,n,o,s=0,a=1,u=0,c=0,f=0,l=0,p=\\\"\\\",h=this._mappings.toArray(),d=0,m=h.length;d<m;d++){if(t=\\\"\\\",(e=h[d]).generatedLine!==a)for(s=0;e.generatedLine!==a;)t+=\\\";\\\",a++;else if(d>0){if(!i.compareByGeneratedPositionsInflated(e,h[d-1]))continue;t+=\\\",\\\"}t+=r.encode(e.generatedColumn-s),s=e.generatedColumn,null!=e.source&&(o=this._sources.indexOf(e.source),t+=r.encode(o-l),l=o,t+=r.encode(e.originalLine-1-c),c=e.originalLine-1,t+=r.encode(e.originalColumn-u),u=e.originalColumn,null!=e.name&&(n=this._names.indexOf(e.name),t+=r.encode(n-f),f=n)),p+=t}return p},a.prototype._generateSourcesContent=function(t,e){return t.map(function(t){if(!this._sourcesContents)return null;null!=e&&(t=i.relative(e,t));var n=i.toSetString(t);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},a.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(t.file=this._file),null!=this._sourceRoot&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.SourceMapGenerator=a},function(t,e,n){var r=n(3);e.encode=function(t){var e,n=\\\"\\\",i=function(t){return t<0?1+(-t<<1):0+(t<<1)}(t);do{e=31&i,(i>>>=5)>0&&(e|=32),n+=r.encode(e)}while(i>0);return n},e.decode=function(t,e,n){var i,o,s,a,u=t.length,c=0,f=0;do{if(e>=u)throw new Error(\\\"Expected more digits in base 64 VLQ value.\\\");if(-1===(o=r.decode(t.charCodeAt(e++))))throw new Error(\\\"Invalid base64 digit: \\\"+t.charAt(e-1));i=!!(32&o),c+=(o&=31)<<f,f+=5}while(i);n.value=(a=(s=c)>>1,1==(1&s)?-a:a),n.rest=e}},function(t,e){var n=\\\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\\\".split(\\\"\\\");e.encode=function(t){if(0<=t&&t<n.length)return n[t];throw new TypeError(\\\"Must be between 0 and 63: \\\"+t)},e.decode=function(t){return 65<=t&&t<=90?t-65:97<=t&&t<=122?t-97+26:48<=t&&t<=57?t-48+52:43==t?62:47==t?63:-1}},function(t,e){e.getArg=function(t,e,n){if(e in t)return t[e];if(3===arguments.length)return n;throw new Error('\\\"'+e+'\\\" is a required argument.')};var n=/^(?:([\\\\w+\\\\-.]+):)?\\\\/\\\\/(?:(\\\\w+:\\\\w+)@)?([\\\\w.]*)(?::(\\\\d+))?(\\\\S*)$/,r=/^data:.+\\\\,.+$/;function i(t){var e=t.match(n);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function o(t){var e=\\\"\\\";return t.scheme&&(e+=t.scheme+\\\":\\\"),e+=\\\"//\\\",t.auth&&(e+=t.auth+\\\"@\\\"),t.host&&(e+=t.host),t.port&&(e+=\\\":\\\"+t.port),t.path&&(e+=t.path),e}function s(t){var n=t,r=i(t);if(r){if(!r.path)return t;n=r.path}for(var s,a=e.isAbsolute(n),u=n.split(/\\\\/+/),c=0,f=u.length-1;f>=0;f--)\\\".\\\"===(s=u[f])?u.splice(f,1):\\\"..\\\"===s?c++:c>0&&(\\\"\\\"===s?(u.splice(f+1,c),c=0):(u.splice(f,2),c--));return\\\"\\\"===(n=u.join(\\\"/\\\"))&&(n=a?\\\"/\\\":\\\".\\\"),r?(r.path=n,o(r)):n}e.urlParse=i,e.urlGenerate=o,e.normalize=s,e.join=function(t,e){\\\"\\\"===t&&(t=\\\".\\\"),\\\"\\\"===e&&(e=\\\".\\\");var n=i(e),a=i(t);if(a&&(t=a.path||\\\"/\\\"),n&&!n.scheme)return a&&(n.scheme=a.scheme),o(n);if(n||e.match(r))return e;if(a&&!a.host&&!a.path)return a.host=e,o(a);var u=\\\"/\\\"===e.charAt(0)?e:s(t.replace(/\\\\/+$/,\\\"\\\")+\\\"/\\\"+e);return a?(a.path=u,o(a)):u},e.isAbsolute=function(t){return\\\"/\\\"===t.charAt(0)||!!t.match(n)},e.relative=function(t,e){\\\"\\\"===t&&(t=\\\".\\\"),t=t.replace(/\\\\/$/,\\\"\\\");for(var n=0;0!==e.indexOf(t+\\\"/\\\");){var r=t.lastIndexOf(\\\"/\\\");if(r<0)return e;if((t=t.slice(0,r)).match(/^([^\\\\/]+:\\\\/)?\\\\/*$/))return e;++n}return Array(n+1).join(\\\"../\\\")+e.substr(t.length+1)};var a=!(\\\"__proto__\\\"in Object.create(null));function u(t){return t}function c(t){if(!t)return!1;var e=t.length;if(e<9)return!1;if(95!==t.charCodeAt(e-1)||95!==t.charCodeAt(e-2)||111!==t.charCodeAt(e-3)||116!==t.charCodeAt(e-4)||111!==t.charCodeAt(e-5)||114!==t.charCodeAt(e-6)||112!==t.charCodeAt(e-7)||95!==t.charCodeAt(e-8)||95!==t.charCodeAt(e-9))return!1;for(var n=e-10;n>=0;n--)if(36!==t.charCodeAt(n))return!1;return!0}function f(t,e){return t===e?0:t>e?1:-1}e.toSetString=a?u:function(t){return c(t)?\\\"$\\\"+t:t},e.fromSetString=a?u:function(t){return c(t)?t.slice(1):t},e.compareByOriginalPositions=function(t,e,n){var r=t.source-e.source;return 0!==r?r:0!=(r=t.originalLine-e.originalLine)?r:0!=(r=t.originalColumn-e.originalColumn)||n?r:0!=(r=t.generatedColumn-e.generatedColumn)?r:0!=(r=t.generatedLine-e.generatedLine)?r:t.name-e.name},e.compareByGeneratedPositionsDeflated=function(t,e,n){var r=t.generatedLine-e.generatedLine;return 0!==r?r:0!=(r=t.generatedColumn-e.generatedColumn)||n?r:0!=(r=t.source-e.source)?r:0!=(r=t.originalLine-e.originalLine)?r:0!=(r=t.originalColumn-e.originalColumn)?r:t.name-e.name},e.compareByGeneratedPositionsInflated=function(t,e){var n=t.generatedLine-e.generatedLine;return 0!==n?n:0!=(n=t.generatedColumn-e.generatedColumn)?n:0!==(n=f(t.source,e.source))?n:0!=(n=t.originalLine-e.originalLine)?n:0!=(n=t.originalColumn-e.originalColumn)?n:f(t.name,e.name)}},function(t,e,n){var r=n(4),i=Object.prototype.hasOwnProperty;function o(){this._array=[],this._set=Object.create(null)}o.fromArray=function(t,e){for(var n=new o,r=0,i=t.length;r<i;r++)n.add(t[r],e);return n},o.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},o.prototype.add=function(t,e){var n=r.toSetString(t),o=i.call(this._set,n),s=this._array.length;o&&!e||this._array.push(t),o||(this._set[n]=s)},o.prototype.has=function(t){var e=r.toSetString(t);return i.call(this._set,e)},o.prototype.indexOf=function(t){var e=r.toSetString(t);if(i.call(this._set,e))return this._set[e];throw new Error('\\\"'+t+'\\\" is not in the set.')},o.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error(\\\"No element indexed by \\\"+t)},o.prototype.toArray=function(){return this._array.slice()},e.ArraySet=o},function(t,e,n){var r=n(4);function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(t,e){this._array.forEach(t,e)},i.prototype.add=function(t){var e,n,i,o,s,a;e=this._last,n=t,i=e.generatedLine,o=n.generatedLine,s=e.generatedColumn,a=n.generatedColumn,o>i||o==i&&a>=s||r.compareByGeneratedPositionsInflated(e,n)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e.MappingList=i},function(t,e,n){var r=n(4),i=n(8),o=n(5).ArraySet,s=n(2),a=n(9).quickSort;function u(t){var e=t;return\\\"string\\\"==typeof t&&(e=JSON.parse(t.replace(/^\\\\)\\\\]\\\\}'/,\\\"\\\"))),null!=e.sections?new l(e):new c(e)}function c(t){var e=t;\\\"string\\\"==typeof t&&(e=JSON.parse(t.replace(/^\\\\)\\\\]\\\\}'/,\\\"\\\")));var n=r.getArg(e,\\\"version\\\"),i=r.getArg(e,\\\"sources\\\"),s=r.getArg(e,\\\"names\\\",[]),a=r.getArg(e,\\\"sourceRoot\\\",null),u=r.getArg(e,\\\"sourcesContent\\\",null),c=r.getArg(e,\\\"mappings\\\"),f=r.getArg(e,\\\"file\\\",null);if(n!=this._version)throw new Error(\\\"Unsupported version: \\\"+n);i=i.map(String).map(r.normalize).map(function(t){return a&&r.isAbsolute(a)&&r.isAbsolute(t)?r.relative(a,t):t}),this._names=o.fromArray(s.map(String),!0),this._sources=o.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=u,this._mappings=c,this.file=f}function f(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function l(t){var e=t;\\\"string\\\"==typeof t&&(e=JSON.parse(t.replace(/^\\\\)\\\\]\\\\}'/,\\\"\\\")));var n=r.getArg(e,\\\"version\\\"),i=r.getArg(e,\\\"sections\\\");if(n!=this._version)throw new Error(\\\"Unsupported version: \\\"+n);this._sources=new o,this._names=new o;var s={line:-1,column:0};this._sections=i.map(function(t){if(t.url)throw new Error(\\\"Support for url field in sections not implemented.\\\");var e=r.getArg(t,\\\"offset\\\"),n=r.getArg(e,\\\"line\\\"),i=r.getArg(e,\\\"column\\\");if(n<s.line||n===s.line&&i<s.column)throw new Error(\\\"Section offsets must be ordered and non-overlapping.\\\");return s=e,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new u(r.getArg(t,\\\"map\\\"))}})}u.fromSourceMap=function(t){return c.fromSourceMap(t)},u.prototype._version=3,u.prototype.__generatedMappings=null,Object.defineProperty(u.prototype,\\\"_generatedMappings\\\",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),u.prototype.__originalMappings=null,Object.defineProperty(u.prototype,\\\"_originalMappings\\\",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),u.prototype._charIsMappingSeparator=function(t,e){var n=t.charAt(e);return\\\";\\\"===n||\\\",\\\"===n},u.prototype._parseMappings=function(t,e){throw new Error(\\\"Subclasses must implement _parseMappings\\\")},u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.prototype.eachMapping=function(t,e,n){var i,o=e||null;switch(n||u.GENERATED_ORDER){case u.GENERATED_ORDER:i=this._generatedMappings;break;case u.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error(\\\"Unknown order of iteration.\\\")}var s=this.sourceRoot;i.map(function(t){var e=null===t.source?null:this._sources.at(t.source);return null!=e&&null!=s&&(e=r.join(s,e)),{source:e,generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}},this).forEach(t,o)},u.prototype.allGeneratedPositionsFor=function(t){var e=r.getArg(t,\\\"line\\\"),n={source:r.getArg(t,\\\"source\\\"),originalLine:e,originalColumn:r.getArg(t,\\\"column\\\",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var o=[],s=this._findMapping(n,this._originalMappings,\\\"originalLine\\\",\\\"originalColumn\\\",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===t.column)for(var u=a.originalLine;a&&a.originalLine===u;)o.push({line:r.getArg(a,\\\"generatedLine\\\",null),column:r.getArg(a,\\\"generatedColumn\\\",null),lastColumn:r.getArg(a,\\\"lastGeneratedColumn\\\",null)}),a=this._originalMappings[++s];else for(var c=a.originalColumn;a&&a.originalLine===e&&a.originalColumn==c;)o.push({line:r.getArg(a,\\\"generatedLine\\\",null),column:r.getArg(a,\\\"generatedColumn\\\",null),lastColumn:r.getArg(a,\\\"lastGeneratedColumn\\\",null)}),a=this._originalMappings[++s]}return o},e.SourceMapConsumer=u,c.prototype=Object.create(u.prototype),c.prototype.consumer=u,c.fromSourceMap=function(t){var e=Object.create(c.prototype),n=e._names=o.fromArray(t._names.toArray(),!0),i=e._sources=o.fromArray(t._sources.toArray(),!0);e.sourceRoot=t._sourceRoot,e.sourcesContent=t._generateSourcesContent(e._sources.toArray(),e.sourceRoot),e.file=t._file;for(var s=t._mappings.toArray().slice(),u=e.__generatedMappings=[],l=e.__originalMappings=[],p=0,h=s.length;p<h;p++){var d=s[p],m=new f;m.generatedLine=d.generatedLine,m.generatedColumn=d.generatedColumn,d.source&&(m.source=i.indexOf(d.source),m.originalLine=d.originalLine,m.originalColumn=d.originalColumn,d.name&&(m.name=n.indexOf(d.name)),l.push(m)),u.push(m)}return a(e.__originalMappings,r.compareByOriginalPositions),e},c.prototype._version=3,Object.defineProperty(c.prototype,\\\"sources\\\",{get:function(){return this._sources.toArray().map(function(t){return null!=this.sourceRoot?r.join(this.sourceRoot,t):t},this)}}),c.prototype._parseMappings=function(t,e){for(var n,i,o,u,c,l=1,p=0,h=0,d=0,m=0,g=0,v=t.length,y=0,b={},x={},w=[],S=[];y<v;)if(\\\";\\\"===t.charAt(y))l++,y++,p=0;else if(\\\",\\\"===t.charAt(y))y++;else{for((n=new f).generatedLine=l,u=y;u<v&&!this._charIsMappingSeparator(t,u);u++);if(o=b[i=t.slice(y,u)])y+=i.length;else{for(o=[];y<u;)s.decode(t,y,x),c=x.value,y=x.rest,o.push(c);if(2===o.length)throw new Error(\\\"Found a source, but no line and column\\\");if(3===o.length)throw new Error(\\\"Found a source and line, but no column\\\");b[i]=o}n.generatedColumn=p+o[0],p=n.generatedColumn,o.length>1&&(n.source=m+o[1],m+=o[1],n.originalLine=h+o[2],h=n.originalLine,n.originalLine+=1,n.originalColumn=d+o[3],d=n.originalColumn,o.length>4&&(n.name=g+o[4],g+=o[4])),S.push(n),\\\"number\\\"==typeof n.originalLine&&w.push(n)}a(S,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,a(w,r.compareByOriginalPositions),this.__originalMappings=w},c.prototype._findMapping=function(t,e,n,r,o,s){if(t[n]<=0)throw new TypeError(\\\"Line must be greater than or equal to 1, got \\\"+t[n]);if(t[r]<0)throw new TypeError(\\\"Column must be greater than or equal to 0, got \\\"+t[r]);return i.search(t,e,o,s)},c.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var e=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var n=this._generatedMappings[t+1];if(e.generatedLine===n.generatedLine){e.lastGeneratedColumn=n.generatedColumn-1;continue}}e.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(t){var e={generatedLine:r.getArg(t,\\\"line\\\"),generatedColumn:r.getArg(t,\\\"column\\\")},n=this._findMapping(e,this._generatedMappings,\\\"generatedLine\\\",\\\"generatedColumn\\\",r.compareByGeneratedPositionsDeflated,r.getArg(t,\\\"bias\\\",u.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===e.generatedLine){var o=r.getArg(i,\\\"source\\\",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=r.join(this.sourceRoot,o)));var s=r.getArg(i,\\\"name\\\",null);return null!==s&&(s=this._names.at(s)),{source:o,line:r.getArg(i,\\\"originalLine\\\",null),column:r.getArg(i,\\\"originalColumn\\\",null),name:s}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return null==t}))},c.prototype.sourceContentFor=function(t,e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var i=t.replace(/^file:\\\\/\\\\//,\\\"\\\");if(\\\"file\\\"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||\\\"/\\\"==n.path)&&this._sources.has(\\\"/\\\"+t))return this.sourcesContent[this._sources.indexOf(\\\"/\\\"+t)]}if(e)return null;throw new Error('\\\"'+t+'\\\" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(t){var e=r.getArg(t,\\\"source\\\");if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),!this._sources.has(e))return{line:null,column:null,lastColumn:null};var n={source:e=this._sources.indexOf(e),originalLine:r.getArg(t,\\\"line\\\"),originalColumn:r.getArg(t,\\\"column\\\")},i=this._findMapping(n,this._originalMappings,\\\"originalLine\\\",\\\"originalColumn\\\",r.compareByOriginalPositions,r.getArg(t,\\\"bias\\\",u.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:r.getArg(o,\\\"generatedLine\\\",null),column:r.getArg(o,\\\"generatedColumn\\\",null),lastColumn:r.getArg(o,\\\"lastGeneratedColumn\\\",null)}}return{line:null,column:null,lastColumn:null}},e.BasicSourceMapConsumer=c,l.prototype=Object.create(u.prototype),l.prototype.constructor=u,l.prototype._version=3,Object.defineProperty(l.prototype,\\\"sources\\\",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t}}),l.prototype.originalPositionFor=function(t){var e={generatedLine:r.getArg(t,\\\"line\\\"),generatedColumn:r.getArg(t,\\\"column\\\")},n=i.search(e,this._sections,function(t,e){var n=t.generatedLine-e.generatedOffset.generatedLine;return n||t.generatedColumn-e.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:e.generatedLine-(o.generatedOffset.generatedLine-1),column:e.generatedColumn-(o.generatedOffset.generatedLine===e.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})},l.prototype.sourceContentFor=function(t,e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(t,!0);if(r)return r}if(e)return null;throw new Error('\\\"'+t+'\\\" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(t){for(var e=0;e<this._sections.length;e++){var n=this._sections[e];if(-1!==n.consumer.sources.indexOf(r.getArg(t,\\\"source\\\"))){var i=n.consumer.generatedPositionFor(t);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},l.prototype._parseMappings=function(t,e){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var u=o[s],c=i.consumer._sources.at(u.source);null!==i.consumer.sourceRoot&&(c=r.join(i.consumer.sourceRoot,c)),this._sources.add(c),c=this._sources.indexOf(c);var f=i.consumer._names.at(u.name);this._names.add(f),f=this._names.indexOf(f);var l={source:c,generatedLine:u.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(i.generatedOffset.generatedLine===u.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:f};this.__generatedMappings.push(l),\\\"number\\\"==typeof l.originalLine&&this.__originalMappings.push(l)}a(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),a(this.__originalMappings,r.compareByOriginalPositions)},e.IndexedSourceMapConsumer=l},function(t,e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(t,n,r,i){if(0===n.length)return-1;var o=function t(n,r,i,o,s,a){var u=Math.floor((r-n)/2)+n,c=s(i,o[u],!0);return 0===c?u:c>0?r-u>1?t(u,r,i,o,s,a):a==e.LEAST_UPPER_BOUND?r<o.length?r:-1:u:u-n>1?t(n,u,i,o,s,a):a==e.LEAST_UPPER_BOUND?u:n<0?-1:n}(-1,n.length,t,n,r,i||e.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&0===r(n[o],n[o-1],!0);)--o;return o}},function(t,e){function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e,i,o){if(i<o){var s=i-1;n(t,(f=i,l=o,Math.round(f+Math.random()*(l-f))),o);for(var a=t[o],u=i;u<o;u++)e(t[u],a)<=0&&n(t,s+=1,u);n(t,s+1,u);var c=s+1;r(t,e,i,c-1),r(t,e,c+1,o)}var f,l}e.quickSort=function(t,e){r(t,e,0,t.length-1)}},function(t,e,n){var r=n(1).SourceMapGenerator,i=n(4),o=/(\\\\r?\\\\n)/,s=\\\"$$$isSourceNode$$$\\\";function a(t,e,n,r,i){this.children=[],this.sourceContents={},this.line=null==t?null:t,this.column=null==e?null:e,this.source=null==n?null:n,this.name=null==i?null:i,this[s]=!0,null!=r&&this.add(r)}a.fromStringWithSourceMap=function(t,e,n){var r=new a,s=t.split(o),u=function(){return s.shift()+(s.shift()||\\\"\\\")},c=1,f=0,l=null;return e.eachMapping(function(t){if(null!==l){if(!(c<t.generatedLine)){var e=(n=s[0]).substr(0,t.generatedColumn-f);return s[0]=n.substr(t.generatedColumn-f),f=t.generatedColumn,p(l,e),void(l=t)}p(l,u()),c++,f=0}for(;c<t.generatedLine;)r.add(u()),c++;if(f<t.generatedColumn){var n=s[0];r.add(n.substr(0,t.generatedColumn)),s[0]=n.substr(t.generatedColumn),f=t.generatedColumn}l=t},this),s.length>0&&(l&&p(l,u()),r.add(s.join(\\\"\\\"))),e.sources.forEach(function(t){var o=e.sourceContentFor(t);null!=o&&(null!=n&&(t=i.join(n,t)),r.setSourceContent(t,o))}),r;function p(t,e){if(null===t||void 0===t.source)r.add(e);else{var o=n?i.join(n,t.source):t.source;r.add(new a(t.originalLine,t.originalColumn,o,e,t.name))}}},a.prototype.add=function(t){if(Array.isArray(t))t.forEach(function(t){this.add(t)},this);else{if(!t[s]&&\\\"string\\\"!=typeof t)throw new TypeError(\\\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \\\"+t);t&&this.children.push(t)}return this},a.prototype.prepend=function(t){if(Array.isArray(t))for(var e=t.length-1;e>=0;e--)this.prepend(t[e]);else{if(!t[s]&&\\\"string\\\"!=typeof t)throw new TypeError(\\\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \\\"+t);this.children.unshift(t)}return this},a.prototype.walk=function(t){for(var e,n=0,r=this.children.length;n<r;n++)(e=this.children[n])[s]?e.walk(t):\\\"\\\"!==e&&t(e,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(t){var e,n,r=this.children.length;if(r>0){for(e=[],n=0;n<r-1;n++)e.push(this.children[n]),e.push(t);e.push(this.children[n]),this.children=e}return this},a.prototype.replaceRight=function(t,e){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(t,e):\\\"string\\\"==typeof n?this.children[this.children.length-1]=n.replace(t,e):this.children.push(\\\"\\\".replace(t,e)),this},a.prototype.setSourceContent=function(t,e){this.sourceContents[i.toSetString(t)]=e},a.prototype.walkSourceContents=function(t){for(var e=0,n=this.children.length;e<n;e++)this.children[e][s]&&this.children[e].walkSourceContents(t);var r=Object.keys(this.sourceContents);for(e=0,n=r.length;e<n;e++)t(i.fromSetString(r[e]),this.sourceContents[r[e]])},a.prototype.toString=function(){var t=\\\"\\\";return this.walk(function(e){t+=e}),t},a.prototype.toStringWithSourceMap=function(t){var e={code:\\\"\\\",line:1,column:0},n=new r(t),i=!1,o=null,s=null,a=null,u=null;return this.walk(function(t,r){e.code+=t,null!==r.source&&null!==r.line&&null!==r.column?(o===r.source&&s===r.line&&a===r.column&&u===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e.line,column:e.column},name:r.name}),o=r.source,s=r.line,a=r.column,u=r.name,i=!0):i&&(n.addMapping({generated:{line:e.line,column:e.column}}),o=null,i=!1);for(var c=0,f=t.length;c<f;c++)10===t.charCodeAt(c)?(e.line++,e.column=0,c+1===f?(o=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e.line,column:e.column},name:r.name})):e.column++}),this.walkSourceContents(function(t,e){n.setSourceContent(t,e)}),{code:e.code,map:n}},e.SourceNode=a}])},\\\"object\\\"==typeof n&&\\\"object\\\"==typeof e?e.exports=i():\\\"function\\\"==typeof define&&define.amd?define(\\\"source-map\\\",[],i):\\\"object\\\"==typeof n?n.sourceMap=i():r.sourceMap=i()},{}],19:[function(t,e,n){const r=t(\\\"./parser\\\");e.exports=function(){var t=r.StringParser,e=\\\"SAMENAME\\\",n=t.reg(/^(\\\\s*(\\\\/\\\\*\\\\/?([^\\\\/]|[^*]\\\\/|\\\\r|\\\\n)*\\\\*\\\\/)*(\\\\/\\\\/.*\\\\r?\\\\n)*)*/).setName(\\\"space\\\");function i(e,r){var i,o;\\\"string\\\"==typeof e?(i=t.str(e),e.length>0&&(o=e.substring(0,1)),r||(r=e)):(i=t.reg(e),r||(r=e+\\\"\\\"));var s=n.and(i).ret(function(t,e){var n={};if(n.pos=e.pos,\\\"number\\\"!=typeof n.pos)throw\\\"no pos for \\\"+r+\\\" \\\";if(n.len=e.len,n.text=e.src.str.substring(n.pos,n.pos+n.len),\\\"string\\\"!=typeof n.text)throw\\\"no text(\\\"+n.text+\\\") for \\\"+r+\\\" \\\";return n.toString=function(){return this.text},n.isToken=!0,n});return o&&(s=s.first(n,o)),s.setName(r)}var o={},s={};function a(t,e,n,r){\\\"string\\\"==typeof n&&(n=i(n)),o[t]=c(o[t],n.ret(function(t){return t.type=e,t}).setName(e))}function u(t,n,r,i){n==e&&(n=r);for(var o=1;o<=t;o*=2)0!=(t&o)&&a(t&o,n,r);s[n]=i}function c(t,e){return t?t.or(e):e}var f=r.create(function(t){for(var e=2,r=[];(t=o[e].parse(t)).success;){var i=t.result[0];e=s[i.type],r.push(i)}return(t=n.parse(t)).success=t.src.maxPos==t.src.str.length,t.result[0]=r,t}),l={function:!0,var:!0,return:!0,typeof:!0,if:!0,__typeof:!0,for:!0,else:!0,super:!0,while:!0,continue:!0,break:!0,do:!0,switch:!0,case:!0,default:!0,try:!0,catch:!0,finally:!0,throw:!0,of:!0,in:!0,fiber:!0,native:!0,instanceof:!0,new:!0,is:!0,true:!0,false:!0,null:!0,this:!0,undefined:!0,usethread:!0,constructor:!0,ifwait:!0,nowait:!0,_thread:!0,arguments:!0,delete:!0,extends:!0,includes:!0},p=i(/^[0-9][xb]?[0-9a-f\\\\.]*/i).ret(function(t){return t.type=\\\"number\\\",t.value=t.text-0,t}).first(n,\\\"0123456789\\\"),h=i({exec:function(t){var e=t.substring(0,1);if('\\\"'!==e&&\\\"'\\\"!==e)return!1;for(var n=1;n<t.length;n++){var r=t.substring(n,n+1);if(r===e)return[t.substring(0,n+1)];\\\"\\\\\\\\\\\"===r&&n++}return!1},toString:function(){return\\\"literal\\\"}}).first(n,\\\"\\\\\\\"'\\\"),d=i({exec:function(t){if(\\\"/\\\"!==t.substring(0,1))return!1;for(var e=1;e<t.length;e++){var n=t.substring(e,e+1);if(\\\"/\\\"===n){var r=/^[ig]*/.exec(t.substring(e+1));return[t.substring(0,e+1+r[0].length)]}if(\\\"\\\\n\\\"==n)return!1;\\\"\\\\\\\\\\\"===n&&e++}return!1},toString:function(){return\\\"regex\\\"}}).first(n,\\\"/\\\");u(3,\\\"number\\\",p,1),u(2,\\\"regex\\\",d,1),u(3,\\\"literal\\\",h,1),u(3,e,\\\"++\\\",1),u(3,e,\\\"--\\\",1),u(3,e,\\\"!==\\\",2),u(3,e,\\\"===\\\",2),u(3,e,\\\">>>\\\",2),u(3,e,\\\"+=\\\",2),u(3,e,\\\"-=\\\",2),u(3,e,\\\"*=\\\",2),u(3,e,\\\"/=\\\",2),u(3,e,\\\"%=\\\",2),u(3,e,\\\">=\\\",2),u(3,e,\\\"<=\\\",2),u(3,e,\\\"!=\\\",2),u(3,e,\\\"==\\\",2),u(3,e,\\\">>\\\",2),u(3,e,\\\"<<\\\",2),u(3,e,\\\"&&\\\",2),u(3,e,\\\"||\\\",2),u(3,e,\\\"(\\\",2),u(3,e,\\\")\\\",1),u(3,e,\\\"[\\\",2),u(3,e,\\\"]\\\",1),u(3,e,\\\"{\\\",2),u(3,e,\\\"}\\\",1),u(3,e,\\\">\\\",2),u(3,e,\\\"<\\\",2),u(3,e,\\\"^\\\",2),u(3,e,\\\"+\\\",2),u(3,e,\\\"-\\\",2),u(3,e,\\\".\\\",2),u(3,e,\\\"?\\\",2),u(3,e,\\\"=\\\",2),u(3,e,\\\"*\\\",2),u(3,e,\\\"%\\\",2),u(1,e,\\\"/\\\",2),u(3,e,\\\"^\\\",2),u(3,e,\\\"~\\\",2),u(3,e,\\\"\\\\\\\\\\\",2),u(3,e,\\\":\\\",2),u(3,e,\\\";\\\",2),u(3,e,\\\",\\\",2),u(3,e,\\\"!\\\",2),u(3,e,\\\"&\\\",2),u(3,e,\\\"|\\\",2);var m=i(/^[a-zA-Z_$][a-zA-Z0-9_$]*/,\\\"symresv_reg\\\").ret(function(t){return t.type=\\\"constructor\\\"==t.text?\\\"tk_constructor\\\":l.hasOwnProperty(t.text)?t.text:\\\"symbol\\\",t}).first(n);for(var g in l)s[g]=2;return s.tk_constructor=2,s.symbol=1,o[2]=c(o[2],m),o[1]=c(o[1],m),{parse:function(t){var e=r.StringParser.parse(f,t);return e.success||console.log(\\\"Stopped at \\\"+t.substring(e.src.maxPos-5,e.src.maxPos+5)),e},extension:\\\"js\\\",reserved:l}}()},{\\\"./parser\\\":17}],20:[function(t,e,n){var r,i,o,s,a;e.exports=(a=0,(s={}).def=function(t,e,n){var r=s.getModuleInfo(t);\\\"function\\\"==typeof e?(n=e,e=s.reqsFromFunc(n),s.setReqs(r,e),r.func=function(){var t={exports:{}};return n(s.doLoad,t,t.exports)||t.exports}):(s.setReqs(r,e),r.func=function(){return n.apply(this,s.getObjs(e))}),s.loadIfAvailable(r)},(r=function(t,e,n){s.def(t,e,n)}).amd={},i=function(t,e){s.def(\\\"REQJS_\\\"+a++,t,e)},s.setReqs=function(t,e){e.forEach(function(e){var n=s.getModuleInfo(e);n.loaded||(t.reqs[e]=n,n.revReqs[t.name]=t)})},s.getModuleInfo=function(t){var e=s.modules;return e[t]=e[t]||{name:t,reqs:{},revReqs:{}}},s.doLoad=function(t){var e=s.getModuleInfo(t);if(e.loaded)return e.obj;e.loaded=!0;var n=e.func();for(var r in null!=n||t.match(/^REQJS_/)||console.log(\\\"Warning: No obj for \\\"+t),e.obj=n,e.revReqs)s.notifyLoaded(e.revReqs[r],e.name);return n},s.notifyLoaded=function(t,e){delete t.reqs[e],s.loadIfAvailable(t)},s.loadIfAvailable=function(t){for(var e in t.reqs)return;s.doLoad(t.name)},s.getObjs=function(t){var e=[];return t.forEach(function(t){var n=s.doLoad(t);e.push(n)}),e},s.reqsFromFunc=function(t){var e=[];return(t+\\\"\\\").replace(/require\\\\s*\\\\(\\\\s*[\\\"']([^\\\"']+)[\\\"']\\\\s*\\\\)/g,function(t,n){e.push(n)}),e},s.modules={},r(\\\"extend\\\",[],function(){return function(t,e){for(var n in e)t[n]=e[n];return t}}),r(\\\"assert\\\",[],function(){var t,e=function(t){this.failMesg=i(t||\\\"Assertion failed: \\\")};e.prototype={_regedType:{},registerType:function(t,e){this._regedType[t]=e},MODE_STRICT:\\\"strict\\\",MODE_DEFENSIVE:\\\"defensive\\\",MODE_BOOL:\\\"bool\\\",fail:function(){var e=t(arguments),n=e.shift();if(e=i(e),e=this.failMesg.concat(n).concat(e),console.log.apply(console,e),this.isDefensive())return n;if(this.isBool())return!1;throw new Error(e.join(\\\" \\\"))},subAssertion:function(){var n=t(arguments);return n=i(n),new e(this.failMesg.concat(n))},assert:function(t,e){return t||this.fail(t,e)},eq:function(t,e){return t!==e?this.fail(t,\\\"!==\\\",e):!!this.isBool()||t},ne:function(t,e){return t===e?this.fail(t,\\\"===\\\",e):!!this.isBool()||t},isset:function(t,e){return null==t?this.fail(t,(e||\\\"\\\")+\\\" is null/undef\\\"):!!this.isBool()||t},is:function(t,e){var n=e,r=t;if(null==n)return this.fail(t,\\\"assert.is: type must be set\\\");if(n._assert_func)return n._assert_func.apply(this,[r]),!!this.isBool()||t;if(this.assert(null!=t,[t,\\\"should be \\\",n]),n instanceof Array||\\\"object\\\"==typeof global&&\\\"function\\\"==typeof global.Array&&n instanceof global.Array){if(!t||\\\"number\\\"!=typeof t.length)return this.fail(t,\\\"should be array:\\\");for(var i=0;i<n.length;i++){var o=this.subAssertion(\\\"failed at \\\",t,\\\"[\\\",i,\\\"]: \\\");null==n[i]&&console.log(\\\"WOW!7\\\",r[i],n[i]),o.is(r[i],n[i])}return!!this.isBool()||t}if(n===String||\\\"string\\\"==n)return this.assert(\\\"string\\\"==typeof r,[r,\\\"should be a string \\\"]),!!this.isBool()||t;if(n===Number||\\\"number\\\"==n)return this.assert(\\\"number\\\"==typeof r,[r,\\\"should be a number\\\"]),!!this.isBool()||t;if(n===Boolean||\\\"boolean\\\"==n)return this.assert(\\\"boolean\\\"==typeof r,[r,\\\"should be a boolean\\\"]),!!this.isBool()||t;if(n instanceof RegExp||\\\"object\\\"==typeof global&&\\\"function\\\"==typeof global.RegExp&&n instanceof global.RegExp)return this.is(r,String),this.assert(n.exec(r),[r,\\\"does not match to\\\",n]),!!this.isBool()||t;if(n===Function)return this.assert(\\\"function\\\"==typeof r,[r,\\\"should be a function\\\"]),!!this.isBool()||t;if(\\\"function\\\"==typeof n)return this.assert(r instanceof n,[r,\\\"should be \\\",n]),!!this.isBool()||t;if(n&&\\\"object\\\"==typeof n){for(var s in n)(o=this.subAssertion(\\\"failed at \\\",t,\\\".\\\",s,\\\":\\\")).is(t[s],n[s]);return!!this.isBool()||t}if(\\\"string\\\"==typeof n){var a=this._regedType[n];return a?this.is(t,a):!!this.isBool()||t}return this.fail(t,\\\"Invaild type: \\\",n)},ensureError:function(t,e){try{t()}catch(n){return\\\"string\\\"==typeof e&&r(n+\\\"\\\"===e,t+\\\" thrown an error \\\"+n+\\\" but expected:\\\"+e),void console.log(\\\"Error thrown successfully: \\\",n.message)}this.fail(t,\\\"should throw an error\\\",e)},setMode:function(t){this._mode=t},isDefensive:function(){return this._mode===this.MODE_DEFENSIVE},isBool:function(){return this._mode===this.MODE_BOOL},isStrict:function(){return!this.isDefensive()&&!this.isBool()}},t=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e};var n=new e,r=function(){try{return n.assert.apply(n,arguments)}catch(t){throw new Error(t.stack)}};function i(t){if(t instanceof Array){var e=[];return t.forEach(function(t){e=e.concat(i(t))}),e}return[t]}return[\\\"setMode\\\",\\\"isDefensive\\\",\\\"is\\\",\\\"isset\\\",\\\"ne\\\",\\\"eq\\\",\\\"ensureError\\\"].forEach(function(t){r[t]=function(){try{return n[t].apply(n,arguments)}catch(t){throw console.log(t.stack),new Error(t.message)}}}),r.fail=n.fail.bind(n),r.MODE_STRICT=n.MODE_STRICT,r.MODE_DEFENSIVE=n.MODE_DEFENSIVE,r.MODE_BOOL=n.MODE_BOOL,r.f=function(t){return{_assert_func:t}},r.opt=function(t){return r.f(function(e){return null==e||e instanceof t})},r.and=function(){var e=t(arguments);return r(e instanceof Array),r.f(function(t){for(var n=0;n<e.length;n++)this.is(t,e[n])})},r}),r(\\\"PathUtil\\\",[\\\"assert\\\"],function(t){function e(e,n){return t.is(arguments,[String,String]),e.substring(e.length-n.length)===n}var n,r=/^([a-zA-Z]):/,i=/^([a-z\\\\-]+):\\\\/\\\\/\\\\/?([^\\\\/]+)\\\\//,o=t.f(function(t){this.is(t,String),this.assert(n.isPath(t),[t,\\\" is not a path\\\"])}),s=t.f(function(t){this.is(t,String),this.assert(n.isAbsolutePath(t),[t,\\\" is not a absolute path\\\"])}),a=t.f(function(t){this.is(t,String),this.assert(!n.isAbsolutePath(t),[t,\\\" is not a relative path\\\"])}),u=t.f(function(t){this.is(t,o),this.assert(n.isDir(t),[t,\\\" is not a directory path\\\"])}),c=t.and(u,s),f=t.f(function(t){this.is(t,o),this.assert(!n.isDir(t),[t,\\\" is not a file path\\\"])});return n={Path:o,Absolute:s,Relative:a,Dir:u,File:f,AbsDir:c,SEP:\\\"/\\\",endsWith:e,startsWith:function(e,n){return t.is(arguments,[String,String]),e.substring(0,n.length)===n},isChildOf:function(t,e){return this.startsWith(this.normalize(t),this.normalize(e))},normalize:function(t){return this.fixSep(t,\\\"/\\\").replace(/\\\\/+$/,\\\"/\\\")},hasDriveLetter:function(t){return r.exec(t)},isURL:function(t){var e=i.exec(t);if(e)return{protocol:e[1],hostPort:e[2],path:\\\"/\\\"+t.substring(e[0].length)}},isPath:function(e){return t.is(arguments,[String]),!0},isRelativePath:function(e){return t.is(arguments,[String]),n.isPath(e)&&!n.isAbsolutePath(e)},isAbsolutePath:function(e){return t.is(arguments,[String]),n.isPath(e)&&(n.startsWith(e,\\\"/\\\")||n.hasDriveLetter(e)||n.isURL(e))},isDir:function(r){return r=n.fixSep(r),t.is(arguments,[o]),e(r,\\\"/\\\")},hasBackslashSep:function(t){return t.indexOf(\\\"\\\\\\\\\\\")>=0},fixSep:function(e,n){return n=n||\\\"/\\\",t.is(arguments,[String]),t.is(e.replace(/[\\\\\\\\\\\\/]/g,n),o)},directorify:function(e){return n.isDir(e)?e:t.is(e+\\\"/\\\",u)},filify:function(e){return n.isDir(e)?t.is(e.substring(0,e.length-1),f):e},splitPath:function(e){var n;if(t.is(arguments,[o]),n=this.isURL(e)){var r=this.splitPath(n.path);return r[0]=n.protocol+\\\"://\\\"+n.hostPort,r}var i=(e=e.replace(/\\\\/+/g,\\\"/\\\")).split(\\\"/\\\");return\\\"\\\"==i[i.length-1]&&(i[i.length-2]+=\\\"/\\\",i.pop()),i},name:function(e){return t.is(arguments,[String]),n.splitPath(e).pop()},ext:function(e){t.is(arguments,[String]);var r=n.name(e),i=/\\\\.[a-zA-Z0-9]+$/.exec(r);return i?i[0]:null},truncExt:function(e,r){t.is(e,String);var i=n.name(e);return r=r||n.ext(e),t.is(r,String),i.substring(0,i.length-r.length)},truncSEP:function(e){return t.is(arguments,[o]),n.isDir(e)?e.substring(0,e.length-1):e},endsWith:function(r,i){return t.is(arguments,[String,String]),e(n.name(r),i)},parent:function(e){return t.is(arguments,[String]),n.up(e)},rel:function(e,r){if(\\\"\\\"==r)return e;t.is(arguments,[c,a]);var i=n.splitPath(r),o=e;o=o.replace(/\\\\/$/,\\\"\\\");var s=n;return i.forEach(function(t){\\\"..\\\"==t||\\\"../\\\"==t?o=s.up(o):(o=o.replace(/\\\\/$/,\\\"\\\"),o+=\\\"/\\\"+(\\\".\\\"==t||\\\"./\\\"==t?\\\"\\\":t))}),o},relPath:function(e,r){return t.is(arguments,[s,s]),e.substring(0,r.length)!=r?\\\"../\\\"+n.relPath(e,this.up(r)):e.substring(r.length)},up:function(t){if(\\\"/\\\"==t)return null;var e=n.splitPath(t);return e.pop(),e.join(\\\"/\\\")+\\\"/\\\"}},[\\\"directorify\\\",\\\"filify\\\",\\\"splitPath\\\",\\\"name\\\",\\\"rel\\\",\\\"relPath\\\",\\\"up\\\"].forEach(function(t){var e=n[t];n[t]=function(){var t=!1,r=Array.prototype.slice.call(arguments).map(function(e){return n.hasBackslashSep(e)?(t=!0,n.fixSep(e)):e}),i=e.apply(n,r);return t?n.fixSep(i,\\\"\\\\\\\\\\\"):i}}),n.isAbsolute=n.isAbsolutePath,n.isRelative=n.isRelativePath,\\\"object\\\"==typeof window&&(window.PathUtil=n),n}),r(\\\"MIMETypes\\\",[],function(){return{\\\".png\\\":\\\"image/png\\\",\\\".gif\\\":\\\"image/gif\\\",\\\".jpeg\\\":\\\"image/jpeg\\\",\\\".jpg\\\":\\\"image/jpeg\\\",\\\".ico\\\":\\\"image/icon\\\",\\\".wav\\\":\\\"audio/x-wav\\\",\\\".mp3\\\":\\\"audio/mp3\\\",\\\".ogg\\\":\\\"audio/ogg\\\",\\\".midi\\\":\\\"audio/midi\\\",\\\".mid\\\":\\\"audio/midi\\\",\\\".mzo\\\":\\\"audio/mzo\\\",\\\".txt\\\":\\\"text/plain\\\",\\\".html\\\":\\\"text/html\\\",\\\".htm\\\":\\\"text/html\\\",\\\".css\\\":\\\"text/css\\\",\\\".js\\\":\\\"text/javascript\\\",\\\".json\\\":\\\"text/json\\\",\\\".zip\\\":\\\"application/zip\\\",\\\".swf\\\":\\\"application/x-shockwave-flash\\\",\\\".pdf\\\":\\\"application/pdf\\\",\\\".doc\\\":\\\"application/word\\\",\\\".xls\\\":\\\"application/excel\\\",\\\".ppt\\\":\\\"application/powerpoint\\\",\\\".docx\\\":\\\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\\\",\\\".docm\\\":\\\"application/vnd.ms-word.document.macroEnabled.12\\\",\\\".dotx\\\":\\\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\\\",\\\".dotm\\\":\\\"application/vnd.ms-word.template.macroEnabled.12\\\",\\\".xlsx\\\":\\\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\\\",\\\".xlsm\\\":\\\"application/vnd.ms-excel.sheet.macroEnabled.12\\\",\\\".xltx\\\":\\\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\\\",\\\".xltm\\\":\\\"application/vnd.ms-excel.template.macroEnabled.12\\\",\\\".xlsb\\\":\\\"application/vnd.ms-excel.sheet.binary.macroEnabled.12\\\",\\\".xlam\\\":\\\"application/vnd.ms-excel.addin.macroEnabled.12\\\",\\\".pptx\\\":\\\"application/vnd.openxmlformats-officedocument.presentationml.presentation\\\",\\\".pptm\\\":\\\"application/vnd.ms-powerpoint.presentation.macroEnabled.12\\\",\\\".potx\\\":\\\"application/vnd.openxmlformats-officedocument.presentationml.template\\\",\\\".potm\\\":\\\"application/vnd.ms-powerpoint.template.macroEnabled.12\\\",\\\".ppsx\\\":\\\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\\\",\\\".ppsm\\\":\\\"application/vnd.ms-powerpoint.slideshow.macroEnabled.12\\\",\\\".ppam\\\":\\\"application/vnd.ms-powerpoint.addin.macroEnabled.12\\\",\\\".tonyu\\\":\\\"text/tonyu\\\",\\\".c\\\":\\\"text/c\\\",\\\".dtl\\\":\\\"text/dolittle\\\"}}),r(\\\"DeferredUtil\\\",[],function(){var t,e=\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof self?self:\\\"undefined\\\"!=typeof global?global:null,n=function(t){this.res=t};function r(t){return t}return(t={isNativePromise:function(t){return t&&\\\"function\\\"==typeof t.then&&\\\"function\\\"!=typeof t.promise&&\\\"function\\\"==typeof t.catch},isJQPromise:function(t){return t&&\\\"function\\\"==typeof t.then&&\\\"function\\\"==typeof t.promise&&\\\"function\\\"==typeof t.fail},isPromise:function(t){return t&&\\\"function\\\"==typeof t.then&&(\\\"function\\\"==typeof t.promise||\\\"function\\\"==typeof t.catch)},all:function(e){return t.promise(function(n,r){var i=[],o=e.length;e.forEach(function(e,s){t.resolve(e).then(function(t){i[s]=t,0==--o&&n(i)},r)})})},resolve:function(e){return t.config.useJQ&&t.isJQPromise(e)?e:!t.config.useJQ&&t.isNativePromise(e)?e:t.promise(function(n,r){t.isPromise(e)?e.then(n,r):n(e)})},throwNowIfRejected:function(e){var n,r,i=e.then(function(t){return n||(n=\\\"resolved\\\"),t},function(e){if(n)return t.reject(e);n=\\\"rejected\\\",r=e});if(n||(n=\\\"notyet\\\"),\\\"rejected\\\"===n)throw r;return i},assertResolved:function(t){var e,n;if(t.then(function(t){e=t,n=!0}),!n)throw new Error(\\\"Promise not resolved\\\");return e},ensureDefer:function(e){return t.promise(function(n,i){var o;t.resolve(e).then(function(t){o?n(t):setTimeout(function(){n(t)},0)}).then(r,function(t){o?i(t):setTimeout(function(){i(t)},0)}),o=!0})},directPromise:function(e){return t.timeout(e,0)},then:function(e){return t.directPromise().then(e)},timeout:function(e,n){return t.promise(function(t){setTimeout(function(){t(n)},e||0)})},funcPromise:function(e){if(t.config.useJQ){var n=new $.Deferred;try{e(function(t){n.resolve(t)},function(t){n.reject(t)})}catch(t){n.reject(t)}return n.promise()}if(t.external.Promise)return new t.external.Promise(function(t,n){try{e(t,n)}catch(t){n(t)}});throw new Error(\\\"promise is not found\\\")},reject:function(e){if(t.config.useJQ){var n=new $.Deferred;return n.reject(e),n.promise()}return new t.external.Promise(function(t,n){n(e)})},throwPromise:function(e){if(t.config.useJQ){var n=new $.Deferred;return setTimeout(function(){n.reject(e)},0),n.promise()}return new t.external.Promise(function(t,n){n(e)})},throwF:function(e){return function(){try{return e.apply(this,arguments)}catch(e){return console.log(e,e.stack),t.throwPromise(e)}}},each:function(e,n){if(e instanceof Array)return t.loop(function(r){return r>=e.length?t.brk():t.resolve(n(e[r],r)).then(function(){return r+1})},0);var r=[];for(var i in e)r.push({k:i,v:e[i]});return t.each(r,function(t){return n(t.k,t.v)})},loop:function(e,i){try{for(var o;;){if(i instanceof n)return t.when1(i.res);var s=!0,a=!1,u=e(i),c=t.resolve(u).then(function(r){return s=!1,(i=r)instanceof n?i.res:a?t.loop(e,i):void 0}).then(r,function(t){s=!1,o=t});if(o)throw o;if(a=!0,s)return c}}catch(e){return t.reject(e)}},brk:function(t){return new n(t)},tryLoop:function(e,n){return t.loop(t.tr(e),n)},tryEach:function(e,n){return t.loop(e,t.tr(n))},documentReady:function(){return t.callbackToPromise(function(t){$(t)})},requirejs:function(n){if(!e.requirejs)throw new Error(\\\"requirejs is not loaded\\\");return t.callbackToPromise(function(t){e.requirejs(n,t)})}}).NOP=function(t){return t},t.E=function(){console.log(\\\"DUE\\\",arguments),t.errorHandler.apply(t,arguments)},t.errorHandler=function(t){console.error.apply(console,arguments),alert(t)},t.setE=function(e){t.errorHandler=e},t.begin=t.try=t.tr=t.throwF,t.promise=t.callbackToPromise=t.funcPromise,t.when1=t.resolve,t.config={},e.$&&e.$.Deferred&&(t.config.useJQ=!0),t.external={Promise:e.Promise},e.DeferredUtil||(e.DeferredUtil=t),t}),r(\\\"FSClass\\\",[\\\"extend\\\",\\\"PathUtil\\\",\\\"MIMETypes\\\",\\\"assert\\\",\\\"DeferredUtil\\\"],function(t,e,n,r,i){var o=function(){},s={};function a(t){throw new Error(t+\\\" is STUB!\\\")}return o.addFSType=function(t,e){s[t]=e},o.availFSTypes=function(){return s},t(o.prototype,{err:function(t,e){throw new Error(t+\\\": \\\"+e)},fstype:function(){return\\\"Unknown\\\"},isReadOnly:function(t,e){a(\\\"isReadOnly\\\")},supportsSync:function(){return!0},resolveFS:function(t,e){return r(this.getRootFS()!==this),this.getRootFS().resolveFS(t)},mounted:function(t,e){this.rootFS=t,this.mountPoint=e},inMyFS:function(t){return!this.mountPoint||e.startsWith(t,this.mountPoint)},getRootFS:function(){return r(this.rootFS,\\\"rootFS is not set\\\")},getReturnTypes:function(t,e){a(\\\"\\\")},getContent:function(t,e){a(\\\"getContent\\\")},size:function(t){return this.getContent(t,{type:ArrayBuffer}).toBin().byteLength},getContentAsync:function(t,e){return this.supportsSync()||a(\\\"getContentAsync\\\"),i.resolve(this.getContent.apply(this,arguments))},setContent:function(t,e,n){a(\\\"\\\")},setContentAsync:function(t,e,n){var r=this;return r.supportsSync()||a(\\\"setContentAsync\\\"),i.resolve(e).then(function(e){return i.resolve(r.setContent(t,e,n))})},appendContent:function(t,e,n){a(\\\"\\\")},appendContentAsync:function(t,e,n){var r=this;return r.supportsSync()||a(\\\"appendContentAsync\\\"),i.resolve(e).then(function(e){return i.resolve(r.appendContent(t,e,n))})},getMetaInfo:function(t,e){a(\\\"\\\")},setMetaInfo:function(t,e,n){a(\\\"\\\")},mkdir:function(t,e){a(\\\"mkdir\\\")},touch:function(t){a(\\\"touch\\\")},exists:function(t,e){a(\\\"exists\\\")},opendir:function(t,e){a(\\\"opendir\\\")},opendirAsync:function(t,e){return this.supportsSync()||a(\\\"opendirAsync\\\"),i.resolve(this.opendir.apply(this,arguments))},cp:function(t,n,i){r.is(arguments,[e.Absolute,e.Absolute]),this.assertExist(t),i=i||{};var o=this.isDir(t),s=this.getRootFS().resolveFS(n),a=s.isDir(n);if(o||a)throw new Error(\\\"only file to file supports\\\");if(this.supportsSync()&&s.supportsSync()){var u=this.getContent(t),c=s.setContent(n,u);return i.a&&s.setMetaInfo(n,this.getMetaInfo(t)),c}return s.setContentAsync(n,this.getContentAsync(t)).then(function(e){return i.a?s.setMetaInfo(n,this.getMetaInfo(t)):e})},mv:function(t,e,n){return this.cp(t,e,n),this.rm(t,{r:!0})},rm:function(t,e){a(\\\"\\\")},link:function(t,e,n){throw new Error(\\\"ln \\\"+e+\\\" \\\"+t+\\\" : This FS not support link.\\\")},getURL:function(t){a(\\\"\\\")},onAddObserver:function(t){}}),o.delegateMethods=function(t,n){for(var i in n)!function(i){r.ne(i,\\\"inMyFS\\\"),t[i]=function(){var t=arguments[0];r.is(t,e.Absolute);var o=this.resolveFS(t);return o!==this?(console.log(\\\"Invoked for other fs\\\",this.mountPoint,o.mountPoint),o[i].apply(o,arguments)):n[i].apply(this,arguments)}}(i)},o.delegateMethods(o.prototype,{assertWriteable:function(t){this.isReadOnly(t)&&this.err(t,\\\"read only.\\\")},getContentType:function(t,r){var i=(e.ext(t)+\\\"\\\").toLowerCase();return n[i]||(r||{}).def||\\\"application/octet-stream\\\"},getBlob:function(t,e){var n=this.getContent(t);return(e=e||{}).blobType=e.blobType||Blob,e.binType=e.binType||ArrayBuffer,n.hasPlainText()?new e.blobType([n.toPlainText()],this.getContentType(t)):new e.blobType([n.toBin(e.binType)],this.getContentType(t))},isText:function(t){var n=this.getContentType(t);return e.startsWith(n,\\\"text\\\")},assertExist:function(t,n){this.exists(t,n)||this.err(t,\\\": No such \\\"+(e.isDir(t)?\\\"directory\\\":\\\"file\\\"))},isDir:function(t,n){return e.isDir(t)},find:function(t,n){r.is(arguments,[e.Absolute]);var i=this.opendir(t,n),o=this,s=[t];return i.forEach(function(r){var i=e.rel(t,r);if(e.isDir(i)){var a=o.resolveFS(i);s=s.concat(a.find(i,n))}else s.push(i)}),s},resolveLink:function(t){r.is(t,e.Absolute);for(var n=t;n;n=e.up(n)){r(!this.mountPoint||e.startsWith(n,this.mountPoint),n+\\\" is out of mountPoint. path=\\\"+t);var i=this.isLink(n);if(i){r(i!=n,\\\"l==p==\\\"+i);var o=e.rel(i,e.relPath(t,n));return r(o!=t,\\\"np==path==\\\"+o),r.is(this.getRootFS().resolveFS(o).resolveLink(o),e.Absolute)}if(this.exists(n))return t}return t},isLink:function(t){return null},opendirEx:function(t,n){r.is(t,e.AbsDir);var i=this,o={};return this.opendir(t).forEach(function(n){var r=e.rel(t,n);o[n]=i.getMetaInfo(r)}),o},getDirTree:function(t,n){var i=(n=n||{}).dest=n.dest||{};n.style=n.style||\\\"flat-absolute\\\",n.excludes=n.excludes||[],r.is(n.excludes,Array),n.base||(n.base=t),r.is(t,e.AbsDir);var o=this.opendirEx(t,n);if(\\\"no-recursive\\\"==n.style)return o;var s=this;for(var a in o){var u=o[a],c=e.rel(t,a),f=e.relPath(c,n.base);switch(n.style){case\\\"flat-relative\\\":case\\\"hierarchical\\\":if(n.excludes.indexOf(f)>=0)continue;break;case\\\"flat-absolute\\\":if(n.excludes.indexOf(c)>=0)continue}if(s.isDir(c))switch(n.style){case\\\"flat-absolute\\\":case\\\"flat-relative\\\":s.getDirTree(c,n);break;case\\\"hierarchical\\\":n.dest={},i[a]=s.getDirTree(c,n)}else switch(n.style){case\\\"flat-absolute\\\":i[c]=u;break;case\\\"flat-relative\\\":i[f]=u;break;case\\\"hierarchical\\\":i[a]=u}}return i}}),o}),r(\\\"Util\\\",[],function(){return{getQueryString:function(t,e){null==e&&(e=\\\"\\\"),t=t.replace(/[\\\\[]/,\\\"\\\\\\\\[\\\").replace(/[\\\\]]/,\\\"\\\\\\\\]\\\");var n,r=new RegExp(\\\"[\\\\\\\\?&]\\\"+t+\\\"=([^&#]*)\\\").exec(window.location.href);return null==r?e:(n=r[1],decodeURIComponent(n.replace(/\\\\+/g,\\\"%20\\\")))},endsWith:function(t,e){return t.substring(t.length-e.length)===e},startsWith:function(t,e){return t.substring(0,e.length)===e},privatize:function(t){if(t.__privatized)return t;var e={__privatized:!0};for(var n in t)!function(n){var r=t[n];n.match(/^_/)||\\\"function\\\"==typeof r&&(e[n]=function(){return r.apply(t,arguments)})}(n);return e},extend:function(t,e){for(var n in e||{})t[n]=e[n];return t}}}),r(\\\"FileSaver\\\",[],function(){var t=\\\"object\\\"==typeof window&&window.window===window?window:\\\"object\\\"==typeof self&&self.self===self?self:\\\"object\\\"==typeof global&&global.global===global?global:this;function n(t,e,n){var r=new XMLHttpRequest;r.open(\\\"GET\\\",t),r.responseType=\\\"blob\\\",r.onload=function(){o(r.response,e,n)},r.onerror=function(){console.error(\\\"could not download file\\\")},r.send()}function r(t){var e=new XMLHttpRequest;return e.open(\\\"HEAD\\\",t,!1),e.send(),e.status>=200&&e.status<=299}function i(t){try{t.dispatchEvent(new MouseEvent(\\\"click\\\"))}catch(n){var e=document.createEvent(\\\"MouseEvents\\\");e.initMouseEvent(\\\"click\\\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o=t.saveAs||\\\"object\\\"!=typeof window||window!==t?function(){}:\\\"download\\\"in HTMLAnchorElement.prototype?function(e,o,s){var a=t.URL||t.webkitURL,u=document.createElement(\\\"a\\\");o=o||e.name||\\\"download\\\",u.download=o,u.rel=\\\"noopener\\\",\\\"string\\\"==typeof e?(u.href=e,u.origin!==location.origin?r(u.href)?n(e,o,s):i(u,u.target=\\\"_blank\\\"):i(u)):(u.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){i(u)},0))}:\\\"msSaveOrOpenBlob\\\"in navigator?function(t,e,o){if(e=e||t.name||\\\"download\\\",\\\"string\\\"==typeof t)if(r(t))n(t,e,o);else{var s=document.createElement(\\\"a\\\");s.href=t,s.target=\\\"_blank\\\",setTimeout(function(){i(s)})}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:\\\"object\\\"!=typeof e&&(console.warn(\\\"Depricated: Expected third argument to be a object\\\"),e={autoBom:!e}),e.autoBom&&/^\\\\s*(?:text\\\\/\\\\S*|application\\\\/xml|\\\\S*\\\\/\\\\S*\\\\+xml)\\\\s*;.*charset\\\\s*=\\\\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,o),e)}:function(e,r,i,o){if((o=o||open(\\\"\\\",\\\"_blank\\\"))&&(o.document.title=o.document.body.innerText=\\\"downloading...\\\"),\\\"string\\\"==typeof e)return n(e,r,i);var s=\\\"application/octet-stream\\\"===e.type,a=/constructor/i.test(t.HTMLElement)||t.safari,u=/CriOS\\\\/[\\\\d]+/.test(navigator.userAgent);if((u||s&&a)&&\\\"object\\\"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,\\\"data:attachment/file;\\\"),o?o.location.href=t:location=t,o=null},c.readAsDataURL(e)}else{var f=t.URL||t.webkitURL,l=f.createObjectURL(e);o?o.location=l:location.href=l,o=null,setTimeout(function(){f.revokeObjectURL(l)},4e4)}};return t.saveAs=o.saveAs=o,void 0!==e&&(e.exports=o),o}),r(\\\"Content\\\",[\\\"assert\\\",\\\"Util\\\",\\\"FileSaver\\\"],function(t,e,n){var r=function(){},i=e.extend;r.plainText=function(t,e){var n=new r;return n.contentType=e||\\\"text/plain\\\",n.plain=t,n},r.url=function(t){var e=new r;return e.url=t,e},r.buffer2ArrayBuffer=function(e){if(r.isBuffer(e)){var n=new Uint8Array(e),i=n.buffer;if(i instanceof ArrayBuffer)return i;var o=Array.prototype.slice.call(n);return t(new Uint8Array(o).buffer,\\\"n2a: buf is not set\\\")}return t(e,\\\"n2a: a is not set\\\")},r.arrayBuffer2Buffer=function(e){return e instanceof ArrayBuffer?new Buffer(new Uint8Array(e)):t(e,\\\"a2n: a is not set\\\")},r.bin=function(e,n){t(n,\\\"contentType should be set\\\");var i=new r;if(r.isNodeBuffer(e))i.bufType=\\\"node\\\",i.nodeBuffer=e;else if(e instanceof ArrayBuffer)i.bufType=\\\"array2\\\",i.arrayBuffer=e;else{if(!e||!r.isBuffer(e.buffer))throw new Error(e+\\\" is not a bin\\\");i.bufType=\\\"array1\\\",i.arrayBuffer=e.buffer}return i.contentType=n,i},r.looksLikeDataURL=function(t){return t.match(/^data:/)},r.download=n;var o=r.prototype;o.toBin=function(t){if(t=t||(r.hasNodeBuffer()?Buffer:ArrayBuffer),this.nodeBuffer)return t===Buffer?this.nodeBuffer:this.arrayBuffer=r.buffer2ArrayBuffer(this.nodeBuffer);if(this.arrayBuffer)return t===ArrayBuffer?this.arrayBuffer:this.nodeBuffer=r.arrayBuffer2Buffer(this.arrayBuffer);if(this.url){var e=new a(this.url,t);return this.setBuffer(e.buffer)}if(null!=this.plain)return this.setBuffer(r.str2utf8bytes(this.plain,t));throw new Error(\\\"No data\\\")},o.setBuffer=function(e){return t(e,\\\"b is not set\\\"),r.isNodeBuffer(e)?this.nodeBuffer=e:this.arrayBuffer=e},o.toArrayBuffer=function(){return this.toBin(ArrayBuffer)},o.toNodeBuffer=function(){return this.toBin(Buffer)},o.toURL=function(){if(this.url)return this.url;if(this.arrayBuffer||null==this.plain||(this.arrayBuffer=r.str2utf8bytes(this.plain,ArrayBuffer)),this.arrayBuffer||this.nodeBuffer){var t=new a(this.arrayBuffer||this.nodeBuffer,this.contentType);return this.url=t.url}throw new Error(\\\"No data\\\")},o.toPlainText=function(){if(this.hasPlainText())return this.plain;if(this.url&&!this.hasBin()){var t=new a(this.url,ArrayBuffer);this.arrayBuffer=t.buffer}if(this.hasBin())return this.plain=r.utf8bytes2str(this.nodeBuffer||new Uint8Array(this.arrayBuffer));throw new Error(\\\"No data\\\")},o.hasURL=function(){return this.url},o.hasPlainText=function(){return null!=this.plain},o.hasBin=function(){return this.nodeBuffer||this.arrayBuffer},o.hasNodeBuffer=function(){return this.nodeBuffer},o.hasArrayBuffer=function(){return this.arrayBuffer},o.toBlob=function(){return new Blob([this.toBin(ArrayBuffer)],{type:this.contentType})},o.download=function(t){r.download(this.toBlob(),t)},r.Base64_To_ArrayBuffer=function(t,e){var n=e||ArrayBuffer;t=t.replace(/[\\\\n=]/g,\\\"\\\");var i=new Object;i[65]=0,i[66]=1,i[67]=2,i[68]=3,i[69]=4,i[70]=5,i[71]=6,i[72]=7,i[73]=8,i[74]=9,i[75]=10,i[76]=11,i[77]=12,i[78]=13,i[79]=14,i[80]=15,i[81]=16,i[82]=17,i[83]=18,i[84]=19,i[85]=20,i[86]=21,i[87]=22,i[88]=23,i[89]=24,i[90]=25,i[97]=26,i[98]=27,i[99]=28,i[100]=29,i[101]=30,i[102]=31,i[103]=32,i[104]=33,i[105]=34,i[106]=35,i[107]=36,i[108]=37,i[109]=38,i[110]=39,i[111]=40,i[112]=41,i[113]=42,i[114]=43,i[115]=44,i[116]=45,i[117]=46,i[118]=47,i[119]=48,i[120]=49,i[121]=50,i[122]=51,i[48]=52,i[49]=53,i[50]=54,i[51]=55,i[52]=56,i[53]=57,i[54]=58,i[55]=59,i[56]=60,i[57]=61,i[43]=62,i[47]=63;var o,s=t.length,a=0,u=0;if(!s)return new n(0);o=Math.floor(s/4*3),\\\"=\\\"==t.charAt(s-1)&&(o-=1),\\\"=\\\"==t.charAt(s-2)&&(o-=1);for(var c=new n(o),f=r.isNodeBuffer(c)?c:new Uint8Array(c),l=0,p=0;p<o&&(void 0===(u=i[t.charCodeAt(l)])&&h(\\\"Invalid letter: \\\"+t.charCodeAt(l)),a=u<<2,l++,void 0===(u=i[t.charCodeAt(l)])&&h(\\\"Invalid letter: \\\"+t.charCodeAt(l)),f[p]=a|u>>4&3,a=(15&u)<<4,l++,!(++p>=o))&&(void 0===(u=i[t.charCodeAt(l)])&&h(\\\"Invalid letter: \\\"+t.charCodeAt(l)),f[p]=a|u>>2&15,a=(3&u)<<6,l++,!(++p>=o));)void 0===(u=i[t.charCodeAt(l)])&&h(\\\"Invalid letter: \\\"+t.charCodeAt(l)),f[p]=a|u,l++,p++;function h(e){throw console.log(e),console.log(t,l),new Error(e)}return c},r.Base64_From_ArrayBuffer=function(t){for(var e=[\\\"A\\\",\\\"B\\\",\\\"C\\\",\\\"D\\\",\\\"E\\\",\\\"F\\\",\\\"G\\\",\\\"H\\\",\\\"I\\\",\\\"J\\\",\\\"K\\\",\\\"L\\\",\\\"M\\\",\\\"N\\\",\\\"O\\\",\\\"P\\\",\\\"Q\\\",\\\"R\\\",\\\"S\\\",\\\"T\\\",\\\"U\\\",\\\"V\\\",\\\"W\\\",\\\"X\\\",\\\"Y\\\",\\\"Z\\\",\\\"a\\\",\\\"b\\\",\\\"c\\\",\\\"d\\\",\\\"e\\\",\\\"f\\\",\\\"g\\\",\\\"h\\\",\\\"i\\\",\\\"j\\\",\\\"k\\\",\\\"l\\\",\\\"m\\\",\\\"n\\\",\\\"o\\\",\\\"p\\\",\\\"q\\\",\\\"r\\\",\\\"s\\\",\\\"t\\\",\\\"u\\\",\\\"v\\\",\\\"w\\\",\\\"x\\\",\\\"y\\\",\\\"z\\\",\\\"0\\\",\\\"1\\\",\\\"2\\\",\\\"3\\\",\\\"4\\\",\\\"5\\\",\\\"6\\\",\\\"7\\\",\\\"8\\\",\\\"9\\\",\\\"+\\\",\\\"/\\\"],n=\\\"\\\",r=new Uint8Array(t),i=r.length,o=0,s=0,a=0;a<i&&(n+=e[(s=r[a])>>2],o=(3&s)<<4,!(++a>=i))&&(n+=e[o|(s=r[a])>>4],o=(15&s)<<2,!(++a>=i));)n+=e[o|(s=r[a])>>6],n+=e[63&s],a++;var u=i%3;return u&&(n+=e[o]),1==u?n+=\\\"==\\\":2==u&&(n+=\\\"=\\\"),n},r.hasNodeBuffer=function(){return\\\"undefined\\\"!=typeof Buffer},r.isNodeBuffer=function(t){return r.hasNodeBuffer()&&t instanceof Buffer},r.isBuffer=function(t){return t instanceof ArrayBuffer||r.isNodeBuffer(t)},r.utf8bytes2str=function(t){for(var e=[],n=0;n<t.length;n++)e.push(\\\"%\\\"+(\\\"0\\\"+t[n].toString(16)).slice(-2));return decodeURIComponent(e.join(\\\"\\\"))},r.str2utf8bytes=function(t,e){for(var n=encodeURIComponent(t),r=/^%(..)/,i=[],o=0;o<n.length;o++){var s=r.exec(n.substring(o));s?(i.push(parseInt(\\\"0x\\\"+s[1])),o+=s[0].length-1):i.push(n.charCodeAt(o))}return\\\"undefined\\\"!=typeof Buffer&&e===Buffer?new Buffer(i):new Uint8Array(i).buffer};var s=r.hasNodeBuffer()?Buffer:ArrayBuffer,a=function(e,n){\\\"string\\\"==typeof e?(this.url=e,this.binType=n||s,this.dataURL2bin(e)):e&&r.isBuffer(e.buffer)?(this.buffer=e.buffer,t.is(n,String),this.contentType=n,this.bin2dataURL(this.buffer,this.contentType)):r.isBuffer(e)?(this.buffer=e,t.is(n,String),this.contentType=n,this.bin2dataURL(this.buffer,this.contentType)):(console.log(arguments),t.fail(\\\"Invalid args: \\\",arguments))};return r.DataURL=a,i(a.prototype,{bin2dataURL:function(e,n){t(r.isBuffer(e)),t.is(n,String);var i=this.dataHeader(n),o=r.Base64_From_ArrayBuffer(e);return t.is(o,String),this.url=i+o},dataURL2bin:function(e){t.is(arguments,[String]);var n=/^data:([^;]+);base64,/i.exec(e);return t(n,[\\\"malformed dataURL:\\\",e]),this.contentType=n[1],this.buffer=r.Base64_To_ArrayBuffer(e.substring(n[0].length),this.binType),t.is(this.buffer,this.binType)},dataHeader:function(e){return t.is(arguments,[String]),\\\"data:\\\"+e+\\\";base64,\\\"},toString:function(){return t.is(this.url,String)}}),r}),r(\\\"NativeFS\\\",[\\\"FSClass\\\",\\\"assert\\\",\\\"PathUtil\\\",\\\"extend\\\",\\\"Content\\\"],function(e,n,r,o,s){var a,u=n;const c=[()=>t(\\\"fs\\\"),()=>i.nodeRequire(\\\"fs\\\"),()=>global.require(\\\"fs\\\")];for(let t of c)try{(a=t()).existsSync(\\\"test.txt\\\"),process.cwd();break}catch(t){a=null}if(!a)return function(){throw new Error(\\\"This system not support native FS\\\")};var f=function(t){t&&(n.is(t,r.AbsDir),this.rootPoint=t)},l=r.hasDriveLetter(process.cwd());f.available=!0;var p=r.SEP,h=f.prototype=new e;function d(t){return t}return h.toNativePath=function(t){return this.rootPoint?(n.is(t,r.Absolute),n(this.inMyFS(t),t+\\\" is not fs of \\\"+this),r.rel(this.rootPoint,r.relPath(t,this.mountPoint||r.SEP))):t},h.arrayBuffer2Buffer=function(t){return t instanceof ArrayBuffer?new Buffer(new Uint8Array(t)):t},e.addFSType(\\\"NativeFS\\\",function(t,e){return new f(e.r)}),f.prototype.fstype=function(){return\\\"Native\\\"+(this.rootPoint?\\\"(\\\"+this.rootPoint+\\\")\\\":\\\"\\\")},f.prototype.inMyFS=function(t){return this.mountPoint?r.startsWith(t,this.mountPoint):!(!!l^!!r.hasDriveLetter(t))},e.delegateMethods(f.prototype,{getReturnTypes:function(t,e){return d(t),u.is(arguments,[String]),{getContent:ArrayBuffer,opendir:[String]}},getContent:function(t,e){e=e||{},n.is(t,r.Absolute);var i=this.toNativePath(t);return this.assertExist(t),s.bin(a.readFileSync(i),this.getContentType(t))},size:function(t){var e=this.toNativePath(t);return a.statSync(e).size},setContent:function(t,e){n.is(arguments,[r.Absolute,s]);var i=r.up(t);i&&this.getRootFS().resolveFS(i).mkdir(i);var o=this.toNativePath(t);e.hasBin()||!e.hasPlainText()?a.writeFileSync(o,e.toNodeBuffer()):a.writeFileSync(o,e.toPlainText())},appendContent:function(t,e){n.is(arguments,[r.Absolute,s]);var i=r.up(t);i&&this.getRootFS().resolveFS(i).mkdir(i);var o=this.toNativePath(t);e.hasBin()||!e.hasPlainText()?a.appendFileSync(o,e.toNodeBuffer()):a.appendFileSync(o,e.toPlainText())},getMetaInfo:function(t,e){this.assertExist(t,e);var n=this.stat(t);return n.lastUpdate=n.mtime.getTime(),n},setMetaInfo:function(t,e,n){d(t)},isReadOnly:function(t){return d(t),!1},stat:function(t){n.is(t,r.Absolute);var e=this.toNativePath(t);return a.statSync(e)},mkdir:function(t,e){if(e=e||{},u.is(arguments,[r.Absolute]),this.exists(t)){if(this.isDir(t))return;throw new Error(this+\\\" is a file. not a dir.\\\")}this.assertWriteable(t);var n=r.up(t);n&&this.getRootFS().resolveFS(n).mkdir(n);var i=this.toNativePath(t);return a.mkdirSync(i),this.assertExist(i)},opendir:function(t,e){u.is(arguments,[String]),e=e||{};var n=this.toNativePath(t),i=r.truncSEP(n),o=a.readdirSync(n);return e.nosep||(o=o.map(function(t){return t+(a.statSync(i+p+t).isDirectory()?p:\\\"\\\")})),u.is([].concat(o),Array)},rm:function(t,e){u.is(arguments,[r.Absolute]),e=e||{},this.assertExist(t);var n=this.toNativePath(t);return this.isDir(t)?a.rmdirSync(n):a.unlinkSync(n)},exists:function(t,e){e=e||{};var n=this.toNativePath(t);return a.existsSync(n)},isDir:function(t){return this.exists(t)?this.stat(t).isDirectory():r.isDir(t)},touch:function(t){!this.exists(t)&&this.isDir(t)?this.mkdir(t):this.exists(t)&&a.utimesSync(t,Date.now()/1e3,Date.now()/1e3)},getURL:function(t){return\\\"file:///\\\"+t.replace(/\\\\\\\\/g,\\\"/\\\")},onAddObserver:function(t,e){var n=this,i=n.getRootFS();e=e||{};var s=this.isDir(t),u=a.watch(t,e,function(e,a){var u,c=s?r.rel(t,a):t;u=n.exists(c)?o({eventType:e},n.getMetaInfo(c)):{eventType:e},i.notifyChanged(c,u)});return{remove:function(){u.close()}}}}),f}),r(\\\"LSFS\\\",[\\\"FSClass\\\",\\\"PathUtil\\\",\\\"extend\\\",\\\"assert\\\",\\\"Util\\\",\\\"Content\\\"],function(t,e,n,r,i,o){var s=function(t,e){r(t,\\\" new LSFS fail: no storage\\\"),this.storage=t,this.options=e||{},this.options.useDirCache&&(this.dirCache={})},a=e.isDir.bind(e),u=e.up.bind(e),c=e.endsWith.bind(e),f=e.Absolute,l=e.SEP;function p(){return(new Date).getTime()}return s.ramDisk=function(t){var n={};return n[e.SEP]=\\\"{}\\\",\\\"useDirCache\\\"in(t=t||{})||(t.useDirCache=!0),new s(n,t)},t.addFSType(\\\"localStorage\\\",function(t,e){return new s(localStorage,e)}),t.addFSType(\\\"ram\\\",function(t,e){return s.ramDisk(e)}),s.now=p,(s.prototype=new t).resolveKey=function(t){return r.is(t,e.Absolute),this.mountPoint?e.SEP+e.relPath(t,this.mountPoint):t},s.prototype.getItem=function(t){r.is(t,e.Absolute);var n=this.resolveKey(t);return this.storage[n]},s.prototype.setItem=function(t,n){r.is(t,e.Absolute);var i=this.resolveKey(t);r(i.indexOf(\\\"..\\\")<0),r(e.startsWith(i,e.SEP)),this.storage[i]=n},s.prototype.removeItem=function(t){r.is(t,e.Absolute);var n=this.resolveKey(t);delete this.storage[n]},s.prototype.itemExists=function(t){r.is(t,e.Absolute);var n=this.resolveKey(t);return r(this.storage,\\\"No storage\\\"),n in this.storage},s.prototype.getDirInfo=function(t){if(r.is(arguments,[e.AbsDir]),null==t)throw new Error(\\\"getDir: Null path\\\");if(c(t,l)||(t+=l),r(this.inMyFS(t)),this.dirCache&&this.dirCache[t])return this.dirCache[t];var n,i={};try{(n=this.getItem(t))&&(i=JSON.parse(n))}catch(e){console.log(\\\"dinfo err : \\\",t,n)}return this.dirCache&&(this.dirCache[t]=i),i},s.prototype.putDirInfo=function(t,n,i){if(r.is(arguments,[e.AbsDir,Object]),!a(t))throw new Error(\\\"Not a directory : \\\"+t);r(this.inMyFS(t)),this.dirCache&&(this.dirCache[t]=n),this.setItem(t,JSON.stringify(n));var o=u(t);if(null!=o&&this.inMyFS(o)){var s=this.getDirInfo(o);this._touch(s,o,e.name(t),i)}},s.prototype._touch=function(t,i,o,s){r.is(arguments,[Object,String,String]),r(this.inMyFS(i));var a=\\\"change\\\";t[o]||(a=\\\"create\\\",t[o]={},s&&(t[o].trashed=!0)),s||delete t[o].trashed,t[o].lastUpdate=p();var u=n({eventType:a},t[o]);this.getRootFS().notifyChanged(e.rel(i,o),u),this.putDirInfo(i,t,s)},s.prototype.removeEntry=function(t,n,i){r.is(arguments,[Object,String,String]),t[i]&&(t[i]={lastUpdate:p(),trashed:!0},this.getRootFS().notifyChanged(e.rel(n,i),{eventType:\\\"trash\\\"}),this.putDirInfo(n,t,!0))},s.prototype.removeEntryWithoutTrash=function(t,n,i){r.is(arguments,[Object,String,String]),t[i]&&(delete t[i],this.getRootFS().notifyChanged(e.rel(n,i),{eventType:\\\"delete\\\"}),this.putDirInfo(n,t,!0))},s.prototype.isRAM=function(){return this.storage!==localStorage},s.prototype.fstype=function(){return this.isRAM()?\\\"ramDisk\\\":\\\"localStorage\\\"},s.getUsage=function(){var t=0;for(var e in localStorage)\\\"string\\\"==typeof localStorage[e]&&(t+=localStorage[e].length);return t},s.getCapacity=function(){var t=0,e=\\\"a\\\",n=\\\"___checkls___\\\",r=0,i=Math.pow(2,25);try{for(var o=0;o<10;o++)e+=e;for(var o in localStorage)o.substring(0,n.length)==n?delete localStorage[o]:\\\"string\\\"==typeof localStorage[o]&&(r+=localStorage[o].length);for(var s=r;a()&&e.length<i;)e+=e;for(;e.length>1024;)e=e.substring(e.length/2),a();return{using:s,max:r}}finally{for(o=0;o<t;o++)delete localStorage[n+o]}function a(){try{return localStorage[n+t]=e,t++,r+=e.length,!0}catch(e){return delete localStorage[n+t],!1}}},t.delegateMethods(s.prototype,{isReadOnly:function(){return this.options.readOnly},getReturnTypes:function(t,e){return r.is(arguments,[String]),{getContent:String,opendir:[String]}},getContent:function(t,e){r.is(arguments,[f]),this.assertExist(t);var n=this.getItem(t);return o.looksLikeDataURL(n)?o.url(n):o.plainText(n)},setContent:function(t,e,n){r.is(arguments,[f,o]),this.assertWriteable(t);var i=null;e.hasPlainText()&&(i=e.toPlainText(),o.looksLikeDataURL(i)&&(i=null)),null!=i?this.setItem(t,i):this.setItem(t,e.toURL()),this.touch(t)},getMetaInfo:function(t,n){if(this.assertExist(t,{includeTrashed:!0}),r.is(arguments,[f]),t==e.SEP)return{};var i=r(e.up(t));if(!this.inMyFS(i))return{};var o=e.name(t);r.is(i,e.AbsDir);var s=this.getDirInfo(i);return r(s[o])},setMetaInfo:function(t,n,i){r.is(arguments,[String,Object]),this.assertWriteable(t);var o=r(e.up(t));if(this.inMyFS(o)){var s=this.getDirInfo(o),a=e.name(t);s[a]=n,this.putDirInfo(o,s,s[a].trashed)}},mkdir:function(t,e){r.is(arguments,[f]),this.assertWriteable(t),this.touch(t)},opendir:function(t,e){r.is(arguments,[String]),e=e||{};var n=this.getDirInfo(t),i=[];for(var o in n)r(n[o]),n[o].trashed&&!e.includeTrashed||i.push(o);return r.is(i,Array)},rm:function(t,n){r.is(arguments,[f]),n=n||{},this.assertWriteable(t);var i=e.up(t);if(null==i||!this.inMyFS(i))throw new Error(t+\\\": cannot remove. It is root of this FS.\\\");this.assertExist(t,{includeTrashed:n.noTrash}),e.isDir(t)?(this.opendir(t).length>0&&this.err(t,\\\"Directory not empty\\\"),n.noTrash&&this.removeItem(t)):this.removeItem(t);var o=this.getDirInfo(i);n.noTrash?this.removeEntryWithoutTrash(o,i,e.name(t)):this.removeEntry(o,i,e.name(t))},exists:function(t,n){r.is(arguments,[f]),n=n||{};var i=e.name(t),o=e.up(t);if(null==o||!this.inMyFS(o))return!0;var s=this.getDirInfo(o)[i];return s&&s.trashed&&this.itemExists(t)&&this.isDir(t),!s&&this.itemExists(t),s&&!s.trashed&&!s.link&&this.itemExists(t),s&&!n.includeTrashed&&(s=!s.trashed),!!s},link:function(t,n,i){r.is(arguments,[e.Absolute,e.Absolute]),this.assertWriteable(t),this.exists(t)&&this.err(t,\\\"file exists\\\"),e.isDir(t)&&!e.isDir(n)&&this.err(t,\\\" can not link to file \\\"+n),!e.isDir(t)&&e.isDir(n)&&this.err(t,\\\" can not link to directory \\\"+n);var o={};o.link=n,o.lastUpdate=p(),this.setMetaInfo(t,o),r(this.exists(t)),r(this.isLink(t))},isLink:function(t){return r.is(arguments,[e.Absolute]),this.exists(t)?r(this.getMetaInfo(t)).link:null},touch:function(t){r.is(arguments,[f]),this.assertWriteable(t),this.itemExists(t)||(e.isDir(t)?(this.dirCache&&(this.dirCache[t]={}),this.setItem(t,\\\"{}\\\")):this.setItem(t,\\\"\\\"));var n=u(t);if(null!=n)if(this.inMyFS(n)){var i=this.getDirInfo(n);this._touch(i,n,e.name(t),!1)}else r(this.getRootFS()!==this),this.getRootFS().resolveFS(n).touch(n)},getURL:function(t){return this.getContent(t).toURL()},opendirEx:function(t,n){r.is(t,e.AbsDir),n=n||{};var i={},o=this.getDirInfo(t);if(n.includeTrashed)return o;for(var s in o)o[s].trashed||(i[s]=o[s]);return i}}),s}),\\\"undefined\\\"!=typeof $&&$.ajaxTransport(\\\"+binary\\\",function(t,e,n){if(window.FormData&&(t.dataType&&\\\"binary\\\"==t.dataType||t.data&&(window.ArrayBuffer&&t.data instanceof ArrayBuffer||window.Blob&&t.data instanceof Blob)))return{send:function(e,n){var r=new XMLHttpRequest,i=t.url,o=t.type,s=t.async||!0,a=t.responseType||\\\"blob\\\",u=t.data||null,c=t.username||null,f=t.password||null;for(var l in r.addEventListener(\\\"load\\\",function(){var e={};e[t.dataType]=r.response,n(r.status,r.statusText,e,r.getAllResponseHeaders())}),r.open(o,i,s,c,f),e)r.setRequestHeader(l,e[l]);r.responseType=a,r.send(u)},abort:function(){n.abort()}}}),r(\\\"jquery.binarytransport\\\",function(){}),r(\\\"WebFS\\\",[\\\"FSClass\\\",\\\"jquery.binarytransport\\\",\\\"DeferredUtil\\\",\\\"Content\\\",\\\"PathUtil\\\"],function(t,e,n,r,i){var o=function(){},s=o.prototype=new t;return t.addFSType(\\\"web\\\",function(){return new o}),s.fstype=function(){return\\\"Web\\\"},s.supportsSync=function(){return!1},s.inMyFS=function(t){return i.isURL(t)},t.delegateMethods(s,{exists:function(){return!0},getContentAsync:function(t){var e=this;return n.promise(function(n,i){$.get(t,function(i){var o=new FileReader;o.addEventListener(\\\"loadend\\\",function(){n(r.bin(o.result,e.getContentType(t)))}),o.readAsArrayBuffer(i)},\\\"binary\\\").fail(i)})},getURL:function(t){return t}}),o}),r(\\\"Env\\\",[\\\"assert\\\",\\\"PathUtil\\\"],function(t,e){var n=function(t){this.value=t};return n.prototype={expand:function(e){t.is(e,String);var n=this;return e.replace(/\\\\$\\\\{([a-zA-Z0-9_]+)\\\\}/g,function(t,e){return n.get(e)})},expandPath:function(n){return t.is(n,String),n=(n=(n=this.expand(n)).replace(/\\\\/+/g,\\\"/\\\")).replace(/^[a-z][a-z]+:\\\\//,function(t){return t+\\\"/\\\"}),t.is(n,e.Path)},get:function(t){return this.value[t]},set:function(t,e){this.value[t]=e}},n}),r(\\\"SFile\\\",[\\\"extend\\\",\\\"assert\\\",\\\"PathUtil\\\",\\\"Util\\\",\\\"Content\\\",\\\"FSClass\\\",\\\"FileSaver\\\",\\\"DeferredUtil\\\"],function(t,e,n,r,i,o,s,a){var u=function(t,r){e.is(r,n.Absolute),this._path=r,this.rootFS=t,this.fs=t.resolveFS(r),this.isDir()&&!n.isDir(r)&&(this._path+=n.SEP)};return u.is=function(t){return t&&\\\"function\\\"==typeof t.isSFile&&t.isSFile()},u.prototype={isSFile:function(){return!0},setPolicy:function(t){if(this.policy)throw new Error(\\\"policy already set\\\");return this.policy=t,this._clone()},getPolicy:function(t){return this.policy},_clone:function(){return this._resolve(this.path())},_resolve:function(t,i){var o;if(i=i||{},u.is(t))o=t;else{var s;e.is(t,n.Absolute);var a=i.policy||this.policy;if(a&&(s=a.topDir)&&(s.path&&(s=s.path()),!n.startsWith(t,s)))throw new Error(t+\\\": cannot access. Restricted to \\\"+s);(o=new u(this.rootFS,t)).policy=a}return o.policy?r.privatize(o):o},contains:function(t){return e(u.is(t),t+\\\" shoud be a SFile object.\\\"),!!this.isDir()&&n.startsWith(t.path(),this.path())},path:function(){return this._path},name:function(){return n.name(this.path())},truncExt:function(t){return n.truncExt(this.path(),t)},ext:function(){return n.ext(this.path())},relPath:function(t){var r=t.path?t.path():t;return n.relPath(this.path(),e.is(r,n.Absolute))},up:function(){var t=this.path(),e=n.up(t);return null==e?null:this._resolve(e)},rel:function(t){e.is(t,n.Relative),this.assertDir();var r=this.path();return this._resolve(n.rel(r,t))},sibling:function(t){return this.up().rel(t)},startsWith:function(t){return n.startsWith(this.name(),t)},endsWith:function(t){return n.endsWith(this.name(),t)},equals:function(t){return t&&\\\"function\\\"==typeof t.path&&t.path()==this.path()},toString:function(){return this.path()},touch:function(){return this.act.fs.touch(this.act.path)},isReadOnly:function(){return this.act.fs.isReadOnly(this.act.path)},isTrashed:function(){var t=this.metaInfo();return!!t&&t.trashed},metaInfo:function(){return 0==arguments.length?this.getMetaInfo.apply(this,arguments):this.setMetaInfo.apply(this,arguments)},getMetaInfo:function(t){return this.act.fs.getMetaInfo(this.act.path,t)},setMetaInfo:function(t,e){return this.act.fs.setMetaInfo(this.act.path,t,e)},getDirTree:function(t){return this.act.fs.getDirTree(this.act.path,t)},assertExists:function(){e(this.exists(),this.path()+\\\" does not exist.\\\")},lastUpdate:function(){return this.assertExists(),this.metaInfo().lastUpdate},exists:function(t){var e=Array.prototype.slice.call(arguments);if(\\\"function\\\"==typeof e[0]){var n=e.shift();return a.resolve(this.exists.apply(this,e)).then(n)}t=t||{};var r=this.fs.exists(this.path(),t);return r||t.noFollowLink?r:this.act.fs.exists(this.act.path,{noFollowLink:!0})},rm:function(t){var e=this;return t=t||{},this.isLink()?a.resolve(this.fs.rm(this.path(),t)):(this.isDir()&&(t.recursive||t.r)?this.each(function(e){return e.rm(t)}):a.resolve()).then(function(){return e.act.fs.rm(e.act.path,t)})},removeWithoutTrash:function(t){(t=t||{}).noTrash=!0,this.rm(t)},isDir:function(){return this.act.fs.isDir(this.act.path)},text:function(t){return\\\"function\\\"==typeof t?this.getText(t):arguments.length>0?this.setText(arguments[0]):this.getText()},setText:function(t){if(e.is(t,String),this.isDir())throw new Error(\\\"Cannot write to directory: \\\"+this.path());var n=this.contentType({def:null});return null!==n&&!n.match(/^text/)&&i.looksLikeDataURL(t)?a.throwNowIfRejected(this.setContent(i.url(t))):a.throwNowIfRejected(this.setContent(i.plainText(t)))},appendText:function(t){return e.is(t,String),this.act.fs.appendContent(this.act.path,i.plainText(t))},getContent:function(t){return\\\"function\\\"==typeof t?this.act.fs.getContentAsync(this.act.path).then(t):this.act.fs.getContent(this.act.path)},setContent:function(t){if(this.isDir())throw new Error(\\\"Cannot write to directory: \\\"+this.path());return this.act.fs.setContentAsync(this.act.path,t)},getText:function(t){return\\\"function\\\"==typeof t?this.getContent(e).then(t):e(this.act.fs.getContent(this.act.path));function e(t){try{return t.toPlainText()}catch(e){return t.toURL()}}},getDataURL:function(t){return\\\"function\\\"==typeof t?this.getContent(function(t){return t.toURL()}):this.getContent().toURL()},setDataURL:function(t){return this.setContent(i.url(t))},dataURL:function(t){return\\\"string\\\"==typeof t?this.setDataURL(t):\\\"function\\\"==typeof t?this.getDataURL(t):this.getDataURL()},isText:function(){return this.act.fs.isText(this.act.path)},contentType:function(t){return this.act.fs.getContentType(this.act.path,t)},bytes:function(t){return i.isBuffer(t)?this.setBytes(t):this.getBytes()},setBytes:function(t){return this.act.fs.setContent(this.act.path,i.bin(t,this.contentType()))},getBytes:function(t){return t=t||{},this.act.fs.getContent(this.act.path).toBin(t.binType)},getURL:function(){return this.act.fs.getURL(this.act.path)},lines:function(t){return t instanceof Array?this.text(t.join(\\\"\\\\n\\\")):\\\"function\\\"==typeof t?this.text(function(e){return t(e.replace(/\\\\r/g,\\\"\\\").split(\\\"\\\\n\\\"))}):this.text().replace(/\\\\r/g,\\\"\\\").split(\\\"\\\\n\\\")},obj:function(){if(0==arguments.length){var t=this.text();return t?JSON.parse(t):null}this.text(JSON.stringify(e.is(arguments[0],Object)))},copyFrom:function(t,e){return t.copyTo(this,e)},copyTo:function(t,n){e(t&&t.isSFile(),t+\\\" is not a file\\\");var r=this,i=(n=n||{},r.isDir()),o=t.isDir();if(!i&&o&&(t=t.rel(r.name()),e(!t.isDir(),t+\\\" is a directory.\\\"),o=!1),!i||o){if(i||o)return e(i&&o,\\\"Both src and dst should be dir\\\"),r.each(function(e){var r,i=t.rel(e.name());return n.progress&&(r=n.progress(i,{src:e,dst:i})),a.resolve(r).then(function(){return i.copyFrom(e,n)})});n.echo&&n.echo(r+\\\" -> \\\"+t);var s=this.act.fs.cp(this.act.path,t.getResolvedLinkPath(),n);return s=a.resolve(s),n.a?s.then(function(){return t.setMetaInfo(r.getMetaInfo())}):s}this.err(\\\"Cannot move dir \\\"+r.path()+\\\" to file \\\"+t.path())},moveFrom:function(t,e){var n=this;return n.exists(function(r){return n.copyFrom(t,e).then(function(){return t.rm({recursive:!0})},function(t){if(!r)return n.exists(function(t){if(t)return n.rm({recursive:!0})}).then(function(){throw t});throw t})})},moveTo:function(t,e){return t.moveFrom(this,e)},assertDir:function(){return e.is(this.path(),n.Dir),this},each:function(t,e){return this.assertDir().listFilesAsync(e).then(function(e){return a.each(e,t)})},eachrev:function(t,e){return this.assertDir().listFilesAsync(e).then(function(e){return a.each(e.reverse(),t)})},recursive:function(t,e){var n=this.assertDir();return e=n.convertOptions(e),n.each(function(n){return n.isDir()?n.recursive(t,e):t(n)},e)},_listFiles:function(t,n){e(null==t||\\\"object\\\"==typeof t);var r,i=this.assertDir();return this.path(),t=i.convertOptions(t),r||(r=t.order),n?this.act.fs.opendirAsync(this.act.path,t).then(o):o(this.act.fs.opendir(this.act.path,t));function o(e){for(var n=[],o=0;o<e.length;o++){var s=e[o],a=i.rel(s);t.excludesF(a)||n.push(a)}return\\\"function\\\"==typeof r&&n.sort&&n.sort(r),n}},listFilesAsync:function(t){return this._listFiles(t,!0)},listFiles:function(t){return this._listFiles(t,!1)},ls:function(t){e(null==t||\\\"object\\\"==typeof t);var n=this.assertDir();return t?n.listFiles(t).map(function(t){return t.name()}):this.act.fs.opendir(this.act.path,t)},convertOptions:function(t){var i=r.extend({},t),o=(this.assertDir(),this.path()),s=i.excludes||{};if(\\\"function\\\"==typeof s)i.excludesF=s;else if(\\\"object\\\"==typeof s){if(s instanceof Array){var a={};s.forEach(function(t){n.startsWith(t,\\\"/\\\")?a[t]=1:a[o+t]=1}),s=a}i.excludesF=function(t){return s[t.path()]}}return e.is(i,{excludesF:Function})},mkdir:function(){return this.touch()},link:function(t,e){if(this.exists())throw new Error(this.path()+\\\": exists.\\\");return this.act.fs.link(this.act.path,t.path(),e)},resolveLink:function(){return this._resolve(this.act.path)},isLink:function(){return this.fs.isLink(this.path())},getResolvedLinkPath:function(){return this.act.path},getFS:function(){return this.act.fs},observe:function(t){return this.getFS().getRootFS().addObserver(this.path(),t)},getBlob:function(){return new Blob([this.bytes()],{type:this.contentType()})},setBlob:function(t){var e=this;return a.promise(function(n,r){var i=new FileReader;i.addEventListener(\\\"loadend\\\",function(){a.resolve(e.setBytes(i.result)).then(n)}),i.readAsArrayBuffer(t)})},size:function(t){if(!t){if(this.isDir()){var e=0;return this.each(function(t){e+=t.size()}),e}return this.act.fs.size(this.act.path)}},download:function(){if(this.isDir())throw new Error(this+\\\": Download dir is not support yet. Use 'zip' instead.\\\");s(this.getBlob(),this.name())},err:function(){var t=Array.prototype.slice.call(arguments);throw console.log.apply(console,t),new Error(t.join(\\\"\\\"))},exportAsObject:function(t){var e=this,n={};return this.recursive(function(t){n[t.relPath(e)]=t.text()},t),{base:e.path(),data:n}},importFromObject:function(t,e){for(var n in\\\"string\\\"==typeof t&&(t=JSON.parse(t)),t=t.data)this.rel(n).text(t[n])},watch:function(t,e){var n=function(){};\\\"function\\\"==typeof t&&(n=t),\\\"function\\\"==typeof e&&(n=e);var r=this.getFS().getRootFS();r.addObserver(this.path(),function(t,e){n(e.eventType,r.get(t),e)})}},Object.defineProperty(u.prototype,\\\"act\\\",{get:function(){return this._act?this._act:(this._act={},this._act.path=this.fs.resolveLink(this._path),this._act.fs=this.rootFS.resolveFS(this._act.path),e.is(this._act,{fs:o,path:n.Absolute}),this._act)}}),u}),r(\\\"RootFS\\\",[\\\"assert\\\",\\\"FSClass\\\",\\\"PathUtil\\\",\\\"SFile\\\"],function(t,e,n,r){var i=function(n){t.is(n,e),this.mount(null,n)},o=i.prototype,s={err:function(t,e){throw new Error(t+\\\": \\\"+e)},fstab:function(){return this._fstab=this._fstab||[]},unmount:function(e,r){t.is(arguments,[n.AbsDir]);var i=this.fstab();console.log(i);for(var o=0;o<i.length;o++)if(i[o].mountPoint==e)return i.splice(o,1),!0;return!1},availFSTypes:function(){return e.availFSTypes()},mount:function(n,r,i){\\\"string\\\"==typeof r&&(r=t(e.availFSTypes()[r],\\\"fstype \\\"+r+\\\" is undefined.\\\")(n,i||{})),t.is(r,e),r.mounted(this,n),this.fstab().unshift(r)},resolveFS:function(r,i){var o;return t.is(r,n.Absolute),this.fstab().forEach(function(t){o||t.inMyFS(r)&&(o=t)}),o||this.err(r,\\\"Cannot resolve\\\"),t.is(o,e)},get:function(e){return t.is(e,n.Absolute),new r(this.resolveFS(e),e)},addObserver:function(e,n,r){this.observers=this.observers||[];var i,o,s={};\\\"string\\\"==typeof e&&(i=e),\\\"string\\\"==typeof n&&(i=n),\\\"string\\\"==typeof r&&(i=r),\\\"object\\\"==typeof e&&(s=e),\\\"object\\\"==typeof n&&(s=n),\\\"object\\\"==typeof r&&(s=r),\\\"function\\\"==typeof e&&(o=e),\\\"function\\\"==typeof n&&(o=n),\\\"function\\\"==typeof r&&(o=r),t.is(i,String),t.is(o,Function);var a=this.resolveFS(i).onAddObserver(i,s),u=this.observers,c={path:i,handler:o,remove:function(){var t=u.indexOf(this);u.splice(t,1),a&&a.remove()}};return this.observers.push(c),c},notifyChanged:function(t,e){this.observers&&this.observers.forEach(function(r){n.isChildOf(t,r.path)&&r.handler(t,e)})},getRootFS:function(){return this}};for(var a in s)o[a]=s[a];return i}),r(\\\"zip\\\",[\\\"SFile\\\",\\\"FileSaver\\\",\\\"Util\\\",\\\"DeferredUtil\\\"],function(t,e,n,r){var i={setJSZip:function(t){i.JSZip=t,r.external.Promise||(r.external.Promise=t.external.Promise)}};return\\\"undefined\\\"!=typeof JSZip&&i.setJSZip(JSZip),i.zip=function(e,n,o){t.is(n)||(o=n),o=o||{};var s=new i.JSZip;return function t(e,n){return n.each(function(n){var i=r.resolve();return o.progress&&(i=o.progress(n)),i.then(function(){return n.isDir()?t(e.folder(n.name().replace(/[\\\\/\\\\\\\\]$/,\\\"\\\")),n):n.getContent(function(t){e.file(n.name(),t.toArrayBuffer())})})})}(s,e).then(function(){return r.resolve(s.generateAsync({type:\\\"arraybuffer\\\",compression:\\\"DEFLATE\\\"}))}).then(function(r){if(t.is(n))return n.setBytes(r);saveAs(new Blob([r],{type:\\\"application/zip\\\"}),e.name().replace(/[\\\\/\\\\\\\\]$/,\\\"\\\")+\\\".zip\\\")})},i.unzip=function(e,n,o){var s={};o=o||{},t.is(e)&&(e=e.getContent().toArrayBuffer()),o.onCheckFile||(o.onCheckFile=function(t){return o.overwrite?t:!t.exists()&&t});var a=new i.JSZip;return r.resolve(a.loadAsync(e)).then(function(){return r.each(a.files,function(e,i){var a,u;return r.resolve(i.async(\\\"arraybuffer\\\")).then(function(t){if(a=t,u=n.rel(i.name),o.progress)return r.resolve(o.progress(u))}).then(function(){if(console.log(\\\"Inflating\\\",i.name),!u.isDir()){var e={file:u,status:\\\"uploaded\\\"};s[u.path()]=e;var n=FS.Content.bin(a,u.contentType()),r=o.onCheckFile(u,n);return!1===r&&(e.status=\\\"cancelled\\\",u=null),t.is(r)&&(u.path()!==r.path()&&(e.redirectedTo=r),u=r),u?u.setContent(n):void 0}})})}).then(function(){return console.log(\\\"unzip done\\\",s),s})},i}),r(\\\"promise\\\",[],function(){function t(t){return Boolean(t&&void 0!==t.length)}function e(){}function n(t){if(!(this instanceof n))throw new TypeError(\\\"Promises must be constructed via new\\\");if(\\\"function\\\"!=typeof t)throw new TypeError(\\\"not a function\\\");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(t,this)}function r(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void o(e.promise,t)}i(e.promise,r)}else(1===t._state?i:o)(e.promise,t._value)})):t._deferreds.push(e)}function i(t,e){try{if(e===t)throw new TypeError(\\\"A promise cannot be resolved with itself.\\\");if(e&&(\\\"object\\\"==typeof e||\\\"function\\\"==typeof e)){var r=e.then;if(e instanceof n)return t._state=3,t._value=e,void s(t);if(\\\"function\\\"==typeof r)return void a((i=r,u=e,function(){i.apply(u,arguments)}),t)}t._state=1,t._value=e,s(t)}catch(e){o(t,e)}var i,u}function o(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)r(t,t._deferreds[e]);t._deferreds=null}function a(t,e){var n=!1;try{t(function(t){n||(n=!0,i(e,t))},function(t){n||(n=!0,o(e,t))})}catch(t){if(n)return;n=!0,o(e,t)}}return setTimeout,n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,n){var i=new this.constructor(e);return r(this,new function(t,e,n){this.onFulfilled=\\\"function\\\"==typeof t?t:null,this.onRejected=\\\"function\\\"==typeof e?e:null,this.promise=n}(t,n,i)),i},n.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},n.all=function(e){return new n(function(n,r){if(!t(e))return r(new TypeError(\\\"Promise.all accepts an array\\\"));var i=Array.prototype.slice.call(e);if(0===i.length)return n([]);var o=i.length;function s(t,e){try{if(e&&(\\\"object\\\"==typeof e||\\\"function\\\"==typeof e)){var a=e.then;if(\\\"function\\\"==typeof a)return void a.call(e,function(e){s(t,e)},r)}i[t]=e,0==--o&&n(i)}catch(t){r(t)}}for(var a=0;a<i.length;a++)s(a,i[a])})},n.resolve=function(t){return t&&\\\"object\\\"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,n){n(t)})},n.race=function(e){return new n(function(r,i){if(!t(e))return i(new TypeError(\\\"Promise.race accepts an array\\\"));for(var o=0,s=e.length;o<s;o++)n.resolve(e[o]).then(r,i)})},n._immediateFn=function(t){t()},n._unhandledRejectionFn=function(){\\\"undefined\\\"!=typeof console&&console},n}),r(\\\"FS\\\",[\\\"FSClass\\\",\\\"NativeFS\\\",\\\"LSFS\\\",\\\"WebFS\\\",\\\"PathUtil\\\",\\\"Env\\\",\\\"assert\\\",\\\"SFile\\\",\\\"RootFS\\\",\\\"Content\\\",\\\"zip\\\",\\\"DeferredUtil\\\",\\\"promise\\\"],function(t,e,n,r,i,o,s,a,u,c,f,l,p){var h,d={};d.assert=s,d.Content=c,d.Class=t,d.DeferredUtil=l,l.config.useJQ||(l.external.Promise=p),d.Env=o,d.LSFS=n,d.NativeFS=e,d.PathUtil=i,d.RootFS=u,d.SFile=a,d.WebFS=r,d.zip=f,\\\"object\\\"==typeof window&&(window.FS=d);var m=new o({});return d.addFSType=t.addFSType,d.availFSTypes=t.availFSTypes,d.setEnvProvider=function(t){m=t},d.getEnvProvider=function(){return m},d.setEnv=function(t,e){if(\\\"object\\\"==typeof t)for(var n in t)m.set(n,t[n]);else m.set(t,e)},d.getEnv=function(t){return\\\"string\\\"==typeof t?m.get(t):m.value},d.init=function(t){h||(t||(e.available?t=new e:\\\"object\\\"==typeof localStorage?t=new n(localStorage):\\\"function\\\"==typeof importScripts&&(self.addEventListener(\\\"message\\\",function(t){var e=t.data;switch(\\\"string\\\"==typeof e&&(e=JSON.parse(e)),e.type){case\\\"upload\\\":d.get(e.base).importFromObject(e.data);break;case\\\"observe\\\":h.observe(e.path,function(t,e){self.postMessage(JSON.stringify({type:\\\"changed\\\",path:t,content:d.get(t).text(),meta:e}))})}}),t=n.ramDisk())),h=new u(t))},d.getRootFS=function(){return d.init(),h},d.get=function(){return d.init(),h.get.apply(h,arguments)},d.expandPath=function(){return m.expandPath.apply(m,arguments)},d.resolve=function(t,e){return d.init(),a.is(t)?t:(t=m.expandPath(t),e&&!i.isAbsolutePath(t)?(e=m.expandPath(e),d.get(e).rel(t)):d.get(t))},d.mount=function(){return d.init(),h.mount.apply(h,arguments)},d.unmount=function(){return d.init(),h.unmount.apply(h,arguments)},d.isFile=function(t){return a.is(t)},d}),i([\\\"FS\\\"],function(t){o=t}),\\\"undefined\\\"!=typeof window&&void 0===window.FS&&(window.FS=o),void 0!==e&&(e=o),o)},{fs:1}],21:[function(t,e,n){var r=1,i={},o={},s=self;s.WorkerService={install:function(t,e){i[t]=e},serv:function(t,e){this.install(t,e)},ready:function(){s.WorkerService.isReady=!0,self.postMessage({ready:!0})},reverse:function(t,e){var n=r++;return new Promise(function(r,i){o[n]=function(t){\\\"ok\\\"==t.status?r(t.result):i(t.error)},self.postMessage({reverse:!0,id:n,path:t,params:e})})}},self.addEventListener(\\\"message\\\",function(t){var e=t.data,n=e.id,r={id:n};if(e.reverse)return o[e.id](e),void delete o[e.id];try{Promise.resolve(i[e.path](e.params,r)).then(function(t){self.postMessage({id:n,result:t,status:\\\"ok\\\"})},s)}catch(t){s(t)}function s(t){t=Object.assign({name:t.name,message:t.message,stack:t.stack},t||{});try{const e=JSON.stringify(t);t=JSON.parse(e)}catch(e){t=t?t.message||t+\\\"\\\":\\\"unknown\\\",console.log(\\\"WorkerServiceW\\\",e,t)}self.postMessage({id:n,error:t,status:\\\"error\\\"})}}),s.WorkerService.install(\\\"WorkerService/isReady\\\",function(){return s.WorkerService.isReady}),s.console||(s.console={log:function(){s.WorkerService.reverse(\\\"console/log\\\",Array.prototype.slice.call(arguments))}}),e.exports=self.WorkerService},{}],22:[function(t,e,n){const r=function(t){this.failMesg=a(t||\\\"Assertion failed: \\\")};var i;r.prototype={_regedType:{},registerType:function(t,e){this._regedType[t]=e},MODE_STRICT:\\\"strict\\\",MODE_DEFENSIVE:\\\"defensive\\\",MODE_BOOL:\\\"bool\\\",fail:function(){var t=i(arguments),e=t.shift();if(t=a(t),t=this.failMesg.concat(e).concat(t).concat([\\\"mode\\\",this._mode]),console.log.apply(console,t),this.isDefensive())return e;if(this.isBool())return!1;throw new Error(t.join(\\\" \\\"))},subAssertion:function(){var t=i(arguments);return t=a(t),new r(this.failMesg.concat(t))},assert:function(t,e){return t||this.fail(t,e)},eq:function(t,e){return t!==e?this.fail(t,\\\"!==\\\",e):!!this.isBool()||t},ne:function(t,e){return t===e?this.fail(t,\\\"===\\\",e):!!this.isBool()||t},isset:function(t,e){return null==t?this.fail(t,(e||\\\"\\\")+\\\" is null/undef\\\"):!!this.isBool()||t},is:function(t,e){var n=e,r=t;if(null==n)return this.fail(t,\\\"assert.is: type must be set\\\");if(n._assert_func)return n._assert_func.apply(this,[r]),!!this.isBool()||t;if(this.assert(null!=t,[t,\\\"should be \\\",n]),n instanceof Array||\\\"object\\\"==typeof global&&\\\"function\\\"==typeof global.Array&&n instanceof global.Array){if(!t||\\\"number\\\"!=typeof t.length)return this.fail(t,\\\"should be array:\\\");for(var i=0;i<n.length;i++){let e=this.subAssertion(\\\"failed at \\\",t,\\\"[\\\",i,\\\"]: \\\");null==n[i]&&console.log(\\\"WOW!7\\\",r[i],n[i]),e.is(r[i],n[i])}return!!this.isBool()||t}if(n===String||\\\"string\\\"==n)return this.assert(\\\"string\\\"==typeof r,[r,\\\"should be a string \\\"]),!!this.isBool()||t;if(n===Number||\\\"number\\\"==n)return this.assert(\\\"number\\\"==typeof r,[r,\\\"should be a number\\\"]),!!this.isBool()||t;if(n instanceof RegExp||\\\"object\\\"==typeof global&&\\\"function\\\"==typeof global.RegExp&&n instanceof global.RegExp)return this.is(r,String),this.assert(n.exec(r),[r,\\\"does not match to\\\",n]),!!this.isBool()||t;if(n===Function)return this.assert(\\\"function\\\"==typeof r,[r,\\\"should be a function\\\"]),!!this.isBool()||t;if(\\\"function\\\"==typeof n)return this.assert(r instanceof n,[r,\\\"should be \\\",n]),!!this.isBool()||t;if(n&&\\\"object\\\"==typeof n){for(var o in n){this.subAssertion(\\\"failed at \\\",t,\\\".\\\",o,\\\":\\\").is(t[o],n[o])}return!!this.isBool()||t}if(\\\"string\\\"==typeof n){var s=this._regedType[n];return s?this.is(t,s):!!this.isBool()||t}return this.fail(t,\\\"Invaild type: \\\",n)},ensureError:function(t,e){try{t()}catch(n){return\\\"string\\\"==typeof e&&s(n+\\\"\\\"===e,t+\\\" thrown an error \\\"+n+\\\" but expected:\\\"+e),void console.log(\\\"Error thrown successfully: \\\",n.message)}this.fail(t,\\\"should throw an error\\\",e)},setMode:function(t){this._mode=t},isDefensive:function(){return this._mode===this.MODE_DEFENSIVE},isBool:function(){return this._mode===this.MODE_BOOL},isStrict:function(){return!this.isDefensive()&&!this.isBool()}},i=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e};var o=new r,s=function(){try{return o.assert.apply(o,arguments)}catch(t){throw new Error(t.message)}};function a(t){if(t instanceof Array){var e=[];return t.forEach(function(t){e=e.concat(a(t))}),e}return[t]}[\\\"setMode\\\",\\\"isDefensive\\\",\\\"is\\\",\\\"isset\\\",\\\"ne\\\",\\\"eq\\\",\\\"ensureError\\\"].forEach(function(t){s[t]=function(){try{return o[t].apply(o,arguments)}catch(t){throw console.log(t.stack),new Error(t.message)}}}),s.fail=o.fail.bind(o),s.MODE_STRICT=o.MODE_STRICT,s.MODE_DEFENSIVE=o.MODE_DEFENSIVE,s.MODE_BOOL=o.MODE_BOOL,s.f=function(t){return{_assert_func:t}},s.opt=function(t){return s.f(function(e){return null==e||e instanceof t})},s.and=function(){var t=i(arguments);return s(t instanceof Array),s.f(function(e){for(var n=0;n<t.length;n++)this.is(e,t[n])})},e.exports=s},{}],23:[function(t,e,n){e.exports=\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof self?self:\\\"undefined\\\"!=typeof global?global:function(){return this}()},{}],24:[function(t,e,n){const r=t(\\\"./ProjectFactory\\\"),i=(t(\\\"../lib/root\\\"),t(\\\"../lang/SourceFiles\\\")),o=t(\\\"../lang/langMod\\\");var s;r.addType(\\\"compiled\\\",t=>{if(t.namespace&&t.url)return function(t){const e=t.namespace,n=t.url;return r.createCore().include(o).include({getNamespace:function(){return e},loadClasses:async function(t){console.log(\\\"Loading compiled classes ns=\\\",e,\\\"url=\\\",n),await this.loadDependingClasses();const r=i.add({url:n});await r.exec(),console.log(\\\"Loaded compiled classes ns=\\\",e,\\\"url=\\\",n)}})}(t);if(t.dir)return t=t,r.createDirBasedCore(t).include(o).include({loadClasses:async function(e){console.log(\\\"Loading compiled classes params=\\\",t),await this.loadDependingClasses();const n=this.getOutputFile(),r=n.sibling(n.name()+\\\".map\\\"),o=i.add({text:n.text(),sourceMap:r.exists()&&r.text()});await o.exec(),console.log(\\\"Loaded compiled classes params=\\\",t)}});throw console.error(\\\"Invalid compiled project\\\",t),new Error(\\\"Invalid compiled project\\\")}),n.create=(t=>r.create(\\\"compiled\\\",t)),r.addDependencyResolver((t,e)=>e.dir&&t.resolve?r.create(\\\"compiled\\\",{dir:t.resolve(e.dir)}):e.namespace&&e.url?r.create(\\\"compiled\\\",e):void 0)},{\\\"../lang/SourceFiles\\\":10,\\\"../lang/langMod\\\":15,\\\"../lib/root\\\":23,\\\"./ProjectFactory\\\":25}],25:[function(t,e,n){const r=[],i={};n.addDependencyResolver=(t=>{r.push(t)}),n.addType=((t,e)=>{i[t]=e}),n.fromDependencySpec=function(t,e){if(\\\"string\\\"==typeof e){var n=t.resolve(e);return this.fromDir(n)}for(let n of r){const r=n(t,e);if(r)return r}throw console.error(\\\"Invalid dep spec\\\",e),new Error(\\\"Invalid dep spec\\\",e)},n.create=function(t,e){if(!i[t])throw new Error(`Invalid type ${t}`);return i[t](e)};class o{getPublishedURL(){}getOptions(t){return{}}getName(){return this.dir.name().replace(/\\\\/$/,\\\"\\\")}getDependingProjects(){var t=this.getOptions();return(t.compiler&&t.compiler.dependingProjects||[]).map(t=>o.factory.fromDependencySpec(this,t))}include(t){for(let e of Object.getOwnPropertyNames(t))\\\"function\\\"==typeof t[e]&&(this[e]=t[e]);return this}delegate(t){if(t.constructor.prototype){const e=e=>{\\\"function\\\"==typeof t[e]&&(this[e]=((...n)=>t[e](...n)))};for(let n of Object.getOwnPropertyNames(t.constructor.prototype))e(n)}return this}}o.factory=n,n.createCore=(()=>new o);const s={getDir(){return this.dir},resolve(t){if(t instanceof Array){var e=[];return t.forEach(function(t){e.push(this.resolve(t))}),e}if(\\\"string\\\"==typeof t)return\\\"undefined\\\"!=typeof FS?FS.resolve(t,this.getDir().path()):this.getDir().rel(t);if(!t||!t.isDir)throw new Error(\\\"Cannot TPR.resolve: \\\"+t);return t},getOptions(t){return this.getOptionsFile().obj()},getOptionsFile(){return this.dir.rel(\\\"options.json\\\")},setOptions(t){return this.getOptionsFile().obj(t)},getOutputFile(t){var e=this.getOptions(),n=this.resolve(e.compiler.outputFile||\\\"js/concat.js\\\");if(n.isDir())throw new Error(\\\"out: directory style not supported\\\");return n},removeOutputFile(){this.getOutputFile().rm()},path(){return this.dir.path()},getEXT(){throw new Error(\\\"getEXT must be overriden.\\\")},sourceFiles(){const t={},e=this.getEXT();return this.dir.recursive(function(n){if(n.endsWith(e)){var r=n.truncExt(e);t[r]=n}}),t}};n.createDirBasedCore=function(t){const e=this.createCore();return e.dir=t.dir,e.include(s)}},{}],26:[function(t,e,n){var r=function(t,e,n){let i;if(\\\"string\\\"==typeof e)return t+=\\\" at \\\"+(i=r.calcRowCol(e,n)).row+\\\":\\\"+i.col,a(new Error(t),{isTError:!0,src:{path:function(){return\\\"/\\\"},name:function(){return\\\"unknown\\\"},text:function(){return e}},pos:n,row:i.row,col:i.col,raise:function(){throw this}});var o=null;if(e&&e.src&&(e=(o=e).src.tonyu),\\\"function\\\"!=typeof e.name||\\\"function\\\"!=typeof e.text)throw new Error(\\\"src=\\\"+e+\\\" should be file object\\\");const s=e.text();function a(t,e){for(var n in e)t[n]=e[n];return t}return i=r.calcRowCol(s,n),t+=\\\" at \\\"+e.name()+\\\":\\\"+i.row+\\\":\\\"+i.col,a(new Error(t),{isTError:!0,src:e,pos:n,row:i.row,col:i.col,klass:o,raise:function(){throw this}})};r.calcRowCol=function(t,e){var n,r,i=t.split(\\\"\\\\n\\\"),o=0;for(n=0;n<i.length;n++)if((o+=i[n].length+1)>e){r=e-(o-i[n].length);break}return{row:n+1,col:r+1}},e.exports=r},{}],27:[function(t,e,n){var r=t(\\\"../lib/assert\\\"),i=t(\\\"../lib/root\\\"),o=t(\\\"./TonyuThread\\\"),s=t(\\\"./tonyuIterator\\\");e.exports=function(){i.performance||(i.performance={}),i.performance.now||(i.performance.now=function(){return Date.now()});var t,e,n={};function a(e){if(!t.onRuntimeError)throw i.alert&&i.alert(\\\"!   : \\\"+e),console.log(e.stack),e;t.onRuntimeError(e)}function u(t,e){return r.is(arguments,[String,Object]),f(n.getMeta(t),e)}function c(t,e){return f(t?Object.create(t.prototype):{},e)}function f(t,e){if(e&&\\\"object\\\"==typeof e)for(var n in e)t[n]=e[n];return t}n.addMeta=u,n.removeMeta=function(t){delete h[t]},n.getMeta=function(t){if(\\\"function\\\"==typeof t)return t.meta;if(\\\"string\\\"==typeof t){var e=h[t];return e||(h[t]=e={}),e}},n.ensureNamespace=function(t,e){var n,r=e.split(\\\".\\\"),i=t;for(n=0;n<r.length;n++){var o=r[n];i[o]||(i[o]={}),i=i[o]}return i},n.propReg=/^__([gs]et)ter__(.*)$/,n.define=function(e){var r=e.superclass,i=e.includes,o=e.fullName,s=e.shortName,a=e.namespace,l=e.methods,p=e.decls,h=n.ensureNamespace(t.classes,a);function d(t,e){if(!t.prototype.hasOwnProperty(\\\"getClassInfo\\\"))throw new Error(\\\"NO\\\");if(!t.meta)throw console.log(\\\"metanotfound\\\",t),new Error(\\\"meta not found\\\");return function t(e,n){if((n=n||{}).isShim)return e;if(n.path=n.path||[],n.path.push(e),e.isShim)throw console.log(\\\"chkmeta::ctx\\\",n),new Error(\\\"Shim found \\\"+e.extenderFullName);if(e.superclass&&t(e.superclass,n),!e.includes)throw console.log(\\\"chkmeta::ctx\\\",n),new Error(\\\"includes not found\\\");return e.includes.forEach(function(e){t(e,n)}),n.path.pop(),e}(t.meta,e),t}function g(t,e){var r=!e.init,h=e.includesRec;if(h[o])return t;h[o]=!0,i.forEach(function(n){t=n.extendFrom(t,f(e,{init:!1}))});var g,v=\\\"function\\\"==typeof l?l(t):l,y=v.initialize;delete v.initialize,(g=y?function(){this instanceof g||m(o),y.apply(this,arguments)}:t?function(){this instanceof g||m(o),t.apply(this,arguments)}:function(){this instanceof g||m(o)}).prototype=c(t,{constructor:g}),g.meta=r?{isShim:!0,extenderFullName:o}:u(o,{fullName:o,shortName:s,namespace:a,decls:p,superclass:e.nonShimParent?e.nonShimParent.meta:null,includesRec:h,includes:i.map(function(t){return t.meta})}),g.meta.func=g,g.methods=v;var b,x=g.prototype,w={},S=n.propReg;for(b in v)if(!b.match(/^fiber\\\\$/)){x[b]=v[b];var E=\\\"fiber$\\\"+b;if(v[E]&&(x[E]=v[E],x[E].methodInfo=x[E].methodInfo||{name:b,klass:g,fiber:!0},x[b].fiber=x[E]),\\\"__dummy\\\"!==b&&!x[b])throw console.log(\\\"WHY!\\\",x[b],x,b),new Error(\\\"WHY!\\\"+b);x[b].methodInfo=x[b].methodInfo||{name:b,klass:g};var _=S.exec(b);_&&(w[_[2]]=w[_[2]]||{},w[_[2]][_[1]]=x[b])}for(b in x.isTonyuObject=!0,w)Object.defineProperty(x,b,w[b]);return x.getClassInfo=function(){return g.meta},d(g,{isShim:r})}var v=g(r,{init:!0,initFullName:o,includesRec:r?f({},r.meta.includesRec):{},nonShimParent:r});return v.extendFrom=g,h[s]=v,v,d(v,{isShim:!1})},n.isSourceChanged=function(t){return!(!(t=t.meta||t).src||!t.src.tonyu)&&(!t.nodeTimestamp||t.src.tonyu.lastUpdate()>t.nodeTimestamp)},n.shouldCompile=function(t){if((t=t.meta||t).hasSemanticError)return!0;if(n.isSourceChanged(t))return!0;for(var e=n.getDependingClasses(t),r=0;r<e.length;r++)if(n.shouldCompile(e[r]))return!0},n.getDependingClasses=function(t){var e=[];return(t=t.meta||t).superclass&&(e=[t.superclass]),t.includes&&(e=e.concat(t.includes)),e};var l={},p={},h={};function d(t){var e,n=t.split(\\\".\\\"),r=p;if(n.forEach(function(t){r&&(r=r[t])}),!r&&1==n.length)for(var i in p){var o=p[i][t];if(o){if(r)throw new Error(\\\" \\\"+i+\\\".\\\"+t+\\\", \\\"+e);r=o,e=i+\\\".\\\"+t}}return r}function m(t){throw new Error(\\\"\\\"+t+\\\"new\\\")}var g=i.performance.now();function v(t){g=i.performance.now()+(t||0)}if(t={thread:function(){var t=new e;return t.handleEx=a,t},klass:n,bless:c,extend:f,globals:l,classes:p,classMetas:h,setGlobal:function(t,e){l[t]=e},getGlobal:function(t){return l[t]},getClass:d,timeout:function(t){return new Promise(function(e){setTimeout(e,t)})},bindFunc:function(e,n){if(\\\"function\\\"!=typeof n)return n;var r=function(){return n.apply(e,arguments)};return r.methodInfo=t.extend({thiz:e},n.methodInfo||{}),n.fiber&&((r.fiber=function(){return n.fiber.apply(e,arguments)}).methodInfo=t.extend({thiz:e},n.fiber.methodInfo||{})),r},not_a_tonyu_object:function(t){throw console.log(\\\"Not a tonyu object: \\\",t),new Error(t+\\\" is not a tonyu object\\\")},is:function(t,e){return!!t&&(t instanceof e||!(\\\"function\\\"!=typeof t.getClassInfo||!e.meta)&&t.getClassInfo().includesRec[e.meta.fullName])},hasKey:function(t,e){return t in e},invokeMethod:function(t,e,n,r){if(!t)throw new Error(r+\\\"(=\\\"+t+\\\") \\\"+e+\\\"\\\");var i=t[e];if(\\\"function\\\"!=typeof i)throw new Error((\\\"this\\\"==r?\\\"\\\":r+\\\".\\\")+e+\\\"(=\\\"+i+\\\")\\\");return i.apply(t,n)},callFunc:function(t,e,n){if(\\\"function\\\"!=typeof t)throw new Error(n+\\\"\\\");return t.apply({},e)},checkNonNull:function(t,e){if(t!=t||null==t)throw new Error(e+\\\"(=\\\"+t+\\\")\\\");return t},iterator:s,run:function(e){var n=d(e);if(!n)throw new Error(e+\\\" \\\");t.runMode=!0;var r=new n,i=t.currentProject;i&&(i.runningObj=r)},checkLoop:function(){var t=i.performance.now();if(t-g>1e3)throw v(1e4),new Error(\\\"\\\\n    \\\\n   []https://edit.tonyu.jp/doc/options.html\\\\n\\\");t},resetLoopCheck:v,VERSION:1560828115159,A:function(t){for(var e=[],n=1;n<t.length;n++)e[n-1]=t[n];return e},ID:Math.random()},e=o(t),i.Tonyu)throw console.error(\\\"Tonyu called twice!\\\"),new Error(\\\"Tonyu called twice!\\\");return i.Tonyu=t,t}()},{\\\"../lib/assert\\\":22,\\\"../lib/root\\\":23,\\\"./TonyuThread\\\":28,\\\"./tonyuIterator\\\":29}],28:[function(t,e,n){e.exports=function(t){var e=1;class n{constructor(){this.frame=null,this._isDead=!1,this.cnt=0,this._isWaiting=!1,this.fSuspended=!1,this.tryStack=[],this.preemptionTime=60,this.onEndHandlers=[],this.onTerminateHandlers=[],this.id=e++,this.age=0}isAlive(){return!this.isDead()}isDead(){return this._isDead=this._isDead||null==this.frame||this._threadGroup&&(this._threadGroup.objectPoolAge!=this.tGrpObjectPoolAge||this._threadGroup.isDeadThreadGroup()),this._isDead}setThreadGroup(t){this._threadGroup=t,this.tGrpObjectPoolAge=t.objectPoolAge}isWaiting(){return this._isWaiting}suspend(){this.fSuspended=!0,this.cnt=0}enter(t){this.frame={prev:this.frame,func:t}}apply(t,e,n){var r;if(n||(n=[]),\\\"string\\\"==typeof e&&!(r=t[\\\"fiber$\\\"+e]))throw new Error(\\\"\\\"+e+\\\"\\\");if(\\\"function\\\"==typeof e&&!(r=e.fiber)){var i=e.methodInfo?e.methodInfo.name:e.name;throw new Error(\\\"\\\"+i+\\\"\\\")}n=[this].concat(n);var o=0;return this.enter(function(e){switch(o){case 0:r.apply(t,n),o=1;break;case 1:e.termStatus=\\\"success\\\",e.notifyEnd(e.retVal),n[0].exit(),o=2}})}notifyEnd(t){this.onEndHandlers.forEach(function(e){e(t)}),this.notifyTermination({status:\\\"success\\\",value:t})}notifyTermination(t){this.onTerminateHandlers.forEach(function(e){e(t)})}on(t,e){\\\"end\\\"!==t&&\\\"success\\\"!==t||this.onEndHandlers.push(e),\\\"terminate\\\"===t&&(this.onTerminateHandlers.push(e),this.handleEx&&delete this.handleEx)}promise(){var t=this;return new Promise(function(e,n){t.on(\\\"terminate\\\",function(t){\\\"success\\\"===t.status?e(t.value):\\\"exception\\\"===t.status?n(t.exception):n(new Error(t.status))})})}then(t,e){return e?this.promise().then(t,e):this.promise().then(t)}fail(t){return this.promise().then(t=>t,t)}gotoCatch(t){var e=this;if(0==e.tryStack.length)return e.termStatus=\\\"exception\\\",e.kill(),void(e.handleEx?e.handleEx(t):e.notifyTermination({status:\\\"exception\\\",exception:t}));e.lastEx=t;for(var n=e.tryStack.pop();e.frame;){if(n.frame===e.frame){e.catchPC=n.catchPC;break}e.frame=e.frame.prev}}startCatch(){var t=this.lastEx;return this.lastEx=null,t}exit(t){this.frame=this.frame?this.frame.prev:null,this.retVal=t}enterTry(t){this.tryStack.push({frame:this.frame,catchPC:t})}exitTry(){this.tryStack.pop()}waitEvent(t,e){var n,r=this;(r.suspend(),t.on)&&(e=e.concat(function(){r.lastEvent=arguments,r.retVal=arguments[0],n.remove(),r.steps()}),n=t.on.apply(t,e))}runAsync(t){var e=this,n=function(){e.retVal=arguments,e.steps()},r=function(){for(var t=\\\"\\\",n=0;n<arguments.length;n++)t+=arguments[n]+\\\",\\\";0==t.length&&(t=\\\"Async fail\\\");var r=new Error(t);r.args=arguments,e.gotoCatch(r),e.steps()};e.suspend(),setTimeout(function(){t(n,r)},0)}waitFor(t){var e=this;return e._isWaiting=!0,e.suspend(),t instanceof n&&(t=t.promise()),Promise.resolve(t).then(function(t){e.retVal=t,e.stepsLoop()}).then(t=>t,function(t){e.gotoCatch(e.wrapError(t)),e.stepsLoop()})}wrapError(t){if(t instanceof Error)return t;var e=new Error(t);return e.original=t,e}resume(t){this.retVal=t,this.steps()}steps(){var e=this;if(!e.isDead()){var n=t.currentThread;for(t.currentThread=e,e.cnt=e.preemptionTime,e.preempted=!1,e.fSuspended=!1;e.cnt>0&&e.frame;)try{for(;e.cnt-- >0&&e.frame;)e.frame.func(e);e.preempted=!e.fSuspended&&e.isAlive()}catch(t){e.gotoCatch(t)}t.currentThread=n}}stepsLoop(){var t=this;t.steps(),t.preempted&&setTimeout(function(){t.stepsLoop()},0)}kill(){var t=this;t._isDead=!0,t.frame=null,t.termStatus||(t.termStatus=\\\"killed\\\",t.notifyTermination({status:\\\"killed\\\"}))}clearFrame(){this.frame=null,this.tryStack=[]}}return n}},{}],29:[function(t,e,n){class r{constructor(t){this.set=t,this.i=0}next(){return!(this.i>=this.set.length)&&(this[0]=this.set[this.i],this.i++,!0)}}class i{constructor(t){this.set=t,this.i=0}next(){return!(this.i>=this.set.length)&&(this[0]=this.i,this[1]=this.set[this.i],this.i++,!0)}}class o{constructor(t){for(var e in this.elems=[],t)this.elems.push(e);this.i=0}next(){return!(this.i>=this.elems.length)&&(this[0]=this.elems[this.i],this.i++,!0)}}class s{constructor(t){for(var e in this.elems=[],t)this.elems.push([e,t[e]]);this.i=0}next(){return!(this.i>=this.elems.length)&&(this[0]=this.elems[this.i][0],this[1]=this.elems[this.i][1],this.i++,!0)}}e.exports=function(t,e){if(t.tonyuIterator)return t.tonyuIterator(e);if(t instanceof Array)return 1==e?new r(t):new i(t);if(t instanceof Object)return 1==e?new o(t):new s(t);throw console.log(t),new Error(t+\\\" is not iterable\\\")}},{}]},{},[2]);\"],{type:\"text/javscript\"});\n\t\t\t\treturn URL.createObjectURL(b);\n\t\t\t})());"]}