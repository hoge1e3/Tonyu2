{"version":3,"sources":["editor_concat.js"],"names":["Util","hasNodeBuffer","Buffer","isNodeBuffer","data","getQueryString","key","default_","replace","s","qs","RegExp","exec","window","location","href","decodeURIComponent","endsWith","str","postfix","substring","length","startsWith","prefix","Base64_To_ArrayBuffer","base64","dic","Object","e","num","n","b","ArrayBuffer","Math","floor","charAt","ary_buffer","ary_u8","Uint8Array","i","p","undefined","charCodeAt","fail","m","console","log","Error","Base64_From_ArrayBuffer","utf8bytes2str","bytes","push","toString","slice","join","er","str2utf8bytes","binType","encodeURIComponent","r","a","parseInt","buffer","privatize","o","__privatized","res","match","apply","arguments","isBuffer","define","global","this","t","f","c","require","u","code","exports","call","1","module","Assertion","failMesg","flatten","$a","prototype","_regedType","registerType","name","MODE_STRICT","MODE_DEFENSIVE","MODE_BOOL","value","shift","concat","_mode","isDefensive","isBool","subAssertion","assert","eq","ne","isset","is","type","v","_assert_func","Array","na","String","Number","Function","k","ty","ensureError","action","err","message","setMode","mode","isStrict","args","top","forEach","stack","bind","opt","and","types","2","self","3","root","TonyuThreadF","IT","performance","now","Date","Tonyu","TT","klass","handleEx","onRuntimeError","alert","addMeta","fn","extend","getMeta","bless","val","create","dst","src","removeMeta","classMetas","removeMetaAll","ns","meta","mm","ensureNamespace","nsp","keys","split","propReg","params","parent","superclass","includes","fullName","shortName","namespace","methodsF","methods","decls","nso","classes","chkclass","ctx","hasOwnProperty","chkmeta","isShim","path","extenderFullName","mod","pop","extender","init","includesRec","extendFrom","initialize","useNew","constructor","nonShimParent","map","func","prot","props","fbk","methodInfo","fiber","isTonyuObject","defineProperty","getClassInfo","initFullName","isSourceChanged","tonyu","nodeTimestamp","lastUpdate","shouldCompile","hasSemanticError","dks","getDependingClasses","globals","getClass","found","nn","nr","lastLoopCheck","resetLoopCheck","disableTime","thread","setGlobal","getGlobal","timeout","Promise","setTimeout","bindFunc","meth","thiz","not_a_tonyu_object","obj","hasKey","invokeMethod","objName","callFunc","fName","checkNonNull","iterator","run","bootClassName","bootClass","runMode","boot","TPR","$currentProject","currentProject","runningObj","checkLoop","VERSION","A","ID","random","error","../lib/assert","../lib/root","./TonyuThread","./tonyuIterator","4","idSeq","TonyuThread","[object Object]","frame","_isDead","cnt","_isWaiting","fSuspended","tryStack","preemptionTime","onEndHandlers","onTerminateHandlers","id","age","isDead","_threadGroup","objectPoolAge","tGrpObjectPoolAge","isDeadThreadGroup","g","frameFunc","prev","methodName","method","pc","enter","th","termStatus","notifyEnd","retVal","exit","notifyTermination","status","tst","fb","succ","on","st","exception","promise","then","kill","lastEx","catchPC","eventSpec","h","suspend","lastEvent","remove","steps","msg","gotoCatch","j","resolve","stepsLoop","wrapError","re","original","sv","currentThread","preempted","isAlive","5","ArrayValueIterator","set","ArrayKeyValueIterator","ObjectKeyIterator","elems","ObjectKeyValueIterator","arity","tonyuIterator","requirejs","resMod","R","reqjsSeq","def","reqs","getModuleInfo","reqsFromFunc","setReqs","doLoad","getObjs","loadIfAvailable","amd","req","reqm","loaded","revReqs","ms","modules","notifyLoaded","dependingMod","loadedModuleName","ary","cur","d","Boolean","PathUtil","driveLetter","url","Path","isPath","Absolute","isAbsolutePath","Relative","Dir","isDir","AbsDir","File","SEP","isChildOf","child","normalize","fixSep","hasDriveLetter","isURL","protocol","hostPort","isRelativePath","hasBackslashSep","indexOf","to","directorify","filify","splitPath","ext","truncExt","truncSEP","up","rel","relPath","paths","resPath","base","ps","old","backslashifyAfter","isAbsolute","isRelative",".png",".gif",".jpeg",".jpg",".ico",".wav",".mp3",".ogg",".midi",".mid",".mzo",".txt",".html",".htm",".css",".js",".json",".zip",".swf",".pdf",".doc",".xls",".ppt",".docx",".docm",".dotx",".dotm",".xlsx",".xlsm",".xltx",".xltm",".xlsb",".xlam",".pptx",".pptm",".potx",".potm",".ppsx",".ppsm",".ppam",".tonyu",".c",".dtl","DU","DUBRK","same","isNativePromise","catch","isJQPromise","isPromise","all","rest","config","useJQ","throwNowIfRejected","state","reject","assertResolved","resolved","ensureDefer","isDeferred","directPromise","funcPromise","$","Deferred","external","rej","throwPromise","throwF","each","loop","brk","objs","when1","deff1","deff2","r1","dr","r2","tryLoop","tr","tryEach","documentReady","callbackToPromise","NOP","E","errorHandler","setE","begin","try","DeferredUtil","P","M","FS","fstypes","stub","addFSType","fsgen","availFSTypes","mesg","fstype","isReadOnly","options","supportsSync","resolveFS","getRootFS","mounted","rootFS","mountPoint","inMyFS","getReturnTypes","getContent","size","toBin","byteLength","getContentAsync","setContent","content","setContentAsync","appendContent","appendContentAsync","getMetaInfo","setMetaInfo","info","mkdir","touch","exists","opendir","opendirAsync","cp","assertExist","srcIsDir","dstfs","dstIsDir","cont","mv","rm","link","getURL","onAddObserver","delegateMethods","fs","assertWriteable","getContentType","toLowerCase","getBlob","blobType","Blob","hasPlainText","toPlainText","isText","find","ls","ep","resolveLink","l","isLink","np","opendirEx","dest","getDirTree","style","excludes","relP","_global","download","opts","xhr","XMLHttpRequest","open","responseType","onload","saveAs","response","onerror","send","corsEnabled","click","node","dispatchEvent","MouseEvent","evt","document","createEvent","initMouseEvent","HTMLAnchorElement","blob","URL","webkitURL","createElement","origin","target","createObjectURL","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","test","fromCharCode","bom","popup","title","body","innerText","force","isSafari","HTMLElement","safari","isChromeIOS","userAgent","FileReader","reader","onloadend","result","readAsDataURL","Content","plainText","contentType","plain","buffer2ArrayBuffer","arrayBuffer2Buffer","bin","bufType","nodeBuffer","arrayBuffer","looksLikeDataURL","text","DataURL","setBuffer","toArrayBuffer","toNodeBuffer","toURL","hasBin","hasURL","hasArrayBuffer","toBlob","dataURL2bin","bin2dataURL","head","dataHeader","dataURL","ctype","existsSync","NativeFS","rootPoint","process","cwd","available","Pro","toNativePath","readFileSync","statSync","pa","writeFileSync","appendFileSync","stat","mtime","getTime","mkdirSync","ts","readdirSync","nosep","isDirectory","rmdirSync","unlinkSync","utimesSync","apath","rfs","w","watch","rpath","fpath","eventType","notifyChanged","close","LSFS","storage","useDirCache","dirCache","ramDisk","localStorage","resolveKey","getItem","setItem","removeItem","itemExists","getDirInfo","dinfos","dinfo","JSON","parse","putDirInfo","trashed","stringify","ppath","pdinfo","_touch","removeEntry","removeEntryWithoutTrash","isRAM","getUsage","using","getCapacity","seq","KEY","lim","pow","ru","add","max","readOnly","cs","includeTrashed","pinfo","inf","noTrash","ajaxTransport","originalOptions","jqXHR","FormData","dataType","headers","callback","async","username","password","addEventListener","statusText","getAllResponseHeaders","setRequestHeader","abort","WebFS","get","readAsArrayBuffer","Env","expand","expandPath","FSClass","SFile","_path","isSFile","setPolicy","policy","_clone","getPolicy","_resolve","topdir","topDir","contains","file","bp","pathR","assertDir","sibling","pre","post","equals","act","isTrashed","metaInfo","assertExists","noFollowLink","recursive","removeWithoutTrash","getText","setText","ct","appendText","forceText","getDataURL","setDataURL","setBytes","getBytes","lines","copyFrom","copyTo","dstf","progress","echo","getResolvedLinkPath","moveFrom","ex","moveTo","listFilesAsync","eachrev","reverse","fun","dir","convertOptions","_listFiles","ord","order","cvt","di","excludesF","sort","listFiles","nex","getFS","observe","addObserver","setBlob","sum","exportAsObject","importFromObject","_1","_2","handler","_act","RootFS","defaultFS","mount","fstab","_fstab","unmount","splice","fact","unshift","_3","observers","remover","observer","ob","fsv","zip","setJSZip","JSZip","dstZip","jszip","folder","generateAsync","compression","unzip","arrayBuf","destDir","onCheckFile","overwrite","loadAsync","files","zipEntry","buf","_buf","redirectedTo","isArray","x","noop","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","newValue","finale","thisArg","_unhandledRejectionFn","len","done","reason","prom","arr","remaining","race","PR","Class","env","setEnvProvider","getEnvProvider","setEnv","getEnv","importScripts","postMessage","isFile","isTrcf","handleException","F","elem","_curDir","_curFile","_mod","selbox","tagName","ide","runDialogParam","desktopEnv","FL","select","curFile","curDir","setModified","item","itemText","isModified","items","hide","save","editors","curDOM","lastTimeStamp","editor","setValue","clearSelection","dom","show","focus","progDOM","css","screenH","appendTo","prog","ace","edit","lastEditor","editorFontSize","setFontSize","setTheme","getSession","displayMode","setReadOnly","commands","removeCommand","setOptions","fixedWidthGutter","curEditor","nDir","removeClass","addClass","attr","empty","wait","append","dirs","lp","displayName","isCur","change","EC","UI","expr","listeners","$vars","$edits","load","model","writeToJq","$edit","jq","validator","validate","toVal","prop","errors","validationMessage","OKButton","ok","addError","removeError","allOK","isValid","writeToModel","fromVal","li","tag","$var","realtimechange","eType","ev","which","first","parseAttr","parseArray","createTextNode","parseFloat","WebSite","tablet","mobile","Platform","loc","devMode","WebSite_runType","urlAliases","builtinAssetNames","images/Ball.png","images/base.png","images/Sample.png","images/inputPad.png","images/neko.png","images/mapchip.png","pluginTop","sampleImg","isNW","__node_webkit","__nwjs","mp4Disabled","tonyuHome","PathSep","noconcat","sep","TONYU_HOME","logdir","TONYU_LOGDIR","wwwDir","platform","ffmpeg","pkgInfo","TONYU_PROJECTS","projects","delimiter","prjDirs","kernelDir","host","compiledKernel","uploadTmpUrl","newVersionUrl","scriptServer","version","hoge","BuiltinAssets","removeJSOutput","images/sound.png","images/sound_ogg.png","images/sound_mp3.png","images/sound_mp4.png","images/sound_m4a.png","images/sound_mid.png","images/sound_wav.png","images/ecl.png","WS","serverType","runtime","disableROM","serverTop","blobPath","getFiles","putFiles","setAttribute","appendChild","isKernel","kernel","kernelChecker","FM","EXT","project","getEXT","curPrjDir","getDir","fileList","getCurFile","refactorUI","mvExtraUI","checked","resetFiles","refreshRunMenu","remains","destroy","dialog","onend","dialogOpt","enterkey","chg","fl","upcased","toUpperCase","static","maps","note","fixName","color","removeAttr","extra","extraUI","createContent","oldName","dispName","nf","chk","_new","oldCN","newCN","ren","renameClassName","SplashScreen","refactor","reloadFromFiles","confirm","getCurrentEditorInfo","pluginAdded","pos","row","col","isTError","fileName","compiler","columnNumber","lineNumber","convertFromWorkerPath","mesgd","jump","npos","srcd","width","height","shownError","pluginName","restart","showErrorPos","trcpre","html","stop","consoleBuffer","traceTap","optimizeFirst","profile","verboseFirst","traceFirstTbl","Parser","StringParser","nc","parseFunc","img","tokens","success","State","strOrTokens","maxPos","dispTbl","tbl","except","setName","noFollow","res2","andNoUnify","next","_first","ntbl","fromFirst","space","retNoUnify","clone","ALL","firstTokens","token","fromFirstTokens","unifyFirst","other","or","orNoUnify","checkTbl","t2","mergeTbl","repN","min","current","rep0","rep1","sep1","valuesToArray","tail","tails","sep0","tap","retN","parseStr","updateMaxPos","isSuccess","s0","strLike","reg","spos","traceToken","parser","eof","TokensParser","suc","lazy","pf","addRange","newr","newEnd","curEnd","setRange","getRange","range","sp","SAMENAME","tk","pat","fst","isToken","parsers","posts","dtk2","dtk","reserved","function","var","return","typeof","if","__typeof","for","else","super","while","continue","break","do","switch","case","default","finally","throw","of","in","native","instanceof","new","true","false","null","usethread","ifwait","nowait","_thread","delete","extends","literal","regex","REG","DIV","symresv","tk_constructor","symbol","extension","tokenizer","indentStr","linfo","isOpen","isClose","curDepth","depths","line","opens","closes","$1","changeDepths","depth","indStr","p2r","lastPos","proc","lastLine","assign","fix","Klass","getArgs","isPropDesc","pk","configurable","enumerable","writable","pd","thisName","singletonName","$parent","$this","$singleton","fldinit","wrapCancelled","wrap","checkSchema","$fields","inherit","wrapStatic","__bounded","Binder","addMethod","GlobalDialog","prj","getOptions","createDOM","keyvalueeditor","overflow-y","$bind","vars","placeHolderKey","placeHolderValue","toggleButton","deleteButton","getValuesA","qval","stopPropagation","getValues","odiag","gdiag","buttons","OK","KEC","down","preventDefault","originalEvent","altKey","ctrlKey","shiftKey","keyCode","Shell","mustExist","resolve2","newCommand","cd","pwd","sh","from","ln","notrash","cat","grep","pattern","lineNo","report","setout","ui","outUI","when","getvar","strcat","dl","prompt","ASYNC","help","description","devtool","Window","showDevTools","embed","inner","cls","keydown","cmd","canda","fns","cand","comp","cn","out","ce","sres","table","class","closest","scrollTop","atest","oldcat","PP","newImage","getContext","drawImage","pixels","getImageData","getPixel","cv","y","imagePixelData","ofs","G","B","setPixel","parse1Pattern","isParseError","image","hex","trans","dx","dy","PatterParseError","sx","sy","newim","newImD","newD","ey","putImageData","yy","xx","boundsInSrc","Assets","baseDir","mp3Disabled","oggf","asFile","IL","cache","resImgs","onLoad","resa","resImg","excludeEmpty","names","urlKey","im","pw","ph","pwidth","pheight","rw","rh","parse1","imgDOM","ImageList","auth","currentUser","ajax","withCsrfToken","user","csrfToken","assertLogin","onLoggedIn","showLoginLink","Auth","BLOB_PATH_EXPR","upload","fd","getElementById","processData","isBlobURL","uploadToExe","bis","getBlobInfos","bi","draw","canvas","Image","onld","clb","cw","ch","cctx","calcw","calch","clearRect","marginw","marginh","left","ImageRect","mousemove","offset","pageX","pageY","chipRects","cr","calcRect","point","rect","inRect","curChipIndex","pcr","mousedown","pv","curItemName","patName","Clipboard","copyToClipboard","radio","setRC","selRC","setWH","selWH","theForm","redrawImage","onclose","cols","rows","calcWH","selval","srcImg","canvasRect","IMD","drawFrame","rects","scaleX","scaleY","strokeStyle","beginPath","lineTo","closePath","stroke","nNan","calcRC","_item","itemName","urlScript","openImg","ImageDetailEditor","mediaInfo","overflow-v","_dropAdd","rsrc","getResource","tempFiles","rsrcDir","itemUIs","reload","delItem","some","itemUI","idx","dragMsg","exts","dragPoint","dragover","dragenter","drop","dropAdd","itemTbl","setResource","update","cvs","convURL","genItemUI","mes","dataTransfer","readFiles","readFileSum","notReadFiles","existsFiles","readCnt","filetype","useBlob","extPattern","itemExt","lastMatch","existsFile","itemRelPath","fNameTemp","lastIndexOf","newItem","rename","renameUnique","prjN","getName","temp_file","temp_itemName","temp_itemExt","temp_v","fileContent","itemFile","images","sounds","modal","resourceDir","spawn","C","convert","stdin","end","ResEditor","OggConverter","mediaInfos","sound","context","hasMZO","hasMIDI","addPlugin","removePlugin","dropAndOpen","eo","curResEditor","Log","logHome","doLog","digit","zs","todayDir","getFullYear","getMonth","da","getDate","curProject","getHours","getMinutes","getSeconds","dumpProject","logging","varlog","mul","con","extLink","caption","getOpt","afterClick","param","iframe","forceClose","reset","runDialog","shownOnce","position","my","at","resize","ngeom","resizeCanvas","modified","drag","focusToIframe","opened","onClose","beforeClose","closeAfterStop","titleArea","autoReloadCheck","iframeGlobals","$Boot","autoReload","startWithAutoReload","blur","$mainCanvas","contentWindow","TonyuBuilderClient","Worker","SourceFiles","FileMap","BuilderClient","worker","Wrapper","fileMap","getOutputFile","debugger","srcraw","localPrjDir","n2files","sourceFiles","exported","getOptionsFile","inited","exportFiles","ns2depspec","prjDir","remotePrjDir","getNamespace","local","remote","deps","getDependingProjects","dep","fullCompile","partialCompilable","compres","sf","convertError","clean","changed","nsraw","partialCompile","onCompiled","../lang/SourceFiles","../lib/FileMap","../lib/WorkerServiceB","ProjectFactory","CompiledProject","langMod","StackDecoder","SourceMap","DebuggerCore","../browser/DebuggerCore","../lang/StackDecoder","../lang/langMod","../lang/source-map","../project/CompiledProject","../project/ProjectFactory","./BuilderClient","Debugger","Events","handlers","getHandler","noCatch","setErrorHandler","decode","fire","$debugger","loadClasses","className","onTonyuDebuggerReady","vm","SourceFile","sourceMap","outf","mapFile","url2SourceFile","tmpdir","uniqFile","compileFunction","functions","sourceFile","S","StackTrace","fromError","offline","column","bias","SourceMapConsumer","GREATEST_LOWER_BOUND","originalPositionFor","source","getSourceMapConsumer","sourceMapConsumer","./SourceFiles","./source-map","./stacktrace","6","myNsp","7","factory","installedModules","__webpack_require__","moduleId","SourceMapGenerator","SourceNode","base64VLQ","util","ArraySet","MappingList","aArgs","_file","getArg","_sourceRoot","_skipValidation","_sources","_names","_mappings","_sourcesContents","_version","fromSourceMap","aSourceMapConsumer","sourceRoot","generator","eachMapping","mapping","newMapping","generated","generatedLine","generatedColumn","relative","originalLine","originalColumn","addMapping","sources","sourceContentFor","setSourceContent","_validateMapping","has","aSourceFile","aSourceContent","toSetString","applySourceMap","aSourceMapPath","newSources","newNames","unsortedForEach","aGenerated","aOriginal","aSource","aName","_serializeMappings","nameIdx","sourceIdx","previousGeneratedColumn","previousGeneratedLine","previousOriginalColumn","previousOriginalLine","previousName","previousSource","mappings","toArray","compareByGeneratedPositionsInflated","encode","_generateSourcesContent","aSources","aSourceRoot","toJSON","sourcesContent","aValue","encoded","vlq","toVLQSigned","VLQ_BASE","aStr","aIndex","aOutParam","continuation","shifted","strLen","intToCharMap","number","charCode","aDefaultValue","urlRegexp","dataUrlRegexp","urlParse","aUrl","scheme","port","urlGenerate","aParsedUrl","aPath","part","parts","aRoot","aPathUrl","aRootUrl","joined","level","index","substr","supportsNullProto","identity","isProtoString","strcmp","aStr1","aStr2","fromSetString","compareByOriginalPositions","mappingA","mappingB","onlyCompareOriginal","cmp","compareByGeneratedPositionsDeflated","onlyCompareGenerated","_array","_set","fromArray","aArray","aAllowDuplicates","getOwnPropertyNames","sStr","isDuplicate","aIdx","_sorted","_last","aCallback","aThisArg","aMapping","lineA","lineB","columnA","columnB","binarySearch","quickSort","aSourceMap","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","Mapping","lastOffset","_sections","offsetLine","offsetColumn","generatedOffset","consumer","__generatedMappings","_parseMappings","__originalMappings","_charIsMappingSeparator","GENERATED_ORDER","ORIGINAL_ORDER","LEAST_UPPER_BOUND","aContext","aOrder","_generatedMappings","_originalMappings","allGeneratedPositionsFor","needle","_findMapping","lastColumn","smc","generatedMappings","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","segment","cachedSegments","temp","originalMappings","aNeedle","aMappings","aLineName","aColumnName","aComparator","aBias","search","computeColumnSpans","nextMapping","lastGeneratedColumn","Infinity","hasContentsOfAllSources","sc","nullOnMissing","fileUriAbsPath","generatedPositionFor","sectionIndex","section","every","generatedPosition","sectionMappings","adjustedMapping","aHaystack","aCompare","recursiveSearch","aLow","aHigh","mid","swap","doQuickSort","comparator","low","high","round","pivot","q","REGEX_NEWLINE","isSourceNode","aLine","aColumn","aChunks","children","sourceContents","fromStringWithSourceMap","aGeneratedCode","aRelativePath","remainingLines","shiftNextLine","lastGeneratedLine","lastMapping","nextLine","addMappingWithCode","aChunk","chunk","prepend","walk","aFn","aSep","newChildren","replaceRight","aPattern","aReplacement","lastChild","walkSourceContents","toStringWithSourceMap","sourceMappingActive","lastOriginalSource","lastOriginalLine","lastOriginalColumn","lastOriginalName","sourceContent","8","ErrorStackParser","StackFrame","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","filter","functionName","parseOpera9","parseOpera11","parseOpera10","stackframe","StackGenerator","backtrace","maxStackSize","callee","caller","isNaN","isFinite","setArgs","getEvalOrigin","evalOrigin","setEvalOrigin","getFunctionName","getFileName","getLineNumber","getColumnNumber","./util","./base64","9","_","./array-set","./base64-vlq","./binary-search","./quick-sort","10","11","StackTraceGPS","onreadystatechange","readyState","responseText","atob","sourceCache","sourceMapConsumerCache","_atob","_get","_getSourceMapConsumer","pinpoint","getMappedLocation","findFunctionName","source-map/lib/source-map-consumer","12","generateArtificially","getSync","instrument","__stacktraceOriginalFn","deinstrument","error-stack-parser","stack-generator","stacktrace-gps","sidesList","sides","fromSide","toSide","idseq","queue","readyQueue","procReverse","ready","sendError","je","isReady","readyPromise","terminate","WorkerService","install","serv","addType","createCore","include","loadDependingClasses","urlBased","createDirBasedCore","outJS","addDependencyResolver","spec","./ProjectFactory","13","resolvers","fromDependencySpec","fromDir","ProjectCore","dependingProjects","dprj","dirBasedMod","rdir","lang","outF","outputFile","nb","IR","TN","NAME","WIDTH","HEIGHT","delay","$Screen","toDataURL","prjdir","imfile","imgs","crt","plugins","installed","box2d","detection","timbre","gif","Mezonet","PicoAudio","jquery_ui","convOpt","detectNeeded","hasInGlobal","loadAll","namea","loadNext","reqj","request","thumbnail","rawRun","detectPlugins","fixBootRunClasses","runScriptMode","rawBoot","getResourceFile","resFile","imgSnd","defaultResource","hasSoundResource","getThumbnail","convertBlobInfos","loadResource","setImageList","requestPlugin","loadPlugins","mc","fixClassName","mainClass","bc","showProgress","initCanvas","sysMod","CP","curDebugger","rp","getIframeProject","showError","requestStop","setDebugger","getDebugger","ifrm","querySelector","Project","disconnectDebugger","defaultOptions","defaultSuperClass","$defaultFPS","$imageSmoothingDisabled","$soundLoadAndDecode","kernelEditable","language","fixFile","fo","fixObject","ft","fixOptions","sn","NSP_USR","NSP_KER","mark","markerClass","session","doc","start","createAnchor","highlight1","markerLayer","markerElement","stringBuilder","marked","isMultiLine","drawTextMarker","drawSingleLineMarker","getMarkerHTML","mouseenter","$showing","mouseleave","marker1","addDynamicMarker","removeMarker","EditorPopupMarker","Range","interval","check","curVal","getValue","lastParsed","charge","markers","marker","WD","home","topPage","frameBorder","onLineClick","word","searchRes","doLineClick","splashElement","includeJSScript","resObj","genPath","IE","binary","json","lu","s1","s2","s3","beautifyJSON","east","ExportHTMLDialog","write","placeholder","UIDiag","isPrimitive","parseMesg","defTitle","multiLine","sendF","_default","getStatus","geom","resultValue","MkRun","mkrun","run2","destZip","tmpDir","tmpFileName","mkram","resc","loadFilesBuf","jsDir","runScrFileName","genDir","copySrc","imgf","copySampleImages","convertLSURL","addFileToLoadFiles","mapd","mf","staticd","genFilesJS","usrjs","usrjsmap","kerjs","runScr2","runScr2Map","pluginDir","copyPlugins","copyResources","htmlfile","htmlcont","use","scriptURL","jshint","onComplete","ote","outtype","form","openFolder","diag","button","onEnd","showItemInFolder","IFrameDialog","searchDialog","MainClassDialog","mkrunDiag","helpd","exportHTMLDialog","getCurrentEditor","curPrj","runMenuOrd","dorun","ii","saveDesktopEnv","js/concat.js","js/concat.js.map","gotoLine","runtimeConfig","hiddenFolder","FileList","FileMenu","ErrorDialog","fixIndent","ProjectOptionsEditor","KeyEventChecker","sh2","ResEditors","DebugDialog","IDEProject","optionFixer","RealtimeErrorMarker","Dialogs","$LASTPOS","optionFile","resEditors","loadDesktopEnv","resf","diagnose","onResize","spellcheck","fileMenu","dialogs","selectMain","exportHTML","errorDialog","cmdStat","setCmdStat","ee","getCursorPosition","orig","fixed","moveCursorTo","fixEditorIndent","nw","onRunTimeError","setInterval","helpDialog","startTutorial","npd","editorEditor"],"mappings":"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","sourcesContent":["(function (){\r\nUtil=(function () {\r\n\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\n// From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\nfunction Base64_To_ArrayBuffer(base64){\r\n    base64=base64.replace(/[\\n=]/g,\"\");\r\n    var dic = new Object();\r\n    dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n    dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n    dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n    dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n    var num = base64.length;\r\n    var n = 0;\r\n    var b = 0;\r\n    var e;\r\n\r\n    if(!num) return (new ArrayBuffer(0));\r\n    //if(num < 4) return null;\r\n    //if(num % 4) return null;\r\n\r\n    // AA     12    1\r\n    // AAA    18    2\r\n    // AAAA   24    3\r\n    // AAAAA  30    3\r\n    // AAAAAA 36    4\r\n    // num*6/8\r\n    e = Math.floor(num / 4 * 3);\r\n    if(base64.charAt(num - 1) == '=') e -= 1;\r\n    if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n    var ary_buffer = new ArrayBuffer( e );\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var i = 0;\r\n    var p = 0;\r\n    while(p < e){\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n        n = (b << 2);\r\n        i ++;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 4) & 0x3);\r\n        n = (b & 0x0f) << 4;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 2) & 0xf);\r\n        n = (b & 0x03) << 6;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | b;\r\n        i ++;\r\n        p ++;\r\n    }\r\n    function fail(m) {\r\n        console.log(m);\r\n        console.log(base64,i);\r\n        throw new Error(m);\r\n    }\r\n    return ary_buffer;\r\n}\r\n\r\nfunction Base64_From_ArrayBuffer(ary_buffer){\r\n    var dic = [\r\n        'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n        'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n        'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n        'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n    ];\r\n    var base64 = \"\";\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var num = ary_u8.length;\r\n    var n = 0;\r\n    var b = 0;\r\n\r\n    var i = 0;\r\n    while(i < num){\r\n        b = ary_u8[i];\r\n        base64 += dic[(b >> 2)];\r\n        n = (b & 0x03) << 4;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 4)];\r\n        n = (b & 0x0f) << 2;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 6)];\r\n        base64 += dic[(b & 0x3f)];\r\n        i ++;\r\n    }\r\n\r\n    var m = num % 3;\r\n    if(m){\r\n        base64 += dic[n];\r\n    }\r\n    if(m == 1){\r\n        base64 += \"==\";\r\n    }else if(m == 2){\r\n        base64 += \"=\";\r\n    }\r\n    return base64;\r\n}\r\n\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction hasNodeBuffer() {\r\n    return typeof Buffer!=\"undefined\";\r\n}\r\nfunction isNodeBuffer(data) {\r\n    return (hasNodeBuffer() && data instanceof Buffer);\r\n}\r\nfunction isBuffer(data) {\r\n    return data instanceof ArrayBuffer || isNodeBuffer(data);\r\n}\r\nfunction utf8bytes2str(bytes) {\r\n    var e=[];\r\n    for (var i=0 ; i<bytes.length ; i++) {\r\n         e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n    }\r\n    try {\r\n        return decodeURIComponent(e.join(\"\"));\r\n    } catch (er) {\r\n        console.log(e.join(\"\"));\r\n        throw er;\r\n    }\r\n}\r\nfunction str2utf8bytes(str, binType) {\r\n    var e=encodeURIComponent(str);\r\n    var r=/^%(..)/;\r\n    var a=[];\r\n    var ad=0;\r\n    for (var i=0 ; i<e.length; i++) {\r\n        var m=r.exec( e.substring(i));\r\n        if (m) {\r\n            a.push(parseInt(\"0x\"+m[1]));\r\n            i+=m[0].length-1;\r\n        } else a.push(e.charCodeAt(i));\r\n    }\r\n    return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n}\r\n\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    Base64_To_ArrayBuffer:Base64_To_ArrayBuffer,\r\n    Base64_From_ArrayBuffer:Base64_From_ArrayBuffer,\r\n    utf8bytes2str: utf8bytes2str,\r\n    str2utf8bytes: str2utf8bytes,\r\n    privatize: privatize,\r\n    hasNodeBuffer:hasNodeBuffer,\r\n    isNodeBuffer: isNodeBuffer,\r\n    isBuffer: isBuffer\r\n};\r\n})();\r\n\ndefine(\"Util\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Util;\n    };\n}(this)));\n\n(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n    const Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a).concat([\"mode\",this._mode]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    let na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    let na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    }\r\n    module.exports=assert;\r\n\r\n},{}],2:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],3:[function(require,module,exports){\r\n//\t\tfunction (assert,TT,IT,DU) {\r\nvar assert=require(\"../lib/assert\");\r\nvar root=require(\"../lib/root\");\r\nvar TonyuThreadF=require(\"./TonyuThread\");\r\nvar IT=require(\"./tonyuIterator\");\r\nmodule.exports=function () {\r\n\t// old browser support\r\n\tif (!root.performance) {\r\n\t\troot.performance = {};\r\n\t}\r\n\tif (!root.performance.now) {\r\n\t\troot.performance.now = function now() {\r\n\t\t\treturn Date.now();\r\n\t\t};\r\n\t}\r\n\tvar preemptionTime=60;\r\n\tvar klass={};\r\n\tvar Tonyu,TT;\r\n\tfunction thread() {\r\n\t\tvar t=new TT();\r\n\t\tt.handleEx=handleEx;\r\n\t\treturn t;\r\n\t}\r\n\tfunction timeout(t) {\r\n\t\treturn new Promise(function (s) {\r\n\t\t\tsetTimeout(s,t);\r\n\t\t});\r\n\t}\r\n\t/*function animationFrame() {\r\n\t\treturn new Promise( function (f) {\r\n\t\t\trequestAnimationFrame(f);\r\n\t\t});\r\n\t}*/\r\n\r\n\tfunction handleEx(e) {\r\n\t\tif (Tonyu.onRuntimeError) {\r\n\t\t\tTonyu.onRuntimeError(e);\r\n\t\t} else {\r\n\t\t\t//if (typeof $LASTPOS==\"undefined\") $LASTPOS=0;\r\n\t\t\tif (root.alert) root.alert(\"!   : \"+e);\r\n\t\t\tconsole.log(e.stack);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}\r\n\tklass.addMeta=addMeta;\r\n\tfunction addMeta(fn,m) {\r\n\t\t// why use addMeta?\r\n\t\t// because when compiled from source, additional info(src file) is contained.\r\n\t\t// k.meta={...} erases these info\r\n\t\tassert.is(arguments,[String,Object]);\r\n\t\treturn extend(klass.getMeta(fn), m);\r\n\t}\r\n\tklass.removeMeta=function (n) {\r\n\t\tdelete classMetas[n];\r\n\t};\r\n\tklass.removeMetaAll=function (ns) {\r\n\t\tns+=\".\";\r\n\t\tfor (let n in classMetas) {\r\n\t\t\tif (n.substring(0,ns.length)===ns) delete classMetas[n];\r\n\t\t}\r\n\t};\r\n\tklass.getMeta=function (k) {// Class or fullName\r\n\t\tif (typeof k==\"function\") {\r\n\t\t\treturn k.meta;\r\n\t\t} else if (typeof k==\"string\"){\r\n\t\t\tvar mm = classMetas[k];\r\n\t\t\tif (!mm) classMetas[k]=mm={};\r\n\t\t\treturn mm;\r\n\t\t}\r\n\t};\r\n\tklass.ensureNamespace=function (top,nsp) {\r\n\t\tvar keys=nsp.split(\".\");\r\n\t\tvar o=top;\r\n\t\tvar i;\r\n\t\tfor (i=0; i<keys.length; i++) {\r\n\t\t\tvar k=keys[i];\r\n\t\t\tif (!o[k]) o[k]={};\r\n\t\t\to=o[k];\r\n\t\t}\r\n\t\treturn o;\r\n\t};\r\n\t/*Function.prototype.constructor=function () {\r\n\t\tthrow new Error(\"This method should not be called\");\r\n\t};*/\r\n\tklass.propReg=/^__([gs]et)ter__(.*)$/;\r\n\tklass.define=function (params) {\r\n\t\t// fullName, shortName,namspace, superclass, includes, methods:{name/fiber$name: func}, decls\r\n\t\tvar parent=params.superclass;\r\n\t\tvar includes=params.includes;\r\n\t\tvar fullName=params.fullName;\r\n\t\tvar shortName=params.shortName;\r\n\t\tvar namespace=params.namespace;\r\n\t\tvar methodsF=params.methods;\r\n\t\tvar decls=params.decls;\r\n\t\tvar nso=klass.ensureNamespace(Tonyu.classes, namespace);\r\n\t\tvar outerRes;\r\n\t\tfunction chkmeta(m,ctx) {\r\n\t\t\tctx=ctx||{};\r\n\t\t\tif (ctx.isShim) return m;\r\n\t\t\tctx.path=ctx.path||[];\r\n\t\t\tctx.path.push(m);\r\n\t\t\tif (m.isShim) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"Shim found \"+m.extenderFullName);\r\n\t\t\t}\r\n\t\t\tif (m.superclass) chkmeta(m.superclass,ctx);\r\n\t\t\tif (!m.includes) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"includes not found\");\r\n\t\t\t}\r\n\t\t\tm.includes.forEach(function (mod) {\r\n\t\t\t\tchkmeta(mod,ctx);\r\n\t\t\t});\r\n\t\t\tctx.path.pop();\r\n\t\t\treturn m;\r\n\t\t}\r\n\t\tfunction chkclass(c,ctx) {\r\n\t\t\tif (!c.prototype.hasOwnProperty(\"getClassInfo\")) throw new Error(\"NO\");\r\n\t\t\tif (!c.meta) {\r\n\t\t\t\tconsole.log(\"metanotfound\",c);\r\n\t\t\t\tthrow new Error(\"meta not found\");\r\n\t\t\t}\r\n\t\t\tchkmeta(c.meta,ctx);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tfunction extender(parent,ctx) {\r\n\t\t\tvar isShim=!ctx.init;\r\n\t\t\tvar includesRec=ctx.includesRec;\r\n\t\t\tif (includesRec[fullName]) return parent;\r\n\t\t\tincludesRec[fullName]=true;\r\n\t\t\t//console.log(ctx.initFullName, fullName);//,  includesRec[fullName],JSON.stringify(ctx));\r\n\t\t\tincludes.forEach(function (m) {\r\n\t\t\t\tparent=m.extendFrom(parent,extend(ctx,{init:false}));\r\n\t\t\t});\r\n\t\t\tvar methods=typeof methodsF===\"function\"? methodsF(parent):methodsF;\r\n\t\t\t/*if (typeof Profiler!==\"undefined\") {\r\n\t\t\t\tProfiler.profile(methods, fullName);\r\n\t\t\t}*/\r\n\t\t\tvar init=methods.initialize;\r\n\t\t\tdelete methods.initialize;\r\n\t\t\tvar res;\r\n\t\t\tres=(init?\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tinit.apply(this,arguments);\r\n\t\t\t\t}:\r\n\t\t\t\t(parent? function () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tparent.apply(this,arguments);\r\n\t\t\t\t}:function (){\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tres.prototype=bless(parent,{constructor:res});\r\n\t\t\tif (isShim) {\r\n\t\t\t\tres.meta={isShim:true,extenderFullName:fullName};\r\n\t\t\t} else {\r\n\t\t\t\tres.meta=addMeta(fullName,{\r\n\t\t\t\t\tfullName:fullName,shortName:shortName,namespace:namespace,decls:decls,\r\n\t\t\t\t\tsuperclass:ctx.nonShimParent ? ctx.nonShimParent.meta : null,\r\n\t\t\t\t\tincludesRec:includesRec,\r\n\t\t\t\t\tincludes:includes.map(function(c){return c.meta;})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tres.meta.func=res;\r\n\t\t\t// methods: res's own methods(no superclass/modules)\r\n\t\t\tres.methods=methods;\r\n\t\t\tvar prot=res.prototype;\r\n\t\t\tvar props={};\r\n\t\t\tvar propReg=klass.propReg;//^__([gs]et)ter__(.*)$/;\r\n\t\t\tvar k;\r\n\t\t\tfor (k in methods) {\r\n\t\t\t\tif (k.match(/^fiber\\$/)) continue;\r\n\t\t\t\tprot[k]=methods[k];\r\n\t\t\t\tvar fbk=\"fiber$\"+k;\r\n\t\t\t\tif (methods[fbk]) {\r\n\t\t\t\t\tprot[fbk]=methods[fbk];\r\n\t\t\t\t\tprot[fbk].methodInfo=prot[fbk].methodInfo||{name:k,klass:res,fiber:true};\r\n\t\t\t\t\tprot[k].fiber=prot[fbk];\r\n\t\t\t\t}\r\n\t\t\t\tif (k!==\"__dummy\" && !prot[k]) {\r\n\t\t\t\t\tconsole.log(\"WHY!\",prot[k],prot,k);\r\n\t\t\t\t\tthrow new Error(\"WHY!\"+k);\r\n\t\t\t\t}\r\n\t\t\t\tprot[k].methodInfo=prot[k].methodInfo||{name:k,klass:res};\r\n\t\t\t\t// if profile...\r\n\t\t\t\tvar r=propReg.exec(k);\r\n\t\t\t\tif (r) {\r\n\t\t\t\t\t// __(r[1]g/setter)__r[2]\r\n\t\t\t\t\tprops[r[2]]=props[r[2]]||{};\r\n\t\t\t\t\tprops[r[2]][r[1]]=prot[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tprot.isTonyuObject=true;\r\n\t\t\tfor (k in props) {\r\n\t\t\t\tObject.defineProperty(prot, k , props[k]);\r\n\t\t\t}\r\n\t\t\tprot.getClassInfo=function () {\r\n\t\t\t\treturn res.meta;\r\n\t\t\t};\r\n\t\t\treturn chkclass(res,{isShim:isShim});\r\n\t\t}\r\n\t\tvar res=extender(parent,{\r\n\t\t\tinit:true,\r\n\t\t\tinitFullName:fullName,\r\n\t\t\tincludesRec:(parent?extend({},parent.meta.includesRec):{}),\r\n\t\t\tnonShimParent:parent\r\n\t\t});\r\n\t\tres.extendFrom=extender;\r\n\t\t//addMeta(fullName, res.meta);\r\n\t\tnso[shortName]=res;\r\n\t\touterRes=res;\r\n\t\t//console.log(\"defined\", fullName, Tonyu.classes,Tonyu.ID);\r\n\t\treturn chkclass(res,{isShim:false});\r\n\t};\r\n\tklass.isSourceChanged=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.src && k.src.tonyu) {\r\n\t\t\tif (!k.nodeTimestamp) return true;\r\n\t\t\treturn k.src.tonyu.lastUpdate()> k.nodeTimestamp;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tklass.shouldCompile=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.hasSemanticError) return true;\r\n\t\tif (klass.isSourceChanged(k)) return true;\r\n\t\tvar dks=klass.getDependingClasses(k);\r\n\t\tfor (var i=0 ; i<dks.length ;i++) {\r\n\t\t\tif (klass.shouldCompile(dks[i])) return true;\r\n\t\t}\r\n\t};\r\n\tklass.getDependingClasses=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tvar res=[];\r\n\t\tif (k.superclass) res=[k.superclass];\r\n\t\tif (k.includes) res=res.concat(k.includes);\r\n\t\treturn res;\r\n\t};\r\n\tfunction bless( klass, val) {\r\n\t\tif (!klass) return extend({},val);\r\n\t\treturn extend( Object.create(klass.prototype) , val);\r\n\t\t//return extend( new klass() , val);\r\n\t}\r\n\tfunction extend (dst, src) {\r\n\t\tif (src && typeof src==\"object\") {\r\n\t\t\tfor (var i in src) {\r\n\t\t\t\tdst[i]=src[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dst;\r\n\t}\r\n\r\n\t//alert(\"init\");\r\n\tvar globals={};\r\n\tvar classes={};// classes.namespace.classname= function\r\n\tvar classMetas={}; // classes.namespace.classname.meta ( or env.classes / ctx.classes)\r\n\tfunction setGlobal(n,v) {\r\n\t\tglobals[n]=v;\r\n\t}\r\n\tfunction getGlobal(n) {\r\n\t\treturn globals[n];\r\n\t}\r\n\tfunction getClass(n) {\r\n\t\t//CFN: n.split(\".\")\r\n\t\tvar ns=n.split(\".\");\r\n\t\tvar res=classes;\r\n\t\tns.forEach(function (na) {\r\n\t\t\tif (!res) return;\r\n\t\t\tres=res[na];\r\n\t\t});\r\n\t\tif (!res && ns.length==1) {\r\n\t\t\tvar found;\r\n\t\t\tfor (var nn in classes) {\r\n\t\t\t\tvar nr=classes[nn][n];\r\n\t\t\t\tif (nr) {\r\n\t\t\t\t\tif (!res) { res=nr; found=nn+\".\"+n; }\r\n\t\t\t\t\telse throw new Error(\" \"+nn+\".\"+n+\", \"+found);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;//classes[n];\r\n\t}\r\n\tfunction bindFunc(t,meth) {\r\n\t\tif (typeof meth!=\"function\") return meth;\r\n\t\tvar res=function () {\r\n\t\t\treturn meth.apply(t,arguments);\r\n\t\t};\r\n\t\tres.methodInfo=Tonyu.extend({thiz:t},meth.methodInfo||{});\r\n\t\tif (meth.fiber) {\r\n\t\t\tres.fiber=function fiber_func() {\r\n\t\t\t\treturn meth.fiber.apply(t,arguments);\r\n\t\t\t};\r\n\t\t\tres.fiber.methodInfo=Tonyu.extend({thiz:t},meth.fiber.methodInfo||{});\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction invokeMethod(t, name, args, objName) {\r\n\t\tif (!t) throw new Error(objName+\"(=\"+t+\") \"+name+\"\");\r\n\t\tvar f=t[name];\r\n\t\tif (typeof f!=\"function\") throw new Error((objName==\"this\"? \"\": objName+\".\")+name+\"(=\"+f+\")\");\r\n\t\treturn f.apply(t,args);\r\n\t}\r\n\tfunction callFunc(f,args, fName) {\r\n\t\tif (typeof f!=\"function\") throw new Error(fName+\"\");\r\n\t\treturn f.apply({},args);\r\n\t}\r\n\tfunction checkNonNull(v, name) {\r\n\t\tif (v!=v || v==null) throw new Error(name+\"(=\"+v+\")\");\r\n\t\treturn v;\r\n\t}\r\n\tfunction A(args) {\r\n\t\tvar res=[];\r\n\t\tfor (var i=1 ; i<args.length; i++) {\r\n\t\t\tres[i-1]=args[i];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction useNew(c) {\r\n\t\tthrow new Error(\"\"+c+\"new\");\r\n\t}\r\n\tfunction not_a_tonyu_object(o) {\r\n\t\tconsole.log(\"Not a tonyu object: \",o);\r\n\t\tthrow new Error(o+\" is not a tonyu object\");\r\n\t}\r\n\tfunction hasKey(k, obj) {\r\n\t\treturn k in obj;\r\n\t}\r\n\tfunction run(bootClassName) {\r\n\t\tvar bootClass=getClass(bootClassName);\r\n\t\tif (!bootClass) throw new Error( bootClassName+\" \");\r\n\t\tTonyu.runMode=true;\r\n\t\tvar boot=new bootClass();\r\n\t\t//var th=thread();\r\n\t\t//th.apply(boot,\"main\");\r\n\t\tvar TPR=Tonyu.globals.$currentProject||Tonyu.currentProject;\r\n\t\tif (TPR) {\r\n\t\t\t//TPR.runningThread=th;\r\n\t\t\tTPR.runningObj=boot;\r\n\t\t}\r\n\t\t//$LASTPOS=0;\r\n\t\t//th.steps();\r\n\t}\r\n\tvar lastLoopCheck=root.performance.now();\r\n\tvar prevCheckLoopCalled;\r\n\tfunction checkLoop() {\r\n\t\tvar now=root.performance.now();\r\n\t\tif (now-lastLoopCheck>1000) {\r\n\t\t\tresetLoopCheck(10000);\r\n\t\t\tthrow new Error(\"\\n\"+\r\n\t\t\t\t\"    \\n\"+\r\n\t\t\t\t\"   []https://edit.tonyu.jp/doc/options.html\\n\");\r\n\t\t}\r\n\t\tprevCheckLoopCalled=now;\r\n\t}\r\n\tfunction resetLoopCheck(disableTime) {\r\n\t\tlastLoopCheck=root.performance.now()+(disableTime||0);\r\n\t}\r\n\tfunction is(obj,klass) {\r\n\t\tif (!obj) return false;\r\n\t\tif (obj instanceof klass) return true;\r\n\t\tif (typeof obj.getClassInfo===\"function\" && klass.meta) {\r\n\t\t\treturn obj.getClassInfo().includesRec[klass.meta.fullName];\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t//setInterval(resetLoopCheck,16);\r\n\tTonyu={thread:thread, /*threadGroup:threadGroup,*/\r\n\t\t\tklass:klass, bless:bless, extend:extend,\r\n\t\t\tglobals:globals, classes:classes, classMetas:classMetas, setGlobal:setGlobal, getGlobal:getGlobal, getClass:getClass,\r\n\t\t\ttimeout:timeout,//animationFrame:animationFrame, /*asyncResult:asyncResult,*/\r\n\t\t\tbindFunc:bindFunc,not_a_tonyu_object:not_a_tonyu_object,is:is,\r\n\t\t\thasKey:hasKey,invokeMethod:invokeMethod, callFunc:callFunc,checkNonNull:checkNonNull,\r\n\t\t\titerator:IT,run:run,checkLoop:checkLoop,resetLoopCheck:resetLoopCheck,//DeferredUtil:DU,\r\n\t\t\tVERSION:1560828115159,//EMBED_VERSION\r\n\t\t\tA:A,ID:Math.random()};\r\n\tTT=TonyuThreadF(Tonyu);\r\n\tif (root.Tonyu) {\r\n\t\tconsole.error(\"Tonyu called twice!\");\r\n\t\tthrow new Error(\"Tonyu called twice!\");\r\n\t}\r\n\troot.Tonyu=Tonyu;\r\n\treturn Tonyu;\r\n}();\r\n\r\n},{\"../lib/assert\":1,\"../lib/root\":2,\"./TonyuThread\":4,\"./tonyuIterator\":5}],4:[function(require,module,exports){\r\n//\tvar Klass=require(\"../lib/Klass\");\r\nmodule.exports=function (Tonyu) {\r\n\tvar cnts={enterC:{},exitC:0};\r\n\tvar idSeq=1;\r\n\t//try {window.cnts=cnts;}catch(e){}\r\n\tclass TonyuThread {\r\n\t\tconstructor() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis._isDead=false;\r\n\t\t\t//this._isAlive=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t\tthis._isWaiting=false;\r\n\t\t\tthis.fSuspended=false;\r\n\t\t\tthis.tryStack=[];\r\n\t\t\tthis.preemptionTime=60;\r\n\t\t\tthis.onEndHandlers=[];\r\n\t\t\tthis.onTerminateHandlers=[];\r\n\t\t\tthis.id=idSeq++;\r\n\t\t\tthis.age=0; // inc if object pooled\r\n\t\t}\r\n\t\tisAlive() {\r\n\t\t\treturn !this.isDead();\r\n\t\t\t//return this.frame!=null && this._isAlive;\r\n\t\t}\r\n\t\tisDead() {\r\n\t\t\tthis._isDead=this._isDead || (this.frame==null) ||\r\n\t\t\t(this._threadGroup && (\r\n\t\t\t\t\tthis._threadGroup.objectPoolAge!=this.tGrpObjectPoolAge ||\r\n\t\t\t\t\tthis._threadGroup.isDeadThreadGroup()\r\n\t\t\t));\r\n\t\t\treturn this._isDead;\r\n\t\t}\r\n\t\tsetThreadGroup(g) {// g:TonyuThread\r\n\t\t\tthis._threadGroup=g;\r\n\t\t\tthis.tGrpObjectPoolAge=g.objectPoolAge;\r\n\t\t\t//if (g) g.add(fb);\r\n\t\t}\r\n\t\tisWaiting() {\r\n\t\t\treturn this._isWaiting;\r\n\t\t}\r\n\t\tsuspend() {\r\n\t\t\tthis.fSuspended=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t}\r\n\t\tenter(frameFunc) {\r\n\t\t\t//var n=frameFunc.name;\r\n\t\t\t//cnts.enterC[n]=(cnts.enterC[n]||0)+1;\r\n\t\t\tthis.frame={prev:this.frame, func:frameFunc};\r\n\t\t}\r\n\t\tapply(obj, methodName, args) {\r\n\t\t\tif (!args) args=[];\r\n\t\t\tvar method;\r\n\t\t\tif (typeof methodName==\"string\") {\r\n\t\t\t\tmethod=obj[\"fiber$\"+methodName];\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tthrow new Error(\"\"+methodName+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof methodName==\"function\") {\r\n\t\t\t\tmethod=methodName.fiber;\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tvar n=methodName.methodInfo ? methodName.methodInfo.name : methodName.name;\r\n\t\t\t\t\tthrow new Error(\"\"+n+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\targs=[this].concat(args);\r\n\t\t\tvar pc=0;\r\n\t\t\treturn this.enter(function (th) {\r\n\t\t\t\tswitch (pc){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tmethod.apply(obj,args);\r\n\t\t\t\t\tpc=1;break;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tth.termStatus=\"success\";\r\n\t\t\t\t\tth.notifyEnd(th.retVal);\r\n\t\t\t\t\targs[0].exit();\r\n\t\t\t\t\tpc=2;break;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tnotifyEnd(r) {\r\n\t\t\tthis.onEndHandlers.forEach(function (e) {\r\n\t\t\t\te(r);\r\n\t\t\t});\r\n\t\t\tthis.notifyTermination({status:\"success\",value:r});\r\n\t\t}\r\n\t\tnotifyTermination(tst) {\r\n\t\t\tthis.onTerminateHandlers.forEach(function (e) {\r\n\t\t\t\te(tst);\r\n\t\t\t});\r\n\t\t}\r\n\t\ton(type,f) {\r\n\t\t\tif (type===\"end\"||type===\"success\") this.onEndHandlers.push(f);\r\n\t\t\tif (type===\"terminate\") {\r\n\t\t\t\tthis.onTerminateHandlers.push(f);\r\n\t\t\t\tif (this.handleEx) delete this.handleEx;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpromise() {\r\n\t\t\tvar fb=this;\r\n\t\t\treturn new Promise(function (succ,err) {\r\n\t\t\t\tfb.on(\"terminate\",function (st) {\r\n\t\t\t\t\tif (st.status===\"success\") {\r\n\t\t\t\t\t\tsucc(st.value);\r\n\t\t\t\t\t} else if (st.status===\"exception\"){\r\n\t\t\t\t\t\terr(st.exception);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terr(new Error(st.status));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tthen(succ,err) {\r\n\t\t\tif (err) return this.promise().then(succ,err);\r\n\t\t\telse return this.promise().then(succ);\r\n\t\t}\r\n\t\tfail(err) {\r\n\t\t\treturn this.promise().then(e=>e, err);\r\n\t\t}\r\n\t\tgotoCatch(e) {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.tryStack.length==0) {\r\n\t\t\t\tfb.termStatus=\"exception\";\r\n\t\t\t\tfb.kill();\r\n\t\t\t\tif (fb.handleEx) fb.handleEx(e);\r\n\t\t\t\telse fb.notifyTermination({status:\"exception\",exception:e});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfb.lastEx=e;\r\n\t\t\tvar s=fb.tryStack.pop();\r\n\t\t\twhile (fb.frame) {\r\n\t\t\t\tif (s.frame===fb.frame) {\r\n\t\t\t\t\tfb.catchPC=s.catchPC;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfb.frame=fb.frame.prev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tstartCatch() {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar e=fb.lastEx;\r\n\t\t\tfb.lastEx=null;\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\texit(res) {\r\n\t\t\t//cnts.exitC++;\r\n\t\t\tthis.frame=(this.frame ? this.frame.prev:null);\r\n\t\t\tthis.retVal=res;\r\n\t\t}\r\n\t\tenterTry(catchPC) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.push({frame:fb.frame,catchPC:catchPC});\r\n\t\t}\r\n\t\texitTry() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.pop();\r\n\t\t}\r\n\t\twaitEvent(obj,eventSpec) { // eventSpec=[EventType, arg1, arg2....]\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (!obj.on) return;\r\n\t\t\tvar h;\r\n\t\t\teventSpec=eventSpec.concat(function () {\r\n\t\t\t\tfb.lastEvent=arguments;\r\n\t\t\t\tfb.retVal=arguments[0];\r\n\t\t\t\th.remove();\r\n\t\t\t\tfb.steps();\r\n\t\t\t});\r\n\t\t\th=obj.on.apply(obj, eventSpec);\r\n\t\t}\r\n\t\trunAsync(f) {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar succ=function () {\r\n\t\t\t\tfb.retVal=arguments;\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tvar err=function () {\r\n\t\t\t\tvar msg=\"\";\r\n\t\t\t\tfor (var i=0; i<arguments.length; i++) {\r\n\t\t\t\t\tmsg+=arguments[i]+\",\";\r\n\t\t\t\t}\r\n\t\t\t\tif (msg.length==0) msg=\"Async fail\";\r\n\t\t\t\tvar e=new Error(msg);\r\n\t\t\t\te.args=arguments;\r\n\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tfb.suspend();\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tf(succ,err);\r\n\t\t\t},0);\r\n\t\t}\r\n\t\twaitFor(j) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb._isWaiting=true;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (j instanceof TonyuThread) j=j.promise();\r\n\t\t\treturn Promise.resolve(j).then(function (r) {\r\n\t\t\t\tfb.retVal=r;\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t}).then(e=>e,function (e) {\r\n\t\t\t\tfb.gotoCatch(fb.wrapError(e));\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t});\r\n\t\t}\r\n\t\twrapError(e) {\r\n\t\t\tif (e instanceof Error) return e;\r\n\t\t\tvar re=new Error(e);\r\n\t\t\tre.original=e;\r\n\t\t\treturn re;\r\n\t\t}\r\n\t\tresume(retVal) {\r\n\t\t\tthis.retVal=retVal;\r\n\t\t\tthis.steps();\r\n\t\t}\r\n\t\tsteps() {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.isDead()) return;\r\n\t\t\tvar sv=Tonyu.currentThread;\r\n\t\t\tTonyu.currentThread=fb;\r\n\t\t\tfb.cnt=fb.preemptionTime;\r\n\t\t\tfb.preempted=false;\r\n\t\t\tfb.fSuspended=false;\r\n\t\t\twhile (fb.cnt>0 && fb.frame) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//while (new Date().getTime()<lim) {\r\n\t\t\t\t\twhile (fb.cnt-->0 && fb.frame) {\r\n\t\t\t\t\t\tfb.frame.func(fb);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfb.preempted= (!fb.fSuspended) && fb.isAlive();\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tTonyu.currentThread=sv;\r\n\t\t}\r\n\t\tstepsLoop() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.steps();\r\n\t\t\tif (fb.preempted) {\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tfb.stepsLoop();\r\n\t\t\t\t},0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tkill() {\r\n\t\t\tvar fb=this;\r\n\t\t\t//fb._isAlive=false;\r\n\t\t\tfb._isDead=true;\r\n\t\t\tfb.frame=null;\r\n\t\t\tif (!fb.termStatus) {\r\n\t\t\t\tfb.termStatus=\"killed\";\r\n\t\t\t\tfb.notifyTermination({status:\"killed\"});\r\n\t\t\t}\r\n\t\t}\r\n\t\tclearFrame() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis.tryStack=[];\r\n\t\t}\r\n\t}\r\n\treturn TonyuThread;\r\n};\r\n\r\n},{}],5:[function(require,module,exports){\r\n//define([\"Klass\"], function (Klass) {\r\n\t//var Klass=require(\"../lib/Klass\");\r\n\tclass ArrayValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext () {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ArrayKeyValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.i;\r\n\t\t\tthis[1]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push(k);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyValueIterator{\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push([k,set[k]]);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i][0];\r\n\t\t\tthis[1]=this.elems[this.i][1];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction IT(set, arity) {\r\n\t\tif (set.tonyuIterator) {\r\n\t\t\t// TODO: the prototype of class having tonyuIterator will iterate infinitively\r\n\t\t\treturn set.tonyuIterator(arity);\r\n\t\t} else if (set instanceof Array) {\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ArrayValueIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ArrayKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else if (set instanceof Object){\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ObjectKeyIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ObjectKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(set);\r\n\t\t\tthrow new Error(set+\" is not iterable\");\r\n\t\t}\r\n\t}\r\n\tmodule.exports=IT;\r\n//   Tonyu.iterator=IT;\r\n//\treturn IT;\r\n//});\r\n\r\n},{}]},{},[3]);\r\n\ndefine(\"Tonyu\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Tonyu;\n    };\n}(this)));\n\n// This is kowareta! because r.js does not generate module name:\r\n//   define(\"FSLib\",[], function () { ...\r\n//(function (global) {\r\n//var useGlobal=(typeof global.define!=\"function\");\r\n//var define=(useGlobal ? define=function(_,f){f();} : global.define);\r\ndefine('FS',[],function () {\r\n    var define,requirejs;\r\n\tvar R={};\r\n\tvar REQJS=\"REQJS_\";\r\n\tvar reqjsSeq=0;\r\n\tR.def=function (name, reqs,func) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (typeof reqs==\"function\") {\r\n\t\t    func=reqs;\r\n\t\t    reqs=R.reqsFromFunc(func);\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t    var module={exports:{}};\r\n    \t\t\tvar res=func(R.doLoad,module,module.exports);\r\n    \t\t\treturn res || module.exports;\r\n    \t\t};\r\n\t\t} else {\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t\treturn func.apply(this, R.getObjs(reqs));\r\n    \t\t};\r\n\t\t}\r\n\t\tR.loadIfAvailable(m);\r\n\t};\r\n\tdefine=function (name,reqs,func) {\r\n\t\tR.def(name, reqs,func);\r\n\t};\r\n\tdefine.amd={};\r\n\trequirejs=function (reqs,func) {\r\n\t\tR.def(REQJS+(reqjsSeq++),reqs,func);\r\n\t};\r\n\tR.setReqs=function (m, reqs) {\r\n\t\treqs.forEach(function (req) {\r\n\t\t\tvar reqm=R.getModuleInfo(req);\r\n\t\t\tif (!reqm.loaded) {\r\n\t\t\t\tm.reqs[req]=reqm;\r\n\t\t\t\treqm.revReqs[m.name]=m;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tR.getModuleInfo=function (name) {\r\n\t\tvar ms=R.modules;\r\n\t\treturn ms[name]=ms[name]||{name:name,reqs:{},revReqs:{}};\r\n\t};\r\n\tR.doLoad=function (name) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (m.loaded) return m.obj;\r\n\t\tm.loaded=true;\r\n\t\tvar res=m.func();\r\n\t    if ( res==null && !name.match(/^REQJS_/)) console.log(\"Warning: No obj for \"+name);\r\n\t\tm.obj=res;\r\n\t\tfor (var i in m.revReqs) {\r\n\t\t\tR.notifyLoaded(m.revReqs[i], m.name);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tR.notifyLoaded=function (dependingMod, loadedModuleName) {\r\n\t    // depengindMod depends on loadedModule\r\n\t\tdelete dependingMod.reqs[loadedModuleName];\r\n\t\tR.loadIfAvailable(dependingMod);\r\n\t};\r\n\tR.loadIfAvailable=function (m) {\r\n\t\tfor (var i in m.reqs) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tR.doLoad(m.name);\r\n\t};\r\n\tR.getObjs=function (ary) {\r\n\t\tvar res=[];\r\n\t\tary.forEach(function (n) {\r\n\t\t\tvar cur=R.doLoad(n);\r\n\t\t\tres.push(cur);\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\tR.reqsFromFunc=function (f) {\r\n\t    var str=f+\"\";\r\n\t    var res=[];\r\n\t    str.replace(/require\\s*\\(\\s*[\"']([^\"']+)[\"']\\s*\\)/g,function (m,a) {\r\n\t       res.push(a);\r\n\t    });\r\n\t    return res;\r\n\t};\r\n\tR.modules={};\r\n\t//requireSimulator=R;\r\n//----------\r\ndefine('extend',[],function (){\r\n   return function extend(d,s) {\r\n      for (var i in s) {d[i]=s[i];}\r\n      return d;\r\n   };\r\n});\r\n\r\ndefine('assert',[],function () {\r\n    var Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a);//.concat([\"(mode:\",this._mode,\")\"]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    var na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Boolean || t==\"boolean\") {\r\n                this.assert(typeof(v)==\"boolean\",[v,\"should be a boolean\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    var na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.stack);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    };\r\n    return assert;\r\n});\r\n\r\ndefine('PathUtil',[\"assert\"],function (assert) {\r\nfunction endsWith(str,postfix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nvar driveLetter=/^([a-zA-Z]):/;\r\n// hyphen on protocol -> chrome-extension://....\r\nvar url=/^([a-z\\-]+):\\/\\/\\/?([^\\/]+)\\//;\r\nvar PathUtil;\r\nvar Path=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isPath(s) , [s, \" is not a path\"]);\r\n});\r\nvar Absolute=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isAbsolutePath(s) , [s, \" is not a absolute path\"]);\r\n});\r\nvar Relative=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( !PathUtil.isAbsolutePath(s) , [s, \" is not a relative path\"]);\r\n});\r\n\r\nvar Dir=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( PathUtil.isDir(s) , [s, \" is not a directory path\"]);\r\n});\r\nvar AbsDir=assert.and(Dir,Absolute);\r\nvar File=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( !PathUtil.isDir(s) , [s, \" is not a file path\"]);\r\n});\r\n\r\nvar SEP=\"/\";\r\nPathUtil={\r\n    Path: Path,Absolute:Absolute, Relative:Relative, Dir:Dir,File:File,\r\n    AbsDir:AbsDir,\r\n    SEP: SEP,\r\n    endsWith: endsWith, startsWith:startsWith,\r\n    isChildOf: function(child, parent) {\r\n        return this.startsWith( this.normalize(child), this.normalize(parent));\r\n    },\r\n    normalize: function (path) {\r\n        return this.fixSep(path,\"/\").replace(/\\/+$/,\"/\");\r\n    },\r\n    hasDriveLetter: function (path) {\r\n        return driveLetter.exec(path);\r\n    },\r\n    isURL: function (path) {\r\n        var r=url.exec(path);\r\n        if (!r) return;\r\n        return {protocol:r[1], hostPort:r[2], path:SEP+path.substring(r[0].length)  };\r\n    },\r\n    isPath: function (path) {\r\n    \tassert.is(arguments,[String]);\r\n\t\treturn true;//!path.match(/\\/\\//);\r\n    },\r\n    isRelativePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) && !PathUtil.isAbsolutePath(path);\r\n    },\r\n    isAbsolutePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) &&\r\n\t\t(PathUtil.startsWith(path,SEP) || PathUtil.hasDriveLetter(path) ||  PathUtil.isURL(path));\r\n    },\r\n    isDir: function (path) {\r\n        path=PathUtil.fixSep(path);\r\n\t\tassert.is(arguments,[Path]);\r\n        return endsWith(path,SEP);\r\n    },\r\n    hasBackslashSep:function (path) {\r\n        return path.indexOf(\"\\\\\")>=0;\r\n    },\r\n    fixSep: function (path,to) {\r\n        to=to||\"/\";\r\n        assert.is(arguments,[String]);\r\n        return assert.is( path.replace(/[\\\\\\/]/g,to), Path);\r\n    },\r\n    directorify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (PathUtil.isDir(path)) return path;\r\n        return assert.is(path+SEP, Dir);\r\n    },\r\n    filify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (!PathUtil.isDir(path)) return path;\r\n        return assert.is(path.substring(0,path.length-1),File);\r\n    },\r\n\tsplitPath: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tvar u;\r\n\t\tif (u=this.isURL(path)) {\r\n\t\t    var p=this.splitPath(u.path);\r\n\t\t    p[0]=u.protocol+\"://\"+u.hostPort;\r\n\t\t    return p;\r\n\t\t}\r\n\t\tpath=path.replace(/\\/+/g,SEP);\r\n\t    var res=path.split(SEP);\r\n        if (res[res.length-1]==\"\") {\r\n            res[res.length-2]+=SEP;\r\n            res.pop();\r\n        }\r\n        return res;\r\n    },\r\n    name: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.splitPath(path).pop();\r\n    },\r\n    ext: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        var n = PathUtil.name(path);\r\n        var r = (/\\.[a-zA-Z0-9]+$/).exec(n);\r\n        if (r) return r[0];\r\n        return null;\r\n    },\r\n    truncExt: function(path, ext) {\r\n\t\tassert.is(path,String);\r\n        var name = PathUtil.name(path);\r\n        ext=ext || PathUtil.ext(path);\r\n        assert.is(ext,String);\r\n        return name.substring(0, name.length - ext.length);\r\n    },\r\n    truncSEP: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tif (!PathUtil.isDir(path)) return path;\r\n\t\treturn path.substring(0,path.length-1);\r\n    },\r\n    endsWith: function(path, postfix) {\r\n\t\tassert.is(arguments,[String,String]);\r\n        return endsWith(PathUtil.name(path), postfix);\r\n    },\r\n    parent: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.up(path);\r\n    },\r\n    rel: function(path,relPath) {\r\n        if (relPath==\"\") return path;\r\n\t\tassert.is(arguments,[AbsDir, Relative]);\r\n    \tvar paths=PathUtil.splitPath(relPath);\r\n        var resPath=path;\r\n        resPath=resPath.replace(/\\/$/,\"\");\r\n        var t=PathUtil;\r\n        paths.forEach(function (n) {\r\n             if (n==\"..\" || n==\"../\") resPath=t.up(resPath);\r\n             else {\r\n                 resPath=resPath.replace(/\\/$/,\"\");\r\n                 resPath+=SEP+(n==\".\"||n==\"./\" ? \"\": n);\r\n             }\r\n        });\r\n        return resPath;\r\n    },\r\n    relPath: function(path,base) {\r\n\t\tassert.is(arguments,[Absolute,Absolute]);\r\n        if (path.substring(0,base.length)!=base) {\r\n            return \"../\"+PathUtil.relPath(path, this.up(base));\r\n        }\r\n        return path.substring(base.length);\r\n    },\r\n    up: function(path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (path==SEP) return null;\r\n        var ps=PathUtil.splitPath(path);\r\n        ps.pop();\r\n        return ps.join(SEP)+SEP;\r\n    }\r\n};\r\n[\"directorify\", \"filify\", \"splitPath\", \"name\", \"rel\", \"relPath\", \"up\"].forEach(function (k) {\r\n    var old=PathUtil[k];\r\n    PathUtil[k]=function () {\r\n        var backslashifyAfter=false;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (PathUtil.hasBackslashSep(e)) {\r\n                backslashifyAfter=true;\r\n                return PathUtil.fixSep(e);\r\n            } else {\r\n                return e;\r\n            }\r\n        });\r\n        var res=old.apply(PathUtil,a);\r\n        if (backslashifyAfter) {\r\n            return PathUtil.fixSep(res,\"\\\\\");\r\n        } else {\r\n            return res;\r\n        }\r\n    };\r\n});\r\n\r\nPathUtil.isAbsolute=PathUtil.isAbsolutePath;\r\nPathUtil.isRelative=PathUtil.isRelativePath;\r\nif (typeof window==\"object\") window.PathUtil=PathUtil;\r\nreturn PathUtil;\r\n});\r\n\r\ndefine('MIMETypes',[], function () {\r\n   return {\r\n      \".png\":\"image/png\",\r\n      \".gif\":\"image/gif\",\r\n      \".jpeg\":\"image/jpeg\",\r\n      \".jpg\":\"image/jpeg\",\r\n      \".ico\":\"image/icon\",\r\n      \".wav\":\"audio/x-wav\",\r\n      \".mp3\":\"audio/mp3\",\r\n      \".ogg\":\"audio/ogg\",\r\n      \".midi\":\"audio/midi\",\r\n      \".mid\":\"audio/midi\",\r\n      \".mzo\":\"audio/mzo\",\r\n      \".txt\":\"text/plain\",\r\n      \".html\":\"text/html\",\r\n      \".htm\":\"text/html\",\r\n      \".css\":\"text/css\",\r\n      \".js\":\"text/javascript\",\r\n      \".json\":\"text/json\",\r\n      \".zip\":\"application/zip\",\r\n      \".swf\":\"application/x-shockwave-flash\",\r\n      \".pdf\":\"application/pdf\",\r\n      \".doc\":\"application/word\",\r\n      \".xls\":\"application/excel\",\r\n      \".ppt\":\"application/powerpoint\",\r\n      '.docx':'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      '.docm':'application/vnd.ms-word.document.macroEnabled.12',\r\n      '.dotx':'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\r\n      '.dotm':'application/vnd.ms-word.template.macroEnabled.12',\r\n      '.xlsx':'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      '.xlsm':'application/vnd.ms-excel.sheet.macroEnabled.12',\r\n      '.xltx':'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\r\n      '.xltm':'application/vnd.ms-excel.template.macroEnabled.12',\r\n      '.xlsb':'application/vnd.ms-excel.sheet.binary.macroEnabled.12',\r\n      '.xlam':'application/vnd.ms-excel.addin.macroEnabled.12',\r\n      '.pptx':'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n      '.pptm':'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\r\n      '.potx':'application/vnd.openxmlformats-officedocument.presentationml.template',\r\n      '.potm':'application/vnd.ms-powerpoint.template.macroEnabled.12',\r\n      '.ppsx':'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\r\n      '.ppsm':'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',\r\n      '.ppam':'application/vnd.ms-powerpoint.addin.macroEnabled.12',\r\n      \".tonyu\":\"text/tonyu\",\r\n      \".c\":\"text/c\",\r\n      \".dtl\":\"text/dolittle\"\r\n   };\r\n});\r\n\r\ndefine('DeferredUtil',[], function () {\r\n    var root=(\r\n        typeof window!==\"undefined\" ? window :\r\n        typeof self!==\"undefined\" ? self :\r\n        typeof global!==\"undefined\" ? global : null\r\n    );\r\n    //  promise.then(S,F)  and promise.then(S).fail(F) is not same!\r\n    //  ->  when fail on S,  F is executed?\r\n    //   same is promise.then(S).then(same,F)\r\n    var DU;\r\n    var DUBRK=function(r){this.res=r;};\r\n    function same(e){return e;}\r\n    DU={\r\n        isNativePromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise!==\"function\") && (typeof p.catch===\"function\") ;\r\n        },\r\n        isJQPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise===\"function\") &&(typeof p.fail===\"function\") ;\r\n        },\r\n        isPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            ((typeof p.promise===\"function\") || (typeof p.catch===\"function\")) ;\r\n        },\r\n        all: function (a) {\r\n            //var a=Array.prototype.slice.call(arguments);\r\n            return DU.promise(function (succ,fail) {\r\n                var res=[],rest=a.length;\r\n                a.forEach(function (p, i) {\r\n                    DU.resolve(p).then(function (r) {\r\n                        res[i]=r;\r\n                        rest--;\r\n                        if (rest===0) {\r\n                            succ(res);\r\n                        }\r\n                    },fail);\r\n                });\r\n            });\r\n        },\r\n        resolve: function (p) {\r\n            if (DU.config.useJQ && DU.isJQPromise(p)) return p;\r\n            if (!DU.config.useJQ && DU.isNativePromise(p)) return p;\r\n            return DU.promise(function (succ,fail) {\r\n                if (DU.isPromise(p)) {\r\n                    p.then(succ,fail);\r\n                } else {\r\n                    succ(p);\r\n                }\r\n            });\r\n            /*if (DU.isPromise(p)) { // NO! it returns Promise when using JQPromise and vise versa.\r\n                return f;\r\n            }\r\n            if (DU.confing.useJQ) {\r\n                return $.when(p);\r\n            }*/\r\n        },\r\n        throwNowIfRejected: function (p) {\r\n            // If Promise p has already rejected, throws the rejeceted reason immediately.\r\n            var state;\r\n            var err;\r\n            var res=p.then(function (r) {\r\n                if (!state) {\r\n                    state=\"resolved\";\r\n                }\r\n                return r;\r\n            },function (e) {\r\n                if (!state) {\r\n                    state=\"rejected\";\r\n                    err=e;\r\n                } else {\r\n                    return DU.reject(e);\r\n                }\r\n            });\r\n            if (!state) state=\"notyet\";\r\n            if (state===\"rejected\") throw err;\r\n            return res;\r\n        },\r\n        assertResolved: function (p) {\r\n            var res,resolved;\r\n            p.then(function (r) {\r\n                res=r;\r\n                resolved=true;\r\n            });\r\n            if (!resolved) {\r\n                throw new Error(\"Promise not resolved\");\r\n            }\r\n            return res;\r\n        },\r\n        /*toJQPromise: function (p) {// From native Promise\r\n            if (!p) return $.when(p);\r\n            if ($.isFunction(p.promise)) return p;\r\n            if (!$.isFunction(p.then) || !$.isFunction(p.catch)) return $.when(p);\r\n            var d=new $.Deferred();\r\n            p.then(function (r) {\r\n                d.resolve(r);\r\n            }).catch(function (r) {\r\n                d.reject(r);\r\n            });\r\n            return d.promise();\r\n        },*/\r\n        ensureDefer: function (v) {\r\n            return DU.promise(function (resolve,reject) {\r\n                var isDeferred;\r\n                DU.resolve(v).then(function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            resolve(r);\r\n                        },0);\r\n                    } else {\r\n                        resolve(r);\r\n                    }\r\n                }).then(same,function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            reject(r);\r\n                        },0);\r\n                    } else {\r\n                        reject(r);\r\n                    }\r\n                });\r\n                isDeferred=true;\r\n            });\r\n        },\r\n        directPromise:function (v) {\r\n            return DU.timeout(v,0);\r\n        },\r\n        then: function (f) {\r\n            return DU.directPromise().then(f);\r\n        },\r\n        timeout:function (timeout,value) {\r\n            return DU.promise(function (resolve) {\r\n                setTimeout(function () {resolve(value);},timeout||0);\r\n            });\r\n        },\r\n        funcPromise:function (f) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                try {\r\n                    f(function (v) {\r\n                        d.resolve(v);\r\n                    },function (e) {\r\n                        d.reject(e);\r\n                    });\r\n                }catch(e) {\r\n                    d.reject(e);\r\n                }\r\n                return d.promise();\r\n            } else if (DU.external.Promise) {\r\n                return new DU.external.Promise(function (resolve,reject) {\r\n                    try {\r\n                        f(resolve,reject);\r\n                    }catch(e) {\r\n                        reject(e);\r\n                    }\r\n                });\r\n            } else {\r\n                throw new Error(\"promise is not found\");\r\n            }\r\n        },\r\n        reject: function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                d.reject(e);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwPromise:function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                setTimeout(function () {\r\n                    d.reject(e);\r\n                }, 0);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwF: function (f) {\r\n            return function () {\r\n                try {\r\n                    return f.apply(this,arguments);\r\n                } catch(e) {\r\n                    console.log(e,e.stack);\r\n                    return DU.throwPromise(e);\r\n                }\r\n            };\r\n        },\r\n        each: function (set,f) {\r\n            if (set instanceof Array) {\r\n                return DU.loop(function (i) {\r\n                    if (i>=set.length) return DU.brk();\r\n                    return DU.resolve(f(set[i],i)).then(function () {\r\n                        return i+1;\r\n                    });\r\n                },0);\r\n            } else {\r\n                var objs=[];\r\n                for (var i in set) {\r\n                    objs.push({k:i,v:set[i]});\r\n                }\r\n                return DU.each(objs,function (e) {\r\n                    return f(e.k, e.v);\r\n                });\r\n            }\r\n        },\r\n        loop: function (f,r) {\r\n            try {\r\n                var err;\r\n                while(true) {\r\n                    if (r instanceof DUBRK) return DU.when1(r.res);\r\n                    var deff1=true, deff2=false;\r\n                    //  not deffered    deferred\r\n                    var r1=f(r);\r\n                    var dr=DU.resolve(r1).then(function (r2) {\r\n                        r=r2;\r\n                        deff1=false;\r\n                        if (r instanceof DUBRK) return r.res;\r\n                        if (deff2) return DU.loop(f,r); //\r\n                    }).then(same,function (e) {\r\n                        deff1=false;\r\n                        err=e;\r\n                    });\r\n                    if (err) throw err;\r\n                    deff2=true;\r\n                    if (deff1) return dr;//\r\n                    //\r\n                }\r\n            }catch (e) {\r\n                return DU.reject(e);\r\n            }\r\n        },\r\n        brk: function (res) {\r\n            return new DUBRK(res);\r\n        },\r\n        tryLoop: function (f,r) {\r\n            return DU.loop(DU.tr(f),r);\r\n        },\r\n        tryEach: function (s,f) {\r\n            return DU.loop(s,DU.tr(f));\r\n        },\r\n        documentReady:function () {\r\n            return DU.callbackToPromise(function (s) {$(s);});\r\n        },\r\n        requirejs:function (modules) {\r\n            if (!root.requirejs) throw new Error(\"requirejs is not loaded\");\r\n            return DU.callbackToPromise(function (s) {\r\n                root.requirejs(modules,s);\r\n            });\r\n        }\r\n    };\r\n    DU.NOP=function (r) {return r;};\r\n    DU.E=function () {\r\n        console.log(\"DUE\",arguments);\r\n        DU.errorHandler.apply(DU,arguments);\r\n    };\r\n    DU.errorHandler=function (e) {\r\n        console.error.apply(console,arguments);\r\n        alert(e);\r\n    };\r\n    DU.setE=function (f) {\r\n        DU.errorHandler=f;\r\n    };\r\n    DU.begin=DU.try=DU.tr=DU.throwF;\r\n    DU.promise=DU.callbackToPromise=DU.funcPromise;\r\n    DU.when1=DU.resolve;\r\n    DU.config={};\r\n    if (root.$ && root.$.Deferred) {\r\n        DU.config.useJQ=true;\r\n    }\r\n    DU.external={Promise:root.Promise};\r\n    if (!root.DeferredUtil) root.DeferredUtil=DU;\r\n    return DU;\r\n});\r\n\r\ndefine('FSClass',[\"extend\",\"PathUtil\",\"MIMETypes\",\"assert\",\"DeferredUtil\"],\r\nfunction (extend, P, M,assert,DU){\r\n    var FS=function () {\r\n    };\r\n    var fstypes={};\r\n    FS.addFSType=function (name,fsgen) {\r\n        fstypes[name]=fsgen;\r\n    };\r\n    FS.availFSTypes=function () {\r\n        return fstypes;\r\n    };\r\n    function stub(n) {\r\n        throw new Error (n+\" is STUB!\");\r\n    }\r\n    extend(FS.prototype, {\r\n        err: function (path, mesg) {\r\n            throw new Error(path+\": \"+mesg);\r\n        },\r\n        fstype:function () {\r\n            return \"Unknown\";\r\n        },\r\n        isReadOnly: function (path, options) {// mainly for check ENTIRELY read only\r\n            stub(\"isReadOnly\");\r\n        },\r\n        supportsSync: function () {\r\n            return true;\r\n        },\r\n        resolveFS:function (path, options) {\r\n            assert(this.getRootFS()!==this);\r\n            return this.getRootFS().resolveFS(path);\r\n        },\r\n        mounted: function (rootFS, mountPoint ) {\r\n            //assert.is(arguments,[FS,P.AbsDir]);\r\n            this.rootFS=rootFS;\r\n            this.mountPoint=mountPoint;\r\n        },\r\n        inMyFS:function (path) {\r\n            return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n        },\r\n        /*dirFromFstab: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var res=(options||{}).res || [];\r\n            this.fstab().forEach(function (tb) {\r\n                if (P.up( tb.path )==path) res.push(P.name(tb.path));\r\n            });\r\n            return res;\r\n        },*/\r\n        getRootFS: function () {\r\n            return assert( this.rootFS, \"rootFS is not set\" );\r\n        },\r\n        //-------- end of mouting\r\n        //-------- spec\r\n        getReturnTypes: function (path, options) {\r\n            //{getContent:String|DataURL|ArrayBuffer|OutputStream|Writer\r\n            //   ,opendir:Array|...}\r\n            stub(\"\");\r\n        },\r\n        //-------  for file\r\n        getContent: function (path, options) {\r\n            // options:{type:String|DataURL|ArrayBuffer|OutputStream|Writer}\r\n            // succ : [type],\r\n            stub(\"getContent\");\r\n        },\r\n        size: function (path) {\r\n            var c=this.getContent(path,{type:ArrayBuffer});\r\n            var l=c.toBin().byteLength;\r\n            return l;\r\n        },\r\n        getContentAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"getContentAsync\");\r\n            return DU.resolve(this.getContent.apply(this,arguments));\r\n        },\r\n        setContent: function (path, content, options) {\r\n            // content: String|ArrayBuffer|InputStream|Reader\r\n            stub(\"\");\r\n        },\r\n        setContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"setContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.setContent(path,content,options));\r\n            });\r\n        },\r\n        appendContent: function (path, content, options) {\r\n            //var nc=this.getContent(path,options).toPlainText()+content.toPlainText();\r\n            //return this.setContent(path, Content.fromPlainText(nc) , options);\r\n            stub(\"\");\r\n        },\r\n        appendContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"appendContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.appendContent(path,content,options));\r\n            });\r\n        },\r\n        getMetaInfo: function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        setMetaInfo: function (path, info, options) {\r\n            stub(\"\");\r\n        },\r\n        mkdir: function (path, options) {\r\n            stub(\"mkdir\");\r\n        },\r\n        touch: function (path) {\r\n            stub(\"touch\");\r\n        },\r\n        exists: function (path, options) {\r\n            // exists return false if path is existent by follwing symlink\r\n            stub(\"exists\");\r\n        },\r\n        opendir: function (path, options) {\r\n            //ret: [String] || Stream<string> // https://nodejs.org/api/stream.html#stream_class_stream_readable\r\n            stub(\"opendir\");\r\n        },\r\n        opendirAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"opendirAsync\");\r\n            return DU.resolve(this.opendir.apply(this,arguments));\r\n        },\r\n        cp: function(path, dst, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertExist(path);\r\n            options=options||{};\r\n            var srcIsDir=this.isDir(path);\r\n            var dstfs=this.getRootFS().resolveFS(dst);\r\n            var dstIsDir=dstfs.isDir(dst);\r\n            if (!srcIsDir && !dstIsDir) {\r\n                if (this.supportsSync() && dstfs.supportsSync()) {\r\n                    var cont=this.getContent(path);\r\n                    var res=dstfs.setContent(dst,cont);\r\n                    if (options.a) {\r\n                        dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                    }\r\n                    return res;\r\n                } else {\r\n                    return dstfs.setContentAsync(\r\n                            dst,\r\n                            this.getContentAsync(path)\r\n                    ).then(function (res) {\r\n                        if (options.a) {\r\n                            return dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                        }\r\n                        return res;\r\n                    });\r\n                }\r\n            } else {\r\n                throw new Error(\"only file to file supports\");\r\n            }\r\n        },\r\n        mv: function (path,to,options) {\r\n            this.cp(path,to,options);\r\n            return this.rm(path,{r:true});\r\n        },\r\n        rm:function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        link: function (path, to, options) {\r\n            throw new Error(\"ln \"+to+\" \"+path+\" : This FS not support link.\");\r\n        },\r\n        getURL: function (path) {\r\n            stub(\"\");\r\n        },\r\n        onAddObserver: function (path) {\r\n        }\r\n    });\r\n    //res=[]; for (var k in a) { res.push(k); } res;\r\n    FS.delegateMethods=function (prototype,  methods) {\r\n        for (var n in methods) {\r\n            (function (n){\r\n                assert.ne(n,\"inMyFS\");\r\n                prototype[n]=function () {\r\n                    var path=arguments[0];\r\n                    assert.is(path,P.Absolute);\r\n                    var fs=this.resolveFS(path);\r\n                    //console.log(n, f.fs===this  ,f.fs, this);\r\n                    if (fs!==this) {\r\n                        console.log(\"Invoked for other fs\",this.mountPoint, fs.mountPoint)\r\n                        //arguments[0]=f.path;\r\n                        return fs[n].apply(fs, arguments);\r\n                    } else {\r\n                        return methods[n].apply(this, arguments);\r\n                    }\r\n                };\r\n            })(n);\r\n        }\r\n    };\r\n    FS.delegateMethods(FS.prototype, {\r\n        assertWriteable: function (path) {\r\n            if (this.isReadOnly(path)) this.err(path, \"read only.\");\r\n        },\r\n        getContentType: function (path, options) {\r\n            var e=(P.ext(path)+\"\").toLowerCase();\r\n            return M[e] || (options||{}).def || \"application/octet-stream\";\r\n        },\r\n        getBlob: function (path, options) {\r\n            var c=this.getContent(path);\r\n            options=options||{};\r\n            options.blobType=options.blobType||Blob;\r\n            options.binType=options.binType||ArrayBuffer;\r\n            if (c.hasPlainText()) {\r\n                return new options.blobType([c.toPlainText()],this.getContentType(path));\r\n            } else {\r\n                return new options.blobType([c.toBin(options.binType)],this.getContentType(path));\r\n            }\r\n        },\r\n        isText:function (path) {\r\n            var m=this.getContentType(path);\r\n            return P.startsWith( m, \"text\");\r\n        },\r\n        assertExist: function (path, options) {\r\n            if (!this.exists(path, options)) {\r\n                this.err(path, \": No such \"+(P.isDir(path)?\"directory\":\"file\"));\r\n            }\r\n        },\r\n        isDir: function (path,options) {\r\n            return P.isDir(path);\r\n        },\r\n        find: function (path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            var ls=this.opendir(path, options);\r\n            var t=this;\r\n            var res=[path];\r\n            ls.forEach(function (e) {\r\n                var ep=P.rel(path, e);\r\n                if (P.isDir(ep)) {\r\n                    var fs=t.resolveFS(ep);\r\n                    res=res.concat(\r\n                            fs.find( ep ,options)\r\n                    );\r\n                } else {\r\n                    res.push( ep );//getPathFromRootFS\r\n                }\r\n            });\r\n            return res;\r\n        },\r\n        resolveLink: function (path) {\r\n            assert.is(path,P.Absolute);\r\n            // returns non-link path\r\n            // ln -s /a/b/ /c/d/\r\n            // resolveLink /a/b/    ->  /a/b/\r\n            // resolveLink /c/d/e/f -> /a/b/e/f\r\n            // resolveLink /c/d/non_existent -> /a/b/non_existent\r\n            // isLink      /c/d/    -> /a/b/\r\n            // isLink      /c/d/e/f -> null\r\n            // ln /testdir/ /ram/files/\r\n            // resolveLink /ram/files/sub/test2.txt -> /testdir/sub/test2.txt\r\n            // path=/ram/files/test.txt\r\n            for (var p=path ; p ; p=P.up(p)) {\r\n                assert(!this.mountPoint || P.startsWith(p, this.mountPoint), p+\" is out of mountPoint. path=\"+path);\r\n                var l=this.isLink(p);  // p=/ram/files/ l=/testdir/\r\n                if (l) {\r\n                    assert(l!=p,\"l==p==\"+l);\r\n                    //        /testdir/    test.txt\r\n                    var np=P.rel(l,P.relPath(path, p));  //   /testdir/test.txt\r\n                    assert(np!=path,\"np==path==\"+np);\r\n                    return assert.is(this.getRootFS().resolveFS(np).resolveLink(np),P.Absolute)  ;\r\n                }\r\n                if (this.exists(p)) return path;\r\n            }\r\n            return path;\r\n        },\r\n        isLink: function (path) {\r\n            return null;\r\n        },\r\n        opendirEx: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var ls=this.opendir(path);\r\n            var t=this;\r\n            var dest={};\r\n            ls.forEach(function (f) {\r\n                var p=P.rel(path,f);\r\n                dest[f]=t.getMetaInfo(p);\r\n            });\r\n            return dest;\r\n        },\r\n        getDirTree: function (path, options) {\r\n            options=options||{};\r\n            var dest=options.dest=options.dest||{};\r\n            options.style=options.style||\"flat-absolute\";\r\n            options.excludes=options.excludes||[];\r\n            assert.is(options.excludes,Array);\r\n            if (!options.base) {\r\n                options.base=path;\r\n            }\r\n            assert.is(path, P.AbsDir);\r\n            var tr=this.opendirEx(path,options);\r\n            if (options.style==\"no-recursive\") return tr;\r\n            var t=this;\r\n            for (var f in tr) {\r\n                var meta=tr[f];\r\n                var p=P.rel(path,f);\r\n                var relP=P.relPath(p,options.base);\r\n                switch(options.style) {\r\n                    case \"flat-relative\":\r\n                    case \"hierarchical\":\r\n                        if (options.excludes.indexOf(relP)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                    case \"flat-absolute\":\r\n                        if (options.excludes.indexOf(p)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                }\r\n                if (t.isDir(p)) {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                    case \"flat-relative\":\r\n                        t.getDirTree(p,options);\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        options.dest={};\r\n                        dest[f]=t.getDirTree(p,options);\r\n                        break;\r\n                    }\r\n                } else {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                        dest[p]=meta;\r\n                        break;\r\n                    case \"flat-relative\":\r\n                        dest[relP]=meta;\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        dest[f]=meta;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return dest;\r\n        }\r\n        /*get: function (path) {\r\n            assert.eq(this.resolveFS(path), this);\r\n            return new SFile(this, path);\r\n            //var r=this.resolveFS(path);\r\n            //return new SFile(r.fs, r.path);\r\n        }*/\r\n\r\n    });\r\n    return FS;\r\n});\r\n\r\ndefine('Util',[],function () {\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction extend(d,s) {\r\n    for (var i in (s||{})) {d[i]=s[i];} \r\n    return d;\r\n}\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    privatize: privatize,extend:extend\r\n};\r\n});\r\n\r\n/*\r\n* FileSaver.js\r\n* A saveAs() FileSaver implementation.\r\n*\r\n* By Eli Grey, http://eligrey.com\r\n*\r\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\r\n* source  : http://purl.eligrey.com/github/FileSaver.js\r\n*/\r\ndefine('FileSaver',[],function (){\r\n\r\n// The one and only way of getting global scope in all environments\r\n// https://stackoverflow.com/q/3277182/1008999\r\nvar _global = typeof window === 'object' && window.window === window\r\n  ? window : typeof self === 'object' && self.self === self\r\n  ? self : typeof global === 'object' && global.global === global\r\n  ? global\r\n  : this\r\n\r\nfunction bom (blob, opts) {\r\n  if (typeof opts === 'undefined') opts = { autoBom: false }\r\n  else if (typeof opts !== 'object') {\r\n    console.warn('Depricated: Expected third argument to be a object')\r\n    opts = { autoBom: !opts }\r\n  }\r\n\r\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\r\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\r\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\r\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\r\n  }\r\n  return blob\r\n}\r\n\r\nfunction download (url, name, opts) {\r\n  var xhr = new XMLHttpRequest()\r\n  xhr.open('GET', url)\r\n  xhr.responseType = 'blob'\r\n  xhr.onload = function () {\r\n    saveAs(xhr.response, name, opts)\r\n  }\r\n  xhr.onerror = function () {\r\n    console.error('could not download file')\r\n  }\r\n  xhr.send()\r\n}\r\n\r\nfunction corsEnabled (url) {\r\n  var xhr = new XMLHttpRequest()\r\n  // use sync to avoid popup blocker\r\n  xhr.open('HEAD', url, false)\r\n  xhr.send()\r\n  return xhr.status >= 200 && xhr.status <= 299\r\n}\r\n\r\n// `a.click()` doesn't work for all browsers (#465)\r\nfunction click(node) {\r\n  try {\r\n    node.dispatchEvent(new MouseEvent('click'))\r\n  } catch (e) {\r\n    var evt = document.createEvent('MouseEvents')\r\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\r\n                          20, false, false, false, false, 0, null)\r\n    node.dispatchEvent(evt)\r\n  }\r\n}\r\n\r\nvar saveAs = _global.saveAs ||\r\n// probably in some web worker\r\n(typeof window !== 'object' || window !== _global)\r\n  ? function saveAs () { /* noop */ }\r\n\r\n// Use download attribute first if possible (#193 Lumia mobile)\r\n: 'download' in HTMLAnchorElement.prototype\r\n? function saveAs (blob, name, opts) {\r\n  var URL = _global.URL || _global.webkitURL\r\n  var a = document.createElement('a')\r\n  name = name || blob.name || 'download'\r\n\r\n  a.download = name\r\n  a.rel = 'noopener' // tabnabbing\r\n\r\n  // TODO: detect chrome extensions & packaged apps\r\n  // a.target = '_blank'\r\n\r\n  if (typeof blob === 'string') {\r\n    // Support regular links\r\n    a.href = blob\r\n    if (a.origin !== location.origin) {\r\n      corsEnabled(a.href)\r\n        ? download(blob, name, opts)\r\n        : click(a, a.target = '_blank')\r\n    } else {\r\n      click(a)\r\n    }\r\n  } else {\r\n    // Support blobs\r\n    a.href = URL.createObjectURL(blob)\r\n    setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\r\n    setTimeout(function () { click(a) }, 0)\r\n  }\r\n}\r\n\r\n// Use msSaveOrOpenBlob as a second approach\r\n: 'msSaveOrOpenBlob' in navigator\r\n? function saveAs (blob, name, opts) {\r\n  name = name || blob.name || 'download'\r\n\r\n  if (typeof blob === 'string') {\r\n    if (corsEnabled(blob)) {\r\n      download(blob, name, opts)\r\n    } else {\r\n      var a = document.createElement('a')\r\n      a.href = blob\r\n      a.target = '_blank'\r\n      setTimeout(function () { click(a) })\r\n    }\r\n  } else {\r\n    navigator.msSaveOrOpenBlob(bom(blob, opts), name)\r\n  }\r\n}\r\n\r\n// Fallback to using FileReader and a popup\r\n: function saveAs (blob, name, opts, popup) {\r\n  // Open a popup immediately do go around popup blocker\r\n  // Mostly only avalible on user interaction and the fileReader is async so...\r\n  popup = popup || open('', '_blank')\r\n  if (popup) {\r\n    popup.document.title =\r\n    popup.document.body.innerText = 'downloading...'\r\n  }\r\n\r\n  if (typeof blob === 'string') return download(blob, name, opts)\r\n\r\n  var force = blob.type === 'application/octet-stream'\r\n  var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\r\n  var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\r\n\r\n  if ((isChromeIOS || (force && isSafari)) && typeof FileReader === 'object') {\r\n    // Safari doesn't allow downloading of blob urls\r\n    var reader = new FileReader()\r\n    reader.onloadend = function () {\r\n      var url = reader.result\r\n      url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\r\n      if (popup) popup.location.href = url\r\n      else location = url\r\n      popup = null // reverse-tabnabbing #460\r\n    }\r\n    reader.readAsDataURL(blob)\r\n  } else {\r\n    var URL = _global.URL || _global.webkitURL\r\n    var url = URL.createObjectURL(blob)\r\n    if (popup) popup.location = url\r\n    else location.href = url\r\n    popup = null // reverse-tabnabbing #460\r\n    setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\r\n  }\r\n}\r\n\r\n_global.saveAs = saveAs.saveAs = saveAs\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = saveAs;\r\n}\r\nreturn saveAs;\r\n});\r\n\r\ndefine('Content',[\"assert\",\"Util\",\"FileSaver\"],function (assert,Util,saveAs) {\r\n    var Content=function () {};\r\n    var extend=Util.extend;\r\n    // ------ constructor\r\n    Content.plainText=function (s,contentType){\r\n        var b=new Content;\r\n        b.contentType=contentType||\"text/plain\";\r\n        b.plain=s;\r\n        return b;\r\n    };\r\n    Content.url=function (s) {\r\n        var b=new Content;\r\n        b.url=s;\r\n        return b;\r\n    };\r\n    Content.buffer2ArrayBuffer = function (a) {\r\n        if (Content.isBuffer(a)) {\r\n            var u=new Uint8Array(a);\r\n            var r=u.buffer;\r\n            if (r instanceof ArrayBuffer) return r;\r\n            var ary=Array.prototype.slice.call(u);\r\n            return assert(new Uint8Array(ary).buffer,\"n2a: buf is not set\");\r\n        }\r\n        return assert(a,\"n2a: a is not set\");\r\n    };\r\n    Content.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return assert(a,\"a2n: a is not set\");\r\n    };\r\n\r\n    Content.bin=function (bin, contentType) {\r\n        assert(contentType, \"contentType should be set\");\r\n        var b=new Content;\r\n        if (Content.isNodeBuffer(bin)) {\r\n            b.bufType=\"node\";\r\n            b.nodeBuffer=bin;\r\n        } else if (bin instanceof ArrayBuffer) {\r\n            b.bufType=\"array2\";\r\n            b.arrayBuffer=bin;\r\n        } else if (bin && Content.isBuffer(bin.buffer)) {\r\n            // in node.js v8.9.1 ,\r\n            ///  bin is Buffer, bin.buffer is ArrayBuffer\r\n            //   and bin.buffer is content of different file(memory leak?) \r\n            b.bufType=\"array1\";\r\n            b.arrayBuffer=bin.buffer;\r\n        } else {\r\n            throw new Error(bin+\" is not a bin\");\r\n        }\r\n        b.contentType=contentType;\r\n        return b;\r\n    };\r\n    Content.looksLikeDataURL=function (text) {\r\n        return text.match(/^data:/);\r\n    };\r\n    Content.download=saveAs;\r\n    // why blob is not here... because blob content requires FileReader (cannot read instantly!)\r\n    //------- methods\r\n    var p=Content.prototype;\r\n    p.toBin = function (binType) {\r\n        binType=binType || (Content.hasNodeBuffer() ? Buffer: ArrayBuffer);\r\n        if (this.nodeBuffer) {\r\n            if (binType===Buffer) {\r\n                return this.nodeBuffer;\r\n            } else {\r\n                return this.arrayBuffer=( Content.buffer2ArrayBuffer(this.nodeBuffer) );\r\n            }\r\n        } else if (this.arrayBuffer) {\r\n            if (binType===ArrayBuffer) {\r\n                return this.arrayBuffer;\r\n            } else {\r\n                return this.nodeBuffer=( Content.arrayBuffer2Buffer(this.arrayBuffer) );\r\n            }\r\n        } else if (this.url) {\r\n            var d=new DataURL(this.url, binType);\r\n            return this.setBuffer(d.buffer);\r\n        } else if (this.plain!=null) {\r\n            return this.setBuffer( Content.str2utf8bytes(this.plain, binType) );\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.setBuffer=function (b) {\r\n        assert(b,\"b is not set\");\r\n        if (Content.isNodeBuffer(b)) {\r\n            return this.nodeBuffer=b;\r\n        } else {\r\n            return this.arrayBuffer=b;\r\n        }\r\n    };\r\n    p.toArrayBuffer=function () {\r\n        return this.toBin(ArrayBuffer);\r\n    };\r\n    p.toNodeBuffer=function () {\r\n        return this.toBin(Buffer);\r\n    };\r\n    p.toURL=function () {\r\n        if (this.url) {\r\n            return this.url;\r\n        } else {\r\n            if (!this.arrayBuffer && this.plain!=null) {\r\n                this.arrayBuffer=Content.str2utf8bytes(this.plain,ArrayBuffer);\r\n            }\r\n            if (this.arrayBuffer || this.nodeBuffer) {\r\n                var d=new DataURL(this.arrayBuffer || this.nodeBuffer,this.contentType);\r\n                return this.url=d.url;\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.toPlainText=function () {\r\n        if (this.hasPlainText()) {\r\n            return this.plain;\r\n        } else {\r\n            if (this.url && !this.hasBin() ) {\r\n                var d=new DataURL(this.url,ArrayBuffer);\r\n                this.arrayBuffer=d.buffer;\r\n            }\r\n            if (this.hasBin()) {\r\n                return this.plain=Content.utf8bytes2str(\r\n                        this.nodeBuffer || new Uint8Array(this.arrayBuffer)\r\n                );\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.hasURL=function (){return this.url;};\r\n    p.hasPlainText=function (){return this.plain!=null;};\r\n    p.hasBin=function (){return this.nodeBuffer || this.arrayBuffer;};\r\n    p.hasNodeBuffer= function () {return this.nodeBuffer;};\r\n    p.hasArrayBuffer= function () {return this.arrayBuffer;};\r\n    p.toBlob=function () {\r\n        return new Blob([this.toBin(ArrayBuffer)],{type:this.contentType});\r\n    };\r\n    p.download=function (name) {\r\n        Content.download(this.toBlob(),name);\r\n    };\r\n    //--------Util funcs\r\n    // From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\n    Content.Base64_To_ArrayBuffer=function (base64,binType){\r\n\t    var A=binType||ArrayBuffer;\r\n        base64=base64.replace(/[\\n=]/g,\"\");\r\n        var dic = new Object();\r\n        dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n        dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n        dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n        dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n        var num = base64.length;\r\n        var n = 0;\r\n        var b = 0;\r\n        var e;\r\n\r\n        if(!num) return (new A(0));\r\n        //if(num < 4) return null;\r\n        //if(num % 4) return null;\r\n\r\n        // AA     12    1\r\n        // AAA    18    2\r\n        // AAAA   24    3\r\n        // AAAAA  30    3\r\n        // AAAAAA 36    4\r\n        // num*6/8\r\n        e = Math.floor(num / 4 * 3);\r\n        if(base64.charAt(num - 1) == '=') e -= 1;\r\n        if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n        var ary_buffer = new A( e );\r\n        var ary_u8 = (Content.isNodeBuffer(ary_buffer) ? ary_buffer : new Uint8Array( ary_buffer ));//new Uint8Array( ary_buffer );\r\n        var i = 0;\r\n        var p = 0;\r\n        while(p < e){\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n            n = (b << 2);\r\n            i ++;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 4) & 0x3);\r\n            n = (b & 0x0f) << 4;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 2) & 0xf);\r\n            n = (b & 0x03) << 6;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | b;\r\n            i ++;\r\n            p ++;\r\n        }\r\n        function fail(m) {\r\n            console.log(m);\r\n            console.log(base64,i);\r\n            throw new Error(m);\r\n        }\r\n        return ary_buffer;\r\n    };\r\n\r\n    Content.Base64_From_ArrayBuffer=function (ary_buffer){\r\n        var dic = [\r\n            'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n            'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n            'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n            'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n        ];\r\n        var base64 = \"\";\r\n        var ary_u8 = new Uint8Array( ary_buffer );\r\n        var num = ary_u8.length;\r\n        var n = 0;\r\n        var b = 0;\r\n\r\n        var i = 0;\r\n        while(i < num){\r\n            b = ary_u8[i];\r\n            base64 += dic[(b >> 2)];\r\n            n = (b & 0x03) << 4;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 4)];\r\n            n = (b & 0x0f) << 2;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 6)];\r\n            base64 += dic[(b & 0x3f)];\r\n            i ++;\r\n        }\r\n\r\n        var m = num % 3;\r\n        if(m){\r\n            base64 += dic[n];\r\n        }\r\n        if(m == 1){\r\n            base64 += \"==\";\r\n        }else if(m == 2){\r\n            base64 += \"=\";\r\n        }\r\n        return base64;\r\n    };\r\n\r\n    Content.hasNodeBuffer=function () {\r\n        return typeof Buffer!=\"undefined\";\r\n    };\r\n    Content.isNodeBuffer=function (data) {\r\n        return (Content.hasNodeBuffer() && data instanceof Buffer);\r\n    };\r\n    Content.isBuffer=function (data) {\r\n        return data instanceof ArrayBuffer || Content.isNodeBuffer(data);\r\n    };\r\n    Content.utf8bytes2str=function (bytes) {\r\n        var e=[];\r\n        for (var i=0 ; i<bytes.length ; i++) {\r\n             e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n        }\r\n        //try {\r\n            return decodeURIComponent(e.join(\"\"));\r\n        /*} catch (er) {\r\n            console.log(e.join(\"\"));\r\n            throw er;\r\n        }*/\r\n    };\r\n    Content.str2utf8bytes=function (str, binType) {\r\n        var e=encodeURIComponent(str);\r\n        var r=/^%(..)/;\r\n        var a=[];\r\n        var ad=0;\r\n        for (var i=0 ; i<e.length; i++) {\r\n            var m=r.exec( e.substring(i));\r\n            if (m) {\r\n                a.push(parseInt(\"0x\"+m[1]));\r\n                i+=m[0].length-1;\r\n            } else a.push(e.charCodeAt(i));\r\n        }\r\n        return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n    };\r\n    //-------- DataURL\r\n    var A=Content.hasNodeBuffer() ? Buffer :ArrayBuffer;\r\n    //var isBuffer=Util.isBuffer;\r\n    var DataURL=function (data, contentType){\r\n      // data: String/Array/ArrayBuffer\r\n      if (typeof data==\"string\") {\r\n          this.url=data;\r\n          this.binType=contentType || A;\r\n          this.dataURL2bin(data);\r\n      } else if (data && Content.isBuffer(data.buffer)) {\r\n          this.buffer=data.buffer;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else if (Content.isBuffer(data)) {\r\n          this.buffer=data;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else {\r\n          console.log(arguments);\r\n          assert.fail(\"Invalid args: \",arguments);\r\n      }\r\n   };\r\n   Content.DataURL=DataURL;\r\n   extend(DataURL.prototype,{\r\n      bin2dataURL: function (b, contentType) {\r\n          assert(Content.isBuffer(b));\r\n          assert.is(contentType,String);\r\n  \t     var head=this.dataHeader(contentType);\r\n\t     var base64=Content.Base64_From_ArrayBuffer(b);\r\n\t     assert.is(base64,String);\r\n\t     return this.url=head+base64;\r\n\t  },\r\n\t  dataURL2bin: function (dataURL) {\r\n          assert.is(arguments,[String]);\r\n\t      var reg=/^data:([^;]+);base64,/i;\r\n\t      var r=reg.exec(dataURL);\r\n\t      assert(r, [\"malformed dataURL:\", dataURL] );\r\n\t      this.contentType=r[1];\r\n\t      this.buffer=Content.Base64_To_ArrayBuffer(dataURL.substring(r[0].length) , this.binType);\r\n          return assert.is(this.buffer , this.binType);\r\n  \t  },\r\n  \t  dataHeader: function (ctype) {\r\n\t      assert.is(arguments,[String]);\r\n\t      return \"data:\"+ctype+\";base64,\";\r\n   \t  },\r\n   \t  toString: function () {return assert.is(this.url,String);}\r\n   });\r\n\r\n    return Content;\r\n});\r\n\r\n/*global process, global, Buffer*/\r\ndefine('NativeFS',[\"FSClass\",\"assert\",\"PathUtil\",\"extend\",\"Content\"],\r\n        function (FS,A,P,extend,Content) {\r\n    var assert=A,fs;\r\n    try {\r\n        fs=global.require(\"fs\");\r\n        fs.existsSync('test.txt');\r\n    }catch(e){\r\n        return function () {\r\n            throw new Error(\"This system not support native FS\");\r\n        };\r\n    }\r\n    var NativeFS=function (rootPoint) {\r\n        if (rootPoint) {\r\n            A.is(rootPoint, P.AbsDir);\r\n            this.rootPoint=rootPoint;\r\n        }\r\n    };\r\n    var hasDriveLetter=P.hasDriveLetter(process.cwd());\r\n    NativeFS.available=true;\r\n    var SEP=P.SEP;\r\n    //var json=JSON; // JSON changes when page changes, if this is node module, JSON is original JSON\r\n    var Pro=NativeFS.prototype=new FS();\r\n    Pro.toNativePath = function (path) {\r\n        // rootPoint: on NativePath   C:/jail/\r\n        // mountPoint: on VirtualFS   /mnt/natfs/\r\n        if (!this.rootPoint) return path;\r\n        A.is(path, P.Absolute);\r\n        A(this.inMyFS(path),path+\" is not fs of \"+this);\r\n        //console.log(\"tonat:MP\",P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP)));\r\n        return P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP));\r\n    };\r\n    Pro.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return a;\r\n    };\r\n\r\n    FS.addFSType(\"NativeFS\",function (path, options) {\r\n            return new NativeFS(options.r);\r\n    });\r\n    NativeFS.prototype.fstype=function () {\r\n        return \"Native\"+(this.rootPoint?\"(\"+this.rootPoint+\")\":\"\");\r\n    };\r\n    NativeFS.prototype.inMyFS=function (path) {\r\n        //console.log(\"inmyfs\",path);\r\n        if (this.mountPoint) {\r\n            return P.startsWith(path, this.mountPoint);\r\n        } else {\r\n//            console.log(path, hasDriveLetter , P.hasDriveLetter(path));\r\n            return !( !!hasDriveLetter ^ !!P.hasDriveLetter(path));\r\n        }\r\n    };\r\n    function E(r){return r;}\r\n    FS.delegateMethods(NativeFS.prototype, {\r\n        getReturnTypes: function(path, options) {\r\n            E(path,options);\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: ArrayBuffer, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function (path, options) {\r\n            options=options||{};\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            this.assertExist(path);\r\n            /*if (this.isText(path)) {\r\n                return Content.plainText( fs.readFileSync(np, {encoding:\"utf8\"}) );\r\n            } else {*/\r\n                return Content.bin( fs.readFileSync(np) , this.getContentType(path));\r\n            //}\r\n        },\r\n        size: function(path) {\r\n            var np=this.toNativePath(path);\r\n            var st=fs.statSync(np);\r\n            return st.size;\r\n        },\r\n        setContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.writeFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.writeFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        appendContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.appendFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.appendFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, options);\r\n            var s=this.stat(path);\r\n            s.lastUpdate=s.mtime.getTime();\r\n            return s;\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            E(path, info, options);\r\n            //options.lastUpdate\r\n\r\n            //TODO:\r\n        },\r\n        isReadOnly: function (path) {\r\n            E(path);\r\n            // TODO:\r\n            return false;\r\n        },\r\n        stat: function (path) {\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            return fs.statSync(np);\r\n        },\r\n        mkdir: function(path, options) {\r\n            options=options||{};\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (this.exists(path)){\r\n                if (this.isDir(path)) {\r\n                    return;\r\n                } else {\r\n                    throw new Error(this+\" is a file. not a dir.\");\r\n                }\r\n            }\r\n            this.assertWriteable(path);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            fs.mkdirSync(np);\r\n            return this.assertExist(np);\r\n        },\r\n        opendir: function (path, options) {\r\n            assert.is(arguments,[String]);\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            var ts=P.truncSEP(np);\r\n            var r=fs.readdirSync(np);\r\n            if (!options.nosep) {\r\n                r=r.map(function (e) {\r\n                    var s=fs.statSync(ts+SEP+e);\r\n                    var ss=s.isDirectory()?SEP:\"\";\r\n                    return e+ss;\r\n                });\r\n            }\r\n            var res=[]; //this.dirFromFstab(path);\r\n            return assert.is(res.concat(r),Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            options=options||{};\r\n            this.assertExist(path);\r\n            var np=this.toNativePath(path);\r\n            if (this.isDir(path)) {\r\n                return fs.rmdirSync(np);\r\n            } else {\r\n                return fs.unlinkSync(np);\r\n            }\r\n        },\r\n        // mv: is Difficult, should check dst.fs==src.fs\r\n        //     and both have not subFileSystems\r\n        exists: function (path, options) {\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            return fs.existsSync(np);\r\n        },\r\n        isDir: function (path) {\r\n            if (!this.exists(path)) {\r\n                return P.isDir(path);\r\n            }\r\n            return this.stat(path).isDirectory();\r\n        },\r\n        /*link: function(path, to, options) {\r\n        }//TODO\r\n        isLink:\r\n        */\r\n        touch: function (path) {\r\n            if (!this.exists(path) && this.isDir(path)) {\r\n                this.mkdir(path);\r\n            } else if (this.exists(path) /*&& !this.isDir(path)*/ ) {\r\n                // TODO(setlastupdate)\r\n                fs.utimesSync(path,Date.now()/1000,Date.now()/1000);\r\n            }\r\n        },\r\n        getURL:function (path) {\r\n            return \"file:///\"+path.replace(/\\\\/g,\"/\");\r\n        },\r\n        onAddObserver: function (apath,options) {\r\n            var t=this;\r\n            var rfs=t.getRootFS();\r\n            options=options||{};\r\n            var isDir=this.isDir(apath);\r\n            //console.log(\"Invoke oao\",options);\r\n            var w=fs.watch(apath, options, function (evt,rpath) {\r\n                //console.log(path);\r\n                var fpath=isDir ? P.rel(apath,rpath) : apath;\r\n                var meta;\r\n                if (t.exists(fpath)) {\r\n                    meta=extend({eventType:evt},t.getMetaInfo(fpath));\r\n                } else {\r\n                    meta={eventType:evt};\r\n                }\r\n                rfs.notifyChanged(fpath,meta);\r\n            });\r\n            return {\r\n                remove: function () {\r\n                    w.close();\r\n                }\r\n            };\r\n        }\r\n    });\r\n    return NativeFS;\r\n});\r\n\r\ndefine('LSFS',[\"FSClass\",\"PathUtil\",\"extend\",\"assert\",\"Util\",\"Content\"],\r\n        function(FS,P,extend,assert,Util,Content) {\r\n    var LSFS = function(storage,options) {\r\n        assert(storage,\" new LSFS fail: no storage\");\r\n    \tthis.storage=storage;\r\n    \tthis.options=options||{};\r\n    \tif (this.options.useDirCache) this.dirCache={};\r\n    };\r\n    var isDir = P.isDir.bind(P);\r\n    var up = P.up.bind(P);\r\n    var endsWith= P.endsWith.bind(P);\r\n    //var getName = P.name.bind(P);\r\n    //var Path=P.Path;\r\n    var Absolute=P.Absolute;\r\n    var SEP= P.SEP;\r\n    function now(){\r\n        return new Date().getTime();\r\n    }\r\n    LSFS.ramDisk=function (options) {\r\n        var s={};\r\n        s[P.SEP]=\"{}\";\r\n        options=options||{};\r\n        if (!(\"useDirCache\" in options)) options.useDirCache=true;\r\n        return new LSFS(s,options);\r\n    };\r\n    FS.addFSType(\"localStorage\",function (path, options) {\r\n        return new LSFS(localStorage,options);\r\n    });\r\n    FS.addFSType(\"ram\",function (path, options) {\r\n        return LSFS.ramDisk(options);\r\n    });\r\n\r\n    LSFS.now=now;\r\n    LSFS.prototype=new FS();\r\n    //private methods\r\n    LSFS.prototype.resolveKey=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        if (this.mountPoint) {\r\n            return P.SEP+P.relPath(path,this.mountPoint);//FromMountPoint(path);\r\n        } else {\r\n            return path;\r\n        }\r\n    };\r\n    LSFS.prototype.getItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        return this.storage[key];\r\n    };\r\n    LSFS.prototype.setItem=function (path, value) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        /*if (key.indexOf(\"..\")>=0) {\r\n            console.log(path,key,value);\r\n        }*/\r\n        assert(key.indexOf(\"..\")<0);\r\n        assert(P.startsWith(key,P.SEP));\r\n        this.storage[key]=value;\r\n    };\r\n    LSFS.prototype.removeItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        delete this.storage[key];\r\n    };\r\n    LSFS.prototype.itemExists=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        assert(this.storage,\"No storage\");\r\n        return key in this.storage;\r\n    };\r\n    /*LSFS.prototype.inMyFS=function (path){\r\n        return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n    };*/\r\n    LSFS.prototype.getDirInfo=function getDirInfo(path) {\r\n        assert.is(arguments,[P.AbsDir]);\r\n        if (path == null) throw new Error(\"getDir: Null path\");\r\n        if (!endsWith(path, SEP)) path += SEP;\r\n        assert(this.inMyFS(path));\r\n        if (this.dirCache && this.dirCache[path]) return this.dirCache[path];\r\n        var dinfo =  {},dinfos;\r\n        try {\r\n            dinfos = this.getItem(path);\r\n            if (dinfos) {\r\n                dinfo = JSON.parse(dinfos);\r\n            }\r\n        } catch (e) {\r\n            console.log(\"dinfo err : \" , path , dinfos);\r\n        }\r\n        if (this.dirCache) this.dirCache[path]=dinfo;\r\n        return dinfo;\r\n    };\r\n    LSFS.prototype.putDirInfo=function putDirInfo(path, dinfo, trashed) {\r\n  \t    assert.is(arguments,[P.AbsDir, Object]);\r\n  \t    if (!isDir(path)) throw new Error(\"Not a directory : \" + path);\r\n  \t    assert(this.inMyFS(path));\r\n  \t    if (this.dirCache) this.dirCache[path] = dinfo;\r\n  \t    this.setItem(path, JSON.stringify(dinfo));\r\n        var ppath = up(path);\r\n        if (ppath == null) return;\r\n        if (!this.inMyFS(ppath)) {\r\n            //assert(this.getRootFS()!==this);\r\n            //this.getRootFS().resolveFS(ppath).touch(ppath);\r\n            return;\r\n        }\r\n        var pdinfo = this.getDirInfo(ppath);\r\n        this._touch(pdinfo, ppath, P.name(path), trashed);\r\n    };\r\n    LSFS.prototype._touch=function _touch(dinfo, path, name, trashed) {\r\n        // path:path of dinfo\r\n        // trashed: this touch is caused by trashing the file/dir.\r\n        assert.is(arguments,[Object, String, String]);\r\n        assert(this.inMyFS(path));\r\n        var eventType=\"change\";\r\n        if (!dinfo[name]) {\r\n            eventType=\"create\";\r\n            dinfo[name] = {};\r\n            if (trashed) dinfo[name].trashed = true;\r\n        }\r\n        if (!trashed) delete dinfo[name].trashed;\r\n        dinfo[name].lastUpdate = now();\r\n        var meta=extend({eventType:eventType},dinfo[name]);\r\n        this.getRootFS().notifyChanged(P.rel(path,name), meta);\r\n        this.putDirInfo(path, dinfo, trashed);\r\n    };\r\n    LSFS.prototype.removeEntry=function removeEntry(dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            dinfo[name] = {\r\n                lastUpdate: now(),\r\n                trashed: true\r\n            };\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"trash\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.removeEntryWithoutTrash=function (dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            delete dinfo[name];\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"delete\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.isRAM=function (){\r\n        return this.storage!==localStorage;\r\n    };\r\n    LSFS.prototype.fstype=function () {\r\n        return (this.isRAM() ? \"ramDisk\" : \"localStorage\" );\r\n    };\r\n    LSFS.getUsage=function () {\r\n        var using=0;\r\n        for (var i in localStorage) {\r\n            if (typeof localStorage[i]==\"string\"){\r\n                using+=localStorage[i].length;\r\n            }\r\n        }\r\n        return using;\r\n    };\r\n    LSFS.getCapacity=function () {\r\n        var seq=0;\r\n        var str=\"a\";\r\n        var KEY=\"___checkls___\";\r\n        var using=0;\r\n        var lim=Math.pow(2,25);//32MB?\r\n        try {\r\n            // make 1KB str\r\n            for (var i=0; i<10 ;i++) {\r\n                str+=str;\r\n            }\r\n            for (var i in localStorage) {\r\n                if (i.substring(0,KEY.length)==KEY) delete localStorage[i];\r\n                else if (typeof localStorage[i]==\"string\"){\r\n                    using+=localStorage[i].length;\r\n                }\r\n            }\r\n            var ru=using;\r\n            while (add()) {\r\n                if (str.length<lim) {\r\n                    str+=str;\r\n                } else break;\r\n            }\r\n            while(str.length>1024) {\r\n                str=str.substring(str.length/2);\r\n                add();\r\n            }\r\n            return {using:ru, max:using};\r\n        } finally {\r\n            for (var i=0; i<seq; i++) {\r\n                 delete localStorage[KEY+i];\r\n            }\r\n        }\r\n        function add() {\r\n            try {\r\n                localStorage[KEY+seq]=str;\r\n                seq++;\r\n                using+=str.length;\r\n                //console.log(\"Added \"+str.length, str.length, using);\r\n                return true;\r\n            } catch(e) {\r\n                delete localStorage[KEY+seq];\r\n                //console.log(\"Add Fail \"+str.length);\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n\r\n    // public methods (with resolve fs)\r\n    FS.delegateMethods(LSFS.prototype, {\r\n        isReadOnly: function () {return this.options.readOnly;},\r\n        getReturnTypes: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: String, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertExist(path); // Do not use this??( because it does not follow symlinks)\r\n            var c;\r\n            var cs=this.getItem(path);\r\n            if (Content.looksLikeDataURL(cs)) {\r\n                c=Content.url(cs);\r\n            } else {\r\n                c=Content.plainText(cs);\r\n            }\r\n            return c;\r\n        },\r\n        setContent: function(path, content, options) {\r\n            assert.is(arguments,[Absolute,Content]);\r\n            this.assertWriteable(path);\r\n            var t=null;\r\n            if (content.hasPlainText()) {\r\n                t=content.toPlainText();\r\n                if (Content.looksLikeDataURL(t)) t=null;\r\n            }\r\n            if (t!=null) {\r\n                this.setItem(path, t);\r\n            } else {\r\n                this.setItem(path, content.toURL());\r\n            }\r\n            this.touch(path);\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, {includeTrashed:true});\r\n            assert.is(arguments,[Absolute]);\r\n            if (path==P.SEP) {\r\n                return {};\r\n            }\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return {};\r\n            }\r\n            var name=P.name(path);\r\n            assert.is(parent,P.AbsDir);\r\n            var pinfo=this.getDirInfo(parent);\r\n            return assert(pinfo[name]);\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            assert.is(arguments,[String,Object]);\r\n            this.assertWriteable(path);\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return;\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            var name=P.name(path);\r\n            pinfo[name]=info;\r\n            this.putDirInfo(parent, pinfo, pinfo[name].trashed);\r\n        },\r\n        mkdir: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n\t\t\tthis.touch(path);\r\n        },\r\n        opendir: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            //succ: iterator<string> // next()\r\n            // options: {includeTrashed:Boolean}\r\n            options=options||{};\r\n            var inf=this.getDirInfo(path);\r\n            var res=[]; //this.dirFromFstab(path);\r\n            for (var i in inf) {\r\n                assert(inf[i]);\r\n                if (!inf[i].trashed || options.includeTrashed) res.push(i);\r\n            }\r\n            return assert.is(res,Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            this.assertWriteable(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) {\r\n                throw new Error(path+\": cannot remove. It is root of this FS.\");\r\n            }\r\n            this.assertExist(path,{includeTrashed:options.noTrash });\r\n            if (P.isDir(path)) {\r\n                var lis=this.opendir(path);\r\n                if (lis.length>0) {\r\n                    this.err(path,\"Directory not empty\");\r\n                }\r\n                if (options.noTrash) {\r\n                    this.removeItem(path);\r\n                }\r\n            } else {\r\n                this.removeItem(path);\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            if (options.noTrash) {\r\n                this.removeEntryWithoutTrash(pinfo, parent, P.name(path) );\r\n            } else {\r\n                this.removeEntry(pinfo, parent, P.name(path) );\r\n            }\r\n        },\r\n        exists: function (path,options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            var name=P.name(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) return true;\r\n            var pinfo=this.getDirInfo(parent);\r\n            var res=pinfo[name];\r\n            if (res && res.trashed && this.itemExists(path)) {\r\n                if (this.isDir(path)) {\r\n\r\n                } else {\r\n                    //assert.fail(\"Inconsistent \"+path+\": trashed, but remains in storage\");\r\n                }\r\n            }\r\n            if (!res && this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": not exists in metadata, but remains in storage\");\r\n            }\r\n            if (res && !res.trashed && !res.link && !this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": exists in metadata, but not in storage\");\r\n            }\r\n            if (res && !options.includeTrashed) {\r\n                res=!res.trashed;\r\n            }\r\n            return !!res;\r\n        },\r\n        link: function(path, to, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertWriteable(path);\r\n            if (this.exists(path)) this.err(path,\"file exists\");\r\n            if (P.isDir(path) && !P.isDir(to)) {\r\n                this.err(path,\" can not link to file \"+to);\r\n            }\r\n            if (!P.isDir(path) && P.isDir(to)) {\r\n                this.err(path,\" can not link to directory \"+to);\r\n            }\r\n            var m={};//assert(this.getMetaInfo(path));\r\n            m.link=to;\r\n            m.lastUpdate=now();\r\n            this.setMetaInfo(path, m);\r\n            //console.log(this.getMetaInfo(path));\r\n            //console.log(this.storage);\r\n            //console.log(this.getMetaInfo(P.up(path)));\r\n            assert(this.exists(path));\r\n            assert(this.isLink(path));\r\n        },\r\n        isLink: function (path) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (!this.exists(path)) return null;\r\n            var m=assert(this.getMetaInfo(path));\r\n            return m.link;\r\n        },\r\n        touch: function (path) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n            if (!this.itemExists(path)) {\r\n                if (P.isDir(path)) {\r\n                    if (this.dirCache) this.dirCache[path]={};\r\n                    this.setItem(path,\"{}\");\r\n                } else {\r\n                    this.setItem(path,\"\");\r\n                }\r\n            }\r\n            var parent=up(path);\r\n            if (parent!=null) {\r\n                if (this.inMyFS(parent)) {\r\n                    var pinfo=this.getDirInfo(parent);\r\n                    this._touch(pinfo, parent , P.name(path), false);\r\n                } else {\r\n                    assert(this.getRootFS()!==this);\r\n                    this.getRootFS().resolveFS(parent).touch(parent);\r\n                }\r\n            }\r\n        },\r\n        getURL: function (path) {\r\n            return this.getContent(path).toURL();\r\n        },\r\n        opendirEx: function (path,options) {\r\n            assert.is(path,P.AbsDir);\r\n            options=options||{};\r\n            var res={};\r\n            var d=this.getDirInfo(path);\r\n            if (options.includeTrashed) {\r\n                //console.log(\"INCLTR\",d);\r\n                return d;\r\n            }\r\n            for (var k in d) {\r\n                if (d[k].trashed) continue;\r\n                res[k]=d[k];\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    return LSFS;\r\n\r\n});\r\n\r\n/**\r\n *\r\n * jquery.binarytransport.js\r\n *\r\n * @description. jQuery ajax transport for making binary data type requests.\r\n * @version 1.0\r\n * @author Henry Algus <henryalgus@gmail.com>\r\n *\r\n */\r\n\r\n// use this transport for \"binary\" data type\r\nif (typeof $!==\"undefined\")\r\n$.ajaxTransport(\"+binary\", function(options, originalOptions, jqXHR){\r\n    // check for conditions and support for blob / arraybuffer response type\r\n    if (window.FormData && ((options.dataType && (options.dataType == 'binary')) || (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) || (window.Blob && options.data instanceof Blob)))))\r\n    {\r\n        return {\r\n            // create new XMLHttpRequest\r\n            send: function(headers, callback){\r\n                // setup all variables\r\n                var xhr = new XMLHttpRequest(),\r\n                url = options.url,\r\n                type = options.type,\r\n                async = options.async || true,\r\n                // blob or arraybuffer. Default is blob\r\n                dataType = options.responseType || \"blob\",\r\n                data = options.data || null,\r\n                username = options.username || null,\r\n                password = options.password || null;\r\n\r\n                xhr.addEventListener('load', function(){\r\n                    var data = {};\r\n                    data[options.dataType] = xhr.response;\r\n                    // make callback and send data\r\n                    callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\r\n                });\r\n\r\n                xhr.open(type, url, async, username, password);\r\n\r\n                // setup custom headers\r\n                for (var i in headers ) {\r\n                    xhr.setRequestHeader(i, headers[i] );\r\n                }\r\n\r\n                xhr.responseType = dataType;\r\n                xhr.send(data);\r\n            },\r\n            abort: function(){\r\n                jqXHR.abort();\r\n            }\r\n        };\r\n    }\r\n});\r\n\r\ndefine(\"jquery.binarytransport\", function(){});\r\n\r\ndefine('WebFS',[\"FSClass\",\"jquery.binarytransport\",\"DeferredUtil\",\"Content\",\"PathUtil\"],\r\n        function (FS,j,DU,Content,P) {\r\n    // FS.mount(location.protocol+\"//\"+location.host+\"/\", \"web\");\r\n    var WebFS=function (){};\r\n    var p=WebFS.prototype=new FS;\r\n    FS.addFSType(\"web\", function () {\r\n        return new WebFS;\r\n    });\r\n    p.fstype=function () {return \"Web\";};\r\n    p.supportsSync=function () {return false;};\r\n    p.inMyFS=function (path) {\r\n        return P.isURL(path);\r\n    };\r\n    FS.delegateMethods(p, {\r\n        exists: function () {return true;},\r\n        getContentAsync: function (path){\r\n            var t=this;\r\n            return DU.promise(function (succ,err) {\r\n                $.get(path,function (blob) {\r\n                    var reader = new FileReader();\r\n                    reader.addEventListener(\"loadend\", function() {\r\n                        succ(Content.bin(reader.result, t.getContentType(path)));\r\n                    });\r\n                    reader.readAsArrayBuffer(blob);\r\n                },\"binary\").fail(err);\r\n            });\r\n        },\r\n        /*setContentAsync: function (path){\r\n\r\n        },*/\r\n        getURL: function (path) {\r\n            return path;\r\n        }\r\n    });\r\n\r\n    return WebFS;\r\n\r\n});\r\ndefine('Env',[\"assert\",\"PathUtil\"],function (A,P) {\r\n    var Env=function (value) {\r\n        this.value=value;\r\n    };\r\n    Env.prototype={\r\n            expand:function (str) {\r\n                A.is(str,String);\r\n                var t=this;\r\n                return str.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (a,key) {\r\n                    return t.get(key);\r\n                });\r\n            },\r\n            expandPath:function (path) {\r\n                A.is(path,String);\r\n                path=this.expand(path);\r\n                path=path.replace(/\\/+/g,\"/\");\r\n                path=path.replace(/^[a-z][a-z]+:\\//, function (r) { return r+\"/\"; } );\r\n                return A.is(path,P.Path);\r\n            },\r\n            get: function (key) {\r\n                return this.value[key];\r\n            },\r\n            set: function (key, value) {\r\n                this.value[key]=value;\r\n            }\r\n    };\r\n    return Env;\r\n});\r\ndefine('SFile',[\"extend\",\"assert\",\"PathUtil\",\"Util\",\"Content\",\"FSClass\",\"FileSaver\",\"DeferredUtil\"],\r\nfunction (extend,A,P,Util,Content,FSClass,saveAs,DU) {\r\n\r\nvar SFile=function (rootFS, path) {\r\n    A.is(path, P.Absolute);\r\n    //A(fs && fs.getReturnTypes, fs);\r\n    this._path=path;\r\n    this.rootFS=rootFS;\r\n    this.fs=rootFS.resolveFS(path);\r\n    /*this.act={};// path/fs after follwed symlink\r\n    this.act.path=this.fs.resolveLink(path);\r\n    this.act.fs=rootFS.resolveFS(this.act.path);\r\n    A.is(this.act, {fs:FSClass, path:P.Absolute});*/\r\n    if (this.isDir() && !P.isDir(path)) {\r\n        this._path+=P.SEP;\r\n    }\r\n};\r\nSFile.is=function (path) {\r\n    return path && typeof (path.isSFile)==\"function\" && path.isSFile();\r\n};\r\nfunction getPath(f) {\r\n    if (SFile.is(f)) {\r\n        return f.path();\r\n    } else {\r\n        A.is(f,P.Absolute);\r\n        return f;\r\n    }\r\n}\r\nSFile.prototype={\r\n    isSFile: function (){return true;},\r\n    setPolicy: function (p) {\r\n        if (this.policy) throw new Error(\"policy already set\");\r\n        this.policy=p;\r\n        return this._clone();\r\n    },\r\n    getPolicy: function (p) {\r\n        return this.policy;\r\n    },\r\n    _clone: function (){\r\n        return this._resolve(this.path());\r\n    },\r\n    _resolve: function (path, options) {\r\n        var res;\r\n        options=options||{};\r\n        if (SFile.is(path)) {\r\n            res=path;\r\n        } else {\r\n            A.is(path,P.Absolute);\r\n            var topdir;\r\n            var policy=options.policy || this.policy;\r\n            if (policy && (topdir=policy.topDir)) {\r\n                if (topdir.path) topdir=topdir.path();\r\n                if (!P.startsWith(path, topdir)) {\r\n                    throw new Error(path+\": cannot access. Restricted to \"+topdir);\r\n                }\r\n            }\r\n            res=new SFile(this.rootFS, path);\r\n            res.policy=policy;\r\n        }\r\n        if (res.policy) {\r\n            return Util.privatize(res);\r\n        } else {\r\n            return res;\r\n        }\r\n    },\r\n    contains: function (file) {\r\n        A(SFile.is(file),file+\" shoud be a SFile object.\");\r\n        if (!this.isDir()) return false;\r\n        return P.startsWith( file.path(), this.path());\r\n    },\r\n    path: function () {\r\n        return this._path;\r\n    },\r\n    name: function () {\r\n        return P.name(this.path());\r\n    },\r\n    truncExt: function (ext) {\r\n        return P.truncExt(this.path(),ext);\r\n    },\r\n    ext: function () {\r\n        return P.ext(this.path());\r\n    },\r\n    relPath: function (base) {\r\n        // base should be SFile or Path from rootFS\r\n        var bp=(base.path ?\r\n                base.path() :\r\n                base );\r\n        return P.relPath(this.path(), A.is(bp,P.Absolute) );\r\n    },\r\n    up: function () {\r\n        var pathR=this.path();\r\n        var pa=P.up(pathR);\r\n        if (pa==null) return null;\r\n        return this._resolve(pa);\r\n    },\r\n    rel: function (relPath) {\r\n        A.is(relPath, P.Relative);\r\n        this.assertDir();\r\n        var pathR=this.path();\r\n        return this._resolve(P.rel(pathR, relPath));\r\n    },\r\n    sibling: function (n) {\r\n        return this.up().rel(n);\r\n    },\r\n    startsWith: function (pre) {\r\n        return P.startsWith(this.name(),pre);\r\n    },\r\n    endsWith: function (post) {\r\n        return P.endsWith(this.name(),post);\r\n    },\r\n    equals:function (o) {\r\n        return (o && typeof o.path==\"function\" && o.path()==this.path());\r\n    },\r\n    toString:function (){\r\n        return this.path();\r\n    },\r\n    //Common\r\n    touch: function () {\r\n        return this.act.fs.touch(this.act.path);\r\n    },\r\n    isReadOnly: function () {\r\n        return this.act.fs.isReadOnly(this.act.path);\r\n    },\r\n    isTrashed:function () {\r\n        var m=this.metaInfo();\r\n        if (!m) return false;\r\n        return m.trashed;\r\n    },\r\n    metaInfo: function () {\r\n        if (arguments.length==0) {\r\n            return this.getMetaInfo.apply(this,arguments);\r\n        } else {\r\n            return this.setMetaInfo.apply(this,arguments);\r\n        }\r\n    },\r\n    getMetaInfo: function (options) {\r\n        return this.act.fs.getMetaInfo(this.act.path,options);\r\n    },\r\n    setMetaInfo: function (info, options) {\r\n        return this.act.fs.setMetaInfo(this.act.path,info, options);\r\n    },\r\n    getDirTree: function (options) {\r\n        return this.act.fs.getDirTree(this.act.path, options);\r\n    },\r\n    assertExists: function () {\r\n        A(this.exists(),this.path()+\" does not exist.\");\r\n    },\r\n    lastUpdate:function () {\r\n        this.assertExists();\r\n        return this.metaInfo().lastUpdate;\r\n    },\r\n    exists: function (options) {\r\n        var args=Array.prototype.slice.call(arguments);\r\n        if (typeof args[0]===\"function\") {\r\n            var f=args.shift();\r\n            return DU.resolve(this.exists.apply(this,args)).then(f);\r\n        }\r\n        options=options||{};\r\n        var p=this.fs.exists(this.path(),options);\r\n        if (p || options.noFollowLink) {\r\n            return p;\r\n        } else {\r\n            return this.act.fs.exists(this.act.path,{noFollowLink:true});\r\n        }\r\n    },\r\n    rm: function (options) {\r\n        //   ln /test/c /a/b/\r\n        //   rm a/b/c/\r\n        //   rm a/b/c/d\r\n        var t=this;\r\n        options=options||{};\r\n        if (this.isLink()) {\r\n            return DU.resolve(this.fs.rm(this.path(),options));\r\n        }\r\n        /*if (!this.exists({noFollowLink:true})) {\r\n            return this.act.fs.rm(this.act.path, options);\r\n        }*/\r\n        var a;\r\n        if (this.isDir() && (options.recursive||options.r)) {\r\n            a=this.each(function (f) {\r\n                return f.rm(options);\r\n            });\r\n        } else {\r\n            a=DU.resolve();\r\n        }\r\n        return a.then(function () {\r\n            return t.act.fs.rm(t.act.path, options);\r\n        });\r\n        //var pathT=this.path();\r\n        //this.fs.rm(pathT, options);\r\n    },\r\n    removeWithoutTrash: function (options) {\r\n        options=options||{};\r\n        options.noTrash=true;\r\n        this.rm(options);\r\n    },\r\n    isDir: function () {\r\n        return this.act.fs.isDir(this.act.path);\r\n    },\r\n    // File\r\n    text:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n\t\t\treturn this.getText(f);\r\n\t\t}\r\n        if (arguments.length>0) {\r\n            return this.setText(arguments[0]);\r\n        } else {\r\n            return this.getText();\r\n        }\r\n    },\r\n    setText:function (t) {\r\n        A.is(t,String);\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        var ct=this.contentType({def:null});\r\n        //if (this.isText()) {\r\n        if (ct!==null && !ct.match(/^text/) && Content.looksLikeDataURL(t)) {\r\n            // bad knowhow: if this is a binary file apparently, convert to URL\r\n            return DU.throwNowIfRejected(this.setContent(Content.url(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.url(t)));\r\n        } else {\r\n            // if use fs.setContentAsync, the error should be handled by .fail\r\n            // setText should throw error immediately (Why? maybe old style of text(\"foo\") did it so...)\r\n            return DU.throwNowIfRejected(this.setContent(Content.plainText(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.plainText(t)));\r\n        }\r\n    },\r\n    appendText:function (t) {\r\n        A.is(t,String);\r\n        //if (this.isText()) {\r\n        return this.act.fs.appendContent(this.act.path, Content.plainText(t));\r\n        /*} else {\r\n            throw new Error(\"append only for text file\");\r\n        }*/\r\n    },\r\n    getContent: function (f) {\r\n        if (typeof f==\"function\") {\r\n            return this.act.fs.getContentAsync(this.act.path).then(f);\r\n        }\r\n        return this.act.fs.getContent(this.act.path);\r\n    },\r\n    setContent: function (c) {\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        // why setContentAsync? AsyncDU.resolvesyncsync...PromiseJQ\r\n        // fs2/promise.js\r\n        return this.act.fs.setContentAsync(this.act.path,c);\r\n    },\r\n\r\n    getText:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n    \t\tvar t=this;\r\n    \t    return this.getContent(forceText).then(f);\r\n    \t}\r\n        return forceText(this.act.fs.getContent(this.act.path));\r\n        /*if (this.isText()) {\r\n            return this.act.fs.getContent(this.act.path).toPlainText();\r\n        } else {\r\n            return this.act.fs.getContent(this.act.path).toURL();\r\n        }*/\r\n        function forceText(c) {\r\n\t    \t//if (t.isText()) {\r\n            try {\r\n                return c.toPlainText();\r\n            } catch(e) {\r\n    \t    \treturn c.toURL();\r\n    \t    }\r\n        }\r\n    },\r\n    getDataURL: function (f) {\r\n        if (typeof f===\"function\") {\r\n            return this.getContent(function (c) {\r\n                return c.toURL();\r\n            });\r\n        }\r\n        return this.getContent().toURL();\r\n    },\r\n    setDataURL: function (u) {\r\n        return this.setContent(Content.url(u));\r\n    },\r\n    dataURL:function (d) {\r\n        if (typeof d===\"string\") return this.setDataURL(d);\r\n        if (typeof d===\"function\") return this.getDataURL(d);\r\n        return this.getDataURL();\r\n    },\r\n    isText: function () {\r\n        return this.act.fs.isText(this.act.path);\r\n    },\r\n    contentType: function (options) {\r\n        return this.act.fs.getContentType(this.act.path,options);\r\n    },\r\n    bytes: function (b) {\r\n        if (Content.isBuffer(b)) return this.setBytes(b);\r\n        return this.getBytes();\r\n    },\r\n    setBytes:function (b) {\r\n        return this.act.fs.setContent(this.act.path, Content.bin(b,this.contentType()));\r\n    },\r\n    getBytes:function (options) {\r\n        options=options||{};\r\n        return this.act.fs.getContent(this.act.path).toBin(options.binType);\r\n    },\r\n    getURL: function () {\r\n        return this.act.fs.getURL(this.act.path);\r\n    },\r\n    lines:function (lines) {\r\n        if (lines instanceof Array) {//WRITE\r\n            return this.text(lines.join(\"\\n\"));\r\n        } else if (typeof lines===\"function\") {//READ async\r\n            return this.text(function (r) {\r\n                return lines(r.replace(/\\r/g,\"\").split(\"\\n\"));\r\n            });\r\n        }\r\n        return this.text().replace(/\\r/g,\"\").split(\"\\n\");\r\n    },\r\n    obj: function () {\r\n        var file=this;\r\n        if (arguments.length==0) {\r\n            var t=file.text();\r\n            if (!t) return null;\r\n            return JSON.parse(t);\r\n        } else {\r\n            file.text(JSON.stringify(A.is(arguments[0],Object) ));\r\n        }\r\n    },\r\n    copyFrom: function (src, options) {\r\n        return src.copyTo(this,options);\r\n    },\r\n    copyTo: function (dst, options) {\r\n        A(dst && dst.isSFile(),dst+\" is not a file\");\r\n        var src=this;\r\n        var options=options||{};\r\n        var srcIsDir=src.isDir();\r\n        var dstIsDir=dst.isDir();\r\n        if (!srcIsDir && dstIsDir) {\r\n            dst=dst.rel(src.name());\r\n            A(!dst.isDir(), dst+\" is a directory.\");\r\n            dstIsDir=false;\r\n        }\r\n        if (srcIsDir && !dstIsDir) {\r\n           this.err(\"Cannot move dir \"+src.path()+\" to file \"+dst.path());\r\n        } else if (!srcIsDir && !dstIsDir) {\r\n            if (options.echo) options.echo(src+\" -> \"+dst);\r\n            var res=this.act.fs.cp(this.act.path, dst.getResolvedLinkPath(),options);\r\n            res=DU.resolve(res);\r\n            if (options.a) {\r\n                return res.then(function () {\r\n                    return dst.setMetaInfo(src.getMetaInfo());\r\n                });\r\n            }\r\n            return res;\r\n        } else {\r\n            A(srcIsDir && dstIsDir,\"Both src and dst should be dir\");\r\n            return src.each(function (s) {\r\n                var r;\r\n                var dstf=dst.rel(s.name());\r\n                if (options.progress) {\r\n                    r=options.progress(dstf,{src:s,dst:dstf});\r\n                }\r\n                return DU.resolve(r).then(function () {\r\n                    return dstf.copyFrom(s, options);\r\n                });\r\n            });\r\n        }\r\n        //file.text(src.text());\r\n        //if (options.a) file.metaInfo(src.metaInfo());\r\n    },\r\n    moveFrom: function (src, options) {\r\n        var t=this;\r\n        return t.exists(function (ex) {\r\n            return t.copyFrom(src,options).then(function () {\r\n                return src.rm({recursive:true});\r\n            },function (e) {\r\n                // rollback\r\n                if (!ex) return t.exists(function (ex) {\r\n                    if (ex) return t.rm({recursive:true});\r\n                }).then(function () {throw e;});\r\n                throw e;\r\n            });\r\n        });\r\n    },\r\n    moveTo: function (dst, options) {\r\n        return dst.moveFrom(this,options);\r\n    },\r\n    // Dir\r\n    assertDir:function () {\r\n        A.is(this.path(),P.Dir);\r\n        return this;\r\n    },\r\n    /*files:function (f,options) {\r\n        var dir=this.assertDir();\r\n        var res=[];\r\n        this.each(function (f) {\r\n            res.add(f);\r\n        },options);\r\n        return res;\r\n    },*/\r\n    each:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls,f);// ls.forEach(f)\r\n        });\r\n    },\r\n    eachrev:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls.reverse(),f);// ls.forEach(f)\r\n        });\r\n    },\r\n    recursive:function (fun,options) {\r\n        var dir=this.assertDir();\r\n        options=dir.convertOptions(options);\r\n        return dir.each(function (f) {\r\n            if (f.isDir()) return f.recursive(fun,options);\r\n            else return fun(f);\r\n        },options);\r\n    },\r\n    _listFiles:function (options,async) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        if (async) {\r\n            return this.act.fs.opendirAsync(this.act.path, options).\r\n            then(cvt);\r\n        } else {\r\n            return cvt( this.act.fs.opendir(this.act.path, options));\r\n        }\r\n        function cvt(di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        }\r\n    },\r\n    listFilesAsync:function (options) {\r\n        return this._listFiles(options,true);\r\n        /*\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        return this.act.fs.opendirAsync(this.act.path, options).\r\n        then(function (di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        });*/\r\n    },\r\n    listFiles:function (options) {\r\n        return this._listFiles(options,false);\r\n        /*var args=Array.prototype.slice.call(arguments);\r\n        return DU.assertResolved(this.listFilesAsync.apply(this,args));*/\r\n    },\r\n    ls:function (options) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        if (!options) {\r\n            return this.act.fs.opendir(this.act.path, options);\r\n        }\r\n        var res=dir.listFiles(options);\r\n        return res.map(function (f) {\r\n            return f.name();\r\n        });\r\n    },\r\n    convertOptions:function(o) {\r\n        var options=Util.extend({},o);\r\n        var dir=this.assertDir();\r\n        var pathR=this.path();\r\n        var excludes=options.excludes || {};\r\n        if (typeof excludes===\"function\") {\r\n            options.excludesF=excludes;\r\n        } else if (typeof excludes===\"object\") {\r\n            if (excludes instanceof Array) {\r\n                var nex={};\r\n                excludes.forEach(function (e) {\r\n                    if (P.startsWith(e,\"/\")) {\r\n                        nex[e]=1;\r\n                    } else {\r\n                        nex[pathR+e]=1;\r\n                    }\r\n                });\r\n                excludes=nex;\r\n            }\r\n            options.excludesF=function (f) {\r\n                return excludes[f.path()];\r\n            };\r\n        }\r\n        return A.is(options,{excludesF:Function});\r\n    },\r\n    mkdir: function () {\r\n        return this.touch();\r\n    },\r\n    link: function (to,options) {// % ln to path\r\n        if (this.exists()) throw new Error(this.path()+\": exists.\");\r\n        return this.act.fs.link(this.act.path,to.path(),options);\r\n    },\r\n    resolveLink:function () {\r\n        return this._resolve(this.act.path);\r\n    },\r\n    isLink: function () {\r\n        return this.fs.isLink(this.path());\r\n    },\r\n    getResolvedLinkPath: function () {\r\n        return this.act.path;\r\n    },\r\n    getFS:function () {\r\n        return this.act.fs;\r\n    },\r\n    observe: function (h) {\r\n        return this.getFS().getRootFS().addObserver(this.path(),h);\r\n    },\r\n    getBlob: function () {\r\n        return new Blob([this.bytes()],{type:this.contentType()});\r\n    },\r\n    setBlob: function (blob) {\r\n        var t=this;\r\n        return DU.promise(function (succ,err) {\r\n            var reader = new FileReader();\r\n            reader.addEventListener(\"loadend\", function() {\r\n                // reader.result contains the contents of blob as a typed array\r\n                DU.resolve(t.setBytes(reader.result)).then(succ);\r\n            });\r\n            reader.readAsArrayBuffer(blob);\r\n        });\r\n    },\r\n    size: function (f) {\r\n        if (!f) {\r\n            if (!this.isDir()) {\r\n                return this.act.fs.size(this.act.path);\r\n                //return this.getBytes().byteLength;\r\n            } else {\r\n                var sum=0;\r\n                this.each(function (f) {\r\n                    sum+=f.size();\r\n                });\r\n                return sum;\r\n            }\r\n        } else {\r\n            //TODO: async\r\n        }\r\n    },\r\n    download: function () {\r\n        if (this.isDir()) throw new Error(this+\": Download dir is not support yet. Use 'zip' instead.\");\r\n        saveAs(this.getBlob(),this.name());;\r\n    },\r\n    err: function () {\r\n        var a=Array.prototype.slice.call(arguments);\r\n        console.log.apply(console,a);\r\n        throw new Error(a.join(\"\"));\r\n    },\r\n    exportAsObject: function (options) {\r\n        var base=this;\r\n        var data={};\r\n        this.recursive(function (f) {\r\n            data[f.relPath(base)]=f.text();\r\n        },options);\r\n        var req={base:base.path(),data:data};\r\n        return req;\r\n    },\r\n    importFromObject: function (data, options) {\r\n        if (typeof data===\"string\") data=JSON.parse(data);\r\n        var data=data.data;\r\n        for (var k in data) {\r\n            this.rel(k).text(data[k]);\r\n        }\r\n    },\r\n    watch: function (_1,_2) {\r\n        var options={},handler=function(){};\r\n        if (typeof _1===\"object\") options=_1;\r\n        if (typeof _2===\"object\") options=_2;\r\n        if (typeof _1===\"function\") handler=_1;\r\n        if (typeof _2===\"function\") handler=_2;\r\n        var rfs=this.getFS().getRootFS();\r\n        //var t=this;\r\n        rfs.addObserver(this.path(),function (path, meta) {\r\n            handler(meta.eventType, rfs.get(path),meta );\r\n        });\r\n    }\r\n};\r\nObject.defineProperty(SFile.prototype,\"act\",{\r\n    get: function () {\r\n        if (this._act) return this._act;\r\n        this._act={};// path/fs after follwed symlink\r\n        this._act.path=this.fs.resolveLink(this._path);\r\n        this._act.fs=this.rootFS.resolveFS(this._act.path);\r\n        A.is(this._act, {fs:FSClass, path:P.Absolute});\r\n        return this._act;\r\n    }\r\n});\r\n\r\nreturn SFile;\r\n});\r\n\r\ndefine('RootFS',[\"assert\",\"FSClass\",\"PathUtil\",\"SFile\"], function (assert,FS,P,SFile) {\r\n    var RootFS=function (defaultFS){\r\n        assert.is(defaultFS,FS);\r\n        this.mount(null, defaultFS);\r\n    };\r\n    var dst=RootFS.prototype;\r\n    var p={\r\n            err: function (path, mesg) {\r\n                throw new Error(path+\": \"+mesg);\r\n            },\r\n            // mounting\r\n            fstab: function () {\r\n                return this._fstab=this._fstab||[];//[{fs:this, path:P.SEP}];\r\n            },\r\n            unmount: function (path, options) {\r\n                assert.is(arguments,[P.AbsDir] );\r\n                var t=this.fstab();\r\n                console.log(t);\r\n                for (var i=0; i<t.length; i++) {\r\n                    if (t[i].mountPoint==path) {\r\n                        t.splice(i,1);\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            availFSTypes:function (){\r\n                return FS.availFSTypes();\r\n            },\r\n            mount: function (path, fs, options) {\r\n                if (typeof fs==\"string\") {\r\n                    var fact=assert( FS.availFSTypes()[fs] ,\"fstype \"+fs+\" is undefined.\");\r\n                    fs=fact(path, options||{});\r\n                }\r\n                assert.is(fs,FS);\r\n                fs.mounted(this, path);\r\n                this.fstab().unshift(fs);\r\n            },\r\n            resolveFS:function (path, options) {\r\n                assert.is(path,P.Absolute);\r\n                var res;\r\n                this.fstab().forEach(function (fs) {\r\n                    if (res) return;\r\n                    if (fs.inMyFS(path)) {\r\n                        res=fs;\r\n                    }\r\n                });\r\n                if (!res) this.err(path,\"Cannot resolve\");\r\n                return assert.is(res,FS);\r\n            },\r\n            get: function (path) {\r\n                assert.is(path,P.Absolute);\r\n                return new SFile(this.resolveFS(path), path);\r\n            },\r\n            addObserver: function (_1,_2,_3) {\r\n                this.observers=this.observers||[];\r\n                var options={},path,f;\r\n                if (typeof _1===\"string\") path=_1;\r\n                if (typeof _2===\"string\") path=_2;\r\n                if (typeof _3===\"string\") path=_3;\r\n                if (typeof _1===\"object\") options=_1;\r\n                if (typeof _2===\"object\") options=_2;\r\n                if (typeof _3===\"object\") options=_3;\r\n                if (typeof _1===\"function\") f=_1;\r\n                if (typeof _2===\"function\") f=_2;\r\n                if (typeof _3===\"function\") f=_3;\r\n                assert.is(path,String);\r\n                assert.is(f,Function);\r\n                var fs=this.resolveFS(path);\r\n                var remover=fs.onAddObserver(path,options);\r\n                var observers=this.observers;\r\n                var observer={\r\n                    path:path,\r\n                    handler:f,\r\n                    remove: function () {\r\n                        var i=observers.indexOf(this);\r\n                        observers.splice(i,1);\r\n                        if (remover) remover.remove();\r\n                    }\r\n                };\r\n                this.observers.push(observer);\r\n                return observer;\r\n            },\r\n            notifyChanged: function (path,metaInfo) {\r\n                if (!this.observers) return;\r\n                this.observers.forEach(function (ob) {\r\n                    if (P.isChildOf(path,ob.path)) {\r\n                        ob.handler(path,metaInfo);\r\n                    }\r\n                });\r\n            },\r\n            getRootFS:function () {\r\n                return this;\r\n            }\r\n    };\r\n    for (var i in p) {\r\n        dst[i]=p[i];\r\n    }\r\n    return RootFS;\r\n});\r\n\r\ndefine('zip',[\"SFile\",/*\"jszip\",*/\"FileSaver\",\"Util\",\"DeferredUtil\"],\r\nfunction (SFile,/*JSZip,*/fsv,Util,DU) {\r\n    var zip={};\r\n    zip.setJSZip=function (JSZip) {\r\n        zip.JSZip=JSZip;\r\n        if (!DU.external.Promise) {\r\n            DU.external.Promise=JSZip.external.Promise;\r\n        }\r\n    };\r\n    if (typeof JSZip!==\"undefined\") zip.setJSZip(JSZip);\r\n    zip.zip=function (dir,dstZip,options) {\r\n        if (!SFile.is(dstZip)) options=dstZip;\r\n        options=options||{};\r\n        var jszip = new zip.JSZip();\r\n        function loop(dst, dir) {\r\n            return dir.each(function (f) {\r\n                var r=DU.resolve();\r\n                if (options.progress) {\r\n                    r=options.progress(f);\r\n                }\r\n                return r.then(function () {\r\n                    if (f.isDir()) {\r\n                        var sf=dst.folder(f.name().replace(/[\\/\\\\]$/,\"\"));\r\n                        return loop(sf, f);\r\n                    } else {\r\n                        return f.getContent(function (c) {\r\n                            dst.file(f.name(),c.toArrayBuffer());\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return loop(jszip, dir).then(function () {\r\n            return DU.resolve(jszip.generateAsync({\r\n                type:\"arraybuffer\",\r\n                compression:\"DEFLATE\"\r\n            }));\r\n        }).then(function (content) {\r\n            //console.log(\"zip.con\",content);\r\n            if (SFile.is(dstZip)) {\r\n                return dstZip.setBytes(content);\r\n            } else {\r\n                saveAs(\r\n                    new Blob([content],{type:\"application/zip\"}),\r\n                    dir.name().replace(/[\\/\\\\]$/,\"\")+\".zip\"\r\n                );\r\n            }\r\n        });\r\n    };\r\n    zip.unzip=function (arrayBuf,destDir,options) {\r\n        var c;\r\n        var status={};\r\n        options=options||{};\r\n        if (SFile.is(arrayBuf)) {\r\n        \tc=arrayBuf.getContent();\r\n        \tarrayBuf=c.toArrayBuffer();\r\n        }\r\n        if (!options.onCheckFile) {\r\n            options.onCheckFile=function (f) {\r\n                if (options.overwrite) {\r\n                    return f;\r\n                } else {\r\n                    if (f.exists()) {\r\n                        return false;\r\n                    }\r\n                    return f;\r\n                }\r\n            };\r\n        }\r\n        var jszip=new zip.JSZip();\r\n        return DU.resolve(jszip.loadAsync(arrayBuf)).then(function () {\r\n            return DU.each(jszip.files,function (key,zipEntry) {\r\n                //var zipEntry=jszip.files[i];\r\n                var buf,dest;\r\n                return DU.resolve(zipEntry.async(\"arraybuffer\")).then(function (_buf) {\r\n                    buf=_buf;\r\n                    dest=destDir.rel(zipEntry.name);\r\n                    if (options.progress) {\r\n                        return DU.resolve(options.progress(dest));\r\n                    }\r\n                }).then(function () {\r\n                    console.log(\"Inflating\",zipEntry.name);\r\n                    if (dest.isDir()) return;\r\n                    var s={\r\n                        file:dest,\r\n                        status:\"uploaded\"\r\n                    };\r\n                    status[dest.path()]=s;\r\n                    var c=FS.Content.bin( buf, dest.contentType() );\r\n                    var res=options.onCheckFile(dest,c);\r\n                    if (res===false) {\r\n                        s.status=\"cancelled\";\r\n                        dest=null;\r\n                    }\r\n                    if (SFile.is(res)) {\r\n                        if (dest.path()!==res.path()) s.redirectedTo=res;\r\n                        dest=res;\r\n                    }\r\n                    if (dest) return dest.setContent(c);\r\n                });\r\n            });\r\n        }).then(function () {\r\n            console.log(\"unzip done\",status);\r\n            return status;\r\n        });\r\n    };\r\n    return zip;\r\n});\r\n\r\n/*(function (global, factory) {\r\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\r\n\ttypeof define === 'function' && define.amd ? define(factory) :\r\n\t(factory());\r\n}(this, (function () { 'use strict';*/\r\n// modified from https://github.com/taylorhakes/promise-polyfill/blob/master/dist/polyfill.js\r\n// if promise resolved immediately, it will run f of then(f)\r\n// P.resolve(5).then(e=>console.log(e)); console.log(3)  ->  show 5 3, while original is 3 5\r\ndefine('promise',[], function() {\r\n\r\n/**\r\n * @this {Promise}\r\n */\r\nfunction finallyConstructor(callback) {\r\n  var constructor = this.constructor;\r\n  return this.then(\r\n    function(value) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        return value;\r\n      });\r\n    },\r\n    function(reason) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        // @ts-ignore\r\n        return constructor.reject(reason);\r\n      });\r\n    }\r\n  );\r\n}\r\n\r\n// Store setTimeout reference so promise-polyfill will be unaffected by\r\n// other code modifying setTimeout (like sinon.useFakeTimers())\r\nvar setTimeoutFunc = setTimeout;\r\n\r\nfunction isArray(x) {\r\n  return Boolean(x && typeof x.length !== 'undefined');\r\n}\r\n\r\nfunction noop() {}\r\n\r\n// Polyfill for Function.prototype.bind\r\nfunction bind(fn, thisArg) {\r\n  return function() {\r\n    fn.apply(thisArg, arguments);\r\n  };\r\n}\r\n\r\n/**\r\n * @constructor\r\n * @param {Function} fn\r\n */\r\nfunction Promise(fn) {\r\n  if (!(this instanceof Promise))\r\n    throw new TypeError('Promises must be constructed via new');\r\n  if (typeof fn !== 'function') throw new TypeError('not a function');\r\n  /** @type {!number} */\r\n  this._state = 0;\r\n  /** @type {!boolean} */\r\n  this._handled = false;\r\n  /** @type {Promise|undefined} */\r\n  this._value = undefined;\r\n  /** @type {!Array<!Function>} */\r\n  this._deferreds = [];\r\n\r\n  doResolve(fn, this);\r\n}\r\n\r\nfunction handle(self, deferred) {\r\n  while (self._state === 3) {\r\n    self = self._value;\r\n  }\r\n  if (self._state === 0) {\r\n    self._deferreds.push(deferred);\r\n    return;\r\n  }\r\n  self._handled = true;\r\n  Promise._immediateFn(function() {\r\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n    if (cb === null) {\r\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n      return;\r\n    }\r\n    var ret;\r\n    try {\r\n      ret = cb(self._value);\r\n    } catch (e) {\r\n      reject(deferred.promise, e);\r\n      return;\r\n    }\r\n    resolve(deferred.promise, ret);\r\n  });\r\n}\r\n\r\nfunction resolve(self, newValue) {\r\n  try {\r\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n    if (newValue === self)\r\n      throw new TypeError('A promise cannot be resolved with itself.');\r\n    if (\r\n      newValue &&\r\n      (typeof newValue === 'object' || typeof newValue === 'function')\r\n    ) {\r\n      var then = newValue.then;\r\n      if (newValue instanceof Promise) {\r\n        self._state = 3;\r\n        self._value = newValue;\r\n        finale(self);\r\n        return;\r\n      } else if (typeof then === 'function') {\r\n        doResolve(bind(then, newValue), self);\r\n        return;\r\n      }\r\n    }\r\n    self._state = 1;\r\n    self._value = newValue;\r\n    finale(self);\r\n  } catch (e) {\r\n    reject(self, e);\r\n  }\r\n}\r\n\r\nfunction reject(self, newValue) {\r\n  self._state = 2;\r\n  self._value = newValue;\r\n  finale(self);\r\n}\r\n\r\nfunction finale(self) {\r\n  if (self._state === 2 && self._deferreds.length === 0) {\r\n    Promise._immediateFn(function() {\r\n      if (!self._handled) {\r\n        Promise._unhandledRejectionFn(self._value);\r\n      }\r\n    });\r\n  }\r\n\r\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n    handle(self, self._deferreds[i]);\r\n  }\r\n  self._deferreds = null;\r\n}\r\n\r\n/**\r\n * @constructor\r\n */\r\nfunction Handler(onFulfilled, onRejected, promise) {\r\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n  this.promise = promise;\r\n}\r\n\r\n/**\r\n * Take a potentially misbehaving resolver function and make sure\r\n * onFulfilled and onRejected are only called once.\r\n *\r\n * Makes no guarantees about asynchrony.\r\n */\r\nfunction doResolve(fn, self) {\r\n  var done = false;\r\n  try {\r\n    fn(\r\n      function(value) {\r\n        if (done) return;\r\n        done = true;\r\n        resolve(self, value);\r\n      },\r\n      function(reason) {\r\n        if (done) return;\r\n        done = true;\r\n        reject(self, reason);\r\n      }\r\n    );\r\n  } catch (ex) {\r\n    if (done) return;\r\n    done = true;\r\n    reject(self, ex);\r\n  }\r\n}\r\n\r\nPromise.prototype['catch'] = function(onRejected) {\r\n  return this.then(null, onRejected);\r\n};\r\n\r\nPromise.prototype.then = function(onFulfilled, onRejected) {\r\n  // @ts-ignore\r\n  var prom = new this.constructor(noop);\r\n\r\n  handle(this, new Handler(onFulfilled, onRejected, prom));\r\n  return prom;\r\n};\r\n\r\nPromise.prototype['finally'] = finallyConstructor;\r\n\r\nPromise.all = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.all accepts an array'));\r\n    }\r\n\r\n    var args = Array.prototype.slice.call(arr);\r\n    if (args.length === 0) return resolve([]);\r\n    var remaining = args.length;\r\n\r\n    function res(i, val) {\r\n      try {\r\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n          var then = val.then;\r\n          if (typeof then === 'function') {\r\n            then.call(\r\n              val,\r\n              function(val) {\r\n                res(i, val);\r\n              },\r\n              reject\r\n            );\r\n            return;\r\n          }\r\n        }\r\n        args[i] = val;\r\n        if (--remaining === 0) {\r\n          resolve(args);\r\n        }\r\n      } catch (ex) {\r\n        reject(ex);\r\n      }\r\n    }\r\n\r\n    for (var i = 0; i < args.length; i++) {\r\n      res(i, args[i]);\r\n    }\r\n  });\r\n};\r\n\r\nPromise.resolve = function(value) {\r\n  if (value && typeof value === 'object' && value.constructor === Promise) {\r\n    return value;\r\n  }\r\n\r\n  return new Promise(function(resolve) {\r\n    resolve(value);\r\n  });\r\n};\r\n\r\nPromise.reject = function(value) {\r\n  return new Promise(function(resolve, reject) {\r\n    reject(value);\r\n  });\r\n};\r\n\r\nPromise.race = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.race accepts an array'));\r\n    }\r\n\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n      Promise.resolve(arr[i]).then(resolve, reject);\r\n    }\r\n  });\r\n};\r\n\r\n// Use polyfill for setImmediate for performance gains\r\nPromise._immediateFn = function (fn) {fn();};/*\r\n  // @ts-ignore\r\n  (typeof setImmediate === 'function' &&\r\n    function(fn) {\r\n      // @ts-ignore\r\n      setImmediate(fn);\r\n    }) ||\r\n  function(fn) {\r\n    setTimeoutFunc(fn, 0);\r\n  };\r\n*/\r\n\r\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(/*err*/) {\r\n  if (typeof console !== 'undefined' && console) {\r\n    //console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\r\n  }\r\n};\r\n/** @suppress {undefinedVars} */\r\n/*\r\nvar globalNS = (function() {\r\n  // the only reliable means to get the global object is\r\n  // `Function('return this')()`\r\n  // However, this causes CSP violations in Chrome apps.\r\n  if (typeof self !== 'undefined') {\r\n    return self;\r\n  }\r\n  if (typeof window !== 'undefined') {\r\n    return window;\r\n  }\r\n  if (typeof global !== 'undefined') {\r\n    return global;\r\n  }\r\n  throw new Error('unable to locate global object');\r\n})();\r\n\r\nif (!('Promise' in globalNS)) {\r\n  globalNS['Promise'] = Promise;\r\n} else if (!globalNS.Promise.prototype['finally']) {\r\n  globalNS.Promise.prototype['finally'] = finallyConstructor;\r\n}*/\r\nreturn Promise;\r\n});\r\n\r\ndefine('FS',[\"FSClass\",\"NativeFS\",\"LSFS\", \"WebFS\", \"PathUtil\",\"Env\",\"assert\",\"SFile\",\"RootFS\",\"Content\",\"zip\",\"DeferredUtil\",\"promise\"],\r\n        function (FSClass,NativeFS,LSFS,WebFS, P,Env,A,SFile,RootFS,Content,zip,DU,PR) {\r\n    var FS={};\r\n    FS.assert=A;\r\n    FS.Content=Content;\r\n    FS.Class=FSClass;\r\n    FS.DeferredUtil=DU;\r\n    if (!DU.config.useJQ) {\r\n        DU.external.Promise=PR;\r\n    }\r\n    FS.Env=Env;\r\n    FS.LSFS=LSFS;\r\n    FS.NativeFS=NativeFS;\r\n    FS.PathUtil=P;\r\n    FS.RootFS=RootFS;\r\n    FS.SFile=SFile;\r\n    FS.WebFS=WebFS;\r\n    FS.zip=zip;\r\n    //if (zip.JSZip) DU.external.Promise=zip.JSZip.external.Promise;\r\n    if (typeof window==\"object\") window.FS=FS;\r\n    var rootFS;\r\n    var env=new Env({});\r\n    FS.addFSType=FSClass.addFSType;\r\n    FS.availFSTypes=FSClass.availFSTypes;\r\n\r\n    FS.setEnvProvider=function (e) {\r\n        env=e;\r\n    };\r\n    FS.getEnvProvider=function () {\r\n        return env;\r\n    };\r\n    FS.setEnv=function (key, value) {\r\n        if (typeof key==\"object\") {\r\n            for (var k in key) {\r\n                env.set(k,key[k]);\r\n            }\r\n        }else {\r\n            env.set(key,value);\r\n        }\r\n    };\r\n    FS.getEnv=function (key) {\r\n        if (typeof key==\"string\") {\r\n            return env.get(key);\r\n        }else {\r\n            return env.value;\r\n        }\r\n    };\r\n    FS.init=function (fs) {\r\n        if (rootFS) return;\r\n        if (!fs) {\r\n            if (NativeFS.available) {\r\n                fs=new NativeFS();\r\n            } else if (typeof localStorage===\"object\") {\r\n                fs=new LSFS(localStorage);\r\n            } else if (typeof importScripts===\"function\") {\r\n                // Worker\r\n                /* global self*/\r\n                self.addEventListener(\"message\", function (e) {\r\n                    var data=e.data;\r\n                    if (typeof data===\"string\") {\r\n                        data=JSON.parse(data);\r\n                    }\r\n                    switch(data.type) {\r\n                    case \"upload\":\r\n                        FS.get(data.base).importFromObject(data.data);\r\n                        break;\r\n                    case \"observe\":\r\n                        rootFS.observe(data.path, function (path,meta) {\r\n                            self.postMessage(JSON.stringify({\r\n                                type: \"changed\",\r\n                                path: path,\r\n                                content: FS.get(path).text(),\r\n                                meta: meta\r\n                            }));\r\n                        });\r\n                        break;\r\n                    }\r\n                });\r\n                fs=LSFS.ramDisk();\r\n            }\r\n        }\r\n        rootFS=new RootFS(fs);\r\n    };\r\n    FS.getRootFS=function () {\r\n        FS.init();\r\n        return rootFS;\r\n    };\r\n    FS.get=function () {\r\n        FS.init();\r\n        return rootFS.get.apply(rootFS,arguments);\r\n    };\r\n    FS.expandPath=function () {\r\n        return env.expandPath.apply(env,arguments);\r\n    };\r\n    FS.resolve=function (path, base) {\r\n        FS.init();\r\n        if (SFile.is(path)) return path;\r\n        path=env.expandPath(path);\r\n        if (base && !P.isAbsolutePath(path)) {\r\n            base=env.expandPath(base);\r\n            return FS.get(base).rel(path);\r\n        }\r\n        return FS.get(path);\r\n    };\r\n    FS.mount=function () {\r\n        FS.init();\r\n        return rootFS.mount.apply(rootFS,arguments);\r\n    };\r\n    FS.unmount=function () {\r\n        FS.init();\r\n        return rootFS.unmount.apply(rootFS,arguments);\r\n    };\r\n    FS.isFile=function (f) {\r\n        return SFile.is(f);\r\n    };\r\n    return FS;\r\n});\r\n\r\n//-----------\r\n\tvar resMod;\r\n\trequirejs([\"FS\"], function (r) {\r\n\t  resMod=r;\r\n\t});\r\n\tif (typeof window!==\"undefined\" && window.FS===undefined) window.FS=resMod;\r\n\tif (typeof module!==\"undefined\") module=resMod;\r\n\treturn resMod;\r\n});\r\n//})(window);\r\n\n/*global window,self,global*/\r\ndefine('root',[],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\ndefine('exceptionCatcher',[], function () {\r\n    var res={};\r\n    res.f=function (f) {\r\n        if (typeof f==\"function\") {\r\n            if (f.isTrcf) return f;\r\n            var r=function () {\r\n                if (res.handleException && !res.enter) {\r\n                    try {\r\n                        res.enter=true;\r\n                        return f.apply(this,arguments);\r\n                    } catch (e) {\r\n                        res.handleException(e);\r\n                    } finally {\r\n                        res.enter=false;\r\n                    }\r\n                } else {\r\n                    return f.apply(this,arguments);\r\n                }\r\n            };\r\n            r.isTrcf=true;\r\n            return r;\r\n        } else if(typeof f==\"object\") {\r\n            for (var k in f) {\r\n                f[k]=res.f(f[k]);\r\n            }\r\n            return f;\r\n        }\r\n    };\r\n    //res.handleException=function (){};\r\n    return res;\r\n});\ndefine('FileList',['require','exports','module','FS','root','exceptionCatcher'],function(require,exports,module) {\r\nconst FS=require(\"FS\");\r\nconst root=require(\"root\");\r\nconst EC=require(\"exceptionCatcher\");\r\nconst F=EC.f;\r\nmodule.exports=function FileList(elem, options) {\r\n    var _curDir=null;\r\n    var _curFile=null;\r\n    var _mod=false;\r\n    var selbox=elem[0].tagName.toLowerCase()==\"select\";\r\n    //console.log(elem);\r\n    if (!options) options={};\r\n    const ide=options.ide;\r\n    const runDialogParam=options.runDialogParam;\r\n    const desktopEnv=runDialogParam.desktopEnv;\r\n    var FL={select:select, ls:ls, on:(options.on?options.on:{}), curFile:curFile, curDir: curDir,\r\n    \t\tsetModified:setModified, isModified:isModified};\r\n    var path=$(\"<div>\");\r\n    var items=$(\"<div>\");\r\n    if (!selbox) elem.append(path).append(items);\r\n    else elem.change(function () {\r\n        if(this.value) select(FS.get(this.value));\r\n    });\r\n    function item(f) {\r\n    \tvar res=$();\r\n    \tif (!f) return res;\r\n    \tvar fn=f.path();\r\n    \titems.find(selbox?\"option\":\"span\").each(function () {\r\n    \t\tvar t=$(this);\r\n    \t\tif ( t.data(\"filename\")==fn) {\r\n    \t\t\tres=t;\r\n    \t\t}\r\n    \t});\r\n    \treturn res;\r\n    }\r\n    function select(f) {\r\n        if (open(f)) return;\r\n        if (!f) return;\r\n        _mod=false;\r\n        if (f.isDir()) {\r\n            //_curFile=null;\r\n            ls(f);\r\n        } else {\r\n            var nDir=f.up();\r\n            if (_curDir.path()!=nDir.path() ) {\r\n                _curFile=f;\r\n                ls(nDir);\r\n            } else {\r\n                item(_curFile).removeClass(\"selected\");\r\n                _curFile=f;\r\n                item(_curFile).addClass(\"selected\");\r\n            }\r\n        }\r\n    }\r\n    function setModified(m) {\r\n    \tif (!_curFile) return;\r\n    \t_mod=m;\r\n       \titem(_curFile).text(itemText(_curFile,m));\r\n    }\r\n    function isModified() {\r\n    \treturn _mod;\r\n    }\r\n    function ls(dir) {\r\n        if (typeof dir==\"string\") dir=FS.get(dir);\r\n        if (dir) {\r\n            _curDir=dir;\r\n            path.text(dir.name()).attr({title:dir.path()});\r\n        }\r\n        if (!_curDir) return;\r\n        if (!_curDir.isDir()) return;\r\n        items.empty();\r\n        var wait=$(\"<div>\").text(\"Wait..\");\r\n        items.append(wait);\r\n        if (selbox) {\r\n            elem.empty();\r\n            elem.append($(\"<option>\").text(\"Select...\"));\r\n        }\r\n        var p=_curDir.up();\r\n        if (p && !_curDir.equals(options.topDir)) {\r\n            if (selbox) {\r\n                elem.append($(\"<option>\").\r\n                        attr(\"value\",p.path()).\r\n                        text(\"[Up]\")\r\n                );\r\n            } else {\r\n                $(selbox?\"<option>\":\"<li>\").append(\r\n                        $(\"<span>\").addClass(\"fileItem\").text(\"[Up]\")\r\n                ).appendTo(items).click(function () {\r\n                    select(p);\r\n                });\r\n            }\r\n        }\r\n        if (_curFile && !_curFile.exists()) {\r\n            _curFile=null;\r\n        }\r\n        var i=0;\r\n        var dirs=_curDir.listFiles();\r\n        if (dirs.length>0) setTimeout(lp,0);\r\n        else wait.remove();\r\n        function lp() {\r\n            if (i==0) wait.remove();\r\n            var f=dirs[i++];\r\n            if (i<dirs.length) setTimeout(lp,0);\r\n            var n=displayName(f);\r\n            if (!n) return;\r\n            var isCur=_curFile && _curFile.path()==f.path();\r\n            if (selbox) {\r\n                elem.append($(\"<option>\").\r\n                        attr(\"value\",f.path()).\r\n                        text(itemText(f))\r\n                );\r\n            } else {\r\n                var s=$(\"<span>\").addClass(\"fileItem\").text(itemText(f)).data(\"filename\",f.path());\r\n                if (isCur) { s.addClass(\"selected\");}\r\n                //console.log(\"Add file item \",f,selbox);\r\n                $(\"<li>\").append(s).appendTo(items).click(function () {\r\n                    select(f);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    function itemText(f, mod) {\r\n    \treturn (mod?\"*\":\"\")+(f.isReadOnly()?\"[RO]\":\"\")+displayName(f);\r\n    }\r\n    function displayName(f) {\r\n        if (FL.on.displayName) return FL.on.displayName.apply(FL, arguments );\r\n        return f.name();\r\n    }\r\n    function curFile() {\r\n        return _curFile;\r\n    }\r\n    function curDir() {\r\n        return _curDir;\r\n    }\r\n    let curDOM;\r\n    function open(f) {\r\n\t// do not call directly !!  it doesnt change fl.curFile\r\n        if (f.isDir()) {\r\n            return;\r\n        }\r\n        $(\"#welcome\").hide();\r\n        ide.save();\r\n        const editors=ide.editors;\r\n        if (curDOM) curDOM.hide();\r\n        var inf=editors[f.path()];\r\n        if (!inf) {\r\n            var progDOM=$(\"<pre>\").css(\"height\", runDialogParam.screenH+\"px\").text(f.text()).appendTo(\"#progs\");\r\n            var prog=root.ace.edit(progDOM[0]);\r\n            window.lastEditor=prog;\r\n            if (typeof desktopEnv.editorFontSize==\"number\") prog.setFontSize(desktopEnv.editorFontSize);\r\n            else prog.setFontSize(16);\r\n            prog.setTheme(\"ace/theme/eclipse\");\r\n            prog.getSession().setMode(\"ace/mode/tonyu\");\r\n            inf=editors[f.path()]={file:f , editor: prog, dom:progDOM};\r\n            progDOM.click(F(function () {\r\n                ide.displayMode(\"edit\");\r\n            }));\r\n            prog.setReadOnly(false);\r\n            prog.clearSelection();\r\n            prog.focus();\r\n            try {\r\n                prog.commands.removeCommand(\"toggleFoldWidget\");\r\n                prog.setOptions({fixedWidthGutter:true});\r\n            }catch(e){}// F2\r\n\r\n            curDOM=progDOM;\r\n        } else {\r\n            if (inf.lastTimeStamp<inf.file.lastUpdate()) {\r\n                inf.editor.setValue(inf.file.text());\r\n                inf.editor.clearSelection();\r\n                inf.lastTimeStamp=inf.file.lastUpdate();\r\n            }\r\n            inf.dom.show();\r\n            inf.editor.focus();\r\n            curDOM=inf.dom;\r\n        }\r\n        window.curEditor=inf.editor;\r\n        inf.lastTimeStamp=inf.file.lastUpdate();\r\n    }\r\n\r\n    return FL;\r\n};\r\n});\r\n\ndefine('UI',[\"Util\",\"exceptionCatcher\"],function (Util, EC) {\r\n    var UI={};\r\n    var F=EC.f;\r\n    UI=function () {\r\n        var expr=[];\r\n        for (var i=0 ; i<arguments.length ; i++) {\r\n            expr[i]=arguments[i];\r\n        }\r\n        var listeners=[];\r\n        var $vars={};\r\n        var $edits=[];\r\n        var res=parse(expr);\r\n        res.$edits=$edits;\r\n        res.$vars=$vars;\r\n        $.data(res,\"edits\",$edits);\r\n        $.data(res,\"vars\",$vars);\r\n        $edits.load=function (model) {\r\n            $edits.model=model;\r\n            $edits.forEach(function (edit) {\r\n                $edits.writeToJq(edit.params.$edit, edit.jq);\r\n            });\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.writeToJq=function ($edit, jq) {\r\n        \tvar m=$edits.model;\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                m=m[a[i]];\r\n            }\r\n            m=$edit.type.toVal(m);\r\n            if (jq.attr(\"type\")==\"checkbox\") {\r\n                jq.prop(\"checked\",!!m);\r\n            } else {\r\n                jq.val(m);\r\n            }\r\n        };\r\n        $edits.validator={\r\n       \t\terrors:{},\r\n       \t\tshow: function () {\r\n       \t\t\tif ($vars.validationMessage) {\r\n       \t\t\t\t$vars.validationMessage.empty();\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\t$vars.validationMessage.append(UI(\"div\", this.errors[name].mesg));\r\n       \t\t\t\t}\r\n       \t\t\t}\r\n       \t\t\tif ($vars.OKButton) {\r\n       \t\t\t\tvar ok=true;\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\tok=false;\r\n       \t\t\t\t}\r\n       \t\t\t\t$vars.OKButton.attr(\"disabled\", !ok);\r\n       \t\t\t}\r\n       \t\t},\r\n       \t\ton: {\r\n       \t\t\tvalidate: function () {}\r\n       \t\t},\r\n       \t\taddError: function (name, mesg, jq) {\r\n       \t\t\tthis.errors[name]={mesg:mesg, jq:jq};\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tremoveError: function (name) {\r\n       \t\t\tdelete this.errors[name];\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tallOK: function () {\r\n       \t\t\tfor (var i in this.errors) {\r\n       \t\t\t\tdelete this.errors[i];\r\n       \t\t\t}\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tisValid: function () {\r\n       \t\t    var res=true;\r\n       \t\t    for (var i in this.errors) res=false;\r\n       \t\t    return res;\r\n       \t\t}\r\n        };\r\n        $edits.writeToModel=function ($edit, val ,jq) {\r\n            var m=$edits.model;\r\n        \t//console.log($edit, m);\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            try {\r\n                val=$edit.type.fromVal(val);\r\n            } catch (e) {\r\n            \t$edits.validator.addError(name, e, jq);\r\n            \t//$edits.validator.errors[name]={mesg:e, jq:jq};\r\n                //$edits.validator.change(name, e, jq);\r\n                return;\r\n            }\r\n            $edits.validator.removeError(name);\r\n            /*\r\n            if ($edits.validator.errors[name]) {\r\n                delete $edits.validator.errors[name];\r\n                $edits.validator.change(name, null, jq);\r\n            }*/\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                if (i==a.length-1) {\r\n                    if ($edits.on.writeToModel(name,val)) {\r\n\r\n                    } else {\r\n                        m[a[i]]=val;\r\n                    }\r\n                } else {\r\n                    m=m[a[i]];\r\n                }\r\n            }\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.on={};\r\n        $edits.on.writeToModel= function (name, val) {};\r\n\r\n        if (listeners.length>0) {\r\n            setTimeout(F(l),50);\r\n        }\r\n        function l() {\r\n            listeners.forEach(function (li) {\r\n                li();\r\n            });\r\n            setTimeout(F(l),50);\r\n        }\r\n        return res;\r\n        function parse(expr) {\r\n            if (expr instanceof Array) return parseArray(expr);\r\n            else if (typeof expr==\"string\") return parseString(expr);\r\n            else return expr;\r\n        }\r\n        function parseArray(a) {\r\n            var tag=a[0];\r\n            var i=1;\r\n            var res=$(\"<\"+tag+\">\");\r\n            if (typeof a[i]==\"object\" && !(a[i] instanceof Array) && !(a[i] instanceof $) ) {\r\n                parseAttr(res, a[i],tag);\r\n                i++;\r\n            }\r\n            while (i<a.length) {\r\n                res.append(parse(a[i]));\r\n                i++;\r\n            }\r\n            return res;\r\n        }\r\n        function parseAttr(jq, o, tag) {\r\n            if (o.$var) {\r\n                $vars[o.$var]=jq;\r\n            }\r\n            if (o.$edit) {\r\n                if (typeof o.$edit==\"string\") {\r\n                    o.$edit={name: o.$edit, type: UI.types.String};\r\n                }\r\n                if (!o.on) o.on={};\r\n                o.on.realtimechange=F(function (val) {\r\n                    $edits.writeToModel(o.$edit, val, jq);\r\n                });\r\n                if (!$vars[o.$edit.name]) $vars[o.$edit.name]=jq;\r\n                $edits.push({jq:jq,params:o});\r\n            }\r\n            for (var k in o) {\r\n                if (k==\"on\") {\r\n                    for (var e in o.on) on(e, o.on[e]);\r\n                } else if (k==\"css\" && o[k]!=null) {//ADDJSL\r\n                    jq.css(o[k]);\r\n                } else if (!Util.startsWith(k,\"$\") && o[k]!=null) {//ADDJSL\r\n                    jq.attr(k,o[k]);\r\n                }\r\n            }\r\n            function on(eType, li) {\r\n                if (!li) return; //ADDJSL\r\n                if (eType==\"enterkey\") {\r\n                    jq.on(\"keypress\",F(function (ev) {\r\n                        if (ev.which==13) li.apply(jq,arguments);\r\n                    }));\r\n                } else if (eType==\"realtimechange\") {\r\n                    var first=true, prev;\r\n                    listeners.push(function () {\r\n                        var cur;\r\n                        if (o.type==\"checkbox\") {\r\n                            cur=!!jq.prop(\"checked\");\r\n                        } else {\r\n                            cur=jq.val();\r\n                        }\r\n                        if (first || prev!=cur) {\r\n                            li.apply(jq,[cur,prev]);\r\n                            prev=cur;\r\n                        }\r\n                        first=false;\r\n                    });\r\n                } else {\r\n                    jq.on(eType, F(li));\r\n                }\r\n            }\r\n        }\r\n        function parseString(str) {\r\n            return $(document.createTextNode(str));\r\n            //return $(\"<span>\").text(str);\r\n        }\r\n    };\r\n    UI.types={\r\n       String: {\r\n           toVal: function (val) {\r\n               return val;\r\n           },\r\n           fromVal: function (val) {\r\n               return val;\r\n           }\r\n       },\r\n       Number: {\r\n           toVal: function (val) {\r\n               return val+\"\";\r\n           },\r\n           fromVal: function (val) {\r\n               return parseFloat(val);\r\n           }\r\n       }\r\n   };\r\n    return UI;\r\n});\r\n\ndefine('Platform',[],function () {\r\n    var WebSite={};\r\n    // from https://w3g.jp/blog/js_browser_sniffing2015\r\n    var u=window.navigator.userAgent.toLowerCase();\r\n    WebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1)\r\n    || u.indexOf(\"ipad\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1)\r\n    || u.indexOf(\"kindle\") != -1\r\n    || u.indexOf(\"silk\") != -1\r\n    || u.indexOf(\"playbook\") != -1;\r\n    WebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1)\r\n    || u.indexOf(\"iphone\") != -1\r\n    || u.indexOf(\"ipod\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || u.indexOf(\"blackberry\") != -1;\r\n    return WebSite;\r\n});\r\n\n/*global process, require, BuiltinAssets */\r\ndefine('WebSite',[\"FS\",\"Platform\"], function (FS,Platform) {\r\n\tvar P=FS.PathUtil;\r\n\tvar loc=document.location.href;\r\n\tvar devMode=!!loc.match(/html\\/dev\\//) && !!loc.match(/localhost:3/);\r\n\tvar WebSite;\r\n\tvar prot=location.protocol;\r\n\tvar k;\r\n\tif (!prot.match(/^http/)) prot=\"https:\";\r\n\tswitch(window.WebSite_runType) {\r\n\tcase \"IDE\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.builtinAssetNames={\r\n\t\t\t\"images/Ball.png\":1,\r\n\t\t\t\"images/base.png\":1,\r\n\t\t\t\"images/Sample.png\":1,\r\n\t\t\t\"images/inputPad.png\":1,\r\n\t\t\t\"images/neko.png\":1,\r\n\t\t\t\"images/mapchip.png\":1\r\n\t\t};\r\n\t\tif (!WebSite.pluginTop) {\r\n\t\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\t}\r\n\t\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.noconcat=true;\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\t\tif (process.env.TONYU_HOME) {\r\n\t\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t\t}\r\n\t\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\t\td=P.directorify(d);\r\n\t\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t\t}\r\n\t\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t} else {\r\n\t\t\tif (loc.match(/edit\\.tonyu\\.jp\\/n\\//)) {\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/n/\";\r\n\t\t\t} else {\r\n\t\t\t\t// Why?\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\t\t}\r\n\t\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t// compiledKernel is URL , not file path.\r\n\t\t// It is correct as long as the html pages in www/ (not html/build|dev )\r\n\t\tWebSite.compiledKernel=\"Kernel/js/concat.js\";   //P.rel(WebSite.kernelDir,\"js/concat.js\");\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.version=2;\r\n\t\tWebSite.hoge=\"fuga\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"singleHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tif (typeof BuiltinAssets===\"object\") {\r\n\t\t\tfor (k in BuiltinAssets) {\r\n\t\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.scriptServer=\"http://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.pluginTop=WebSite.scriptServer+\"js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.compiledKernel=WebSite.scriptServer+\"Kernel/js/concat.js\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"multiHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t}\r\n\t\t// this sets at runScript2.js\r\n\t\t//WebSite.compiledKernel=WebSite.top+\"/js/kernel.js\";\r\n\t\t//-------------\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\t}\r\n\r\n\tif (loc.match(/jsrun\\.it/)) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"http:\"+\"//jsrun.it/assets/9/X/T/b/9XTbt.png\",\r\n\t\t\t\t\"images/base.png\":\"http:\"+\"//jsrun.it/assets/6/F/y/3/6Fy3B.png\",\r\n\t\t\t\t\"images/Sample.png\":\"http:\"+\"//jsrun.it/assets/s/V/S/l/sVSlZ.png\",\r\n\t\t\t\t\"images/neko.png\":\"http:\"+\"//jsrun.it/assets/f/D/z/z/fDzze.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"http:\"+\"//jsrun.it/assets/f/u/N/v/fuNvz.png\"\r\n\t\t\t},top:\"\",devMode:devMode,\r\n\t\t\tpluginTop: \"https://edit.tonyu.jp/js/plugins\",\r\n\t\t\tremoveJSOutput:true\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/) ||\r\n\t\t(\r\n\t\t/*(\r\n\t\t\tloc.match(/^chrome-extension:/) ||\r\n\t\t\tloc.match(/localhost/) ||\r\n\t\t\tloc.match(/tonyuedit\\.appspot\\.com/)\r\n\t\t) &&*/\r\n\t\tloc.match(/\\/html\\/((dev)|(build))\\//)\r\n\t\t)\r\n\t) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"../../images/Ball.png\",\r\n\t\t\t\t\"images/base.png\":\"../../images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":\"../../images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":\"../../images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"../../images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":\"../../images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":\"../../images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":\"../../images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":\"../../images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":\"../../images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":\"../../images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":\"../../images/sound_wav.png\",\r\n\t\t\t\t\t\"images/ecl.png\":\"../../images/ecl.png\"\r\n\t\t\t},top:\"../..\",devMode:devMode\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/bitarrow/) ||\r\n\t\tloc.match(/localhost.*pub/))  {\r\n\t\tWebSite={};\r\n\t\tvar WS=WebSite;\r\n\t\tWebSite.serverType=\"BA\";\r\n\t\tWS.runtime=\"../../../runtime/\";\r\n\t\tWS.urlAliases= {\r\n\t\t\t\t\"images/base.png\":WS.runtime+\"images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":WS.runtime+\"images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":WS.runtime+\"images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":WS.runtime+\"images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":WS.runtime+\"images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":WS.runtime+\"images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":WS.runtime+\"images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":WS.runtime+\"images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":WS.runtime+\"images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":WS.runtime+\"images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":WS.runtime+\"images/sound_wav.png\",\r\n\t\t\t\t\"images/ecl.png\":WS.runtime+\"images/ecl.png\"\r\n\t\t};\r\n\t} else {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",devMode:devMode\r\n\t\t};\r\n\t}\r\n\tif (typeof BuiltinAssets===\"object\") {\r\n\t\tfor (k in BuiltinAssets) {\r\n\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t}\r\n\t}\r\n\tWebSite.builtinAssetNames={\r\n\t\t\"images/Ball.png\":1,\r\n\t\t\"images/base.png\":1,\r\n\t\t\"images/Sample.png\":1,\r\n\t\t\"images/neko.png\":1,\r\n\t\t\"images/mapchip.png\":1\r\n\t};\r\n\t// from https://w3g.jp/blog/js_browser_sniffing2015\r\n\tvar u=window.navigator.userAgent.toLowerCase();\r\n\tWebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1) ||\r\n\tu.indexOf(\"ipad\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1) ||\r\n\tu.indexOf(\"kindle\") != -1 ||\r\n\tu.indexOf(\"silk\") != -1 ||\r\n\tu.indexOf(\"playbook\") != -1;\r\n\tWebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1) ||\r\n\tu.indexOf(\"iphone\") != -1 ||\r\n\tu.indexOf(\"ipod\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\tu.indexOf(\"blackberry\") != -1;\r\n\r\n\tif (!WebSite.pluginTop) {\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t}\r\n\tWebSite.disableROM={};\r\n\t/*if (loc.match(/tonyuedit\\.appspot\\.com/) || loc.match(/localhost:8888/) ) {\r\n\t\t//WebSite.disableROM={\"ROM_d.js\":true};\r\n\t}*/\r\n\tif (loc.match(/\\.appspot\\.com/) ||  loc.match(/localhost:888[87]/)) {\r\n\t\tWebSite.serverType=\"GAE\";\r\n\t}\r\n\tif (loc.match(/localhost:3000/) ) {\r\n\t\tWebSite.serverType=\"Node\";\r\n\t}\r\n\tif (loc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/)) {\r\n\t\tWebSite.serverTop=WebSite.top+\"/exe\"; // Fix NetModule.tonyu!!\r\n\t} else {\r\n\t\tWebSite.serverTop=WebSite.top+\"/edit\";// Fix NetModule.tonyu!!\r\n\t}\r\n\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\tWebSite.blobPath=WebSite.serverTop+\"/serveBlob\";        //TODO: urlchange!\r\n\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\tWebSite.mp4Disabled=WebSite.isNW;\r\n\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\tWebSite.url={\r\n\t\tgetDirInfo:WebSite.serverTop+\"/getDirInfo\",\r\n\t\tgetFiles:WebSite.serverTop+\"/File2LSSync\",\r\n\t\tputFiles:WebSite.serverTop+\"/LS2FileSync\"\r\n\t};\r\n\tWebSite.PathSep=\"/\";\r\n\tif (WebSite.isNW) {\r\n\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\tif (process.env.TONYU_HOME) {\r\n\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t} else {\r\n\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t}\r\n\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\tWebSite.platform=process.platform;\r\n\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\td=P.directorify(d);\r\n\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t} else {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/)) {\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=prot+\"//\"+location.host+\"/Kernel/\";\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/) ||\r\n\t\tWebSite.isNW) {\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t} else if (WebSite.serverType===\"BA\") {\r\n\t\tWebSite.compiledKernel=WebSite.runtime+\"lib/tonyu/kernel.js\";\r\n\t} else {\r\n\t\tWebSite.compiledKernel=\"https://edit.tonyu.jp/Kernel/js/concat.js\";\r\n\t\t//WebSite.compiledKernel=prot+\"//tonyuexe.appspot.com/Kernel/js/concat.js\";\r\n\t}\r\n\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t} else {\r\n\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t}\r\n\r\n\tif (loc.match(/((index)|(project))2/)) {\r\n\t\tWebSite.version=2;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.devMode=true;\r\n\t\t} else {\r\n\t\t\tWebSite.devMode=false;\r\n\t\t}\r\n\t}\r\n\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\twindow.WebSite=WebSite;\r\n\treturn WebSite;\r\n});\r\n\ndefine('miniJSLoader',['require','exports','module'],function (require, exports, module) {\r\n    exports.load=url=>new Promise(succ=>{\r\n        const s=document.createElement(\"script\");\r\n        s.setAttribute(\"src\",url);\r\n        s.addEventListener(\"load\",succ);\r\n        document.body.appendChild(s);\r\n        // JQuery does not work\r\n        //$(\"<script>\").attr({src:url}).on(\"load\",succ).appendTo(\"body\");\r\n    });\r\n});//-----\r\n;\ndefine('kernelChecker',['require','exports','module','Tonyu','WebSite','miniJSLoader'],function(require,exports,module) {//----\r\nconst Tonyu=require(\"Tonyu\");\r\nconst WebSite=require(\"WebSite\");\r\nconst miniJSLoader=require(\"miniJSLoader\");\r\nminiJSLoader.load(WebSite.compiledKernel);// It takes several times...\r\nexports.isKernel=name=>{\r\n    if (!Tonyu.classes.kernel) {\r\n        return false;\r\n    }\r\n    return Tonyu.classes.kernel[name];\r\n};\r\n});//----of define\r\n;\ndefine('FileMenu',['require','exports','module','UI','kernelChecker','root'],function (require,exports,module) {\r\nconst UI=require(\"UI\");\r\n//const EC=require(\"exceptionCatcher\");\r\n//const F=EC.f;\r\nconst kernelChecker=require(\"kernelChecker\");\r\nconst root=require(\"root\");\r\n\r\nmodule.exports=function (ide) {\r\n    const FM={};\r\n    const EXT=ide.project.getEXT();\r\n    const curPrjDir=ide.project.getDir();\r\n    function open(f){\r\n        if (typeof FM.fileList==\"object\") {\r\n            FM.fileList.select(f);\r\n        }\r\n    }\r\n    function getCurFile() {\r\n        if (typeof FM.fileList==\"object\") {\r\n            return FM.fileList.curFile();\r\n        }\r\n        throw \"FM.fileList is missing\";\r\n    }\r\n    FM.dialog=function (title, name, onend) {\r\n    \treturn FM.dialogOpt({title:title, name:name, onend:onend});\r\n    };\r\n    FM.dialogOpt=function (options) {\r\n    \tvar title=options.title;\r\n    \tvar name=options.name || \"\";\r\n    \tvar onend=options.onend || function (){};\r\n        //var t;\r\n        if (!FM.d) FM.d=UI([\"div\"], {title: title},\r\n             \"\",[\"br\"],\r\n             [\"input\", {\r\n                 $var: \"name\",\r\n                 on:{\r\n                \t enterkey:function () {\r\n                \t\t FM.d.$vars.done();\r\n                \t },\r\n                \t realtimechange: function (v) {\r\n                \t\t FM.d.$vars.chg(v);\r\n                \t }\r\n                 }\r\n             }],\r\n             [\"br\"],\r\n             [\"div\",{$var:\"extra\"}],\r\n             [\"div\",{$var:\"msg\"}],\r\n            [\"button\", {$var:\"b\", on:{click: function () {\r\n            \tFM.d.$vars.done();\r\n       \t \t}}}, \"OK\"]\r\n        );\r\n        FM.d.attr({title:title});\r\n        var v=FM.d.$vars;\r\n        //console.log(name);\r\n        v.name.val(name);\r\n        FM.d.dialog({title:title});\r\n        var r=null;\r\n        v.done=function() {\r\n            if (!r || !r.ok) return;\r\n            //clearInterval(t);\r\n            onend(r.file);\r\n            FM.d.dialog(\"close\");\r\n        };\r\n        v.chg=function (s) {\r\n            r=fixName(s,options);\r\n            if (r.ok && r.file.exists()) r={ok:false, reason:s+\"\"};\r\n            if (!r.ok) {\r\n                v.msg.css({\"color\":\"red\"});\r\n                v.msg.text(r.reason);\r\n                v.b.attr(\"disabled\",true);\r\n            } else {\r\n                v.msg.css({\"color\":\"blue\"});\r\n                v.msg.text(r.note || \"\");\r\n                v.b.removeAttr(\"disabled\");\r\n            }\r\n        };\r\n        v.extra.empty();\r\n        if (options.extraUI) {\r\n            options.extraUI(v.extra);\r\n        }\r\n    };\r\n\r\n    FM.create=function () {\r\n        save();\r\n        FM.dialogOpt({title:\"\", action:\"create\", onend:function (f) {\r\n            if (!f.exists()) {\r\n                createContent(f); //f.text(\"\");\r\n                ls();\r\n                open(f);\r\n                resetFiles();// See https://github.com/hoge1e3/tonyu2-compiler/commit/04ef9c655943b261eea47ed1f49b16c16797f564\r\n            }\r\n        }});\r\n    };\r\n    FM.mv=function () {\r\n        save();\r\n        const curFile=getCurFile();\r\n        if (!curFile) return;\r\n        var oldName=displayName(curFile);\r\n        FM.dialogOpt({title:\"\", name:oldName, action:\"mv\", extraUI:mvExtraUI, onend:async function (nf) {\r\n            if (!nf) return;\r\n            const doRefactor=refactorUI.$vars.chk.prop(\"checked\");\r\n            if (doRefactor) {\r\n                return await refactor(curFile,nf);\r\n            }\r\n            reloadFromFiles();\r\n            var t=curFile.text();\r\n            curFile.rm();\r\n            close(curFile);\r\n            nf.text(t);\r\n            ls();\r\n            open(nf);\r\n            resetFiles();\r\n        }});\r\n    };\r\n    let refactorUI;\r\n    function mvExtraUI(d) {\r\n        refactorUI=UI(\"div\",[\"input\",{type:\"checkbox\",$var:\"chk\",checked:\"true\",value:\"chked\"}],\"\");\r\n        d.append(refactorUI);\r\n    }\r\n    async function refactor(old,_new) {\r\n        var oldCN=old.truncExt(EXT);\r\n        var newCN=_new.truncExt(EXT);\r\n        try {\r\n            const ren=await ide.project.renameClassName(oldCN,newCN);\r\n            console.log(\"REN\",ren);\r\n            ls();\r\n            open(_new);\r\n        } catch(e) {\r\n            alert(\"\");\r\n            console.error(e);\r\n            console.log(e);\r\n        }\r\n        refactorUI=null;\r\n        if (root.SplashScreen) root.SplashScreen.hide();\r\n    }\r\n    FM.rm=function (){\r\n        save();\r\n        var curFile=getCurFile();\r\n        if (!curFile) return;\r\n        if (!confirm(curFile.name()+\"\")) return;\r\n        curFile.rm();\r\n        ls();\r\n        close(curFile);\r\n        resetFiles();\r\n    };\r\n    function createContent(f) {\r\n        f.text(\"\");\r\n    }\r\n    function displayName(f) {\r\n        var r=ide.dispName(f);\r\n        if (r) {\r\n            return r;\r\n        }\r\n        return f.name();\r\n    }\r\n    function resetFiles() {\r\n        ide.project.resetFiles();\r\n    }\r\n    function ls(dir){\r\n        FM.fileList.ls(dir);\r\n        ide.refreshRunMenu();\r\n    }\r\n    function save(){\r\n        ide.save();\r\n    }\r\n    function close(rm) { // rm or mv\r\n        const editors=ide.editors;\r\n        var i=editors[rm.path()]; //getCurrentEditorInfo();\r\n        if (i) {\r\n            i.editor.destroy();\r\n            i.dom.remove();\r\n            delete editors[rm.path()];\r\n            let remains;\r\n            for (remains in editors);\r\n            if (!remains) $(\"#welcome\").show();\r\n            else open(editors[remains].file);\r\n        }\r\n    }\r\n    FM.close=function () {\r\n        var inf=ide.getCurrentEditorInfo();\r\n        if (inf) {\r\n            close(inf.file);\r\n        }\r\n    };\r\n    function fixName(name/*, options*/) {\r\n        const fl=FM.fileList;\r\n        var upcased=false;\r\n        //if (name==\"aaaa\") throw new Error(\"iikagen name error \"+EC.enter);\r\n        if (name.match(/^[a-z]/)) {\r\n            name= name.substring(0,1).toUpperCase()+name.substring(1);\r\n            upcased=true;\r\n        }\r\n        if (name.match(/^[A-Z_][a-zA-Z0-9_]*$/)) {\r\n            var dir=fl.curDir();\r\n            var sysdir={files:1, static:1 ,maps:1};\r\n            if (sysdir[dir.relPath(curPrjDir).replace(/\\/*/,\"\")]) {\r\n                return {ok:false, reason:dir.name()+\"\"};\r\n            }\r\n            if (isKernel(name)) {\r\n                return {ok:false, reason:name+\"\"};\r\n            }\r\n            if (upcased) {\r\n                //name= name.substring(0,1).toUpperCase()+name.substring(1);\r\n                return {ok:true, file: dir.rel(name+EXT), note: \"(\"+name+\") \"};\r\n            }\r\n            return {ok:true, file: dir.rel(name+EXT)};\r\n        } else {\r\n            return {ok:false, reason:\"(_)\"};\r\n        }\r\n    }\r\n    function isKernel(n) {\r\n        return kernelChecker.isKernel(n);\r\n    }\r\n    function reloadFromFiles() {\r\n        const editors=ide.editors;\r\n        for (var path in editors) {\r\n            var inf=editors[path];\r\n            var curFile=inf.file; //fl.curFile();\r\n            var prog=inf.editor; //getCurrentEditor();\r\n            if (curFile.exists() && prog) {\r\n                prog.setValue(curFile.text());\r\n                prog.clearSelection();\r\n            }\r\n        }\r\n    }\r\n\r\n    return FM;\r\n};\r\n});\r\n\ndefine('ErrorDialog',['require','exports','module','FS','UI'],function (require, exports, module) {\r\nconst FS=require(\"FS\");\r\nconst UI=require(\"UI\");\r\nclass ErrorDialog {\r\n    constructor(ide) {//{restart,stop,displayMode,jump}\r\n        this.ide=ide;\r\n        this.pluginAdded={};\r\n    }\r\n    showErrorPos(elem, err) {\r\n        function close(){\r\n            if ($.data(elem,\"opened\")) {\r\n                elem.dialog(\"close\");\r\n                $.data(elem,\"opened\",false);\r\n            }\r\n        }\r\n        function jump() {\r\n            ide.jump(src,row,col);\r\n            close();\r\n        }\r\n        const ide=this.ide;\r\n        //options=options||{};\r\n        let message=err.message, src, pos, row, col;\r\n        if (!err) {\r\n            close();\r\n            return;\r\n        }\r\n        if (err.isTError) {\r\n            src=err.src;\r\n            pos=err.pos;\r\n            row=err.row;\r\n            col=err.col;\r\n        } else {\r\n            src={name:function (){return \"\";},text:()=>null};\r\n            pos=0;\r\n        }\r\n        if (err.stack && err.stack.length>0 && err.stack[0].fileName) {\r\n            const compiler=ide.project.compiler;\r\n            for (let {columnNumber, lineNumber, fileName} of err.stack) {\r\n                console.log(columnNumber, lineNumber, fileName);\r\n                if (!fileName) continue;\r\n                if (typeof columnNumber!==\"number\") continue;\r\n                if (typeof lineNumber!==\"number\") continue;\r\n                fileName=compiler.convertFromWorkerPath(fileName);\r\n                if (fileName.match(/^http/)) continue; // for concat.js\r\n                try {\r\n                    src=FS.get(fileName);\r\n                    pos={row:lineNumber, col:columnNumber};\r\n                    if (src.exists()) break;\r\n                }catch(e){\r\n                    //console.log(\"ErrorDialog\",\"stack\",e);\r\n                }\r\n            }\r\n        }\r\n        if(typeof pos==\"object\") {row=pos.row; col=pos.col;}\r\n        elem.empty();\r\n        const mesgd=$(\"<div>\").text(message+\" \"+src.name()+(typeof row==\"number\"?\":\"+row+\":\"+col:\"\"));\r\n        if(typeof row===\"number\" && typeof col===\"number\") {\r\n            mesgd.append($(\"<button>\").text(\"\").click(jump));\r\n        }\r\n        //mesgd.append($(\"<button>\").text(\"\").click(close));\r\n        elem.append(mesgd);\r\n        elem.append($(\"<div>\").attr(\"class\",\"quickFix\"));\r\n        //console.log(\"src=\",src,err.stack, err.stack instanceof Array);\r\n        console.log(\"src.name\",src.name());\r\n        const str=src.text();\r\n        if (str && typeof pos==\"object\") {\r\n            let npos=0;\r\n            const lines=str.split(\"\\n\");\r\n            for (let i=0 ; i<lines.length && i+1<pos.row ; i++) {\r\n                npos+=lines[i].length+1;\r\n            }\r\n            npos+=pos.col;\r\n            pos=npos;\r\n        }\r\n        if (str) {\r\n            const srcd=$(\"<pre>\");\r\n            srcd.append($(\"<span>\").text(str.substring(0,pos)));\r\n            srcd.append($(\"<img>\").attr(\"src\",FS.expandPath(\"${sampleImg}/ecl.png\")));//MODJSL\r\n            srcd.append($(\"<span>\").text(str.substring(pos)));\r\n            elem.append(srcd);\r\n        }\r\n        elem.attr(\"title\",\"\");\r\n        elem.dialog({width:600,height:400});\r\n        $.data(elem,\"opened\",true);\r\n        return elem;\r\n    }\r\n    show(e) {\r\n        function showTrace() {\r\n            const st=(typeof e.stack===\"string\" ? e.stack :\r\n            typeof e.stack.join===\"function\" ? e.stack.join(\"\\n\") : e+\"\");\r\n            const trcpre=UI(\"pre\",st);\r\n            const html=trcpre.html().replace(/_trc_([\\w]*)/g,function (n) {\r\n                return \"<strong>\"+n+\"</strong>\";\r\n            });\r\n            trcpre.html(html);\r\n            $(\"#errorPos\").find(\".quickFix\").append(trcpre);\r\n        }\r\n        window.shownError=e;\r\n        console.log(\"ErrorDialog\",\"show\",e);\r\n        console.error(e);\r\n        const ide=this.ide;\r\n        const pluginAdded=this.pluginAdded;\r\n        const pluginName=e.pluginName || (e.error && e.error.pluginName);\r\n        if (pluginName && !pluginAdded[pluginName]) {\r\n            pluginAdded[pluginName]=true;\r\n            ide.restart();\r\n            return;\r\n        }\r\n        if (pluginName) {\r\n            alert(e.message);\r\n        } else {\r\n            const diag=this.showErrorPos($(\"#errorPos\"),e);\r\n            ide.displayMode(\"runtime_error\");\r\n            $(\"#errorPos\").find(\".quickFix\").append(\r\n                UI(\"button\",{on:{click:showTrace}},\"\"));\r\n        }\r\n        ide.stop();\r\n    }\r\n}\r\nmodule.exports=ErrorDialog;\r\n\r\n});//--- end of define\r\n;\ndefine('parser',['require','exports','module'],function(require,exports,module) {//used by fixIndent\r\nmodule.exports=function () {\r\n\tfunction extend(dst, src) {\r\n\t\tvar i;\r\n\t\tfor(i in src){\r\n\t\t\tdst[i]=src[i];\r\n\t\t}\r\n\t\treturn dst;\r\n\t}\r\n\tvar $={\r\n\t\tconsoleBuffer:\"\",\r\n\t\toptions: {traceTap:false, optimizeFirst: true, profile: false ,\r\n\t\tverboseFirst: false,traceFirstTbl:false},\r\n\t\tParser: Parser,\r\n\t\tStringParser: StringParser,\r\n\t\tnc: nc\r\n\t};\r\n\t$.dispTbl=function (tbl) {\r\n\t\tvar buf=\"\";\r\n\t\tvar h={};\r\n\t\tif (!tbl) return buf;\r\n\t\tfor (var i in tbl) {// tbl:{char:Parser}   i:char\r\n\t\t\tconst n=tbl[i].name;\r\n\t\t\tif (!h[n]) h[n]=\"\";\r\n\t\t\th[n]+=i;\r\n\t\t}\r\n\t\tfor (let n in h) {\r\n\t\t\tbuf+=h[n]+\"->\"+n+\",\";\r\n\t\t}\r\n\t\treturn buf;\r\n\t};\r\n\t//var console={log:function (s) { $.consoleBuffer+=s; }};\r\n\tfunction _debug(s) {console.log(s);}\r\n\tfunction Parser(parseFunc){\r\n\t\tif ($.options.traceTap) {\r\n\t\t\tthis.parse=function(s){\r\n\t\t\t\tconsole.log(\"tap: name=\"+this.name+\"  pos=\"+(s?s.pos:\"?\"));\r\n\t\t\t\tvar r=parseFunc.apply(this,[s]);\r\n\t\t\t\tvar img=\"NOIMG\";\r\n\t\t\t\tif (r.src && r.src.str) {\r\n\t\t\t\t\timg=r.src.str.substring(r.pos-3,r.pos)+\"^\"+r.src.str.substring(r.pos,r.pos+3);\r\n\t\t\t\t}\r\n\t\t\t\tif (r.src && r.src.tokens) {\r\n\t\t\t\t\timg=r.src.tokens[r.pos-1]+\"[\"+r.src.tokens[r.pos]+\"]\"+r.src.tokens[r.pos+1];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"/tap: name=\"+this.name+\r\n\t\t\t\t\t\t\" pos=\"+(s?s.pos:\"?\")+\"->\"+(r?r.pos:\"?\")+\" \"+img+\" res=\"+(r?r.success:\"?\"));\r\n\t\t\t\treturn r;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tthis.parse=parseFunc;\r\n\t\t}\r\n\t}\r\n\tParser.create=function(parseFunc) { // (State->State)->Parser\r\n\t\treturn new Parser(parseFunc);\r\n\t};\r\n\t$.create=Parser.create;\r\n\tfunction nc(v,name) {\r\n\t\tif (v==null) throw name+\" is null!\";\r\n\t\treturn v;\r\n\t}\r\n\textend(Parser.prototype, {// class Parser\r\n\t\t// Parser.parse:: State->State\r\n\t\texcept: function (f) {\r\n\t\t\tvar t=this;\r\n\t\t\treturn this.ret(Parser.create(function (res) {\r\n\t\t\t\t//var res=t.parse(s);\r\n\t\t\t\t//if (!res.success) return res;\r\n\t\t\t\tif (f.apply({}, res.result)) {\r\n\t\t\t\t\tres.success=false;\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}).setName(\"(except \"+t.name+\")\"));\r\n\t\t},\r\n\t\tnoFollow: function (p) {\r\n\t\t\tvar t=this;\r\n\t\t\tnc(p,\"p\");\r\n\t\t\treturn this.ret(Parser.create(function (res) {\r\n\t\t\t\t//var res=t.parse(s);\r\n\t\t\t\t//if (!res.success) return res;\r\n\t\t\t\tvar res2=p.parse(res);\r\n\t\t\t\tres.success=!res2.success;\r\n\t\t\t\treturn res;\r\n\t\t\t}).setName(\"(\"+t.name+\" noFollow \"+p.name+\")\"));\r\n\t\t},\r\n\t\tandNoUnify: function(next) {// Parser.and:: (Function|Parser)  -> Parser\r\n\t\t\tnc(next,\"next\"); // next==next\r\n\t\t\tvar t=this; // Parser\r\n\t\t\tvar res=Parser.create(function(s){ //s:State\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success) return r1;\r\n\t\t\t\tvar r2=next.parse(r1); //r2:State\r\n\t\t\t\tif (r2.success) {\r\n\t\t\t\t\tr2.result=r1.result.concat(r2.result); // concat===append built in func in Array\r\n\t\t\t\t}\r\n\t\t\t\treturn r2;\r\n\t\t\t});\r\n\t\t\treturn res.setName(\"(\"+this.name+\" \"+next.name+\")\");\r\n\t\t},\r\n\t\tand: function(next) {// Parser.and:: Parser  -> Parser\r\n\t\t\tvar res=this.andNoUnify(next);\r\n\t\t\t//if (!$.options.optimizeFirst) return res;\r\n\t\t\tif (!this._first) return res;\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tvar ntbl={};\r\n\t\t\t//  tbl           ALL:a1  b:b1     c:c1\r\n\t\t\t//  next.tbl      ALL:a2           c:c2     d:d2\r\n\t\t\t//           ALL:a1>>next   b:b1>>next c:c1>>next\r\n\t\t\tfor (var c in tbl) {\r\n\t\t\t\tntbl[c]=tbl[c].andNoUnify(next);\r\n\t\t\t}\r\n\t\t\tres=Parser.fromFirst(this._first.space, ntbl);\r\n\t\t\tres.setName(\"(\"+this.name+\" >> \"+next.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\tconsole.log(\"Created aunify name=\" +res.name+\" tbl=\"+$.dispTbl(ntbl));\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tretNoUnify: function (f) {\r\n\t\t\tvar t=this;\r\n\t\t\tvar p;\r\n\t\t\tif (typeof f==\"function\") {\r\n\t\t\t\tp=Parser.create(function (r1) {\r\n\t\t\t\t\tvar r2=r1.clone();\r\n\t\t\t\t\tr2.result=[ f.apply({}, r1.result) ];\r\n\t\t\t\t\treturn r2;\r\n\t\t\t\t}).setName(\"retfunc\");\r\n\t\t\t} else p=f;\r\n\t\t\tvar res=Parser.create(function(s){ //s:State\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success) return r1;\r\n\t\t\t\treturn p.parse(r1);\r\n\t\t\t\t/*var r2=r1.clone();\r\n\t\t\t\tr2.result=[ f.apply({}, r1.result) ];\r\n\t\t\t\treturn r2;*/\r\n\t\t\t}).setName(\"(\"+this.name+\" >= \"+p.name+\")\");\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tret: function(next) {// Parser.ret:: (Function|Parser)  -> Parser\r\n\t\t\tif (!this._first) return this.retNoUnify(next);\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tvar ntbl={};\r\n\t\t\tfor (var c in tbl) {\r\n\t\t\t\tntbl[c]=tbl[c].retNoUnify(next);\r\n\t\t\t}\r\n\t\t\tconst res=Parser.fromFirst(this._first.space, ntbl);\r\n\t\t\tres.setName(\"(\"+this.name+\" >>= \"+next.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\tconsole.log(\"Created runify name=\" +res.name+\" tbl=\"+$.dispTbl(ntbl));\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\tthis._first={space: space, chars:String};\r\n\t\tthis._first={space: space, tbl:{char:Parser}};\r\n\t*/\r\n\t\tfirst: function (space, ct) {\r\n\t\t\tif (!$.options.optimizeFirst) return this;\r\n\t\t\tif (space==null) throw \"Space is null2!\";\r\n\t\t\tif (typeof ct==\"string\") {\r\n\t\t\t\t\tvar tbl={};\r\n\t\t\t\t\tfor (var i=0; i<ct.length ; i++) {\r\n\t\t\t\t\t\ttbl[ct.substring(i,i+1)]=this;\r\n\t\t\t\t\t}\r\n\t\t\t\t//this._first={space: space, tbl:tbl};\r\n\t\t\t\treturn Parser.fromFirst(space,tbl).setName(\"(fst \"+this.name+\")\");\r\n//        \t\tthis._first={space: space, chars:ct};\r\n\t\t\t} else if (ct==null) {\r\n\t\t\t\treturn Parser.fromFirst(space,{ALL:this}).setName(\"(fst \"+this.name+\")\");\r\n\t\t\t\t//this._first={space:space, tbl:{ALL:this}};\r\n\t\t\t} else if (typeof ct==\"object\") {\r\n\t\t\t\tthrow \"this._first={space: space, tbl:ct}\";\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tfirstTokens: function (tokens) {\r\n\t\t\tif (!$.options.optimizeFirst) return this;\r\n\t\t\tif (typeof tokens==\"string\") tokens=[tokens];\r\n\t\t\tvar tbl={};\r\n\t\t\t\tif (tokens) {\r\n\t\t\t\t\tvar t=this;\r\n\t\t\t\t\ttokens.forEach(function (token) {\r\n\t\t\t\t\ttbl[token]=t;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttbl.ALL=this;\r\n\t\t\t}\r\n\t\t\treturn Parser.fromFirstTokens(tbl).setName(\"(fstT \"+this.name+\")\");\r\n\t\t},\r\n\t\tunifyFirst: function (other) {\r\n\t\t\tvar thiz=this;\r\n\t\t\tfunction or(a,b) {\r\n\t\t\t\tif (!a) return b;\r\n\t\t\t\tif (!b) return a;\r\n\t\t\t\treturn a.orNoUnify(b).checkTbl();\r\n\t\t\t}\r\n\t\t\tvar tbl={}; // tbl.* includes tbl.ALL\r\n\t\t\tthis.checkTbl();\r\n\t\t\tother.checkTbl();\r\n\t\t\tfunction mergeTbl() {\r\n\t\t\t//   {except_ALL: contains_ALL}\r\n\t\t\t\tvar t2=other._first.tbl;\r\n\t\t\t\t//before tbl={ALL:a1, b:b1, c:c1}   t2={ALL:a2,c:c2,d:d2}\r\n\t\t\t\t//       b1 conts a1  c1 conts a1     c2 conts a2   d2 conts a2\r\n\t\t\t\t//after  tbl={ALL:a1|a2 , b:b1|a2    c:c1|c2    d:a1|d2 }\r\n\t\t\t\tvar keys={};\r\n\t\t\t\tfor (let k in tbl) { /*if (d) console.log(\"tbl.k=\"+k);*/ keys[k]=1;}\r\n\t\t\t\tfor (let k in t2)  { /*if (d) console.log(\"t2.k=\"+k);*/ keys[k]=1;}\r\n\t\t\t\tdelete keys.ALL;\r\n\t\t\t\tif (tbl.ALL || t2.ALL) {\r\n\t\t\t\t\ttbl.ALL=or(tbl.ALL, t2.ALL);\r\n\t\t\t\t}\r\n\t\t\t\tfor (let k in keys ) {\r\n\t\t\t\t\t//if (d) console.log(\"k=\"+k);\r\n\t\t\t\t\t//if (tbl[k] && !tbl[k].parse) throw \"tbl[\"+k+\"] = \"+tbl[k];\r\n\t\t\t\t\t//if (t2[k] && !t2[k].parse) throw \"t2[\"+k+\"] = \"+tbl[k];\r\n\t\t\t\t\tif (tbl[k] && t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl[k],t2[k]);\r\n\t\t\t\t\t} else if (tbl[k] && !t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl[k],t2.ALL);\r\n\t\t\t\t\t} else if (!tbl[k] && t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl.ALL, t2[k]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\textend(tbl, this._first.tbl);\r\n\t\t\tmergeTbl();\r\n\t\t\tvar res=Parser.fromFirst(this._first.space, tbl).setName(\"(\"+this.name+\")U(\"+other.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) console.log(\"Created unify name=\" +res.name+\" tbl=\"+$.dispTbl(tbl));\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tor: function(other) { // Parser->Parser\r\n\t\t\tnc(other,\"other\");\r\n\t\t\t\tif (this._first && other._first &&\r\n\t\t\t\t\t\tthis._first.space && this._first.space===other._first.space) {\r\n\t\t\t\treturn this.unifyFirst(other);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\t\t\tconsole.log(\"Cannot unify\"+this.name+\" || \"+other.name+\" \"+this._first+\" - \"+other._first);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.orNoUnify(other);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\torNoUnify: function (other) {\r\n\t\t\t\tvar t=this;  // t:Parser\r\n\t\t\tvar res=Parser.create(function(s){\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success){\r\n\t\t\t\t\tvar r2=other.parse(s); // r2:State\r\n\t\t\t\t\treturn r2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn r1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tres.name=\"(\"+this.name+\")|(\"+other.name+\")\";\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tsetName: function (n) {\r\n\t\t\tthis.name=n;\r\n\t\t\tif (this._first) {\r\n\t\t\t\t/*var tbl=this._first.tbl;\r\n\t\t\t\tfor (var i in tbl) {\r\n\t\t\t\t\ttbl[i].setName(\"(elm \"+i+\" of \"+n+\")\");\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tprofile: function (name) {\r\n\t\t\tif ($.options.profile) {\r\n\t\t\t\tthis.parse=this.parse.profile(name || this.name);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\trepN: function(min){\r\n\t\t\tvar p=this;\r\n\t\t\tif (!min) min=0;\r\n\t\t\tvar res=Parser.create(function(s) {\r\n\t\t\t\tvar current=s;\r\n\t\t\t\tvar result=[];\r\n\t\t\t\twhile(true){\r\n\t\t\t\t\tvar next=p.parse(current);\r\n\t\t\t\t\tif(!next.success) {\r\n\t\t\t\t\t\tvar res;\r\n\t\t\t\t\t\tif (result.length>=min) {\r\n\t\t\t\t\t\t\tres=current.clone();\r\n\t\t\t\t\t\t\tres.result=[result];\r\n\t\t\t\t\t\t\tres.success=true;\r\n\t\t\t\t\t\t\t//console.log(\"rep0 res=\"+disp(res.result));\r\n\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tres=s.clone();\r\n\t\t\t\t\t\t\tres.success=false;\r\n\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.push(next.result[0]);\r\n\t\t\t\t\t\tcurrent=next;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//if (min>0) res._first=p._first;\r\n\t\t\treturn res.setName(\"(\"+p.name+\" * \"+min+\")\");\r\n\t\t},\r\n\t\trep0: function () { return this.repN(0); },\r\n\t\trep1: function () { return this.repN(1); },\r\n\t\topt: function () {\r\n\t\t\tvar t=this;\r\n\t\t\treturn Parser.create(function (s) {\r\n\t\t\t\tvar r=t.parse(s);\r\n\t\t\t\tif (r.success) {\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts=s.clone();\r\n\t\t\t\t\ts.success=true;\r\n\t\t\t\t\ts.result=[null];\r\n\t\t\t\t\treturn s;\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"(\"+t.name+\")?\");\r\n\t\t},\r\n\t\tsep1: function(sep, valuesToArray) {\r\n\t\t\tvar value=this;\r\n\t\t\tnc(value,\"value\");nc(sep,\"sep\");\r\n\t\t\tvar tail=sep.and(value).ret(function(r1, r2) {\r\n\t\t\t\tif(valuesToArray) return r2;\r\n\t\t\t\treturn {sep:r1, value:r2};\r\n\t\t\t});\r\n\t\t\treturn value.and(tail.rep0()).ret(function(r1, r2){\r\n\t\t\t\tvar i;\r\n\t\t\t\tif (valuesToArray) {\r\n\t\t\t\t\tvar r=[r1];\r\n\t\t\t\t\t\tfor (i in r2) {\r\n\t\t\t\t\t\t\tr.push(r2[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {head:r1,tails:r2};\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"(sep1 \"+value.name+\"~~\"+sep.name+\")\");\r\n\t\t},\r\n\t\tsep0: function(s){\r\n\t\t\treturn this.sep1(s,true).opt().ret(function (r) {\r\n\t\t\t\tif (!r) return [];\r\n\t\t\t\treturn r;\r\n\t\t\t});\r\n\t\t},\r\n\t\ttap: function (msg) {\r\n\t\t\treturn this;\r\n\t\t\t/*if (!$.options.traceTap) return this;\r\n\t\t\tif (!msg) msg=\"\";\r\n\t\t\tvar t=this;\r\n\t\t\tvar res=Parser.create(function(s){\r\n\t\t\t\tconsole.log(\"tap:\"+msg+\" name:\"+t.name+\"  pos=\"+(s?s.pos:\"?\"));\r\n\t\t\t\tvar r=t.parse(s);\r\n\t\t\t\tvar img=r.src.str.substring(r.pos-3,r.pos)+\"^\"+r.src.str.substring(r.pos,r.pos+3);\r\n\t\t\t\tconsole.log(\"/tap:\"+msg+\" name:\"+t.name+\" pos=\"+(s?s.pos:\"?\")+\"->\"+(r?r.pos:\"?\")+\" \"+img+\" res=\"+(r?r.success:\"?\"));\r\n\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\treturn res.setName(\"(Tap \"+t.name+\")\");*/\r\n\t\t},\r\n\t\tretN: function (i) {\r\n\t\t\treturn this.ret(function () {\r\n\t\t\t\treturn arguments[i];\r\n\t\t\t});\r\n\t\t},\r\n\t\tparseStr: function (str,global) {\r\n\t\t\tvar st=new State(str,global);\r\n\t\t\treturn this.parse(st);\r\n\t\t},\r\n\t\tcheckTbl: function () {\r\n\t\t\tif (!this._first) return this;\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tfor (var k in tbl) {\r\n\t\t\t\tif (!tbl[k].parse) throw this.name+\": tbl.\"+k+\" is not a parser :\"+tbl[k];\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\t});\r\n\tfunction State(strOrTokens, global) { // class State\r\n\t\tif (strOrTokens!=null) {\r\n\t\t\tthis.src={maxPos:0, global:global};// maxPos is shared by all state\r\n\t\t\tif (typeof strOrTokens==\"string\") {\r\n\t\t\t\tthis.src.str=strOrTokens;\r\n\t\t\t}\r\n\t\t\tif (strOrTokens instanceof Array) {\r\n\t\t\t\tthis.src.tokens=strOrTokens;\r\n\t\t\t}\r\n\t\t\tthis.pos=0;\r\n\t\t\tthis.result=[];\r\n\t\t\tthis.success=true;\r\n\t\t}\r\n\t}\r\n\textend(State.prototype, {\r\n\t\tclone: function() {\r\n\t\t\tvar s=new State();\r\n\t\t\ts.src=this.src;\r\n\t\t\ts.pos=this.pos;\r\n\t\t\ts.result=this.result.slice();\r\n\t\t\ts.success=this.success;\r\n\t\t\treturn s;\r\n\t\t},\r\n\t\tupdateMaxPos:function (npos) {\r\n\t\t\tif (npos > this.src.maxPos) {\r\n\t\t\t\tthis.src.maxPos=npos;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisSuccess: function () {\r\n\t\t\treturn this.success;\r\n\t\t},\r\n\t\tgetGlobal: function () {\r\n\t\t\t\tif (!this.src.global) this.src.global={};\r\n\t\t\t\treturn this.src.global;\r\n\t\t}\r\n\t});\r\n\tParser.fromFirst=function (space, tbl) {\r\n\t\tif (space==\"TOKEN\") {\r\n\t\t\treturn Parser.fromFirstTokens(tbl);\r\n\t\t}\r\n\t\tvar res=Parser.create(function (s0) {\r\n\t\t\tvar s=space.parse(s0);\r\n\t\t\tvar f=s.src.str.substring(s.pos,s.pos+1);\r\n\t\t\tif ($.options.traceFirstTbl) {\r\n\t\t\t\tconsole.log(this.name+\": first=\"+f+\" tbl=\"+( tbl[f]?tbl[f].name:\"-\") );\r\n\t\t\t}\r\n\t\t\tif (tbl[f]) {\r\n\t\t\t\treturn tbl[f].parse(s);\r\n\t\t\t}\r\n\t\t\tif (tbl.ALL) return tbl.ALL.parse(s);\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t});\r\n\t\tres._first={space:space,tbl:tbl};\r\n\t\tres.checkTbl();\r\n\t\treturn res;\r\n\t};\r\n\tParser.fromFirstTokens=function (tbl) {\r\n\t\tvar res=Parser.create(function (s) {\r\n\t\t\tvar t=s.src.tokens[s.pos];\r\n\t\t\tvar f=t?t.type:null;\r\n\t\t\tif ($.options.traceFirstTbl) {\r\n\t\t\t\tconsole.log(this.name+\": firstT=\"+f+\" tbl=\"+( tbl[f]?tbl[f].name:\"-\") );\r\n\t\t\t}\r\n\t\t\tif (f!=null && tbl[f]) {\r\n\t\t\t\treturn tbl[f].parse(s);\r\n\t\t\t}\r\n\t\t\tif (tbl.ALL) return tbl.ALL.parse(s);\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t});\r\n\t\tres._first={space:\"TOKEN\",tbl:tbl};\r\n\t\tres.checkTbl();\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar StringParser={\r\n\t\tempty: Parser.create(function(state) {\r\n\t\t\tvar res=state.clone();\r\n\t\t\tres.success=true;\r\n\t\t\tres.result=[null]; //{length:0, isEmpty:true}];\r\n\t\t\treturn res;\r\n\t\t}).setName(\"E\"),\r\n\t\tfail: Parser.create(function(s){\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t}).setName(\"F\"),\r\n\t\tstr: function (st) { // st:String\r\n\t\t\treturn this.strLike(function (str,pos) {\r\n\t\t\t\tif (str.substring(pos, pos+st.length)===st) return {len:st.length};\r\n\t\t\t\treturn null;\r\n\t\t\t}).setName(st);\r\n\t\t},\r\n\t\treg: function (r) {//r: regex (must have ^ at the head)\r\n\t\t\tif (!(r+\"\").match(/^\\/\\^/)) console.log(\"Waring regex should have ^ at the head:\"+(r+\"\"));\r\n\t\t\treturn this.strLike(function (str,pos) {\r\n\t\t\t\tvar res=r.exec( str.substring(pos) );\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tres.len=res[0].length;\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}).setName(r+\"\");\r\n\t\t},\r\n\t\tstrLike: function (func) {\r\n\t\t\t// func :: str,pos, state? -> {len:int, other...}  (null for no match )\r\n\t\t\treturn Parser.create(function(state){\r\n\t\t\t\tvar str= state.src.str;\r\n\t\t\t\tif (str==null) throw \"strLike: str is null!\";\r\n\t\t\t\tvar spos=state.pos;\r\n\t\t\t\t//console.log(\" strlike: \"+str+\" pos:\"+spos);\r\n\t\t\t\tvar r1=func(str, spos, state);\r\n\t\t\t\tif ($.options.traceToken) console.log(\"pos=\"+spos+\" r=\"+r1);\r\n\t\t\t\tif(r1) {\r\n\t\t\t\t\tif ($.options.traceToken) console.log(\"str:succ\");\r\n\t\t\t\t\tr1.pos=spos;\r\n\t\t\t\t\tr1.src=state.src; // insert 2013/05/01\r\n\t\t\t\t\tvar ns=state.clone();\r\n\t\t\t\t\textend(ns, {pos:spos+r1.len, success:true, result:[r1]});\r\n\t\t\t\t\tstate.updateMaxPos(ns.pos);\r\n\t\t\t\t\treturn ns;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif ($.options.traceToken) console.log(\"str:fail\");\r\n\t\t\t\t\tstate.success=false;\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"STRLIKE\");\r\n\t\t},\r\n\t\tparse: function (parser, str,global) {\r\n\t\t\tvar st=new State(str,global);\r\n\t\t\treturn parser.parse(st);\r\n\t\t}\r\n\t};\r\n\t//  why not eof: ? because StringParser.strLike\r\n\tStringParser.eof=StringParser.strLike(function (str,pos) {\r\n\t\tif (pos==str.length) return {len:0};\r\n\t\treturn null;\r\n\t}).setName(\"EOF\");\r\n\t$.StringParser=StringParser;\r\n\tvar TokensParser={\r\n\t\ttoken: function (type) {\r\n\t\t\treturn Parser.create(function (s) {\r\n\t\t\t\tvar t=s.src.tokens[s.pos];\r\n\t\t\t\ts.success=false;\r\n\t\t\t\tif (!t) return s;\r\n\t\t\t\tif (t.type==type) {\r\n\t\t\t\t\ts=s.clone();\r\n\t\t\t\t\ts.updateMaxPos(s.pos);\r\n\t\t\t\ts.pos++;\r\n\t\t\t\t\ts.success=true;\r\n\t\t\t\t\ts.result=[t];\r\n\t\t\t\t}\r\n\t\t\t\treturn s;\r\n\t\t\t}).setName(type).firstTokens(type);\r\n\t\t},\r\n\t\tparse:function (parser, tokens, global) {\r\n\t\t\tvar st=new State(tokens,global);\r\n\t\t\treturn parser.parse(st);\r\n\t\t},\r\n\t\teof: Parser.create(function (s) {\r\n\t\t\tvar suc=(s.pos>=s.src.tokens.length);\r\n\t\t\ts.success=suc;\r\n\t\t\tif (suc) {\r\n\t\t\t\ts=s.clone();\r\n\t\t\t\ts.result=[{type:\"EOF\"}];\r\n\t\t\t}\r\n\t\t\treturn s;\r\n\t\t}).setName(\"EOT\")\r\n\t};\r\n\t$.TokensParser=TokensParser;\r\n\t$.lazy=function (pf) { //   ( ()->Parser ) ->Parser\r\n\t\tvar p=null;\r\n\t\treturn Parser.create(function (st) {\r\n\t\t\tif (!p) p=pf();\r\n\t\t\tif (!p) throw pf+\" returned null!\";\r\n\t\t\tthis.name=pf.name;\r\n\t\t\treturn p.parse(st);\r\n\t\t}).setName(\"LZ\");\r\n\t};\r\n\t$.addRange=function(res, newr) {\r\n\t\tif (newr==null) return res;\r\n\t\tif (typeof (res.pos)!=\"number\") {\r\n\t\t\tres.pos=newr.pos;\r\n\t\t\tres.len=newr.len;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\tvar newEnd=newr.pos+newr.len;\r\n\t\tvar curEnd=res.pos+res.len;\r\n\t\tif (newr.pos<res.pos) res.pos=newr.pos;\r\n\t\tif (newEnd>curEnd) res.len= newEnd-res.pos;\r\n\t\treturn res;\r\n\t};\r\n\t$.setRange=function (res) {\r\n\t\tif (res==null || typeof res==\"string\" || typeof res==\"number\" || typeof res==\"boolean\") return;\r\n\t\tvar exRange=$.getRange(res);\r\n\t\tif (exRange!=null) return res;\r\n\t\tfor (var i in res) {\r\n\t\t\tif (!res.hasOwnProperty(i)) continue;\r\n\t\t\tvar range=$.setRange(res[i]);\r\n\t\t\t$.addRange(res,range);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\t$.getRange=function(e) {\r\n\t\tif (e==null) return null;\r\n\t\tif (typeof e.pos!=\"number\") return null;\r\n\t\tif (typeof e.len==\"number\") return e;\r\n\t\treturn null;\r\n\t};\r\n\treturn $;\r\n}();\r\n});\r\n\ndefine('tonyu2_token',['require','exports','module','parser'],function(require,exports,module) {//used by fixIndent\r\nconst Parser=require(\"parser\");\r\n\r\nmodule.exports=function () {\r\n\tfunction profileTbl(parser, name) {\r\n\t\tvar tbl=parser._first.tbl;\r\n\t\tfor (var c in tbl) {\r\n\t\t\ttbl[c].profile();//(c+\" of \"+tbl[name);\r\n\t\t}\r\n\t}\r\n\r\n\tvar sp=Parser.StringParser;\r\n\tvar SAMENAME=\"SAMENAME\";\r\n\tvar DIV=1,REG=2;\r\n\tvar space=sp.reg(/^(\\s*(\\/\\*\\/?([^\\/]|[^*]\\/|\\r|\\n)*\\*\\/)*(\\/\\/.*\\r?\\n)*)*/).setName(\"space\");\r\n\tfunction tk(r, name) {\r\n\t\tvar pat;\r\n\t\tvar fst;\r\n\t\tif (typeof r==\"string\") {\r\n\t\t\tpat=sp.str(r);\r\n\t\t\tif (r.length>0) fst=r.substring(0,1);\r\n\t\t\tif (!name) name=r;\r\n\t\t} else {\r\n\t\t\tpat=sp.reg(r);\r\n\t\t\tif (!name) name=r+\"\";\r\n\t\t}\r\n\t\tvar res=space.and(pat).ret(function(a, b) {\r\n\t\t\tvar res={};\r\n\t\t\tres.pos=b.pos;\r\n\t\t\tif (typeof res.pos!=\"number\") throw \"no pos for \"+name+\" \";//+disp(b);\r\n\t\t\tres.len=b.len;\r\n\t\t\tres.text=b.src.str.substring(res.pos, res.pos+res.len);\r\n\t\t\tif (typeof res.text!=\"string\") throw \"no text(\"+res.text+\") for \"+name+\" \";//+disp(b);\r\n\t\t\tres.toString=function (){\r\n\t\t\t\treturn this.text;\r\n\t\t\t};\r\n\t\t\tres.isToken=true;\r\n\t\t\treturn res;\r\n\t\t});\r\n\t\tif (fst) res=res.first(space, fst);\r\n\t\treturn res.setName(name);//.profile();\r\n\t}\r\n\tvar parsers={},posts={};\r\n\tfunction dtk2(prev, name, parser, post) {\r\n\t\t//console.log(\"2reg=\"+prev+\" name=\"+name);\r\n\t\tif (typeof parser==\"string\") parser=tk(parser);\r\n\t\tparsers[prev]=or(parsers[prev], parser.ret(function (res) {\r\n\t\t\tres.type=name;\r\n\t\t\treturn res;\r\n\t\t}).setName(name) );\r\n\t}\r\n\tfunction dtk(prev, name, parser, post) {\r\n\t\tif(name==SAMENAME) name=parser;\r\n\t\tfor (var m=1; m<=prev; m*=2) {\r\n\t\t\t//prev=1  -> m=1\r\n\t\t\t//prev=2  -> m=1x,2\r\n\t\t\t//XXprev=3  -> m=1,2,3\r\n\t\t\tif ((prev&m)!=0) dtk2(prev&m, name,parser,post);\r\n\t\t}\r\n\t\tposts[name]=post;\r\n\t}\r\n\tfunction or(a,b){\r\n\t\tif (!a) return b;\r\n\t\treturn a.or(b);\r\n\t}\r\n\r\n\tvar all=Parser.create(function (st) {\r\n\t\tvar mode=REG;\r\n\t\tvar res=[];\r\n\t\twhile (true) {\r\n\t\t\tst=parsers[mode].parse(st);\r\n\t\t\tif (!st.success) break;\r\n\t\t\tvar e=st.result[0];\r\n\t\t\tmode=posts[e.type];\r\n\t\t\tres.push(e);\r\n\t\t}\r\n\t\tst=space.parse(st);\r\n\t\t//console.log(st.src.maxPos+\"==\"+st.src.str.length)\r\n\t\tst.success=st.src.maxPos==st.src.str.length;\r\n\t\tst.result[0]=res;\r\n\t\treturn st;\r\n\t});\r\n\tvar reserved={\"function\":true, \"var\":true , \"return\":true, \"typeof\": true, \"if\":true,\r\n\t\t\t\"__typeof\": true,\r\n\t\t\t\"for\":true,\r\n\t\t\t\"else\": true,\r\n\t\t\t\"super\": true,\r\n\t\t\t\"while\":true,\r\n\t\t\t\"continue\":true,\r\n\t\t\t\"break\":true,\r\n\t\t\t\"do\":true,\r\n\t\t\t\"switch\":true,\r\n\t\t\t\"case\":true,\r\n\t\t\t\"default\":true,\r\n\t\t\t\"try\": true,\r\n\t\t\t\"catch\": true,\r\n\t\t\t\"finally\": true,\r\n\t\t\t\"throw\": true,\r\n\t\t\t\"of\": true,\r\n\t\t\t\"in\": true,\r\n\t\t\tfiber:true,\r\n\t\t\t\"native\": true,\r\n\t\t\t\"instanceof\":true,\r\n\t\t\t\"new\": true,\r\n\t\t\t\"is\": true,\r\n\t\t\t\"true\": true,\r\n\t\t\t\"false\": true,\r\n\t\t\t\"null\":true,\r\n\t\t\t\"this\":true,\r\n\t\t\t\"undefined\": true,\r\n\t\t\t\"usethread\": true,\r\n\t\t\t\"constructor\": true,\r\n\t\t\tifwait:true,\r\n\t\t\tnowait:true,\r\n\t\t\t_thread:true,\r\n\t\t\targuments:true,\r\n\t\t\t\"delete\": true,\r\n\t\t\t\"extends\":true,\r\n\t\t\t\"includes\":true\r\n\t};\r\n\r\n\tvar num=tk(/^[0-9][xb]?[0-9a-f\\.]*/i).ret(function (n) {\r\n\t\tn.type=\"number\";\r\n\t\tn.value=n.text-0;//parseInt(n.text);\r\n\t\treturn n;\r\n\t}).first(space,\"0123456789\");\r\n\tvar literal=tk({exec: function (s) {\r\n\t\tvar head=s.substring(0,1);\r\n\t\tif (head!=='\"' && head!==\"'\") return false;\r\n\t\tfor (var i=1 ;i<s.length ; i++) {\r\n\t\t\tvar c=s.substring(i,i+1);\r\n\t\t\tif (c===head) {\r\n\t\t\t\treturn [s.substring(0,i+1)];\r\n\t\t\t} else if (c===\"\\\\\") {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},toString:function(){return\"literal\";}\r\n\t}).first(space,\"\\\"'\");\r\n\tvar regex=tk({exec: function (s) {\r\n\t\tif (s.substring(0,1)!=='/') return false;\r\n\t\tfor (var i=1 ;i<s.length ; i++) {\r\n\t\t\tvar c=s.substring(i,i+1);\r\n\t\t\tif (c==='/') {\r\n\t\t\t\tvar r=/^[ig]*/.exec( s.substring(i+1) );\r\n\t\t\t\treturn [s.substring(0,i+1+r[0].length)];\r\n\t\t\t} else if (c==\"\\n\") {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (c===\"\\\\\") {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},toString:function(){return\"regex\";}\r\n\t}).first(space,\"/\");\r\n\r\n\tdtk(REG|DIV, \"number\", num,DIV );\r\n\tdtk(REG,  \"regex\" ,regex,DIV );\r\n\tdtk(REG|DIV,  \"literal\" ,literal,DIV );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"++\",DIV );\r\n\tdtk(REG|DIV,SAMENAME ,\"--\",DIV );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"!==\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"===\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">>>\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"+=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"-=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"*=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"/=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"%=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"!=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"==\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">>\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<<\",REG );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"&&\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"||\",REG );\r\n\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"(\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\")\",DIV );\r\n\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"[\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"]\",DIV );  // a[i]/3\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"{\",REG );\r\n\t//dtk(REG|DIV,SAMENAME ,\"}\",REG );  // if () { .. }  /[a-z]/.exec()\r\n\tdtk(REG|DIV,SAMENAME ,\"}\",DIV ); //in tonyu:  a{x:5}/3\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\">\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"^\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"+\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"-\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\".\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"?\",REG );\r\n\r\n\tdtk(REG|DIV, SAMENAME ,\"=\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\"*\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\"%\",REG );\r\n\tdtk(DIV, SAMENAME ,\"/\",REG );\r\n\r\n\tdtk(DIV|REG, SAMENAME ,\"^\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\"~\",REG );\r\n\r\n\tdtk(DIV|REG, SAMENAME ,\"\\\\\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\":\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\";\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\",\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"!\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"&\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"|\",REG );\r\n\r\n\tvar symresv=tk(/^[a-zA-Z_$][a-zA-Z0-9_$]*/,\"symresv_reg\").ret(function (s) {\r\n\ts.type=(s.text==\"constructor\" ? \"tk_constructor\" :\r\n\t\treserved.hasOwnProperty(s.text) ? s.text : \"symbol\");\r\n\treturn s;\r\n\t}).first(space);\r\n\tfor (var n in reserved) {\r\n\t\tposts[n]=REG;\r\n\t}\r\n\tposts.tk_constructor=REG;\r\n\tposts.symbol=DIV;\r\n\tparsers[REG]=or(parsers[REG],symresv);\r\n\tparsers[DIV]=or(parsers[DIV],symresv);\r\n\r\n\tfunction parse(str) {\r\n\t\tvar res=Parser.StringParser.parse(all, str);\r\n\t\tif (res.success) {\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Stopped at \"+str.substring( res.src.maxPos-5, res.src.maxPos+5));\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\treturn {parse:parse, extension:\"js\",reserved:reserved};\r\n}();\r\n});\r\n\ndefine('IndentFixer',['require','exports','module'],function(require,exports,module) {\r\nmodule.exports=class IndentFixer {\r\n    constructor(t) {\r\n        this.tokenizer=t;\r\n    }\r\n    fix(str,indentStr=\"    \") {\r\n    \t//const incdec={\"{\":1, \"}\":-1};\r\n    \tconst linfo=[];// [\"{{}}\",\"{\",\"}\"...]\r\n        let tokens;\r\n    \ttry {\r\n    \t\tconst tokenRes=this.tokenizer.parse(str);\r\n    \t\ttokens=tokenRes;//.result[0];\r\n    \t\ttokens.forEach(token=>{\r\n                linfo[token.row]=linfo[token.row]||\"\";\r\n    \t\t\tif (this.tokenizer.isOpen(token) ) {\r\n    \t\t\t\tlinfo[token.row]+=\"{\";\r\n    \t\t\t}\r\n                if (this.tokenizer.isClose(token) ) {\r\n    \t\t\t\tlinfo[token.row]+=\"}\";\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}catch(e) {\r\n    \t\tconsole.log(\"ERR\",e);\r\n    \t}\r\n    \t//console.log(linfo);//Edge fails with error 'Could not complete the operation due to error 80020101.'\r\n        //Issue: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/23660690/\r\n    \tconst lines=str.split(\"\\n\");\r\n    \tlet curDepth=0;\r\n    \tlet row=0;\r\n        const depths=[];\r\n    \tlines.forEach((line,i)=>{\r\n    \t\tlet opens=0, closes=0;\r\n    \t\tline=line.replace(/^\\s*/,\"\");\r\n    \t\tif (linfo[row]!=null) {\r\n    \t\t\tlinfo[row].match(/^(\\}*)/);\r\n    \t\t\tcloses=RegExp.$1.length;\r\n    \t\t\tlinfo[row].match(/(\\{*)$/);\r\n    \t\t\topens=RegExp.$1.length;\r\n    \t\t}\r\n    \t\tcurDepth-=closes;\r\n            depths[row]=curDepth;\r\n    \t\tcurDepth+=opens;\r\n    \t\trow++;\r\n    \t});\r\n        row=-1;\r\n        const changeDepths=[];\r\n        for (let token of tokens) {\r\n            if (token.row>row) {\r\n                changeDepths[row]=depths[row];\r\n                row=token.row;\r\n            }\r\n        }\r\n        //console.log(depths, changeDepths);\r\n        return lines.map ((line,row)=>indStr(line, changeDepths[row])).join(\"\\n\");\r\n    \tfunction indStr(line, depth) {\r\n            if (typeof depth!==\"number\") return line;\r\n    \t\tlet res=\"\";\r\n    \t\tfor (let i=0 ;i<depth ;i++) {\r\n    \t\t\tres+=indentStr;\r\n    \t\t}\r\n    \t\treturn res+line.replace(/^\\s*/,\"\");\r\n    \t}\r\n    }\r\n};\r\n});\r\n\ndefine('fixIndent',['require','exports','module','tonyu2_token','IndentFixer'],function(require,exports,module) {\r\nconst TT=require(\"tonyu2_token\");\r\nconst IndentFixer=require(\"IndentFixer\");\r\nconst f=new IndentFixer({\r\n\tparse(str) {\r\n\t\ttry {\r\n\t\t\tconst tokenRes=TT.parse(str);\r\n\t\t\tconst tokens=tokenRes.result[0];\r\n\t\t\t//console.log(tokens);\r\n\t\t\tconst p2r=new Pos2RC(str);\r\n\t\t\treturn tokens.map(t=>Object.assign(t,p2r.get(t.pos)));\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t},\r\n\tisOpen(token) {return token.type===\"{\";},\r\n\tisClose(token) {return token.type===\"}\";}\r\n});\r\n\r\nmodule.exports=function (str,indentStr) {\r\n\treturn f.fix(str,indentStr);\r\n};\r\nclass Pos2RC{\r\n\tconstructor(str) {\r\n\t\tthis.str=str;\r\n\t\tthis.row=0;\r\n\t\tthis.col=0;\r\n\t\tthis.lastPos=0;\r\n\t}\r\n\tget(pos) {\r\n\t\tif (this.lastPos>pos) throw new Error(\"tokens Must be ordered.\");\r\n\t\tconst proc=this.str.substring(this.lastPos,pos);\r\n\t\tconst lines=proc.split(\"\\n\");\r\n\t\tconst lastLine=lines.pop();\r\n\t\tif (lines.length===0) this.col+=lastLine.length;\r\n\t\telse {\r\n\t\t\tthis.row+=lines.length;\r\n\t\t\tthis.col=lastLine.length;\r\n\t\t}\r\n\t\tthis.lastPos=pos;\r\n\t\treturn {row:this.row, col:this.col};\r\n\t}\r\n}\r\n/*\r\nfunction pos2RC(str, pos) {\r\n\tvar res={row:0, col:0};\r\n\tvar len=Math.min(str.length,pos);\r\n\tfor (var i=0 ; i<len ;i++) {\r\n\t\tif (str.substring(i,i+1)==\"\\n\") {\r\n\t\t\tres.row++;\r\n\t\t\tres.col=0;\r\n\t\t} else {\r\n\t\t\tres.col++;\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n}*/\r\n/*module.exports=function fixIndent(str, indentStr) {\r\n\tif (!indentStr) indentStr=\"    \";\r\n\tvar incdec={\"{\":1, \"}\":-1};\r\n\tvar linfo=[];\r\n\ttry {\r\n\t\tthrow \"koware\";\r\n\t\tvar tokenRes=TT.parse(str);\r\n\t\tvar tokens=tokenRes.result[0];\r\n\t\ttokens.forEach(function (token) {\r\n\t\t\tif (incdec[token.type]) {\r\n\t\t\t\tif (!linfo[token.row]) linfo[token.row]=\"\";\r\n\t\t\t\tlinfo[token.row]+=token.type;\r\n\t\t\t}\r\n\t\t});\r\n\t}catch(e) {\r\n\t\tvar r={row:0, col:0};\r\n\t\tvar len=str.length;\r\n\t\tfor (var i=0 ; i<len ;i++) {\r\n\t\t\tvar c=str.substring(i,i+1);\r\n\t\t\tif (incdec[c]) {\r\n\t\t\t\tif (!linfo[r.row]) linfo[r.row]=\"\";\r\n\t\t\t\tlinfo[r.row]+=c;\r\n\t\t\t} else if (c==\"\\n\") {\r\n\t\t\t\tr.row++;\r\n\t\t\t\tr.col=0;\r\n\t\t\t} else {\r\n\t\t\t\tr.col++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//console.log(linfo);\r\n\tvar res=\"\";\r\n\tvar lines=str.split(\"\\n\");\r\n\tvar curDepth=0;\r\n\tvar row=0;\r\n\tlines.forEach(function (line) {\r\n\t\tvar opens=0, closes=0;\r\n\t\tline=line.replace(/^\\s* ?/,\"\");\r\n\t\tif (linfo[row]!=null) {\r\n\t\t\tlinfo[row].match(/^(\\}*)/);\r\n\t\t\tcloses=RegExp.$1.length;\r\n\t\t\tlinfo[row].match(/(\\{*)$/);\r\n\t\t\topens=RegExp.$1.length;\r\n\t\t}\r\n\t\tcurDepth-=closes;\r\n\t\tline=indStr()+line;\r\n\t\tcurDepth+=opens;\r\n\t\tres+=line+\"\\n\";\r\n\t\trow++;\r\n\t});\r\n\tres=res.replace(/\\n$/,\"\");\r\n\t//console.log(res);\r\n\treturn res;\r\n\tfunction indStr() {\r\n\t\tvar res=\"\";\r\n\t\tfor (var i=0 ;i<curDepth ;i++) {\r\n\t\t\tres+=indentStr;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction pos2RC(str, pos) {\r\n\t\tvar res={row:0, col:0};\r\n\t\tvar len=Math.min(str.length,pos);\r\n\t\tfor (var i=0 ; i<len ;i++) {\r\n\t\t\tif (str.substring(i,i+1)==\"\\n\") {\r\n\t\t\t\tres.row++;\r\n\t\t\t\tres.col=0;\r\n\t\t\t} else {\r\n\t\t\t\tres.col++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n};*/\r\n});\r\n\ndefine('assert',[\"FS\"],function (FS){return FS.assert;});\r\n\ndefine('Klass',[\"assert\"],function (A) {\r\n    var Klass={};\r\n    Klass.define=function (pd) {\r\n        var p,parent;\r\n        if (pd.$parent) {\r\n            parent=pd.$parent;\r\n            p=Object.create(parent.prototype);\r\n            p.super=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                var n=a.shift();\r\n                return parent.prototype[n].apply(this,a);\r\n            };\r\n        } else {\r\n            p={};\r\n        }\r\n        var thisName,singletonName;\r\n        if (pd.$this) {\r\n            thisName=pd.$this;\r\n        }\r\n        if (pd.$singleton) {\r\n            singletonName=pd.$singleton;\r\n        }\r\n        var init=wrap(pd.$) || function (e) {\r\n            if (e && typeof e==\"object\") {\r\n                for (var k in e) {\r\n                    this[k]=e[k];\r\n                }\r\n            }\r\n        };\r\n        var fldinit;\r\n        var warn,wrapped,wrapCancelled;\r\n        //var check;\r\n        if (init instanceof Array) {\r\n            fldinit=init;\r\n            init=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                for (var i=0;i<fldinit.length;i++) {\r\n                    if (a.length>0) this[fldinit[i]]=a.shift();\r\n                }\r\n            };\r\n        }\r\n        var klass;\r\n        function checkSchema(self) {\r\n            if (pd.$fields) {\r\n                //console.log(\"Checking schema\",self,pd.$fields);\r\n                A.is(self,pd.$fields);\r\n            }\r\n        }\r\n        klass=function () {\r\n            if (! (this instanceof klass)) {\r\n                var res=Object.create(p);\r\n                init.apply(res,arguments);\r\n                checkSchema(res);\r\n                return res;\r\n            }\r\n            init.apply(this,arguments);\r\n            checkSchema(this);\r\n        };\r\n        if (parent) {\r\n            klass.super=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                var t=a.shift();\r\n                var n=a.shift();\r\n                return parent.prototype[n].apply(t,a);\r\n            };\r\n        }\r\n        klass.inherit=function (pd) {\r\n            pd.$parent=klass;\r\n            return Klass.define(pd);\r\n        };\r\n        klass.prototype=p;\r\n        for (var name in pd) {\r\n            if (name[0]==\"$\") continue;\r\n            if (name.substring(0,7)==\"static$\") {\r\n                klass[name.substring(7)]=wrapStatic(pd[name]);\r\n            } else {\r\n                if (isPropDesc(pd[name])) {\r\n                    Object.defineProperty(p,name,wrap(pd[name]));\r\n                } else {\r\n                    p[name]=wrap(pd[name]);\r\n                }\r\n            }\r\n        }\r\n        function wrapStatic(m) {\r\n            if (!singletonName) return m;\r\n            var args=getArgs(m);\r\n            if (args[0]!==singletonName) return m;\r\n            return (function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                a.unshift(klass);\r\n                return m.apply(klass,a);\r\n            });\r\n        }\r\n        function wrap(m) {\r\n            if (!thisName) return m;\r\n            if (isPropDesc(m)) {\r\n                for (var k in m) {\r\n                    m[k]=wrap(m[k]);\r\n                }\r\n                return m;\r\n            }\r\n            if (typeof m!==\"function\") return m;\r\n            if (thisName!==true) {\r\n                var args=getArgs(m);\r\n                if (args[0]!==thisName) {\r\n                    wrapCancelled=true;\r\n                    return m;\r\n                }\r\n                warn=true;\r\n            }\r\n            wrapped=true;\r\n            return (function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                a.unshift(this);\r\n                return m.apply(this,a);\r\n            });\r\n        }\r\n        p.$=init;\r\n        Object.defineProperty(p,\"$bind\",{\r\n            get: function () {\r\n                if (!this.__bounded) {\r\n                    this.__bounded=new Klass.Binder(this);\r\n                }\r\n                return this.__bounded;\r\n            }\r\n        });\r\n        if (warn) {\r\n            //console.warn(\"This declaration style may malfunction when minified\");\r\n            if (!wrapCancelled) {\r\n                console.warn(\"Use $this:true instead\");\r\n            } else {\r\n                console.warn(\"Use python style in all methods and Use $this:true instead\");\r\n            }\r\n            try{throw new Error(\"Trace\");}\r\n            catch(e) {console.log(e.stack);}\r\n        }\r\n        return klass;\r\n    };\r\n    function getArgs(f) {\r\n        var fpat=/function[^\\(]*\\(([^\\)]*)\\)/;\r\n        var r=fpat.exec(f+\"\");\r\n        if (r) {\r\n            return r[1].replace(/\\s/g,\"\").split(\",\");\r\n        }\r\n        return [];\r\n    }\r\n    function isPropDesc(o) {\r\n        if (typeof o!==\"object\") return false;\r\n        if (!o) return false;\r\n        var pk={configurable:1,enumerable:1,value:1,writable:1,get:1,set:1};\r\n        var c=0;\r\n        for (var k in o) {\r\n            if (!pk[k]) return false;\r\n            c+=pk[k];\r\n        }\r\n        return c;\r\n    }\r\n    Klass.Function=function () {throw new Error(\"Abstract\");};\r\n    Klass.opt=A.opt;\r\n    Klass.Binder=Klass.define({\r\n        $this:true,\r\n        $:function (t,target) {\r\n            function addMethod(k){\r\n                if (typeof target[k]!==\"function\") return;\r\n                t[k]=function () {\r\n                    var a=Array.prototype.slice.call(arguments);\r\n                    //console.log(this, this.__target);\r\n                    //A(this.__target,\"target is not set\");\r\n                    return target[k].apply(target,a);\r\n                };\r\n            }\r\n            for (var k in target) addMethod(k);\r\n        }\r\n    });\r\n    return Klass;\r\n});\r\n/*\r\nrequirejs([\"Klass\"],function (k) {\r\n  P=k.define ({\r\n     $:[\"x\",\"y\"]\r\n  });\r\n  p=P(2,3);\r\n  console.log(p.x,p.y);\r\n});\r\n*/\r\n;\ndefine('GlobalDialog',[\"UI\",\"Klass\"], function (UI,Klass) {\r\n    GlobalDialog=Klass.define({\r\n        $this:true,\r\n        $:[\"prj\"],\r\n        show: function (t,options) {\r\n            t.opt=t.prj.getOptions();\r\n            t.createDOM();\r\n            t.load();\r\n            t.dom.dialog({width:800,height:500});\r\n        },\r\n        load: function (t) {\r\n            if (!t.opt.run) t.opt.run={};\r\n            if (!t.opt.run.globals) t.opt.run.globals={};\r\n            var g=t.opt.run.globals;\r\n            var params=[];\r\n            for (var k in g) {\r\n                params.push({key:k,value:JSON.stringify(g[k])});\r\n            }\r\n            t.editor.keyvalueeditor(\"reset\",params);\r\n        },\r\n        createDOM:function (t) {\r\n            if (t.dom) return t.dom;\r\n            t.dom=UI(\"div\",{title:\"\"},\r\n                [\"ul\",\r\n                [\"li\",\"\"],\r\n                  [\"li\",\"JSON\"]\r\n                  //[\"li\",\"JSON\"]\r\n                ],\r\n                [\"div\",{$var:\"editor\",css:{height:\"350px\",\"overflow-y\":\"scroll\"}}],\r\n                [\"div\",[\"button\",{on:{click:t.$bind.save}},\"\"]]\r\n            );\r\n            t.vars=$.data(t.dom,\"vars\");\r\n            console.log(t.vars,t.dom.$vars);\r\n            t.editor=t.vars.editor;\r\n            var params = {\r\n                placeHolderKey:\"\",\r\n                placeHolderValue:\"\",\r\n                toggleButton: null,\r\n                deleteButton:'<img class=\"deleteButton\" src=\"images/delete.png\">'\r\n            };\r\n            t.editor.keyvalueeditor('init',params);\r\n            t.editor.on('change', '.keyvalueeditor-key', function () {\r\n                var val=this.value;\r\n                if (!val.match(/^[a-zA-Z0-9_$]+$/)) {\r\n                    alert(\"\");\r\n                    return;\r\n                }\r\n                if (!val.match(/^\\$/)) {\r\n                    this.value=\"$\"+this.value;\r\n                }\r\n                t.getValuesA();\r\n            });\r\n            t.editor.on('change', '.keyvalueeditor-value', function (e) {\r\n                var val=this.value;\r\n                try {\r\n                    var o=JSON.parse(val);\r\n                    this.value=JSON.stringify(o);\r\n                } catch (ex) {\r\n                    var qval=JSON.stringify(val);\r\n                    if (qval==='\"'+val+'\"') this.value=qval;\r\n                    else {\r\n                        alert(\"\\n\"+\r\n                        \" \\\\\\\" \\n\"+\r\n                        \"\\\\ \\\\\\\\ \\n\"\r\n                        );\r\n                        e.stopPropagation();\r\n                    }\r\n                }\r\n                t.getValuesA();\r\n            });\r\n            return t.dom;\r\n        },\r\n        save: function (t) {\r\n            var res=t.getValuesA();\r\n            if (res) {\r\n                t.opt.run.globals=res;\r\n                t.prj.setOptions(t.opt);\r\n                t.dom.dialog(\"close\");\r\n            }\r\n        },\r\n        getValuesA: function (t) {\r\n            try {\r\n                return t.getValues();\r\n            } catch(e) {\r\n                console.error(e.stack);\r\n                alert(e);\r\n            }\r\n        },\r\n        getValues: function (t) {\r\n            var vs=t.editor.keyvalueeditor(\"getValues\");\r\n            var res={};\r\n            vs.forEach(function (v) {\r\n                if (v.key in res) throw new Error(\"'\"+v.key+\"'\");\r\n                if (!v.key.match(/^\\$[a-zA-Z0-9_$]*$/)) {\r\n                    throw new Error(\"'\"+v.key+\"'\");\r\n                }\r\n                try {\r\n                    res[v.key]=JSON.parse(v.value);\r\n                } catch (e) {\r\n                    res[v.key]=v.value;\r\n                }\r\n            });\r\n            return res;\r\n        }\r\n    });\r\n    return GlobalDialog;\r\n});\r\n\ndefine('ProjectOptionsEditor',[\"UI\",\"GlobalDialog\"], function (UI,GlobalDialog) {\r\n    return function (TPR) {\r\n        const opt=TPR.getOptions();\r\n        if (!TPR.odiag) {\r\n            TPR.odiag=UI(\"div\",{title:\" \"},\r\n                    [\"h5\",\"\"],\r\n                    [\"div\",\r\n                     [\"input\", {type:\"checkbox\", $edit: \"compiler.diagnose\"}],\r\n                     \"()\"],\r\n                    [\"div\",\r\n                     [\"input\", {type:\"checkbox\", $edit: \"compiler.noLoopCheck\"}],\r\n                     \"\"],\r\n                     [\"div\",\r\n                      [\"input\", {type:\"checkbox\", $edit: \"compiler.field_strict\"}],\r\n                      \"(var n; )\"],\r\n                    [\"div\", \"\",\r\n                     [\"input\", {$edit: \"compiler.defaultSuperClass\"}]],\r\n                     [\"h5\",\"\"],\r\n                     [\"div\", \"Main \", [\"input\", {$edit: \"run.mainClass\"}] ],\r\n                     [\"div\", \"Boot \", [\"input\", {$edit: \"run.bootClass\"}] ],\r\n                     [\"div\", \"\",[\"button\", {on:{click: editG}},\"...\"] ],\r\n                     [\"h5\",\"\"],\r\n                     [\"div\",\r\n                      [\"input\", {type:\"checkbox\", $edit: \"kernelEditable\"}],\r\n                      \"Kernel\"],\r\n                      [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}]\r\n            );\r\n        }\r\n        var gdiag=new GlobalDialog(TPR);\r\n        function editG() {\r\n          gdiag.show();\r\n        }\r\n        TPR.odiag.$edits.load(opt);\r\n        TPR.odiag.dialog({\r\n            width: 600,\r\n            buttons: {\r\n                OK: function () {\r\n                    TPR.odiag.dialog(\"close\");\r\n                    //console.log(\"Project opt Saved \",JSON.stringify(opt));\r\n                    TPR.setOptions(opt);\r\n                    TPR.resetFiles();// does requestRebuild() by BuilderWorker\r\n                    //console.log(\"new opt \",JSON.stringify(TPR.getOptions()));\r\n                }\r\n            }\r\n        });\r\n    };\r\n});\r\n\ndefine('KeyEventChecker',[],function () {\r\n\tvar KEC={};\r\n\tKEC.down=function (elem, name, handler) {\r\n\t\tif (!(elem instanceof $)) elem=$(elem);\r\n\t\telem.bind(\"keydown\", function (e) {\r\n\t\t\tif (KEC.is(e, name)) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn handler.call(elem[0],e);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tKEC.is=function (e,name) {\r\n\t\tname=name.toLowerCase();\r\n\t\te = e.originalEvent || e;\r\n\t\tvar s=\"\";\r\n\t\tif (e.altKey) {\r\n\t\t\ts+=\"alt+\";\r\n\t\t}\r\n\t\tif (e.ctrlKey) {\r\n\t\t\ts+=\"ctrl+\";\r\n\t\t}\r\n\t\tif (e.shiftKey) {\r\n\t\t\ts+=\"shift+\";\r\n\t\t}\r\n\t\tif (e.keyCode>=112 && e.keyCode<=123) {\r\n\t\t\ts+=\"f\"+(e.keyCode-111);\r\n\t\t} else {\r\n\t\t\ts+=String.fromCharCode(e.keyCode);\r\n\t\t}\r\n\t\ts=s.toLowerCase();\r\n\t\t//console.log(s);\r\n\t\treturn name==s;\r\n\t};\r\n\treturn KEC;\r\n});\r\n\ndefine('Shell',[\"FS\",\"assert\"],\r\n        function (FS,assert) {\r\n    var Shell={};\r\n    var PathUtil=assert(FS.PathUtil);\r\n    Shell.newCommand=function (name,func) {\r\n        this[name]=func;\r\n    };\r\n    Shell.cd=function (dir) {\r\n        Shell.cwd=resolve(dir,true);\r\n        return Shell.pwd();\r\n    };\r\n    Shell.vars=Object.create(FS.getEnv());\r\n    Shell.mount=function (options, path) {\r\n        //var r=resolve(path);\r\n        if (!options || !options.t) {\r\n            var fst=[];\r\n            for (var k in FS.getRootFS().availFSTypes()) {\r\n                fst.push(k);\r\n            }\r\n            sh.err(\"-t=(\"+fst.join(\"|\")+\") should be specified.\");\r\n            return;\r\n        }\r\n        FS.mount(path,options.t, options);\r\n    };\r\n    Shell.unmount=function (path) {\r\n        FS.unmount(path);\r\n    };\r\n    Shell.fstab=function () {\r\n        var rfs=FS.getRootFS();\r\n        var t=rfs.fstab();\r\n        var sh=this;\r\n        //sh.echo(rfs.fstype()+\"\\t\"+\"<Root>\");\r\n        t.forEach(function (fs) {\r\n            sh.echo(fs.fstype()+\"\\t\"+(fs.mountPoint||\"<Default>\"));\r\n        });\r\n    }\r\n    Shell.resolve=resolve;\r\n    function resolve(v, mustExist) {\r\n        var r=resolve2(v);\r\n        if (!FS.SFile.is(r)) {console.log(r,\" is not file\");}\r\n        if (mustExist && !r.exists()) throw new Error(r+\": no such file or directory\");\r\n        return r;\r\n    }\r\n    function resolve2(v) {\r\n        if (typeof v!=\"string\") return v;\r\n        var c=Shell.cwd;\r\n        if (PathUtil.isAbsolutePath(v)) return FS.resolve(v,c);\r\n        return c.rel(v);\r\n    }\r\n    Shell.pwd=function () {\r\n        return Shell.cwd+\"\";\r\n    };\r\n    Shell.ls=function (dir){\r\n    \tif (!dir) dir=Shell.cwd;\r\n    \telse dir=resolve(dir, true);\r\n        return dir.ls();\r\n    };\r\n    Shell.cp=function (from ,to ,options) {\r\n        if (!options) options={};\r\n        if (options.v) {\r\n            Shell.echo(\"cp\", from ,to);\r\n            options.echo=Shell.echo.bind(Shell);\r\n        }\r\n        var f=resolve(from, true);\r\n        var t=resolve(to);\r\n        return f.copyTo(t,options);\r\n    };\r\n    Shell.ln=function (to , from ,options) {\r\n        var f=resolve(from);\r\n        var t=resolve(to, true);\r\n        if (f.isDir() && f.exists()) {\r\n            f=f.rel(t.name());\r\n        }\r\n        if (f.exists()) {\r\n            throw new Error(f+\" exists\");\r\n        }\r\n        return f.link(t,options);\r\n    };\r\n    Shell.rm=function (file, options) {\r\n        if (!options) options={};\r\n        if (options.notrash) {\r\n            file=resolve(file, false);\r\n            file.removeWithoutTrash();\r\n            return 1;\r\n        }\r\n        file=resolve(file, true);\r\n        if (file.isDir() && options.r) {\r\n            var dir=file;\r\n            var sum=0;\r\n            dir.each(function (f) {\r\n                if (f.exists()) {\r\n                    sum+=Shell.rm(f, options);\r\n                }\r\n            });\r\n            dir.rm();\r\n            return sum+1;\r\n        } else {\r\n            file.rm();\r\n            return 1;\r\n        }\r\n    };\r\n    Shell.mkdir=function (file,options) {\r\n        file=resolve(file, false);\r\n        if (file.exists()) throw new Error(file+\" : exists\");\r\n        return file.mkdir();\r\n\r\n    };\r\n    Shell.cat=function (file,options) {\r\n        file=resolve(file, true);\r\n        return Shell.echo(file.getContent(function (c) {\r\n            if (file.isText()) {\r\n                return c.toPlainText();\r\n            } else {\r\n                return c.toURL();\r\n            }\r\n        }));\r\n    };\r\n    Shell.resolve=function (file) {\r\n        if (!file) file=\".\";\r\n        file=resolve(file);\r\n        return file;\r\n    };\r\n    Shell.grep=function (pattern, file, options) {\r\n        file=resolve(file, true);\r\n        if (!options) options={};\r\n        if (!options.res) options.res=[];\r\n        if (file.isDir()) {\r\n            file.each(function (e) {\r\n                Shell.grep(pattern, e, options);\r\n            });\r\n        } else {\r\n            if (typeof pattern==\"string\") {\r\n                file.lines().forEach(function (line, i) {\r\n                    if (line.indexOf(pattern)>=0) {\r\n                        report(file, i+1, line);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return options.res;\r\n        function report(file, lineNo, line) {\r\n            if (options.res) {\r\n                options.res.push({file:file, lineNo:lineNo,line:line});\r\n            }\r\n            Shell.echo(file+\"(\"+lineNo+\"): \"+line);\r\n\r\n        }\r\n    };\r\n    Shell.touch=function (f) {\r\n    \tf=resolve(f);\r\n    \tf.text(f.exists() ? f.text() : \"\");\r\n    \treturn 1;\r\n    };\r\n    Shell.setout=function (ui) {\r\n        Shell.outUI=ui;\r\n    };\r\n    Shell.echo=function () {\r\n        return $.when.apply($,arguments).then(function () {\r\n            console.log.apply(console,arguments);\r\n            if (Shell.outUI && Shell.outUI.log) Shell.outUI.log.apply(Shell.outUI,arguments);\r\n        });\r\n    };\r\n    Shell.err=function (e) {\r\n        console.log.apply(console,arguments);\r\n        if (e && e.stack) console.log(e.stack);\r\n        if (Shell.outUI && Shell.outUI.err) Shell.outUI.err.apply(Shell.outUI,arguments);\r\n    };\r\n    Shell.clone= function () {\r\n        var r=Object.create(this);\r\n        r.vars=Object.create(this.vars);\r\n        return r;\r\n    };\r\n    Shell.getvar=function (k) {\r\n        return this.vars[k] || (process && process.env[k]);\r\n    };\r\n    Shell.get=Shell.getvar;\r\n    Shell.set=function (k,v) {\r\n        return this.vars[k]=v;\r\n    };\r\n    Shell.strcat=function () {\r\n        if (arguments.length==1) return arguments[0];\r\n        var s=\"\";\r\n        for (var i=0;i<arguments.length;i++) s+=arguments[i];\r\n        return s;\r\n    };\r\n    Shell.exists=function (f) {\r\n        f=this.resolve(f);\r\n        return f.exists();\r\n    };\r\n    Shell.dl=function (f) {\r\n        f=this.resolve(f||\".\");\r\n        return f.download();\r\n    };\r\n    Shell.zip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.zip.apply(FS.zip,a);\r\n    };\r\n    Shell.unzip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.unzip.apply(FS.zip,a);\r\n    };\r\n\r\n    Shell.prompt=function () {};\r\n    Shell.ASYNC={r:\"SH_ASYNC\"};\r\n    Shell.help=function () {\r\n        for (var k in Shell) {\r\n            var c=Shell[k];\r\n            if (typeof c==\"function\") {\r\n                Shell.echo(k+(c.description?\" - \"+c.description:\"\"));\r\n            }\r\n        }\r\n    };\r\n    if (!window.sh) window.sh=Shell;\r\n    if (typeof process==\"object\") {\r\n        sh.devtool=function () { require('nw.gui').Window.get().showDevTools();}\r\n        sh.cd(process.cwd().replace(/\\\\/g,\"/\"));\r\n    } else {\r\n        sh.cd(\"/\");\r\n    }\r\n    return Shell;\r\n});\r\n\ndefine('Shell2',[\"Shell\",\"UI\",\"FS\",\"Util\"], function (sh,UI,FS,Util) {\r\n    var res={};\r\n    res.show=function (dir) {\r\n        var d=res.embed(dir);\r\n        d.dialog({width:600,height:500});\r\n    };\r\n    res.embed=function (dir) {\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"Shell\"},[\"div\",{$var:\"inner\"},\"Type 'help' to show commands.\",[\"br\"]]);\r\n            res.inner=res.d.$vars.inner;\r\n            sh.prompt();\r\n        }\r\n        var d=res.d;\r\n        return d;\r\n    };\r\n    sh.cls=function () {\r\n        res.d.$vars.inner.empty();\r\n    };\r\n    sh.prompt=function () {\r\n        var line=UI(\"div\",\r\n            [\"input\",{$var:\"cmd\",size:40,on:{keydown: kd}}],\r\n            [\"pre\",{$var:\"out\",\"class\":\"shell out\"},[\"div\",{$var:\"cand\",\"class\":\"shell cand\"}]]\r\n        );\r\n        var cmd=line.$vars.cmd;\r\n        var out=line.$vars.out;\r\n        var cand=line.$vars.cand;\r\n        sh.setout({log:function () {\r\n            return $.when.apply($,arguments).then(function () {\r\n                var a=[];\r\n                for (var i=0; i<arguments.length; i++) {\r\n                    a.push(arguments[i]);\r\n                }\r\n                if (a[0] instanceof $) {\r\n                    out.append(a[0]);\r\n                } else {\r\n                    out.append(UI(\"span\",a.join(\" \")+\"\\n\"));\r\n                }\r\n            });\r\n        },err:function (e) {\r\n            out.append(UI(\"div\",{\"class\": \"shell error\"},e,[\"br\"],[\"pre\",e.stack]));\r\n        }});\r\n        line.appendTo(res.inner);\r\n        cmd.focus();\r\n        res.inner.closest(\".ui-dialog-content\").scrollTop(res.inner.height());\r\n        return sh.ASYNC;\r\n        function kd(e) {\r\n            //var eo=e.originalEvent();\r\n            //console.log(e.which);\r\n            if (e.which==9) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                comp();\r\n                return false;\r\n            }\r\n            if (e.which==13) {\r\n                cand.empty();\r\n                exec(cmd.val());\r\n            }\r\n        }\r\n        function exec() {\r\n            var c=cmd.val().replace(/^ */,\"\").replace(/ *$/,\"\");\r\n            if (c.length==0) return;\r\n            var cs=c.split(/ +/);\r\n            var cn=cs.shift();\r\n            var f=sh[cn];\r\n            if (typeof f!=\"function\") return out.append(cn+\": command not found.\");\r\n            try {\r\n                var args=[],options=null;\r\n                cs.forEach(function (ce) {\r\n                    var opt=/^-([A-Za-z_0-9]+)(=(.*))?/.exec(ce);\r\n                    if (opt) {\r\n                        if (!options) options={};\r\n                        options[opt[1]]=opt[3]!=null ? opt[3] : 1;\r\n                    } else {\r\n                        if (options) args.push(options);\r\n                        options=null;\r\n                        args.push(ce);\r\n                    }\r\n                });\r\n                if (options) args.push(options);\r\n                var sres=f.apply(sh, args);\r\n                if (sres===sh.ASYNC) return;\r\n                if (typeof sres==\"object\") {\r\n                    if (sres instanceof Array) {\r\n                        var table=UI(\"table\");\r\n                        var tr=null;\r\n                        var cnt=0;\r\n                        sres.forEach(function (r) {\r\n                            if (!tr) tr=UI(\"tr\").appendTo(table);\r\n                            tr.append(UI(\"td\",r));\r\n                            cnt++;if(cnt%3==0) tr=null;\r\n                        });\r\n                        table.appendTo(out);\r\n                    } else {\r\n                        out.append(JSON.stringify(sres));\r\n                    }\r\n                } else {\r\n                    out.append(sres);\r\n                }\r\n                sh.prompt();\r\n            } catch(e) {\r\n                sh.err(e);\r\n                //out.append(UI(\"div\",{\"class\": \"shell error\"},e,[\"br\"],[\"pre\",e.stack]));\r\n                sh.prompt();\r\n            }\r\n        }\r\n        function comp(){\r\n            var c=cmd.val();\r\n            var cs=c.split(\" \");\r\n            var fn=cs.pop();\r\n            var canda=[];\r\n            if (cs.length==0) {\r\n                for (var k in sh) {\r\n                    if (typeof sh[k]==\"function\" && Util.startsWith(k, fn)) {\r\n                        canda.push(k);\r\n                    }\r\n                }\r\n            } else {\r\n                var f=sh.resolve(fn,false);\r\n                //console.log(fn,f);\r\n                if (!f) return;\r\n                var d=(f.isDir() ? f : f.up());\r\n                d.each(function (e) {\r\n                    if ( Util.startsWith(e.path(), f.path()) ) {\r\n                        canda.push(e.name());\r\n                    }\r\n                });\r\n            }\r\n            if (canda.length==1) {\r\n                var fns=fn.split(\"/\");\r\n                fns.pop();\r\n                fns.push(canda[0]);\r\n                cs.push(fns.join(\"/\"));\r\n                cmd.val(cs.join(\" \"));\r\n                cand.empty();\r\n            } else {\r\n                cand.text(canda.join(\", \"));\r\n            }\r\n            //console.log(canda);\r\n            //cmd.val(cmd.val()+\"hokan\");\r\n        }\r\n    };\r\n    sh.window=function () {\r\n        res.show(sh.cwd);\r\n    };\r\n    sh.atest=function (a,b,options) {\r\n        console.log(a,b,options);\r\n    };\r\n    var oldcat=sh.cat;\r\n    sh.cat=function (file,options) {\r\n        file=sh.resolve(file, true);\r\n        if (file.contentType().match(/^image\\//)) {\r\n            return file.getContent(function (c) {\r\n                sh.echo(UI(\"img\",{src:c.toURL()}));\r\n            });\r\n        } else {\r\n            return oldcat.apply(sh,arguments);\r\n        }\r\n    };\r\n    return res;\r\n});\ndefine('PatternParser',[\"Tonyu\"], function (Tonyu) {\r\n    var PP=function (img, options) {\r\n        this.options=options || {};\r\n        this.img=img;\r\n        this.height = img.height;\r\n        this.width = img.width;\r\n        var cv=this.newImage(img.width, img.height);\r\n        var ctx=cv.getContext(\"2d\");\r\n        ctx.drawImage(img, 0,0);\r\n        this.ctx=ctx;\r\n        this.pixels=this.ctx.getImageData(0, 0, img.width, img.height).data;\r\n        this.base=this.getPixel(0,0);\r\n    };\r\n    Tonyu.extend(PP.prototype,{\r\n        newImage: function (w,h) {\r\n            var cv=document.createElement(\"canvas\");\r\n            cv.width=w;\r\n            cv.height=h;\r\n            return cv;\r\n        },\r\n        getPixel: function (x,y) {\r\n            var imagePixelData = this.pixels;\r\n            var ofs=(x+y*this.width)*4;\r\n            var R = imagePixelData[0+ofs];\r\n            var G = imagePixelData[1+ofs];\r\n            var B = imagePixelData[2+ofs];\r\n            var A = imagePixelData[3+ofs];\r\n            return ((((A*256)+B)*256)+G)*256+R;\r\n        },\r\n        setPixel: function (x,y,p) {\r\n            var ofs=(x+y*this.width)*4;\r\n            this.pixels[0+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[1+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[2+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[3+ofs]=p & 255;\r\n        },\r\n        parse: function () {\r\n            try {\r\n                //console.log(\"parse()\");\r\n                var res=[];// List of charpattern\r\n                for (var y=0; y<this.height ;y++) {\r\n                    for (var x=0; x<this.width ;x++) {\r\n                        var c=this.getPixel(x, y);\r\n                        if (c!=this.base) {\r\n                            res.push(this.parse1Pattern(x,y));\r\n                        }\r\n                    }\r\n                }\r\n                //console.log(\"parsed:\"+res.lenth);\r\n                return res;\r\n            } catch (p) {\r\n                if (p.isParseError) {\r\n                    console.log(\"parse error! \"+p);\r\n                    return [{image: this.img, x:0, y:0, width:this.width, height:this.height}];\r\n                }\r\n                throw p;\r\n            }\r\n        },\r\n        parse1Pattern:function (x,y) {\r\n            function hex(s){return s;}\r\n            var trans=this.getPixel(x, y);\r\n            var dx=x,dy=y;\r\n            var base=this.base;\r\n            var width=this.width, height=this.height;\r\n            while (dx<width) {\r\n                var pixel = this.getPixel(dx,dy);\r\n                if (pixel!=trans) break;\r\n                dx++;\r\n            }\r\n            if (dx>=width || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dx--;\r\n            while (dy<height) {\r\n                if (this.getPixel(dx,dy)!=trans) break;\r\n                dy++;\r\n            }\r\n            if (dy>=height || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dy--;\r\n            var sx=x+1,sy=y+1,w=dx-sx,h=dy-sy;\r\n            //console.log(\"PP\",sx,sy,w,h,dx,dy);\r\n            if (w*h==0) throw PatterParseError(dx, dy,\"w*h==0\");\r\n            var newim=this.newImage(w,h);\r\n            var nc=newim.getContext(\"2d\");\r\n            var newImD=nc.getImageData(0,0,w,h);\r\n            var newD=newImD.data;\r\n            var di=0;\r\n            for (var ey=sy ; ey<dy ; ey++) {\r\n                for (var ex=sx ; ex<dx ; ex++) {\r\n                    var p=this.getPixel(ex, ey);\r\n                    if (p==trans) {\r\n                        newD[di++]=0;\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                    } else {\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                    }\r\n                }\r\n            }\r\n            nc.putImageData(newImD,0,0);\r\n            for (var yy=sy-1; yy<=dy; yy++) {\r\n                for (var xx=sx-1; xx<=dx; xx++) {\r\n                    this.setPixel(xx,yy, base);\r\n                }\r\n            }\r\n            if (this.options.boundsInSrc) {\r\n                return {x:sx,y:sy,width:w,height:h};\r\n            }\r\n            return {image:newim, x:0, y:0, width:w, height:h};\r\n            function PatterParseError(x,y,msg) {\r\n                return {toString: function () {\r\n                    return \"at (\"+x+\",\"+y+\") :\"+msg;\r\n                }, isParseError:true};\r\n            }\r\n        }\r\n\r\n    });\r\n    return PP;\r\n});\r\n\ndefine('Assets',[\"WebSite\",\"Util\",\"Tonyu\",\"FS\"],function (WebSite,Util,Tonyu,FS) {\r\n    var Assets={};\r\n    Assets.resolve=function (url, prj, options) {\r\n        options=options||{};\r\n        var baseDir=FS.isFile(prj)?prj:prj.getDir();\r\n        if (url==null) url=\"\";\r\n        url=url.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (t,name) {\r\n            return WebSite[name];\r\n        });\r\n        if (WebSite.urlAliases[url]) url=WebSite.urlAliases[url];\r\n        if (Util.startsWith(url,\"ls:\")) {\r\n            var rel=url.substring(\"ls:\".length);\r\n            if (!baseDir) throw new Error(\"Basedir not specified\");\r\n            var f=baseDir.rel(rel);\r\n            if (!f.exists()) throw new Error(\"Resource file not found: \"+f);\r\n            if (\r\n                (WebSite.mp3Disabled && rel.match(/\\.(mp3)$/)) ||\r\n                (WebSite.mp4Disabled && rel.match(/\\.(mp4|m4a)$/))\r\n            ) {\r\n                var oggf=baseDir.rel(rel.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\"));\r\n                if (oggf.exists()) {\r\n                    f=oggf;\r\n                }\r\n            }\r\n            url=f.getURL();\r\n            if (options.asFile) return f;\r\n        }\r\n        return url;\r\n    };\r\n    Tonyu.Assets=Assets;\r\n    return Assets;\r\n});\r\n\ndefine('ImageList',[\"PatternParser\",\"Util\",\"Assets\",\"assert\"], function (PP,Util,Assets,assert) {\r\n    var cache={};\r\n    function excludeEmpty(resImgs) {\r\n        var r=[];\r\n        resImgs.forEach(function (resImg,i) {\r\n            if (!resImg || resImg.url==\"\") return;\r\n            r.push(resImg);\r\n        });\r\n        return r;\r\n    }\r\n    var IL;\r\n    IL=function (resImgs, onLoad,options) {\r\n        //  resImgs:[{url: , [pwidth: , pheight:]?  }]\r\n\t    if (!options) options={};\r\n        resImgs=excludeEmpty(resImgs);\r\n        var resa=[];\r\n        var cnt=resImgs.length;\r\n        if (cnt==0) setTimeout(function () {\r\n            var res=[];\r\n            res.names={};\r\n            onLoad(res);\r\n        },0);\r\n        resImgs.forEach(function (resImg,i) {\r\n            console.log(\"loading\", resImg,i);\r\n            var url=resImg.url;\r\n            var urlKey=url;\r\n            if (cache[urlKey]) {\r\n            \tproc.apply(cache[urlKey],[]);\r\n            \treturn;\r\n            }\r\n            url=Assets.resolve(url,options.prj||options.baseDir);\r\n            //if (!Util.startsWith(url,\"data:\")) url+=\"?\" + new Date().getTime();\r\n            var im=$(\"<img>\");\r\n            im.load(function () {\r\n            \tcache[urlKey]=this;\r\n            \tproc.apply(this,[]);\r\n            });\r\n            im.attr(\"src\",url);\r\n            function proc() {\r\n                var pw,ph;\r\n                if (resImg.type==\"single\") {\r\n                    resa[i]=[{image:this, x:0,y:0, width:this.width, height:this.height}];\r\n                } else if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n                    var x=0, y=0, w=this.width, h=this.height;\r\n                    var r=[];\r\n                    while (true) {\r\n                        var rw=pw,rh=ph;\r\n                        if (x+pw>w) rw=w-x;\r\n                        if (y+ph>h) rh=h-y;\r\n                        r.push({image:this, x:x,y:y, width:rw, height:rh});\r\n                        x+=pw;\r\n                        if (x+pw>w) {\r\n                            x=0;\r\n                            y+=ph;\r\n                            if (y+ph>h) break;\r\n                        }\r\n                    }\r\n                    resa[i]=r;\r\n                } else {\r\n                    var p=new PP(this);\r\n                    resa[i]=p.parse();\r\n                }\r\n                resa[i].name=resImg.name;\r\n                assert.is(resa[i],Array);\r\n                cnt--;\r\n                if (cnt==0) {\r\n                    var res=[];\r\n                    var names={};\r\n                    resa.forEach(function (a) {\r\n                        names[a.name]=res.length;\r\n                        res=res.concat(a);\r\n                    });\r\n                    res.names=names;\r\n                    onLoad(res);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    IL.load=IL;\r\n    IL.parse1=function (resImg, imgDOM, options) {\r\n        var pw,ph;\r\n        var res;\r\n        if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n            var x=0, y=0, w=imgDOM.width, h=imgDOM.height;\r\n            var r=[];\r\n            while (true) {\r\n                r.push({image:this, x:x,y:y, width:pw, height:ph});\r\n                x+=pw;\r\n                if (x+pw>w) {\r\n                    x=0;\r\n                    y+=ph;\r\n                    if (y+ph>h) break;\r\n                }\r\n            }\r\n            res=r;\r\n        } else {\r\n            var p=new PP(imgDOM,options);\r\n            res=p.parse();\r\n        }\r\n        res.name=resImg.name;\r\n        return assert.is(res,Array);\r\n    };\r\n\twindow.ImageList=IL;\r\n    return IL;\r\n});\r\n\ndefine('Auth',[\"WebSite\"],function (WebSite) {\r\n    var auth={};\r\n    auth.currentUser=function (onend) {\r\n        //TODO: urlchange!\r\n        $.ajax({type:\"get\",url:WebSite.serverTop+\"/currentUser\",data:{withCsrfToken:true},\r\n            success:function (res) {\r\n                console.log(\"auth.currentUser\",res);\r\n                res=JSON.parse(res);\r\n                var u=res.user;\r\n                if (u==\"null\") u=null;\r\n                console.log(\"user\", u, \"csrfToken\",res.csrfToken);\r\n                onend(u,res.csrfToken);\r\n            }\r\n        });\r\n    };\r\n    auth.assertLogin=function (options) {\r\n        /*if (typeof options==\"function\") options={complete:options};\r\n        if (!options.confirm) options.confirm=\"\";\r\n        if (typeof options.confirm==\"string\") {\r\n            var mesg=options.confirm;\r\n            options.confirm=function () {\r\n                return confirm(mesg);\r\n            };\r\n        }*/\r\n        auth.currentUser(function (user,csrfToken) {\r\n            if (user) {\r\n                return options.success(user,csrfToken);\r\n            }\r\n            window.onLoggedIn=options.success;\r\n            //TODO: urlchange!\r\n            options.showLoginLink(WebSite.serverTop+\"/login\");\r\n        });\r\n    };\r\n    window.Auth=auth;\r\n    return auth;\r\n});\ndefine('Blob',[\"Auth\",\"WebSite\",\"Util\"],function (a,WebSite,Util) {\r\n    var Blob={};\r\n    var BLOB_PATH_EXPR=\"${blobPath}\";\r\n    Blob.BLOB_PATH_EXPR=BLOB_PATH_EXPR;\r\n    Blob.upload=function(user, project, file, options) {\r\n        var fd = new FormData(document.getElementById(\"fileinfo\"));\r\n        if (options.error) {\r\n            options.error=function (r) {alert(r);};\r\n        }\r\n        fd.append(\"theFile\", file);\r\n        fd.append(\"user\",user);\r\n        fd.append(\"project\",project);\r\n        fd.append(\"fileName\",file.name);\r\n      //TODO: urlchange!\r\n        $.ajax({\r\n            type : \"get\",\r\n            url : WebSite.serverTop+\"/blobURL\",\r\n            success : function(url) {\r\n                $.ajax({\r\n                    url : url,\r\n                    type : \"POST\",\r\n                    data : fd,\r\n                    processData : false, // jQuery \r\n                    contentType : false, // jQuery  contentType \r\n                    success : function(res) {\r\n                        console.log(\"Res = \" + res);\r\n                        options.success.apply({},arguments);// $(\"#drag\").append(res);\r\n                    },\r\n                    error: options.error\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Blob.isBlobURL=function (url) {\r\n        if (Util.startsWith(url,BLOB_PATH_EXPR)) {\r\n            var a=url.split(\"/\");\r\n            return {user:a[1], project:a[2], fileName:a[3]};\r\n        }\r\n    };\r\n    // actualURL;\r\n    Blob.url=function(user,project,fileName) {\r\n        return WebSite.blobPath+user+\"/\"+project+\"/\"+fileName;\r\n    };\r\n    Blob.uploadToExe=function (prj, options) {\r\n        var bis=prj.getBlobInfos();\r\n        var cnt=bis.length;\r\n        console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        if (cnt==0) return options.success();\r\n        if (!options.progress) options.progress=function (cnt) {\r\n            console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        };\r\n        bis.forEach(function (bi) {\r\n            var data={csrfToken:options.csrfToken};\r\n            for (var i in bi) data[i]=bi[i];\r\n            $.ajax({\r\n                type:\"get\",\r\n                url: WebSite.serverTop+\"/uploadBlobToExe\",   //TODO: urlchange!\r\n                data:data,\r\n                success: function () {\r\n                     cnt--;\r\n                     if (cnt==0) return options.success();\r\n                     else options.progress(cnt);\r\n                },\r\n                error:options.error\r\n             });\r\n        });\r\n    };\r\n    return Blob;\r\n});\ndefine('ImageRect',[],function () {\r\n    function draw(img, canvas) {\r\n        if (typeof img==\"string\") {\r\n            var i=new Image();\r\n            var res=null;\r\n            var callback=null;\r\n            var onld=function (clb) {\r\n                if (clb) callback=clb;\r\n                if (callback && res) {\r\n                    callback(res);\r\n                }\r\n            };\r\n            i.onload=function () {\r\n                res=draw(i,canvas);\r\n                onld();\r\n            };\r\n            i.src=img;\r\n            return onld;\r\n        }\r\n        var cw=canvas.width;\r\n        var ch=canvas.height;\r\n        var cctx=canvas.getContext(\"2d\");\r\n        var width=img.width;\r\n        var height=img.height;\r\n        var calcw=ch/height*width; // calch=ch\r\n        var calch=cw/width*height; // calcw=cw\r\n        if (calch>ch) calch=ch;\r\n        if (calcw>cw) calcw=cw;\r\n        cctx.clearRect(0,0,cw,ch);\r\n        var marginw=Math.floor((cw-calcw)/2);\r\n        var marginh=Math.floor((ch-calch)/2);\r\n        cctx.drawImage(img,\r\n                0,0,width, height,\r\n                marginw,marginh,calcw, calch );\r\n        return {left: marginw, top:marginh, width:calcw, height:calch,src:img};\r\n    }\r\n    return draw;\r\n});\ndefine('ImageDetailEditor',[\"UI\",\"ImageList\",\"ImageRect\",\"PatternParser\",\"WebSite\",\"Assets\"],\r\n        function (UI,ImageList,ImageRect,PP,WebSite,Assets) {\r\n    var d=UI(\"div\",{title:\"\"},\r\n            [\"div\",\r\n             [\"div\",\"URL:\",[\"input\",{$var:\"url\",size:40,on:{change:setURL}}],\r\n               [\"a\",{$var:\"openImg\",target:\"_blank\"},\"...\"]],\r\n             [\"canvas\",{$edit:\"cv\",width:500,height:250,on:{mousemove:cvMouse,mousedown:cvClick}}] ],\r\n             [\"form\",{$var:\"theForm\"},\r\n               [\"div\",radio(\"single\"),\"\"],\r\n               [\"div\",radio(\"rc\"),\"\",\r\n                [\"input\",{$var:\"cols\",size:5,on:{realtimechange:setRC,focus:selRC}}],\"x\",\r\n                [\"input\",{$var:\"rows\",size:5,on:{realtimechange:setRC,focus:selRC}}]],\r\n               [\"div\",radio(\"wh\"),\"1\",\r\n                [\"input\",{$var:\"pwidth\",size:5,on:{realtimechange:setWH,focus:selWH}}],\"x\",\r\n                [\"input\",{$var:\"pheight\",size:5,on:{realtimechange:setWH,focus:selWH}}]],\r\n               [\"div\",radio(\"t1\"),\"Tonyu1\",\r\n                 [\"button\",{on:{click:tonyu1}},\"\"]],\r\n               [\"div\",\":\",[\"input\",{$var:\"patName\"}] ],\r\n               [\"button\",{on:{click:close}},\"OK\"]]\r\n    );\r\n    function radio(v) {\r\n        return UI(\"input\",{type:\"radio\",name:\"type\",value:v,on:{\r\n            click:function (){selval(v);}\r\n        }});\r\n    }\r\n    function selval(v) {\r\n        switch (v) {\r\n        case \"single\":\r\n            if (!item) return false;\r\n            cols=1;//nNan( parseInt(v.cols.val()) ,cols);\r\n            rows=1;//nNan( parseInt(v.rows.val()) ,rows);\r\n            calcWH();\r\n            setWH();//?\r\n            redrawImage();\r\n            return false;\r\n        case \"rc\":\r\n            return setRC();\r\n        case \"wh\":\r\n            return setWH();\r\n        }\r\n    }\r\n    var v=d.$vars;\r\n    var w,h,rows,cols;\r\n    var IMD={};\r\n    var item;\r\n    var srcImg;\r\n    var onclose;\r\n    var canvasRect;\r\n    var chipRects, curChipIndex=-1;\r\n    var curItemName;\r\n    function setURL() {\r\n        if (item) item.url=v.url.val();\r\n    }\r\n    function selRC() {\r\n        v.theForm[0].type.value=\"rc\";\r\n    }\r\n    function selWH() {\r\n        v.theForm[0].type.value=\"wh\";\r\n    }\r\n    function selSingle() {\r\n        v.theForm[0].type.value=\"single\";\r\n    }\r\n    IMD.show=function (_item, prj, itemName, options) {\r\n        if (!options) options={};\r\n        onclose=options.onclose;\r\n        item=_item;\r\n        curItemName=itemName;\r\n        d.dialog({width:600,height:520});\r\n        v.url.val(item.url);\r\n        var url=Assets.resolve(item.url,prj);\r\n\r\n        if (WebSite.isNW) {\r\n            var path;\r\n            // NW.jsWebSite.urlAliases\r\n            // \r\n            var urlAliases = {\r\n                \"images/Ball.png\":\"www/images/Ball.png\",\r\n                \"images/base.png\":\"www/images/base.png\",\r\n                \"images/Sample.png\":\"www/images/Sample.png\",\r\n                \"images/neko.png\":\"www/images/neko.png\",\r\n                \"images/mapchip.png\":\"www/images/mapchip.png\",\r\n                \"images/sound.png\":\"www/images/sound.png\",\r\n                \"images/sound_ogg.png\":\"www/images/sound_ogg.png\",\r\n                \"images/sound_mp3.png\":\"www/images/sound_mp3.png\",\r\n                \"images/sound_mp4.png\":\"www/images/sound_mp4.png\",\r\n                \"images/sound_m4a.png\":\"www/images/sound_m4a.png\",\r\n                \"images/sound_mid.png\":\"www/images/sound_mid.png\",\r\n                \"images/sound_wav.png\":\"www/images/sound_wav.png\",\r\n                \"images/ecl.png\":\"www/images/ecl.png\"\r\n            }\r\n            try {\r\n                path=urlAliases[item.url];\r\n                if(!path)path=url;\r\n            }catch(e) {\r\n                path=url;\r\n            }\r\n            var urlScript = \"javascript:nw.Window.open('\"+path+\"', {}, function(w) {w.y=20;w.width=700;w.height=600;})\";\r\n            v.openImg.attr(\"href\",urlScript);\r\n        } else {\r\n            v.openImg.attr(\"href\",url);\r\n        }\r\n        \r\n        ImageRect(url, v.cv[0])(function (res) {\r\n            canvasRect=res;\r\n            console.log(res);\r\n            srcImg=res.src;\r\n            w=srcImg.width;\r\n            h=srcImg.height;\r\n            if (item.type==\"single\") {\r\n                selSingle();\r\n            } else if (item.pwidth && item.pheight) {\r\n                v.pwidth.val(item.pwidth);\r\n                v.pheight.val(item.pheight);\r\n                calcRC();\r\n                selWH();\r\n            } else {\r\n                v.theForm[0].type.value=\"t1\";\r\n            }\r\n            drawFrame();\r\n        });\r\n    };\r\n    function redrawImage() {\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        var r=canvasRect;\r\n        if (!r) return;\r\n        if (!srcImg) return;\r\n        ctx.clearRect( r.left, r.top, r.width, r.height);\r\n        ctx.drawImage(srcImg, 0,0,w,h, r.left, r.top, r.width, r.height);\r\n        drawFrame();\r\n    }\r\n    function drawFrame() {\r\n        var rects=ImageList.parse1(item, srcImg, {boundsInSrc:true});\r\n//        console.log(\"drawFrame\", rects);\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        rects.forEach(function (r) {\r\n            rect(ctx,calcRect(r));\r\n        });\r\n        chipRects=rects;\r\n    }\r\n    function inRect(point,rect) {\r\n        return rect.left<= point.x && point.x<= rect.left+rect.width &&\r\n               rect.top<=point.y && point.y<=rect.top+rect.height ;\r\n    }\r\n    function calcRect(r) { // rect in srcImg:{x,y,width,height}\r\n        var s={};  // returns rect in canvas(v.cv):{left,top,width,hegiht};\r\n        var scaleX=canvasRect.width/w;\r\n        var scaleY=canvasRect.height/h;\r\n        s.left=canvasRect.left+r.x*scaleX;\r\n        s.top=canvasRect.top+r.y*scaleY;\r\n        s.width=r.width*scaleX;\r\n        s.height=r.height*scaleY;\r\n        return s;\r\n    }\r\n    function cvMouse(e) {\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        var o=v.cv.offset();\r\n        var p={x:e.pageX-o.left, y:e.pageY-o.top};\r\n        if (!chipRects) {\r\n            console.log(\"cvMouse\");\r\n            return;\r\n        }\r\n        chipRects.forEach(function (r,i) {\r\n            var cr=calcRect(r);\r\n            //console.log(p.x, p.y, cr);\r\n            if (inRect(p,cr )) {\r\n                var pc=chipRects[curChipIndex];\r\n                if (pc) {\r\n                    var pcr=calcRect(pc);\r\n                    rect(ctx,pcr);\r\n                }\r\n                curChipIndex=i;\r\n                rect(ctx,cr,\"#ff0\");\r\n            }\r\n        })\r\n    }\r\n    function cvClick() {\r\n        var pc=chipRects[curChipIndex];\r\n        if (pc) {\r\n            var pv=curItemName+\"+\"+curChipIndex;\r\n            v.patName.val(pv);\r\n            copyToClipboard(pv);\r\n        }\r\n    }\r\n    function rect(ctx,rect,col) {\r\n        ctx.strokeStyle=col || \"#f0f\";\r\n        ctx.beginPath();\r\n        ctx.moveTo(rect.left,rect.top);\r\n        ctx.lineTo(rect.left+rect.width,rect.top);\r\n        ctx.lineTo(rect.left+rect.width,rect.top+rect.height);\r\n        ctx.lineTo(rect.left,rect.top+rect.height);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    function nNan(val,def) {\r\n        if (val===val) return val;\r\n        return def;\r\n    }\r\n    function setRC() {\r\n        if (v.theForm[0].type.value!=\"rc\") return false;\r\n        if (!item) return false;\r\n        //console.log(\"setRC\");\r\n        cols=nNan( parseInt(v.cols.val()) ,cols);\r\n        rows=nNan( parseInt(v.rows.val()) ,rows);\r\n        calcWH();\r\n        redrawImage();\r\n        return false;\r\n    }\r\n    function calcWH() {\r\n        if (!item) return false;\r\n        item.type=\"wh\";\r\n        item.pwidth=nNan( Math.floor(w/cols), w);//item.pwidth);\r\n        item.pheight=nNan( Math.floor(h/rows), h);//item.pheight);\r\n        console.log(\"calcWH\",item);\r\n        v.pwidth.val(item.pwidth);\r\n        v.pheight.val(item.pheight);\r\n    }\r\n    function setWH() {\r\n        if (v.theForm[0].type.value!=\"wh\") return false;\r\n        if (!item) return false;\r\n        //console.log(\"setWH\",item);\r\n        item.type=\"wh\";\r\n        item.pwidth=nNan( parseInt(v.pwidth.val()), item.pwidth);\r\n        item.pheight=nNan( parseInt(v.pheight.val()), item.pheight);\r\n        calcRC();\r\n        redrawImage();\r\n        return false;\r\n    }\r\n    function calcRC() {\r\n        if (!item) return false;\r\n        cols=nNan( Math.floor(w/item.pwidth),cols);\r\n        rows=nNan( Math.floor(h/item.pheight),rows);\r\n        v.rows.val(rows);\r\n        v.cols.val(cols);\r\n    }\r\n    function tonyu1() {\r\n        if (!item) return false;\r\n        delete item.pwidth;\r\n        delete item.pheight;\r\n        item.type=\"t1\";\r\n        v.theForm[0].type.value=\"t1\";\r\n        try {\r\n            redrawImage();\r\n        } catch (e) {\r\n            alert(e);\r\n        }\r\n        /*var p=new PP(srcImg);\r\n        p.parse();\r\n        */\r\n        return false;\r\n    }\r\n    function close() {\r\n        d.dialog(\"close\");\r\n        if (onclose) onclose();\r\n        return false;\r\n    }\r\n    function copyToClipboard(value) {\r\n        if (!WebSite.isNW) return;\r\n        var gui = require('nw.gui');\r\n        var clipboard = gui.Clipboard.get();\r\n        clipboard.set(value, 'text');\r\n    }\r\n\r\n    return IMD;\r\n});\r\n\ndefine('ResEditor',[\"FS\",\"Tonyu\",\"UI\",\"ImageList\",\"Blob\",\"Auth\",\"WebSite\",\r\n\"ImageDetailEditor\",\"Util\",\"Assets\"],\r\n        function (FS, Tonyu, UI,IL,Blob,Auth,WebSite,\r\n                ImageDetailEditor,Util,Assets) {\r\n    /*var mediaInfos={\r\n        image:{name:\"\",exts:[\"png\",\"gif\",\"jpg\"],path:\"images/\",key:\"images\",\r\n            extPattern:/\\.(png|gif|jpe?g)$/i,contentType:/image\\/(png|gif|jpe?g)/,\r\n            newItem:function (name) {\r\n                var r={type:\"single\"};//pwidth:32,pheight:32};\r\n                if (name) r.name=\"$pat_\"+name;\r\n                return r;\r\n            }\r\n        },\r\n        sound:{name:\"\",exts:[\"mp3\",\"ogg\",\"mp4\",\"m4a\",\"mid\",\"wav\",\"mzo\"],path:\"sounds/\",key:\"sounds\",\r\n            extPattern:/\\.(mp3|ogg|mp4|m4a|midi?|wav|mzo)$/i,contentType:/((audio\\/(mp3|ogg|x-m4a|midi?|wav|mzo))|(video\\/mp4))/,\r\n            newItem:function (name) {\r\n                var r={};\r\n                if (name) r.name=\"$se_\"+name;\r\n                return r;\r\n            }\r\n        }\r\n    };*/\r\n    var ResEditor=function (prj, mediaInfo) {\r\n        //var mediaInfo=mediaInfos[mediaType||\"image\"];\r\n        var d=UI(\"div\", {title:mediaInfo.name+\"\"});\r\n        d.css({height:200+\"px\", \"overflow-v\":\"scroll\"});\r\n        var rsrc=prj.getResource();\r\n        var items=rsrc[mediaInfo.key];\r\n        var tempFiles = items.slice();\r\n        var rsrcDir=prj.getDir().rel(mediaInfo.path);\r\n        var itemUIs=[];\r\n        var _dropAdd;\r\n        if (!rsrc) prj.setResource({images:[],sounds:[]});\r\n        function convURL(u) {\r\n            function cvs(u) {\r\n                return WebSite.urlAliases[u] || u;\r\n            }\r\n            try {\r\n                if (Util.endsWith(u,\".ogg\")) {\r\n                    u=cvs(\"images/sound_ogg.png\");\r\n                } else if (Util.endsWith(u,\".mp3\")) {\r\n                    u=cvs(\"images/sound_mp3.png\");\r\n                } else if (Util.endsWith(u,\".mzo\")) {\r\n                    u=cvs(\"images/sound_mzo.png\");\r\n                } else if (Util.endsWith(u,\".mp4\")) {\r\n                    u=cvs(\"images/sound_mp4.png\");\r\n                } else if (Util.endsWith(u,\".m4a\")) {\r\n                    u=cvs(\"images/sound_m4a.png\");\r\n                } else if (Util.endsWith(u,\".mid\") || Util.endsWith(u,\".midi\")) {\r\n                    u=cvs(\"images/sound_mid.png\");\r\n                } else if (Util.endsWith(u,\".wav\")) {\r\n                    u=cvs(\"images/sound_wav.png\");\r\n                }\r\n                return Assets.resolve(u,prj);\r\n            }catch(e) {\r\n                return WebSite.urlAliases[\"images/ecl.png\"];\r\n            }\r\n        }\r\n        function reload(action, args) {\r\n            if (action==\"del\") { // htmlremove\r\n                var delItem = $(\"#\"+args);\r\n                rsrc=prj.getResource();\r\n                items=rsrc[mediaInfo.key];\r\n                tempFiles = items.slice();\r\n                itemUIs.some(function (itemUI, idx){\r\n                    if (itemUI[0].id==args) {\r\n                        itemUIs.splice(idx, 1);\r\n                        return true;\r\n                    }\r\n                });\r\n                delItem.removeAttr(\"id\");\r\n                delItem.remove();\r\n            } else { // reloadhtml\r\n                d.empty();\r\n                rsrc=prj.getResource();\r\n                items=rsrc[mediaInfo.key];\r\n                tempFiles = items.slice();\r\n                itemUIs=[];\r\n                if (action!=\"close\") { // \r\n                    var dragMsg=\"\"+mediaInfo.name+\"(\"+mediaInfo.exts.join(\"/\")+\")\";\r\n                    var dragPoint=UI(\"div\", {style:\"margin:10px; padding:10px; border:solid blue 2px;\",\r\n                        on:{dragover: s, dragenter: s, drop:dropAdd}},dragMsg\r\n                    ).appendTo(d);\r\n                    var itemTbl=UI(\"div\").appendTo(d);\r\n                    items.forEach(function (item){\r\n                        var itemUI=genItemUI(item, items);\r\n                        itemUIs.push(itemUI);\r\n                        itemUI.appendTo(itemTbl);\r\n                    });\r\n                    d.append(UI(\"div\",{style:\"clear:left;\"},\r\n                                [\"button\", {on:{click:function (){ add();}}}, \"\"],\r\n                                [\"button\", {on:{click:function (){ d.dialog(\"close\"); }}}, \"\"]\r\n                    ));\r\n                }\r\n            }\r\n            _dropAdd=dropAdd;\r\n            function dropAdd(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                var eo=e.originalEvent;\r\n                var files = eo.dataTransfer.files;\r\n                var readFiles = new Array(files.length);\r\n                var readFileSum = files.length;\r\n                var notReadFiles = [];\r\n                var existsFiles = [];\r\n                var readCnt = 0;\r\n                for (var i=0; i<files.length; i++) loop(i);\r\n                function loop(i){\r\n                    var file = files[i];\r\n                    var filetype= file.type;\r\n                    if (file.name.match(/\\.mzo$/)) filetype=\"audio/mzo\";\r\n                    var useBlob=WebSite.serverType==\"GAE\" && (file.size>1000*300);\r\n                    if(!filetype.match(mediaInfo.contentType)) {\r\n                        readFileSum--;\r\n                        notReadFiles.push(file);\r\n                        return;//continue;\r\n                    }\r\n                    var itemName=file.name.replace(mediaInfo.extPattern,\"\").replace(/\\W/g,\"_\");\r\n                    var itemExt=\"\";\r\n                    if (file.name.match(mediaInfo.extPattern)) {\r\n                        itemExt=RegExp.lastMatch.toLowerCase();\r\n                    }\r\n                    var itemFile=rsrcDir.rel(itemName+itemExt);\r\n                    var itemRelPath=\"ls:\"+itemFile.relPath(prj.getDir());\r\n                    var existsFile;\r\n                    var fileExists=tempFiles.some(function(f){\r\n                        existsFile=f;\r\n                        var fNameTemp=f.url.replace(mediaInfo.extPattern,\"\");\r\n                        var fName=fNameTemp.substring(fNameTemp.lastIndexOf(\"/\")+1,fNameTemp.length);\r\n                        return fName==itemName;\r\n                    });\r\n                    if (fileExists) {\r\n                        readFileSum--;\r\n                        file.existsFile=existsFile;\r\n                        existsFiles.push(file);\r\n                        return;//continue;\r\n                    }\r\n\r\n                    var v=mediaInfo.newItem(itemName);\r\n                    v.url=itemRelPath;\r\n                    renameUnique(v);\r\n                    tempFiles.push(v);\r\n                    if (useBlob) {\r\n                        Auth.assertLogin({\r\n                            showLoginLink:function (u) {\r\n                                dragPoint.css(\"border\",\"solid red 2px\").empty().append(\r\n                                        UI(\"div\",\"\"+mediaInfo.name+\"\",\r\n                                           [\"a\",{href:u,target:\"login\",style:\"color: blue;\"},\"\"])\r\n                                );\r\n                            },success:function (u) {\r\n                                dragPoint.text(\"...\");\r\n                                var prjN=prj.getName();\r\n                                Blob.upload(u,prjN,file,{success:function (){\r\n                                    dragPoint.text(dragMsg);\r\n                                    v.url=\"${blobPath}/\"+u+\"/\"+prjN+\"/\"+file.name;\r\n                                    add(v);\r\n                                }});\r\n                            }\r\n                        });\r\n                    } else {\r\n                        var reader = new FileReader();\r\n                        reader.temp_file=file;\r\n                        reader.temp_itemName=itemName;\r\n                        reader.temp_itemExt=itemExt;\r\n                        reader.temp_v=v;\r\n                        reader.onloadend = function(e) {\r\n                            var target = e.target;\r\n                            var fileContent = target.result;\r\n                            if (target.error==null && fileContent!=null) {\r\n                                var itemFile=rsrcDir.rel(target.temp_itemName+target.temp_itemExt);\r\n                                itemFile.setBytes(fileContent);\r\n                                target.temp_v.url=\"ls:\"+itemFile.relPath(prj.getDir());// fileContent;\r\n                                for (var i=0;i<files.length;i++) {\r\n                                    if (files[i]==target.temp_file) {\r\n                                        readFiles[i]=target.temp_v;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                            readCnt++;\r\n                            if (readCnt == readFileSum) {\r\n                                addAry(readFiles);\r\n                            }\r\n                        };\r\n                        reader.readAsArrayBuffer(file);\r\n                    }\r\n                }\r\n                var mes;\r\n                if (notReadFiles.length>0) {\r\n                    mes=\"\\n\";\r\n                    notReadFiles.forEach(function(f){\r\n                        if (f) mes+=f.name+\"\\n\";\r\n                    });\r\n                    alert(mes);\r\n                }\r\n                if (existsFiles.length>0) {\r\n                    mes=\"\\n\";\r\n                    existsFiles.forEach(function(f){\r\n                        if (f) {\r\n                            var fNameTemp=f.existsFile.url;\r\n                            var fName=fNameTemp.substring(fNameTemp.lastIndexOf(\"/\")+1,fNameTemp.length);\r\n                            mes+=f.name+\"  \"+fName+\"(\"+f.existsFile.name+\") \\n\";\r\n                            //mes+=f.name+\" (\"+f.existsFile.name+\")\\n\";\r\n                        }\r\n                    });\r\n                    alert(mes);\r\n                }\r\n                return false;\r\n            }\r\n            function s(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n            }\r\n            function genItemUI(item) {\r\n                function detail() {\r\n                    if (mediaInfo.key==\"sounds\") return;\r\n                    ImageDetailEditor.show(item, prj, item.name, {\r\n                        onclose: function () {\r\n                            prj.setResource(rsrc);\r\n                            reload();\r\n                        }\r\n                    });\r\n                }\r\n                function del() {\r\n                    for (var i=items.length-1; i>=0 ; i--) {\r\n                        if (items[i].name==item.name) { // itemsobjecttrueitem.name\r\n                            try {\r\n                                var r=Assets.resolve( items[i].url, prj,{asFile:1});\r\n                                if (FS.isFile(r) && rsrcDir.contains(r)) {\r\n                                    console.log(r.path(),\" is removed.\");\r\n                                    r.rm();\r\n                                }\r\n                            } catch(e) {}\r\n                            items.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update(\"del\", item.name.substring(1));\r\n                }\r\n                function up() {\r\n                    for (var i=items.length-1; i>=1 ; i--) {\r\n                        if (items[i]===item) {\r\n                            items.splice(i,1);\r\n                            items.splice(i-1,0,item);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update();\r\n                }\r\n                function down() {\r\n                    for (var i=items.length-2; i>=0 ; i--) {\r\n                        if (items[i]===item) {\r\n                            items.splice(i,1);\r\n                            items.splice(i+1,0,item);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update();\r\n                }\r\n\r\n                var res=UI(\"div\",{style:\"float:left;\", id:item.name.substring(1)}, // $se_bgm$\r\n                        [\"canvas\",{$var:\"c\",width:100,height:100,\"class\":\"clickable\",on:{click: detail}}],\r\n                        [\"div\",{style:\"float:right;\"},\r\n                        [\"button\",{on:{click:del}}, \"\"],[\"br\"],\r\n                        [\"button\",{on:{click:up}}, \"\"],[\"br\"],\r\n                        [\"button\",{on:{click:down}}, \"\"]],\r\n                        [\"div\",\r\n                            [\"input\", {$var:\"name\", size:12,value:item.name}]\r\n                            ]\r\n                   );\r\n                draw(convURL(item.url),res.$vars.c[0]);\r\n                var v=res.$vars;\r\n                v.data=item;\r\n                return res;\r\n            }\r\n            function add(v) {\r\n                items.push(v || mediaInfo.newItem());\r\n                update();\r\n            }\r\n            function addAry(vAry) {\r\n                vAry.forEach(function(v){\r\n                    if (v) items.push(v || mediaInfo.newItem());\r\n                });\r\n                update();\r\n            }\r\n            function renameUnique(v) {\r\n                var name=v.name;\r\n                var rename=name;\r\n                var cnt=1;\r\n                for (var i=tempFiles.length-1; i>=0 ; i--) {\r\n                    var o=tempFiles[i];\r\n                    if (o.name==rename) {\r\n                        rename=name+\"_\"+cnt;\r\n                        cnt++;\r\n                        i=tempFiles.length;\r\n                        continue;\r\n                    }\r\n                }\r\n                v.name=rename;\r\n            }\r\n        }\r\n        function update(action, args) {\r\n            itemUIs.forEach(function (itemUI) {\r\n                var v=itemUI.$vars;\r\n                var item=v.data;\r\n                item.name=v.name.val();\r\n            });\r\n            console.log(rsrc);\r\n            prj.setResource(rsrc);\r\n            reload(action, args);\r\n        }\r\n        /*function cleanFiles() {\r\n            var items=rsrc[mediaInfo.key];\r\n            Auth.currentUser(function (u,ct) {\r\n                if (!u) return;\r\n                var rtf=[];\r\n                items.forEach(function (item) {\r\n                    var a=Blob.isBlobURL(item.url),ogg;\r\n                    if (a) {\r\n                        rtf.push(a.fileName);\r\n                        ogg=a.fileName.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\");\r\n                        if (ogg!=a.fileName) rtf.push(ogg);\r\n                    }\r\n                });\r\n                var data={\r\n                        user:u,\r\n                        project:prj.getName(),\r\n                        mediaType:mediaType,\r\n                        csrfToken:ct,\r\n                        retainFileNames:JSON.stringify(rtf)\r\n                };\r\n                console.log(\"retainBlobs\",data);\r\n                //TODO: urlchange!\r\n                $.ajax({url:WebSite.serverTop+\"/retainBlobs\",type:\"get\",\r\n                    data:data\r\n                });\r\n            });\r\n            var cleanFile={};\r\n            if (rsrcDir.exists()) {\r\n                rsrcDir.each(function (f) {\r\n                    cleanFile[\"ls:\"+f.relPath(prj.getDir())]=f;\r\n                });\r\n            }\r\n            rsrc=prj.getResource();\r\n            items.forEach(function (item){\r\n                delete cleanFile[item.url];\r\n                delete cleanFile[item.url.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\")];\r\n            });\r\n            console.log(cleanFile);\r\n        }*/\r\n        function toi(s) {\r\n            if (!s || s==\"\") return undefined;\r\n            return parseInt(s);\r\n        }\r\n        return {\r\n            dropAdd:function (e) {\r\n                _dropAdd(e);\r\n            },\r\n            open: function () {\r\n                reload();\r\n                d.dialog({\r\n                    modal:true,\r\n                    width: 800,\r\n                    height: 500,\r\n                    close: function () {\r\n                        update(\"close\");\r\n                        //cleanFiles();\r\n                        if (typeof mediaInfo.close===\"function\") {\r\n                            mediaInfo.close({\r\n                                items:items,\r\n                                resourceDir:rsrcDir,\r\n                                project:prj\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            close: function () {\r\n                d.dialog(\"close\");\r\n            }\r\n        };\r\n    };\r\n    function draw(img, canvas) {\r\n        if (typeof img==\"string\") {\r\n            var i=new Image();\r\n            i.onload=function () {\r\n                draw(i,canvas);\r\n            };\r\n            i.src=img;\r\n            return i;\r\n        }\r\n        var cw=canvas.width;\r\n        var ch=canvas.height;\r\n        var cctx=canvas.getContext(\"2d\");\r\n        var width=img.width;\r\n        var height=img.height;\r\n        var calcw=ch/height*width; // calch=ch\r\n        var calch=cw/width*height; // calcw=cw\r\n        if (calch>ch) calch=ch;\r\n        if (calcw>cw) calcw=cw;\r\n        cctx.clearRect(0,0,cw,ch);\r\n        var marginw=Math.floor((cw-calcw)/2);\r\n        var marginh=Math.floor((ch-calch)/2);\r\n        cctx.drawImage(img,\r\n        0,0,width, height,\r\n        marginw,marginh,calcw, calch );\r\n    }\r\n    return ResEditor;\r\n});\r\n\ndefine('OggConverter',[\"FS\",\"WebSite\"], function (FS,WebSite) {\r\n    var C={};\r\n    var spawn;//=require(\"child_process\").spawn;\r\n    if (WebSite.isNW) {spawn=require(\"child_process\").spawn;}\r\n    C.convert=function (dir) {\r\n        if (!WebSite.isNW) return;\r\n        var ffmpeg=FS.get(WebSite.ffmpeg);\r\n        if (!ffmpeg.exists()) return;\r\n        console.log(\"Convert mpx->ogg \",dir.path());\r\n        dir.each(function (src) {\r\n            if (/*src.endsWith(\".mp3\") ||*/ src.endsWith(\".mp4\") || src.endsWith(\".m4a\")) {\r\n                var ext;\r\n                if (src.endsWith(\".mp3\")) ext=\".mp3\";\r\n                if (src.endsWith(\".mp4\")) ext=\".mp4\";\r\n                if (src.endsWith(\".m4a\")) ext=\".m4a\";\r\n                var dst=src.up().rel(src.truncExt(ext)+\".ogg\");\r\n                if (!dst.exists()) {\r\n                    console.log(\"running\",ffmpeg.path(),\"-i\",src.path(),dst.path());\r\n                    var proc=spawn(ffmpeg.path(),[\"-i\",src.path(),dst.path()]);\r\n                    proc.stdin.end();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    return C;\r\n});\r\n\ndefine('ResEditors',[\"ResEditor\",\"Klass\",\"OggConverter\"],\r\nfunction (ResEditor,Klass,OggConverter) {\r\n    var mediaInfos={\r\n        image:{name:\"\",exts:[\"png\",\"gif\",\"jpg\"],path:\"images/\",key:\"images\",\r\n            extPattern:/\\.(png|gif|jpe?g)$/i,contentType:/image\\/(png|gif|jpe?g)/,\r\n            newItem:function (name) {\r\n                var r={type:\"single\"};//pwidth:32,pheight:32};\r\n                if (name) r.name=\"$pat_\"+name;\r\n                return r;\r\n            }\r\n        },\r\n        sound:{name:\"\",exts:[\"mp3\",\"ogg\",\"mp4\",\"m4a\",\"mid\",\"wav\",\"mzo\"],path:\"sounds/\",key:\"sounds\",\r\n            extPattern:/\\.(mp3|ogg|mp4|m4a|midi?|wav|mzo)$/i,contentType:/((audio\\/(mp3|ogg|x-m4a|midi?|wav|mzo))|(video\\/mp4))/,\r\n            newItem:function (name) {\r\n                var r={};\r\n                if (name) r.name=\"$se_\"+name;\r\n                return r;\r\n            },\r\n            close: function (context) {\r\n                var prj=context.project;\r\n                console.log(context);\r\n                var hasMZO=false,hasMIDI=false;\r\n                context.items.forEach(function (item) {\r\n                    if (item.url.match(/\\.mzo/)) hasMZO=true;\r\n                    if (item.url.match(/\\.midi?/)) hasMIDI=true;\r\n                });\r\n                if (hasMZO) prj.addPlugin(\"Mezonet\");\r\n                else prj.removePlugin(\"Mezonet\");\r\n                if (hasMIDI) prj.addPlugin(\"PicoAudio\");\r\n                else prj.removePlugin(\"PicoAudio\");\r\n\r\n                var rsrcDir=context.resourceDir;\r\n                if (rsrcDir.exists()) {\r\n                    OggConverter.convert(rsrcDir);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return Klass.define({\r\n        $: function (prj) {\r\n            this.prj=prj;\r\n            this.editors={};\r\n            $(\"body\").on(\"dragover\",s).on(\"dragenter\",s).on(\"drop\",this.dropAndOpen.bind(this));\r\n            function s(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        dropAndOpen: function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            var eo=e.originalEvent;\r\n            var files = Array.prototype.slice.call(eo.dataTransfer.files);\r\n            console.log(\"DROP\",e,files);\r\n            if (files.length==0) return;\r\n            for (var k in mediaInfos) {\r\n                if (mediaInfos[k].extPattern.exec(files[0].name)) {\r\n                    this.open(k);\r\n                    this.curResEditor.dropAdd(e);\r\n                }\r\n            }\r\n        },\r\n        open: function (type) {// type \"image\" / \"sound\"\r\n            this.editors[type]=this.editors[type]||ResEditor(this.prj,mediaInfos[type]);\r\n            if (this.curResEditor && this.curResEditor!==this.editors[type]) {\r\n                this.curResEditor.close();\r\n            }\r\n            this.curResEditor=this.editors[type];\r\n            this.curResEditor.open();\r\n        }\r\n    });\r\n});\r\n\ndefine('Log',[\"FS\",\"WebSite\",\"Shell\"], function (FS,WebSite,sh) {\r\n    var Log={};\r\n    var logHome=WebSite.logdir ? FS.resolve(\"${logdir}\") : null;\r\n    var doLog=logHome && logHome.exists();\r\n    Log.todayDir=function () {\r\n        var d=new Date();\r\n        var y=d.getFullYear();\r\n        var m=d.getMonth()+1;\r\n        var da=d.getDate();\r\n        return logHome.rel(y+\"/\").rel(m+\"/\").rel(da+\"/\");\r\n    };\r\n    Log.curFile=function () {\r\n        var d=new Date();\r\n        var y=d.getFullYear();\r\n        var m=d.getMonth()+1;\r\n        var da=d.getDate();\r\n        return Log.todayDir().rel(y+\"-\"+m+\"-\"+da+\".log\");\r\n    };\r\n    Log.curProject=function () {\r\n        var d=new Date();\r\n        var h=d.getHours();\r\n        var m=d.getMinutes();\r\n        var s=d.getSeconds();\r\n        return Log.todayDir().rel(\"Project/\").rel(digit(h,2)+\"_\"+digit(m,2)+\"_\"+digit(s,2)+\"/\");\r\n    };\r\n    function digit(n,zs) {\r\n        n=\"00000000000000\"+n;\r\n        return n.substring(n.length-zs);\r\n    }\r\n    Log.dumpProject=function (dir) {\r\n        if (!doLog) return;\r\n        var out=Log.curProject();\r\n        sh.cp(dir, out);\r\n        Log.append(\"Dumped project to \"+out.path());\r\n    };\r\n    if (!WebSite.logging && !WebSite.isNW) {\r\n        var varlog=FS.get(\"/var/log/\");\r\n        if (varlog.exists() && varlog.fs.storage===localStorage) {\r\n            varlog.removeWithoutTrash({r:true});\r\n        }\r\n    }\r\n    Log.append=function (line) {\r\n        if (!doLog) return;\r\n        //if (WebSite.isNW) return;\r\n        var f=Log.curFile();\r\n        //console.log(Log, \"append \"+f);\r\n        var t=(f.exists()?f.text():\"\");\r\n        f.text(t+line+\"\\n\");\r\n    };\r\n    function mul(con) {\r\n        return con.replace(/\\n/g,\"\\n|\");\r\n    }\r\n    Log.d=function (tag,con) {\r\n        Log.append(new Date()+\": [\"+tag+\"]\"+mul(con));\r\n    };\r\n    Log.e=function (tag,con) {\r\n        Log.append(new Date()+\": ERROR[\"+tag+\"]\"+mul(con));\r\n    };\r\n    return Log;\r\n});\ndefine('WebFS',[\"FS\"],function (FS){return FS.WebFS;});\r\n\ndefine('PathUtil',[\"FS\"],function (FS){return FS.PathUtil;});\r\n\ndefine('extLink',[\"WebSite\",\"UI\",\"PathUtil\",\"Util\",\"assert\"],\r\n        function (WebSite,UI,PathUtil,Util,assert) {\r\n    var exec = (WebSite.isNW? require('child_process').exec : function (){});\r\n    function extLink(href,caption,options) {\r\n        options=options||{};\r\n        var opt=getOpt(href,options);\r\n        //for (var k in options) opt[k]=options[k];\r\n        return UI(\"a\",opt,caption);\r\n    };\r\n    function getOpt(href,options) {\r\n        var p=WebSite.platform;\r\n        options=options||{};\r\n        options.on=options.on||{};\r\n        var afterClick=(options.on && options.on.click) || function(){};\r\n        if (p==\"win32\") {\r\n            options.href=\"javascript:;\";\r\n            options.on.click=ext(\"start\",href,afterClick);\r\n        } else if (p==\"darwin\") {\r\n            options.href=\"javascript:;\";\r\n            options.on.click=ext(\"open\",href,afterClick);\r\n        } else {\r\n            options.href=href;\r\n            options.on.click=afterClick;\r\n            options.target=\"_new\";\r\n        }\r\n        return options;\r\n    }\r\n    function ext(cmd, href,afterClick) {\r\n        return function () {\r\n            exec(cmd+\" \"+href);\r\n            if (afterClick) afterClick();\r\n        };\r\n    }\r\n    extLink.all=function () {\r\n        if (!WebSite.isNW) return;\r\n        $(\"a\").each(function () {\r\n            var head=location.protocol+\"//\"+location.host+\"/\";\r\n            var a=$(this);\r\n            var href=a.attr(\"href\");\r\n            //console.log(\"href\",href);\r\n            if (href.match(/^http/) ) {\r\n                var opt=assert.is( getOpt(href),\r\n                        {href:String,on:{click:Function}} );\r\n                a.attr(\"href\",opt.href);\r\n                a.click(opt.on.click);\r\n            }\r\n        });\r\n    };\r\n    return extLink;\r\n});\r\n\ndefine('DebugDialog',['require','exports','module','UI'],function (require,exports, module) {\r\nconst UI=require(\"UI\");\r\nmodule.exports=class {\r\n    constructor(param) {\r\n        const t=this;\r\n        // desktopEnv,  screenH, onClose\r\n        t.param=param;\r\n        var d=UI(\"div\",{\r\n                id:\"runArea\",\r\n                style:\"text-align : center ;overflow:hidden;\",\r\n                class:\"runArea\"\r\n            },\r\n            [\"iframe\",{\r\n                $var:\"iframe\",id:\"iframe\",src:\"about:blank\",width:465,height:465,\r\n                class:\"tonyu-canvas\",\r\n                style:\" margin-left : auto ; margin-right : auto ;\"\r\n            }]\r\n        );\r\n        t.dom=d;\r\n        t.iframe=d.$vars.iframe;\r\n        t.project=param.ide.project;\r\n    }\r\n    close() {\r\n        this.forceClose=true;\r\n        this.dom.dialog(\"close\");\r\n        this.forceClose=false;\r\n    }\r\n    show(reset) {\r\n        const t=this;\r\n        var d=t.dom;\r\n        var param=t.param;\r\n        var desktopEnv=param.desktopEnv;\r\n        if (reset) desktopEnv.runDialog={};\r\n        t.size=desktopEnv.runDialog||(desktopEnv.runDialog={});\r\n        var size=t.size;\r\n        t.iframe=d.$vars.iframe;\r\n        size.width=size.width||($(window).width()-100)/2-20;\r\n        size.height=size.height||param.screenH-20;\r\n        if (!t.shownOnce || reset) {\r\n            console.log(\"DIag::show\",size);\r\n            d.dialog({\r\n                width:size.width,\r\n                height:size.height,\r\n                position:size.top?\r\n                {\r\n                    my: \"left top\",\r\n                    at: \"left+\"+size.left+\" top+\"+size.top\r\n                }:\r\n                {my:\"right top\",at:\"right-10 bottom+10\",of:$(\"#navBar\")},\r\n                resize:function (e,ngeom) {\r\n                    size.width=d.width();\r\n                    size.height=d.height();\r\n                    t.resizeCanvas(d.width(),d.height());\r\n                    if (ngeom) {\r\n                        size.width=ngeom.size.width;\r\n                        size.height=ngeom.size.height;\r\n                        size.left=ngeom.position.left;\r\n                        size.top=ngeom.position.top;\r\n                        t.modified=true;\r\n                    }\r\n                },\r\n                drag: function (e,ngeom) {\r\n                    if (ngeom) {\r\n                        size.left=ngeom.position.left;\r\n                        size.top=ngeom.position.top;\r\n                        t.modified=true;\r\n                    }\r\n                    t.focusToIframe();\r\n                },\r\n                close:function () {\r\n                    t.opened=false;\r\n                    if (t.param.onClose) t.param.onClose();\r\n                    t.iframe.attr(\"src\",\"about:blank\");\r\n                },\r\n                beforeClose: function () {\r\n                    if (t.forceClose) return true;\r\n                    t.param.ide.stop({closeAfterStop:true});\r\n                    return false;\r\n                },\r\n                focus: function () {\r\n                    console.log(\"fo-casu\");\r\n\r\n                }\r\n            });\r\n            t.titleArea=d.closest(\".ui-widget\").find(\".ui-dialog-title\");\r\n            t.autoReloadCheck=UI(\"input\",{type:\"checkbox\",on:{change}});\r\n            t.titleArea.append(UI(\"span\",t.autoReloadCheck,\"\"));\r\n            d.closest(\".ui-widget\").find(\".ui-dialog-titlebar\").click(()=>t.focusToIframe());\r\n            t.shownOnce=true;\r\n        } else {\r\n            d.dialog();\r\n        }\r\n        t.iframe.attr(\"src\",\"debug.html?prj=\"+param.prj);\r\n        t.opened=true;\r\n        $(\".ui-dialog-titlebar-close\").blur();\r\n        t.focusToIframe();\r\n        t.resizeCanvas(d.width(),d.height());\r\n        console.log(\"Diag\",size);\r\n        function change() {\r\n            try {\r\n                const ch=t.autoReloadCheck.prop(\"checked\");\r\n                //console.log(ch);\r\n                t.iframeGlobals().$Boot.autoReload=ch;\r\n                t.project.startWithAutoReload=ch;\r\n            }catch(e){\r\n                console.log(e);\r\n            }\r\n        }\r\n        /*setInterval(()=>{\r\n            try {\r\n                const ar=t.iframeGlobals().$Boot.autoReload;\r\n                t.autoReloadCheck.prop(\"checked\",!!ar);\r\n                if (ar===true) t.iframeGlobals.$autoReloadWasTrue=ar;\r\n            }catch(e){\r\n                console.log(e);\r\n            }\r\n        },1000);*/\r\n    }\r\n    resizeCanvas(w,h) {\r\n        //console.log(\"canvas size\",w,h);\r\n        this.iframe.attr(\"height\", h).attr(\"width\",w);\r\n        try {\r\n            this.iframeGlobals().$mainCanvas.attr(\"height\", h).attr(\"width\",w);\r\n        }catch(e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    iframeGlobals() {\r\n        return this.iframe[0].contentWindow.Tonyu.globals;\r\n    }\r\n    focusToIframe() {\r\n        try {\r\n            this.iframe[0].contentWindow.focus();\r\n        } catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n};\r\n});\r\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define('BuilderClient4Sys',[],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.TonyuBuilderClient = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\nconst root=require(\"../lib/root\");\r\nconst Worker=root.Worker;\r\nconst WS=require(\"../lib/WorkerServiceB\");\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst FileMap=require(\"../lib/FileMap\");\r\n//const FS=(root.parent && root.parent.FS) || root.FS;\r\nconst FS=root.FS;// TODO\r\n\r\nclass BuilderClient {\r\n    constructor(prj,config) {// dirBased\r\n        this.prj=prj;\r\n        let url=config.worker.url;\r\n        if (!url.match(/^blob/)) url+=\"?\"+Math.random();\r\n        this.w=new WS.Wrapper(new Worker(url));\r\n        this.config=config;\r\n        this.fileMap=new FileMap();\r\n    }\r\n    getOutputFile(...f) {return this.prj.getOutputFile(...f);}\r\n    getDir(){return this.prj.getDir();}\r\n    setDebugger(t) {this.debugger=t;}// t:iframe.contentWindow.Debugger\r\n    exec(srcraw) {\r\n        if (this.debugger) return this.debugger.exec(srcraw);\r\n    }\r\n    convertFromWorkerPath(path) {\r\n        return this.fileMap.convert(path,\"remote\",\"local\");\r\n    }\r\n    exportFiles() {\r\n        const localPrjDir=this.getDir();\r\n        const n2files=this.prj.sourceFiles();\r\n        const exported={base:localPrjDir.path(),data:{}};\r\n        for (var k in n2files) {\r\n            const f=n2files[k];\r\n            exported.data[f.relPath(localPrjDir)]=f.text();\r\n        }\r\n        const opt=this.prj.getOptionsFile();\r\n        exported.data[opt.relPath(localPrjDir)]=opt.text();\r\n        console.log(\"exported\",exported);\r\n        return exported;\r\n    }\r\n    async init() {\r\n        if (this.inited) return;\r\n        const fileMap=this.fileMap;\r\n        const localPrjDir=this.getDir();\r\n        const files=this.exportFiles();\r\n        const ns2depspec=this.config.worker.ns2depspec;\r\n        const {prjDir:remotePrjDir}=await this.w.run(\"compiler/init\",{\r\n            namespace:this.prj.getNamespace(),\r\n            files, ns2depspec\r\n        });\r\n        fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n        const deps=this.prj.getDependingProjects();//TODO recursive\r\n        for (let dep of deps) {\r\n            const ns=dep.getNamespace();\r\n            if (!ns2depspec[ns]) {\r\n                const localPrjDir=dep.getDir();\r\n                const files=localPrjDir.exportAsObject({\r\n                    excludesF: f=>f.ext()!==\".tonyu\" && f.name()!==\"options.json\"\r\n                });\r\n                const {prjDir:remotePrjDir}=await this.w.run(\"compiler/addDependingProject\",{\r\n                    namespace:ns, files\r\n                });\r\n                fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n            }\r\n        }\r\n        this.inited=true;\r\n    }\r\n    resetFiles() {\r\n        if (!this.inited) return this.init();\r\n        const files=this.exportFiles();\r\n        return this.w.run(\"compiler/resetFiles\",{\r\n            //namespace:this.prj.getNamespace(),\r\n            files\r\n        });\r\n    }\r\n    async parse(f,content=false){// use content when check not-yet-saved file\r\n        if (content===false) content=f.text();\r\n        await this.init();\r\n        const filePath=f.relPath(this.getDir());\r\n        const files={};\r\n        files[filePath]=content;\r\n        return await this.w.run(\"compiler/parse\", {files});\r\n    }\r\n    async clean() {// Stands for eclipse \"Clean\" menu.\r\n        await this.resetFiles();\r\n        return await this.fullCompile();\r\n    }\r\n    async fullCompile() {\r\n        try {\r\n            this.partialCompilable=false;\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/fullCompile\");\r\n            console.log(compres);\r\n            const sf=SourceFiles.add(compres);\r\n            await sf.saveAs(this.getOutputFile());\r\n            await this.exec(compres);\r\n            this.partialCompilable=true;\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async partialCompile(f) {\r\n        if (!this.partialCompilable) {\r\n            return await this.clean();\r\n        }\r\n        try {\r\n            const files={};files[f.relPath(this.getDir())]=f.text();\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/postChange\",{files});\r\n            console.log(compres);\r\n            await this.exec(compres);\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async renameClassName(from,to) {\r\n        try {\r\n            await this.init();\r\n            let changed=await this.w.run(\"compiler/renameClassName\",{from,to});\r\n            for (let n in changed) {\r\n                let val=changed[n];\r\n                n=this.convertFromWorkerPath(n);\r\n                if (val==null) {\r\n                    FS.get(n).rm();\r\n                } else {\r\n                    FS.get(n).text(val);\r\n                }\r\n            }\r\n            return changed;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    convertError(e) {\r\n        if (e.isTError) {\r\n            e.src=FS.get(this.convertFromWorkerPath(e.src));\r\n        }\r\n        return e;\r\n    }\r\n    async run() {\r\n        await this.init();\r\n        await this.fullCompile();\r\n        this.getDir().watch(async (e,f)=>{\r\n            console.log(e,f.path());\r\n            if (f.ext()===\".tonyu\") {\r\n                const nsraw=await this.partialCompile(f);\r\n                if (this.config.onCompiled) this.config.onCompiled(nsraw);\r\n\r\n                //if (root.Tonyu.globals.$restart) root.Tonyu.globals.$restart();\r\n            }\r\n        });\r\n    }\r\n}\r\nBuilderClient.SourceFiles=SourceFiles;\r\n//root.TonyuBuilderClient=BuilderClient;\r\nmodule.exports=BuilderClient;\r\n\r\n},{\"../lang/SourceFiles\":4,\"../lib/FileMap\":9,\"../lib/WorkerServiceB\":10,\"../lib/root\":11}],2:[function(require,module,exports){\r\n// Add extra libraries for Tonyu System IDE\r\n//const root=require(\"../lib/root\");\r\nconst BuilderClient=require(\"./BuilderClient\");\r\n\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst ProjectFactory=require(\"../project/ProjectFactory\");\r\nconst CompiledProject=require(\"../project/CompiledProject\");\r\nconst langMod=require(\"../lang/langMod\");\r\nconst StackDecoder=require(\"../lang/StackDecoder\");\r\nconst SourceMap=require(\"../lang/source-map\");\r\nconst DebuggerCore=require(\"../browser/DebuggerCore\");\r\nBuilderClient.SourceFiles=SourceFiles;\r\nBuilderClient.ProjectFactory=ProjectFactory;\r\nBuilderClient.CompiledProject=CompiledProject;\r\nBuilderClient.langMod=langMod;\r\nBuilderClient.StackDecoder=StackDecoder;\r\nBuilderClient.SourceMap=SourceMap;\r\nBuilderClient.DebuggerCore=DebuggerCore;\r\nmodule.exports=BuilderClient;\r\n//root.TonyuBuilderClient=BuilderClient;\r\n\r\n},{\"../browser/DebuggerCore\":3,\"../lang/SourceFiles\":4,\"../lang/StackDecoder\":5,\"../lang/langMod\":6,\"../lang/source-map\":7,\"../project/CompiledProject\":12,\"../project/ProjectFactory\":13,\"./BuilderClient\":1}],3:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n// module.exports:: DI_container -> Debugger\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\n//const ProjectFactory=require(\"../project/ProjectFactory\");\r\nconst CompiledProject=require(\"../project/CompiledProject\");\r\nconst langMod=require(\"../lang/langMod\");\r\nconst StackDecoder=require(\"../lang/StackDecoder\");\r\nconst root=require(\"../lib/root\");\r\nmodule.exports=function ({\r\n    //-- Bundled in BuilderClient4Sys\r\n    /*SourceFiles,\r\n    ProjectFactory:F,\r\n    CompiledProject:CP,\r\n    langMod,\r\n    StackDecoder,*/\r\n    //--\r\n    Tonyu,\r\n}) {//------\r\nif (root.Debugger) return root.Debugger;\r\nconst Events={\r\n    handlers:{},\r\n    getHandler(t) {\r\n        this.handlers[t]=this.handlers[t]||[];\r\n        return this.handlers[t];\r\n    },\r\n    fire(type,evt) {\r\n        try {\r\n            this.getHandler(type).forEach(f=>f(evt));\r\n        } catch(e) {\r\n            if (!evt || !evt.noCatch) Tonyu.onRuntimeError(e);\r\n        }\r\n    },\r\n    on(type,...args) {\r\n        const f=args.pop();\r\n        this.getHandler(type).push(f);\r\n    }\r\n};\r\nroot.Debugger={\r\n    setErrorHandler: function () {\r\n        Tonyu.onRuntimeError=async e=>{\r\n            console.error(e);\r\n            const stack=await StackDecoder.decode(e);\r\n            const evt={error:e, message:e.message,stack,noCatch:true};\r\n            Events.fire(\"runtimeError\",evt);\r\n        };\r\n    },\r\n    init: async function (prj) {\r\n        //Tonyu=Tonyu||_Tonyu;\r\n        this.setErrorHandler();\r\n        Tonyu.globals.$currentProject=prj;\r\n        Tonyu.currentProject=prj;\r\n        Tonyu.globals.$debugger=root.Debugger;\r\n        await prj.loadClasses();\r\n        console.log(\"Loading classes COMPLETE\",Tonyu.ID,Tonyu.classes);\r\n    },\r\n    exec: async function (srcraw) {\r\n        await SourceFiles.add(srcraw).exec();\r\n        Events.fire(\"classChanged\");\r\n    },\r\n    create: function (className) {\r\n        try {\r\n            const klass=Tonyu.getClass(className);\r\n            return new klass();\r\n        }catch(e) {\r\n            Tonyu.onRuntimeError(e);\r\n            //console.error(e);\r\n            //StackDecoder.decode(e);\r\n        }\r\n    },\r\n    on:Events.on.bind(Events)\r\n};\r\ntry {\r\n    //if (root.parent && root.parent.onTonyuDebuggerReady) <- fails CORS\r\n    root.parent.onTonyuDebuggerReady(root.Debugger);\r\n} catch(e) {\r\n    console.log(e);\r\n}\r\nreturn root.Debugger;\r\n};//--------\r\n//});//--- end of define\r\n\r\n},{\"../lang/SourceFiles\":4,\"../lang/StackDecoder\":5,\"../lang/langMod\":6,\"../lib/root\":11,\"../project/CompiledProject\":12}],4:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n/*const root=require(\"root\");*/\r\nconst root=require(\"../lib/root\");\r\nfunction timeout(t) {\r\n    return new Promise(s=>setTimeout(s,t));\r\n}\r\nlet vm;\r\n/*global global*/\r\nif (typeof global!==\"undefined\" && global.require) {\r\n    vm=global.require(\"vm\");\r\n}\r\nclass SourceFile {\r\n    // var text, sourceMap:S.Sourcemap;\r\n    constructor(text, sourceMap) {\r\n        if (typeof text===\"object\") {\r\n            const params=text;\r\n            sourceMap=params.sourceMap;\r\n            //functions=params.functions;\r\n            text=params.text;\r\n            if (params.url) {\r\n                this.url=params.url;\r\n            }\r\n        }\r\n        this.text=text;\r\n        this.sourceMap=sourceMap && sourceMap.toString();\r\n        //this.functions=functions;\r\n    }\r\n    async saveAs(outf) {\r\n        const mapFile=outf.sibling(outf.name()+\".map\");\r\n        let text=this.text;\r\n        //text+=\"\\n//# traceFunctions=\"+JSON.stringify(this.functions);\r\n        if (this.sourceMap) {\r\n            await mapFile.text(this.sourceMap);\r\n            text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n        }\r\n        await outf.text(text);\r\n        //return Promise.resolve();\r\n    }\r\n    exec(options) {\r\n        return new Promise((resolve, reject)=>{\r\n            if (root.window) {\r\n                const document=root.document;\r\n                let u;\r\n                if (this.url) {\r\n                    u=this.url;\r\n                } else {\r\n                    const b=new root.Blob([this.text], {type: 'text/plain'});\r\n                    u=root.URL.createObjectURL(b);\r\n                }\r\n                const s=document.createElement(\"script\");\r\n                console.log(\"load script\",u);\r\n                s.setAttribute(\"src\",u);\r\n                s.addEventListener(\"load\",e=>{\r\n                    resolve(e);\r\n                });\r\n                this.parent.url2SourceFile[u]=this;\r\n                document.body.appendChild(s);\r\n            } else if (options && options.tmpdir){\r\n                const tmpdir=options.tmpdir;\r\n                const uniqFile=tmpdir.rel(Math.random()+\".js\");\r\n                const mapFile=uniqFile.sibling(uniqFile.name()+\".map\");\r\n                let text=this.text;\r\n                text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n                uniqFile.text(text);\r\n                mapFile.text(this.sourceMap);\r\n                //console.log(\"EX\",uniqFile.exists());\r\n                require(uniqFile.path());\r\n                uniqFile.rm();\r\n                mapFile.rm();\r\n                resolve();\r\n            } else if (root.importScripts && this.url){\r\n                root.importScripts(this.url);\r\n                resolve();\r\n            } else {\r\n                const F=Function;\r\n                const f=(vm? vm.compileFunction(this.text) : new F(this.text));\r\n                resolve(f());\r\n            }\r\n        });\r\n    }\r\n    export() {\r\n        return {text:this.text, sourceMap:this.sourceMap, functions:this.functions};\r\n    }\r\n}\r\nclass SourceFiles {\r\n    constructor() {\r\n        this.url2SourceFile={};\r\n    }\r\n    add(text, sourceMap) {\r\n        const sourceFile=new SourceFile(text, sourceMap);\r\n        /*if (sourceFile.functions) for (let k in sourceFile.functions) {\r\n            this.functions[k]=sourceFile;\r\n        }*/\r\n        sourceFile.parent=this;\r\n        return sourceFile;\r\n    }\r\n\r\n}\r\nmodule.exports=new SourceFiles();\r\n//});/*--end of define--*/\r\n\r\n},{\"../lib/root\":11}],5:[function(require,module,exports){\r\nconst S=require(\"./source-map\");\r\nconst StackTrace=require(\"./stacktrace\");\r\nconst SourceFiles=require(\"./SourceFiles\");\r\nmodule.exports={\r\n    async decode(e) {\r\n        try{\r\n            const tr=await StackTrace.fromError(e,{offline:true});\r\n            tr.forEach(t=>{\r\n                try {\r\n                    const sf=SourceFiles.url2SourceFile[t.fileName];\r\n                    //console.log(\"sf\", t.fileName, sf, SourceFiles.url2SourceFile);\r\n                    if (sf) {\r\n                        const opt={\r\n                            line: t.lineNumber, column:t.columnNumber,\r\n                            bias:S.SourceMapConsumer.GREATEST_LOWER_BOUND\r\n                        };\r\n                        const pos=this.originalPositionFor(sf,opt);\r\n                        console.log(\"pos\",opt,pos);\r\n                        if (pos.source) t.fileName=pos.source;\r\n                        if (pos.line) t.lineNumber=pos.line;\r\n                        if (pos.column) t.columnNumber=pos.column;\r\n                    }\r\n                }catch(ex) {\r\n                    console.log(\"Sourcemap error\",ex);\r\n                }\r\n            });\r\n            console.log(\"Converted: \",tr);\r\n            return tr;\r\n        } catch(ex) {\r\n            console.log(\"StackTrace error\",ex);\r\n            if (!e || !e.stack) {\r\n                console.log(\"HennaError\",e);\r\n                return [];\r\n            }\r\n            return e.stack.split(\"\\n\");\r\n        }\r\n    },\r\n    originalPositionFor(sf,opt) {\r\n        const s=this.getSourceMapConsumer(sf);\r\n        if (!s) return opt;\r\n        return s.originalPositionFor(opt);\r\n    },\r\n    getSourceMapConsumer(sf) {\r\n        if (sf.sourceMapConsumer) return sf.sourceMapConsumer;\r\n        sf.sourceMapConsumer=new S.SourceMapConsumer(JSON.parse(sf.sourceMap));\r\n        //console.log(this.sourceMapConsumer);\r\n        return sf.sourceMapConsumer;\r\n    }\r\n};\r\n\r\n},{\"./SourceFiles\":4,\"./source-map\":7,\"./stacktrace\":8}],6:[function(require,module,exports){\r\n    module.exports={\r\n        getNamespace: function () {//override\r\n            var opt=this.getOptions();\r\n            if (opt.compiler && opt.compiler.namespace) return opt.compiler.namespace;\r\n            throw new Error(\"Namespace is not set\");\r\n        },\r\n        async loadDependingClasses() {\r\n            const myNsp=this.getNamespace();\r\n            for (let p of this.getDependingProjects()) {\r\n                if (p.getNamespace()===myNsp) continue;\r\n                await p.loadClasses();\r\n            }\r\n        },\r\n        getEXT() {return \".tonyu\";}\r\n        // loadClasses: stub\r\n    };\r\n\r\n},{}],7:[function(require,module,exports){\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine(\"source-map\",[], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"sourceMap\"] = factory();\r\n\telse\r\n\t\troot[\"sourceMap\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId])\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\texports: {},\r\n/******/ \t\t\tid: moduleId,\r\n/******/ \t\t\tloaded: false\r\n/******/ \t\t};\r\n\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.loaded = true;\r\n\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n\r\n\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/*\r\n\t* Copyright 2009-2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE.txt or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\texports.SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\texports.SourceMapConsumer = __webpack_require__(7).SourceMapConsumer;\r\n\texports.SourceNode = __webpack_require__(10).SourceNode;\r\n\r\n\r\n/***/ },\r\n/* 1 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar util = __webpack_require__(4);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar MappingList = __webpack_require__(6).MappingList;\r\n\r\n\t/**\r\n\t* An instance of the SourceMapGenerator represents a source map which is\r\n\t* being built incrementally. You may pass an object with the following\r\n\t* properties:\r\n\t*\r\n\t*   - file: The filename of the generated source.\r\n\t*   - sourceRoot: A root for all relative URLs in this source map.\r\n\t*/\r\n\tfunction SourceMapGenerator(aArgs) {\r\n\t\tif (!aArgs) {\r\n\t\taArgs = {};\r\n\t\t}\r\n\t\tthis._file = util.getArg(aArgs, 'file', null);\r\n\t\tthis._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\r\n\t\tthis._skipValidation = util.getArg(aArgs, 'skipValidation', false);\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\t\tthis._mappings = new MappingList();\r\n\t\tthis._sourcesContents = null;\r\n\t}\r\n\r\n\tSourceMapGenerator.prototype._version = 3;\r\n\r\n\t/**\r\n\t* Creates a new SourceMapGenerator based on a SourceMapConsumer\r\n\t*\r\n\t* @param aSourceMapConsumer The SourceMap.\r\n\t*/\r\n\tSourceMapGenerator.fromSourceMap =\r\n\t\tfunction SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\r\n\t\tvar sourceRoot = aSourceMapConsumer.sourceRoot;\r\n\t\tvar generator = new SourceMapGenerator({\r\n\t\t\tfile: aSourceMapConsumer.file,\r\n\t\t\tsourceRoot: sourceRoot\r\n\t\t});\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tvar newMapping = {\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: mapping.generatedLine,\r\n\t\t\t\tcolumn: mapping.generatedColumn\r\n\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tnewMapping.source = mapping.source;\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tnewMapping.source = util.relative(sourceRoot, newMapping.source);\r\n\t\t\t}\r\n\r\n\t\t\tnewMapping.original = {\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnewMapping.name = mapping.name;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgenerator.addMapping(newMapping);\r\n\t\t});\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tgenerator.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn generator;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a single mapping from original source line and column to the generated\r\n\t* source's line and column for this source map being created. The mapping\r\n\t* object should have the following properties:\r\n\t*\r\n\t*   - generated: An object with the generated line and column positions.\r\n\t*   - original: An object with the original line and column positions.\r\n\t*   - source: The original source file (relative to the sourceRoot).\r\n\t*   - name: An optional original token name for this mapping.\r\n\t*/\r\n\tSourceMapGenerator.prototype.addMapping =\r\n\t\tfunction SourceMapGenerator_addMapping(aArgs) {\r\n\t\tvar generated = util.getArg(aArgs, 'generated');\r\n\t\tvar original = util.getArg(aArgs, 'original', null);\r\n\t\tvar source = util.getArg(aArgs, 'source', null);\r\n\t\tvar name = util.getArg(aArgs, 'name', null);\r\n\r\n\t\tif (!this._skipValidation) {\r\n\t\t\tthis._validateMapping(generated, original, source, name);\r\n\t\t}\r\n\r\n\t\tif (source != null) {\r\n\t\t\tsource = String(source);\r\n\t\t\tif (!this._sources.has(source)) {\r\n\t\t\tthis._sources.add(source);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (name != null) {\r\n\t\t\tname = String(name);\r\n\t\t\tif (!this._names.has(name)) {\r\n\t\t\tthis._names.add(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mappings.add({\r\n\t\t\tgeneratedLine: generated.line,\r\n\t\t\tgeneratedColumn: generated.column,\r\n\t\t\toriginalLine: original != null && original.line,\r\n\t\t\toriginalColumn: original != null && original.column,\r\n\t\t\tsource: source,\r\n\t\t\tname: name\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file.\r\n\t*/\r\n\tSourceMapGenerator.prototype.setSourceContent =\r\n\t\tfunction SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tvar source = aSourceFile;\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tsource = util.relative(this._sourceRoot, source);\r\n\t\t}\r\n\r\n\t\tif (aSourceContent != null) {\r\n\t\t\t// Add the source content to the _sourcesContents map.\r\n\t\t\t// Create a new _sourcesContents map if the property is null.\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\tthis._sourcesContents = Object.create(null);\r\n\t\t\t}\r\n\t\t\tthis._sourcesContents[util.toSetString(source)] = aSourceContent;\r\n\t\t} else if (this._sourcesContents) {\r\n\t\t\t// Remove the source file from the _sourcesContents map.\r\n\t\t\t// If the _sourcesContents map is empty, set the property to null.\r\n\t\t\tdelete this._sourcesContents[util.toSetString(source)];\r\n\t\t\tif (Object.keys(this._sourcesContents).length === 0) {\r\n\t\t\tthis._sourcesContents = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Applies the mappings of a sub-source-map for a specific source file to the\r\n\t* source map being generated. Each mapping to the supplied source file is\r\n\t* rewritten using the supplied source map. Note: The resolution for the\r\n\t* resulting mappings is the minimium of this map and the supplied map.\r\n\t*\r\n\t* @param aSourceMapConsumer The source map to be applied.\r\n\t* @param aSourceFile Optional. The filename of the source file.\r\n\t*        If omitted, SourceMapConsumer's file property will be used.\r\n\t* @param aSourceMapPath Optional. The dirname of the path to the source map\r\n\t*        to be applied. If relative, it is relative to the SourceMapConsumer.\r\n\t*        This parameter is needed when the two source maps aren't in the same\r\n\t*        directory, and the source map to be applied contains relative source\r\n\t*        paths. If so, those relative source paths need to be rewritten\r\n\t*        relative to the SourceMapGenerator.\r\n\t*/\r\n\tSourceMapGenerator.prototype.applySourceMap =\r\n\t\tfunction SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\r\n\t\tvar sourceFile = aSourceFile;\r\n\t\t// If aSourceFile is omitted, we will use the file property of the SourceMap\r\n\t\tif (aSourceFile == null) {\r\n\t\t\tif (aSourceMapConsumer.file == null) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\r\n\t\t\t\t'or the source map\\'s \"file\" property. Both were omitted.'\r\n\t\t\t);\r\n\t\t\t}\r\n\t\t\tsourceFile = aSourceMapConsumer.file;\r\n\t\t}\r\n\t\tvar sourceRoot = this._sourceRoot;\r\n\t\t// Make \"sourceFile\" relative if an absolute Url is passed.\r\n\t\tif (sourceRoot != null) {\r\n\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t}\r\n\t\t// Applying the SourceMap can add and remove items from the sources and\r\n\t\t// the names array.\r\n\t\tvar newSources = new ArraySet();\r\n\t\tvar newNames = new ArraySet();\r\n\r\n\t\t// Find mappings for the \"sourceFile\"\r\n\t\tthis._mappings.unsortedForEach(function (mapping) {\r\n\t\t\tif (mapping.source === sourceFile && mapping.originalLine != null) {\r\n\t\t\t// Check if it can be mapped by the source map, then update the mapping.\r\n\t\t\tvar original = aSourceMapConsumer.originalPositionFor({\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t});\r\n\t\t\tif (original.source != null) {\r\n\t\t\t\t// Copy mapping\r\n\t\t\t\tmapping.source = original.source;\r\n\t\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tmapping.source = util.join(aSourceMapPath, mapping.source)\r\n\t\t\t\t}\r\n\t\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tmapping.source = util.relative(sourceRoot, mapping.source);\r\n\t\t\t\t}\r\n\t\t\t\tmapping.originalLine = original.line;\r\n\t\t\t\tmapping.originalColumn = original.column;\r\n\t\t\t\tif (original.name != null) {\r\n\t\t\t\tmapping.name = original.name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar source = mapping.source;\r\n\t\t\tif (source != null && !newSources.has(source)) {\r\n\t\t\tnewSources.add(source);\r\n\t\t\t}\r\n\r\n\t\t\tvar name = mapping.name;\r\n\t\t\tif (name != null && !newNames.has(name)) {\r\n\t\t\tnewNames.add(name);\r\n\t\t\t}\r\n\r\n\t\t}, this);\r\n\t\tthis._sources = newSources;\r\n\t\tthis._names = newNames;\r\n\r\n\t\t// Copy sourcesContents of applied map.\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tsourceFile = util.join(aSourceMapPath, sourceFile);\r\n\t\t\t}\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t\t}\r\n\t\t\tthis.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* A mapping can have one of the three levels of data:\r\n\t*\r\n\t*   1. Just the generated position.\r\n\t*   2. The Generated position, original position, and original source.\r\n\t*   3. Generated and original position, original source, as well as a name\r\n\t*      token.\r\n\t*\r\n\t* To maintain consistency, we validate that any new mapping being added falls\r\n\t* in to one of these categories.\r\n\t*/\r\n\tSourceMapGenerator.prototype._validateMapping =\r\n\t\tfunction SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taName) {\r\n\t\tif (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t&& !aOriginal && !aSource && !aName) {\r\n\t\t\t// Case 1.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t\t&& aOriginal && 'line' in aOriginal && 'column' in aOriginal\r\n\t\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t\t&& aOriginal.line > 0 && aOriginal.column >= 0\r\n\t\t\t\t&& aSource) {\r\n\t\t\t// Cases 2 and 3.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('Invalid mapping: ' + JSON.stringify({\r\n\t\t\tgenerated: aGenerated,\r\n\t\t\tsource: aSource,\r\n\t\t\toriginal: aOriginal,\r\n\t\t\tname: aName\r\n\t\t\t}));\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Serialize the accumulated mappings in to the stream of base 64 VLQs\r\n\t* specified by the source map format.\r\n\t*/\r\n\tSourceMapGenerator.prototype._serializeMappings =\r\n\t\tfunction SourceMapGenerator_serializeMappings() {\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousGeneratedLine = 1;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar result = '';\r\n\t\tvar next;\r\n\t\tvar mapping;\r\n\t\tvar nameIdx;\r\n\t\tvar sourceIdx;\r\n\r\n\t\tvar mappings = this._mappings.toArray();\r\n\t\tfor (var i = 0, len = mappings.length; i < len; i++) {\r\n\t\t\tmapping = mappings[i];\r\n\t\t\tnext = ''\r\n\r\n\t\t\tif (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\twhile (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\t\tnext += ';';\r\n\t\t\t\tpreviousGeneratedLine++;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tif (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tnext += ',';\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.generatedColumn\r\n\t\t\t\t\t\t\t\t\t- previousGeneratedColumn);\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tsourceIdx = this._sources.indexOf(mapping.source);\r\n\t\t\tnext += base64VLQ.encode(sourceIdx - previousSource);\r\n\t\t\tpreviousSource = sourceIdx;\r\n\r\n\t\t\t// lines are stored 0-based in SourceMap spec version 3\r\n\t\t\tnext += base64VLQ.encode(mapping.originalLine - 1\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalLine);\r\n\t\t\tpreviousOriginalLine = mapping.originalLine - 1;\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.originalColumn\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalColumn);\r\n\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnameIdx = this._names.indexOf(mapping.name);\r\n\t\t\t\tnext += base64VLQ.encode(nameIdx - previousName);\r\n\t\t\t\tpreviousName = nameIdx;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult += next;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t\t};\r\n\r\n\tSourceMapGenerator.prototype._generateSourcesContent =\r\n\t\tfunction SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\r\n\t\treturn aSources.map(function (source) {\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (aSourceRoot != null) {\r\n\t\t\tsource = util.relative(aSourceRoot, source);\r\n\t\t\t}\r\n\t\t\tvar key = util.toSetString(source);\r\n\t\t\treturn Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\r\n\t\t\t? this._sourcesContents[key]\r\n\t\t\t: null;\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Externalize the source map.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toJSON =\r\n\t\tfunction SourceMapGenerator_toJSON() {\r\n\t\tvar map = {\r\n\t\t\tversion: this._version,\r\n\t\t\tsources: this._sources.toArray(),\r\n\t\t\tnames: this._names.toArray(),\r\n\t\t\tmappings: this._serializeMappings()\r\n\t\t};\r\n\t\tif (this._file != null) {\r\n\t\t\tmap.file = this._file;\r\n\t\t}\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tmap.sourceRoot = this._sourceRoot;\r\n\t\t}\r\n\t\tif (this._sourcesContents) {\r\n\t\t\tmap.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Render the source map being generated to a string.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toString =\r\n\t\tfunction SourceMapGenerator_toString() {\r\n\t\treturn JSON.stringify(this.toJSON());\r\n\t\t};\r\n\r\n\texports.SourceMapGenerator = SourceMapGenerator;\r\n\r\n\r\n/***/ },\r\n/* 2 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*\r\n\t* Based on the Base 64 VLQ implementation in Closure Compiler:\r\n\t* https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\r\n\t*\r\n\t* Copyright 2011 The Closure Compiler Authors. All rights reserved.\r\n\t* Redistribution and use in source and binary forms, with or without\r\n\t* modification, are permitted provided that the following conditions are\r\n\t* met:\r\n\t*\r\n\t*  * Redistributions of source code must retain the above copyright\r\n\t*    notice, this list of conditions and the following disclaimer.\r\n\t*  * Redistributions in binary form must reproduce the above\r\n\t*    copyright notice, this list of conditions and the following\r\n\t*    disclaimer in the documentation and/or other materials provided\r\n\t*    with the distribution.\r\n\t*  * Neither the name of Google Inc. nor the names of its\r\n\t*    contributors may be used to endorse or promote products derived\r\n\t*    from this software without specific prior written permission.\r\n\t*\r\n\t* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n\t* \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n\t* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n\t* A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n\t* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n\t* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n\t* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n\t* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n\t* THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n\t* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n\t* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t*/\r\n\r\n\tvar base64 = __webpack_require__(3);\r\n\r\n\t// A single base 64 digit can contain 6 bits of data. For the base 64 variable\r\n\t// length quantities we use in the source map spec, the first bit is the sign,\r\n\t// the next four bits are the actual value, and the 6th bit is the\r\n\t// continuation bit. The continuation bit tells us whether there are more\r\n\t// digits in this value following this digit.\r\n\t//\r\n\t//   Continuation\r\n\t//   |    Sign\r\n\t//   |    |\r\n\t//   V    V\r\n\t//   101011\r\n\r\n\tvar VLQ_BASE_SHIFT = 5;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\r\n\r\n\t// binary: 011111\r\n\tvar VLQ_BASE_MASK = VLQ_BASE - 1;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_CONTINUATION_BIT = VLQ_BASE;\r\n\r\n\t/**\r\n\t* Converts from a two-complement value to a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\r\n\t*   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\r\n\t*/\r\n\tfunction toVLQSigned(aValue) {\r\n\t\treturn aValue < 0\r\n\t\t? ((-aValue) << 1) + 1\r\n\t\t: (aValue << 1) + 0;\r\n\t}\r\n\r\n\t/**\r\n\t* Converts to a two-complement value from a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\r\n\t*   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\r\n\t*/\r\n\tfunction fromVLQSigned(aValue) {\r\n\t\tvar isNegative = (aValue & 1) === 1;\r\n\t\tvar shifted = aValue >> 1;\r\n\t\treturn isNegative\r\n\t\t? -shifted\r\n\t\t: shifted;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the base 64 VLQ encoded value.\r\n\t*/\r\n\texports.encode = function base64VLQ_encode(aValue) {\r\n\t\tvar encoded = \"\";\r\n\t\tvar digit;\r\n\r\n\t\tvar vlq = toVLQSigned(aValue);\r\n\r\n\t\tdo {\r\n\t\tdigit = vlq & VLQ_BASE_MASK;\r\n\t\tvlq >>>= VLQ_BASE_SHIFT;\r\n\t\tif (vlq > 0) {\r\n\t\t\t// There are still more digits in this value, so we must make sure the\r\n\t\t\t// continuation bit is marked.\r\n\t\t\tdigit |= VLQ_CONTINUATION_BIT;\r\n\t\t}\r\n\t\tencoded += base64.encode(digit);\r\n\t\t} while (vlq > 0);\r\n\r\n\t\treturn encoded;\r\n\t};\r\n\r\n\t/**\r\n\t* Decodes the next base 64 VLQ value from the given string and returns the\r\n\t* value and the rest of the string via the out parameter.\r\n\t*/\r\n\texports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\r\n\t\tvar strLen = aStr.length;\r\n\t\tvar result = 0;\r\n\t\tvar shift = 0;\r\n\t\tvar continuation, digit;\r\n\r\n\t\tdo {\r\n\t\tif (aIndex >= strLen) {\r\n\t\t\tthrow new Error(\"Expected more digits in base 64 VLQ value.\");\r\n\t\t}\r\n\r\n\t\tdigit = base64.decode(aStr.charCodeAt(aIndex++));\r\n\t\tif (digit === -1) {\r\n\t\t\tthrow new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\r\n\t\t}\r\n\r\n\t\tcontinuation = !!(digit & VLQ_CONTINUATION_BIT);\r\n\t\tdigit &= VLQ_BASE_MASK;\r\n\t\tresult = result + (digit << shift);\r\n\t\tshift += VLQ_BASE_SHIFT;\r\n\t\t} while (continuation);\r\n\r\n\t\taOutParam.value = fromVLQSigned(result);\r\n\t\taOutParam.rest = aIndex;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 3 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\r\n\r\n\t/**\r\n\t* Encode an integer in the range of 0 to 63 to a single base 64 digit.\r\n\t*/\r\n\texports.encode = function (number) {\r\n\t\tif (0 <= number && number < intToCharMap.length) {\r\n\t\treturn intToCharMap[number];\r\n\t\t}\r\n\t\tthrow new TypeError(\"Must be between 0 and 63: \" + number);\r\n\t};\r\n\r\n\t/**\r\n\t* Decode a single base 64 character code digit to an integer. Returns -1 on\r\n\t* failure.\r\n\t*/\r\n\texports.decode = function (charCode) {\r\n\t\tvar bigA = 65;     // 'A'\r\n\t\tvar bigZ = 90;     // 'Z'\r\n\r\n\t\tvar littleA = 97;  // 'a'\r\n\t\tvar littleZ = 122; // 'z'\r\n\r\n\t\tvar zero = 48;     // '0'\r\n\t\tvar nine = 57;     // '9'\r\n\r\n\t\tvar plus = 43;     // '+'\r\n\t\tvar slash = 47;    // '/'\r\n\r\n\t\tvar littleOffset = 26;\r\n\t\tvar numberOffset = 52;\r\n\r\n\t\t// 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\r\n\t\tif (bigA <= charCode && charCode <= bigZ) {\r\n\t\treturn (charCode - bigA);\r\n\t\t}\r\n\r\n\t\t// 26 - 51: abcdefghijklmnopqrstuvwxyz\r\n\t\tif (littleA <= charCode && charCode <= littleZ) {\r\n\t\treturn (charCode - littleA + littleOffset);\r\n\t\t}\r\n\r\n\t\t// 52 - 61: 0123456789\r\n\t\tif (zero <= charCode && charCode <= nine) {\r\n\t\treturn (charCode - zero + numberOffset);\r\n\t\t}\r\n\r\n\t\t// 62: +\r\n\t\tif (charCode == plus) {\r\n\t\treturn 62;\r\n\t\t}\r\n\r\n\t\t// 63: /\r\n\t\tif (charCode == slash) {\r\n\t\treturn 63;\r\n\t\t}\r\n\r\n\t\t// Invalid base64 digit.\r\n\t\treturn -1;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 4 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t/**\r\n\t* This is a helper function for getting values from parameter/options\r\n\t* objects.\r\n\t*\r\n\t* @param args The object we are extracting values from\r\n\t* @param name The name of the property we are getting.\r\n\t* @param defaultValue An optional value to return if the property is missing\r\n\t* from the object. If this is not specified and the property is missing, an\r\n\t* error will be thrown.\r\n\t*/\r\n\tfunction getArg(aArgs, aName, aDefaultValue) {\r\n\t\tif (aName in aArgs) {\r\n\t\treturn aArgs[aName];\r\n\t\t} else if (arguments.length === 3) {\r\n\t\treturn aDefaultValue;\r\n\t\t} else {\r\n\t\tthrow new Error('\"' + aName + '\" is a required argument.');\r\n\t\t}\r\n\t}\r\n\texports.getArg = getArg;\r\n\r\n\tvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\r\n\tvar dataUrlRegexp = /^data:.+\\,.+$/;\r\n\r\n\tfunction urlParse(aUrl) {\r\n\t\tvar match = aUrl.match(urlRegexp);\r\n\t\tif (!match) {\r\n\t\treturn null;\r\n\t\t}\r\n\t\treturn {\r\n\t\tscheme: match[1],\r\n\t\tauth: match[2],\r\n\t\thost: match[3],\r\n\t\tport: match[4],\r\n\t\tpath: match[5]\r\n\t\t};\r\n\t}\r\n\texports.urlParse = urlParse;\r\n\r\n\tfunction urlGenerate(aParsedUrl) {\r\n\t\tvar url = '';\r\n\t\tif (aParsedUrl.scheme) {\r\n\t\turl += aParsedUrl.scheme + ':';\r\n\t\t}\r\n\t\turl += '//';\r\n\t\tif (aParsedUrl.auth) {\r\n\t\turl += aParsedUrl.auth + '@';\r\n\t\t}\r\n\t\tif (aParsedUrl.host) {\r\n\t\turl += aParsedUrl.host;\r\n\t\t}\r\n\t\tif (aParsedUrl.port) {\r\n\t\turl += \":\" + aParsedUrl.port\r\n\t\t}\r\n\t\tif (aParsedUrl.path) {\r\n\t\turl += aParsedUrl.path;\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\texports.urlGenerate = urlGenerate;\r\n\r\n\t/**\r\n\t* Normalizes a path, or the path portion of a URL:\r\n\t*\r\n\t* - Replaces consequtive slashes with one slash.\r\n\t* - Removes unnecessary '.' parts.\r\n\t* - Removes unnecessary '<dir>/..' parts.\r\n\t*\r\n\t* Based on code in the Node.js 'path' core module.\r\n\t*\r\n\t* @param aPath The path or url to normalize.\r\n\t*/\r\n\tfunction normalize(aPath) {\r\n\t\tvar path = aPath;\r\n\t\tvar url = urlParse(aPath);\r\n\t\tif (url) {\r\n\t\tif (!url.path) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\t\tpath = url.path;\r\n\t\t}\r\n\t\tvar isAbsolute = exports.isAbsolute(path);\r\n\r\n\t\tvar parts = path.split(/\\/+/);\r\n\t\tfor (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\r\n\t\tpart = parts[i];\r\n\t\tif (part === '.') {\r\n\t\t\tparts.splice(i, 1);\r\n\t\t} else if (part === '..') {\r\n\t\t\tup++;\r\n\t\t} else if (up > 0) {\r\n\t\t\tif (part === '') {\r\n\t\t\t// The first part is blank if the path is absolute. Trying to go\r\n\t\t\t// above the root is a no-op. Therefore we can remove all '..' parts\r\n\t\t\t// directly after the root.\r\n\t\t\tparts.splice(i + 1, up);\r\n\t\t\tup = 0;\r\n\t\t\t} else {\r\n\t\t\tparts.splice(i, 2);\r\n\t\t\tup--;\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t\tpath = parts.join('/');\r\n\r\n\t\tif (path === '') {\r\n\t\tpath = isAbsolute ? '/' : '.';\r\n\t\t}\r\n\r\n\t\tif (url) {\r\n\t\turl.path = path;\r\n\t\treturn urlGenerate(url);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\texports.normalize = normalize;\r\n\r\n\t/**\r\n\t* Joins two paths/URLs.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be joined with the root.\r\n\t*\r\n\t* - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\r\n\t*   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\r\n\t*   first.\r\n\t* - Otherwise aPath is a path. If aRoot is a URL, then its path portion\r\n\t*   is updated with the result and aRoot is returned. Otherwise the result\r\n\t*   is returned.\r\n\t*   - If aPath is absolute, the result is aPath.\r\n\t*   - Otherwise the two paths are joined with a slash.\r\n\t* - Joining for example 'http://' and 'www.example.com' is also supported.\r\n\t*/\r\n\tfunction join(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\t\tif (aPath === \"\") {\r\n\t\taPath = \".\";\r\n\t\t}\r\n\t\tvar aPathUrl = urlParse(aPath);\r\n\t\tvar aRootUrl = urlParse(aRoot);\r\n\t\tif (aRootUrl) {\r\n\t\taRoot = aRootUrl.path || '/';\r\n\t\t}\r\n\r\n\t\t// `join(foo, '//www.example.org')`\r\n\t\tif (aPathUrl && !aPathUrl.scheme) {\r\n\t\tif (aRootUrl) {\r\n\t\t\taPathUrl.scheme = aRootUrl.scheme;\r\n\t\t}\r\n\t\treturn urlGenerate(aPathUrl);\r\n\t\t}\r\n\r\n\t\tif (aPathUrl || aPath.match(dataUrlRegexp)) {\r\n\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// `join('http://', 'www.example.com')`\r\n\t\tif (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\r\n\t\taRootUrl.host = aPath;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\r\n\t\tvar joined = aPath.charAt(0) === '/'\r\n\t\t? aPath\r\n\t\t: normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\r\n\r\n\t\tif (aRootUrl) {\r\n\t\taRootUrl.path = joined;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\t\treturn joined;\r\n\t}\r\n\texports.join = join;\r\n\r\n\texports.isAbsolute = function (aPath) {\r\n\t\treturn aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\r\n\t};\r\n\r\n\t/**\r\n\t* Make a path relative to a URL or another path.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be made relative to aRoot.\r\n\t*/\r\n\tfunction relative(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\r\n\t\taRoot = aRoot.replace(/\\/$/, '');\r\n\r\n\t\t// It is possible for the path to be above the root. In this case, simply\r\n\t\t// checking whether the root is a prefix of the path won't work. Instead, we\r\n\t\t// need to remove components from the root one by one, until either we find\r\n\t\t// a prefix that fits, or we run out of components to remove.\r\n\t\tvar level = 0;\r\n\t\twhile (aPath.indexOf(aRoot + '/') !== 0) {\r\n\t\tvar index = aRoot.lastIndexOf(\"/\");\r\n\t\tif (index < 0) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// If the only part of the root that is left is the scheme (i.e. http://,\r\n\t\t// file:///, etc.), one or more slashes (/), or simply nothing at all, we\r\n\t\t// have exhausted all components, so the path is not relative to the root.\r\n\t\taRoot = aRoot.slice(0, index);\r\n\t\tif (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t++level;\r\n\t\t}\r\n\r\n\t\t// Make sure we add a \"../\" for each component we removed from the root.\r\n\t\treturn Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\r\n\t}\r\n\texports.relative = relative;\r\n\r\n\tvar supportsNullProto = (function () {\r\n\t\tvar obj = Object.create(null);\r\n\t\treturn !('__proto__' in obj);\r\n\t}());\r\n\r\n\tfunction identity (s) {\r\n\t\treturn s;\r\n\t}\r\n\r\n\t/**\r\n\t* Because behavior goes wacky when you set `__proto__` on objects, we\r\n\t* have to prefix all the strings in our set with an arbitrary character.\r\n\t*\r\n\t* See https://github.com/mozilla/source-map/pull/31 and\r\n\t* https://github.com/mozilla/source-map/issues/30\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tfunction toSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn '$' + aStr;\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.toSetString = supportsNullProto ? identity : toSetString;\r\n\r\n\tfunction fromSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn aStr.slice(1);\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.fromSetString = supportsNullProto ? identity : fromSetString;\r\n\r\n\tfunction isProtoString(s) {\r\n\t\tif (!s) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar length = s.length;\r\n\r\n\t\tif (length < 9 /* \"__proto__\".length */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 2) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 3) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 4) !== 116 /* 't' */ ||\r\n\t\t\ts.charCodeAt(length - 5) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 6) !== 114 /* 'r' */ ||\r\n\t\t\ts.charCodeAt(length - 7) !== 112 /* 'p' */ ||\r\n\t\t\ts.charCodeAt(length - 8) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 9) !== 95  /* '_' */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor (var i = length - 10; i >= 0; i--) {\r\n\t\tif (s.charCodeAt(i) !== 36 /* '$' */) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings where the original positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same original source/line/column, but different generated\r\n\t* line and column the same. Useful when searching for a mapping with a\r\n\t* stubbed out mapping.\r\n\t*/\r\n\tfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\r\n\t\tvar cmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0 || onlyCompareOriginal) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByOriginalPositions = compareByOriginalPositions;\r\n\r\n\t/**\r\n\t* Comparator between two mappings with deflated source and name indices where\r\n\t* the generated positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same generated line and column, but different\r\n\t* source/name/original line and column the same. Useful when searching for a\r\n\t* mapping with a stubbed out mapping.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0 || onlyCompareGenerated) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\r\n\r\n\tfunction strcmp(aStr1, aStr2) {\r\n\t\tif (aStr1 === aStr2) {\r\n\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif (aStr1 > aStr2) {\r\n\t\treturn 1;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings with inflated source and name strings where\r\n\t* the generated positions are compared.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = strcmp(mappingA.source, mappingB.source);\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn strcmp(mappingA.name, mappingB.name);\r\n\t}\r\n\texports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\r\n\r\n\r\n/***/ },\r\n/* 5 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar has = Object.prototype.hasOwnProperty;\r\n\r\n\t/**\r\n\t* A data structure which is a combination of an array and a set. Adding a new\r\n\t* member is O(1), testing for membership is O(1), and finding the index of an\r\n\t* element is O(1). Removing elements from the set is not supported. Only\r\n\t* strings are supported for membership.\r\n\t*/\r\n\tfunction ArraySet() {\r\n\t\tthis._array = [];\r\n\t\tthis._set = Object.create(null);\r\n\t}\r\n\r\n\t/**\r\n\t* Static method for creating ArraySet instances from an existing array.\r\n\t*/\r\n\tArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\r\n\t\tvar set = new ArraySet();\r\n\t\tfor (var i = 0, len = aArray.length; i < len; i++) {\r\n\t\tset.add(aArray[i], aAllowDuplicates);\r\n\t\t}\r\n\t\treturn set;\r\n\t};\r\n\r\n\t/**\r\n\t* Return how many unique items are in this ArraySet. If duplicates have been\r\n\t* added, than those do not count towards the size.\r\n\t*\r\n\t* @returns Number\r\n\t*/\r\n\tArraySet.prototype.size = function ArraySet_size() {\r\n\t\treturn Object.getOwnPropertyNames(this._set).length;\r\n\t};\r\n\r\n\t/**\r\n\t* Add the given string to this set.\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tvar isDuplicate = has.call(this._set, sStr);\r\n\t\tvar idx = this._array.length;\r\n\t\tif (!isDuplicate || aAllowDuplicates) {\r\n\t\tthis._array.push(aStr);\r\n\t\t}\r\n\t\tif (!isDuplicate) {\r\n\t\tthis._set[sStr] = idx;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Is the given string a member of this set?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.has = function ArraySet_has(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\treturn has.call(this._set, sStr);\r\n\t};\r\n\r\n\t/**\r\n\t* What is the index of the given string in the array?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tif (has.call(this._set, sStr)) {\r\n\t\treturn this._set[sStr];\r\n\t\t}\r\n\t\tthrow new Error('\"' + aStr + '\" is not in the set.');\r\n\t};\r\n\r\n\t/**\r\n\t* What is the element at the given index?\r\n\t*\r\n\t* @param Number aIdx\r\n\t*/\r\n\tArraySet.prototype.at = function ArraySet_at(aIdx) {\r\n\t\tif (aIdx >= 0 && aIdx < this._array.length) {\r\n\t\treturn this._array[aIdx];\r\n\t\t}\r\n\t\tthrow new Error('No element indexed by ' + aIdx);\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the array representation of this set (which has the proper indices\r\n\t* indicated by indexOf). Note that this is a copy of the internal array used\r\n\t* for storing the members so that no one can mess with internal state.\r\n\t*/\r\n\tArraySet.prototype.toArray = function ArraySet_toArray() {\r\n\t\treturn this._array.slice();\r\n\t};\r\n\r\n\texports.ArraySet = ArraySet;\r\n\r\n\r\n/***/ },\r\n/* 6 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2014 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t/**\r\n\t* Determine whether mappingB is after mappingA with respect to generated\r\n\t* position.\r\n\t*/\r\n\tfunction generatedPositionAfter(mappingA, mappingB) {\r\n\t\t// Optimized for most common case\r\n\t\tvar lineA = mappingA.generatedLine;\r\n\t\tvar lineB = mappingB.generatedLine;\r\n\t\tvar columnA = mappingA.generatedColumn;\r\n\t\tvar columnB = mappingB.generatedColumn;\r\n\t\treturn lineB > lineA || lineB == lineA && columnB >= columnA ||\r\n\t\t\tutil.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\r\n\t}\r\n\r\n\t/**\r\n\t* A data structure to provide a sorted view of accumulated mappings in a\r\n\t* performance conscious manner. It trades a neglibable overhead in general\r\n\t* case for a large speedup in case of mappings being added in order.\r\n\t*/\r\n\tfunction MappingList() {\r\n\t\tthis._array = [];\r\n\t\tthis._sorted = true;\r\n\t\t// Serves as infimum\r\n\t\tthis._last = {generatedLine: -1, generatedColumn: 0};\r\n\t}\r\n\r\n\t/**\r\n\t* Iterate through internal items. This method takes the same arguments that\r\n\t* `Array.prototype.forEach` takes.\r\n\t*\r\n\t* NOTE: The order of the mappings is NOT guaranteed.\r\n\t*/\r\n\tMappingList.prototype.unsortedForEach =\r\n\t\tfunction MappingList_forEach(aCallback, aThisArg) {\r\n\t\tthis._array.forEach(aCallback, aThisArg);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add the given source mapping.\r\n\t*\r\n\t* @param Object aMapping\r\n\t*/\r\n\tMappingList.prototype.add = function MappingList_add(aMapping) {\r\n\t\tif (generatedPositionAfter(this._last, aMapping)) {\r\n\t\tthis._last = aMapping;\r\n\t\tthis._array.push(aMapping);\r\n\t\t} else {\r\n\t\tthis._sorted = false;\r\n\t\tthis._array.push(aMapping);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the flat, sorted array of mappings. The mappings are sorted by\r\n\t* generated position.\r\n\t*\r\n\t* WARNING: This method returns internal data without copying, for\r\n\t* performance. The return value must NOT be mutated, and should be treated as\r\n\t* an immutable borrow. If you want to take ownership, you must make your own\r\n\t* copy.\r\n\t*/\r\n\tMappingList.prototype.toArray = function MappingList_toArray() {\r\n\t\tif (!this._sorted) {\r\n\t\tthis._array.sort(util.compareByGeneratedPositionsInflated);\r\n\t\tthis._sorted = true;\r\n\t\t}\r\n\t\treturn this._array;\r\n\t};\r\n\r\n\texports.MappingList = MappingList;\r\n\r\n\r\n/***/ },\r\n/* 7 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar binarySearch = __webpack_require__(8);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar quickSort = __webpack_require__(9).quickSort;\r\n\r\n\tfunction SourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\treturn sourceMap.sections != null\r\n\t\t? new IndexedSourceMapConsumer(sourceMap)\r\n\t\t: new BasicSourceMapConsumer(sourceMap);\r\n\t}\r\n\r\n\tSourceMapConsumer.fromSourceMap = function(aSourceMap) {\r\n\t\treturn BasicSourceMapConsumer.fromSourceMap(aSourceMap);\r\n\t}\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tSourceMapConsumer.prototype._version = 3;\r\n\r\n\t// `__generatedMappings` and `__originalMappings` are arrays that hold the\r\n\t// parsed mapping coordinates from the source map's \"mappings\" attribute. They\r\n\t// are lazily instantiated, accessed via the `_generatedMappings` and\r\n\t// `_originalMappings` getters respectively, and we only parse the mappings\r\n\t// and create these arrays once queried for a source location. We jump through\r\n\t// these hoops because there can be many thousands of mappings, and parsing\r\n\t// them is expensive, so we only want to do it if we must.\r\n\t//\r\n\t// Each object in the arrays is of the form:\r\n\t//\r\n\t//     {\r\n\t//       generatedLine: The line number in the generated code,\r\n\t//       generatedColumn: The column number in the generated code,\r\n\t//       source: The path to the original source file that generated this\r\n\t//               chunk of code,\r\n\t//       originalLine: The line number in the original source that\r\n\t//                     corresponds to this chunk of generated code,\r\n\t//       originalColumn: The column number in the original source that\r\n\t//                       corresponds to this chunk of generated code,\r\n\t//       name: The name of the original symbol which generated this chunk of\r\n\t//             code.\r\n\t//     }\r\n\t//\r\n\t// All properties except for `generatedLine` and `generatedColumn` can be\r\n\t// `null`.\r\n\t//\r\n\t// `_generatedMappings` is ordered by the generated positions.\r\n\t//\r\n\t// `_originalMappings` is ordered by the original positions.\r\n\r\n\tSourceMapConsumer.prototype.__generatedMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__generatedMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__generatedMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype.__originalMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__originalMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__originalMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype._charIsMappingSeparator =\r\n\t\tfunction SourceMapConsumer_charIsMappingSeparator(aStr, index) {\r\n\t\tvar c = aStr.charAt(index);\r\n\t\treturn c === \";\" || c === \",\";\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthrow new Error(\"Subclasses must implement _parseMappings\");\r\n\t\t};\r\n\r\n\tSourceMapConsumer.GENERATED_ORDER = 1;\r\n\tSourceMapConsumer.ORIGINAL_ORDER = 2;\r\n\r\n\tSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\r\n\tSourceMapConsumer.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Iterate over each mapping between an original source/line/column and a\r\n\t* generated line/column in this source map.\r\n\t*\r\n\t* @param Function aCallback\r\n\t*        The function that is called with each mapping.\r\n\t* @param Object aContext\r\n\t*        Optional. If specified, this object will be the value of `this` every\r\n\t*        time that `aCallback` is called.\r\n\t* @param aOrder\r\n\t*        Either `SourceMapConsumer.GENERATED_ORDER` or\r\n\t*        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\r\n\t*        iterate over the mappings sorted by the generated file's line/column\r\n\t*        order or the original's source/line/column order, respectively. Defaults to\r\n\t*        `SourceMapConsumer.GENERATED_ORDER`.\r\n\t*/\r\n\tSourceMapConsumer.prototype.eachMapping =\r\n\t\tfunction SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\r\n\t\tvar context = aContext || null;\r\n\t\tvar order = aOrder || SourceMapConsumer.GENERATED_ORDER;\r\n\r\n\t\tvar mappings;\r\n\t\tswitch (order) {\r\n\t\tcase SourceMapConsumer.GENERATED_ORDER:\r\n\t\t\tmappings = this._generatedMappings;\r\n\t\t\tbreak;\r\n\t\tcase SourceMapConsumer.ORIGINAL_ORDER:\r\n\t\t\tmappings = this._originalMappings;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(\"Unknown order of iteration.\");\r\n\t\t}\r\n\r\n\t\tvar sourceRoot = this.sourceRoot;\r\n\t\tmappings.map(function (mapping) {\r\n\t\t\tvar source = mapping.source === null ? null : this._sources.at(mapping.source);\r\n\t\t\tif (source != null && sourceRoot != null) {\r\n\t\t\tsource = util.join(sourceRoot, source);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\tsource: source,\r\n\t\t\tgeneratedLine: mapping.generatedLine,\r\n\t\t\tgeneratedColumn: mapping.generatedColumn,\r\n\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\tname: mapping.name === null ? null : this._names.at(mapping.name)\r\n\t\t\t};\r\n\t\t}, this).forEach(aCallback, context);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns all generated line and column information for the original source,\r\n\t* line, and column provided. If no column is provided, returns all mappings\r\n\t* corresponding to a either the line we are searching for or the next\r\n\t* closest line that has any mappings. Otherwise, returns all mappings\r\n\t* corresponding to the given line and either the column we are searching for\r\n\t* or the next closest column that has any offsets.\r\n\t*\r\n\t* The only argument is an object with the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: Optional. the column number in the original source.\r\n\t*\r\n\t* and an array of objects is returned, each with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tSourceMapConsumer.prototype.allGeneratedPositionsFor =\r\n\t\tfunction SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\r\n\t\tvar line = util.getArg(aArgs, 'line');\r\n\r\n\t\t// When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\r\n\t\t// returns the index of the closest mapping less than the needle. By\r\n\t\t// setting needle.originalColumn to 0, we thus find the last mapping for\r\n\t\t// the given line, provided such a mapping exists.\r\n\t\tvar needle = {\r\n\t\t\tsource: util.getArg(aArgs, 'source'),\r\n\t\t\toriginalLine: line,\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column', 0)\r\n\t\t};\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tneedle.source = util.relative(this.sourceRoot, needle.source);\r\n\t\t}\r\n\t\tif (!this._sources.has(needle.source)) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tneedle.source = this._sources.indexOf(needle.source);\r\n\r\n\t\tvar mappings = [];\r\n\r\n\t\tvar index = this._findMapping(needle,\r\n\t\t\t\t\t\t\t\t\t\tthis._originalMappings,\r\n\t\t\t\t\t\t\t\t\t\t\"originalLine\",\r\n\t\t\t\t\t\t\t\t\t\t\"originalColumn\",\r\n\t\t\t\t\t\t\t\t\t\tutil.compareByOriginalPositions,\r\n\t\t\t\t\t\t\t\t\t\tbinarySearch.LEAST_UPPER_BOUND);\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (aArgs.column === undefined) {\r\n\t\t\tvar originalLine = mapping.originalLine;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we found. Since\r\n\t\t\t// mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we found.\r\n\t\t\twhile (mapping && mapping.originalLine === originalLine) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tvar originalColumn = mapping.originalColumn;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we were searching for.\r\n\t\t\t// Since mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we are searching for.\r\n\t\t\twhile (mapping &&\r\n\t\t\t\t\tmapping.originalLine === line &&\r\n\t\t\t\t\tmapping.originalColumn == originalColumn) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mappings;\r\n\t\t};\r\n\r\n\texports.SourceMapConsumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* A BasicSourceMapConsumer instance represents a parsed source map which we can\r\n\t* query for information about the original file positions by giving it a file\r\n\t* position in the generated source.\r\n\t*\r\n\t* The only parameter is the raw source map (either as a JSON string, or\r\n\t* already parsed to an object). According to the spec, source maps have the\r\n\t* following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - sources: An array of URLs to the original source files.\r\n\t*   - names: An array of identifiers which can be referrenced by individual mappings.\r\n\t*   - sourceRoot: Optional. The URL root from which all sources are relative.\r\n\t*   - sourcesContent: Optional. An array of contents of the original source files.\r\n\t*   - mappings: A string of base64 VLQs which contain the actual mappings.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*\r\n\t* Here is an example source map, taken from the source map spec[0]:\r\n\t*\r\n\t*     {\r\n\t*       version : 3,\r\n\t*       file: \"out.js\",\r\n\t*       sourceRoot : \"\",\r\n\t*       sources: [\"foo.js\", \"bar.js\"],\r\n\t*       names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*       mappings: \"AA,AB;;ABCDE;\"\r\n\t*     }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\r\n\t*/\r\n\tfunction BasicSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sources = util.getArg(sourceMap, 'sources');\r\n\t\t// Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\r\n\t\t// requires the array) to play nice here.\r\n\t\tvar names = util.getArg(sourceMap, 'names', []);\r\n\t\tvar sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\r\n\t\tvar sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\r\n\t\tvar mappings = util.getArg(sourceMap, 'mappings');\r\n\t\tvar file = util.getArg(sourceMap, 'file', null);\r\n\r\n\t\t// Once again, Sass deviates from the spec and supplies the version as a\r\n\t\t// string rather than a number, so we use loose equality checking here.\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tsources = sources\r\n\t\t.map(String)\r\n\t\t// Some source maps produce relative source paths like \"./foo.js\" instead of\r\n\t\t// \"foo.js\".  Normalize these first so that future comparisons will succeed.\r\n\t\t// See bugzil.la/1090768.\r\n\t\t.map(util.normalize)\r\n\t\t// Always ensure that absolute sources are internally stored relative to\r\n\t\t// the source root, if the source root is absolute. Not doing this would\r\n\t\t// be particularly problematic when the source root is a prefix of the\r\n\t\t// source (valid, but why??). See github issue #199 and bugzil.la/1188982.\r\n\t\t.map(function (source) {\r\n\t\t\treturn sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\r\n\t\t\t? util.relative(sourceRoot, source)\r\n\t\t\t: source;\r\n\t\t});\r\n\r\n\t\t// Pass `true` below to allow duplicate names and sources. While source maps\r\n\t\t// are intended to be compressed and deduplicated, the TypeScript compiler\r\n\t\t// sometimes generates source maps with duplicates in them. See Github issue\r\n\t\t// #72 and bugzil.la/889492.\r\n\t\tthis._names = ArraySet.fromArray(names.map(String), true);\r\n\t\tthis._sources = ArraySet.fromArray(sources, true);\r\n\r\n\t\tthis.sourceRoot = sourceRoot;\r\n\t\tthis.sourcesContent = sourcesContent;\r\n\t\tthis._mappings = mappings;\r\n\t\tthis.file = file;\r\n\t}\r\n\r\n\tBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* Create a BasicSourceMapConsumer from a SourceMapGenerator.\r\n\t*\r\n\t* @param SourceMapGenerator aSourceMap\r\n\t*        The source map that will be consumed.\r\n\t* @returns BasicSourceMapConsumer\r\n\t*/\r\n\tBasicSourceMapConsumer.fromSourceMap =\r\n\t\tfunction SourceMapConsumer_fromSourceMap(aSourceMap) {\r\n\t\tvar smc = Object.create(BasicSourceMapConsumer.prototype);\r\n\r\n\t\tvar names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\r\n\t\tvar sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\r\n\t\tsmc.sourceRoot = aSourceMap._sourceRoot;\r\n\t\tsmc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmc.sourceRoot);\r\n\t\tsmc.file = aSourceMap._file;\r\n\r\n\t\t// Because we are modifying the entries (by converting string sources and\r\n\t\t// names to indices into the sources and names ArraySets), we have to make\r\n\t\t// a copy of the entry or else bad things happen. Shared mutable state\r\n\t\t// strikes again! See github issue #191.\r\n\r\n\t\tvar generatedMappings = aSourceMap._mappings.toArray().slice();\r\n\t\tvar destGeneratedMappings = smc.__generatedMappings = [];\r\n\t\tvar destOriginalMappings = smc.__originalMappings = [];\r\n\r\n\t\tfor (var i = 0, length = generatedMappings.length; i < length; i++) {\r\n\t\t\tvar srcMapping = generatedMappings[i];\r\n\t\t\tvar destMapping = new Mapping;\r\n\t\t\tdestMapping.generatedLine = srcMapping.generatedLine;\r\n\t\t\tdestMapping.generatedColumn = srcMapping.generatedColumn;\r\n\r\n\t\t\tif (srcMapping.source) {\r\n\t\t\tdestMapping.source = sources.indexOf(srcMapping.source);\r\n\t\t\tdestMapping.originalLine = srcMapping.originalLine;\r\n\t\t\tdestMapping.originalColumn = srcMapping.originalColumn;\r\n\r\n\t\t\tif (srcMapping.name) {\r\n\t\t\t\tdestMapping.name = names.indexOf(srcMapping.name);\r\n\t\t\t}\r\n\r\n\t\t\tdestOriginalMappings.push(destMapping);\r\n\t\t\t}\r\n\r\n\t\t\tdestGeneratedMappings.push(destMapping);\r\n\t\t}\r\n\r\n\t\tquickSort(smc.__originalMappings, util.compareByOriginalPositions);\r\n\r\n\t\treturn smc;\r\n\t\t};\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\treturn this._sources.toArray().map(function (s) {\r\n\t\t\treturn this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\r\n\t\t}, this);\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Provide the JIT with a nice shape / hidden class.\r\n\t*/\r\n\tfunction Mapping() {\r\n\t\tthis.generatedLine = 0;\r\n\t\tthis.generatedColumn = 0;\r\n\t\tthis.source = null;\r\n\t\tthis.originalLine = null;\r\n\t\tthis.originalColumn = null;\r\n\t\tthis.name = null;\r\n\t}\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tvar generatedLine = 1;\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar length = aStr.length;\r\n\t\tvar index = 0;\r\n\t\tvar cachedSegments = {};\r\n\t\tvar temp = {};\r\n\t\tvar originalMappings = [];\r\n\t\tvar generatedMappings = [];\r\n\t\tvar mapping, str, segment, end, value;\r\n\r\n\t\twhile (index < length) {\r\n\t\t\tif (aStr.charAt(index) === ';') {\r\n\t\t\tgeneratedLine++;\r\n\t\t\tindex++;\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\t}\r\n\t\t\telse if (aStr.charAt(index) === ',') {\r\n\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tmapping = new Mapping();\r\n\t\t\tmapping.generatedLine = generatedLine;\r\n\r\n\t\t\t// Because each offset is encoded relative to the previous one,\r\n\t\t\t// many segments often have the same encoding. We can exploit this\r\n\t\t\t// fact by caching the parsed variable length fields of each segment,\r\n\t\t\t// allowing us to avoid a second parse if we encounter the same\r\n\t\t\t// segment again.\r\n\t\t\tfor (end = index; end < length; end++) {\r\n\t\t\t\tif (this._charIsMappingSeparator(aStr, end)) {\r\n\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstr = aStr.slice(index, end);\r\n\r\n\t\t\tsegment = cachedSegments[str];\r\n\t\t\tif (segment) {\r\n\t\t\t\tindex += str.length;\r\n\t\t\t} else {\r\n\t\t\t\tsegment = [];\r\n\t\t\t\twhile (index < end) {\r\n\t\t\t\tbase64VLQ.decode(aStr, index, temp);\r\n\t\t\t\tvalue = temp.value;\r\n\t\t\t\tindex = temp.rest;\r\n\t\t\t\tsegment.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 2) {\r\n\t\t\t\tthrow new Error('Found a source, but no line and column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 3) {\r\n\t\t\t\tthrow new Error('Found a source and line, but no column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcachedSegments[str] = segment;\r\n\t\t\t}\r\n\r\n\t\t\t// Generated column.\r\n\t\t\tmapping.generatedColumn = previousGeneratedColumn + segment[0];\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (segment.length > 1) {\r\n\t\t\t\t// Original source.\r\n\t\t\t\tmapping.source = previousSource + segment[1];\r\n\t\t\t\tpreviousSource += segment[1];\r\n\r\n\t\t\t\t// Original line.\r\n\t\t\t\tmapping.originalLine = previousOriginalLine + segment[2];\r\n\t\t\t\tpreviousOriginalLine = mapping.originalLine;\r\n\t\t\t\t// Lines are stored 0-based\r\n\t\t\t\tmapping.originalLine += 1;\r\n\r\n\t\t\t\t// Original column.\r\n\t\t\t\tmapping.originalColumn = previousOriginalColumn + segment[3];\r\n\t\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\t\tif (segment.length > 4) {\r\n\t\t\t\t// Original name.\r\n\t\t\t\tmapping.name = previousName + segment[4];\r\n\t\t\t\tpreviousName += segment[4];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgeneratedMappings.push(mapping);\r\n\t\t\tif (typeof mapping.originalLine === 'number') {\r\n\t\t\t\toriginalMappings.push(mapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tthis.__generatedMappings = generatedMappings;\r\n\r\n\t\tquickSort(originalMappings, util.compareByOriginalPositions);\r\n\t\tthis.__originalMappings = originalMappings;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Find the mapping that best matches the hypothetical \"needle\" mapping that\r\n\t* we are searching for in the given \"haystack\" of mappings.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._findMapping =\r\n\t\tfunction SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\r\n\t\t\t\t\t\t\t\t\t\t\taColumnName, aComparator, aBias) {\r\n\t\t// To return the position we are searching for, we must first find the\r\n\t\t// mapping for the given position and then return the opposite position it\r\n\t\t// points to. Because the mappings are sorted, we can use binary search to\r\n\t\t// find the best mapping.\r\n\r\n\t\tif (aNeedle[aLineName] <= 0) {\r\n\t\t\tthrow new TypeError('Line must be greater than or equal to 1, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aLineName]);\r\n\t\t}\r\n\t\tif (aNeedle[aColumnName] < 0) {\r\n\t\t\tthrow new TypeError('Column must be greater than or equal to 0, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aColumnName]);\r\n\t\t}\r\n\r\n\t\treturn binarySearch.search(aNeedle, aMappings, aComparator, aBias);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Compute the last column for each generated mapping. The last column is\r\n\t* inclusive.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.computeColumnSpans =\r\n\t\tfunction SourceMapConsumer_computeColumnSpans() {\r\n\t\tfor (var index = 0; index < this._generatedMappings.length; ++index) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\t// Mappings do not contain a field for the last generated columnt. We\r\n\t\t\t// can come up with an optimistic estimate, however, by assuming that\r\n\t\t\t// mappings are contiguous (i.e. given two consecutive mappings, the\r\n\t\t\t// first mapping ends where the second one starts).\r\n\t\t\tif (index + 1 < this._generatedMappings.length) {\r\n\t\t\tvar nextMapping = this._generatedMappings[index + 1];\r\n\r\n\t\t\tif (mapping.generatedLine === nextMapping.generatedLine) {\r\n\t\t\t\tmapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// The last mapping for each line spans the entire line.\r\n\t\t\tmapping.lastGeneratedColumn = Infinity;\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction SourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._generatedMappings,\r\n\t\t\t\"generatedLine\",\r\n\t\t\t\"generatedColumn\",\r\n\t\t\tutil.compareByGeneratedPositionsDeflated,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\tif (mapping.generatedLine === needle.generatedLine) {\r\n\t\t\tvar source = util.getArg(mapping, 'source', null);\r\n\t\t\tif (source !== null) {\r\n\t\t\t\tsource = this._sources.at(source);\r\n\t\t\t\tif (this.sourceRoot != null) {\r\n\t\t\t\tsource = util.join(this.sourceRoot, source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar name = util.getArg(mapping, 'name', null);\r\n\t\t\tif (name !== null) {\r\n\t\t\t\tname = this._names.at(name);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tline: util.getArg(mapping, 'originalLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'originalColumn', null),\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction BasicSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.sourcesContent.length >= this._sources.size() &&\r\n\t\t\t!this.sourcesContent.some(function (sc) { return sc == null; });\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\taSource = util.relative(this.sourceRoot, aSource);\r\n\t\t}\r\n\r\n\t\tif (this._sources.has(aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(aSource)];\r\n\t\t}\r\n\r\n\t\tvar url;\r\n\t\tif (this.sourceRoot != null\r\n\t\t\t&& (url = util.urlParse(this.sourceRoot))) {\r\n\t\t\t// XXX: file:// URIs and absolute paths lead to unexpected behavior for\r\n\t\t\t// many users. We can help them out when they expect file:// URIs to\r\n\t\t\t// behave like it would if they were running a local HTTP server. See\r\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\r\n\t\t\tvar fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\r\n\t\t\tif (url.scheme == \"file\"\r\n\t\t\t\t&& this._sources.has(fileUriAbsPath)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\r\n\t\t\t}\r\n\r\n\t\t\tif ((!url.path || url.path == \"/\")\r\n\t\t\t\t&& this._sources.has(\"/\" + aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// This function is used recursively from\r\n\t\t// IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\r\n\t\t// don't want to throw if we can't find the source - we just want to\r\n\t\t// return null, so we provide a flag to exit gracefully.\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction SourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tvar source = util.getArg(aArgs, 'source');\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tsource = util.relative(this.sourceRoot, source);\r\n\t\t}\r\n\t\tif (!this._sources.has(source)) {\r\n\t\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t\t};\r\n\t\t}\r\n\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\tvar needle = {\r\n\t\t\tsource: source,\r\n\t\t\toriginalLine: util.getArg(aArgs, 'line'),\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._originalMappings,\r\n\t\t\t\"originalLine\",\r\n\t\t\t\"originalColumn\",\r\n\t\t\tutil.compareByOriginalPositions,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (mapping.source === needle.source) {\r\n\t\t\treturn {\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\texports.BasicSourceMapConsumer = BasicSourceMapConsumer;\r\n\r\n\t/**\r\n\t* An IndexedSourceMapConsumer instance represents a parsed source map which\r\n\t* we can query for information. It differs from BasicSourceMapConsumer in\r\n\t* that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\r\n\t* input.\r\n\t*\r\n\t* The only parameter is a raw source map (either as a JSON string, or already\r\n\t* parsed to an object). According to the spec for indexed source maps, they\r\n\t* have the following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*   - sections: A list of section definitions.\r\n\t*\r\n\t* Each value under the \"sections\" field has two fields:\r\n\t*   - offset: The offset into the original specified at which this section\r\n\t*       begins to apply, defined as an object with a \"line\" and \"column\"\r\n\t*       field.\r\n\t*   - map: A source map definition. This source map could also be indexed,\r\n\t*       but doesn't have to be.\r\n\t*\r\n\t* Instead of the \"map\" field, it's also possible to have a \"url\" field\r\n\t* specifying a URL to retrieve a source map from, but that's currently\r\n\t* unsupported.\r\n\t*\r\n\t* Here's an example source map, taken from the source map spec[0], but\r\n\t* modified to omit a section which uses the \"url\" field.\r\n\t*\r\n\t*  {\r\n\t*    version : 3,\r\n\t*    file: \"app.js\",\r\n\t*    sections: [{\r\n\t*      offset: {line:100, column:10},\r\n\t*      map: {\r\n\t*        version : 3,\r\n\t*        file: \"section.js\",\r\n\t*        sources: [\"foo.js\", \"bar.js\"],\r\n\t*        names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*        mappings: \"AAAA,E;;ABCDE;\"\r\n\t*      }\r\n\t*    }],\r\n\t*  }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\r\n\t*/\r\n\tfunction IndexedSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sections = util.getArg(sourceMap, 'sections');\r\n\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\r\n\t\tvar lastOffset = {\r\n\t\tline: -1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tthis._sections = sections.map(function (s) {\r\n\t\tif (s.url) {\r\n\t\t\t// The url field will require support for asynchronicity.\r\n\t\t\t// See https://github.com/mozilla/source-map/issues/16\r\n\t\t\tthrow new Error('Support for url field in sections not implemented.');\r\n\t\t}\r\n\t\tvar offset = util.getArg(s, 'offset');\r\n\t\tvar offsetLine = util.getArg(offset, 'line');\r\n\t\tvar offsetColumn = util.getArg(offset, 'column');\r\n\r\n\t\tif (offsetLine < lastOffset.line ||\r\n\t\t\t(offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\r\n\t\t\tthrow new Error('Section offsets must be ordered and non-overlapping.');\r\n\t\t}\r\n\t\tlastOffset = offset;\r\n\r\n\t\treturn {\r\n\t\t\tgeneratedOffset: {\r\n\t\t\t// The offset fields are 0-based, but we use 1-based indices when\r\n\t\t\t// encoding/decoding from VLQ.\r\n\t\t\tgeneratedLine: offsetLine + 1,\r\n\t\t\tgeneratedColumn: offsetColumn + 1\r\n\t\t\t},\r\n\t\t\tconsumer: new SourceMapConsumer(util.getArg(s, 'map'))\r\n\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\tvar sources = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tfor (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\r\n\t\t\tsources.push(this._sections[i].consumer.sources[j]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sources;\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\t// Find the section containing the generated position we're trying to map\r\n\t\t// to an original position.\r\n\t\tvar sectionIndex = binarySearch.search(needle, this._sections,\r\n\t\t\tfunction(needle, section) {\r\n\t\t\tvar cmp = needle.generatedLine - section.generatedOffset.generatedLine;\r\n\t\t\tif (cmp) {\r\n\t\t\t\treturn cmp;\r\n\t\t\t}\r\n\r\n\t\t\treturn (needle.generatedColumn -\r\n\t\t\t\t\tsection.generatedOffset.generatedColumn);\r\n\t\t\t});\r\n\t\tvar section = this._sections[sectionIndex];\r\n\r\n\t\tif (!section) {\r\n\t\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn section.consumer.originalPositionFor({\r\n\t\t\tline: needle.generatedLine -\r\n\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\tcolumn: needle.generatedColumn -\r\n\t\t\t(section.generatedOffset.generatedLine === needle.generatedLine\r\n\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t: 0),\r\n\t\t\tbias: aArgs.bias\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction IndexedSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\treturn this._sections.every(function (s) {\r\n\t\t\treturn s.consumer.hasContentsOfAllSources();\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\tvar content = section.consumer.sourceContentFor(aSource, true);\r\n\t\t\tif (content) {\r\n\t\t\treturn content;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\t// Only consider this section if the requested source is in the list of\r\n\t\t\t// sources of the consumer.\r\n\t\t\tif (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\r\n\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar generatedPosition = section.consumer.generatedPositionFor(aArgs);\r\n\t\t\tif (generatedPosition) {\r\n\t\t\tvar ret = {\r\n\t\t\t\tline: generatedPosition.line +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tcolumn: generatedPosition.column +\r\n\t\t\t\t(section.generatedOffset.generatedLine === generatedPosition.line\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0)\r\n\t\t\t};\r\n\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthis.__generatedMappings = [];\r\n\t\tthis.__originalMappings = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\t\t\tvar sectionMappings = section.consumer._generatedMappings;\r\n\t\t\tfor (var j = 0; j < sectionMappings.length; j++) {\r\n\t\t\tvar mapping = sectionMappings[j];\r\n\r\n\t\t\tvar source = section.consumer._sources.at(mapping.source);\r\n\t\t\tif (section.consumer.sourceRoot !== null) {\r\n\t\t\t\tsource = util.join(section.consumer.sourceRoot, source);\r\n\t\t\t}\r\n\t\t\tthis._sources.add(source);\r\n\t\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\t\tvar name = section.consumer._names.at(mapping.name);\r\n\t\t\tthis._names.add(name);\r\n\t\t\tname = this._names.indexOf(name);\r\n\r\n\t\t\t// The mappings coming from the consumer for the section have\r\n\t\t\t// generated positions relative to the start of the section, so we\r\n\t\t\t// need to offset them to be relative to the start of the concatenated\r\n\t\t\t// generated file.\r\n\t\t\tvar adjustedMapping = {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tgeneratedLine: mapping.generatedLine +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tgeneratedColumn: mapping.generatedColumn +\r\n\t\t\t\t(section.generatedOffset.generatedLine === mapping.generatedLine\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0),\r\n\t\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t\tthis.__generatedMappings.push(adjustedMapping);\r\n\t\t\tif (typeof adjustedMapping.originalLine === 'number') {\r\n\t\t\t\tthis.__originalMappings.push(adjustedMapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tquickSort(this.__originalMappings, util.compareByOriginalPositions);\r\n\t\t};\r\n\r\n\texports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\r\n\r\n\r\n/***/ },\r\n/* 8 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\texports.GREATEST_LOWER_BOUND = 1;\r\n\texports.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Recursive implementation of binary search.\r\n\t*\r\n\t* @param aLow Indices here and lower do not contain the needle.\r\n\t* @param aHigh Indices here and higher do not contain the needle.\r\n\t* @param aNeedle The element being searched for.\r\n\t* @param aHaystack The non-empty array being searched.\r\n\t* @param aCompare Function which takes two elements and returns -1, 0, or 1.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*/\r\n\tfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\r\n\t\t// This function terminates when one of the following is true:\r\n\t\t//\r\n\t\t//   1. We find the exact element we are looking for.\r\n\t\t//\r\n\t\t//   2. We did not find the exact element, but we can return the index of\r\n\t\t//      the next-closest element.\r\n\t\t//\r\n\t\t//   3. We did not find the exact element, and there is no next-closest\r\n\t\t//      element than the one we are searching for, so we return -1.\r\n\t\tvar mid = Math.floor((aHigh - aLow) / 2) + aLow;\r\n\t\tvar cmp = aCompare(aNeedle, aHaystack[mid], true);\r\n\t\tif (cmp === 0) {\r\n\t\t// Found the element we are looking for.\r\n\t\treturn mid;\r\n\t\t}\r\n\t\telse if (cmp > 0) {\r\n\t\t// Our needle is greater than aHaystack[mid].\r\n\t\tif (aHigh - mid > 1) {\r\n\t\t\t// The element is in the upper half.\r\n\t\t\treturn recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// The exact needle element was not found in this haystack. Determine if\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn aHigh < aHaystack.length ? aHigh : -1;\r\n\t\t} else {\r\n\t\t\treturn mid;\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t// Our needle is less than aHaystack[mid].\r\n\t\tif (mid - aLow > 1) {\r\n\t\t\t// The element is in the lower half.\r\n\t\t\treturn recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn mid;\r\n\t\t} else {\r\n\t\t\treturn aLow < 0 ? -1 : aLow;\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* This is an implementation of binary search which will always try and return\r\n\t* the index of the closest element if there is no exact hit. This is because\r\n\t* mappings between original and generated line/col pairs are single points,\r\n\t* and there is an implicit region between each of them, so a miss just means\r\n\t* that you aren't on the very start of a region.\r\n\t*\r\n\t* @param aNeedle The element you are looking for.\r\n\t* @param aHaystack The array that is being searched.\r\n\t* @param aCompare A function which takes the needle and an element in the\r\n\t*     array and returns -1, 0, or 1 depending on whether the needle is less\r\n\t*     than, equal to, or greater than the element, respectively.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\r\n\t*/\r\n\texports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\r\n\t\tif (aHaystack.length === 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tvar index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\r\n\t\t\t\t\t\t\t\t\taCompare, aBias || exports.GREATEST_LOWER_BOUND);\r\n\t\tif (index < 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\t// We have found either the exact element, or the next-closest element than\r\n\t\t// the one we are searching for. However, there may be more than one such\r\n\t\t// element. Make sure we always return the smallest of these.\r\n\t\twhile (index - 1 >= 0) {\r\n\t\tif (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t--index;\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 9 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t// It turns out that some (most?) JavaScript engines don't self-host\r\n\t// `Array.prototype.sort`. This makes sense because C++ will likely remain\r\n\t// faster than JS when doing raw CPU-intensive sorting. However, when using a\r\n\t// custom comparator function, calling back and forth between the VM's C++ and\r\n\t// JIT'd JS is rather slow *and* loses JIT type information, resulting in\r\n\t// worse generated code for the comparator function than would be optimal. In\r\n\t// fact, when sorting with a comparator, these costs outweigh the benefits of\r\n\t// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\r\n\t// a ~3500ms mean speed-up in `bench/bench.html`.\r\n\r\n\t/**\r\n\t* Swap the elements indexed by `x` and `y` in the array `ary`.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        The array.\r\n\t* @param {Number} x\r\n\t*        The index of the first item.\r\n\t* @param {Number} y\r\n\t*        The index of the second item.\r\n\t*/\r\n\tfunction swap(ary, x, y) {\r\n\t\tvar temp = ary[x];\r\n\t\tary[x] = ary[y];\r\n\t\tary[y] = temp;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a random integer within the range `low .. high` inclusive.\r\n\t*\r\n\t* @param {Number} low\r\n\t*        The lower bound on the range.\r\n\t* @param {Number} high\r\n\t*        The upper bound on the range.\r\n\t*/\r\n\tfunction randomIntInRange(low, high) {\r\n\t\treturn Math.round(low + (Math.random() * (high - low)));\r\n\t}\r\n\r\n\t/**\r\n\t* The Quick Sort algorithm.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t* @param {Number} p\r\n\t*        Start index of the array\r\n\t* @param {Number} r\r\n\t*        End index of the array\r\n\t*/\r\n\tfunction doQuickSort(ary, comparator, p, r) {\r\n\t\t// If our lower bound is less than our upper bound, we (1) partition the\r\n\t\t// array into two pieces and (2) recurse on each half. If it is not, this is\r\n\t\t// the empty array and our base case.\r\n\r\n\t\tif (p < r) {\r\n\t\t// (1) Partitioning.\r\n\t\t//\r\n\t\t// The partitioning chooses a pivot between `p` and `r` and moves all\r\n\t\t// elements that are less than or equal to the pivot to the before it, and\r\n\t\t// all the elements that are greater than it after it. The effect is that\r\n\t\t// once partition is done, the pivot is in the exact place it will be when\r\n\t\t// the array is put in sorted order, and it will not need to be moved\r\n\t\t// again. This runs in O(n) time.\r\n\r\n\t\t// Always choose a random pivot so that an input array which is reverse\r\n\t\t// sorted does not cause O(n^2) running time.\r\n\t\tvar pivotIndex = randomIntInRange(p, r);\r\n\t\tvar i = p - 1;\r\n\r\n\t\tswap(ary, pivotIndex, r);\r\n\t\tvar pivot = ary[r];\r\n\r\n\t\t// Immediately after `j` is incremented in this loop, the following hold\r\n\t\t// true:\r\n\t\t//\r\n\t\t//   * Every element in `ary[p .. i]` is less than or equal to the pivot.\r\n\t\t//\r\n\t\t//   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\r\n\t\tfor (var j = p; j < r; j++) {\r\n\t\t\tif (comparator(ary[j], pivot) <= 0) {\r\n\t\t\ti += 1;\r\n\t\t\tswap(ary, i, j);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswap(ary, i + 1, j);\r\n\t\tvar q = i + 1;\r\n\r\n\t\t// (2) Recurse on each half.\r\n\r\n\t\tdoQuickSort(ary, comparator, p, q - 1);\r\n\t\tdoQuickSort(ary, comparator, q + 1, r);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Sort the given array in-place with the given comparator function.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t*/\r\n\texports.quickSort = function (ary, comparator) {\r\n\t\tdoQuickSort(ary, comparator, 0, ary.length - 1);\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 10 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\r\n\t// operating systems these days (capturing the result).\r\n\tvar REGEX_NEWLINE = /(\\r?\\n)/;\r\n\r\n\t// Newline character code for charCodeAt() comparisons\r\n\tvar NEWLINE_CODE = 10;\r\n\r\n\t// Private symbol for identifying `SourceNode`s when multiple versions of\r\n\t// the source-map library are loaded. This MUST NOT CHANGE across\r\n\t// versions!\r\n\tvar isSourceNode = \"$$$isSourceNode$$$\";\r\n\r\n\t/**\r\n\t* SourceNodes provide a way to abstract over interpolating/concatenating\r\n\t* snippets of generated JavaScript source code while maintaining the line and\r\n\t* column information associated with the original source code.\r\n\t*\r\n\t* @param aLine The original line number.\r\n\t* @param aColumn The original column number.\r\n\t* @param aSource The original source's filename.\r\n\t* @param aChunks Optional. An array of strings which are snippets of\r\n\t*        generated JS, or other SourceNodes.\r\n\t* @param aName The original identifier.\r\n\t*/\r\n\tfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\r\n\t\tthis.children = [];\r\n\t\tthis.sourceContents = {};\r\n\t\tthis.line = aLine == null ? null : aLine;\r\n\t\tthis.column = aColumn == null ? null : aColumn;\r\n\t\tthis.source = aSource == null ? null : aSource;\r\n\t\tthis.name = aName == null ? null : aName;\r\n\t\tthis[isSourceNode] = true;\r\n\t\tif (aChunks != null) this.add(aChunks);\r\n\t}\r\n\r\n\t/**\r\n\t* Creates a SourceNode from generated code and a SourceMapConsumer.\r\n\t*\r\n\t* @param aGeneratedCode The generated code\r\n\t* @param aSourceMapConsumer The SourceMap for the generated code\r\n\t* @param aRelativePath Optional. The path that relative sources in the\r\n\t*        SourceMapConsumer should be relative to.\r\n\t*/\r\n\tSourceNode.fromStringWithSourceMap =\r\n\t\tfunction SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\r\n\t\t// The SourceNode we want to fill with the generated code\r\n\t\t// and the SourceMap\r\n\t\tvar node = new SourceNode();\r\n\r\n\t\t// All even indices of this array are one line of the generated code,\r\n\t\t// while all odd indices are the newlines between two adjacent lines\r\n\t\t// (since `REGEX_NEWLINE` captures its match).\r\n\t\t// Processed fragments are removed from this array, by calling `shiftNextLine`.\r\n\t\tvar remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\r\n\t\tvar shiftNextLine = function() {\r\n\t\t\tvar lineContents = remainingLines.shift();\r\n\t\t\t// The last line of a file might not have a newline.\r\n\t\t\tvar newLine = remainingLines.shift() || \"\";\r\n\t\t\treturn lineContents + newLine;\r\n\t\t};\r\n\r\n\t\t// We need to remember the position of \"remainingLines\"\r\n\t\tvar lastGeneratedLine = 1, lastGeneratedColumn = 0;\r\n\r\n\t\t// The generate SourceNodes we need a code range.\r\n\t\t// To extract it current and last mapping is used.\r\n\t\t// Here we store the last mapping.\r\n\t\tvar lastMapping = null;\r\n\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tif (lastMapping !== null) {\r\n\t\t\t// We add the code from \"lastMapping\" to \"mapping\":\r\n\t\t\t// First check if there is a new line in between.\r\n\t\t\tif (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\t\t// Associate first line with \"lastMapping\"\r\n\t\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t\tlastGeneratedLine++;\r\n\t\t\t\tlastGeneratedColumn = 0;\r\n\t\t\t\t// The remaining code is added without mapping\r\n\t\t\t} else {\r\n\t\t\t\t// There is no new line in between.\r\n\t\t\t\t// Associate the code between \"lastGeneratedColumn\" and\r\n\t\t\t\t// \"mapping.generatedColumn\" with \"lastMapping\"\r\n\t\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\t\tvar code = nextLine.substr(0, mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t\taddMappingWithCode(lastMapping, code);\r\n\t\t\t\t// No more remaining code, continue\r\n\t\t\t\tlastMapping = mapping;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\t// We add the generated code until the first mapping\r\n\t\t\t// to the SourceNode without any mapping.\r\n\t\t\t// Each line is added as separate string.\r\n\t\t\twhile (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\tnode.add(shiftNextLine());\r\n\t\t\tlastGeneratedLine++;\r\n\t\t\t}\r\n\t\t\tif (lastGeneratedColumn < mapping.generatedColumn) {\r\n\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\tnode.add(nextLine.substr(0, mapping.generatedColumn));\r\n\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn);\r\n\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t}\r\n\t\t\tlastMapping = mapping;\r\n\t\t}, this);\r\n\t\t// We have processed all mappings.\r\n\t\tif (remainingLines.length > 0) {\r\n\t\t\tif (lastMapping) {\r\n\t\t\t// Associate the remaining code in the current line with \"lastMapping\"\r\n\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t}\r\n\t\t\t// and add the remaining lines without any mapping\r\n\t\t\tnode.add(remainingLines.join(\"\"));\r\n\t\t}\r\n\r\n\t\t// Copy sourcesContent into SourceNode\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aRelativePath != null) {\r\n\t\t\t\tsourceFile = util.join(aRelativePath, sourceFile);\r\n\t\t\t}\r\n\t\t\tnode.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn node;\r\n\r\n\t\tfunction addMappingWithCode(mapping, code) {\r\n\t\t\tif (mapping === null || mapping.source === undefined) {\r\n\t\t\tnode.add(code);\r\n\t\t\t} else {\r\n\t\t\tvar source = aRelativePath\r\n\t\t\t\t? util.join(aRelativePath, mapping.source)\r\n\t\t\t\t: mapping.source;\r\n\t\t\tnode.add(new SourceNode(mapping.originalLine,\r\n\t\t\t\t\t\t\t\t\tmapping.originalColumn,\r\n\t\t\t\t\t\t\t\t\tsource,\r\n\t\t\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\t\t\tmapping.name));\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.add = function SourceNode_add(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\taChunk.forEach(function (chunk) {\r\n\t\t\tthis.add(chunk);\r\n\t\t}, this);\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tif (aChunk) {\r\n\t\t\tthis.children.push(aChunk);\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to the beginning of this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\tfor (var i = aChunk.length-1; i >= 0; i--) {\r\n\t\t\tthis.prepend(aChunk[i]);\r\n\t\t}\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tthis.children.unshift(aChunk);\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of JS snippets in this node and its children. The\r\n\t* walking function is called once for each snippet of JS and is passed that\r\n\t* snippet and the its original associated source's line/column location.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walk = function SourceNode_walk(aFn) {\r\n\t\tvar chunk;\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\tchunk = this.children[i];\r\n\t\tif (chunk[isSourceNode]) {\r\n\t\t\tchunk.walk(aFn);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (chunk !== '') {\r\n\t\t\taFn(chunk, { source: this.source,\r\n\t\t\t\t\t\tline: this.line,\r\n\t\t\t\t\t\tcolumn: this.column,\r\n\t\t\t\t\t\tname: this.name });\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\r\n\t* each of `this.children`.\r\n\t*\r\n\t* @param aSep The separator.\r\n\t*/\r\n\tSourceNode.prototype.join = function SourceNode_join(aSep) {\r\n\t\tvar newChildren;\r\n\t\tvar i;\r\n\t\tvar len = this.children.length;\r\n\t\tif (len > 0) {\r\n\t\tnewChildren = [];\r\n\t\tfor (i = 0; i < len-1; i++) {\r\n\t\t\tnewChildren.push(this.children[i]);\r\n\t\t\tnewChildren.push(aSep);\r\n\t\t}\r\n\t\tnewChildren.push(this.children[i]);\r\n\t\tthis.children = newChildren;\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Call String.prototype.replace on the very right-most source snippet. Useful\r\n\t* for trimming whitespace from the end of a source node, etc.\r\n\t*\r\n\t* @param aPattern The pattern to replace.\r\n\t* @param aReplacement The thing to replace the pattern with.\r\n\t*/\r\n\tSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\r\n\t\tvar lastChild = this.children[this.children.length - 1];\r\n\t\tif (lastChild[isSourceNode]) {\r\n\t\tlastChild.replaceRight(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse if (typeof lastChild === 'string') {\r\n\t\tthis.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse {\r\n\t\tthis.children.push(''.replace(aPattern, aReplacement));\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file. This will be added to the SourceMapGenerator\r\n\t* in the sourcesContent field.\r\n\t*\r\n\t* @param aSourceFile The filename of the source file\r\n\t* @param aSourceContent The content of the source file\r\n\t*/\r\n\tSourceNode.prototype.setSourceContent =\r\n\t\tfunction SourceNode_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tthis.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of SourceNodes. The walking function is called for each\r\n\t* source file content and is passed the filename and source content.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walkSourceContents =\r\n\t\tfunction SourceNode_walkSourceContents(aFn) {\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\t\tif (this.children[i][isSourceNode]) {\r\n\t\t\tthis.children[i].walkSourceContents(aFn);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sources = Object.keys(this.sourceContents);\r\n\t\tfor (var i = 0, len = sources.length; i < len; i++) {\r\n\t\t\taFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return the string representation of this source node. Walks over the tree\r\n\t* and concatenates all the various snippets together to one string.\r\n\t*/\r\n\tSourceNode.prototype.toString = function SourceNode_toString() {\r\n\t\tvar str = \"\";\r\n\t\tthis.walk(function (chunk) {\r\n\t\tstr += chunk;\r\n\t\t});\r\n\t\treturn str;\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the string representation of this source node along with a source\r\n\t* map.\r\n\t*/\r\n\tSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\r\n\t\tvar generated = {\r\n\t\tcode: \"\",\r\n\t\tline: 1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tvar map = new SourceMapGenerator(aArgs);\r\n\t\tvar sourceMappingActive = false;\r\n\t\tvar lastOriginalSource = null;\r\n\t\tvar lastOriginalLine = null;\r\n\t\tvar lastOriginalColumn = null;\r\n\t\tvar lastOriginalName = null;\r\n\t\tthis.walk(function (chunk, original) {\r\n\t\tgenerated.code += chunk;\r\n\t\tif (original.source !== null\r\n\t\t\t&& original.line !== null\r\n\t\t\t&& original.column !== null) {\r\n\t\t\tif(lastOriginalSource !== original.source\r\n\t\t\t|| lastOriginalLine !== original.line\r\n\t\t\t|| lastOriginalColumn !== original.column\r\n\t\t\t|| lastOriginalName !== original.name) {\r\n\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\tline: original.line,\r\n\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t});\r\n\t\t\t}\r\n\t\t\tlastOriginalSource = original.source;\r\n\t\t\tlastOriginalLine = original.line;\r\n\t\t\tlastOriginalColumn = original.column;\r\n\t\t\tlastOriginalName = original.name;\r\n\t\t\tsourceMappingActive = true;\r\n\t\t} else if (sourceMappingActive) {\r\n\t\t\tmap.addMapping({\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t}\r\n\t\t\t});\r\n\t\t\tlastOriginalSource = null;\r\n\t\t\tsourceMappingActive = false;\r\n\t\t}\r\n\t\tfor (var idx = 0, length = chunk.length; idx < length; idx++) {\r\n\t\t\tif (chunk.charCodeAt(idx) === NEWLINE_CODE) {\r\n\t\t\tgenerated.line++;\r\n\t\t\tgenerated.column = 0;\r\n\t\t\t// Mappings end at eol\r\n\t\t\tif (idx + 1 === length) {\r\n\t\t\t\tlastOriginalSource = null;\r\n\t\t\t\tsourceMappingActive = false;\r\n\t\t\t} else if (sourceMappingActive) {\r\n\t\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\t\tline: original.line,\r\n\t\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\t\tline: generated.line,\r\n\t\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tgenerated.column++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t});\r\n\t\tthis.walkSourceContents(function (sourceFile, sourceContent) {\r\n\t\tmap.setSourceContent(sourceFile, sourceContent);\r\n\t\t});\r\n\r\n\t\treturn { code: generated.code, map: map };\r\n\t};\r\n\r\n\texports.SourceNode = SourceNode;\r\n\r\n\r\n/***/ }\r\n/******/ ])\r\n});\r\n;\r\n},{}],8:[function(require,module,exports){\r\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.StackTrace=e()}}(function(){var e;return function n(e,r,t){function o(a,s){if(!r[a]){if(!e[a]){var u=\"function\"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error(\"Cannot find module '\"+a+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(n){var r=e[a][1][n];return o(r?r:n)},l,l.exports,n,e,r,t)}return r[a].exports}for(var i=\"function\"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"error-stack-parser\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){\"use strict\";var n=/(^|@)\\S+\\:\\d+/,r=/^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m,t=/^(eval@)?(\\[native code\\])?$/;return{parse:function(e){if(\"undefined\"!=typeof e.stacktrace||\"undefined\"!=typeof e[\"opera#sourceloc\"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error(\"Cannot parse given Error object\")},extractLocation:function(e){if(e.indexOf(\":\")===-1)return[e];var n=/(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/,r=n.exec(e.replace(/[\\(\\)]/g,\"\"));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(n){var t=n.stack.split(\"\\n\").filter(function(e){return!!e.match(r)},this);return t.map(function(n){n.indexOf(\"(eval \")>-1&&(n=n.replace(/eval code/g,\"eval\").replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g,\"\"));var r=n.replace(/^\\s+/,\"\").replace(/\\(eval code/g,\"(\").split(/\\s+/).slice(1),t=this.extractLocation(r.pop()),o=r.join(\" \")||void 0,i=[\"eval\",\"<anonymous>\"].indexOf(t[0])>-1?void 0:t[0];return new e({functionName:o,fileName:i,lineNumber:t[1],columnNumber:t[2],source:n})},this)},parseFFOrSafari:function(n){var r=n.stack.split(\"\\n\").filter(function(e){return!e.match(t)},this);return r.map(function(n){if(n.indexOf(\" > eval\")>-1&&(n=n.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g,\":$1\")),n.indexOf(\"@\")===-1&&n.indexOf(\":\")===-1)return new e({functionName:n});var r=/((.*\".+\"[^@]*)?[^@]*)(?:@)/,t=n.match(r),o=t&&t[1]?t[1]:void 0,i=this.extractLocation(n.replace(r,\"\"));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:n})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(\"\\n\")>-1&&e.message.split(\"\\n\").length>e.stacktrace.split(\"\\n\").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)/i,t=n.message.split(\"\\n\"),o=[],i=2,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera10:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i,t=n.stacktrace.split(\"\\n\"),o=[],i=0,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera11:function(r){var t=r.stack.split(\"\\n\").filter(function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return t.map(function(n){var r,t=n.split(\"@\"),o=this.extractLocation(t.pop()),i=t.shift()||\"\",a=i.replace(/<anonymous function(: (\\w+))?>/,\"$2\").replace(/\\([^\\)]*\\)/g,\"\")||void 0;i.match(/\\(([^\\)]*)\\)/)&&(r=i.replace(/^[^\\(]+\\(([^\\)]*)\\)$/,\"$1\"));var s=void 0===r||\"[arguments not available]\"===r?void 0:r.split(\",\");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:n})},this)}}})},{stackframe:3}],2:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stack-generator\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(n){var r=[],t=10;\"object\"==typeof n&&\"number\"==typeof n.maxStackSize&&(t=n.maxStackSize);for(var o=arguments.callee;o&&r.length<t&&o.arguments;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\\s+([\\w$]+))+\\s*\\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch(s){break}}return r}}})},{stackframe:3}],3:[function(n,r,t){!function(n,o){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stackframe\",[],o):\"object\"==typeof t?r.exports=o():n.StackFrame=o()}(this,function(){\"use strict\";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function t(e){if(e instanceof Object)for(var r=0;r<u.length;r++)e.hasOwnProperty(u[r])&&void 0!==e[u[r]]&&this[\"set\"+n(u[r])](e[u[r]])}var o=[\"isConstructor\",\"isEval\",\"isNative\",\"isToplevel\"],i=[\"columnNumber\",\"lineNumber\"],a=[\"fileName\",\"functionName\",\"source\"],s=[\"args\"],u=o.concat(i,a,s);t.prototype={getArgs:function(){return this.args},setArgs:function(e){if(\"[object Array]\"!==Object.prototype.toString.call(e))throw new TypeError(\"Args must be an Array\");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof t)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError(\"Eval Origin must be an Object or StackFrame\");this.evalOrigin=new t(e)}},toString:function(){var n=this.getFunctionName()||\"{anonymous}\",r=\"(\"+(this.getArgs()||[]).join(\",\")+\")\",t=this.getFileName()?\"@\"+this.getFileName():\"\",o=e(this.getLineNumber())?\":\"+this.getLineNumber():\"\",i=e(this.getColumnNumber())?\":\"+this.getColumnNumber():\"\";return n+r+t+o+i}};for(var c=0;c<o.length;c++)t.prototype[\"get\"+n(o[c])]=r(o[c]),t.prototype[\"set\"+n(o[c])]=function(e){return function(n){this[e]=Boolean(n)}}(o[c]);for(var l=0;l<i.length;l++)t.prototype[\"get\"+n(i[l])]=r(i[l]),t.prototype[\"set\"+n(i[l])]=function(n){return function(r){if(!e(r))throw new TypeError(n+\" must be a Number\");this[n]=Number(r)}}(i[l]);for(var f=0;f<a.length;f++)t.prototype[\"get\"+n(a[f])]=r(a[f]),t.prototype[\"set\"+n(a[f])]=function(e){return function(n){this[e]=String(n)}}(a[f]);return t})},{}],4:[function(e,n,r){function t(){this._array=[],this._set=Object.create(null)}var o=e(\"./util\"),i=Object.prototype.hasOwnProperty;t.fromArray=function(e,n){for(var r=new t,o=0,i=e.length;o<i;o++)r.add(e[o],n);return r},t.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},t.prototype.add=function(e,n){var r=o.toSetString(e),t=i.call(this._set,r),a=this._array.length;t&&!n||this._array.push(e),t||(this._set[r]=a)},t.prototype.has=function(e){var n=o.toSetString(e);return i.call(this._set,n)},t.prototype.indexOf=function(e){var n=o.toSetString(e);if(i.call(this._set,n))return this._set[n];throw new Error('\"'+e+'\" is not in the set.')},t.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error(\"No element indexed by \"+e)},t.prototype.toArray=function(){return this._array.slice()},r.ArraySet=t},{\"./util\":10}],5:[function(e,n,r){function t(e){return e<0?(-e<<1)+1:(e<<1)+0}function o(e){var n=1===(1&e),r=e>>1;return n?-r:r}var i=e(\"./base64\"),a=5,s=1<<a,u=s-1,c=s;r.encode=function(e){var n,r=\"\",o=t(e);do n=o&u,o>>>=a,o>0&&(n|=c),r+=i.encode(n);while(o>0);return r},r.decode=function(e,n,r){var t,s,l=e.length,f=0,p=0;do{if(n>=l)throw new Error(\"Expected more digits in base 64 VLQ value.\");if(s=i.decode(e.charCodeAt(n++)),s===-1)throw new Error(\"Invalid base64 digit: \"+e.charAt(n-1));t=!!(s&c),s&=u,f+=s<<p,p+=a}while(t);r.value=o(f),r.rest=n}},{\"./base64\":6}],6:[function(e,n,r){var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\"\");r.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError(\"Must be between 0 and 63: \"+e)},r.decode=function(e){var n=65,r=90,t=97,o=122,i=48,a=57,s=43,u=47,c=26,l=52;return n<=e&&e<=r?e-n:t<=e&&e<=o?e-t+c:i<=e&&e<=a?e-i+l:e==s?62:e==u?63:-1}},{}],7:[function(e,n,r){function t(e,n,o,i,a,s){var u=Math.floor((n-e)/2)+e,c=a(o,i[u],!0);return 0===c?u:c>0?n-u>1?t(u,n,o,i,a,s):s==r.LEAST_UPPER_BOUND?n<i.length?n:-1:u:u-e>1?t(e,u,o,i,a,s):s==r.LEAST_UPPER_BOUND?u:e<0?-1:e}r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,n,o,i){if(0===n.length)return-1;var a=t(-1,n.length,e,n,o,i||r.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===o(n[a],n[a-1],!0);)--a;return a}},{}],8:[function(e,n,r){function t(e,n,r){var t=e[n];e[n]=e[r],e[r]=t}function o(e,n){return Math.round(e+Math.random()*(n-e))}function i(e,n,r,a){if(r<a){var s=o(r,a),u=r-1;t(e,s,a);for(var c=e[a],l=r;l<a;l++)n(e[l],c)<=0&&(u+=1,t(e,u,l));t(e,u+1,l);var f=u+1;i(e,n,r,f-1),i(e,n,f+1,a)}}r.quickSort=function(e,n){i(e,n,0,e.length-1)}},{}],9:[function(e,n,r){function t(e){var n=e;return\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\"))),null!=n.sections?new a(n):new o(n)}function o(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),t=s.getArg(n,\"sources\"),o=s.getArg(n,\"names\",[]),i=s.getArg(n,\"sourceRoot\",null),a=s.getArg(n,\"sourcesContent\",null),u=s.getArg(n,\"mappings\"),l=s.getArg(n,\"file\",null);if(r!=this._version)throw new Error(\"Unsupported version: \"+r);t=t.map(String).map(s.normalize).map(function(e){return i&&s.isAbsolute(i)&&s.isAbsolute(e)?s.relative(i,e):e}),this._names=c.fromArray(o.map(String),!0),this._sources=c.fromArray(t,!0),this.sourceRoot=i,this.sourcesContent=a,this._mappings=u,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function a(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),o=s.getArg(n,\"sections\");if(r!=this._version)throw new Error(\"Unsupported version: \"+r);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error(\"Support for url field in sections not implemented.\");var n=s.getArg(e,\"offset\"),r=s.getArg(n,\"line\"),o=s.getArg(n,\"column\");if(r<i.line||r===i.line&&o<i.column)throw new Error(\"Section offsets must be ordered and non-overlapping.\");return i=n,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new t(s.getArg(e,\"map\"))}})}var s=e(\"./util\"),u=e(\"./binary-search\"),c=e(\"./array-set\").ArraySet,l=e(\"./base64-vlq\"),f=e(\"./quick-sort\").quickSort;t.fromSourceMap=function(e){return o.fromSourceMap(e)},t.prototype._version=3,t.prototype.__generatedMappings=null,Object.defineProperty(t.prototype,\"_generatedMappings\",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),t.prototype.__originalMappings=null,Object.defineProperty(t.prototype,\"_originalMappings\",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),t.prototype._charIsMappingSeparator=function(e,n){var r=e.charAt(n);return\";\"===r||\",\"===r},t.prototype._parseMappings=function(e,n){throw new Error(\"Subclasses must implement _parseMappings\")},t.GENERATED_ORDER=1,t.ORIGINAL_ORDER=2,t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.prototype.eachMapping=function(e,n,r){var o,i=n||null,a=r||t.GENERATED_ORDER;switch(a){case t.GENERATED_ORDER:o=this._generatedMappings;break;case t.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error(\"Unknown order of iteration.\")}var u=this.sourceRoot;o.map(function(e){var n=null===e.source?null:this._sources.at(e.source);return null!=n&&null!=u&&(n=s.join(u,n)),{source:n,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},t.prototype.allGeneratedPositionsFor=function(e){var n=s.getArg(e,\"line\"),r={source:s.getArg(e,\"source\"),originalLine:n,originalColumn:s.getArg(e,\"column\",0)};if(null!=this.sourceRoot&&(r.source=s.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var t=[],o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var a=i.originalLine;i&&i.originalLine===a;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===n&&i.originalColumn==c;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o]}return t},r.SourceMapConsumer=t,o.prototype=Object.create(t.prototype),o.prototype.consumer=t,o.fromSourceMap=function(e){var n=Object.create(o.prototype),r=n._names=c.fromArray(e._names.toArray(),!0),t=n._sources=c.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file;for(var a=e._mappings.toArray().slice(),u=n.__generatedMappings=[],l=n.__originalMappings=[],p=0,g=a.length;p<g;p++){var h=a[p],m=new i;m.generatedLine=h.generatedLine,m.generatedColumn=h.generatedColumn,h.source&&(m.source=t.indexOf(h.source),m.originalLine=h.originalLine,m.originalColumn=h.originalColumn,h.name&&(m.name=r.indexOf(h.name)),l.push(m)),u.push(m)}return f(n.__originalMappings,s.compareByOriginalPositions),n},o.prototype._version=3,Object.defineProperty(o.prototype,\"sources\",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?s.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,n){for(var r,t,o,a,u,c=1,p=0,g=0,h=0,m=0,d=0,v=e.length,_=0,y={},w={},b=[],C=[];_<v;)if(\";\"===e.charAt(_))c++,_++,p=0;else if(\",\"===e.charAt(_))_++;else{for(r=new i,r.generatedLine=c,a=_;a<v&&!this._charIsMappingSeparator(e,a);a++);if(t=e.slice(_,a),o=y[t])_+=t.length;else{for(o=[];_<a;)l.decode(e,_,w),u=w.value,_=w.rest,o.push(u);if(2===o.length)throw new Error(\"Found a source, but no line and column\");if(3===o.length)throw new Error(\"Found a source and line, but no column\");y[t]=o}r.generatedColumn=p+o[0],p=r.generatedColumn,o.length>1&&(r.source=m+o[1],m+=o[1],r.originalLine=g+o[2],g=r.originalLine,r.originalLine+=1,r.originalColumn=h+o[3],h=r.originalColumn,o.length>4&&(r.name=d+o[4],d+=o[4])),C.push(r),\"number\"==typeof r.originalLine&&b.push(r)}f(C,s.compareByGeneratedPositionsDeflated),this.__generatedMappings=C,f(b,s.compareByOriginalPositions),this.__originalMappings=b},o.prototype._findMapping=function(e,n,r,t,o,i){if(e[r]<=0)throw new TypeError(\"Line must be greater than or equal to 1, got \"+e[r]);if(e[t]<0)throw new TypeError(\"Column must be greater than or equal to 0, got \"+e[t]);return u.search(e,n,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=this._findMapping(n,this._generatedMappings,\"generatedLine\",\"generatedColumn\",s.compareByGeneratedPositionsDeflated,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===n.generatedLine){var i=s.getArg(o,\"source\",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=s.join(this.sourceRoot,i)));var a=s.getArg(o,\"name\",null);return null!==a&&(a=this._names.at(a)),{source:i,line:s.getArg(o,\"originalLine\",null),column:s.getArg(o,\"originalColumn\",null),name:a}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=s.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=s.urlParse(this.sourceRoot))){var t=e.replace(/^file:\\/\\//,\"\");if(\"file\"==r.scheme&&this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];if((!r.path||\"/\"==r.path)&&this._sources.has(\"/\"+e))return this.sourcesContent[this._sources.indexOf(\"/\"+e)]}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var n=s.getArg(e,\"source\");if(null!=this.sourceRoot&&(n=s.relative(this.sourceRoot,n)),!this._sources.has(n))return{line:null,column:null,lastColumn:null};n=this._sources.indexOf(n);var r={source:n,originalLine:s.getArg(e,\"line\"),originalColumn:s.getArg(e,\"column\")},o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=o,a.prototype=Object.create(t.prototype),a.prototype.constructor=t,a.prototype._version=3,Object.defineProperty(a.prototype,\"sources\",{get:function(){for(var e=[],n=0;n<this._sections.length;n++)for(var r=0;r<this._sections[n].consumer.sources.length;r++)e.push(this._sections[n].consumer.sources[r]);return e}}),a.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=u.search(n,this._sections,function(e,n){var r=e.generatedLine-n.generatedOffset.generatedLine;return r?r:e.generatedColumn-n.generatedOffset.generatedColumn}),t=this._sections[r];return t?t.consumer.originalPositionFor({line:n.generatedLine-(t.generatedOffset.generatedLine-1),column:n.generatedColumn-(t.generatedOffset.generatedLine===n.generatedLine?t.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},a.prototype.sourceContentFor=function(e,n){for(var r=0;r<this._sections.length;r++){var t=this._sections[r],o=t.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer.sources.indexOf(s.getArg(e,\"source\"))!==-1){var t=r.consumer.generatedPositionFor(e);if(t){var o={line:t.line+(r.generatedOffset.generatedLine-1),column:t.column+(r.generatedOffset.generatedLine===t.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},a.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var t=this._sections[r],o=t.consumer._generatedMappings,i=0;i<o.length;i++){var a=o[i],u=t.consumer._sources.at(a.source);null!==t.consumer.sourceRoot&&(u=s.join(t.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var c=t.consumer._names.at(a.name);this._names.add(c),c=this._names.indexOf(c);var l={source:u,generatedLine:a.generatedLine+(t.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(t.generatedOffset.generatedLine===a.generatedLine?t.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),\"number\"==typeof l.originalLine&&this.__originalMappings.push(l)}f(this.__generatedMappings,s.compareByGeneratedPositionsDeflated),f(this.__originalMappings,s.compareByOriginalPositions)},r.IndexedSourceMapConsumer=a},{\"./array-set\":4,\"./base64-vlq\":5,\"./binary-search\":7,\"./quick-sort\":8,\"./util\":10}],10:[function(e,n,r){function t(e,n,r){if(n in e)return e[n];if(3===arguments.length)return r;throw new Error('\"'+n+'\" is a required argument.')}function o(e){var n=e.match(v);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var n=\"\";return e.scheme&&(n+=e.scheme+\":\"),n+=\"//\",e.auth&&(n+=e.auth+\"@\"),e.host&&(n+=e.host),e.port&&(n+=\":\"+e.port),e.path&&(n+=e.path),n}function a(e){var n=e,t=o(e);if(t){if(!t.path)return e;n=t.path}for(var a,s=r.isAbsolute(n),u=n.split(/\\/+/),c=0,l=u.length-1;l>=0;l--)a=u[l],\".\"===a?u.splice(l,1):\"..\"===a?c++:c>0&&(\"\"===a?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return n=u.join(\"/\"),\"\"===n&&(n=s?\"/\":\".\"),t?(t.path=n,i(t)):n}function s(e,n){\"\"===e&&(e=\".\"),\"\"===n&&(n=\".\");var r=o(n),t=o(e);if(t&&(e=t.path||\"/\"),r&&!r.scheme)return t&&(r.scheme=t.scheme),i(r);if(r||n.match(_))return n;if(t&&!t.host&&!t.path)return t.host=n,i(t);var s=\"/\"===n.charAt(0)?n:a(e.replace(/\\/+$/,\"\")+\"/\"+n);return t?(t.path=s,i(t)):s}function u(e,n){\"\"===e&&(e=\".\"),e=e.replace(/\\/$/,\"\");for(var r=0;0!==n.indexOf(e+\"/\");){var t=e.lastIndexOf(\"/\");if(t<0)return n;if(e=e.slice(0,t),e.match(/^([^\\/]+:\\/)?\\/*$/))return n;++r}return Array(r+1).join(\"../\")+n.substr(e.length+1)}function c(e){return e}function l(e){return p(e)?\"$\"+e:e}function f(e){return p(e)?e.slice(1):e}function p(e){if(!e)return!1;var n=e.length;if(n<9)return!1;if(95!==e.charCodeAt(n-1)||95!==e.charCodeAt(n-2)||111!==e.charCodeAt(n-3)||116!==e.charCodeAt(n-4)||111!==e.charCodeAt(n-5)||114!==e.charCodeAt(n-6)||112!==e.charCodeAt(n-7)||95!==e.charCodeAt(n-8)||95!==e.charCodeAt(n-9))return!1;for(var r=n-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function g(e,n,r){var t=e.source-n.source;return 0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t||r?t:(t=e.generatedColumn-n.generatedColumn,0!==t?t:(t=e.generatedLine-n.generatedLine,0!==t?t:e.name-n.name))))}function h(e,n,r){var t=e.generatedLine-n.generatedLine;return 0!==t?t:(t=e.generatedColumn-n.generatedColumn,0!==t||r?t:(t=e.source-n.source,0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t?t:e.name-n.name))))}function m(e,n){return e===n?0:e>n?1:-1}function d(e,n){var r=e.generatedLine-n.generatedLine;return 0!==r?r:(r=e.generatedColumn-n.generatedColumn,0!==r?r:(r=m(e.source,n.source),0!==r?r:(r=e.originalLine-n.originalLine,0!==r?r:(r=e.originalColumn-n.originalColumn,0!==r?r:m(e.name,n.name)))))}r.getArg=t;var v=/^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/,_=/^data:.+\\,.+$/;r.urlParse=o,r.urlGenerate=i,r.normalize=a,r.join=s,r.isAbsolute=function(e){return\"/\"===e.charAt(0)||!!e.match(v)},r.relative=u;var y=function(){var e=Object.create(null);return!(\"__proto__\"in e)}();r.toSetString=y?c:l,r.fromSetString=y?c:f,r.compareByOriginalPositions=g,r.compareByGeneratedPositionsDeflated=h,r.compareByGeneratedPositionsInflated=d},{}],11:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace-gps\",[\"source-map\",\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"source-map/lib/source-map-consumer\"),n(\"stackframe\")):o.StackTraceGPS=i(o.SourceMap||o.sourceMap,o.StackFrame)}(this,function(e,n){\"use strict\";function r(e){return new Promise(function(n,r){var t=new XMLHttpRequest;t.open(\"get\",e),t.onerror=r,t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<300||\"file://\"===e.substr(0,7)&&t.responseText?n(t.responseText):r(new Error(\"HTTP status: \"+t.status+\" retrieving \"+e)))},t.send()})}function t(e){if(\"undefined\"!=typeof window&&window.atob)return window.atob(e);throw new Error(\"You must supply a polyfill for window.atob in this environment\")}function o(e){if(\"undefined\"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error(\"You must supply a polyfill for JSON.parse in this environment\")}function i(e,n){for(var r=[/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/,/function\\s+([^('\"`]*?)\\s*\\(([^)]*)\\)/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/,/\\b(?!(?:if|for|switch|while|with|catch)\\b)(?:(?:static)\\s+)?(\\S+)\\s*\\(.*?\\)\\s*\\{/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*\\(.*?\\)\\s*=>/],t=e.split(\"\\n\"),o=\"\",i=Math.min(n,20),a=0;a<i;++a){var s=t[n-a-1],u=s.indexOf(\"//\");if(u>=0&&(s=s.substr(0,u)),s){o=s+o;for(var c=r.length,l=0;l<c;l++){var f=r[l].exec(o);if(f&&f[1])return f[1]}}}}function a(){if(\"function\"!=typeof Object.defineProperty||\"function\"!=typeof Object.create)throw new Error(\"Unable to consume source maps in older browsers\")}function s(e){if(\"object\"!=typeof e)throw new TypeError(\"Given StackFrame is not an object\");if(\"string\"!=typeof e.fileName)throw new TypeError(\"Given file name is not a String\");if(\"number\"!=typeof e.lineNumber||e.lineNumber%1!==0||e.lineNumber<1)throw new TypeError(\"Given line number must be a positive integer\");if(\"number\"!=typeof e.columnNumber||e.columnNumber%1!==0||e.columnNumber<0)throw new TypeError(\"Given column number must be a non-negative integer\");return!0}function u(e){for(var n,r,t=/\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/gm;r=t.exec(e);)n=r[1];if(n)return n;throw new Error(\"sourceMappingURL not found\")}function c(e,r,t){return new Promise(function(o,i){var a=r.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(a.source){var s=r.sourceContentFor(a.source);s&&(t[a.source]=s),o(new n({functionName:a.name||e.functionName,args:e.args,fileName:a.source,lineNumber:a.line,columnNumber:a.column}))}else i(new Error(\"Could not get original source for given stackframe and source map\"))})}return function l(f){return this instanceof l?(f=f||{},this.sourceCache=f.sourceCache||{},this.sourceMapConsumerCache=f.sourceMapConsumerCache||{},this.ajax=f.ajax||r,this._atob=f.atob||t,this._get=function(e){return new Promise(function(n,r){var t=\"data:\"===e.substr(0,5);if(this.sourceCache[e])n(this.sourceCache[e]);else if(f.offline&&!t)r(new Error(\"Cannot make network requests in offline mode\"));else if(t){var o=/^data:application\\/json;([\\w=:\"-]+;)*base64,/,i=e.match(o);if(i){var a=i[0].length,s=e.substr(a),u=this._atob(s);this.sourceCache[e]=u,n(u)}else r(new Error(\"The encoding of the inline sourcemap is not supported\"))}else{var c=this.ajax(e,{method:\"get\"});this.sourceCache[e]=c,c.then(n,r)}}.bind(this))},this._getSourceMapConsumer=function(n,r){return new Promise(function(t,i){if(this.sourceMapConsumerCache[n])t(this.sourceMapConsumerCache[n]);else{var a=new Promise(function(t,i){return this._get(n).then(function(n){\"string\"==typeof n&&(n=o(n.replace(/^\\)\\]\\}'/,\"\"))),\"undefined\"==typeof n.sourceRoot&&(n.sourceRoot=r),t(new e.SourceMapConsumer(n))},i)}.bind(this));this.sourceMapConsumerCache[n]=a,t(a)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(n,r){this.getMappedLocation(e).then(function(e){function r(){n(e)}this.findFunctionName(e).then(n,r)[\"catch\"](r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(r,t){s(e),this._get(e.fileName).then(function(t){var o=e.lineNumber,a=e.columnNumber,s=i(t,o,a);r(s?new n({functionName:s,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:a}):e)},t)[\"catch\"](t)}.bind(this))},void(this.getMappedLocation=function(e){return new Promise(function(n,r){a(),s(e);var t=this.sourceCache,o=e.fileName;this._get(o).then(function(r){var i=u(r),a=\"data:\"===i.substr(0,5),s=o.substring(0,o.lastIndexOf(\"/\")+1);return\"/\"===i[0]||a||/^https?:\\/\\/|^\\/\\//i.test(i)||(i=s+i),this._getSourceMapConsumer(i,s).then(function(r){return c(e,r,t).then(n)[\"catch\"](function(){n(e)})})}.bind(this),r)[\"catch\"](r)}.bind(this))})):new l(f)}})},{\"source-map/lib/source-map-consumer\":9,stackframe:3}],12:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace\",[\"error-stack-parser\",\"stack-generator\",\"stacktrace-gps\"],i):\"object\"==typeof t?r.exports=i(n(\"error-stack-parser\"),n(\"stack-generator\"),n(\"stacktrace-gps\")):o.StackTrace=i(o.ErrorStackParser,o.StackGenerator,o.StackTraceGPS)}(this,function(e,n,r){function t(e,n){var r={};return[e,n].forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}),r}function o(e){return e.stack||e[\"opera#sourceloc\"]}function i(e,n){return\"function\"==typeof n?e.filter(n):e}var a={filter:function(e){return(e.functionName||\"\").indexOf(\"StackTrace$$\")===-1&&(e.functionName||\"\").indexOf(\"ErrorStackParser$$\")===-1&&(e.functionName||\"\").indexOf(\"StackTraceGPS$$\")===-1&&(e.functionName||\"\").indexOf(\"StackGenerator$$\")===-1},sourceCache:{}},s=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var n=s();return o(n)?this.fromError(n,e):this.generateArtificially(e)},getSync:function(r){r=t(a,r);var u=s(),c=o(u)?e.parse(u):n.backtrace(r);return i(c,r.filter)},fromError:function(n,o){o=t(a,o);var s=new r(o);return new Promise(function(r){var t=i(e.parse(n),o.filter);r(Promise.all(t.map(function(e){return new Promise(function(n){function r(){n(e)}s.pinpoint(e).then(n,r)[\"catch\"](r)})})))}.bind(this))},generateArtificially:function(e){e=t(a,e);var r=n.backtrace(e);return\"function\"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,n,r,t){if(\"function\"!=typeof e)throw new Error(\"Cannot instrument non-function object\");if(\"function\"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(n,r)[\"catch\"](r),e.apply(t||this,arguments)}catch(i){throw o(i)&&this.fromError(i).then(n,r)[\"catch\"](r),i}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if(\"function\"!=typeof e)throw new Error(\"Cannot de-instrument non-function object\");return\"function\"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,n,r,t){return new Promise(function(o,i){var a=new XMLHttpRequest;if(a.onerror=i,a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<400?o(a.responseText):i(new Error(\"POST to \"+n+\" failed with status: \"+a.status)))},a.open(\"post\",n),a.setRequestHeader(\"Content-Type\",\"application/json\"),t&&\"object\"==typeof t.headers){var s=t.headers;for(var u in s)s.hasOwnProperty(u)&&a.setRequestHeader(u,s[u])}var c={stack:e};void 0!==r&&null!==r&&(c.message=r),a.send(JSON.stringify(c))})}}})},{\"error-stack-parser\":1,\"stack-generator\":2,\"stacktrace-gps\":11}]},{},[12])(12)});\r\n\r\n\r\n},{}],9:[function(require,module,exports){\r\nclass FileMap {\r\n    constructor(){this.sidesList=[];}\r\n    add(sides) {// {sideA:path, sideB:path}\r\n        this.sidesList.push(sides);\r\n    }\r\n    convert(path, fromSide, toSide) {\r\n        for (let sides of this.sidesList) {\r\n            if (path.startsWith(sides[fromSide])) {\r\n                return sides[toSide]+path.substring(sides[fromSide].length);\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n}\r\nmodule.exports=FileMap;\r\n\r\n},{}],10:[function(require,module,exports){\r\n/*global Worker*/\r\n// Browser Side\r\nlet idseq=0;\r\nclass Wrapper {\r\n    constructor(worker) {\r\n        const t=this;\r\n        t.idseq=1;\r\n        t.queue={};\r\n        t.worker=worker;\r\n        t.readyQueue=[];\r\n        worker.addEventListener(\"message\",function (e) {\r\n            var d=e.data;\r\n            if (d.reverse) {\r\n                t.procReverse(e);\r\n            } else if (d.ready) {\r\n                t.ready();\r\n            } else if (d.id) {\r\n                t.queue[d.id](d);\r\n                delete t.queue[d.id];\r\n            }\r\n        });\r\n        t.run(\"WorkerService/isReady\").then(function (r) {\r\n            if (r) t.ready();\r\n        });\r\n    }\r\n    procReverse(e) {\r\n        const t=this;\r\n        var d=e.data;\r\n        var id=d.id;\r\n        var path=d.path;\r\n        var params=d.params;\r\n        try {\r\n            Promise.resolve(paths[path](params)).then(function (r) {\r\n                t.worker.postMessage({\r\n                    reverse:true,\r\n                    status:\"ok\",\r\n                    id:id,\r\n                    result: r\r\n                });\r\n            },sendError);\r\n        } catch(err) {\r\n            sendError(err);\r\n        }\r\n        function sendError(e) {\r\n            e=Object.assign({name:e.name, message:e.message, stack:e.stack},e||{});\r\n            try {\r\n                const j=JSON.stringify(e);\r\n                e=JSON.parse(j);\r\n            } catch(je) {\r\n                e=e ? e.message || e+\"\" : \"unknown\";\r\n                console.log(\"WorkerServiceW\", je, e);\r\n            }\r\n            t.worker.postMessage({\r\n                reverse: true,\r\n                id:id, error:e, status:\"error\"\r\n            });\r\n        }\r\n    }\r\n    ready() {\r\n        const t=this;\r\n        if (t.isReady) return;\r\n        t.isReady=true;\r\n        console.log(\"Worker is ready!\");\r\n        t.readyQueue.forEach(function (f){ f();});\r\n    }\r\n    readyPromise() {\r\n        const t=this;\r\n        return new Promise(function (succ) {\r\n            if (t.isReady) return succ();\r\n            t.readyQueue.push(succ);\r\n        });\r\n    }\r\n    run(path, params) {\r\n        const t=this;\r\n        return t.readyPromise().then(function() {\r\n            return new Promise(function (succ,err) {\r\n                var id=t.idseq++;\r\n                t.queue[id]=function (e) {\r\n                    //console.log(\"Status\",e);\r\n                    if (e.status==\"ok\") {\r\n                        succ(e.result);\r\n                    } else {\r\n                        err(e.error);\r\n                    }\r\n                };\r\n                t.worker.postMessage({\r\n                    id: id,\r\n                    path: path,\r\n                    params: params\r\n                });\r\n            });\r\n        });\r\n    }\r\n    terminate() {\r\n        const t=this;\r\n        t.worker.terminate();\r\n    }\r\n}\r\nvar paths={};\r\nconst WorkerService={\r\n    Wrapper:Wrapper,\r\n    load: function (src) {\r\n        var w=new Worker(src);\r\n        return new Wrapper(w);\r\n    },\r\n    install: function (path, func) {\r\n        paths[path]=func;\r\n    },\r\n    serv: function (path,func) {\r\n        this.install(path,func);\r\n    }\r\n};\r\nWorkerService.serv(\"console/log\", function (params){\r\n    console.log.apply(console,params);\r\n});\r\nmodule.exports=WorkerService;\r\n\r\n},{}],11:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],12:[function(require,module,exports){\r\n/*define(function (require,exports,module) {\r\n    const F=require(\"ProjectFactory\");\r\n    const root=require(\"root\");\r\n    const SourceFiles=require(\"SourceFiles\");\r\n    const langMod=require(\"langMod\");\r\n    */\r\n    const F=require(\"./ProjectFactory\");\r\n    const root=require(\"../lib/root\");\r\n    const SourceFiles=require(\"../lang/SourceFiles\");\r\n    //const A=require(\"../lib/assert\");\r\n    const langMod=require(\"../lang/langMod\");\r\n\r\n    F.addType(\"compiled\",params=> {\r\n        if (params.namespace && params.url) return urlBased(params);\r\n        if (params.dir) return dirBased(params);\r\n        console.error(\"Invalid compiled project\", params);\r\n        throw new Error(\"Invalid compiled project\");\r\n    });\r\n    function urlBased(params) {\r\n        const ns=params.namespace;\r\n        const url=params.url;\r\n        const res=F.createCore();\r\n        return res.include(langMod).include({\r\n            getNamespace:function () {return ns;},\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes ns=\",ns,\"url=\",url);\r\n                await this.loadDependingClasses();\r\n                const s=SourceFiles.add({url});\r\n                await s.exec();\r\n                console.log(\"Loaded compiled classes ns=\",ns,\"url=\",url);\r\n            },\r\n        });\r\n    }\r\n    function dirBased(params) {\r\n        const res=F.createDirBasedCore(params);\r\n        return res.include(langMod).include({\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes params=\",params);\r\n                await this.loadDependingClasses();\r\n                const outJS=this.getOutputFile();\r\n                const map=outJS.sibling(outJS.name()+\".map\");\r\n                const sf=SourceFiles.add({\r\n                    text:outJS.text(),\r\n                    sourceMap:map.exists() && map.text(),\r\n                });\r\n                await sf.exec();\r\n                console.log(\"Loaded compiled classes params=\",params);\r\n            }\r\n        });\r\n    }\r\n    exports.create=params=>F.create(\"compiled\",params);\r\n    F.addDependencyResolver((prj, spec)=> {\r\n        if (spec.dir && prj.resolve) {\r\n            return F.create(\"compiled\",{dir:prj.resolve(spec.dir)});\r\n        }\r\n        if (spec.namespace && spec.url) {\r\n            return F.create(\"compiled\",spec);\r\n        }\r\n    });\r\n//});/*--end of define--*/\r\n\r\n},{\"../lang/SourceFiles\":4,\"../lang/langMod\":6,\"../lib/root\":11,\"./ProjectFactory\":13}],13:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n    // This factory will be widely used, even BitArrow.\r\n\r\n\r\n    let Compiler, SourceFiles,sysMod,run2Mod;\r\n    const  resolvers=[],types={};\r\n    exports.addDependencyResolver=(f)=>{\r\n        //f: (prj, spec) => prj\r\n        resolvers.push(f);\r\n    };\r\n    exports.addType=(n,f)=>{\r\n        types[n]=f;\r\n    };\r\n    exports.fromDependencySpec=function (prj,spec) {\r\n        if (typeof spec==\"string\") {\r\n            var prjDir=prj.resolve(spec);\r\n            return this.fromDir(prjDir);\r\n        }\r\n        for (let f of resolvers) {\r\n            const res=f(prj,spec);\r\n            if (res) return res;\r\n        }\r\n        console.error(\"Invalid dep spec\", spec);\r\n        throw new Error(\"Invalid dep spec\", spec);\r\n        /* else if (typeof dprj==\"object\") {\r\n            return this.create(\"compiled\", {\r\n                namespace:dprj.namespace,\r\n                url: FS.expandPath(dprj.compiledURL)\r\n            });\r\n        }*/\r\n    };\r\n    exports.create=function (type,params) {\r\n        if (!types[type]) throw new Error(`Invalid type ${type}`);\r\n        return types[type](params);\r\n    };\r\n    class ProjectCore {\r\n        getPublishedURL(){}//TODO\r\n        getOptions(opt) {return {};}//stub\r\n        getName() {\r\n            return this.dir.name().replace(/\\/$/,\"\");\r\n        }\r\n        getDependingProjects() {\r\n            var opt=this.getOptions();\r\n            var dp=(opt.compiler && opt.compiler.dependingProjects) || [];\r\n            return dp.map(dprj=>\r\n                ProjectCore.factory.fromDependencySpec(this,dprj)\r\n            );\r\n        }\r\n        include(mod) {\r\n            for (let k of Object.getOwnPropertyNames(mod)) {\r\n                if (typeof mod[k]===\"function\") this[k]=mod[k];\r\n            }\r\n            return this;\r\n        }\r\n        delegate(obj) {\r\n            if (obj.constructor.prototype) {\r\n                const add=k=>{\r\n                    if (typeof obj[k]===\"function\") this[k]=(...args)=>obj[k](...args);\r\n                };\r\n                for (let k of Object.getOwnPropertyNames(obj.constructor.prototype)) add(k);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n    ProjectCore.factory=exports;\r\n    exports.createCore=()=>new ProjectCore();\r\n    const dirBasedMod={\r\n        getDir() {return this.dir;},\r\n        resolve(rdir){// not in compiledProject\r\n            if (rdir instanceof Array) {\r\n                var res=[];\r\n                rdir.forEach(function (e) {\r\n                    res.push(this.resolve(e));\r\n                });\r\n                return res;\r\n            }\r\n            if (typeof rdir==\"string\") {\r\n                /*global FS*/ //TODO\r\n                if (typeof FS!==\"undefined\") {\r\n                    return FS.resolve(rdir, this.getDir().path());\r\n                } else {\r\n                    return this.getDir().rel(rdir);\r\n                }\r\n            }\r\n            if (!rdir || !rdir.isDir) throw new Error(\"Cannot TPR.resolve: \"+rdir);\r\n            return rdir;\r\n        },\r\n        getOptions(opt) {\r\n            return this.getOptionsFile().obj();\r\n        },\r\n        getOptionsFile() {// not in compiledProject\r\n            var resFile=this.dir.rel(\"options.json\");\r\n            return resFile;\r\n        },\r\n        setOptions(opt) {// not in compiledProject\r\n            return this.getOptionsFile().obj(opt);\r\n        },\r\n        getOutputFile(lang) {// not in compiledProject\r\n            var opt=this.getOptions();\r\n            var outF=this.resolve(opt.compiler.outputFile||\"js/concat.js\");\r\n            if (outF.isDir()) {\r\n                throw new Error(\"out: directory style not supported\");\r\n            }\r\n            return outF;\r\n        },\r\n        removeOutputFile() {// not in compiledProject\r\n            this.getOutputFile().rm();\r\n        },\r\n        path(){return this.dir.path();},// not in compiledProject\r\n        getEXT() {throw new Error(\"getEXT must be overriden.\");},//stub\r\n        sourceFiles() {\r\n            const res={};\r\n            const ext=this.getEXT();\r\n    \t\tthis.dir.recursive(collect);\r\n    \t\tfunction collect(f) {\r\n    \t\t\tif (f.endsWith(ext)) {\r\n    \t\t\t\tvar nb=f.truncExt(ext);\r\n    \t\t\t\tres[nb]=f;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn res;\r\n        }\r\n    };\r\n    exports.createDirBasedCore=function (params) {\r\n        const res=this.createCore();\r\n        res.dir=params.dir;\r\n        return res.include(dirBasedMod);\r\n    };\r\n//});/*--end of define--*/\r\n\r\n},{}]},{},[2])(2)\r\n});\r\n\ndefine('ProjectFactory',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.ProjectFactory;\r\n});\r\n\ndefine('BuilderClient',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient;\r\n});\r\n\ndefine('Content',[\"FS\"],function (FS){return FS.Content;});\r\n\ndefine('thumbnail',[\"ImageRect\",\"Content\",\"root\"],function (IR,Content,root) {\r\n    var TN={};\r\n    var createThumbnail;\r\n    var NAME=\"$icon_thumbnail\";\r\n    var WIDTH=200,HEIGHT=200;\r\n    TN.set=function (prj,delay) {\r\n        setTimeout(function () { crt(prj);} ,delay);\r\n    };\r\n    TN.get=function (prj) {\r\n        var f=TN.file(prj);\r\n        if (!f.exists()) return null;\r\n        return f.text();\r\n    };\r\n    TN.file=function (prj) {\r\n        var prjdir=prj.getDir();\r\n        var imfile= prjdir.rel(\"images/\").rel(\"icon_thumbnail.png\");\r\n        //console.log(\"Thumb file=\",imfile.path(),imfile.exists());\r\n        return imfile;\r\n    };\r\n    function crt(prj) {\r\n        try {\r\n            var img=root.Tonyu.globals.$Screen.buf[0];\r\n            var cv=$(\"<canvas>\").attr({width:WIDTH,height:HEIGHT});\r\n            IR(img, cv[0]);\r\n            var url=cv[0].toDataURL();\r\n            var rsrc=prj.getResource();\r\n            var prjdir=prj.getDir();\r\n            var imfile=TN.file(prj);\r\n            imfile.text( url );\r\n            var item={\r\n                name:NAME,\r\n                pwidth:WIDTH,pheight:HEIGHT,\r\n                url:\"ls:\"+imfile.relPath(prjdir)\r\n            };\r\n            var imgs=rsrc.images;\r\n            var add=false;\r\n            for (var i=0 ; i<imgs.length ; i++) {\r\n                if (imgs[i].name==NAME) {\r\n                    imgs[i]=item;\r\n                    add=true;\r\n                }\r\n            }\r\n            if (!add) imgs.push(item);\r\n\r\n            prj.setResource(rsrc);\r\n            console.log(\"setRSRC\",rsrc);\r\n        } catch (e) {\r\n            console.log(\"Create thumbnail failed\",e);\r\n            console.log(e.stack);\r\n        }\r\n    }\r\n    return TN;\r\n});\r\n\ndefine('plugins',[\"WebSite\",\"root\"],function (WebSite,root){\r\n    var plugins={};\r\n    var installed= {\r\n        box2d:{src: \"Box2dWeb-2.1.a.3.min.js\",detection:/BodyActor/,symbol:\"Box2D\" },\r\n        timbre: {src:\"timbre.js\",symbol:\"T\" },\r\n        gif: {src:\"gif-concat.js\",detection:/GIFWriter/,symbol:\"GIF\"},\r\n        Mezonet: {src:\"Mezonet.js\", symbol: \"Mezonet\"},\r\n        PicoAudio: {src:\"PicoAudio.min.js\", symbol:\"PicoAudio\"},\r\n        // single js is required for runScript1.js\r\n        jquery_ui: {src:\"jquery-ui.js\", detection:/\\$InputBox/,symbol:\"$.ui\"}\r\n    };\r\n    plugins.installed=installed;\r\n    plugins.detectNeeded=function (src,res) {\r\n        for (var name in installed) {\r\n            var d=installed[name].detection;\r\n            if (d) {\r\n                var r=d.exec(src);\r\n                if (r) res[name]=1;\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    plugins.loaded=function (name) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        return hasInGlobal(i.symbol);\r\n    };\r\n    function hasInGlobal(name) {\r\n        // name: dot ok\r\n        var g=window;\r\n        name.split(\".\").forEach(function (e) {\r\n            if (!g) return;\r\n            g=g[e];\r\n        });\r\n        return g;\r\n    }\r\n    plugins.loadAll=function (names,options) {\r\n        options=convOpt(options);\r\n        var namea=[];\r\n        for (var name in names) {\r\n            if (installed[name] && !plugins.loaded(name)) {\r\n                namea.push(name);\r\n            }\r\n        }\r\n        var i=0;\r\n        console.log(\"loading plugins\",namea);\r\n        setTimeout(loadNext,0);\r\n        function loadNext() {\r\n            if (i>=namea.length) options.onload();\r\n            else plugins.load(namea[i++],loadNext);\r\n        }\r\n    };\r\n    function convOpt(options) {\r\n        if (typeof options==\"function\") options={onload:options};\r\n        if (!options) options={};\r\n        if (!options.onload) options.onload=function (){};\r\n        return options;\r\n    }\r\n    plugins.load=function (name,options) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        options=convOpt(options);\r\n        var src=WebSite.pluginTop+\"/\"+i.src;\r\n        var reqj=root.requirejs;\r\n        /*if (typeof requireSimulator===\"undefined\") {\r\n            if (typeof requirejs===\"function\") reqj=requirejs;\r\n        } else {\r\n            if (requireSimulator.real) reqj=requireSimulator.real.requirejs;\r\n        }*/\r\n        if (reqj) {\r\n            src=src.replace(/\\.js$/,\"\");\r\n            console.log(\"Loading plugin via requirejs\",src);\r\n            reqj([src], function (res) {\r\n                if (!window[i.symbol] && res) window[i.symbol]=res;\r\n                options.onload(res);\r\n            });\r\n        } else {\r\n            console.log(\"Loading plugin via <script>\",src);\r\n            var s=document.createElement(\"script\");\r\n            s.src=src;\r\n            s.onload=options.onload;\r\n            document.body.appendChild(s);\r\n            //$(\"<script>\").on(\"load\",options.onload).attr(\"src\",src).appendTo(\"body\");\r\n        }\r\n        //setTimeout(options.onload,500);\r\n\r\n    };\r\n    plugins.request=function (name) {\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"Plugin \"+name+\" required\");\r\n        req.pluginName=name;\r\n    };\r\n    return plugins;\r\n});\r\n\ndefine('DeferredUtil',[\"FS\"],function (FS){return FS.DeferredUtil;});\r\n\ndefine('sysMod',[\"Tonyu\", \"FS\", \"ImageList\",\r\n        \"Blob\",\"thumbnail\",\"WebSite\",\"plugins\",\r\n        \"DeferredUtil\"],\r\n        function (Tonyu, FS, ImageList,\r\n                Blob,thumbnail,WebSite,plugins,\r\n                DU) {\r\n// (was TonyuProject)\r\nreturn {\r\n    /*stop:function () {\r\n        var cur=this.runningThread; // Tonyu.getGlobal(\"$currentThreadGroup\");\r\n        if (cur) cur.kill();\r\n        var main=this.runningObj;\r\n        if (main && main.stop) return main.stop();\r\n    },*/\r\n    rawRun:function (bootClassName) {\r\n        if (WebSite.removeJSOutput) {\r\n            var o=this.getOutputFile();\r\n            if (o.exists()) o.rm();\r\n        }\r\n        return this.loadClasses().then(()=>{\r\n            //TPR.compile();\r\n            this.detectPlugins();\r\n            this.fixBootRunClasses();\r\n            if (!this.runScriptMode) thumbnail.set(this, 2000);\r\n            this.rawBoot(bootClassName);\r\n        });\r\n    },\r\n    getResourceFile: function () {\r\n        return this.getDir().rel(\"res.json\");\r\n    },\r\n    getResource: function () {\r\n        var resFile=this.getResourceFile();\r\n        if (resFile.exists()) {\r\n            var res=resFile.obj();\r\n            var chg=false;\r\n            for (var imgSnd in res) {\r\n                var ary=res[imgSnd];\r\n                for (var i=ary.length-1; i>=0 ;i--) {\r\n                    if (!ary[i].url) {\r\n                        ary.splice(i,1);\r\n                        chg=true;\r\n                    }\r\n                }\r\n            }\r\n            if (chg) this.setResource(res);\r\n            return res;\r\n        }\r\n        return Tonyu.defaultResource;\r\n    },\r\n    hasSoundResource: function () {\r\n        var res=this.getResource();\r\n        return res && res.sounds && res.sounds.length>0;\r\n    },\r\n    setResource: function (rsrc) {\r\n        var resFile=this.getResourceFile();\r\n        resFile.obj(rsrc);\r\n    },\r\n    getThumbnail: function () {\r\n        return thumbnail.get(this);\r\n    },\r\n    convertBlobInfos: function (user) {\r\n        var rsrc=this.getResource();\r\n        var name=this.getName();\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        o[k]=[Blob.BLOB_PATH_EXPR,user,name,a.fileName].join(\"/\");\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        this.setResource(rsrc);\r\n    },\r\n    getBlobInfos: function () {\r\n        var rsrc=this.getResource();\r\n        var res=[];\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        res.push(a);\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        return res;\r\n    },\r\n    loadResource: function (next) {\r\n        var r=this.getResource();\r\n        ImageList( r.images, function (r) {\r\n            var sp=Tonyu.getGlobal(\"$Sprites\");\r\n            if (sp) {\r\n                //console.log(\"$Sprites set!\");\r\n                sp.setImageList(r);\r\n            }\r\n            //Sprites.setImageList(r);\r\n            for (var i in r.names) {\r\n                Tonyu.setGlobal(i, r.names[i]);\r\n            }\r\n            if (next) next();\r\n        });\r\n    },\r\n    detectPlugins: function () {\r\n        var opt=this.getOptions();\r\n        var plugins=opt.plugins=opt.plugins||{};\r\n        if (!plugins.Mezonet || !plugins.PicoAudio) {\r\n            var res=this.getResource();\r\n            var hasMZO=false,hasMIDI=false;\r\n            if (res.sounds) res.sounds.forEach(function (item) {\r\n                if (item.url.match(/\\.mzo/)) hasMZO=true;\r\n                if (item.url.match(/\\.midi?/)) hasMIDI=true;\r\n            });\r\n            if (hasMZO) this.addPlugin(\"Mezonet\");\r\n            else this.removePlugin(\"Mezonet\");\r\n            if (hasMIDI) this.addPlugin(\"PicoAudio\");\r\n            else this.removePlugin(\"PicoAudio\");\r\n        }\r\n    },\r\n    addPlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        opt.plugins=opt.plugins||{};\r\n        if (!opt.plugins[name]) {\r\n            opt.plugins[name]=1;\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    removePlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        if (opt.plugins[name]) {\r\n            delete opt.plugins[name];\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    requestPlugin: function (name) {\r\n        this.addPlugin(name);\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"\"+name+\"\");\r\n        req.pluginName=name;\r\n        throw req;\r\n    },\r\n    loadPlugins: function (onload) {\r\n        var opt=this.getOptions();\r\n        return plugins.loadAll(opt.plugins,onload);\r\n    },\r\n    fixBootRunClasses: function () {\r\n        var opt=this.getOptions();\r\n        if (opt.run) {\r\n            var mc=this.fixClassName(opt.run.mainClass);\r\n            var bc=this.fixClassName(opt.run.bootClass);\r\n            if (mc!=opt.run.mainClass  ||  bc!=opt.run.bootClass) {\r\n                opt.run.mainClass=mc;\r\n                opt.run.bootClass=bc;\r\n                this.setOptions(opt);\r\n            }\r\n        }\r\n    },\r\n    fixClassName: function (className) {\r\n        if (Tonyu.classMetas[className]) return className;\r\n        const ns=this.getNamespace();\r\n        console.log(\"NS\", ns);\r\n        let res=Tonyu.classes[ns][className];\r\n        if (res) return `${ns}.${className}`;\r\n        for (var k in Tonyu.classes) {\r\n            res=Tonyu.classes[k][className];\r\n            if (res) return `${k}.${className}`;\r\n        }\r\n        throw new Error(`Cannot fix className ${className}`);\r\n    },\r\n    rawBoot: function (bootClassName) {\r\n        this.showProgress(\"Running \"+bootClassName);\r\n        this.initCanvas();\r\n        Tonyu.run(bootClassName);\r\n    },\r\n    initCanvas: function () {\r\n        Tonyu.globals.$mainCanvas=$(\"canvas\");\r\n    },\r\n    /*isKernelEditable: function () {\r\n    \treturn env.options.kernelEditable;\r\n    },*/\r\n    //TPR.getDir=function () {return dir;};\r\n    //TPR.getName=function () { return dir.name().replace(/\\/$/,\"\"); };\r\n\r\n    showProgress: function (m) {\r\n        console.log(\"PROGRESS\",m);\r\n        /*global SplashScreen*/\r\n        if (typeof SplashScreen!=\"undefined\") {\r\n            SplashScreen.progress(m);\r\n        }\r\n        return DU.promise(function (succ) {\r\n            setTimeout(succ,0);\r\n        });\r\n    }\r\n};\r\n});\r\n\ndefine('CompiledProject',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.CompiledProject;\r\n});\r\n\ndefine('IDEProject',['require','exports','module','ProjectFactory','BuilderClient','root','sysMod','CompiledProject','WebSite'],function (require,exports) {\r\n    const F=require(\"ProjectFactory\");\r\n    //const A=require(\"assert\");\r\n    const BuilderClient=require(\"BuilderClient\");\r\n    const root=require(\"root\");\r\n    const sysMod=require(\"sysMod\");\r\n    const CP=require(\"CompiledProject\");\r\n    const WebSite=require(\"WebSite\");\r\n    const langMod=BuilderClient.langMod;\r\n    F.addType(\"IDE\",params=>{\r\n        const ide=params.ide;\r\n        const res=F.createDirBasedCore(params);\r\n        const ns2depspec= {\r\n            kernel: {namespace:\"kernel\", url: WebSite.compiledKernel}\r\n        };\r\n        const c=new BuilderClient(res ,{\r\n            worker: {ns2depspec, url: \"BuilderWorker.js\"/*WORKER_URL*/}\r\n        });\r\n        F.addDependencyResolver((prj,spec)=>{\r\n            if (ns2depspec[spec.namespace]) {\r\n                return CP.create(ns2depspec[spec.namespace]);\r\n            }\r\n        });\r\n        c.onCompiled=function (src) {\r\n            console.log(\"Sending src\",src);\r\n            const rp=res.getIframeProject();\r\n            if (rp) rp.exec(src).catch(e=>console.error(e));\r\n        };\r\n        let curDebugger;\r\n        root.onTonyuDebuggerReady=d=>{\r\n            d.on(\"runtimeError\",e=>{\r\n                console.log(\"runt\",e.stack.map(s=>s+\"\").join(\"\\n\"));\r\n                ide.showError(e);\r\n            });\r\n            curDebugger=d;\r\n            d.requestStop=o=>ide.stop(o);\r\n            d.startWithAutoReload=res.startWithAutoReload;\r\n            c.setDebugger(d);\r\n        };\r\n        res.getDebugger=()=>curDebugger;\r\n        res.setDebugger=d=>{curDebugger=d;c.setDebugger(d);};\r\n        res.compiler=c;\r\n        res.getIframeProject=()=>{\r\n            const ifrm=root.document.querySelector(\"iframe\");\r\n            if (ifrm) return ifrm.contentWindow.Project;\r\n        };\r\n        res.disconnectDebugger=()=>c.setDebugger();\r\n        res.fullCompile=c.fullCompile.bind(c);\r\n        res.partialCompile=c.partialCompile.bind(c);\r\n        res.renameClassName=c.renameClassName.bind(c);\r\n        res.resetFiles=c.resetFiles.bind(c);\r\n        res.include(sysMod).include(langMod);\r\n        res.stop=()=>{\r\n            try {\r\n                if (curDebugger) return curDebugger.stop();\r\n            }catch(e) {\r\n                //Edge: Can't execute code from a freed script\r\n                console.error(e);\r\n            }\r\n        };\r\n        console.log(\"res.loadClasses\", res.loadClasses) ;\r\n        return res;\r\n    });\r\n    exports.create=params=>F.create(\"IDE\",params);\r\n\r\n});\r\n\ndefine('optionFixer',[\"Tonyu\"],function (Tonyu) {\r\n    const NSP_USR=\"user\",NSP_KER=\"kernel\";\r\n    const defaultOptions={\r\n        compiler: {\r\n            namespace:NSP_USR,\r\n            defaultSuperClass: `${NSP_KER}.Actor`,\r\n            // relative path in outputFile will fail old version\r\n            //outputFile: \"js/concat.js\",\r\n            dependingProjects: [{namespace:NSP_KER}],\r\n        },\r\n        run: {\r\n            mainClass: `${NSP_USR}.Main`,\r\n            bootClass: `${NSP_KER}.Boot`,\r\n            globals:{\r\n                $defaultFPS:60,\r\n                $imageSmoothingDisabled:true,\r\n                $soundLoadAndDecode:false\r\n            }\r\n        },\r\n        plugins: {},\r\n        kernelEditable: false,\r\n        language:\"tonyu\",\r\n        version: Tonyu.VERSION\r\n    };\r\n    Tonyu.defaultOptions=defaultOptions;\r\n    return {\r\n        fixFile: function (f) {\r\n            if (!f.exists()) {\r\n                f.obj(defaultOptions);\r\n                return;\r\n            }\r\n            const t=f.text();\r\n            const o=JSON.parse(t);\r\n            const fo=this.fixObject(o);\r\n            const ft=JSON.stringify(fo);\r\n            if(t!==ft) f.text(ft);\r\n        },\r\n        fixObject:function (o) {\r\n            this.fixOptions(o);\r\n            this.fixBootRunClasses(o);\r\n            return o;\r\n        },\r\n        fixOptions: function (opt) {//override\r\n            if (!opt.compiler) opt.compiler={};\r\n            //opt.compiler.commentLastPos=TPR.runScriptMode || StackTrace.isAvailable();\r\n            if (!opt.plugins) {\r\n                opt.plugins={};\r\n                /*dir.each(function (f) {\r\n                    if (f.endsWith(TPR.EXT)) {\r\n                        plugins.detectNeeded(  f.text(), opt.plugins);\r\n                    }\r\n                });*/\r\n            }\r\n            opt.compiler.dependingProjects=opt.compiler.dependingProjects||[{namespace:\"kernel\"}];\r\n            opt.compiler.namespace=opt.compiler.namespace||\"user\";\r\n            // relative path in outputFile will fail old version\r\n            //opt.compiler.outputFile=opt.compiler.outputFile||\"js/concat.js\";\r\n            opt.run=opt.run||{};\r\n            opt.language=\"tonyu\";\r\n        },\r\n        fixBootRunClasses: function (opt) {\r\n            if (opt.run) {\r\n                var mc=this.fixClassName(opt.run.mainClass);\r\n                var bc=this.fixClassName(opt.run.bootClass);\r\n                if (mc!=opt.run.mainClass  ||  bc!=opt.run.bootClass) {\r\n                    opt.run.mainClass=mc;\r\n                    opt.run.bootClass=bc;\r\n                }\r\n            }\r\n        },\r\n        fixClassName: function (cn) {\r\n            //if (TPR.classExists(cn)) return cn;\r\n            if (Tonyu.getClass(cn)) return cn;\r\n            var cna=cn.split(\".\");\r\n            var sn=cna.pop();\r\n            var res;\r\n            res=NSP_USR+\".\"+sn;\r\n            if (Tonyu.getClass(res)) return res;\r\n            //if (TPR.classExists(res)) return res;\r\n            res=NSP_KER+\".\"+sn;\r\n            if (Tonyu.getClass(res)) return res;\r\n            //if (TPR.classExists(res)) return res;\r\n            return cn;\r\n        }\r\n    };\r\n\r\n});\r\n\ndefine('SourceFiles',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.SourceFiles;\r\n});\r\n\ndefine('EditorPopupMarker',['require','exports','module'],function(require, exports) {\r\n    //const root=require(\"root\");\r\n    //const ace=root.ace;\r\n    const popup = $(\"<div>\").attr({class: \"errorTip\"}).css({\r\n        position: \"absolute\",\r\n        left: \"0px\",\r\n        top: \"0px\",\r\n    }).appendTo(\"body\").hide();\r\n    //const Range = ace.require('ace/range').Range;\r\n    exports.mark = (editor, range, markerClass, mesg) => {\r\n        const session=editor.getSession();\r\n        const doc=session.doc;\r\n        range.start = doc.createAnchor(range.start);\r\n        range.end = doc.createAnchor(range.end);\r\n        const highlight1 = {};\r\n        highlight1.update = (html, markerLayer, session, config) => {\r\n            const markerElement = getMarkerHTML(html, markerLayer, session, config, range, markerClass);\r\n            $(markerElement).css('pointer-events', 'auto');\r\n            $(markerElement).mouseenter(() => {\r\n                const o = $(markerElement).offset();\r\n                popup.show();\r\n                popup.$showing=highlight1;\r\n                popup.text(mesg).css({\r\n                    left: o.left + \"px\",\r\n                    top: (o.top - popup.height()) + \"px\"\r\n                });\r\n            });\r\n            //console.log(range.start);\r\n            //const p=session.documentToScreenPosition(range.start.row, range.start.column);\r\n            //console.log(p);\r\n            //session.addGutterDecoration(range.start.row,\"errorGutter\");\r\n            $(markerElement).mouseleave(() => popup.hide());\r\n        };\r\n        const marker1 = session.addDynamicMarker(highlight1, true);\r\n        marker1.remove = () => {\r\n            session.removeMarker(marker1.id);\r\n            if (popup.$showing===highlight1) popup.hide();\r\n        };\r\n        return marker1;\r\n    };\r\n\r\n    function getMarkerHTML(html, markerLayer, session, config, range, markerClass) {\r\n        const stringBuilder = [];\r\n        let marked;\r\n        if (range.isMultiLine()) {\r\n            marked=markerLayer.drawTextMarker(stringBuilder, range, markerClass, config);\r\n        } else {\r\n            marked=markerLayer.drawSingleLineMarker(stringBuilder, range, `${markerClass} ace_start ace_br15`, config);\r\n        }\r\n        //console.log(\"ML\",marked);\r\n        return marked;\r\n        //return stringBuilder;\r\n    }\r\n});\r\n\ndefine('RealtimeErrorMarker',['require','exports','module','EditorPopupMarker','root'],function (require,exports, module) {\r\n    const EditorPopupMarker=require(\"EditorPopupMarker\");\r\n    const root= require(\"root\");\r\n    const Range = root.ace.require('ace/range').Range;\r\n    module.exports=ide=>{\r\n        const interval=200;\r\n        setTimeout(check,interval);\r\n        let charge=0;\r\n        async function check() {\r\n            const inf=ide.getCurrentEditorInfo();\r\n            if (inf) {\r\n                const curVal=inf.editor.getValue();\r\n                if (inf.lastParsed!==curVal) {\r\n                    charge+=interval;\r\n                } else {\r\n                    charge=0;\r\n                }\r\n                if (charge>1000) {\r\n                    charge=0;\r\n                    if (inf.markers) {\r\n                        for (let marker of inf.markers) marker.remove();\r\n                    }\r\n                    inf.markers=[];\r\n                    //console.log(\"Parse\");\r\n                    try {\r\n                        await ide.project.compiler.parse(inf.file, curVal);\r\n                    }catch (e) {\r\n                        if (typeof e.row===\"number\" && typeof e.col===\"number\") {\r\n                            const range=new Range(e.row-1,e.col-1,e.row-1,e.col-0);\r\n                            const marker=EditorPopupMarker.mark(inf.editor, range,\"errorMarker\",e.message);\r\n                            inf.markers.push(marker);\r\n                        }\r\n                        //console.log(\"Mark!ERROR!\",e);\r\n                    }\r\n                    //console.log(\"Parse Done\");\r\n                    inf.lastParsed=curVal;\r\n                }\r\n            }\r\n            setTimeout(check,interval);\r\n        }\r\n    };\r\n});\r\n\ndefine('IFrameDialog',[], function () {\r\n    var WD={};\r\n    WD.create=function (home, options) {\r\n        options=options || {title:\"help\",topPage:\"index\"};\r\n        if (!options.height) {\r\n            options.height=$(window).height()*0.7;\r\n        }\r\n        if (!options.width) options.width=500;\r\n        var ifrm=$(\"<iframe>\").attr({\r\n            \"class\":\"wikiDialog\",frameBorder:0,\r\n            src:home//, width:options.width+100, height:options.height\r\n        });\r\n        var d=$(\"<div>\").attr({\"class\":\"wikiDialog\",title:options.title}).append(ifrm);\r\n        return {\r\n            show: function () {\r\n                d.dialog({\r\n                    width:options.width, height:options.height,\r\n                    resize:function (e,ui){\r\n                        //ifrm.width(ui.size.width-50);\r\n                        //ifrm.height(ui.size.height-50);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    };\r\n    return WD;\r\n});\ndefine('searchDialog',[\"UI\",\"Shell\"], function (UI,sh) {\r\n    var res={};\r\n    res.show=function (prjDir, onLineClick) {\r\n        var d=res.embed(prjDir,onLineClick);\r\n        d.dialog({width:600});\r\n    };\r\n    res.embed=function (prjDir, onLineClick) {\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                    [\"div\",\r\n                     [\"span\",\"\"],\r\n                     [\"input\",{$edit:\"word\",on:{enterkey:function () {\r\n                         res.d.start();\r\n                     }}}]],\r\n                     [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}],\r\n                     [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                         res.d.start();\r\n                     }}}, \"\"],\r\n                     [\"div\",{style:\"overflow-y:scroll; height:200px\"},\r\n                      [\"table\",{$var:\"searchRes\"}]]\r\n            );\r\n        }\r\n        var d=res.d;\r\n        var model={word:\"\"};\r\n        d.$edits.load(model);\r\n        d.start=function () {\r\n            d.$vars.searchRes.empty();\r\n            var sres=sh.grep(model.word, prjDir);\r\n            sres.forEach(function (l) {\r\n                if (l.file.name().match(/^concat\\.js/)) {\r\n                    return;\r\n                }\r\n                d.$vars.searchRes.append(\r\n                        UI(\"tr\",\r\n                                [\"td\",{on:{click:doLineClick}},l.file.name()+\"(\"+l.lineNo+\")\"],\r\n                                [\"td\",{on:{click:doLineClick}},l.line]\r\n                        ));\r\n                function doLineClick() {\r\n                    if (onLineClick) onLineClick(l);\r\n                }\r\n            });\r\n        };\r\n        return d;\r\n    };\r\n    return res;\r\n});\r\n\ndefine('MainClassDialog',[\"UI\"],function (UI) {\r\n    var res={};\r\n    res.show=function (prj, options) {\r\n        var d=res.embed(prj, options);\r\n        d.dialog({width:600});\r\n        return d;\r\n    };\r\n    res.embed=function (prj, options) {\r\n        if (!options) options={};\r\n\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                    [\"div\",\r\n                          [\"select\",{$var:\"mainClass\"}],\r\n                          [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}],\r\n                          [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                              res.d.done(false);\r\n                          }}}, \"OK\"],\r\n                          [\"button\", {$var:\"RunButton\", on:{click: function () {\r\n                              res.d.done(true);\r\n                          }}}, \"\"]\r\n                    ]\r\n            );\r\n        }\r\n        var d=res.d;\r\n        var v=res.d.$vars;\r\n        prj.getDir();\r\n\r\n        var opt=prj.getOptions();\r\n\r\n        d.done=function (run) {\r\n            opt.run.mainClass=v.mainClass.val();\r\n            prj.setOptions(opt);\r\n            if (options.on && options.on.done) {\r\n                options.on.done(v.mainClass.val(),run);\r\n            }\r\n            d.dialog(\"close\");\r\n        };\r\n\r\n        return d;\r\n    };\r\n    return res;\r\n});\ndefine('splashElement',['require','exports','module'],function (require,exports,module) {//---\r\nreturn `<div id='splash' style='position:relative; height: 100%;'>\r\n    <!---->\r\n    <!--You can write here what you want to show while loading. -->\r\n    <div class='progress'>\r\n        <!-- div -->\r\n        <!-- This shows progress. If you don't want to show, remove this element. -->\r\n    </div>\r\n    <div class='unsupported' style=\"display:none;\">\r\n        <!-- div -->\r\n        <!-- This shows message for unsupported browsers. If you don't want to show, remove this element. -->\r\n        <p></p>\r\n        <p>The program does not run in this browser. Try another browser.</p>\r\n    </div>\r\n</div>\r\n<!--\r\nOpen this site when editing this game:\r\nhttps://edit.tonyu.jp/index.html?importFromHTML=1\r\n-->`;\r\n});//---of define\r\n;\ndefine('exportAsScriptTags',[\"FS\",\"Util\",\"WebSite\",\"splashElement\"], function (FS,Util,WebSite,splashElement) {\r\n    var east=function (dir,options) {\r\n        options=options||{};\r\n        console.log(\"east options\",options);\r\n        var excludes=options.excludes||{};\r\n        var includeJSScript=options.includeJSScript;\r\n        var buf=\"<!DOCTYPE html>\\n<html><head>\\n\";\r\n        buf+='<meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"/>\\n';\r\n        buf+=\"<script>WebSite_runType='singleHTML';</script>\\n\";\r\n        if (includeJSScript) {\r\n            var resFile=dir.rel(\"res.json\");\r\n            var resObj=resFile.obj();\r\n            var scriptServer=WebSite.scriptServer||\"https://edit.tonyu.jp/\";\r\n            const genPath=scriptServer+\"js/\"+(options.IE?\"gen\":\"g2\")+\"/\";\r\n            resObj.images.forEach(function (im) {\r\n                if (WebSite.builtinAssetNames[im.url]) {\r\n                    buf+='<script src=\"'+scriptServer+im.url+'.js\"></script>\\n';\r\n                }\r\n            });\r\n            buf+='<script src=\"'+scriptServer+'js/lib/jquery-1.10.1.js\" type=\"text/javascript\"></script>\\n';\r\n            buf+='<script src=\"'+genPath+'runScript_concat.min.js\" type=\"text/javascript\"></script>\\n';\r\n            if (!options.IE) {\r\n                buf+=`<script src=\"${scriptServer}js/runtime/detectUnsupported.js\"></script>`;\r\n            }\r\n        }\r\n        var binary=[],json=[];\r\n        //dir=FS.get(dir);\r\n        dir.recursive(function (f) {\r\n            var rel=f.relPath(dir);\r\n            if (excludes[rel]) return;\r\n            if (f.endsWith(\".json\") && rel.indexOf(\"maps/\")<0) {\r\n                json.push(f);\r\n                return;\r\n            } else if (f.endsWith(\".desktop\")) {\r\n                return;\r\n            } else if (f.endsWith(\".js.map\")) {\r\n                return;\r\n            } else if (f.endsWith(\".js\")) {\r\n                return;\r\n            } else if (!f.endsWith(\".tonyu\")) {\r\n                binary.push(f);\r\n                return;\r\n            }\r\n            //var name=f.truncExt(\".tonyu\");\r\n            var m=\"\";//(name==main?\" data-main='true'\":\"\");\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"'\"+lu+\">\";\r\n            buf+=escapeLoosely(f.text());\r\n            buf+=\"</script>\\n\\n\";\r\n        },{excludes:[\"files/\"]});\r\n        json.forEach(function (f) {\r\n            var rel=f.relPath(dir);\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"'\"+lu+\">\\n\";\r\n            buf+=beautifyJSON(f.text());\r\n            buf+=\"</script>\\n\\n\";\r\n        });\r\n        binary.forEach(function (f) {\r\n            var rel=f.relPath(dir);\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"' data-wrap='80'\"+lu+\">\";\r\n            buf+=wrap(f.text(),80);\r\n            buf+=\"</script>\\n\\n\";\r\n        });\r\n        buf+=\"</head><body>\"+(options.splashElement||splashElement)+\"</body></html>\";\r\n        return buf;\r\n        function wrap(str, cols) {\r\n            var lines=str.split(\"\\n\");\r\n            var buf=\"\";\r\n            lines.forEach(function (line) {\r\n                while (true) {\r\n                    if (line.length>cols) {\r\n                        buf+=line.substring(0,cols)+\"\\\\\\n\";\r\n                        line=line.substring(cols);\r\n                    } else {\r\n                        buf+=line+\"\\n\";\r\n                        break;\r\n                    }\r\n                }\r\n                return buf;\r\n            });\r\n            return buf;\r\n        }\r\n        function beautifyJSON(str) {\r\n            try {\r\n                var o=JSON.parse(str);\r\n                return JSON.stringify(o,null,4);\r\n            }catch(e) {\r\n                return str;\r\n            }\r\n        }\r\n    };\r\n    function escapeLoosely(text) {\r\n        text=text.replace(/&(#?[\\w\\d]+;)/g, function (_,a){\r\n            return \"&amp;\"+a;\r\n        });\r\n        text=text.replace(/<(\\s*)\\/(\\s*)script(\\s*)>/ig,function (_,s1,s2,s3) {\r\n            return \"&lt;\"+s1+\"/\"+s2+\"script\"+s3+\"&gt;\" ;\r\n        });\r\n        return text;\r\n    }\r\n    return east;\r\n});\r\n\ndefine('ExportHTMLDialog',[\"exportAsScriptTags\",\"UI\",\"Klass\",\"root\"], function (east,UI,Klass,root) {\r\n    root.ExportHTMLDialog=Klass.define({\r\n        $this:true,\r\n        $:[\"prj\"],\r\n        show: function (t,options) {\r\n            //var dir=t.prj.getDir();\r\n            t.options=options||{IE:false};\r\n            t.createDOM();\r\n            t.dom.dialog({width:800,height:400});\r\n            t.write();\r\n        },\r\n        write: function (t) {\r\n            var dir=t.prj.getDir();\r\n            t.prog.val(\"\");\r\n            setTimeout(function () {\r\n                var buf=east(dir,t.options);\r\n                t.prog.val(buf);\r\n            },10);\r\n        },\r\n        createDOM:function (t) {\r\n            if (t.dom) return t.dom;\r\n            t.dom=UI(\"div\",{title:\"HTML\"},\r\n                [\"div\",\"HTMLcodepenJS\"],\r\n                [\"div\",\r\n                    [\"input\", {id:\"ie\",$var:\"IE\",$edit:\"IE\",type:\"checkbox\"\r\n                    }],\r\n                    [\"label\",{\"for\":\"ie\"},\"Internet Explorer 11\"],\r\n                ],\r\n                [\"textarea\",{$var:\"prog\",rows:20,cols:60,placeholder:\"Please wait...\"}]\r\n            );\r\n            t.dom.$edits.load(t.options);\r\n            /*t.dom.$edits.on.writeToModel=(name,val)=>{\r\n                console.log(name,val);\r\n                t.write();\r\n            };*/\r\n            t.dom.$vars.IE.on(\"change\",()=> {\r\n                t.options.IE=t.dom.$vars.IE.prop(\"checked\");\r\n                t.write();\r\n            });\r\n            t.prog=t.dom.$vars.prog;\r\n            return t.dom;\r\n        }\r\n    });\r\n    return root.ExportHTMLDialog;\r\n});\r\n\ndefine('UIDiag',[\"UI\"],function (UI) {\r\n    var UIDiag={};\r\n    function isPrimitive(mesg) {\r\n        return (typeof mesg===\"string\" ||\r\n        typeof mesg===\"number\" ||\r\n        typeof mesg===\"boolean\");\r\n    }\r\n    function parseMesg(mesg,defTitle) {\r\n        if (mesg==null) mesg=\"\";\r\n        if (isPrimitive(mesg)) {\r\n            return {title:defTitle,body:multiLine(mesg)};\r\n        } else if ( (typeof $!==\"undefined\") && mesg instanceof $) {\r\n            return {\r\n                title:mesg.title||defTitle,\r\n                body:mesg\r\n            };\r\n        } else {\r\n            if (isPrimitive(mesg.body)) mesg.body=multiLine(mesg.body);\r\n            return mesg;\r\n        }\r\n    }\r\n    function multiLine(mesg) {\r\n        var lines=(mesg+\"\").split(\"\\n\");\r\n        if (lines.length==1) return lines[0];\r\n        return UI.apply(this,[\"div\"].concat(lines.map(function (e) {\r\n            return [\"div\",e];\r\n        })));\r\n    }\r\n    UIDiag.confirm=function (mesg) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"button\",{on:{click:sendF(true)}},\"OK\"],\r\n                [\"button\",{on:{click:sendF(false)}},\"\"]).dialog({width:\"auto\",close:sendF(false)});\r\n        var d=$.Deferred();\r\n        function sendF(r) {\r\n            return function () { d.resolve(r); di.dialog(\"close\"); di.remove(); };\r\n        }\r\n        return d.promise();\r\n    };\r\n    UIDiag.alert=function (mesg) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"button\",{on:{click:sendF(true)}},\"OK\"]).dialog({width:\"auto\",close:sendF(false)});\r\n        var d=$.Deferred();\r\n        function sendF(r) {\r\n            return function () { d.resolve(r); di.dialog(\"close\"); di.remove(); };\r\n        }\r\n        return d.promise();\r\n    };\r\n    // Compat with $InputBox\r\n    UIDiag.open=function(title,prompt,_default, left, top, width, height) {\r\n        return UIDiag.prompt({title:title,body:prompt},_default,{\r\n            left:left, top:top, width:width, height:height\r\n        });\r\n    };\r\n    UIDiag.getStatus=function () {return UIDiag.status;};\r\n    UIDiag.getText=function () {return UIDiag.val? UIDiag.val.val():\"\";};\r\n    //---\r\n    UIDiag.prompt=function (mesg,value,geom) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        geom=geom||{};\r\n        let position;\r\n        if (typeof geom.left===\"number\" && typeof geom.top===\"number\") {\r\n            position={my:\"left top\",at:\"left+\"+geom.left+\" top+\"+geom.top, of:\"body\"};\r\n        } else {\r\n            position={of:\"body\",at:\"center\",my:\"center\"};\r\n        }\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"input\",{on:{enterkey:ok},$var:\"val\", value:value}],[\"br\"],\r\n                [\"button\",{on:{click:ok}},\"OK\"],\r\n                [\"button\",{on:{click:cancel}},\"\"]).dialog({\r\n                    width:geom.width||\"auto\",\r\n                    height:geom.height||\"auto\",\r\n                    position:position,\r\n                    close:function (){\r\n                        di.dialog(\"close\");\r\n                        d.resolve();\r\n                    }\r\n                });\r\n        setTimeout(function () {\r\n            di.$vars.val.focus();\r\n            //console.log(\"FOcus\");\r\n        },10);\r\n        UIDiag.status=0;\r\n        UIDiag.val=di.$vars.val;\r\n        var d=$.Deferred();\r\n        function ok() {\r\n            UIDiag.status=1;\r\n            var r=di.$vars.val.val();\r\n            UIDiag.resultValue=r;\r\n            d.resolve(r);\r\n            di.dialog(\"close\");\r\n            di.remove();\r\n        }\r\n        function cancel() {\r\n            UIDiag.status=2;\r\n            di.dialog(\"close\");\r\n            di.remove();\r\n            d.resolve();\r\n        }\r\n        return d.promise();\r\n\r\n    };\r\n    if (typeof window!=\"undefined\") window.UIDiag=UIDiag;\r\n    return UIDiag;\r\n});\r\n\ndefine('mkrun',[\"FS\",\"Util\",\"assert\",\"WebSite\",\"plugins\",\"Shell\",\"Tonyu\",\"splashElement\"],\r\n        function (FS,Util,assert,WebSite,plugins,sh,Tonyu,splashElement) {\r\n    var MkRun={};\r\n    sh.mkrun=function (dest) {\r\n        return MkRun.run( Tonyu.globals.$currentProject, FS.get(dest));\r\n    };\r\n    MkRun.run2=function (prj,type,options) {\r\n        // type: zip , prj, dir\r\n        // when type==\"dir\" , options.dest is required\r\n        var dest,destZip;\r\n        switch(type) {\r\n            case \"prj\":\r\n            destZip=this.tmpDir().rel(\"prj.zip\");\r\n            dest=this.tmpDir().rel(prj.getDir().name());\r\n            break;\r\n            case \"zip\":\r\n            dest=this.tmpDir().rel(prj.getDir().name());\r\n            break;\r\n            case \"dir\":\r\n            dest=options.dest;\r\n            break;\r\n        }\r\n        assert(dest,\"dest is not set\");\r\n        console.log(\"mkrun2\",dest,destZip);\r\n        return MkRun.run(prj,dest,options).then(function () {\r\n            switch(type) {\r\n                case \"zip\":\r\n                return FS.zip.zip(dest,options).finally(function () {\r\n                    return dest.rm({r:1});\r\n                });\r\n                case \"prj\":\r\n                return FS.zip.zip(dest,destZip,options).then(function () {\r\n                    return destZip.getContent(function (c) {\r\n                        var f=new FormData();\r\n                        var url=WebSite.uploadTmpUrl;\r\n                        f.append( \"content\" , new Blob( [c.toBin(ArrayBuffer)], {type:c.contentType} ) , destZip.name() );\r\n                        return $.ajax({url:url,method:\"POST\",data:f,processData: false, contentType: false});\r\n                    });\r\n                }).then(function (r) {\r\n                    console.log(r);\r\n                    if (!r.match(/^[\\w\\d\\.]+\\.zip$/)) {\r\n                        //alert(\": \"+r);\r\n                        throw new Error(\": \"+r);\r\n                    }\r\n                    //alert(r);\r\n                    return {tmpFileName:r};\r\n                }).finally(function (r) {\r\n                    return dest.rm({r:1}).then(function () {\r\n                        destZip.rm();\r\n                    }).then(function () {return r;});\r\n                });\r\n            }\r\n        });\r\n    };\r\n    MkRun.tmpDir=function () {\r\n        var mkramPath=\"/mkram/\";\r\n        if (!MkRun.mounted) FS.mount(mkramPath, FS.LSFS.ramDisk() );\r\n        MkRun.mounted=true;\r\n        var mkram=FS.get(mkramPath);\r\n        if (mkram.exists()) mkram.rm({r:1});\r\n        return mkram;\r\n    };\r\n    MkRun.run=function (prj,dest,options) {\r\n        options=options||{};\r\n        var prjDir=prj.getDir();\r\n        var resc=prj.getResource();\r\n        var opt=prj.getOptions();\r\n        var loadFilesBuf=\"function loadFiles(dir){\\n\"+\r\n        \"   if (WebSite.isNW) return;\\n\";\r\n        var wwwDir=FS.get(WebSite.wwwDir);\r\n        var jsDir=wwwDir.rel(\"js/\");\r\n        const runScrFileName=\"runScript2_concat.min.js\";\r\n        const genDir=options.IE?\"gen\":\"g2\";\r\n        const scriptServer=WebSite.scriptServer||\"https://edit.tonyu.jp/\";\r\n\r\n        console.log(\"jsDir\",jsDir);\r\n        //var sampleImgDir=wwwDir.rel(\"images/\");\r\n        if (options.copySrc) copySrc();\r\n        return $.when(\r\n                copySampleImages(),\r\n                convertLSURL(resc.images),\r\n                convertLSURL(resc.sounds),\r\n                genFilesJS(),\r\n                copyScripts(),\r\n                copyPlugins(),\r\n                copyLibs(),\r\n                copyResources(\"images/\"),\r\n                copyResources(\"sounds/\"),\r\n                copyIndexHtml(),\r\n                genReadme()\r\n        );\r\n\r\n        function genReadme() {\r\n            dest.rel(\"Readme.txt\").text(\r\n                    \"Web\\n\"+\r\n                    \"\\nhttps://www.tonyu.jp/tonyu2/runtime.html\\n\\n\"\r\n            );\r\n        }\r\n        function copyResources(dir) {\r\n            var src=prjDir.rel(dir);\r\n            if (src.exists()) src.copyTo(dest.rel(dir));\r\n        }\r\n        function genFilesJS(){\r\n            addFileToLoadFiles(\"res.json\",resc);\r\n            addFileToLoadFiles(\"options.json\",opt);\r\n            var mapd=prjDir.rel(\"maps/\");\r\n            if (mapd.exists()) {\r\n                mapd.recursive(function (mf) {\r\n                    addFileToLoadFiles( mf.relPath(prjDir), mf.obj());\r\n                });\r\n            }\r\n            var staticd=prjDir.rel(\"static/\");\r\n            if (staticd.exists()) {\r\n                staticd.recursive(function (mf) {\r\n                    addFileToLoadFiles( mf.relPath(prjDir));\r\n                });\r\n            }\r\n            dest.rel(\"js/files.js\").text(loadFilesBuf+\"}\");\r\n        }\r\n        function copyIndexHtml() {\r\n            var htmlfile=wwwDir.rel(\"html/runtimes/index.html\");\r\n            return htmlfile.text(function (htmlcont) {\r\n                htmlcont=htmlcont.replace(/<!--SPLASH-->/,splashElement);\r\n                if (!options.IE) {\r\n                    htmlcont=htmlcont.replace(/<!--UNSUP-->/,\r\n                        `<script src=\"${scriptServer}js/runtime/detectUnsupported.js\"></script>`);\r\n                }\r\n                htmlcont=htmlcont.replace(/TONYU_APP_VERSION/g,Math.floor(Math.random()*100000));\r\n                return dest.rel(htmlfile.name()).text(htmlcont);\r\n            });\r\n        }\r\n        function copyScripts() {\r\n            var usrjs=prjDir.rel(\"js/concat.js\");\r\n            var usrjsmap=prjDir.rel(\"js/concat.js.map\");\r\n            //TODO async...\r\n            //dest.rel(\"js/concat.js\").text(usrjs.text()+\"\\n//# sourceMappingURL=concat.js.map\");// js/ is needed??\r\n            var kerjs=FS.get(WebSite.kernelDir).rel(\"js/concat.js\");\r\n            var runScr2=jsDir.rel(`${genDir}/${runScrFileName}`);\r\n            var runScr2Map=jsDir.rel(`${genDir}/${runScrFileName}.map`);\r\n            return $.when(\r\n                usrjsmap.exists() && usrjsmap.copyTo(dest.rel(\"js/concat.js.map\")),\r\n                usrjs.copyTo(dest.rel(\"js/concat.js\")),\r\n                kerjs.copyTo(dest.rel(\"js/kernel.js\")),\r\n                runScr2.copyTo(dest.rel(`js/${runScrFileName}`)),\r\n                (runScr2Map.exists() ?\r\n                    runScr2Map.copyTo(dest.rel(`js/${runScrFileName}.map`)) :\r\n                    Promise.resolve()\r\n                )\r\n            );\r\n        }\r\n        function copyPlugins() {\r\n            var pluginDir=jsDir.rel(\"plugins/\");\r\n            if (!opt.plugins) return;\r\n            // TODO opt.plugins is now hash, but array is preferrable....\r\n            var args=[];\r\n            for (var n in opt.plugins) {\r\n                // TODO if src not found, do not copy and use src directory(maybe http://....)\r\n                var pf=pluginDir.rel(plugins.installed[n].src);\r\n                args.push( pf.copyTo(dest.rel(\"js/plugins/\")) );\r\n            }\r\n            return $.when.apply($,args);\r\n        }\r\n        function copyLibs() {\r\n            return $.when(\r\n                    jsDir.rel(\"lib/jquery-1.10.1.js\").copyTo(dest.rel(\"js/lib/\")),\r\n                    jsDir.rel(\"lib/require.js\").copyTo(dest.rel(\"js/lib/\"))\r\n            );\r\n        }\r\n        function addFileToLoadFiles(name, data) {\r\n            var file=prjDir.rel(name);\r\n            file.copyTo(dest.rel(name)); // needs on nwjs runtime\r\n            if (data==null) {\r\n                // in \"static\" folder\r\n                if (file.ext()===\".json\") {\r\n                    data=file.obj();\r\n                } else if (file.isText()) {\r\n                    //file.copyTo(dest.rel(name));\r\n                    data=file.text();\r\n                    loadFilesBuf+=\"\\tdir.rel('\"+name+\"').text(\"+JSON.stringify(data)+\");\\n\";\r\n                    return;\r\n                } else {\r\n                    //file.copyTo(dest.rel(name));\r\n                    data=file.dataURL();\r\n                    loadFilesBuf+=\"\\tdir.rel('\"+name+\"').dataURL(\"+JSON.stringify(data)+\");\\n\";\r\n                    return;\r\n                }\r\n            }\r\n            //dest.rel(name).obj(data);\r\n            loadFilesBuf+=\"\\tdir.rel('\"+name+\"').obj(\"+JSON.stringify(data)+\");\\n\";\r\n        }\r\n        function convertLSURL(r) {\r\n            for (var k in r) {\r\n                var url=r[k].url;\r\n                if (Util.startsWith(url,\"ls:\")) {\r\n                    var rel=url.substring(\"ls:\".length);\r\n                    r[k].url=rel;\r\n                }\r\n            }\r\n        }\r\n        function copySampleImages() {\r\n            var urlAliases= {\r\n                \"images/Ball.png\":1,\r\n                \"images/base.png\":1,\r\n                \"images/Sample.png\":\"../../images/Sample.png\",\r\n                \"images/neko.png\":\"../../images/neko.png\",\r\n                \"images/inputPad.png\":\"../../images/inputPad.png\",\r\n                \"images/mapchip.png\":\"../../images/mapchip.png\",\r\n                \"images/sound.png\":\"../../images/sound.png\",\r\n                \"images/sound_ogg.png\":\"../../images/sound_ogg.png\",\r\n                \"images/sound_mp3.png\":\"../../images/sound_mp3.png\",\r\n                \"images/sound_mp4.png\":\"../../images/sound_mp4.png\",\r\n                \"images/sound_m4a.png\":\"../../images/sound_m4a.png\",\r\n                \"images/sound_mid.png\":\"../../images/sound_mid.png\",\r\n                \"images/sound_wav.png\":\"../../images/sound_wav.png\",\r\n                    \"images/ecl.png\":\"../../images/ecl.png\"\r\n            };\r\n            var args=[];\r\n            for (var k in resc.images) {\r\n                var u= resc.images[k].url;\r\n                if (urlAliases[u] && !prjDir.rel(u).exists()) {\r\n                    var imgf=wwwDir.rel(u);\r\n                    if (imgf.exists()) {\r\n                        args.push( imgf.copyTo(dest.rel(u)) );\r\n                    } else {\r\n                        sh.echo(imgf+\" not exists!\");\r\n                    }\r\n                }\r\n            }\r\n            return $.when.apply($,args);\r\n        }\r\n        function copySrc() {\r\n            prjDir.copyTo(dest.rel(\"src/\"));\r\n        }\r\n    };\r\n    return MkRun;\r\n});\r\n\ndefine('zip',[\"FS\"],function (FS){return FS.zip;});\r\n\ndefine('jshint',[],function () {\r\n    var colon=\":\";\r\n    return {\r\n        Function: Function,\r\n        use: function () {},\r\n        scriptURL: function (url) {\r\n            return \"javascript\"+colon+url;\r\n        }\r\n    };\r\n});\r\n\ndefine('mkrunDiag',[\"UI\",\"UIDiag\",\"WebSite\",\"extLink\",\"mkrun\",\"Tonyu\",\"zip\",\"DeferredUtil\",\"FS\",\"root\",\"jshint\"],\r\nfunction (UI,UIDiag, WebSite, extLink,mkrun,Tonyu,zip,DU,FS,root,jshint) {\r\n    var res={};\r\n    res.show=function (prj,dest,options) {\r\n        var d=res.embed(prj,dest,options);\r\n        d.dialog({width:800,height:400});\r\n    };\r\n    res.embed=function (prj,/*dest,*/options) {\r\n        options=options||{};\r\n        var dest=options.dest;\r\n        var onComplete=options.onComplete||(function(){});\r\n        var ote={\r\n            click: function () {\r\n                if (outtype.value===\"dir\") {\r\n                    vars.dest.prop(\"disabled\",false);\r\n                } else {\r\n                    vars.dest.prop(\"disabled\",true);\r\n                }\r\n            }\r\n        };\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                  // [\"span\", {$var:\"hiddenFolder\"},\r\n                  [\"form\",{action:jshint.scriptURL(\";\"),$var:\"form\",name:\"mkrunform\"},\r\n                [\"h1\",\"\"],\r\n                    [\"div\",\r\n                        [\"input\", {type:\"radio\",name:\"outtype\",value:\"zip\",on:ote}],\r\n                        [\"label\",{\"for\":\"outtype\"},\"ZIP\"]\r\n                    ],//],\r\n                    [\"div\",\r\n                        [\"input\", {type:\"radio\",name:\"outtype\",value:\"prj\",on:ote}],\r\n                        [\"label\",{\"for\":\"outtype\"},\"\"]\r\n                    ],//],\r\n                    [\"div\",{$var:\"folder\"},\r\n                        [\"input\",{type:\"radio\",name:\"outtype\",value:\"dir\",on:ote}],\r\n                        [\"label\",{\"for\":\"dest\"},\"\"],[\"br\"],\r\n                        [\"input\", {$var:\"dest\",id:\"dest\",$edit:\"dest\",size:60}]\r\n                    ],\r\n                [\"h1\",\"\"],\r\n                    [\"div\",\r\n                        [\"input\", {id:\"ie\",$edit:\"IE\",type:\"checkbox\"}],\r\n                        [\"label\",{\"for\":\"ie\"},\"Internet Explorer 11\"],\r\n                    ],\r\n                    [\"div\",\r\n                        [\"input\", {id:\"src\",$edit:\"src\",type:\"checkbox\"}],\r\n                        [\"label\",{\"for\":\"src\"},\"\"],\r\n                        [\"div\",\r\n                        {\"class\":\"srcwarn\"},\r\n                        \"\"+\r\n                        \"\"]\r\n                    ],\r\n                    [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                         res.run();\r\n                    }}}, \"\"],\r\n                    [\"span\",{$var:\"progress\"}]\r\n                ]\r\n            );\r\n        }\r\n        var vars=res.d.$vars;\r\n        vars.OKButton.prop(\"disabled\", false);\r\n        if (!options.dest) {\r\n            vars.folder.hide();\r\n        } else {\r\n            vars.folder.show();\r\n        }\r\n        var model={dest:(dest && dest.path)?dest.path():(dest||\"\"), src:true, zip:true,IE:false};\r\n        var form=vars.form[0];\r\n        var outtype=form.outtype;\r\n        vars.dest.prop(\"disabled\",true);\r\n        outtype.value=\"zip\";\r\n        res.d.$edits.load(model);\r\n        res.run=function () {\r\n            var type=outtype.value;\r\n            res.d.$vars.OKButton.prop(\"disabled\", true);\r\n            var opt={copySrc:model.src};\r\n            opt.progress=function (f) {\r\n                vars.progress.text(f.name());\r\n                return DU.timeout(0);\r\n            };\r\n            opt.IE=model.IE;\r\n            if (type===\"dir\") opt.dest=FS.get(FS.PathUtil.directorify(model.dest));\r\n            return mkrun.run2(prj,type, opt ).then(function (r) {\r\n                /*if (outtype.value===\"zip\") {\r\n                    zip.zip(FS.get(model.dest)).then(function () {\r\n                        console.log(\"ZIPPED?\");\r\n                    },function (e) {\r\n                        console.log(e.stack);\r\n                    });\r\n                }*/\r\n                switch(type) {\r\n                case \"dir\":\r\n                UIDiag.alert(UI(\"div\",\r\n                    [\"p\",\r\n                    [\"a\",{href:jshint.scriptURL(\";\"),\r\n                    style:\"color: blue;\",on:{click:openFolder}},model.dest],\r\n                    \"\"],\r\n                    [\"p\",\"Web\"],\r\n                    [\"ul\",\r\n                    [\"li\",\"Web\"],\r\n                    [\"li\",\"ZIP\",\r\n                      extLink(\"http://www.tonyu.jp/project/\",\r\n                              \"\",{style:\"color: blue;\"}),\r\n                    \"\"]]\r\n                    ),{width:\"auto\"}\r\n                );\r\n                break;\r\n                case \"zip\":\r\n                UIDiag.alert(UI(\"div\",\r\n                    [\"p\",\"\"],\r\n                    [\"p\",\"Web\"],\r\n                    [\"ul\",\r\n                    [\"li\",\"Web\"],\r\n                    [\"li\",\"ZIP\",\r\n                      extLink(\"http://www.tonyu.jp/project/\",\r\n                              \"\",{style:\"color: blue;\"}),\r\n                    \"\"]]\r\n                    ),{width:\"auto\"}\r\n                );\r\n                break;\r\n                case \"prj\":\r\n                var diag;\r\n                diag=UI(\"div\",\r\n                    [\"p\",[\"strong\",\"\"]],\r\n                    [\"p\",\r\n                      extLink(WebSite.newVersionUrl+\"?tmpFile=\"+r.tmpFileName,\r\n                        \"\",{\r\n                            style:\"color: blue;\",\r\n                            on:{\r\n                                click: function () {\r\n                                    diag.$vars.button.prop(\"disabled\", false);\r\n                                }\r\n                            }\r\n                        }),\r\n                        \"\"\r\n                    ],\r\n                    [\"button\",{\r\n                        $var:\"button\",\r\n                        on:{\r\n                            click: function () {\r\n                                diag.dialog(\"close\");\r\n                                diag.remove();\r\n                            }\r\n                        }\r\n                    },\"OK\"]\r\n                );\r\n                diag.$vars.button.prop(\"disabled\", true);\r\n                diag.dialog();\r\n                break;\r\n                }\r\n                onComplete({type:type,config:model});\r\n                res.d.$vars.OKButton.prop(\"disabled\", false);\r\n                if (res.d.dialog) res.d.dialog(\"close\");\r\n                if (options.onEnd) options.onEnd();\r\n            }).then(function (){},function (e) {\r\n              console.error(e);\r\n              alert(e);\r\n            });\r\n            function openFolder() {\r\n                var f=FS.get(model.dest);\r\n                var gui = root.require(\"nw.gui\");//nwDispatcher.requireNwGui();\r\n                gui.Shell.showItemInFolder(f.path().replace(/\\//g,\"\\\\\"));\r\n            }\r\n        };\r\n        return res.d;\r\n    };\r\n    return res;\r\n});\r\n\ndefine('Dialogs',['require','exports','module','IFrameDialog','searchDialog','MainClassDialog','ExportHTMLDialog','mkrunDiag','UI','WebSite','FS','root'],function (require, exports, module) {\r\n    const IFrameDialog=require(\"IFrameDialog\");\r\n    const searchDialog=require(\"searchDialog\");\r\n    const MainClassDialog=require(\"MainClassDialog\");\r\n    const ExportHTMLDialog=require(\"ExportHTMLDialog\");\r\n    const mkrunDiag=require(\"mkrunDiag\");\r\n    const UI=require(\"UI\");\r\n    const WebSite=require(\"WebSite\");\r\n    const FS=require(\"FS\");\r\n    const root=require(\"root\");\r\n    module.exports=ide=>{\r\n        let helpd;\r\n        const project=ide.project;\r\n        const curPrjDir=project.getDir();\r\n        const exportHTMLDialog=new ExportHTMLDialog(project);\r\n        function getCurrentEditor() {\r\n            var i=ide.getCurrentEditorInfo();\r\n            if (i) return i.editor;\r\n            return null;\r\n        }\r\n        return {\r\n            selectMain () {\r\n                const curPrj=ide.project;\r\n                const desktopEnv=ide.desktopEnv;\r\n                const runMenuOrd=desktopEnv.runMenuOrd;\r\n                var diag=MainClassDialog.show(curPrj,{on:{done:function (n,dorun) {\r\n                    var ii=runMenuOrd.indexOf(n);\r\n                    if (ii>0) {\r\n                        runMenuOrd.splice(ii, 1);\r\n                        runMenuOrd.unshift(n);\r\n                        ide.refreshRunMenu();\r\n                        ide.saveDesktopEnv();\r\n                    }\r\n                    if (dorun) ide.run(n);\r\n                }}});\r\n                diag.$vars.mainClass.empty();\r\n                runMenuOrd.forEach(function (m) {\r\n                    diag.$vars.mainClass.append(UI(\"option\",{value:m},m));\r\n                });\r\n            },\r\n            exportHTML() {\r\n                exportHTMLDialog.show({\r\n                    excludes:{\"js/concat.js\":1,\"js/concat.js.map\":1},\r\n                    includeJSScript:true\r\n                });\r\n            },\r\n            search() {\r\n                console.log(\"src diag\");\r\n                searchDialog.show(curPrjDir,function (info){\r\n                    ide.fileList.select(info.file);\r\n                    setTimeout(function () {\r\n                        var prog=getCurrentEditor();\r\n                        if (prog) prog.gotoLine(info.lineNo);\r\n                    },50);\r\n                });\r\n            },\r\n            mkrun() {\r\n                const desktopEnv=ide.desktopEnv;\r\n                var dest;\r\n                if (WebSite.isNW) {\r\n                    if (desktopEnv && desktopEnv.runtimeConfig) {\r\n                        dest=desktopEnv.runtimeConfig.dest;\r\n                    } else {\r\n                        dest=FS.get(WebSite.cwd).rel(\"Runtimes/\").rel( curPrjDir.name());\r\n                    }\r\n                    mkrunDiag.show(project,{\r\n                        dest: dest,\r\n                        onComplete: function (e) {\r\n                            if (e.type===\"dir\" && desktopEnv) {\r\n                                desktopEnv.runtimeConfig=e.config;\r\n                                ide.saveDesktopEnv();\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    mkrunDiag.show(project, {\r\n                        hiddenFolder:true,\r\n                        onEnd:function () {}\r\n                    });\r\n                }\r\n            },\r\n            helpDialog(){\r\n                //if (!helpd) helpd=WikiDialog.create(home.rel(\"doc/tonyu2/\"));\r\n                if (!helpd) helpd=IFrameDialog.create(WebSite.top+\"/doc/index.html\");\r\n                helpd.show();\r\n            },\r\n            startTutorial() {\r\n                if (!helpd) helpd=IFrameDialog.create(WebSite.top+\"/doc/tutorial.html\");\r\n                helpd.show();\r\n            },\r\n            editorEditor() {\r\n                var prog=getCurrentEditor();\r\n                const desktopEnv=ide.desktopEnv;\r\n                var s=prompt(\"\", desktopEnv.editorFontSize||16);\r\n                desktopEnv.editorFontSize=parseInt(s);\r\n                if (prog) prog.setFontSize(desktopEnv.editorFontSize||16);\r\n                ide.saveDesktopEnv();\r\n            },\r\n            openFolder() {\r\n                var f=curPrjDir;\r\n                var gui = root.require(\"nw.gui\");//(global.nwDispatcher||global.nw).requireNwGui();\r\n                gui.Shell.showItemInFolder(f.path().replace(/\\//g,root.require(\"path\").sep));\r\n            }\r\n        };\r\n    };\r\n});\r\n\ndefine('editor',['require','Util','Tonyu','FS','FileList','FileMenu','ErrorDialog','fixIndent','ProjectOptionsEditor','KeyEventChecker','Shell','Shell2','ResEditors','WebSite','exceptionCatcher','Log','WebFS','extLink','DebugDialog','root','IDEProject','optionFixer','SourceFiles','RealtimeErrorMarker','Dialogs','jshint'],function (require) {\r\nconst Util=require(\"Util\");\r\nconst Tonyu=require(\"Tonyu\");\r\nconst FS=require(\"FS\");\r\nconst FileList=require(\"FileList\");\r\nconst FileMenu=require(\"FileMenu\");\r\nconst ErrorDialog=require(\"ErrorDialog\");\r\nconst fixIndent=require(\"fixIndent\");\r\nconst ProjectOptionsEditor=require(\"ProjectOptionsEditor\");\r\nconst KeyEventChecker=require(\"KeyEventChecker\");\r\nconst sh=require(\"Shell\");\r\nconst sh2=require(\"Shell2\");// Open shell\r\nconst ResEditors=require(\"ResEditors\");\r\nconst WebSite=require(\"WebSite\");\r\nconst EC=require(\"exceptionCatcher\");\r\nconst Log=require(\"Log\");\r\nconst WebFS=require(\"WebFS\");\r\nconst extLink=require(\"extLink\");\r\nconst DebugDialog=require(\"DebugDialog\");\r\nconst root=require(\"root\");\r\nconst IDEProject=require(\"IDEProject\");\r\nconst optionFixer=require(\"optionFixer\");\r\nconst SourceFiles=require(\"SourceFiles\");\r\nconst RealtimeErrorMarker=require(\"RealtimeErrorMarker\");\r\nconst Dialogs=require(\"Dialogs\");\r\nconst jshint=require(\"jshint\");\r\n$(function () {\r\n    jshint.use(sh2);\r\n    //https://codepen.io/oatssss/pen/oYxJQV?editors=0010\r\n    if (!WebSite.isNW) {\r\n        FS.mount(location.protocol+\"//\"+location.host+\"/\", new WebFS());\r\n    }\r\n    if (WebSite.serverType===\"projectBoard\") {\r\n        $.ajax(\"../../../a.php?Test/test\").then(function (r){console.log(\"Session\",r);});\r\n    }\r\n    $.get(\"https://edit.tonyu.jp/doc/welcome_edit.html?a\").then(function (t) {\r\n        $(\"#welcome\").append(t);\r\n    });\r\n    var F=EC.f;\r\n    root.$LASTPOS=0;\r\n    var mobile=WebSite.mobile || FS.get(WebSite.tonyuHome).rel(\"mobile.txt\").exists();\r\n    if (mobile) {\r\n        $(\"#fileViewer\").hide();\r\n        $(\"#runAreaParent\").hide();\r\n        $(\"#mainArea\").attr(\"class\",\"col-xs-12\");\r\n        $(\"#fileSel\").show();\r\n    }\r\n    var dir=Util.getQueryString(\"dir\", \"/Tonyu/Projects/SandBox/\");\r\n    var curPrjDir=FS.get(dir);\r\n    const optionFile=curPrjDir.rel(\"options.json\");\r\n    optionFixer.fixFile(optionFile);\r\n    const editors={};\r\n    const ide={restart,stop,save,displayMode,dispName,jump,refreshRunMenu,\r\n        editors,getCurrentEditorInfo,saveDesktopEnv,run};\r\n    const curPrj=IDEProject.create({dir:curPrjDir,ide});//, kernelDir);\r\n    ide.project=curPrj;\r\n    const EXT=curPrj.getEXT();\r\n    const NSP_USR=curPrj.getNamespace();\r\n    root.curPrj=curPrj;\r\n    const resEditors=new ResEditors(curPrj);\r\n    Tonyu.globals.$currentProject=curPrj;\r\n    Tonyu.currentProject=curPrj;\r\n    const desktopEnv=loadDesktopEnv();\r\n    ide.desktopEnv=desktopEnv;\r\n    const runMenuOrd=desktopEnv.runMenuOrd;\r\n    //const exportHTMLDialog=new ExportHTMLDialog(curPrj);\r\n    function setDiagMode(d) {\r\n        var opt=curPrj.getOptions();\r\n        if (opt.compiler.diagnose!=d) {\r\n            opt.compiler.diagnose=d;\r\n            curPrj.setOptions(opt);\r\n        }\r\n    }\r\n    Tonyu.defaultResource={\r\n       images:[\r\n          {name:\"$pat_base\", url: \"images/base.png\", pwidth:32, pheight:32},\r\n          {name:\"$pat_sample\", url: \"images/Sample.png\"},\r\n          {name:\"$pat_neko\", url: \"images/neko.png\", pwidth:32, pheight:32},\r\n          {name:\"$pat_mapchip\", url: \"images/mapchip.png\", pwidth:32, pheight:32}\r\n       ],\r\n       sounds:[]\r\n    };\r\n    const resf=curPrj.getResourceFile();\r\n    if (!resf.exists()) resf.obj(Tonyu.defaultResource);\r\n    setDiagMode(false);\r\n    const runDialogParam={\r\n        screenH:200,\r\n        desktopEnv: desktopEnv,\r\n        prj: curPrjDir.path(),//???\r\n        ide\r\n    };\r\n    function onResize() {\r\n        var h=$(window).height()-$(\"#navBar\").height();\r\n        h-=20;\r\n        runDialogParam.screenH=h;\r\n        $(\"#progs pre\").css(\"height\",h+\"px\");\r\n        $(\"#fileItemList\").height(h);\r\n    }\r\n    onResize();\r\n    RealtimeErrorMarker(ide);\r\n    KeyEventChecker.down(document,\"F9\",F(run));\r\n    KeyEventChecker.down(document,\"F2\",F(stop));\r\n    KeyEventChecker.down(document,\"ctrl+s\",F(save));/*function (e) {\r\n    \tsave();\r\n    \te.stopPropagation();\r\n    \te.preventDefault();\r\n    \treturn false;\r\n    }));*/\r\n    $(window).resize(F(onResize));\r\n    $(\"body\")[0].spellcheck=false;\r\n    sh.cd(curPrjDir);\r\n    var fl=FileList($(mobile?\"#fileSel\":\"#fileItemList\"),{\r\n        topDir: curPrjDir,\r\n        ide,\r\n        runDialogParam,\r\n        on:{\r\n            displayName: dispName\r\n        }\r\n    });\r\n    var FM=FileMenu(ide);\r\n    FM.fileList=fl;\r\n    ide.fileList=fl;\r\n    ide.fileMenu=FM;\r\n    const dialogs=Dialogs(ide);\r\n    $(\"#newFile\").click(F(FM.create));\r\n    $(\"#mvFile\").click(F(FM.mv));\r\n    $(\"#rmFile\").click(F(FM.rm));\r\n    $(\"#closeFile\").click(F(FM.close));\r\n    $(\"#runDialog\").click(F(function () {\r\n        runDialog.show(true);\r\n    }));\r\n    fl.ls(curPrjDir);\r\n    refreshRunMenu();\r\n    function refreshRunMenu() {\r\n        curPrjDir.each(function (f) {\r\n            if (f.endsWith(EXT)) {\r\n                var n=f.truncExt(EXT);\r\n                if (runMenuOrd.indexOf(n)<0) {\r\n                    runMenuOrd.push(n);\r\n                }\r\n            }\r\n        });\r\n        var i;\r\n        for (i=runMenuOrd.length-1; i>=0 ; i--) {\r\n            var f=curPrjDir.rel(runMenuOrd[i]+EXT);\r\n            if (!f.exists()) {\r\n                runMenuOrd.splice(i,1);\r\n            }\r\n        }\r\n        $(\"#runMenu\").empty();\r\n        i=0;\r\n        runMenuOrd.forEach(function(n) {\r\n            var ii=i;\r\n            if (typeof n!=\"string\") {console.log(n); alert(\"not a string: \"+n);}\r\n            if (ii>=15) return;\r\n            $(\"#runMenu\").append(\r\n                    $(\"<li>\").append(\r\n                            $(\"<a>\").attr(\"href\",\"#\").text(n+\"\"+(i==0?\"(F9)\":\"\")).click(F(function () {\r\n                                if (typeof n!=\"string\") {console.log(n); alert(\"not a string2: \"+n);}\r\n                                run(`${NSP_USR}.${n}`);\r\n                                if (ii>0) {\r\n                                    runMenuOrd.splice(ii, 1);\r\n                                    runMenuOrd.unshift(n);\r\n                                    refreshRunMenu();\r\n                                    saveDesktopEnv();\r\n                                }\r\n                            }))));\r\n            i++;\r\n        });\r\n        $(\"#runMenu\").append(\r\n                $(\"<li>\").append(\r\n                        $(\"<a>\").attr(\"href\",\"#\").text(\"(F2)\").click(F(function () {\r\n                            stop();\r\n                        }))));\r\n        $(\"#runMenu\").append(\r\n                $(\"<li>\").append(\r\n                        $(\"<a>\").attr(\"href\",\"#\").text(\"...\").click(F(dialogs.selectMain))\r\n                    ));\r\n        //saveDesktopEnv();\r\n        //$(\"#exportToJsdoit\").attr(\"href\", \"exportToJsdoit.html?dir=\"+curPrjDir.path());//+\"&main=\"+runMenuOrd[0]);\r\n        //$(\"#exportToExe\").attr(\"href\", \"exportToExe.html?dir=\"+curPrjDir.path());//+\"&main=\"+runMenuOrd[0]);\r\n    }\r\n    $(\"#exportToJsdoit\").attr(\"href\", jshint.scriptURL(\";\")).click(dialogs.exportHTML);\r\n    function dispName(f) {\r\n        var name=f.name();\r\n        if (f.isDir()) return name;\r\n        if (f.endsWith(EXT)) return f.truncExt(EXT);\r\n        return null;\r\n    }\r\n    function getCurrentEditorInfo() {\r\n        var f=fl.curFile();\r\n        if (!f) return null;\r\n        return editors[f.path()];\r\n    }\r\n    function getCurrentEditor() {\r\n        var i=getCurrentEditorInfo();\r\n        if (i) return i.editor;\r\n        return null;\r\n    }\r\n    const runDialog=new DebugDialog(runDialogParam);\r\n    window.runDialog=runDialog;\r\n    function displayMode(mode/*, next*/) {\r\n        // mode == run     compile_error     runtime_error    edit\r\n        var prog=getCurrentEditor();\r\n        switch(mode) {\r\n        case \"run\":\r\n            if (prog) prog.blur();\r\n            errorDialog.close();\r\n            if (mobile) {\r\n                //$(\"#fileViewer\").hide();\r\n                $(\"#runAreaParent\").show().attr(\"class\",\"col-xs-12\");\r\n                $(\"#mainArea\").hide();//attr(\"class\",\"col-xs-12\");\r\n                onResize();\r\n            }\r\n            if (!runDialog.opened) {\r\n                runDialog.show();\r\n            }\r\n            break;\r\n        case \"compile_error\":\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n            break;\r\n        case \"runtime_error\":\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n            break;\r\n        case \"edit\":\r\n            if (runDialog.modified) {\r\n                delete runDialog.modified;\r\n                saveDesktopEnv();\r\n            }\r\n            if (mobile) {\r\n                //$(\"#fileViewer\").hide();\r\n                $(\"#runAreaParent\").hide();//.attr(\"class\",\"col-xs-12\");\r\n                $(\"#mainArea\").show();//attr(\"class\",\"col-xs-12\");\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    let cmdStat;\r\n    function setCmdStat(c) {\r\n        console.log(\"setCmtStat\",cmdStat,\"to\",c);\r\n        if (c && cmdStat) {\r\n            alert(\"(\"+cmdStat+\")\\n\"+\r\n                \"Home\");\r\n            return;\r\n        }\r\n        cmdStat=c;\r\n        return c;\r\n    }\r\n    function stop(opt) {\r\n        if (!setCmdStat(\"stop\")) return;\r\n        return $.when(curPrj.stop()).then(function () {\r\n            curPrj.disconnectDebugger();\r\n            displayMode(\"edit\");\r\n            console.log(\"Boot stopped\");\r\n            if (opt && opt.closeAfterStop) runDialog.close();\r\n        }).finally(function () {\r\n            setCmdStat();\r\n        });\r\n    }\r\n    //\\run\r\n    function run(name) {\r\n        if (!setCmdStat(\"run\")) return;\r\n        return $.when(curPrj.stop()).then(function () {\r\n            return run2(name);\r\n        }).catch(Tonyu.onRuntimeError).finally(function () {\r\n            setCmdStat();\r\n        });\r\n    }\r\n    function run2(fullName) {\r\n        if (typeof fullName!=\"string\") {\r\n            if (runMenuOrd.length==0) {\r\n                alert(\"\");\r\n                return;\r\n            }\r\n            fullName=`${NSP_USR}.${runMenuOrd[0]}`;// curFile.name().replace(/\\.tonyu$/,\"\");\r\n        }\r\n        save();\r\n        curPrj.initCanvas=function () {\r\n            displayMode(\"run\");\r\n            Tonyu.globals.$mainCanvas=runDialog.canvas;\r\n        };\r\n        Log.dumpProject(curPrjDir);\r\n        if (root.SplashScreen) root.SplashScreen.show();\r\n        var o=curPrj.getOptions();\r\n        if (o.run.mainClass!=fullName) {\r\n            o.run.mainClass=fullName;\r\n            curPrj.setOptions(o);\r\n        }\r\n        curPrjDir.touch();\r\n        return curPrj.fullCompile().then(async r=>{\r\n            await SourceFiles.add(r).saveAs(curPrj.getOutputFile());\r\n            runDialog.show();\r\n        },showError).finally(function () {\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n        });\r\n    }\r\n    var alertOnce;\r\n    alertOnce=function (e) {\r\n        alert(e);\r\n        alertOnce=function(){};\r\n    };\r\n    function jump(file,row,col) {\r\n        //alert(file+\":\"+row+\":\"+col);\r\n        fl.select(file);\r\n        var inf=getCurrentEditorInfo();\r\n        if (inf) {\r\n            setTimeout(function () {\r\n                var prog=getCurrentEditor();\r\n                if (prog) prog.gotoLine(row,col);\r\n            },50);\r\n        }\r\n    }\r\n    function restart(){\r\n        stop();\r\n        runDialog.close();\r\n        setTimeout(run,100);\r\n    }\r\n    //var pluginAdded={};\r\n    const errorDialog=new ErrorDialog(ide);\r\n    function showError(e) {\r\n        try{\r\n            errorDialog.show(e);\r\n        } catch(ee) {\r\n            console.log(ee);\r\n            stop();\r\n            //alert(ee);\r\n        }\r\n    }\r\n    window.onerror=EC.handleException=Tonyu.onRuntimeError=ide.showError=showError;\r\n    $(\"#mapEditor\").click(F(function () {\r\n        console.log(\"run map\");\r\n        run(\"kernel.MapEditor\");\r\n    }));\r\n    $(\"#search\").click(F(dialogs.search));\r\n    function fixEditorIndent(prog) {\r\n        var cur=prog.getCursorPosition();\r\n        var orig=prog.getValue();\r\n        var fixed=fixIndent( orig );\r\n        if (orig!=fixed) {\r\n            prog.setValue(fixed);\r\n            prog.clearSelection();\r\n            prog.moveCursorTo(cur.row, cur.column);\r\n        }\r\n    }\r\n    function save() {\r\n        var inf=getCurrentEditorInfo();\r\n        if (!inf) return;\r\n        var curFile=inf.file; //fl.curFile();\r\n        var prog=inf.editor; //getCurrentEditor();\r\n        if (curFile && prog && !curFile.isReadOnly()) {\r\n            fixEditorIndent(prog);\r\n            var old=curFile.text();\r\n            var nw=prog.getValue();\r\n            if (old!=nw) {\r\n                curFile.text(nw);\r\n                curPrj.partialCompile(curFile).catch(Tonyu.onRunTimeError);\r\n                inf.lastTimeStamp=curFile.lastUpdate();\r\n            }\r\n        }\r\n        fl.setModified(false);\r\n    }\r\n    function watchModified() {\r\n        var inf=getCurrentEditorInfo();\r\n        if (!inf) return;\r\n        if (!inf.file.exists()) return;\r\n        if (inf.lastTimeStamp<inf.file.lastUpdate()) {\r\n            inf.editor.setValue(inf.file.text());\r\n            inf.editor.clearSelection();\r\n            inf.lastTimeStamp=inf.file.lastUpdate();\r\n        }\r\n    \tfl.setModified(inf.file.text()!=inf.editor.getValue());\r\n    }\r\n    setInterval(watchModified,1000);\r\n    function loadDesktopEnv() {\r\n        var d=curPrjDir.rel(\".desktop\");\r\n        var res;\r\n        if (d.exists()) {\r\n            res=d.obj();\r\n        } else {\r\n            res={};\r\n        }\r\n        if (!res.runMenuOrd) res.runMenuOrd=[];\r\n        //desktopEnv=res;\r\n        return res;\r\n    }\r\n    function saveDesktopEnv() {\r\n        var d=curPrjDir.rel(\".desktop\");\r\n        d.obj(desktopEnv);\r\n    }\r\n    $(\"#mkrun\").click(F(dialogs.mkrun));\r\n    $(\"#imgResEditor\").click(F(function () {\r\n        resEditors.open(\"image\");\r\n    }));\r\n    $(\"#soundResEditor\").click(F(function () {\r\n        resEditors.open(\"sound\");\r\n    }));\r\n    $(\"#prjOptEditor\").click(F(function () {\r\n        ProjectOptionsEditor(curPrj);\r\n    }));\r\n    //var helpd=null;\r\n    $(\"#refHelp\").click(F(dialogs.helpDialog));\r\n    window.startTutorial=F(dialogs.startTutorial);\r\n    $(\"#rmPRJ\").click(F(function () {\r\n        if (prompt(curPrjDir+\"DELETE \",\"\")!=\"DELETE\") {\r\n            return;\r\n        }\r\n        sh.rm(curPrjDir,{r:1});\r\n        document.location.href=\"index.html\";\r\n    }));\r\n    $(\"#mvPRJ\").click(F(function () {\r\n        var np=prompt(\"\", curPrjDir.name().replace(/\\//g,\"\"));\r\n        if (!np || np==\"\") return;\r\n        if (!np.match(/\\/$/)) np+=\"/\";\r\n        var npd=curPrjDir.up().rel(np);\r\n        if (npd.exists()) {\r\n            alert(npd+\" \");\r\n            return;\r\n        }\r\n        sh.cp(curPrjDir,npd);\r\n        sh.rm(curPrjDir,{r:1});\r\n        document.location.href=\"project.html?dir=\"+npd;\r\n    }));\r\n    $(\"#editorEditor\").click(F(dialogs.editorEditor));\r\n    $(\"#openFolder\").click(F(dialogs.openFolder));\r\n    sh.curFile=function () {\r\n        return fl.curFile();\r\n    };\r\n    if (root.SplashScreen) root.SplashScreen.hide();\r\n    extLink.all();\r\n});\r\n});\r\n\n})();\r\n"]}