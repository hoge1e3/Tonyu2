{"version":3,"sources":["editor_concat.js"],"names":["requirejs","require","define","undef","main","req","makeMap","handlers","defined","waiting","config","defining","hasOwn","Object","prototype","hasOwnProperty","aps","slice","jsSuffixRegExp","hasProp","obj","prop","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","i","j","part","baseParts","split","map","starMap","length","nodeIdCompat","test","replace","charAt","concat","splice","join","makeRequire","relName","forceSync","args","arguments","push","apply","makeLoad","depName","value","callDep","Error","splitPrefix","prefix","index","indexOf","substring","makeRelParts","relParts","plugin","parts","relResourceName","f","n","pr","p","exports","e","module","id","uri","makeConfig","deps","callback","cjsModule","ret","usingExports","callbackType","load","undefined","alt","setTimeout","cfg","_defined","amd","jQuery","Util","hasNodeBuffer","Buffer","isNodeBuffer","data","getQueryString","key","default_","s","qs","RegExp","exec","window","location","href","decodeURIComponent","endsWith","str","postfix","startsWith","Base64_To_ArrayBuffer","base64","dic","num","b","ArrayBuffer","Math","floor","ary_buffer","ary_u8","Uint8Array","charCodeAt","fail","m","console","log","Base64_From_ArrayBuffer","utf8bytes2str","bytes","toString","er","str2utf8bytes","binType","encodeURIComponent","r","a","parseInt","buffer","privatize","o","__privatized","res","match","isBuffer","global","this","t","c","u","code","1","Assertion","failMesg","flatten","$a","_regedType","registerType","MODE_STRICT","MODE_DEFENSIVE","MODE_BOOL","shift","_mode","isDefensive","isBool","subAssertion","assert","eq","ne","isset","is","type","v","_assert_func","Array","na","String","Number","Function","k","ty","ensureError","action","err","message","setMode","mode","isStrict","top","forEach","stack","bind","opt","and","types","2","self","3","root","TonyuThreadF","IT","performance","now","Date","Tonyu","TT","klass","handleEx","onRuntimeError","alert","addMeta","fn","extend","getMeta","bless","val","create","dst","src","removeMeta","classMetas","meta","mm","ensureNamespace","nsp","keys","propReg","params","parent","superclass","includes","fullName","shortName","namespace","methodsF","methods","decls","nso","classes","chkclass","ctx","chkmeta","isShim","path","extenderFullName","mod","pop","extender","init","includesRec","extendFrom","initialize","useNew","constructor","nonShimParent","func","prot","props","fbk","methodInfo","fiber","isTonyuObject","defineProperty","getClassInfo","initFullName","isSourceChanged","tonyu","nodeTimestamp","lastUpdate","shouldCompile","hasSemanticError","dks","getDependingClasses","globals","getClass","found","ns","nn","nr","lastLoopCheck","resetLoopCheck","disableTime","thread","setGlobal","getGlobal","timeout","Promise","bindFunc","meth","thiz","not_a_tonyu_object","hasKey","invokeMethod","objName","callFunc","fName","checkNonNull","iterator","run","bootClassName","bootClass","runMode","boot","TPR","currentProject","runningObj","checkLoop","VERSION","A","ID","random","error","../lib/assert","../lib/root","./TonyuThread","./tonyuIterator","4","idSeq","TonyuThread","[object Object]","frame","_isDead","cnt","_isWaiting","fSuspended","tryStack","preemptionTime","onEndHandlers","onTerminateHandlers","age","isDead","_threadGroup","objectPoolAge","tGrpObjectPoolAge","isDeadThreadGroup","g","frameFunc","prev","methodName","method","pc","enter","th","termStatus","notifyEnd","retVal","exit","notifyTermination","status","tst","fb","succ","on","st","exception","promise","then","kill","lastEx","catchPC","eventSpec","h","suspend","lastEvent","remove","steps","msg","gotoCatch","resolve","stepsLoop","wrapError","re","original","sv","currentThread","preempted","isAlive","5","ArrayValueIterator","set","ArrayKeyValueIterator","ObjectKeyIterator","elems","ObjectKeyValueIterator","arity","tonyuIterator","resMod","R","reqjsSeq","def","reqs","getModuleInfo","reqsFromFunc","setReqs","doLoad","getObjs","loadIfAvailable","reqm","loaded","revReqs","ms","modules","notifyLoaded","dependingMod","loadedModuleName","ary","cur","d","Boolean","PathUtil","driveLetter","url","Path","isPath","Absolute","isAbsolutePath","Relative","Dir","isDir","AbsDir","File","SEP","isChildOf","child","fixSep","hasDriveLetter","isURL","protocol","hostPort","isRelativePath","hasBackslashSep","to","directorify","filify","splitPath","ext","truncExt","truncSEP","up","rel","relPath","paths","resPath","base","ps","old","backslashifyAfter","isAbsolute","isRelative",".png",".gif",".jpeg",".jpg",".ico",".wav",".mp3",".ogg",".midi",".mid",".mzo",".txt",".html",".htm",".css",".js",".json",".zip",".swf",".pdf",".doc",".xls",".ppt",".docx",".docm",".dotx",".dotm",".xlsx",".xlsm",".xltx",".xltm",".xlsb",".xlam",".pptx",".pptm",".potx",".potm",".ppsx",".ppsm",".ppam",".tonyu",".c",".dtl","DU","DUBRK","same","isNativePromise","catch","isJQPromise","isPromise","all","rest","useJQ","throwNowIfRejected","state","reject","assertResolved","resolved","ensureDefer","isDeferred","directPromise","funcPromise","$","Deferred","external","rej","throwPromise","throwF","each","loop","brk","objs","when1","deff1","deff2","r1","dr","r2","tryLoop","tr","tryEach","documentReady","callbackToPromise","NOP","E","errorHandler","setE","begin","try","DeferredUtil","P","M","FS","fstypes","stub","addFSType","fsgen","availFSTypes","mesg","fstype","isReadOnly","options","supportsSync","resolveFS","getRootFS","mounted","rootFS","mountPoint","inMyFS","getReturnTypes","getContent","size","toBin","byteLength","getContentAsync","setContent","content","setContentAsync","appendContent","appendContentAsync","getMetaInfo","setMetaInfo","info","mkdir","touch","exists","opendir","opendirAsync","cp","assertExist","srcIsDir","dstfs","dstIsDir","cont","mv","rm","link","getURL","onAddObserver","delegateMethods","fs","assertWriteable","getContentType","toLowerCase","getBlob","blobType","Blob","hasPlainText","toPlainText","isText","find","ls","ep","resolveLink","l","isLink","np","opendirEx","dest","getDirTree","style","excludes","relP","_global","download","opts","xhr","XMLHttpRequest","open","responseType","onload","saveAs","response","onerror","send","corsEnabled","click","node","dispatchEvent","MouseEvent","evt","document","createEvent","initMouseEvent","HTMLAnchorElement","blob","URL","webkitURL","createElement","origin","target","createObjectURL","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","fromCharCode","bom","popup","title","body","innerText","force","isSafari","HTMLElement","safari","isChromeIOS","userAgent","FileReader","reader","onloadend","result","readAsDataURL","Content","plainText","contentType","plain","buffer2ArrayBuffer","arrayBuffer2Buffer","bin","bufType","nodeBuffer","arrayBuffer","looksLikeDataURL","text","DataURL","setBuffer","toArrayBuffer","toNodeBuffer","toURL","hasBin","hasURL","hasArrayBuffer","toBlob","dataURL2bin","bin2dataURL","head","dataHeader","dataURL","ctype","existsSync","NativeFS","rootPoint","process","cwd","available","Pro","toNativePath","readFileSync","statSync","pa","writeFileSync","appendFileSync","stat","mtime","getTime","mkdirSync","ts","readdirSync","nosep","isDirectory","rmdirSync","unlinkSync","utimesSync","apath","rfs","w","watch","rpath","fpath","eventType","notifyChanged","close","LSFS","storage","useDirCache","dirCache","ramDisk","localStorage","resolveKey","getItem","setItem","removeItem","itemExists","getDirInfo","dinfos","dinfo","JSON","parse","putDirInfo","trashed","stringify","ppath","pdinfo","_touch","removeEntry","removeEntryWithoutTrash","isRAM","getUsage","using","getCapacity","seq","KEY","lim","pow","ru","add","max","readOnly","cs","includeTrashed","pinfo","inf","noTrash","ajaxTransport","originalOptions","jqXHR","FormData","dataType","headers","async","username","password","addEventListener","statusText","getAllResponseHeaders","setRequestHeader","abort","WebFS","get","readAsArrayBuffer","Env","expand","expandPath","FSClass","SFile","_path","isSFile","setPolicy","policy","_clone","getPolicy","_resolve","topdir","topDir","contains","file","bp","pathR","assertDir","sibling","pre","post","equals","act","isTrashed","metaInfo","assertExists","noFollowLink","recursive","removeWithoutTrash","getText","setText","ct","appendText","forceText","getDataURL","setDataURL","setBytes","getBytes","lines","copyFrom","copyTo","dstf","progress","echo","getResolvedLinkPath","moveFrom","ex","moveTo","listFilesAsync","eachrev","reverse","fun","dir","convertOptions","_listFiles","ord","order","cvt","di","excludesF","sort","listFiles","nex","getFS","observe","addObserver","setBlob","sum","exportAsObject","importFromObject","_1","_2","handler","_act","RootFS","defaultFS","mount","fstab","_fstab","unmount","fact","unshift","_3","observers","remover","observer","ob","fsv","zip","setJSZip","JSZip","dstZip","jszip","folder","generateAsync","compression","unzip","arrayBuf","destDir","onCheckFile","overwrite","loadAsync","files","zipEntry","buf","_buf","redirectedTo","isArray","x","noop","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","newValue","finale","thisArg","_unhandledRejectionFn","len","done","reason","prom","arr","remaining","race","PR","Class","env","setEnvProvider","getEnvProvider","setEnv","getEnv","importScripts","postMessage","isFile","elem","_curDir","_curFile","_mod","selbox","tagName","FL","select","curFile","curDir","setModified","item","itemText","isModified","items","nDir","removeClass","addClass","attr","empty","wait","append","appendTo","dirs","lp","displayName","isCur","change","isTrcf","handleException","EC","UI","F","expr","listeners","$vars","$edits","model","edit","writeToJq","$edit","jq","validator","validate","toVal","errors","show","validationMessage","OKButton","ok","addError","removeError","allOK","isValid","writeToModel","fromVal","li","tag","$var","realtimechange","css","eType","ev","which","first","parseAttr","parseArray","createTextNode","parseFloat","FM","validateName","getCurDir","fileList","getCurFile","createContent","onMenuStart","dialog","onend","dialogOpt","enterkey","chg","color","note","removeAttr","extra","extraUI","oldName","mvExtraUI","nf","confirm","ide","pluginAdded","pos","row","col","isTError","fileName","compiler","project","columnNumber","lineNumber","convertFromWorkerPath","mesgd","jump","npos","srcd","width","height","shownError","pluginName","restart","showErrorPos","displayMode","trcpre","html","stop","consoleBuffer","traceTap","optimizeFirst","profile","verboseFirst","traceFirstTbl","Parser","StringParser","nc","parseFunc","img","tokens","success","State","strOrTokens","maxPos","dispTbl","tbl","except","setName","noFollow","res2","andNoUnify","next","_first","ntbl","fromFirst","space","retNoUnify","clone","ALL","firstTokens","token","fromFirstTokens","unifyFirst","other","or","orNoUnify","checkTbl","t2","mergeTbl","repN","min","current","rep0","rep1","sep1","sep","valuesToArray","tail","tails","sep0","tap","retN","parseStr","updateMaxPos","isSuccess","s0","strLike","reg","spos","traceToken","parser","eof","TokensParser","suc","lazy","pf","addRange","newr","newEnd","curEnd","setRange","getRange","range","sp","SAMENAME","tk","pat","fst","isToken","parsers","posts","dtk2","dtk","reserved","function","var","return","typeof","if","__typeof","for","else","super","while","continue","break","do","switch","case","default","finally","throw","of","in","native","instanceof","new","true","false","null","usethread","ifwait","nowait","_thread","delete","extends","literal","regex","REG","DIV","symresv","tk_constructor","symbol","extension","tokenizer","indentStr","linfo","isOpen","isClose","curDepth","depths","line","opens","closes","$1","changeDepths","depth","indStr","p2r","lastPos","proc","lastLine","assign","fix","HttpHelper","Arrow","clear","off","showOld","offset","arrow","font","position","left","zIndex","z-index","setInterval","WebSite","tablet","mobile","Platform","loc","devMode","WebSite_runType","urlAliases","builtinAssetNames","images/Ball.png","images/base.png","images/Sample.png","images/inputPad.png","images/neko.png","images/mapchip.png","pluginTop","sampleImg","isNW","__node_webkit","__nwjs","mp4Disabled","tonyuHome","PathSep","noconcat","TONYU_HOME","logdir","TONYU_LOGDIR","wwwDir","platform","ffmpeg","pkgInfo","TONYU_PROJECTS","projects","delimiter","prjDirs","kernelDir","host","compiledKernel","uploadTmpUrl","newVersionUrl","scriptServer","version","hoge","BuiltinAssets","removeJSOutput","images/sound.png","images/sound_ogg.png","images/sound_mp3.png","images/sound_mp4.png","images/sound_m4a.png","images/sound_mid.png","images/sound_wav.png","images/ecl.png","WS","serverType","runtime","disableROM","serverTop","blobPath","getFiles","putFiles","Shell","mustExist","resolve2","newCommand","cd","pwd","vars","sh","from","ln","notrash","cat","grep","pattern","lineNo","report","setout","ui","outUI","when","getvar","strcat","dl","prompt","ASYNC","help","description","devtool","Window","showDevTools","Log","logHome","doLog","digit","zs","todayDir","y","getFullYear","getMonth","da","getDate","curProject","getHours","getMinutes","getSeconds","dumpProject","out","logging","varlog","mul","con","Wiki","placeHolder","home","plugins","tocFile","curLined","W","refers","figures","plists","LINEMARK","history","encodeURL","encodeURI","$h","lineMark","ul","beginMark","endMark","blocks","figInfo","refInfo","plistInfo","toc","idx","navBar","register","fi","refs","no","unul","uld","lastMatch","rightContext","parseLink","label","ss","pi","pclose","end","we","hasBrace","includeBrace","WikiBraces","caption","$2","hover","varn","cn","imfile","builtinImages","dragover","dragenter","drop","editMode","originalEvent","dataTransfer","stopPropagation","preventDefault","fileContent","thome","imageHolder","resolveFile","useAnchor","ahref","procLink","nameOrFile","ht","scrollTop","back","highlightLine","area","50_100.png","50_160.png","50_300.png","apple1apple2.png","coords.png","copy60_100.png","firstRunRes.png","firstVarRes.png","itadaki.png","noWaitCat.png","runtimeError.png","sample.png","sayonara.png","syntaxError.png","embed","inner","cls","keydown","cmd","canda","fns","cand","comp","ce","sres","table","class","focus","closest","atest","oldcat","Klass","getArgs","isPropDesc","pk","configurable","enumerable","writable","pd","thisName","singletonName","$parent","$this","$singleton","fldinit","wrapCancelled","wrap","checkSchema","$fields","inherit","wrapStatic","__bounded","Binder","addMethod","GlobalDialog","prj","getOptions","createDOM","dom","editor","keyvalueeditor","overflow-y","$bind","save","placeHolderKey","placeHolderValue","toggleButton","deleteButton","getValuesA","qval","setOptions","getValues","odiag","gdiag","buttons","OK","requestRebuild","copyToKernel","ker","cps","KEC","down","altKey","ctrlKey","shiftKey","keyCode","WD","topPage","ifrm","frameBorder","resize","PP","newImage","getContext","drawImage","pixels","getImageData","getPixel","cv","imagePixelData","ofs","G","B","setPixel","parse1Pattern","isParseError","image","hex","trans","dx","dy","PatterParseError","sx","sy","newim","newImD","newD","ey","putImageData","yy","xx","boundsInSrc","Assets","baseDir","getDir","mp3Disabled","oggf","asFile","IL","cache","resImgs","onLoad","resa","resImg","excludeEmpty","names","urlKey","im","pw","ph","pwidth","pheight","rw","rh","parse1","imgDOM","ImageList","T2MediaLib","_context","context","picoAudio","soundDataAry","bgmPlayerMax","bgmPlayerAry","masterVolume","seMasterVolume","bgmMasterVolume","playingAudio","audioVolume","audioTempo","audioDataAry","seSources","inited","disabled","AudioContext","webkitAudioContext","T2MediaLib_BGMPlayer","allClearSoundData","dataAry","clearSoundData","allRemoveDecodedSoundData","soundData","isDecodeComplete","isDecoding","removeDecodedData","removeDecodedSoundData","getMasterVolume","setMasterVolume","vol","bgmPlayer","onChangeBGMMasterVolume","createSoundFromArray","array1","array2","T2MediaLib_SoundData","numOfChannels","audioBuffer","createBuffer","sampleRate","buffer1","getChannelData","buffer2","onDecodeComplete","loadSound","callbacks","isLoadAndDecode","PicoAudio","that","onLoadComplete","decodeSound","onError","errorID","fileData","isLoadComplete","decodedCallbacksAry","bgmPlayerId","some","onDecode","smf","parseSMF","Mezonet","Source","retAry","searchOggLoop","tagLoopStart","tagLoopEnd","decodeAudioData","activate","isContextResumed","resume","isActivated","source","createBufferSource","connect","destination","start","noteOn","getSoundFileData","soundDataObj","getSoundDecodedData","decodedData","getCurrentTime","currentTime","playSE","pan","rate","loopStart","loopEnd","duration","bgm","playback","Start","AudioBuffer","durationStart","createGain","createGainNode","gainNode","panNode","createPanner","playbackRate","panningModel","offset_adj","panAngle","panX","sin","PI","panZ","cos","positionX","positionY","positionZ","setPosition","gain","volumeValue","panValue","playStartTime","playOffset","plusTime","noteOff","onended","event","stopSE","sourceObj","AudioBufferSourceNode","cancelScheduledValues","linearRampToValueAtTime","stopAllSE","getSEMasterVolume","setSEMasterVolume","getSEVolume","setSEVolume","getSERate","setSERate","getSEPan","setSEPan","isSELoop","setSELoop","getSELoopStartTime","setSELoopStartTime","getSELoopEndTime","setSELoopEndTime","playBGM","_getBgmPlayer","stopBGM","pauseBGM","resumeBGM","getBGMMasterVolume","setBGMMasterVolume","getBGMVolume","setBGMVolume","getBGMTempo","setBGMTempo","tempo","getBGMPan","setBGMPan","isBGMLoop","setBGMLoop","getBGMLoopStartTime","setBGMLoopStartTime","getBGMLoopEndTime","setBGMLoopEndTime","getBGMCurrentTime","getBGMLength","getPlayingBGMName","setOnBGMEndListener","listener","getPlayingBGMState","getBGMPicoAudio","isTagLoop","setTagLoop","getBGMPlayerMax","allStopBGM","allResetBGM","loadAudio","audio","Audio","play","createMediaElementSource","playAudio","startTime","pause","volume","stopAudio","pauseAudio","resumeAudio","setAudioVolume","setAudioTempo","setAudioPosition","time","getAudioData","getAudioCurrentTime","getAudioLength","lastIndexOf","tagSize","startIdx","lengthIdx","loopLength","isPicoAudio","isMezonetPlayback","Playback","t2MediaLib","arg_id","playingBGMState","playingBGMStatePending","playingBGM","playingBGMName","bgmPause","bgmPauseTime","bgmPauseCurrentTime","bgmPauseTempo","bgmPauseLoop","bgmPauseLoopStart","bgmPauseLoopEnd","bgmVolume","bgmTempo","bgmPan","picoAudioSetDataBGMName","PICO_AUDIO_VOLUME_COEF","succFunc","pending","_setPlayingBGMState","_initPicoAudio","setData","initStatus","setLoop","bgmLengthTime","MAX_SAFE_INTEGER","setStartTime","Stop","setVolume","isNaN","setRate","isLoop","time2","currenTime","minusTime","getTrackTime","states","setOnSongEndListener","isNone","UIDiag","isPrimitive","parseMesg","defTitle","multiLine","sendF","_default","getStatus","geom","my","at","resultValue","__whitespace"," ","\t","\n","\f","\r","difflib","defaultJunkFunction","stripLinebreaks","stringAsLines","lfpos","crpos","linebreak","__reduce","list","initial","__ntuplecomp","mlen","__calculate_ratio","matches","__isindict","dict","__dictget","defaultValue","SequenceMatcher","isjunk","set_seqs","set_seq1","set_seq2","matching_blocks","opcodes","fullbcount","__chain_b","b2j","populardict","elt","indices","junkdict","isbjunk","isbpopular","find_longest_match","alo","ahi","blo","bhi","besti","bestj","bestsize","j2len","nothing","newj2len","jdict","jkey","get_matching_blocks","qi","la","lb","queue","i1","j1","k1","block","non_adjacent","i2","j2","k2","get_opcodes","ai","bj","answer","get_grouped_opcodes","codes","group","groups","ratio","triple","quick_ratio","avail","availhas","numb","real_quick_ratio","_calculate_ratio","diffview","buildView","baseTextLines","newTextLines","baseTextName","newTextName","contextSize","inline","viewType","celt","clazz","className","telt","appendChild","ctelt","tdata","node2","rows","addCells","tidx","tend","textLines","addCellsInline","tidx2","be","rowcnt","toprows","botrows","setAttribute","baseFile","newFile","FType","overflow","isValidFile","newtxt","diffoutputdiv","diffoutput","firstChild","removeChild","dd","devDir","refresh","kerf","devf","FR","ajax","THRESH","redirectTo","frags","sent","waitTime","addRedir","runFrag","complete","frag","rf","Sync","sync","local","remote","promptAfter","n1","uploads","downloads","visited","param","onstatus","cmp","lcm","n2","dlData","dlf","pathInfo","n3","upds","rmm","rsh","prjDir","onLineClick","word","searchRes","doLineClick","syncWithKernel","inKer","auth","currentUser","withCsrfToken","user","csrfToken","assertLogin","onLoggedIn","showLoginLink","Auth","BLOB_PATH_EXPR","upload","fd","getElementById","processData","isBlobURL","uploadToExe","bis","getBlobInfos","bi","draw","canvas","Image","onld","clb","cw","ch","cctx","calcw","calch","clearRect","marginw","marginh","ImageRect","mousemove","pageX","pageY","chipRects","cr","calcRect","point","rect","inRect","curChipIndex","pcr","mousedown","pv","curItemName","patName","Clipboard","copyToClipboard","radio","setRC","selRC","setWH","selWH","theForm","redrawImage","onclose","cols","calcWH","selval","srcImg","canvasRect","IMD","drawFrame","rects","scaleX","scaleY","strokeStyle","beginPath","lineTo","closePath","stroke","nNan","calcRC","_item","itemName","urlScript","openImg","ImageDetailEditor","mediaInfo","overflow-v","_dropAdd","rsrc","getResource","tempFiles","rsrcDir","itemUIs","reload","delItem","itemUI","dragMsg","exts","dragPoint","dropAdd","itemTbl","setResource","update","cvs","convURL","genItemUI","mes","readFiles","readFileSum","notReadFiles","existsFiles","readCnt","filetype","useBlob","extPattern","itemExt","existsFile","itemRelPath","fNameTemp","newItem","rename","renameUnique","prjN","getName","temp_file","temp_itemName","temp_itemExt","temp_v","itemFile","images","sounds","modal","resourceDir","spawn","C","convert","stdin","ResEditor","OggConverter","mediaInfos","sound","hasMZO","hasMIDI","addPlugin","removePlugin","editors","dropAndOpen","eo","curResEditor","mainClass","menu","cutLabel","copyLabel","pasteLabel","gui","Menu","cut","MenuItem","execCommand","copy","paste","win","nativeMenuBar","createMacBuiltin","contentDocument","contentWindow","extLink","getOpt","afterClick","installed","box2d","detection","timbre","gif","jquery_ui","convOpt","detectNeeded","hasInGlobal","loadAll","namea","loadNext","reqj","request","MkRun","mkrun","run2","destZip","tmpDir","tmpFileName","mkram","resc","loadFilesBuf","jsDir","runScrFileName","copySrc","imgf","copySampleImages","convertLSURL","addFileToLoadFiles","mapd","mf","staticd","genFilesJS","usrjs","usrjsmap","kerjs","runScr2","runScr2Map","pluginDir","copyPlugins","copyResources","htmlfile","htmlcont","onComplete","ote","outtype","hide","form","openFolder","diag","button","onEnd","showItemInFolder","DiagAdjuster","diagElem","rszt","margin","handleResize","clearTimeout","dw","dh","pad","sz","afterResize","handleResizeF","includeJSScript","resObj","genPath","binary","json","lu","_","s1","s2","s3","beautifyJSON","east","ExportHTMLDialog","prog","placeholder","iframe","reset","desktopEnv","runDialog","screenH","shownOnce","ngeom","resizeCanvas","modified","drag","opened","onClose","blur","$mainCanvas","TonyuBuilderClient","Worker","SourceFiles","FileMap","BuilderClient","worker","Wrapper","fileMap","getOutputFile","debugger","srcraw","localPrjDir","ns2depspec","remotePrjDir","getNamespace","getDependingProjects","dep","compres","sf","convertError","changed","fullCompile","nsraw","partialCompile","onCompiled","../lang/SourceFiles","../lib/FileMap","../lib/WorkerServiceB","ProjectFactory","CompiledProject","langMod","StackDecoder","SourceMap","../lang/StackDecoder","../lang/langMod","../lang/source-map","../project/CompiledProject","../project/ProjectFactory","./BuilderClient","vm","SourceFile","sourceMap","outf","mapFile","url2SourceFile","tmpdir","uniqFile","compileFunction","functions","sourceFile","S","StackTrace","fromError","offline","column","bias","SourceMapConsumer","GREATEST_LOWER_BOUND","originalPositionFor","getSourceMapConsumer","sourceMapConsumer","./SourceFiles","./source-map","./stacktrace","myNsp","loadClasses","getEXT","6","factory","installedModules","__webpack_require__","moduleId","SourceMapGenerator","SourceNode","base64VLQ","util","ArraySet","MappingList","aArgs","_file","getArg","_sourceRoot","_skipValidation","_sources","_names","_mappings","_sourcesContents","_version","fromSourceMap","aSourceMapConsumer","sourceRoot","generator","eachMapping","mapping","newMapping","generated","generatedLine","generatedColumn","relative","originalLine","originalColumn","addMapping","sources","sourceContentFor","setSourceContent","_validateMapping","has","aSourceFile","aSourceContent","toSetString","applySourceMap","aSourceMapPath","newSources","newNames","unsortedForEach","aGenerated","aOriginal","aSource","aName","_serializeMappings","nameIdx","sourceIdx","previousGeneratedColumn","previousGeneratedLine","previousOriginalColumn","previousOriginalLine","previousName","previousSource","mappings","toArray","compareByGeneratedPositionsInflated","encode","_generateSourcesContent","aSources","aSourceRoot","toJSON","sourcesContent","aValue","encoded","vlq","toVLQSigned","VLQ_BASE","decode","aStr","aIndex","aOutParam","continuation","shifted","strLen","intToCharMap","number","charCode","aDefaultValue","urlRegexp","dataUrlRegexp","urlParse","aUrl","scheme","port","urlGenerate","aParsedUrl","aPath","aRoot","aPathUrl","aRootUrl","joined","level","substr","supportsNullProto","identity","isProtoString","strcmp","aStr1","aStr2","fromSetString","compareByOriginalPositions","mappingA","mappingB","onlyCompareOriginal","compareByGeneratedPositionsDeflated","onlyCompareGenerated","_array","_set","fromArray","aArray","aAllowDuplicates","getOwnPropertyNames","sStr","isDuplicate","aIdx","_sorted","_last","aCallback","aThisArg","aMapping","lineA","lineB","columnA","columnB","binarySearch","quickSort","aSourceMap","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","Mapping","lastOffset","_sections","offsetLine","offsetColumn","generatedOffset","consumer","__generatedMappings","_parseMappings","__originalMappings","_charIsMappingSeparator","GENERATED_ORDER","ORIGINAL_ORDER","LEAST_UPPER_BOUND","aContext","aOrder","_generatedMappings","_originalMappings","allGeneratedPositionsFor","needle","_findMapping","lastColumn","smc","generatedMappings","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","segment","cachedSegments","temp","originalMappings","aNeedle","aMappings","aLineName","aColumnName","aComparator","aBias","search","computeColumnSpans","nextMapping","lastGeneratedColumn","Infinity","hasContentsOfAllSources","sc","nullOnMissing","fileUriAbsPath","generatedPositionFor","sectionIndex","section","every","generatedPosition","sectionMappings","adjustedMapping","aHaystack","aCompare","recursiveSearch","aLow","aHigh","mid","swap","doQuickSort","comparator","low","high","round","pivot","q","REGEX_NEWLINE","isSourceNode","aLine","aColumn","aChunks","children","sourceContents","fromStringWithSourceMap","aGeneratedCode","aRelativePath","remainingLines","shiftNextLine","lastGeneratedLine","lastMapping","nextLine","addMappingWithCode","aChunk","chunk","prepend","walk","aFn","aSep","newChildren","replaceRight","aPattern","aReplacement","lastChild","walkSourceContents","toStringWithSourceMap","sourceMappingActive","lastOriginalSource","lastOriginalLine","lastOriginalColumn","lastOriginalName","sourceContent","7","ErrorStackParser","StackFrame","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","filter","functionName","parseOpera9","parseOpera11","parseOpera10","stackframe","StackGenerator","backtrace","maxStackSize","callee","caller","isFinite","toUpperCase","setArgs","getEvalOrigin","evalOrigin","setEvalOrigin","getFunctionName","getFileName","getLineNumber","getColumnNumber","./util","./base64","8","9","./array-set","./base64-vlq","./binary-search","./quick-sort","10","11","StackTraceGPS","onreadystatechange","readyState","responseText","atob","sourceCache","sourceMapConsumerCache","_atob","_get","_getSourceMapConsumer","pinpoint","getMappedLocation","findFunctionName","source-map/lib/source-map-consumer","12","generateArtificially","getSync","instrument","__stacktraceOriginalFn","deinstrument","error-stack-parser","stack-generator","stacktrace-gps","sidesList","sides","fromSide","toSide","idseq","readyQueue","procReverse","ready","sendError","je","isReady","readyPromise","terminate","WorkerService","install","serv","addType","createCore","include","loadDependingClasses","urlBased","createDirBasedCore","outJS","addDependencyResolver","spec","./ProjectFactory","resolvers","fromDependencySpec","fromDir","ProjectCore","dependingProjects","dprj","dirBasedMod","rdir","getOptionsFile","lang","outF","outputFile","nb","IR","TN","NAME","WIDTH","HEIGHT","delay","$Screen","toDataURL","prjdir","imgs","crt","thumbnail","rawRun","detectPlugins","fixBootRunClasses","runScriptMode","rawBoot","getResourceFile","resFile","imgSnd","defaultResource","hasSoundResource","getThumbnail","convertBlobInfos","loadResource","setImageList","requestPlugin","loadPlugins","mc","fixClassName","bc","showProgress","initCanvas","SplashScreen","sysMod","CP","kernel","curDebugger","rp","getIframeProject","onTonyuDebuggerReady","showError","setDebugger","querySelector","Project","disconnectDebugger","renameClassName","defaultOptions","defaultSuperClass","$defaultFPS","$imageSmoothingDisabled","$soundLoadAndDecode","kernelEditable","language","fixFile","fo","fixObject","ft","fixOptions","sn","NSP_USR","NSP_KER","FileList","FileMenu","ErrorDialog","fixIndent","sh2","ProjectOptionsEditor","ctk","KeyEventChecker","IFrameDialog","rt","KDD","searchDialog","swk","ResEditors","MainClassDialog","NWMenu","mkrunDiag","DebugDialog","IDEProject","optionFixer","$LASTPOS","curPrjDir","optionFile","fl","getCurrentEditorInfo","getCurrentEditor","gotoLine","curPrj","resEditors","$currentProject","EXT","runMenuOrd","loadDesktopEnv","exportHTMLDialog","resf","diagnose","runDialogParam","onResize","spellcheck","refactorUI","curDOM","lastTimeStamp","setValue","clearSelection","progDOM","ace","lastEditor","editorFontSize","setFontSize","setTheme","getSession","setReadOnly","commands","removeCommand","fixedWidthGutter","dispName","refreshRunMenu","ii","saveDesktopEnv","dorun","js/concat.js","js/concat.js.map","upcased","static","maps","checked","_new","refactor","chk","oldCN","newCN","ren","reloadFromFiles","cmdrun","errorDialog","setCmdStat","ee","remains","destroy","getCursorPosition","orig","getValue","fixed","moveCursorTo","fixEditorIndent","nw","onRunTimeError","runtimeConfig","hiddenFolder","helpd","startTutorial","npd"],"mappings":"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","sourcesContent":["(function (){\r\n/**\r\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\r\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\r\n */\r\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\r\n//be followed.\r\n/*global setTimeout: false */\r\n\r\nvar requirejs, require, define;\r\n(function (undef) {\r\n    var main, req, makeMap, handlers,\r\n        defined = {},\r\n        waiting = {},\r\n        config = {},\r\n        defining = {},\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        aps = [].slice,\r\n        jsSuffixRegExp = /\\.js$/;\r\n\r\n    function hasProp(obj, prop) {\r\n        return hasOwn.call(obj, prop);\r\n    }\r\n\r\n    /**\r\n     * Given a relative module name, like ./something, normalize it to\r\n     * a real name that can be mapped to a path.\r\n     * @param {String} name the relative name\r\n     * @param {String} baseName a real name that the name arg is relative\r\n     * to.\r\n     * @returns {String} normalized name\r\n     */\r\n    function normalize(name, baseName) {\r\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\r\n            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\r\n            baseParts = baseName && baseName.split(\"/\"),\r\n            map = config.map,\r\n            starMap = (map && map['*']) || {};\r\n\r\n        //Adjust any relative paths.\r\n        if (name) {\r\n            name = name.split('/');\r\n            lastIndex = name.length - 1;\r\n\r\n            // If wanting node ID compatibility, strip .js from end\r\n            // of IDs. Have to do this here, and not in nameToUrl\r\n            // because node allows either .js or non .js to map\r\n            // to same file.\r\n            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\r\n                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\r\n            }\r\n\r\n            // Starts with a '.' so need the baseName\r\n            if (name[0].charAt(0) === '.' && baseParts) {\r\n                //Convert baseName to array, and lop off the last part,\r\n                //so that . matches that 'directory' and not name of the baseName's\r\n                //module. For instance, baseName of 'one/two/three', maps to\r\n                //'one/two/three.js', but we want the directory, 'one/two' for\r\n                //this normalization.\r\n                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\r\n                name = normalizedBaseParts.concat(name);\r\n            }\r\n\r\n            //start trimDots\r\n            for (i = 0; i < name.length; i++) {\r\n                part = name[i];\r\n                if (part === '.') {\r\n                    name.splice(i, 1);\r\n                    i -= 1;\r\n                } else if (part === '..') {\r\n                    // If at the start, or previous value is still ..,\r\n                    // keep them so that when converted to a path it may\r\n                    // still work when converted to a path, even though\r\n                    // as an ID it is less than ideal. In larger point\r\n                    // releases, may be better to just kick out an error.\r\n                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\r\n                        continue;\r\n                    } else if (i > 0) {\r\n                        name.splice(i - 1, 2);\r\n                        i -= 2;\r\n                    }\r\n                }\r\n            }\r\n            //end trimDots\r\n\r\n            name = name.join('/');\r\n        }\r\n\r\n        //Apply map config if available.\r\n        if ((baseParts || starMap) && map) {\r\n            nameParts = name.split('/');\r\n\r\n            for (i = nameParts.length; i > 0; i -= 1) {\r\n                nameSegment = nameParts.slice(0, i).join(\"/\");\r\n\r\n                if (baseParts) {\r\n                    //Find the longest baseName segment match in the config.\r\n                    //So, do joins on the biggest to smallest lengths of baseParts.\r\n                    for (j = baseParts.length; j > 0; j -= 1) {\r\n                        mapValue = map[baseParts.slice(0, j).join('/')];\r\n\r\n                        //baseName segment has  config, find if it has one for\r\n                        //this name.\r\n                        if (mapValue) {\r\n                            mapValue = mapValue[nameSegment];\r\n                            if (mapValue) {\r\n                                //Match, update name to the new value.\r\n                                foundMap = mapValue;\r\n                                foundI = i;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (foundMap) {\r\n                    break;\r\n                }\r\n\r\n                //Check for a star map match, but just hold on to it,\r\n                //if there is a shorter segment match later in a matching\r\n                //config, then favor over this star map.\r\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\r\n                    foundStarMap = starMap[nameSegment];\r\n                    starI = i;\r\n                }\r\n            }\r\n\r\n            if (!foundMap && foundStarMap) {\r\n                foundMap = foundStarMap;\r\n                foundI = starI;\r\n            }\r\n\r\n            if (foundMap) {\r\n                nameParts.splice(0, foundI, foundMap);\r\n                name = nameParts.join('/');\r\n            }\r\n        }\r\n\r\n        return name;\r\n    }\r\n\r\n    function makeRequire(relName, forceSync) {\r\n        return function () {\r\n            //A version of a require function that passes a moduleName\r\n            //value for items that may need to\r\n            //look up paths relative to the moduleName\r\n            var args = aps.call(arguments, 0);\r\n\r\n            //If first arg is not require('string'), and there is only\r\n            //one arg, it is the array form without a callback. Insert\r\n            //a null so that the following concat is correct.\r\n            if (typeof args[0] !== 'string' && args.length === 1) {\r\n                args.push(null);\r\n            }\r\n            return req.apply(undef, args.concat([relName, forceSync]));\r\n        };\r\n    }\r\n\r\n    function makeNormalize(relName) {\r\n        return function (name) {\r\n            return normalize(name, relName);\r\n        };\r\n    }\r\n\r\n    function makeLoad(depName) {\r\n        return function (value) {\r\n            defined[depName] = value;\r\n        };\r\n    }\r\n\r\n    function callDep(name) {\r\n        if (hasProp(waiting, name)) {\r\n            var args = waiting[name];\r\n            delete waiting[name];\r\n            defining[name] = true;\r\n            main.apply(undef, args);\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\r\n            throw new Error('No ' + name);\r\n        }\r\n        return defined[name];\r\n    }\r\n\r\n    //Turns a plugin!resource to [plugin, resource]\r\n    //with the plugin being undefined if the name\r\n    //did not have a plugin prefix.\r\n    function splitPrefix(name) {\r\n        var prefix,\r\n            index = name ? name.indexOf('!') : -1;\r\n        if (index > -1) {\r\n            prefix = name.substring(0, index);\r\n            name = name.substring(index + 1, name.length);\r\n        }\r\n        return [prefix, name];\r\n    }\r\n\r\n    //Creates a parts array for a relName where first part is plugin ID,\r\n    //second part is resource ID. Assumes relName has already been normalized.\r\n    function makeRelParts(relName) {\r\n        return relName ? splitPrefix(relName) : [];\r\n    }\r\n\r\n    /**\r\n     * Makes a name map, normalizing the name, and using a plugin\r\n     * for normalization if necessary. Grabs a ref to plugin\r\n     * too, as an optimization.\r\n     */\r\n    makeMap = function (name, relParts) {\r\n        var plugin,\r\n            parts = splitPrefix(name),\r\n            prefix = parts[0],\r\n            relResourceName = relParts[1];\r\n\r\n        name = parts[1];\r\n\r\n        if (prefix) {\r\n            prefix = normalize(prefix, relResourceName);\r\n            plugin = callDep(prefix);\r\n        }\r\n\r\n        //Normalize according\r\n        if (prefix) {\r\n            if (plugin && plugin.normalize) {\r\n                name = plugin.normalize(name, makeNormalize(relResourceName));\r\n            } else {\r\n                name = normalize(name, relResourceName);\r\n            }\r\n        } else {\r\n            name = normalize(name, relResourceName);\r\n            parts = splitPrefix(name);\r\n            prefix = parts[0];\r\n            name = parts[1];\r\n            if (prefix) {\r\n                plugin = callDep(prefix);\r\n            }\r\n        }\r\n\r\n        //Using ridiculous property names for space reasons\r\n        return {\r\n            f: prefix ? prefix + '!' + name : name, //fullName\r\n            n: name,\r\n            pr: prefix,\r\n            p: plugin\r\n        };\r\n    };\r\n\r\n    function makeConfig(name) {\r\n        return function () {\r\n            return (config && config.config && config.config[name]) || {};\r\n        };\r\n    }\r\n\r\n    handlers = {\r\n        require: function (name) {\r\n            return makeRequire(name);\r\n        },\r\n        exports: function (name) {\r\n            var e = defined[name];\r\n            if (typeof e !== 'undefined') {\r\n                return e;\r\n            } else {\r\n                return (defined[name] = {});\r\n            }\r\n        },\r\n        module: function (name) {\r\n            return {\r\n                id: name,\r\n                uri: '',\r\n                exports: defined[name],\r\n                config: makeConfig(name)\r\n            };\r\n        }\r\n    };\r\n\r\n    main = function (name, deps, callback, relName) {\r\n        var cjsModule, depName, ret, map, i, relParts,\r\n            args = [],\r\n            callbackType = typeof callback,\r\n            usingExports;\r\n\r\n        //Use name if no relName\r\n        relName = relName || name;\r\n        relParts = makeRelParts(relName);\r\n\r\n        //Call the callback to define the module, if necessary.\r\n        if (callbackType === 'undefined' || callbackType === 'function') {\r\n            //Pull out the defined dependencies and pass the ordered\r\n            //values to the callback.\r\n            //Default to [require, exports, module] if no deps\r\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\r\n            for (i = 0; i < deps.length; i += 1) {\r\n                map = makeMap(deps[i], relParts);\r\n                depName = map.f;\r\n\r\n                //Fast path CommonJS standard dependencies.\r\n                if (depName === \"require\") {\r\n                    args[i] = handlers.require(name);\r\n                } else if (depName === \"exports\") {\r\n                    //CommonJS module spec 1.1\r\n                    args[i] = handlers.exports(name);\r\n                    usingExports = true;\r\n                } else if (depName === \"module\") {\r\n                    //CommonJS module spec 1.1\r\n                    cjsModule = args[i] = handlers.module(name);\r\n                } else if (hasProp(defined, depName) ||\r\n                           hasProp(waiting, depName) ||\r\n                           hasProp(defining, depName)) {\r\n                    args[i] = callDep(depName);\r\n                } else if (map.p) {\r\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\r\n                    args[i] = defined[depName];\r\n                } else {\r\n                    throw new Error(name + ' missing ' + depName);\r\n                }\r\n            }\r\n\r\n            ret = callback ? callback.apply(defined[name], args) : undefined;\r\n\r\n            if (name) {\r\n                //If setting exports via \"module\" is in play,\r\n                //favor that over return value and exports. After that,\r\n                //favor a non-undefined return value over exports use.\r\n                if (cjsModule && cjsModule.exports !== undef &&\r\n                        cjsModule.exports !== defined[name]) {\r\n                    defined[name] = cjsModule.exports;\r\n                } else if (ret !== undef || !usingExports) {\r\n                    //Use the return value from the function.\r\n                    defined[name] = ret;\r\n                }\r\n            }\r\n        } else if (name) {\r\n            //May just be an object definition for the module. Only\r\n            //worry about defining if have a module name.\r\n            defined[name] = callback;\r\n        }\r\n    };\r\n\r\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\r\n        if (typeof deps === \"string\") {\r\n            if (handlers[deps]) {\r\n                //callback in this case is really relName\r\n                return handlers[deps](callback);\r\n            }\r\n            //Just return the module wanted. In this scenario, the\r\n            //deps arg is the module name, and second arg (if passed)\r\n            //is just the relName.\r\n            //Normalize module name, if it contains . or ..\r\n            return callDep(makeMap(deps, makeRelParts(callback)).f);\r\n        } else if (!deps.splice) {\r\n            //deps is a config object, not an array.\r\n            config = deps;\r\n            if (config.deps) {\r\n                req(config.deps, config.callback);\r\n            }\r\n            if (!callback) {\r\n                return;\r\n            }\r\n\r\n            if (callback.splice) {\r\n                //callback is an array, which means it is a dependency list.\r\n                //Adjust args if there are dependencies\r\n                deps = callback;\r\n                callback = relName;\r\n                relName = null;\r\n            } else {\r\n                deps = undef;\r\n            }\r\n        }\r\n\r\n        //Support require(['a'])\r\n        callback = callback || function () {};\r\n\r\n        //If relName is a function, it is an errback handler,\r\n        //so remove it.\r\n        if (typeof relName === 'function') {\r\n            relName = forceSync;\r\n            forceSync = alt;\r\n        }\r\n\r\n        //Simulate async callback;\r\n        if (forceSync) {\r\n            main(undef, deps, callback, relName);\r\n        } else {\r\n            //Using a non-zero value because of concern for what old browsers\r\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\r\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\r\n            //If want a value immediately, use require('id') instead -- something\r\n            //that works in almond on the global level, but not guaranteed and\r\n            //unlikely to work in other AMD implementations.\r\n            setTimeout(function () {\r\n                main(undef, deps, callback, relName);\r\n            }, 4);\r\n        }\r\n\r\n        return req;\r\n    };\r\n\r\n    /**\r\n     * Just drops the config on the floor, but returns req in case\r\n     * the config return value is used.\r\n     */\r\n    req.config = function (cfg) {\r\n        return req(cfg);\r\n    };\r\n\r\n    /**\r\n     * Expose module registry for debugging and tooling\r\n     */\r\n    requirejs._defined = defined;\r\n\r\n    define = function (name, deps, callback) {\r\n        if (typeof name !== 'string') {\r\n            throw new Error('See almond README: incorrect module build, no module name');\r\n        }\r\n\r\n        //This module may not have dependencies\r\n        if (!deps.splice) {\r\n            //deps is not an array, so probably means\r\n            //an object literal or factory function for\r\n            //the value. Adjust args.\r\n            callback = deps;\r\n            deps = [];\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\r\n            waiting[name] = [name, deps, callback];\r\n        }\r\n    };\r\n\r\n    define.amd = {\r\n        jQuery: true\r\n    };\r\n}());\ndefine(\"js/almond\", function(){});\n\nUtil=(function () {\r\n\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\n// From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\nfunction Base64_To_ArrayBuffer(base64){\r\n    base64=base64.replace(/[\\n=]/g,\"\");\r\n    var dic = new Object();\r\n    dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n    dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n    dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n    dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n    var num = base64.length;\r\n    var n = 0;\r\n    var b = 0;\r\n    var e;\r\n\r\n    if(!num) return (new ArrayBuffer(0));\r\n    //if(num < 4) return null;\r\n    //if(num % 4) return null;\r\n\r\n    // AA     12    1\r\n    // AAA    18    2\r\n    // AAAA   24    3\r\n    // AAAAA  30    3\r\n    // AAAAAA 36    4\r\n    // num*6/8\r\n    e = Math.floor(num / 4 * 3);\r\n    if(base64.charAt(num - 1) == '=') e -= 1;\r\n    if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n    var ary_buffer = new ArrayBuffer( e );\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var i = 0;\r\n    var p = 0;\r\n    while(p < e){\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n        n = (b << 2);\r\n        i ++;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 4) & 0x3);\r\n        n = (b & 0x0f) << 4;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 2) & 0xf);\r\n        n = (b & 0x03) << 6;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | b;\r\n        i ++;\r\n        p ++;\r\n    }\r\n    function fail(m) {\r\n        console.log(m);\r\n        console.log(base64,i);\r\n        throw new Error(m);\r\n    }\r\n    return ary_buffer;\r\n}\r\n\r\nfunction Base64_From_ArrayBuffer(ary_buffer){\r\n    var dic = [\r\n        'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n        'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n        'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n        'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n    ];\r\n    var base64 = \"\";\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var num = ary_u8.length;\r\n    var n = 0;\r\n    var b = 0;\r\n\r\n    var i = 0;\r\n    while(i < num){\r\n        b = ary_u8[i];\r\n        base64 += dic[(b >> 2)];\r\n        n = (b & 0x03) << 4;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 4)];\r\n        n = (b & 0x0f) << 2;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 6)];\r\n        base64 += dic[(b & 0x3f)];\r\n        i ++;\r\n    }\r\n\r\n    var m = num % 3;\r\n    if(m){\r\n        base64 += dic[n];\r\n    }\r\n    if(m == 1){\r\n        base64 += \"==\";\r\n    }else if(m == 2){\r\n        base64 += \"=\";\r\n    }\r\n    return base64;\r\n}\r\n\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction hasNodeBuffer() {\r\n    return typeof Buffer!=\"undefined\";\r\n}\r\nfunction isNodeBuffer(data) {\r\n    return (hasNodeBuffer() && data instanceof Buffer);\r\n}\r\nfunction isBuffer(data) {\r\n    return data instanceof ArrayBuffer || isNodeBuffer(data);\r\n}\r\nfunction utf8bytes2str(bytes) {\r\n    var e=[];\r\n    for (var i=0 ; i<bytes.length ; i++) {\r\n         e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n    }\r\n    try {\r\n        return decodeURIComponent(e.join(\"\"));\r\n    } catch (er) {\r\n        console.log(e.join(\"\"));\r\n        throw er;\r\n    }\r\n}\r\nfunction str2utf8bytes(str, binType) {\r\n    var e=encodeURIComponent(str);\r\n    var r=/^%(..)/;\r\n    var a=[];\r\n    var ad=0;\r\n    for (var i=0 ; i<e.length; i++) {\r\n        var m=r.exec( e.substring(i));\r\n        if (m) {\r\n            a.push(parseInt(\"0x\"+m[1]));\r\n            i+=m[0].length-1;\r\n        } else a.push(e.charCodeAt(i));\r\n    }\r\n    return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n}\r\n\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    Base64_To_ArrayBuffer:Base64_To_ArrayBuffer,\r\n    Base64_From_ArrayBuffer:Base64_From_ArrayBuffer,\r\n    utf8bytes2str: utf8bytes2str,\r\n    str2utf8bytes: str2utf8bytes,\r\n    privatize: privatize,\r\n    hasNodeBuffer:hasNodeBuffer,\r\n    isNodeBuffer: isNodeBuffer,\r\n    isBuffer: isBuffer\r\n};\r\n})();\r\n\ndefine(\"Util\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Util;\n    };\n}(this)));\n\n(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n    const Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a).concat([\"mode\",this._mode]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    let na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    let na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    }\r\n    module.exports=assert;\r\n\r\n},{}],2:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],3:[function(require,module,exports){\r\n//\t\tfunction (assert,TT,IT,DU) {\r\nvar assert=require(\"../lib/assert\");\r\nvar root=require(\"../lib/root\");\r\nvar TonyuThreadF=require(\"./TonyuThread\");\r\nvar IT=require(\"./tonyuIterator\");\r\nmodule.exports=function () {\r\n\t// old browser support\r\n\tif (!root.performance) {\r\n\t\troot.performance = {};\r\n\t}\r\n\tif (!root.performance.now) {\r\n\t\troot.performance.now = function now() {\r\n\t\t\treturn Date.now();\r\n\t\t};\r\n\t}\r\n\tvar preemptionTime=60;\r\n\tvar klass={};\r\n\tvar Tonyu,TT;\r\n\tfunction thread() {\r\n\t\tvar t=new TT();\r\n\t\tt.handleEx=handleEx;\r\n\t\treturn t;\r\n\t}\r\n\tfunction timeout(t) {\r\n\t\treturn new Promise(function (s) {\r\n\t\t\tsetTimeout(s,t);\r\n\t\t});\r\n\t}\r\n\t/*function animationFrame() {\r\n\t\treturn new Promise( function (f) {\r\n\t\t\trequestAnimationFrame(f);\r\n\t\t});\r\n\t}*/\r\n\r\n\tfunction handleEx(e) {\r\n\t\tif (Tonyu.onRuntimeError) {\r\n\t\t\tTonyu.onRuntimeError(e);\r\n\t\t} else {\r\n\t\t\t//if (typeof $LASTPOS==\"undefined\") $LASTPOS=0;\r\n\t\t\tif (root.alert) root.alert(\"!   : \"+e);\r\n\t\t\tconsole.log(e.stack);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}\r\n\tklass.addMeta=addMeta;\r\n\tfunction addMeta(fn,m) {\r\n\t\t// why use addMeta?\r\n\t\t// because when compiled from source, additional info(src file) is contained.\r\n\t\t// k.meta={...} erases these info\r\n\t\tassert.is(arguments,[String,Object]);\r\n\t\treturn extend(klass.getMeta(fn), m);\r\n\t}\r\n\tklass.removeMeta=function (n) {\r\n\t\tdelete classMetas[n];\r\n\t};\r\n\tklass.getMeta=function (k) {// Class or fullName\r\n\t\tif (typeof k==\"function\") {\r\n\t\t\treturn k.meta;\r\n\t\t} else if (typeof k==\"string\"){\r\n\t\t\tvar mm = classMetas[k];\r\n\t\t\tif (!mm) classMetas[k]=mm={};\r\n\t\t\treturn mm;\r\n\t\t}\r\n\t};\r\n\tklass.ensureNamespace=function (top,nsp) {\r\n\t\tvar keys=nsp.split(\".\");\r\n\t\tvar o=top;\r\n\t\tvar i;\r\n\t\tfor (i=0; i<keys.length; i++) {\r\n\t\t\tvar k=keys[i];\r\n\t\t\tif (!o[k]) o[k]={};\r\n\t\t\to=o[k];\r\n\t\t}\r\n\t\treturn o;\r\n\t};\r\n\t/*Function.prototype.constructor=function () {\r\n\t\tthrow new Error(\"This method should not be called\");\r\n\t};*/\r\n\tklass.propReg=/^__([gs]et)ter__(.*)$/;\r\n\tklass.define=function (params) {\r\n\t\t// fullName, shortName,namspace, superclass, includes, methods:{name/fiber$name: func}, decls\r\n\t\tvar parent=params.superclass;\r\n\t\tvar includes=params.includes;\r\n\t\tvar fullName=params.fullName;\r\n\t\tvar shortName=params.shortName;\r\n\t\tvar namespace=params.namespace;\r\n\t\tvar methodsF=params.methods;\r\n\t\tvar decls=params.decls;\r\n\t\tvar nso=klass.ensureNamespace(Tonyu.classes, namespace);\r\n\t\tvar outerRes;\r\n\t\tfunction chkmeta(m,ctx) {\r\n\t\t\tctx=ctx||{};\r\n\t\t\tif (ctx.isShim) return m;\r\n\t\t\tctx.path=ctx.path||[];\r\n\t\t\tctx.path.push(m);\r\n\t\t\tif (m.isShim) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"Shim found \"+m.extenderFullName);\r\n\t\t\t}\r\n\t\t\tif (m.superclass) chkmeta(m.superclass,ctx);\r\n\t\t\tif (!m.includes) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"includes not found\");\r\n\t\t\t}\r\n\t\t\tm.includes.forEach(function (mod) {\r\n\t\t\t\tchkmeta(mod,ctx);\r\n\t\t\t});\r\n\t\t\tctx.path.pop();\r\n\t\t\treturn m;\r\n\t\t}\r\n\t\tfunction chkclass(c,ctx) {\r\n\t\t\tif (!c.prototype.hasOwnProperty(\"getClassInfo\")) throw new Error(\"NO\");\r\n\t\t\tif (!c.meta) {\r\n\t\t\t\tconsole.log(\"metanotfound\",c);\r\n\t\t\t\tthrow new Error(\"meta not found\");\r\n\t\t\t}\r\n\t\t\tchkmeta(c.meta,ctx);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tfunction extender(parent,ctx) {\r\n\t\t\tvar isShim=!ctx.init;\r\n\t\t\tvar includesRec=ctx.includesRec;\r\n\t\t\tif (includesRec[fullName]) return parent;\r\n\t\t\tincludesRec[fullName]=true;\r\n\t\t\t//console.log(ctx.initFullName, fullName);//,  includesRec[fullName],JSON.stringify(ctx));\r\n\t\t\tincludes.forEach(function (m) {\r\n\t\t\t\tparent=m.extendFrom(parent,extend(ctx,{init:false}));\r\n\t\t\t});\r\n\t\t\tvar methods=typeof methodsF===\"function\"? methodsF(parent):methodsF;\r\n\t\t\t/*if (typeof Profiler!==\"undefined\") {\r\n\t\t\t\tProfiler.profile(methods, fullName);\r\n\t\t\t}*/\r\n\t\t\tvar init=methods.initialize;\r\n\t\t\tdelete methods.initialize;\r\n\t\t\tvar res;\r\n\t\t\tres=(init?\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tinit.apply(this,arguments);\r\n\t\t\t\t}:\r\n\t\t\t\t(parent? function () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tparent.apply(this,arguments);\r\n\t\t\t\t}:function (){\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tres.prototype=bless(parent,{constructor:res});\r\n\t\t\tif (isShim) {\r\n\t\t\t\tres.meta={isShim:true,extenderFullName:fullName};\r\n\t\t\t} else {\r\n\t\t\t\tres.meta=addMeta(fullName,{\r\n\t\t\t\t\tfullName:fullName,shortName:shortName,namespace:namespace,decls:decls,\r\n\t\t\t\t\tsuperclass:ctx.nonShimParent ? ctx.nonShimParent.meta : null,\r\n\t\t\t\t\tincludesRec:includesRec,\r\n\t\t\t\t\tincludes:includes.map(function(c){return c.meta;})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tres.meta.func=res;\r\n\t\t\t// methods: res's own methods(no superclass/modules)\r\n\t\t\tres.methods=methods;\r\n\t\t\tvar prot=res.prototype;\r\n\t\t\tvar props={};\r\n\t\t\tvar propReg=klass.propReg;//^__([gs]et)ter__(.*)$/;\r\n\t\t\tvar k;\r\n\t\t\tfor (k in methods) {\r\n\t\t\t\tif (k.match(/^fiber\\$/)) continue;\r\n\t\t\t\tprot[k]=methods[k];\r\n\t\t\t\tvar fbk=\"fiber$\"+k;\r\n\t\t\t\tif (methods[fbk]) {\r\n\t\t\t\t\tprot[fbk]=methods[fbk];\r\n\t\t\t\t\tprot[fbk].methodInfo=prot[fbk].methodInfo||{name:k,klass:res,fiber:true};\r\n\t\t\t\t\tprot[k].fiber=prot[fbk];\r\n\t\t\t\t}\r\n\t\t\t\tif (k!==\"__dummy\" && !prot[k]) {\r\n\t\t\t\t\tconsole.log(\"WHY!\",prot[k],prot,k);\r\n\t\t\t\t\tthrow new Error(\"WHY!\"+k);\r\n\t\t\t\t}\r\n\t\t\t\tprot[k].methodInfo=prot[k].methodInfo||{name:k,klass:res};\r\n\t\t\t\t// if profile...\r\n\t\t\t\tvar r=propReg.exec(k);\r\n\t\t\t\tif (r) {\r\n\t\t\t\t\t// __(r[1]g/setter)__r[2]\r\n\t\t\t\t\tprops[r[2]]=props[r[2]]||{};\r\n\t\t\t\t\tprops[r[2]][r[1]]=prot[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tprot.isTonyuObject=true;\r\n\t\t\tfor (k in props) {\r\n\t\t\t\tObject.defineProperty(prot, k , props[k]);\r\n\t\t\t}\r\n\t\t\tprot.getClassInfo=function () {\r\n\t\t\t\treturn res.meta;\r\n\t\t\t};\r\n\t\t\treturn chkclass(res,{isShim:isShim});\r\n\t\t}\r\n\t\tvar res=extender(parent,{\r\n\t\t\tinit:true,\r\n\t\t\tinitFullName:fullName,\r\n\t\t\tincludesRec:(parent?extend({},parent.meta.includesRec):{}),\r\n\t\t\tnonShimParent:parent\r\n\t\t});\r\n\t\tres.extendFrom=extender;\r\n\t\t//addMeta(fullName, res.meta);\r\n\t\tnso[shortName]=res;\r\n\t\touterRes=res;\r\n\t\t//console.log(\"defined\", fullName, Tonyu.classes,Tonyu.ID);\r\n\t\treturn chkclass(res,{isShim:false});\r\n\t};\r\n\tklass.isSourceChanged=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.src && k.src.tonyu) {\r\n\t\t\tif (!k.nodeTimestamp) return true;\r\n\t\t\treturn k.src.tonyu.lastUpdate()> k.nodeTimestamp;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tklass.shouldCompile=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.hasSemanticError) return true;\r\n\t\tif (klass.isSourceChanged(k)) return true;\r\n\t\tvar dks=klass.getDependingClasses(k);\r\n\t\tfor (var i=0 ; i<dks.length ;i++) {\r\n\t\t\tif (klass.shouldCompile(dks[i])) return true;\r\n\t\t}\r\n\t};\r\n\tklass.getDependingClasses=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tvar res=[];\r\n\t\tif (k.superclass) res=[k.superclass];\r\n\t\tif (k.includes) res=res.concat(k.includes);\r\n\t\treturn res;\r\n\t};\r\n\tfunction bless( klass, val) {\r\n\t\tif (!klass) return extend({},val);\r\n\t\treturn extend( Object.create(klass.prototype) , val);\r\n\t\t//return extend( new klass() , val);\r\n\t}\r\n\tfunction extend (dst, src) {\r\n\t\tif (src && typeof src==\"object\") {\r\n\t\t\tfor (var i in src) {\r\n\t\t\t\tdst[i]=src[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dst;\r\n\t}\r\n\r\n\t//alert(\"init\");\r\n\tvar globals={};\r\n\tvar classes={};// classes.namespace.classname= function\r\n\tvar classMetas={}; // classes.namespace.classname.meta ( or env.classes / ctx.classes)\r\n\tfunction setGlobal(n,v) {\r\n\t\tglobals[n]=v;\r\n\t}\r\n\tfunction getGlobal(n) {\r\n\t\treturn globals[n];\r\n\t}\r\n\tfunction getClass(n) {\r\n\t\t//CFN: n.split(\".\")\r\n\t\tvar ns=n.split(\".\");\r\n\t\tvar res=classes;\r\n\t\tns.forEach(function (na) {\r\n\t\t\tif (!res) return;\r\n\t\t\tres=res[na];\r\n\t\t});\r\n\t\tif (!res && ns.length==1) {\r\n\t\t\tvar found;\r\n\t\t\tfor (var nn in classes) {\r\n\t\t\t\tvar nr=classes[nn][n];\r\n\t\t\t\tif (nr) {\r\n\t\t\t\t\tif (!res) { res=nr; found=nn+\".\"+n; }\r\n\t\t\t\t\telse throw new Error(\" \"+nn+\".\"+n+\", \"+found);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;//classes[n];\r\n\t}\r\n\tfunction bindFunc(t,meth) {\r\n\t\tif (typeof meth!=\"function\") return meth;\r\n\t\tvar res=function () {\r\n\t\t\treturn meth.apply(t,arguments);\r\n\t\t};\r\n\t\tres.methodInfo=Tonyu.extend({thiz:t},meth.methodInfo||{});\r\n\t\tif (meth.fiber) {\r\n\t\t\tres.fiber=function fiber_func() {\r\n\t\t\t\treturn meth.fiber.apply(t,arguments);\r\n\t\t\t};\r\n\t\t\tres.fiber.methodInfo=Tonyu.extend({thiz:t},meth.fiber.methodInfo||{});\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction invokeMethod(t, name, args, objName) {\r\n\t\tif (!t) throw new Error(objName+\"(=\"+t+\") \"+name+\"\");\r\n\t\tvar f=t[name];\r\n\t\tif (typeof f!=\"function\") throw new Error((objName==\"this\"? \"\": objName+\".\")+name+\"(=\"+f+\")\");\r\n\t\treturn f.apply(t,args);\r\n\t}\r\n\tfunction callFunc(f,args, fName) {\r\n\t\tif (typeof f!=\"function\") throw new Error(fName+\"\");\r\n\t\treturn f.apply({},args);\r\n\t}\r\n\tfunction checkNonNull(v, name) {\r\n\t\tif (v!=v || v==null) throw new Error(name+\"(=\"+v+\")\");\r\n\t\treturn v;\r\n\t}\r\n\tfunction A(args) {\r\n\t\tvar res=[];\r\n\t\tfor (var i=1 ; i<args.length; i++) {\r\n\t\t\tres[i-1]=args[i];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction useNew(c) {\r\n\t\tthrow new Error(\"\"+c+\"new\");\r\n\t}\r\n\tfunction not_a_tonyu_object(o) {\r\n\t\tconsole.log(\"Not a tonyu object: \",o);\r\n\t\tthrow new Error(o+\" is not a tonyu object\");\r\n\t}\r\n\tfunction hasKey(k, obj) {\r\n\t\treturn k in obj;\r\n\t}\r\n\tfunction run(bootClassName) {\r\n\t\tvar bootClass=getClass(bootClassName);\r\n\t\tif (!bootClass) throw new Error( bootClassName+\" \");\r\n\t\tTonyu.runMode=true;\r\n\t\tvar boot=new bootClass();\r\n\t\t//var th=thread();\r\n\t\t//th.apply(boot,\"main\");\r\n\t\tvar TPR=Tonyu.currentProject;\r\n\t\tif (TPR) {\r\n\t\t\t//TPR.runningThread=th;\r\n\t\t\tTPR.runningObj=boot;\r\n\t\t}\r\n\t\t//$LASTPOS=0;\r\n\t\t//th.steps();\r\n\t}\r\n\tvar lastLoopCheck=root.performance.now();\r\n\tvar prevCheckLoopCalled;\r\n\tfunction checkLoop() {\r\n\t\tvar now=root.performance.now();\r\n\t\tif (now-lastLoopCheck>1000) {\r\n\t\t\tresetLoopCheck(10000);\r\n\t\t\tthrow new Error(\"\\n\"+\r\n\t\t\t\t\"    \\n\"+\r\n\t\t\t\t\"   []https://edit.tonyu.jp/doc/options.html\\n\");\r\n\t\t}\r\n\t\tprevCheckLoopCalled=now;\r\n\t}\r\n\tfunction resetLoopCheck(disableTime) {\r\n\t\tlastLoopCheck=root.performance.now()+(disableTime||0);\r\n\t}\r\n\tfunction is(obj,klass) {\r\n\t\tif (!obj) return false;\r\n\t\tif (obj instanceof klass) return true;\r\n\t\tif (typeof obj.getClassInfo===\"function\" && klass.meta) {\r\n\t\t\treturn obj.getClassInfo().includesRec[klass.meta.fullName];\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t//setInterval(resetLoopCheck,16);\r\n\tTonyu={thread:thread, /*threadGroup:threadGroup,*/\r\n\t\t\tklass:klass, bless:bless, extend:extend,\r\n\t\t\tglobals:globals, classes:classes, classMetas:classMetas, setGlobal:setGlobal, getGlobal:getGlobal, getClass:getClass,\r\n\t\t\ttimeout:timeout,//animationFrame:animationFrame, /*asyncResult:asyncResult,*/\r\n\t\t\tbindFunc:bindFunc,not_a_tonyu_object:not_a_tonyu_object,is:is,\r\n\t\t\thasKey:hasKey,invokeMethod:invokeMethod, callFunc:callFunc,checkNonNull:checkNonNull,\r\n\t\t\titerator:IT,run:run,checkLoop:checkLoop,resetLoopCheck:resetLoopCheck,//DeferredUtil:DU,\r\n\t\t\tVERSION:1560828115159,//EMBED_VERSION\r\n\t\t\tA:A,ID:Math.random()};\r\n\tTT=TonyuThreadF(Tonyu);\r\n\tif (root.Tonyu) {\r\n\t\tconsole.error(\"Tonyu called twice!\");\r\n\t\tthrow new Error(\"Tonyu called twice!\");\r\n\t}\r\n\troot.Tonyu=Tonyu;\r\n\treturn Tonyu;\r\n}();\r\n\r\n},{\"../lib/assert\":1,\"../lib/root\":2,\"./TonyuThread\":4,\"./tonyuIterator\":5}],4:[function(require,module,exports){\r\n//\tvar Klass=require(\"../lib/Klass\");\r\nmodule.exports=function (Tonyu) {\r\n\tvar cnts={enterC:{},exitC:0};\r\n\tvar idSeq=1;\r\n\t//try {window.cnts=cnts;}catch(e){}\r\n\tclass TonyuThread {\r\n\t\tconstructor() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis._isDead=false;\r\n\t\t\t//this._isAlive=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t\tthis._isWaiting=false;\r\n\t\t\tthis.fSuspended=false;\r\n\t\t\tthis.tryStack=[];\r\n\t\t\tthis.preemptionTime=60;\r\n\t\t\tthis.onEndHandlers=[];\r\n\t\t\tthis.onTerminateHandlers=[];\r\n\t\t\tthis.id=idSeq++;\r\n\t\t\tthis.age=0; // inc if object pooled\r\n\t\t}\r\n\t\tisAlive() {\r\n\t\t\treturn !this.isDead();\r\n\t\t\t//return this.frame!=null && this._isAlive;\r\n\t\t}\r\n\t\tisDead() {\r\n\t\t\tthis._isDead=this._isDead || (this.frame==null) ||\r\n\t\t\t(this._threadGroup && (\r\n\t\t\t\t\tthis._threadGroup.objectPoolAge!=this.tGrpObjectPoolAge ||\r\n\t\t\t\t\tthis._threadGroup.isDeadThreadGroup()\r\n\t\t\t));\r\n\t\t\treturn this._isDead;\r\n\t\t}\r\n\t\tsetThreadGroup(g) {// g:TonyuThread\r\n\t\t\tthis._threadGroup=g;\r\n\t\t\tthis.tGrpObjectPoolAge=g.objectPoolAge;\r\n\t\t\t//if (g) g.add(fb);\r\n\t\t}\r\n\t\tisWaiting() {\r\n\t\t\treturn this._isWaiting;\r\n\t\t}\r\n\t\tsuspend() {\r\n\t\t\tthis.fSuspended=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t}\r\n\t\tenter(frameFunc) {\r\n\t\t\t//var n=frameFunc.name;\r\n\t\t\t//cnts.enterC[n]=(cnts.enterC[n]||0)+1;\r\n\t\t\tthis.frame={prev:this.frame, func:frameFunc};\r\n\t\t}\r\n\t\tapply(obj, methodName, args) {\r\n\t\t\tif (!args) args=[];\r\n\t\t\tvar method;\r\n\t\t\tif (typeof methodName==\"string\") {\r\n\t\t\t\tmethod=obj[\"fiber$\"+methodName];\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tthrow new Error(\"\"+methodName+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof methodName==\"function\") {\r\n\t\t\t\tmethod=methodName.fiber;\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tvar n=methodName.methodInfo ? methodName.methodInfo.name : methodName.name;\r\n\t\t\t\t\tthrow new Error(\"\"+n+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\targs=[this].concat(args);\r\n\t\t\tvar pc=0;\r\n\t\t\treturn this.enter(function (th) {\r\n\t\t\t\tswitch (pc){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tmethod.apply(obj,args);\r\n\t\t\t\t\tpc=1;break;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tth.termStatus=\"success\";\r\n\t\t\t\t\tth.notifyEnd(th.retVal);\r\n\t\t\t\t\targs[0].exit();\r\n\t\t\t\t\tpc=2;break;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tnotifyEnd(r) {\r\n\t\t\tthis.onEndHandlers.forEach(function (e) {\r\n\t\t\t\te(r);\r\n\t\t\t});\r\n\t\t\tthis.notifyTermination({status:\"success\",value:r});\r\n\t\t}\r\n\t\tnotifyTermination(tst) {\r\n\t\t\tthis.onTerminateHandlers.forEach(function (e) {\r\n\t\t\t\te(tst);\r\n\t\t\t});\r\n\t\t}\r\n\t\ton(type,f) {\r\n\t\t\tif (type===\"end\"||type===\"success\") this.onEndHandlers.push(f);\r\n\t\t\tif (type===\"terminate\") {\r\n\t\t\t\tthis.onTerminateHandlers.push(f);\r\n\t\t\t\tif (this.handleEx) delete this.handleEx;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpromise() {\r\n\t\t\tvar fb=this;\r\n\t\t\treturn new Promise(function (succ,err) {\r\n\t\t\t\tfb.on(\"terminate\",function (st) {\r\n\t\t\t\t\tif (st.status===\"success\") {\r\n\t\t\t\t\t\tsucc(st.value);\r\n\t\t\t\t\t} else if (st.status===\"exception\"){\r\n\t\t\t\t\t\terr(st.exception);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terr(new Error(st.status));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tthen(succ,err) {\r\n\t\t\tif (err) return this.promise().then(succ,err);\r\n\t\t\telse return this.promise().then(succ);\r\n\t\t}\r\n\t\tfail(err) {\r\n\t\t\treturn this.promise().then(e=>e, err);\r\n\t\t}\r\n\t\tgotoCatch(e) {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.tryStack.length==0) {\r\n\t\t\t\tfb.termStatus=\"exception\";\r\n\t\t\t\tfb.kill();\r\n\t\t\t\tif (fb.handleEx) fb.handleEx(e);\r\n\t\t\t\telse fb.notifyTermination({status:\"exception\",exception:e});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfb.lastEx=e;\r\n\t\t\tvar s=fb.tryStack.pop();\r\n\t\t\twhile (fb.frame) {\r\n\t\t\t\tif (s.frame===fb.frame) {\r\n\t\t\t\t\tfb.catchPC=s.catchPC;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfb.frame=fb.frame.prev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tstartCatch() {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar e=fb.lastEx;\r\n\t\t\tfb.lastEx=null;\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\texit(res) {\r\n\t\t\t//cnts.exitC++;\r\n\t\t\tthis.frame=(this.frame ? this.frame.prev:null);\r\n\t\t\tthis.retVal=res;\r\n\t\t}\r\n\t\tenterTry(catchPC) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.push({frame:fb.frame,catchPC:catchPC});\r\n\t\t}\r\n\t\texitTry() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.pop();\r\n\t\t}\r\n\t\twaitEvent(obj,eventSpec) { // eventSpec=[EventType, arg1, arg2....]\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (!obj.on) return;\r\n\t\t\tvar h;\r\n\t\t\teventSpec=eventSpec.concat(function () {\r\n\t\t\t\tfb.lastEvent=arguments;\r\n\t\t\t\tfb.retVal=arguments[0];\r\n\t\t\t\th.remove();\r\n\t\t\t\tfb.steps();\r\n\t\t\t});\r\n\t\t\th=obj.on.apply(obj, eventSpec);\r\n\t\t}\r\n\t\trunAsync(f) {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar succ=function () {\r\n\t\t\t\tfb.retVal=arguments;\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tvar err=function () {\r\n\t\t\t\tvar msg=\"\";\r\n\t\t\t\tfor (var i=0; i<arguments.length; i++) {\r\n\t\t\t\t\tmsg+=arguments[i]+\",\";\r\n\t\t\t\t}\r\n\t\t\t\tif (msg.length==0) msg=\"Async fail\";\r\n\t\t\t\tvar e=new Error(msg);\r\n\t\t\t\te.args=arguments;\r\n\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tfb.suspend();\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tf(succ,err);\r\n\t\t\t},0);\r\n\t\t}\r\n\t\twaitFor(j) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb._isWaiting=true;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (j instanceof TonyuThread) j=j.promise();\r\n\t\t\treturn Promise.resolve(j).then(function (r) {\r\n\t\t\t\tfb.retVal=r;\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t}).then(e=>e,function (e) {\r\n\t\t\t\tfb.gotoCatch(fb.wrapError(e));\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t});\r\n\t\t}\r\n\t\twrapError(e) {\r\n\t\t\tif (e instanceof Error) return e;\r\n\t\t\tvar re=new Error(e);\r\n\t\t\tre.original=e;\r\n\t\t\treturn re;\r\n\t\t}\r\n\t\tresume(retVal) {\r\n\t\t\tthis.retVal=retVal;\r\n\t\t\tthis.steps();\r\n\t\t}\r\n\t\tsteps() {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.isDead()) return;\r\n\t\t\tvar sv=Tonyu.currentThread;\r\n\t\t\tTonyu.currentThread=fb;\r\n\t\t\tfb.cnt=fb.preemptionTime;\r\n\t\t\tfb.preempted=false;\r\n\t\t\tfb.fSuspended=false;\r\n\t\t\twhile (fb.cnt>0 && fb.frame) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//while (new Date().getTime()<lim) {\r\n\t\t\t\t\twhile (fb.cnt-->0 && fb.frame) {\r\n\t\t\t\t\t\tfb.frame.func(fb);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfb.preempted= (!fb.fSuspended) && fb.isAlive();\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tTonyu.currentThread=sv;\r\n\t\t}\r\n\t\tstepsLoop() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.steps();\r\n\t\t\tif (fb.preempted) {\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tfb.stepsLoop();\r\n\t\t\t\t},0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tkill() {\r\n\t\t\tvar fb=this;\r\n\t\t\t//fb._isAlive=false;\r\n\t\t\tfb._isDead=true;\r\n\t\t\tfb.frame=null;\r\n\t\t\tif (!fb.termStatus) {\r\n\t\t\t\tfb.termStatus=\"killed\";\r\n\t\t\t\tfb.notifyTermination({status:\"killed\"});\r\n\t\t\t}\r\n\t\t}\r\n\t\tclearFrame() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis.tryStack=[];\r\n\t\t}\r\n\t}\r\n\treturn TonyuThread;\r\n};\r\n\r\n},{}],5:[function(require,module,exports){\r\n//define([\"Klass\"], function (Klass) {\r\n\t//var Klass=require(\"../lib/Klass\");\r\n\tclass ArrayValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext () {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ArrayKeyValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.i;\r\n\t\t\tthis[1]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push(k);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyValueIterator{\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push([k,set[k]]);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i][0];\r\n\t\t\tthis[1]=this.elems[this.i][1];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction IT(set, arity) {\r\n\t\tif (set.tonyuIterator) {\r\n\t\t\t// TODO: the prototype of class having tonyuIterator will iterate infinitively\r\n\t\t\treturn set.tonyuIterator(arity);\r\n\t\t} else if (set instanceof Array) {\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ArrayValueIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ArrayKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else if (set instanceof Object){\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ObjectKeyIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ObjectKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(set);\r\n\t\t\tthrow new Error(set+\" is not iterable\");\r\n\t\t}\r\n\t}\r\n\tmodule.exports=IT;\r\n//   Tonyu.iterator=IT;\r\n//\treturn IT;\r\n//});\r\n\r\n},{}]},{},[3]);\r\n\ndefine(\"Tonyu\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Tonyu;\n    };\n}(this)));\n\n// This is kowareta! because r.js does not generate module name:\r\n//   define(\"FSLib\",[], function () { ...\r\n//(function (global) {\r\n//var useGlobal=(typeof global.define!=\"function\");\r\n//var define=(useGlobal ? define=function(_,f){f();} : global.define);\r\ndefine('FS',[],function () {\r\n    var define,requirejs;\r\n\tvar R={};\r\n\tvar REQJS=\"REQJS_\";\r\n\tvar reqjsSeq=0;\r\n\tR.def=function (name, reqs,func) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (typeof reqs==\"function\") {\r\n\t\t    func=reqs;\r\n\t\t    reqs=R.reqsFromFunc(func);\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t    var module={exports:{}};\r\n    \t\t\tvar res=func(R.doLoad,module,module.exports);\r\n    \t\t\treturn res || module.exports;\r\n    \t\t};\r\n\t\t} else {\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t\treturn func.apply(this, R.getObjs(reqs));\r\n    \t\t};\r\n\t\t}\r\n\t\tR.loadIfAvailable(m);\r\n\t};\r\n\tdefine=function (name,reqs,func) {\r\n\t\tR.def(name, reqs,func);\r\n\t};\r\n\tdefine.amd={};\r\n\trequirejs=function (reqs,func) {\r\n\t\tR.def(REQJS+(reqjsSeq++),reqs,func);\r\n\t};\r\n\tR.setReqs=function (m, reqs) {\r\n\t\treqs.forEach(function (req) {\r\n\t\t\tvar reqm=R.getModuleInfo(req);\r\n\t\t\tif (!reqm.loaded) {\r\n\t\t\t\tm.reqs[req]=reqm;\r\n\t\t\t\treqm.revReqs[m.name]=m;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tR.getModuleInfo=function (name) {\r\n\t\tvar ms=R.modules;\r\n\t\treturn ms[name]=ms[name]||{name:name,reqs:{},revReqs:{}};\r\n\t};\r\n\tR.doLoad=function (name) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (m.loaded) return m.obj;\r\n\t\tm.loaded=true;\r\n\t\tvar res=m.func();\r\n\t    if ( res==null && !name.match(/^REQJS_/)) console.log(\"Warning: No obj for \"+name);\r\n\t\tm.obj=res;\r\n\t\tfor (var i in m.revReqs) {\r\n\t\t\tR.notifyLoaded(m.revReqs[i], m.name);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tR.notifyLoaded=function (dependingMod, loadedModuleName) {\r\n\t    // depengindMod depends on loadedModule\r\n\t\tdelete dependingMod.reqs[loadedModuleName];\r\n\t\tR.loadIfAvailable(dependingMod);\r\n\t};\r\n\tR.loadIfAvailable=function (m) {\r\n\t\tfor (var i in m.reqs) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tR.doLoad(m.name);\r\n\t};\r\n\tR.getObjs=function (ary) {\r\n\t\tvar res=[];\r\n\t\tary.forEach(function (n) {\r\n\t\t\tvar cur=R.doLoad(n);\r\n\t\t\tres.push(cur);\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\tR.reqsFromFunc=function (f) {\r\n\t    var str=f+\"\";\r\n\t    var res=[];\r\n\t    str.replace(/require\\s*\\(\\s*[\"']([^\"']+)[\"']\\s*\\)/g,function (m,a) {\r\n\t       res.push(a);\r\n\t    });\r\n\t    return res;\r\n\t};\r\n\tR.modules={};\r\n\t//requireSimulator=R;\r\n//----------\r\ndefine('extend',[],function (){\r\n   return function extend(d,s) {\r\n      for (var i in s) {d[i]=s[i];}\r\n      return d;\r\n   };\r\n});\r\n\r\ndefine('assert',[],function () {\r\n    var Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a);//.concat([\"(mode:\",this._mode,\")\"]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    var na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Boolean || t==\"boolean\") {\r\n                this.assert(typeof(v)==\"boolean\",[v,\"should be a boolean\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    var na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.stack);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    };\r\n    return assert;\r\n});\r\n\r\ndefine('PathUtil',[\"assert\"],function (assert) {\r\nfunction endsWith(str,postfix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nvar driveLetter=/^([a-zA-Z]):/;\r\n// hyphen on protocol -> chrome-extension://....\r\nvar url=/^([a-z\\-]+):\\/\\/\\/?([^\\/]+)\\//;\r\nvar PathUtil;\r\nvar Path=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isPath(s) , [s, \" is not a path\"]);\r\n});\r\nvar Absolute=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isAbsolutePath(s) , [s, \" is not a absolute path\"]);\r\n});\r\nvar Relative=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( !PathUtil.isAbsolutePath(s) , [s, \" is not a relative path\"]);\r\n});\r\n\r\nvar Dir=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( PathUtil.isDir(s) , [s, \" is not a directory path\"]);\r\n});\r\nvar AbsDir=assert.and(Dir,Absolute);\r\nvar File=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( !PathUtil.isDir(s) , [s, \" is not a file path\"]);\r\n});\r\n\r\nvar SEP=\"/\";\r\nPathUtil={\r\n    Path: Path,Absolute:Absolute, Relative:Relative, Dir:Dir,File:File,\r\n    AbsDir:AbsDir,\r\n    SEP: SEP,\r\n    endsWith: endsWith, startsWith:startsWith,\r\n    isChildOf: function(child, parent) {\r\n        return this.startsWith( this.normalize(child), this.normalize(parent));\r\n    },\r\n    normalize: function (path) {\r\n        return this.fixSep(path,\"/\").replace(/\\/+$/,\"/\");\r\n    },\r\n    hasDriveLetter: function (path) {\r\n        return driveLetter.exec(path);\r\n    },\r\n    isURL: function (path) {\r\n        var r=url.exec(path);\r\n        if (!r) return;\r\n        return {protocol:r[1], hostPort:r[2], path:SEP+path.substring(r[0].length)  };\r\n    },\r\n    isPath: function (path) {\r\n    \tassert.is(arguments,[String]);\r\n\t\treturn true;//!path.match(/\\/\\//);\r\n    },\r\n    isRelativePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) && !PathUtil.isAbsolutePath(path);\r\n    },\r\n    isAbsolutePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) &&\r\n\t\t(PathUtil.startsWith(path,SEP) || PathUtil.hasDriveLetter(path) ||  PathUtil.isURL(path));\r\n    },\r\n    isDir: function (path) {\r\n        path=PathUtil.fixSep(path);\r\n\t\tassert.is(arguments,[Path]);\r\n        return endsWith(path,SEP);\r\n    },\r\n    hasBackslashSep:function (path) {\r\n        return path.indexOf(\"\\\\\")>=0;\r\n    },\r\n    fixSep: function (path,to) {\r\n        to=to||\"/\";\r\n        assert.is(arguments,[String]);\r\n        return assert.is( path.replace(/[\\\\\\/]/g,to), Path);\r\n    },\r\n    directorify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (PathUtil.isDir(path)) return path;\r\n        return assert.is(path+SEP, Dir);\r\n    },\r\n    filify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (!PathUtil.isDir(path)) return path;\r\n        return assert.is(path.substring(0,path.length-1),File);\r\n    },\r\n\tsplitPath: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tvar u;\r\n\t\tif (u=this.isURL(path)) {\r\n\t\t    var p=this.splitPath(u.path);\r\n\t\t    p[0]=u.protocol+\"://\"+u.hostPort;\r\n\t\t    return p;\r\n\t\t}\r\n\t\tpath=path.replace(/\\/+/g,SEP);\r\n\t    var res=path.split(SEP);\r\n        if (res[res.length-1]==\"\") {\r\n            res[res.length-2]+=SEP;\r\n            res.pop();\r\n        }\r\n        return res;\r\n    },\r\n    name: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.splitPath(path).pop();\r\n    },\r\n    ext: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        var n = PathUtil.name(path);\r\n        var r = (/\\.[a-zA-Z0-9]+$/).exec(n);\r\n        if (r) return r[0];\r\n        return null;\r\n    },\r\n    truncExt: function(path, ext) {\r\n\t\tassert.is(path,String);\r\n        var name = PathUtil.name(path);\r\n        ext=ext || PathUtil.ext(path);\r\n        assert.is(ext,String);\r\n        return name.substring(0, name.length - ext.length);\r\n    },\r\n    truncSEP: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tif (!PathUtil.isDir(path)) return path;\r\n\t\treturn path.substring(0,path.length-1);\r\n    },\r\n    endsWith: function(path, postfix) {\r\n\t\tassert.is(arguments,[String,String]);\r\n        return endsWith(PathUtil.name(path), postfix);\r\n    },\r\n    parent: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.up(path);\r\n    },\r\n    rel: function(path,relPath) {\r\n        if (relPath==\"\") return path;\r\n\t\tassert.is(arguments,[AbsDir, Relative]);\r\n    \tvar paths=PathUtil.splitPath(relPath);\r\n        var resPath=path;\r\n        resPath=resPath.replace(/\\/$/,\"\");\r\n        var t=PathUtil;\r\n        paths.forEach(function (n) {\r\n             if (n==\"..\" || n==\"../\") resPath=t.up(resPath);\r\n             else {\r\n                 resPath=resPath.replace(/\\/$/,\"\");\r\n                 resPath+=SEP+(n==\".\"||n==\"./\" ? \"\": n);\r\n             }\r\n        });\r\n        return resPath;\r\n    },\r\n    relPath: function(path,base) {\r\n\t\tassert.is(arguments,[Absolute,Absolute]);\r\n        if (path.substring(0,base.length)!=base) {\r\n            return \"../\"+PathUtil.relPath(path, this.up(base));\r\n        }\r\n        return path.substring(base.length);\r\n    },\r\n    up: function(path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (path==SEP) return null;\r\n        var ps=PathUtil.splitPath(path);\r\n        ps.pop();\r\n        return ps.join(SEP)+SEP;\r\n    }\r\n};\r\n[\"directorify\", \"filify\", \"splitPath\", \"name\", \"rel\", \"relPath\", \"up\"].forEach(function (k) {\r\n    var old=PathUtil[k];\r\n    PathUtil[k]=function () {\r\n        var backslashifyAfter=false;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (PathUtil.hasBackslashSep(e)) {\r\n                backslashifyAfter=true;\r\n                return PathUtil.fixSep(e);\r\n            } else {\r\n                return e;\r\n            }\r\n        });\r\n        var res=old.apply(PathUtil,a);\r\n        if (backslashifyAfter) {\r\n            return PathUtil.fixSep(res,\"\\\\\");\r\n        } else {\r\n            return res;\r\n        }\r\n    };\r\n});\r\n\r\nPathUtil.isAbsolute=PathUtil.isAbsolutePath;\r\nPathUtil.isRelative=PathUtil.isRelativePath;\r\nif (typeof window==\"object\") window.PathUtil=PathUtil;\r\nreturn PathUtil;\r\n});\r\n\r\ndefine('MIMETypes',[], function () {\r\n   return {\r\n      \".png\":\"image/png\",\r\n      \".gif\":\"image/gif\",\r\n      \".jpeg\":\"image/jpeg\",\r\n      \".jpg\":\"image/jpeg\",\r\n      \".ico\":\"image/icon\",\r\n      \".wav\":\"audio/x-wav\",\r\n      \".mp3\":\"audio/mp3\",\r\n      \".ogg\":\"audio/ogg\",\r\n      \".midi\":\"audio/midi\",\r\n      \".mid\":\"audio/midi\",\r\n      \".mzo\":\"audio/mzo\",\r\n      \".txt\":\"text/plain\",\r\n      \".html\":\"text/html\",\r\n      \".htm\":\"text/html\",\r\n      \".css\":\"text/css\",\r\n      \".js\":\"text/javascript\",\r\n      \".json\":\"text/json\",\r\n      \".zip\":\"application/zip\",\r\n      \".swf\":\"application/x-shockwave-flash\",\r\n      \".pdf\":\"application/pdf\",\r\n      \".doc\":\"application/word\",\r\n      \".xls\":\"application/excel\",\r\n      \".ppt\":\"application/powerpoint\",\r\n      '.docx':'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      '.docm':'application/vnd.ms-word.document.macroEnabled.12',\r\n      '.dotx':'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\r\n      '.dotm':'application/vnd.ms-word.template.macroEnabled.12',\r\n      '.xlsx':'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      '.xlsm':'application/vnd.ms-excel.sheet.macroEnabled.12',\r\n      '.xltx':'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\r\n      '.xltm':'application/vnd.ms-excel.template.macroEnabled.12',\r\n      '.xlsb':'application/vnd.ms-excel.sheet.binary.macroEnabled.12',\r\n      '.xlam':'application/vnd.ms-excel.addin.macroEnabled.12',\r\n      '.pptx':'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n      '.pptm':'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\r\n      '.potx':'application/vnd.openxmlformats-officedocument.presentationml.template',\r\n      '.potm':'application/vnd.ms-powerpoint.template.macroEnabled.12',\r\n      '.ppsx':'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\r\n      '.ppsm':'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',\r\n      '.ppam':'application/vnd.ms-powerpoint.addin.macroEnabled.12',\r\n      \".tonyu\":\"text/tonyu\",\r\n      \".c\":\"text/c\",\r\n      \".dtl\":\"text/dolittle\"\r\n   };\r\n});\r\n\r\ndefine('DeferredUtil',[], function () {\r\n    var root=(\r\n        typeof window!==\"undefined\" ? window :\r\n        typeof self!==\"undefined\" ? self :\r\n        typeof global!==\"undefined\" ? global : null\r\n    );\r\n    //  promise.then(S,F)  and promise.then(S).fail(F) is not same!\r\n    //  ->  when fail on S,  F is executed?\r\n    //   same is promise.then(S).then(same,F)\r\n    var DU;\r\n    var DUBRK=function(r){this.res=r;};\r\n    function same(e){return e;}\r\n    DU={\r\n        isNativePromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise!==\"function\") && (typeof p.catch===\"function\") ;\r\n        },\r\n        isJQPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise===\"function\") &&(typeof p.fail===\"function\") ;\r\n        },\r\n        isPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            ((typeof p.promise===\"function\") || (typeof p.catch===\"function\")) ;\r\n        },\r\n        all: function (a) {\r\n            //var a=Array.prototype.slice.call(arguments);\r\n            return DU.promise(function (succ,fail) {\r\n                var res=[],rest=a.length;\r\n                a.forEach(function (p, i) {\r\n                    DU.resolve(p).then(function (r) {\r\n                        res[i]=r;\r\n                        rest--;\r\n                        if (rest===0) {\r\n                            succ(res);\r\n                        }\r\n                    },fail);\r\n                });\r\n            });\r\n        },\r\n        resolve: function (p) {\r\n            if (DU.config.useJQ && DU.isJQPromise(p)) return p;\r\n            if (!DU.config.useJQ && DU.isNativePromise(p)) return p;\r\n            return DU.promise(function (succ,fail) {\r\n                if (DU.isPromise(p)) {\r\n                    p.then(succ,fail);\r\n                } else {\r\n                    succ(p);\r\n                }\r\n            });\r\n            /*if (DU.isPromise(p)) { // NO! it returns Promise when using JQPromise and vise versa.\r\n                return f;\r\n            }\r\n            if (DU.confing.useJQ) {\r\n                return $.when(p);\r\n            }*/\r\n        },\r\n        throwNowIfRejected: function (p) {\r\n            // If Promise p has already rejected, throws the rejeceted reason immediately.\r\n            var state;\r\n            var err;\r\n            var res=p.then(function (r) {\r\n                if (!state) {\r\n                    state=\"resolved\";\r\n                }\r\n                return r;\r\n            },function (e) {\r\n                if (!state) {\r\n                    state=\"rejected\";\r\n                    err=e;\r\n                } else {\r\n                    return DU.reject(e);\r\n                }\r\n            });\r\n            if (!state) state=\"notyet\";\r\n            if (state===\"rejected\") throw err;\r\n            return res;\r\n        },\r\n        assertResolved: function (p) {\r\n            var res,resolved;\r\n            p.then(function (r) {\r\n                res=r;\r\n                resolved=true;\r\n            });\r\n            if (!resolved) {\r\n                throw new Error(\"Promise not resolved\");\r\n            }\r\n            return res;\r\n        },\r\n        /*toJQPromise: function (p) {// From native Promise\r\n            if (!p) return $.when(p);\r\n            if ($.isFunction(p.promise)) return p;\r\n            if (!$.isFunction(p.then) || !$.isFunction(p.catch)) return $.when(p);\r\n            var d=new $.Deferred();\r\n            p.then(function (r) {\r\n                d.resolve(r);\r\n            }).catch(function (r) {\r\n                d.reject(r);\r\n            });\r\n            return d.promise();\r\n        },*/\r\n        ensureDefer: function (v) {\r\n            return DU.promise(function (resolve,reject) {\r\n                var isDeferred;\r\n                DU.resolve(v).then(function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            resolve(r);\r\n                        },0);\r\n                    } else {\r\n                        resolve(r);\r\n                    }\r\n                }).then(same,function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            reject(r);\r\n                        },0);\r\n                    } else {\r\n                        reject(r);\r\n                    }\r\n                });\r\n                isDeferred=true;\r\n            });\r\n        },\r\n        directPromise:function (v) {\r\n            return DU.timeout(v,0);\r\n        },\r\n        then: function (f) {\r\n            return DU.directPromise().then(f);\r\n        },\r\n        timeout:function (timeout,value) {\r\n            return DU.promise(function (resolve) {\r\n                setTimeout(function () {resolve(value);},timeout||0);\r\n            });\r\n        },\r\n        funcPromise:function (f) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                try {\r\n                    f(function (v) {\r\n                        d.resolve(v);\r\n                    },function (e) {\r\n                        d.reject(e);\r\n                    });\r\n                }catch(e) {\r\n                    d.reject(e);\r\n                }\r\n                return d.promise();\r\n            } else if (DU.external.Promise) {\r\n                return new DU.external.Promise(function (resolve,reject) {\r\n                    try {\r\n                        f(resolve,reject);\r\n                    }catch(e) {\r\n                        reject(e);\r\n                    }\r\n                });\r\n            } else {\r\n                throw new Error(\"promise is not found\");\r\n            }\r\n        },\r\n        reject: function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                d.reject(e);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwPromise:function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                setTimeout(function () {\r\n                    d.reject(e);\r\n                }, 0);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwF: function (f) {\r\n            return function () {\r\n                try {\r\n                    return f.apply(this,arguments);\r\n                } catch(e) {\r\n                    console.log(e,e.stack);\r\n                    return DU.throwPromise(e);\r\n                }\r\n            };\r\n        },\r\n        each: function (set,f) {\r\n            if (set instanceof Array) {\r\n                return DU.loop(function (i) {\r\n                    if (i>=set.length) return DU.brk();\r\n                    return DU.resolve(f(set[i],i)).then(function () {\r\n                        return i+1;\r\n                    });\r\n                },0);\r\n            } else {\r\n                var objs=[];\r\n                for (var i in set) {\r\n                    objs.push({k:i,v:set[i]});\r\n                }\r\n                return DU.each(objs,function (e) {\r\n                    return f(e.k, e.v);\r\n                });\r\n            }\r\n        },\r\n        loop: function (f,r) {\r\n            try {\r\n                var err;\r\n                while(true) {\r\n                    if (r instanceof DUBRK) return DU.when1(r.res);\r\n                    var deff1=true, deff2=false;\r\n                    //  not deffered    deferred\r\n                    var r1=f(r);\r\n                    var dr=DU.resolve(r1).then(function (r2) {\r\n                        r=r2;\r\n                        deff1=false;\r\n                        if (r instanceof DUBRK) return r.res;\r\n                        if (deff2) return DU.loop(f,r); //\r\n                    }).then(same,function (e) {\r\n                        deff1=false;\r\n                        err=e;\r\n                    });\r\n                    if (err) throw err;\r\n                    deff2=true;\r\n                    if (deff1) return dr;//\r\n                    //\r\n                }\r\n            }catch (e) {\r\n                return DU.reject(e);\r\n            }\r\n        },\r\n        brk: function (res) {\r\n            return new DUBRK(res);\r\n        },\r\n        tryLoop: function (f,r) {\r\n            return DU.loop(DU.tr(f),r);\r\n        },\r\n        tryEach: function (s,f) {\r\n            return DU.loop(s,DU.tr(f));\r\n        },\r\n        documentReady:function () {\r\n            return DU.callbackToPromise(function (s) {$(s);});\r\n        },\r\n        requirejs:function (modules) {\r\n            if (!root.requirejs) throw new Error(\"requirejs is not loaded\");\r\n            return DU.callbackToPromise(function (s) {\r\n                root.requirejs(modules,s);\r\n            });\r\n        }\r\n    };\r\n    DU.NOP=function (r) {return r;};\r\n    DU.E=function () {\r\n        console.log(\"DUE\",arguments);\r\n        DU.errorHandler.apply(DU,arguments);\r\n    };\r\n    DU.errorHandler=function (e) {\r\n        console.error.apply(console,arguments);\r\n        alert(e);\r\n    };\r\n    DU.setE=function (f) {\r\n        DU.errorHandler=f;\r\n    };\r\n    DU.begin=DU.try=DU.tr=DU.throwF;\r\n    DU.promise=DU.callbackToPromise=DU.funcPromise;\r\n    DU.when1=DU.resolve;\r\n    DU.config={};\r\n    if (root.$ && root.$.Deferred) {\r\n        DU.config.useJQ=true;\r\n    }\r\n    DU.external={Promise:root.Promise};\r\n    if (!root.DeferredUtil) root.DeferredUtil=DU;\r\n    return DU;\r\n});\r\n\r\ndefine('FSClass',[\"extend\",\"PathUtil\",\"MIMETypes\",\"assert\",\"DeferredUtil\"],\r\nfunction (extend, P, M,assert,DU){\r\n    var FS=function () {\r\n    };\r\n    var fstypes={};\r\n    FS.addFSType=function (name,fsgen) {\r\n        fstypes[name]=fsgen;\r\n    };\r\n    FS.availFSTypes=function () {\r\n        return fstypes;\r\n    };\r\n    function stub(n) {\r\n        throw new Error (n+\" is STUB!\");\r\n    }\r\n    extend(FS.prototype, {\r\n        err: function (path, mesg) {\r\n            throw new Error(path+\": \"+mesg);\r\n        },\r\n        fstype:function () {\r\n            return \"Unknown\";\r\n        },\r\n        isReadOnly: function (path, options) {// mainly for check ENTIRELY read only\r\n            stub(\"isReadOnly\");\r\n        },\r\n        supportsSync: function () {\r\n            return true;\r\n        },\r\n        resolveFS:function (path, options) {\r\n            assert(this.getRootFS()!==this);\r\n            return this.getRootFS().resolveFS(path);\r\n        },\r\n        mounted: function (rootFS, mountPoint ) {\r\n            //assert.is(arguments,[FS,P.AbsDir]);\r\n            this.rootFS=rootFS;\r\n            this.mountPoint=mountPoint;\r\n        },\r\n        inMyFS:function (path) {\r\n            return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n        },\r\n        /*dirFromFstab: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var res=(options||{}).res || [];\r\n            this.fstab().forEach(function (tb) {\r\n                if (P.up( tb.path )==path) res.push(P.name(tb.path));\r\n            });\r\n            return res;\r\n        },*/\r\n        getRootFS: function () {\r\n            return assert( this.rootFS, \"rootFS is not set\" );\r\n        },\r\n        //-------- end of mouting\r\n        //-------- spec\r\n        getReturnTypes: function (path, options) {\r\n            //{getContent:String|DataURL|ArrayBuffer|OutputStream|Writer\r\n            //   ,opendir:Array|...}\r\n            stub(\"\");\r\n        },\r\n        //-------  for file\r\n        getContent: function (path, options) {\r\n            // options:{type:String|DataURL|ArrayBuffer|OutputStream|Writer}\r\n            // succ : [type],\r\n            stub(\"getContent\");\r\n        },\r\n        size: function (path) {\r\n            var c=this.getContent(path,{type:ArrayBuffer});\r\n            var l=c.toBin().byteLength;\r\n            return l;\r\n        },\r\n        getContentAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"getContentAsync\");\r\n            return DU.resolve(this.getContent.apply(this,arguments));\r\n        },\r\n        setContent: function (path, content, options) {\r\n            // content: String|ArrayBuffer|InputStream|Reader\r\n            stub(\"\");\r\n        },\r\n        setContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"setContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.setContent(path,content,options));\r\n            });\r\n        },\r\n        appendContent: function (path, content, options) {\r\n            //var nc=this.getContent(path,options).toPlainText()+content.toPlainText();\r\n            //return this.setContent(path, Content.fromPlainText(nc) , options);\r\n            stub(\"\");\r\n        },\r\n        appendContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"appendContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.appendContent(path,content,options));\r\n            });\r\n        },\r\n        getMetaInfo: function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        setMetaInfo: function (path, info, options) {\r\n            stub(\"\");\r\n        },\r\n        mkdir: function (path, options) {\r\n            stub(\"mkdir\");\r\n        },\r\n        touch: function (path) {\r\n            stub(\"touch\");\r\n        },\r\n        exists: function (path, options) {\r\n            // exists return false if path is existent by follwing symlink\r\n            stub(\"exists\");\r\n        },\r\n        opendir: function (path, options) {\r\n            //ret: [String] || Stream<string> // https://nodejs.org/api/stream.html#stream_class_stream_readable\r\n            stub(\"opendir\");\r\n        },\r\n        opendirAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"opendirAsync\");\r\n            return DU.resolve(this.opendir.apply(this,arguments));\r\n        },\r\n        cp: function(path, dst, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertExist(path);\r\n            options=options||{};\r\n            var srcIsDir=this.isDir(path);\r\n            var dstfs=this.getRootFS().resolveFS(dst);\r\n            var dstIsDir=dstfs.isDir(dst);\r\n            if (!srcIsDir && !dstIsDir) {\r\n                if (this.supportsSync() && dstfs.supportsSync()) {\r\n                    var cont=this.getContent(path);\r\n                    var res=dstfs.setContent(dst,cont);\r\n                    if (options.a) {\r\n                        dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                    }\r\n                    return res;\r\n                } else {\r\n                    return dstfs.setContentAsync(\r\n                            dst,\r\n                            this.getContentAsync(path)\r\n                    ).then(function (res) {\r\n                        if (options.a) {\r\n                            return dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                        }\r\n                        return res;\r\n                    });\r\n                }\r\n            } else {\r\n                throw new Error(\"only file to file supports\");\r\n            }\r\n        },\r\n        mv: function (path,to,options) {\r\n            this.cp(path,to,options);\r\n            return this.rm(path,{r:true});\r\n        },\r\n        rm:function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        link: function (path, to, options) {\r\n            throw new Error(\"ln \"+to+\" \"+path+\" : This FS not support link.\");\r\n        },\r\n        getURL: function (path) {\r\n            stub(\"\");\r\n        },\r\n        onAddObserver: function (path) {\r\n        }\r\n    });\r\n    //res=[]; for (var k in a) { res.push(k); } res;\r\n    FS.delegateMethods=function (prototype,  methods) {\r\n        for (var n in methods) {\r\n            (function (n){\r\n                assert.ne(n,\"inMyFS\");\r\n                prototype[n]=function () {\r\n                    var path=arguments[0];\r\n                    assert.is(path,P.Absolute);\r\n                    var fs=this.resolveFS(path);\r\n                    //console.log(n, f.fs===this  ,f.fs, this);\r\n                    if (fs!==this) {\r\n                        console.log(\"Invoked for other fs\",this.mountPoint, fs.mountPoint)\r\n                        //arguments[0]=f.path;\r\n                        return fs[n].apply(fs, arguments);\r\n                    } else {\r\n                        return methods[n].apply(this, arguments);\r\n                    }\r\n                };\r\n            })(n);\r\n        }\r\n    };\r\n    FS.delegateMethods(FS.prototype, {\r\n        assertWriteable: function (path) {\r\n            if (this.isReadOnly(path)) this.err(path, \"read only.\");\r\n        },\r\n        getContentType: function (path, options) {\r\n            var e=(P.ext(path)+\"\").toLowerCase();\r\n            return M[e] || (options||{}).def || \"application/octet-stream\";\r\n        },\r\n        getBlob: function (path, options) {\r\n            var c=this.getContent(path);\r\n            options=options||{};\r\n            options.blobType=options.blobType||Blob;\r\n            options.binType=options.binType||ArrayBuffer;\r\n            if (c.hasPlainText()) {\r\n                return new options.blobType([c.toPlainText()],this.getContentType(path));\r\n            } else {\r\n                return new options.blobType([c.toBin(options.binType)],this.getContentType(path));\r\n            }\r\n        },\r\n        isText:function (path) {\r\n            var m=this.getContentType(path);\r\n            return P.startsWith( m, \"text\");\r\n        },\r\n        assertExist: function (path, options) {\r\n            if (!this.exists(path, options)) {\r\n                this.err(path, \": No such \"+(P.isDir(path)?\"directory\":\"file\"));\r\n            }\r\n        },\r\n        isDir: function (path,options) {\r\n            return P.isDir(path);\r\n        },\r\n        find: function (path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            var ls=this.opendir(path, options);\r\n            var t=this;\r\n            var res=[path];\r\n            ls.forEach(function (e) {\r\n                var ep=P.rel(path, e);\r\n                if (P.isDir(ep)) {\r\n                    var fs=t.resolveFS(ep);\r\n                    res=res.concat(\r\n                            fs.find( ep ,options)\r\n                    );\r\n                } else {\r\n                    res.push( ep );//getPathFromRootFS\r\n                }\r\n            });\r\n            return res;\r\n        },\r\n        resolveLink: function (path) {\r\n            assert.is(path,P.Absolute);\r\n            // returns non-link path\r\n            // ln -s /a/b/ /c/d/\r\n            // resolveLink /a/b/    ->  /a/b/\r\n            // resolveLink /c/d/e/f -> /a/b/e/f\r\n            // resolveLink /c/d/non_existent -> /a/b/non_existent\r\n            // isLink      /c/d/    -> /a/b/\r\n            // isLink      /c/d/e/f -> null\r\n            // ln /testdir/ /ram/files/\r\n            // resolveLink /ram/files/sub/test2.txt -> /testdir/sub/test2.txt\r\n            // path=/ram/files/test.txt\r\n            for (var p=path ; p ; p=P.up(p)) {\r\n                assert(!this.mountPoint || P.startsWith(p, this.mountPoint), p+\" is out of mountPoint. path=\"+path);\r\n                var l=this.isLink(p);  // p=/ram/files/ l=/testdir/\r\n                if (l) {\r\n                    assert(l!=p,\"l==p==\"+l);\r\n                    //        /testdir/    test.txt\r\n                    var np=P.rel(l,P.relPath(path, p));  //   /testdir/test.txt\r\n                    assert(np!=path,\"np==path==\"+np);\r\n                    return assert.is(this.getRootFS().resolveFS(np).resolveLink(np),P.Absolute)  ;\r\n                }\r\n                if (this.exists(p)) return path;\r\n            }\r\n            return path;\r\n        },\r\n        isLink: function (path) {\r\n            return null;\r\n        },\r\n        opendirEx: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var ls=this.opendir(path);\r\n            var t=this;\r\n            var dest={};\r\n            ls.forEach(function (f) {\r\n                var p=P.rel(path,f);\r\n                dest[f]=t.getMetaInfo(p);\r\n            });\r\n            return dest;\r\n        },\r\n        getDirTree: function (path, options) {\r\n            options=options||{};\r\n            var dest=options.dest=options.dest||{};\r\n            options.style=options.style||\"flat-absolute\";\r\n            options.excludes=options.excludes||[];\r\n            assert.is(options.excludes,Array);\r\n            if (!options.base) {\r\n                options.base=path;\r\n            }\r\n            assert.is(path, P.AbsDir);\r\n            var tr=this.opendirEx(path,options);\r\n            if (options.style==\"no-recursive\") return tr;\r\n            var t=this;\r\n            for (var f in tr) {\r\n                var meta=tr[f];\r\n                var p=P.rel(path,f);\r\n                var relP=P.relPath(p,options.base);\r\n                switch(options.style) {\r\n                    case \"flat-relative\":\r\n                    case \"hierarchical\":\r\n                        if (options.excludes.indexOf(relP)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                    case \"flat-absolute\":\r\n                        if (options.excludes.indexOf(p)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                }\r\n                if (t.isDir(p)) {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                    case \"flat-relative\":\r\n                        t.getDirTree(p,options);\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        options.dest={};\r\n                        dest[f]=t.getDirTree(p,options);\r\n                        break;\r\n                    }\r\n                } else {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                        dest[p]=meta;\r\n                        break;\r\n                    case \"flat-relative\":\r\n                        dest[relP]=meta;\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        dest[f]=meta;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return dest;\r\n        }\r\n        /*get: function (path) {\r\n            assert.eq(this.resolveFS(path), this);\r\n            return new SFile(this, path);\r\n            //var r=this.resolveFS(path);\r\n            //return new SFile(r.fs, r.path);\r\n        }*/\r\n\r\n    });\r\n    return FS;\r\n});\r\n\r\ndefine('Util',[],function () {\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction extend(d,s) {\r\n    for (var i in (s||{})) {d[i]=s[i];} \r\n    return d;\r\n}\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    privatize: privatize,extend:extend\r\n};\r\n});\r\n\r\n/*\r\n* FileSaver.js\r\n* A saveAs() FileSaver implementation.\r\n*\r\n* By Eli Grey, http://eligrey.com\r\n*\r\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\r\n* source  : http://purl.eligrey.com/github/FileSaver.js\r\n*/\r\ndefine('FileSaver',[],function (){\r\n\r\n// The one and only way of getting global scope in all environments\r\n// https://stackoverflow.com/q/3277182/1008999\r\nvar _global = typeof window === 'object' && window.window === window\r\n  ? window : typeof self === 'object' && self.self === self\r\n  ? self : typeof global === 'object' && global.global === global\r\n  ? global\r\n  : this\r\n\r\nfunction bom (blob, opts) {\r\n  if (typeof opts === 'undefined') opts = { autoBom: false }\r\n  else if (typeof opts !== 'object') {\r\n    console.warn('Depricated: Expected third argument to be a object')\r\n    opts = { autoBom: !opts }\r\n  }\r\n\r\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\r\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\r\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\r\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\r\n  }\r\n  return blob\r\n}\r\n\r\nfunction download (url, name, opts) {\r\n  var xhr = new XMLHttpRequest()\r\n  xhr.open('GET', url)\r\n  xhr.responseType = 'blob'\r\n  xhr.onload = function () {\r\n    saveAs(xhr.response, name, opts)\r\n  }\r\n  xhr.onerror = function () {\r\n    console.error('could not download file')\r\n  }\r\n  xhr.send()\r\n}\r\n\r\nfunction corsEnabled (url) {\r\n  var xhr = new XMLHttpRequest()\r\n  // use sync to avoid popup blocker\r\n  xhr.open('HEAD', url, false)\r\n  xhr.send()\r\n  return xhr.status >= 200 && xhr.status <= 299\r\n}\r\n\r\n// `a.click()` doesn't work for all browsers (#465)\r\nfunction click(node) {\r\n  try {\r\n    node.dispatchEvent(new MouseEvent('click'))\r\n  } catch (e) {\r\n    var evt = document.createEvent('MouseEvents')\r\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\r\n                          20, false, false, false, false, 0, null)\r\n    node.dispatchEvent(evt)\r\n  }\r\n}\r\n\r\nvar saveAs = _global.saveAs ||\r\n// probably in some web worker\r\n(typeof window !== 'object' || window !== _global)\r\n  ? function saveAs () { /* noop */ }\r\n\r\n// Use download attribute first if possible (#193 Lumia mobile)\r\n: 'download' in HTMLAnchorElement.prototype\r\n? function saveAs (blob, name, opts) {\r\n  var URL = _global.URL || _global.webkitURL\r\n  var a = document.createElement('a')\r\n  name = name || blob.name || 'download'\r\n\r\n  a.download = name\r\n  a.rel = 'noopener' // tabnabbing\r\n\r\n  // TODO: detect chrome extensions & packaged apps\r\n  // a.target = '_blank'\r\n\r\n  if (typeof blob === 'string') {\r\n    // Support regular links\r\n    a.href = blob\r\n    if (a.origin !== location.origin) {\r\n      corsEnabled(a.href)\r\n        ? download(blob, name, opts)\r\n        : click(a, a.target = '_blank')\r\n    } else {\r\n      click(a)\r\n    }\r\n  } else {\r\n    // Support blobs\r\n    a.href = URL.createObjectURL(blob)\r\n    setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\r\n    setTimeout(function () { click(a) }, 0)\r\n  }\r\n}\r\n\r\n// Use msSaveOrOpenBlob as a second approach\r\n: 'msSaveOrOpenBlob' in navigator\r\n? function saveAs (blob, name, opts) {\r\n  name = name || blob.name || 'download'\r\n\r\n  if (typeof blob === 'string') {\r\n    if (corsEnabled(blob)) {\r\n      download(blob, name, opts)\r\n    } else {\r\n      var a = document.createElement('a')\r\n      a.href = blob\r\n      a.target = '_blank'\r\n      setTimeout(function () { click(a) })\r\n    }\r\n  } else {\r\n    navigator.msSaveOrOpenBlob(bom(blob, opts), name)\r\n  }\r\n}\r\n\r\n// Fallback to using FileReader and a popup\r\n: function saveAs (blob, name, opts, popup) {\r\n  // Open a popup immediately do go around popup blocker\r\n  // Mostly only avalible on user interaction and the fileReader is async so...\r\n  popup = popup || open('', '_blank')\r\n  if (popup) {\r\n    popup.document.title =\r\n    popup.document.body.innerText = 'downloading...'\r\n  }\r\n\r\n  if (typeof blob === 'string') return download(blob, name, opts)\r\n\r\n  var force = blob.type === 'application/octet-stream'\r\n  var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\r\n  var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\r\n\r\n  if ((isChromeIOS || (force && isSafari)) && typeof FileReader === 'object') {\r\n    // Safari doesn't allow downloading of blob urls\r\n    var reader = new FileReader()\r\n    reader.onloadend = function () {\r\n      var url = reader.result\r\n      url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\r\n      if (popup) popup.location.href = url\r\n      else location = url\r\n      popup = null // reverse-tabnabbing #460\r\n    }\r\n    reader.readAsDataURL(blob)\r\n  } else {\r\n    var URL = _global.URL || _global.webkitURL\r\n    var url = URL.createObjectURL(blob)\r\n    if (popup) popup.location = url\r\n    else location.href = url\r\n    popup = null // reverse-tabnabbing #460\r\n    setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\r\n  }\r\n}\r\n\r\n_global.saveAs = saveAs.saveAs = saveAs\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = saveAs;\r\n}\r\nreturn saveAs;\r\n});\r\n\r\ndefine('Content',[\"assert\",\"Util\",\"FileSaver\"],function (assert,Util,saveAs) {\r\n    var Content=function () {};\r\n    var extend=Util.extend;\r\n    // ------ constructor\r\n    Content.plainText=function (s,contentType){\r\n        var b=new Content;\r\n        b.contentType=contentType||\"text/plain\";\r\n        b.plain=s;\r\n        return b;\r\n    };\r\n    Content.url=function (s) {\r\n        var b=new Content;\r\n        b.url=s;\r\n        return b;\r\n    };\r\n    Content.buffer2ArrayBuffer = function (a) {\r\n        if (Content.isBuffer(a)) {\r\n            var u=new Uint8Array(a);\r\n            var r=u.buffer;\r\n            if (r instanceof ArrayBuffer) return r;\r\n            var ary=Array.prototype.slice.call(u);\r\n            return assert(new Uint8Array(ary).buffer,\"n2a: buf is not set\");\r\n        }\r\n        return assert(a,\"n2a: a is not set\");\r\n    };\r\n    Content.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return assert(a,\"a2n: a is not set\");\r\n    };\r\n\r\n    Content.bin=function (bin, contentType) {\r\n        assert(contentType, \"contentType should be set\");\r\n        var b=new Content;\r\n        if (Content.isNodeBuffer(bin)) {\r\n            b.bufType=\"node\";\r\n            b.nodeBuffer=bin;\r\n        } else if (bin instanceof ArrayBuffer) {\r\n            b.bufType=\"array2\";\r\n            b.arrayBuffer=bin;\r\n        } else if (bin && Content.isBuffer(bin.buffer)) {\r\n            // in node.js v8.9.1 ,\r\n            ///  bin is Buffer, bin.buffer is ArrayBuffer\r\n            //   and bin.buffer is content of different file(memory leak?) \r\n            b.bufType=\"array1\";\r\n            b.arrayBuffer=bin.buffer;\r\n        } else {\r\n            throw new Error(bin+\" is not a bin\");\r\n        }\r\n        b.contentType=contentType;\r\n        return b;\r\n    };\r\n    Content.looksLikeDataURL=function (text) {\r\n        return text.match(/^data:/);\r\n    };\r\n    Content.download=saveAs;\r\n    // why blob is not here... because blob content requires FileReader (cannot read instantly!)\r\n    //------- methods\r\n    var p=Content.prototype;\r\n    p.toBin = function (binType) {\r\n        binType=binType || (Content.hasNodeBuffer() ? Buffer: ArrayBuffer);\r\n        if (this.nodeBuffer) {\r\n            if (binType===Buffer) {\r\n                return this.nodeBuffer;\r\n            } else {\r\n                return this.arrayBuffer=( Content.buffer2ArrayBuffer(this.nodeBuffer) );\r\n            }\r\n        } else if (this.arrayBuffer) {\r\n            if (binType===ArrayBuffer) {\r\n                return this.arrayBuffer;\r\n            } else {\r\n                return this.nodeBuffer=( Content.arrayBuffer2Buffer(this.arrayBuffer) );\r\n            }\r\n        } else if (this.url) {\r\n            var d=new DataURL(this.url, binType);\r\n            return this.setBuffer(d.buffer);\r\n        } else if (this.plain!=null) {\r\n            return this.setBuffer( Content.str2utf8bytes(this.plain, binType) );\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.setBuffer=function (b) {\r\n        assert(b,\"b is not set\");\r\n        if (Content.isNodeBuffer(b)) {\r\n            return this.nodeBuffer=b;\r\n        } else {\r\n            return this.arrayBuffer=b;\r\n        }\r\n    };\r\n    p.toArrayBuffer=function () {\r\n        return this.toBin(ArrayBuffer);\r\n    };\r\n    p.toNodeBuffer=function () {\r\n        return this.toBin(Buffer);\r\n    };\r\n    p.toURL=function () {\r\n        if (this.url) {\r\n            return this.url;\r\n        } else {\r\n            if (!this.arrayBuffer && this.plain!=null) {\r\n                this.arrayBuffer=Content.str2utf8bytes(this.plain,ArrayBuffer);\r\n            }\r\n            if (this.arrayBuffer || this.nodeBuffer) {\r\n                var d=new DataURL(this.arrayBuffer || this.nodeBuffer,this.contentType);\r\n                return this.url=d.url;\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.toPlainText=function () {\r\n        if (this.hasPlainText()) {\r\n            return this.plain;\r\n        } else {\r\n            if (this.url && !this.hasBin() ) {\r\n                var d=new DataURL(this.url,ArrayBuffer);\r\n                this.arrayBuffer=d.buffer;\r\n            }\r\n            if (this.hasBin()) {\r\n                return this.plain=Content.utf8bytes2str(\r\n                        this.nodeBuffer || new Uint8Array(this.arrayBuffer)\r\n                );\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.hasURL=function (){return this.url;};\r\n    p.hasPlainText=function (){return this.plain!=null;};\r\n    p.hasBin=function (){return this.nodeBuffer || this.arrayBuffer;};\r\n    p.hasNodeBuffer= function () {return this.nodeBuffer;};\r\n    p.hasArrayBuffer= function () {return this.arrayBuffer;};\r\n    p.toBlob=function () {\r\n        return new Blob([this.toBin(ArrayBuffer)],{type:this.contentType});\r\n    };\r\n    p.download=function (name) {\r\n        Content.download(this.toBlob(),name);\r\n    };\r\n    //--------Util funcs\r\n    // From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\n    Content.Base64_To_ArrayBuffer=function (base64,binType){\r\n\t    var A=binType||ArrayBuffer;\r\n        base64=base64.replace(/[\\n=]/g,\"\");\r\n        var dic = new Object();\r\n        dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n        dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n        dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n        dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n        var num = base64.length;\r\n        var n = 0;\r\n        var b = 0;\r\n        var e;\r\n\r\n        if(!num) return (new A(0));\r\n        //if(num < 4) return null;\r\n        //if(num % 4) return null;\r\n\r\n        // AA     12    1\r\n        // AAA    18    2\r\n        // AAAA   24    3\r\n        // AAAAA  30    3\r\n        // AAAAAA 36    4\r\n        // num*6/8\r\n        e = Math.floor(num / 4 * 3);\r\n        if(base64.charAt(num - 1) == '=') e -= 1;\r\n        if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n        var ary_buffer = new A( e );\r\n        var ary_u8 = (Content.isNodeBuffer(ary_buffer) ? ary_buffer : new Uint8Array( ary_buffer ));//new Uint8Array( ary_buffer );\r\n        var i = 0;\r\n        var p = 0;\r\n        while(p < e){\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n            n = (b << 2);\r\n            i ++;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 4) & 0x3);\r\n            n = (b & 0x0f) << 4;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 2) & 0xf);\r\n            n = (b & 0x03) << 6;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | b;\r\n            i ++;\r\n            p ++;\r\n        }\r\n        function fail(m) {\r\n            console.log(m);\r\n            console.log(base64,i);\r\n            throw new Error(m);\r\n        }\r\n        return ary_buffer;\r\n    };\r\n\r\n    Content.Base64_From_ArrayBuffer=function (ary_buffer){\r\n        var dic = [\r\n            'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n            'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n            'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n            'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n        ];\r\n        var base64 = \"\";\r\n        var ary_u8 = new Uint8Array( ary_buffer );\r\n        var num = ary_u8.length;\r\n        var n = 0;\r\n        var b = 0;\r\n\r\n        var i = 0;\r\n        while(i < num){\r\n            b = ary_u8[i];\r\n            base64 += dic[(b >> 2)];\r\n            n = (b & 0x03) << 4;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 4)];\r\n            n = (b & 0x0f) << 2;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 6)];\r\n            base64 += dic[(b & 0x3f)];\r\n            i ++;\r\n        }\r\n\r\n        var m = num % 3;\r\n        if(m){\r\n            base64 += dic[n];\r\n        }\r\n        if(m == 1){\r\n            base64 += \"==\";\r\n        }else if(m == 2){\r\n            base64 += \"=\";\r\n        }\r\n        return base64;\r\n    };\r\n\r\n    Content.hasNodeBuffer=function () {\r\n        return typeof Buffer!=\"undefined\";\r\n    };\r\n    Content.isNodeBuffer=function (data) {\r\n        return (Content.hasNodeBuffer() && data instanceof Buffer);\r\n    };\r\n    Content.isBuffer=function (data) {\r\n        return data instanceof ArrayBuffer || Content.isNodeBuffer(data);\r\n    };\r\n    Content.utf8bytes2str=function (bytes) {\r\n        var e=[];\r\n        for (var i=0 ; i<bytes.length ; i++) {\r\n             e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n        }\r\n        //try {\r\n            return decodeURIComponent(e.join(\"\"));\r\n        /*} catch (er) {\r\n            console.log(e.join(\"\"));\r\n            throw er;\r\n        }*/\r\n    };\r\n    Content.str2utf8bytes=function (str, binType) {\r\n        var e=encodeURIComponent(str);\r\n        var r=/^%(..)/;\r\n        var a=[];\r\n        var ad=0;\r\n        for (var i=0 ; i<e.length; i++) {\r\n            var m=r.exec( e.substring(i));\r\n            if (m) {\r\n                a.push(parseInt(\"0x\"+m[1]));\r\n                i+=m[0].length-1;\r\n            } else a.push(e.charCodeAt(i));\r\n        }\r\n        return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n    };\r\n    //-------- DataURL\r\n    var A=Content.hasNodeBuffer() ? Buffer :ArrayBuffer;\r\n    //var isBuffer=Util.isBuffer;\r\n    var DataURL=function (data, contentType){\r\n      // data: String/Array/ArrayBuffer\r\n      if (typeof data==\"string\") {\r\n          this.url=data;\r\n          this.binType=contentType || A;\r\n          this.dataURL2bin(data);\r\n      } else if (data && Content.isBuffer(data.buffer)) {\r\n          this.buffer=data.buffer;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else if (Content.isBuffer(data)) {\r\n          this.buffer=data;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else {\r\n          console.log(arguments);\r\n          assert.fail(\"Invalid args: \",arguments);\r\n      }\r\n   };\r\n   Content.DataURL=DataURL;\r\n   extend(DataURL.prototype,{\r\n      bin2dataURL: function (b, contentType) {\r\n          assert(Content.isBuffer(b));\r\n          assert.is(contentType,String);\r\n  \t     var head=this.dataHeader(contentType);\r\n\t     var base64=Content.Base64_From_ArrayBuffer(b);\r\n\t     assert.is(base64,String);\r\n\t     return this.url=head+base64;\r\n\t  },\r\n\t  dataURL2bin: function (dataURL) {\r\n          assert.is(arguments,[String]);\r\n\t      var reg=/^data:([^;]+);base64,/i;\r\n\t      var r=reg.exec(dataURL);\r\n\t      assert(r, [\"malformed dataURL:\", dataURL] );\r\n\t      this.contentType=r[1];\r\n\t      this.buffer=Content.Base64_To_ArrayBuffer(dataURL.substring(r[0].length) , this.binType);\r\n          return assert.is(this.buffer , this.binType);\r\n  \t  },\r\n  \t  dataHeader: function (ctype) {\r\n\t      assert.is(arguments,[String]);\r\n\t      return \"data:\"+ctype+\";base64,\";\r\n   \t  },\r\n   \t  toString: function () {return assert.is(this.url,String);}\r\n   });\r\n\r\n    return Content;\r\n});\r\n\r\n/*global process, global, Buffer*/\r\ndefine('NativeFS',[\"FSClass\",\"assert\",\"PathUtil\",\"extend\",\"Content\"],\r\n        function (FS,A,P,extend,Content) {\r\n    var assert=A,fs;\r\n    try {\r\n        fs=global.require(\"fs\");\r\n        fs.existsSync('test.txt');\r\n    }catch(e){\r\n        return function () {\r\n            throw new Error(\"This system not support native FS\");\r\n        };\r\n    }\r\n    var NativeFS=function (rootPoint) {\r\n        if (rootPoint) {\r\n            A.is(rootPoint, P.AbsDir);\r\n            this.rootPoint=rootPoint;\r\n        }\r\n    };\r\n    var hasDriveLetter=P.hasDriveLetter(process.cwd());\r\n    NativeFS.available=true;\r\n    var SEP=P.SEP;\r\n    //var json=JSON; // JSON changes when page changes, if this is node module, JSON is original JSON\r\n    var Pro=NativeFS.prototype=new FS();\r\n    Pro.toNativePath = function (path) {\r\n        // rootPoint: on NativePath   C:/jail/\r\n        // mountPoint: on VirtualFS   /mnt/natfs/\r\n        if (!this.rootPoint) return path;\r\n        A.is(path, P.Absolute);\r\n        A(this.inMyFS(path),path+\" is not fs of \"+this);\r\n        //console.log(\"tonat:MP\",P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP)));\r\n        return P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP));\r\n    };\r\n    Pro.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return a;\r\n    };\r\n\r\n    FS.addFSType(\"NativeFS\",function (path, options) {\r\n            return new NativeFS(options.r);\r\n    });\r\n    NativeFS.prototype.fstype=function () {\r\n        return \"Native\"+(this.rootPoint?\"(\"+this.rootPoint+\")\":\"\");\r\n    };\r\n    NativeFS.prototype.inMyFS=function (path) {\r\n        //console.log(\"inmyfs\",path);\r\n        if (this.mountPoint) {\r\n            return P.startsWith(path, this.mountPoint);\r\n        } else {\r\n//            console.log(path, hasDriveLetter , P.hasDriveLetter(path));\r\n            return !( !!hasDriveLetter ^ !!P.hasDriveLetter(path));\r\n        }\r\n    };\r\n    function E(r){return r;}\r\n    FS.delegateMethods(NativeFS.prototype, {\r\n        getReturnTypes: function(path, options) {\r\n            E(path,options);\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: ArrayBuffer, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function (path, options) {\r\n            options=options||{};\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            this.assertExist(path);\r\n            /*if (this.isText(path)) {\r\n                return Content.plainText( fs.readFileSync(np, {encoding:\"utf8\"}) );\r\n            } else {*/\r\n                return Content.bin( fs.readFileSync(np) , this.getContentType(path));\r\n            //}\r\n        },\r\n        size: function(path) {\r\n            var np=this.toNativePath(path);\r\n            var st=fs.statSync(np);\r\n            return st.size;\r\n        },\r\n        setContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.writeFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.writeFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        appendContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.appendFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.appendFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, options);\r\n            var s=this.stat(path);\r\n            s.lastUpdate=s.mtime.getTime();\r\n            return s;\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            E(path, info, options);\r\n            //options.lastUpdate\r\n\r\n            //TODO:\r\n        },\r\n        isReadOnly: function (path) {\r\n            E(path);\r\n            // TODO:\r\n            return false;\r\n        },\r\n        stat: function (path) {\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            return fs.statSync(np);\r\n        },\r\n        mkdir: function(path, options) {\r\n            options=options||{};\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (this.exists(path)){\r\n                if (this.isDir(path)) {\r\n                    return;\r\n                } else {\r\n                    throw new Error(this+\" is a file. not a dir.\");\r\n                }\r\n            }\r\n            this.assertWriteable(path);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            fs.mkdirSync(np);\r\n            return this.assertExist(np);\r\n        },\r\n        opendir: function (path, options) {\r\n            assert.is(arguments,[String]);\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            var ts=P.truncSEP(np);\r\n            var r=fs.readdirSync(np);\r\n            if (!options.nosep) {\r\n                r=r.map(function (e) {\r\n                    var s=fs.statSync(ts+SEP+e);\r\n                    var ss=s.isDirectory()?SEP:\"\";\r\n                    return e+ss;\r\n                });\r\n            }\r\n            var res=[]; //this.dirFromFstab(path);\r\n            return assert.is(res.concat(r),Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            options=options||{};\r\n            this.assertExist(path);\r\n            var np=this.toNativePath(path);\r\n            if (this.isDir(path)) {\r\n                return fs.rmdirSync(np);\r\n            } else {\r\n                return fs.unlinkSync(np);\r\n            }\r\n        },\r\n        // mv: is Difficult, should check dst.fs==src.fs\r\n        //     and both have not subFileSystems\r\n        exists: function (path, options) {\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            return fs.existsSync(np);\r\n        },\r\n        isDir: function (path) {\r\n            if (!this.exists(path)) {\r\n                return P.isDir(path);\r\n            }\r\n            return this.stat(path).isDirectory();\r\n        },\r\n        /*link: function(path, to, options) {\r\n        }//TODO\r\n        isLink:\r\n        */\r\n        touch: function (path) {\r\n            if (!this.exists(path) && this.isDir(path)) {\r\n                this.mkdir(path);\r\n            } else if (this.exists(path) /*&& !this.isDir(path)*/ ) {\r\n                // TODO(setlastupdate)\r\n                fs.utimesSync(path,Date.now()/1000,Date.now()/1000);\r\n            }\r\n        },\r\n        getURL:function (path) {\r\n            return \"file:///\"+path.replace(/\\\\/g,\"/\");\r\n        },\r\n        onAddObserver: function (apath,options) {\r\n            var t=this;\r\n            var rfs=t.getRootFS();\r\n            options=options||{};\r\n            var isDir=this.isDir(apath);\r\n            //console.log(\"Invoke oao\",options);\r\n            var w=fs.watch(apath, options, function (evt,rpath) {\r\n                //console.log(path);\r\n                var fpath=isDir ? P.rel(apath,rpath) : apath;\r\n                var meta;\r\n                if (t.exists(fpath)) {\r\n                    meta=extend({eventType:evt},t.getMetaInfo(fpath));\r\n                } else {\r\n                    meta={eventType:evt};\r\n                }\r\n                rfs.notifyChanged(fpath,meta);\r\n            });\r\n            return {\r\n                remove: function () {\r\n                    w.close();\r\n                }\r\n            };\r\n        }\r\n    });\r\n    return NativeFS;\r\n});\r\n\r\ndefine('LSFS',[\"FSClass\",\"PathUtil\",\"extend\",\"assert\",\"Util\",\"Content\"],\r\n        function(FS,P,extend,assert,Util,Content) {\r\n    var LSFS = function(storage,options) {\r\n        assert(storage,\" new LSFS fail: no storage\");\r\n    \tthis.storage=storage;\r\n    \tthis.options=options||{};\r\n    \tif (this.options.useDirCache) this.dirCache={};\r\n    };\r\n    var isDir = P.isDir.bind(P);\r\n    var up = P.up.bind(P);\r\n    var endsWith= P.endsWith.bind(P);\r\n    //var getName = P.name.bind(P);\r\n    //var Path=P.Path;\r\n    var Absolute=P.Absolute;\r\n    var SEP= P.SEP;\r\n    function now(){\r\n        return new Date().getTime();\r\n    }\r\n    LSFS.ramDisk=function (options) {\r\n        var s={};\r\n        s[P.SEP]=\"{}\";\r\n        options=options||{};\r\n        if (!(\"useDirCache\" in options)) options.useDirCache=true;\r\n        return new LSFS(s,options);\r\n    };\r\n    FS.addFSType(\"localStorage\",function (path, options) {\r\n        return new LSFS(localStorage,options);\r\n    });\r\n    FS.addFSType(\"ram\",function (path, options) {\r\n        return LSFS.ramDisk(options);\r\n    });\r\n\r\n    LSFS.now=now;\r\n    LSFS.prototype=new FS();\r\n    //private methods\r\n    LSFS.prototype.resolveKey=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        if (this.mountPoint) {\r\n            return P.SEP+P.relPath(path,this.mountPoint);//FromMountPoint(path);\r\n        } else {\r\n            return path;\r\n        }\r\n    };\r\n    LSFS.prototype.getItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        return this.storage[key];\r\n    };\r\n    LSFS.prototype.setItem=function (path, value) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        /*if (key.indexOf(\"..\")>=0) {\r\n            console.log(path,key,value);\r\n        }*/\r\n        assert(key.indexOf(\"..\")<0);\r\n        assert(P.startsWith(key,P.SEP));\r\n        this.storage[key]=value;\r\n    };\r\n    LSFS.prototype.removeItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        delete this.storage[key];\r\n    };\r\n    LSFS.prototype.itemExists=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        assert(this.storage,\"No storage\");\r\n        return key in this.storage;\r\n    };\r\n    /*LSFS.prototype.inMyFS=function (path){\r\n        return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n    };*/\r\n    LSFS.prototype.getDirInfo=function getDirInfo(path) {\r\n        assert.is(arguments,[P.AbsDir]);\r\n        if (path == null) throw new Error(\"getDir: Null path\");\r\n        if (!endsWith(path, SEP)) path += SEP;\r\n        assert(this.inMyFS(path));\r\n        if (this.dirCache && this.dirCache[path]) return this.dirCache[path];\r\n        var dinfo =  {},dinfos;\r\n        try {\r\n            dinfos = this.getItem(path);\r\n            if (dinfos) {\r\n                dinfo = JSON.parse(dinfos);\r\n            }\r\n        } catch (e) {\r\n            console.log(\"dinfo err : \" , path , dinfos);\r\n        }\r\n        if (this.dirCache) this.dirCache[path]=dinfo;\r\n        return dinfo;\r\n    };\r\n    LSFS.prototype.putDirInfo=function putDirInfo(path, dinfo, trashed) {\r\n  \t    assert.is(arguments,[P.AbsDir, Object]);\r\n  \t    if (!isDir(path)) throw new Error(\"Not a directory : \" + path);\r\n  \t    assert(this.inMyFS(path));\r\n  \t    if (this.dirCache) this.dirCache[path] = dinfo;\r\n  \t    this.setItem(path, JSON.stringify(dinfo));\r\n        var ppath = up(path);\r\n        if (ppath == null) return;\r\n        if (!this.inMyFS(ppath)) {\r\n            //assert(this.getRootFS()!==this);\r\n            //this.getRootFS().resolveFS(ppath).touch(ppath);\r\n            return;\r\n        }\r\n        var pdinfo = this.getDirInfo(ppath);\r\n        this._touch(pdinfo, ppath, P.name(path), trashed);\r\n    };\r\n    LSFS.prototype._touch=function _touch(dinfo, path, name, trashed) {\r\n        // path:path of dinfo\r\n        // trashed: this touch is caused by trashing the file/dir.\r\n        assert.is(arguments,[Object, String, String]);\r\n        assert(this.inMyFS(path));\r\n        var eventType=\"change\";\r\n        if (!dinfo[name]) {\r\n            eventType=\"create\";\r\n            dinfo[name] = {};\r\n            if (trashed) dinfo[name].trashed = true;\r\n        }\r\n        if (!trashed) delete dinfo[name].trashed;\r\n        dinfo[name].lastUpdate = now();\r\n        var meta=extend({eventType:eventType},dinfo[name]);\r\n        this.getRootFS().notifyChanged(P.rel(path,name), meta);\r\n        this.putDirInfo(path, dinfo, trashed);\r\n    };\r\n    LSFS.prototype.removeEntry=function removeEntry(dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            dinfo[name] = {\r\n                lastUpdate: now(),\r\n                trashed: true\r\n            };\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"trash\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.removeEntryWithoutTrash=function (dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            delete dinfo[name];\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"delete\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.isRAM=function (){\r\n        return this.storage!==localStorage;\r\n    };\r\n    LSFS.prototype.fstype=function () {\r\n        return (this.isRAM() ? \"ramDisk\" : \"localStorage\" );\r\n    };\r\n    LSFS.getUsage=function () {\r\n        var using=0;\r\n        for (var i in localStorage) {\r\n            if (typeof localStorage[i]==\"string\"){\r\n                using+=localStorage[i].length;\r\n            }\r\n        }\r\n        return using;\r\n    };\r\n    LSFS.getCapacity=function () {\r\n        var seq=0;\r\n        var str=\"a\";\r\n        var KEY=\"___checkls___\";\r\n        var using=0;\r\n        var lim=Math.pow(2,25);//32MB?\r\n        try {\r\n            // make 1KB str\r\n            for (var i=0; i<10 ;i++) {\r\n                str+=str;\r\n            }\r\n            for (var i in localStorage) {\r\n                if (i.substring(0,KEY.length)==KEY) delete localStorage[i];\r\n                else if (typeof localStorage[i]==\"string\"){\r\n                    using+=localStorage[i].length;\r\n                }\r\n            }\r\n            var ru=using;\r\n            while (add()) {\r\n                if (str.length<lim) {\r\n                    str+=str;\r\n                } else break;\r\n            }\r\n            while(str.length>1024) {\r\n                str=str.substring(str.length/2);\r\n                add();\r\n            }\r\n            return {using:ru, max:using};\r\n        } finally {\r\n            for (var i=0; i<seq; i++) {\r\n                 delete localStorage[KEY+i];\r\n            }\r\n        }\r\n        function add() {\r\n            try {\r\n                localStorage[KEY+seq]=str;\r\n                seq++;\r\n                using+=str.length;\r\n                //console.log(\"Added \"+str.length, str.length, using);\r\n                return true;\r\n            } catch(e) {\r\n                delete localStorage[KEY+seq];\r\n                //console.log(\"Add Fail \"+str.length);\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n\r\n    // public methods (with resolve fs)\r\n    FS.delegateMethods(LSFS.prototype, {\r\n        isReadOnly: function () {return this.options.readOnly;},\r\n        getReturnTypes: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: String, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertExist(path); // Do not use this??( because it does not follow symlinks)\r\n            var c;\r\n            var cs=this.getItem(path);\r\n            if (Content.looksLikeDataURL(cs)) {\r\n                c=Content.url(cs);\r\n            } else {\r\n                c=Content.plainText(cs);\r\n            }\r\n            return c;\r\n        },\r\n        setContent: function(path, content, options) {\r\n            assert.is(arguments,[Absolute,Content]);\r\n            this.assertWriteable(path);\r\n            var t=null;\r\n            if (content.hasPlainText()) {\r\n                t=content.toPlainText();\r\n                if (Content.looksLikeDataURL(t)) t=null;\r\n            }\r\n            if (t!=null) {\r\n                this.setItem(path, t);\r\n            } else {\r\n                this.setItem(path, content.toURL());\r\n            }\r\n            this.touch(path);\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, {includeTrashed:true});\r\n            assert.is(arguments,[Absolute]);\r\n            if (path==P.SEP) {\r\n                return {};\r\n            }\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return {};\r\n            }\r\n            var name=P.name(path);\r\n            assert.is(parent,P.AbsDir);\r\n            var pinfo=this.getDirInfo(parent);\r\n            return assert(pinfo[name]);\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            assert.is(arguments,[String,Object]);\r\n            this.assertWriteable(path);\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return;\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            var name=P.name(path);\r\n            pinfo[name]=info;\r\n            this.putDirInfo(parent, pinfo, pinfo[name].trashed);\r\n        },\r\n        mkdir: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n\t\t\tthis.touch(path);\r\n        },\r\n        opendir: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            //succ: iterator<string> // next()\r\n            // options: {includeTrashed:Boolean}\r\n            options=options||{};\r\n            var inf=this.getDirInfo(path);\r\n            var res=[]; //this.dirFromFstab(path);\r\n            for (var i in inf) {\r\n                assert(inf[i]);\r\n                if (!inf[i].trashed || options.includeTrashed) res.push(i);\r\n            }\r\n            return assert.is(res,Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            this.assertWriteable(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) {\r\n                throw new Error(path+\": cannot remove. It is root of this FS.\");\r\n            }\r\n            this.assertExist(path,{includeTrashed:options.noTrash });\r\n            if (P.isDir(path)) {\r\n                var lis=this.opendir(path);\r\n                if (lis.length>0) {\r\n                    this.err(path,\"Directory not empty\");\r\n                }\r\n                if (options.noTrash) {\r\n                    this.removeItem(path);\r\n                }\r\n            } else {\r\n                this.removeItem(path);\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            if (options.noTrash) {\r\n                this.removeEntryWithoutTrash(pinfo, parent, P.name(path) );\r\n            } else {\r\n                this.removeEntry(pinfo, parent, P.name(path) );\r\n            }\r\n        },\r\n        exists: function (path,options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            var name=P.name(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) return true;\r\n            var pinfo=this.getDirInfo(parent);\r\n            var res=pinfo[name];\r\n            if (res && res.trashed && this.itemExists(path)) {\r\n                if (this.isDir(path)) {\r\n\r\n                } else {\r\n                    //assert.fail(\"Inconsistent \"+path+\": trashed, but remains in storage\");\r\n                }\r\n            }\r\n            if (!res && this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": not exists in metadata, but remains in storage\");\r\n            }\r\n            if (res && !res.trashed && !res.link && !this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": exists in metadata, but not in storage\");\r\n            }\r\n            if (res && !options.includeTrashed) {\r\n                res=!res.trashed;\r\n            }\r\n            return !!res;\r\n        },\r\n        link: function(path, to, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertWriteable(path);\r\n            if (this.exists(path)) this.err(path,\"file exists\");\r\n            if (P.isDir(path) && !P.isDir(to)) {\r\n                this.err(path,\" can not link to file \"+to);\r\n            }\r\n            if (!P.isDir(path) && P.isDir(to)) {\r\n                this.err(path,\" can not link to directory \"+to);\r\n            }\r\n            var m={};//assert(this.getMetaInfo(path));\r\n            m.link=to;\r\n            m.lastUpdate=now();\r\n            this.setMetaInfo(path, m);\r\n            //console.log(this.getMetaInfo(path));\r\n            //console.log(this.storage);\r\n            //console.log(this.getMetaInfo(P.up(path)));\r\n            assert(this.exists(path));\r\n            assert(this.isLink(path));\r\n        },\r\n        isLink: function (path) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (!this.exists(path)) return null;\r\n            var m=assert(this.getMetaInfo(path));\r\n            return m.link;\r\n        },\r\n        touch: function (path) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n            if (!this.itemExists(path)) {\r\n                if (P.isDir(path)) {\r\n                    if (this.dirCache) this.dirCache[path]={};\r\n                    this.setItem(path,\"{}\");\r\n                } else {\r\n                    this.setItem(path,\"\");\r\n                }\r\n            }\r\n            var parent=up(path);\r\n            if (parent!=null) {\r\n                if (this.inMyFS(parent)) {\r\n                    var pinfo=this.getDirInfo(parent);\r\n                    this._touch(pinfo, parent , P.name(path), false);\r\n                } else {\r\n                    assert(this.getRootFS()!==this);\r\n                    this.getRootFS().resolveFS(parent).touch(parent);\r\n                }\r\n            }\r\n        },\r\n        getURL: function (path) {\r\n            return this.getContent(path).toURL();\r\n        },\r\n        opendirEx: function (path,options) {\r\n            assert.is(path,P.AbsDir);\r\n            options=options||{};\r\n            var res={};\r\n            var d=this.getDirInfo(path);\r\n            if (options.includeTrashed) {\r\n                //console.log(\"INCLTR\",d);\r\n                return d;\r\n            }\r\n            for (var k in d) {\r\n                if (d[k].trashed) continue;\r\n                res[k]=d[k];\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    return LSFS;\r\n\r\n});\r\n\r\n/**\r\n *\r\n * jquery.binarytransport.js\r\n *\r\n * @description. jQuery ajax transport for making binary data type requests.\r\n * @version 1.0\r\n * @author Henry Algus <henryalgus@gmail.com>\r\n *\r\n */\r\n\r\n// use this transport for \"binary\" data type\r\nif (typeof $!==\"undefined\")\r\n$.ajaxTransport(\"+binary\", function(options, originalOptions, jqXHR){\r\n    // check for conditions and support for blob / arraybuffer response type\r\n    if (window.FormData && ((options.dataType && (options.dataType == 'binary')) || (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) || (window.Blob && options.data instanceof Blob)))))\r\n    {\r\n        return {\r\n            // create new XMLHttpRequest\r\n            send: function(headers, callback){\r\n                // setup all variables\r\n                var xhr = new XMLHttpRequest(),\r\n                url = options.url,\r\n                type = options.type,\r\n                async = options.async || true,\r\n                // blob or arraybuffer. Default is blob\r\n                dataType = options.responseType || \"blob\",\r\n                data = options.data || null,\r\n                username = options.username || null,\r\n                password = options.password || null;\r\n\r\n                xhr.addEventListener('load', function(){\r\n                    var data = {};\r\n                    data[options.dataType] = xhr.response;\r\n                    // make callback and send data\r\n                    callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\r\n                });\r\n\r\n                xhr.open(type, url, async, username, password);\r\n\r\n                // setup custom headers\r\n                for (var i in headers ) {\r\n                    xhr.setRequestHeader(i, headers[i] );\r\n                }\r\n\r\n                xhr.responseType = dataType;\r\n                xhr.send(data);\r\n            },\r\n            abort: function(){\r\n                jqXHR.abort();\r\n            }\r\n        };\r\n    }\r\n});\r\n\r\ndefine(\"jquery.binarytransport\", function(){});\r\n\r\ndefine('WebFS',[\"FSClass\",\"jquery.binarytransport\",\"DeferredUtil\",\"Content\",\"PathUtil\"],\r\n        function (FS,j,DU,Content,P) {\r\n    // FS.mount(location.protocol+\"//\"+location.host+\"/\", \"web\");\r\n    var WebFS=function (){};\r\n    var p=WebFS.prototype=new FS;\r\n    FS.addFSType(\"web\", function () {\r\n        return new WebFS;\r\n    });\r\n    p.fstype=function () {return \"Web\";};\r\n    p.supportsSync=function () {return false;};\r\n    p.inMyFS=function (path) {\r\n        return P.isURL(path);\r\n    };\r\n    FS.delegateMethods(p, {\r\n        exists: function () {return true;},\r\n        getContentAsync: function (path){\r\n            var t=this;\r\n            return DU.promise(function (succ,err) {\r\n                $.get(path,function (blob) {\r\n                    var reader = new FileReader();\r\n                    reader.addEventListener(\"loadend\", function() {\r\n                        succ(Content.bin(reader.result, t.getContentType(path)));\r\n                    });\r\n                    reader.readAsArrayBuffer(blob);\r\n                },\"binary\").fail(err);\r\n            });\r\n        },\r\n        /*setContentAsync: function (path){\r\n\r\n        },*/\r\n        getURL: function (path) {\r\n            return path;\r\n        }\r\n    });\r\n\r\n    return WebFS;\r\n\r\n});\r\ndefine('Env',[\"assert\",\"PathUtil\"],function (A,P) {\r\n    var Env=function (value) {\r\n        this.value=value;\r\n    };\r\n    Env.prototype={\r\n            expand:function (str) {\r\n                A.is(str,String);\r\n                var t=this;\r\n                return str.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (a,key) {\r\n                    return t.get(key);\r\n                });\r\n            },\r\n            expandPath:function (path) {\r\n                A.is(path,String);\r\n                path=this.expand(path);\r\n                path=path.replace(/\\/+/g,\"/\");\r\n                path=path.replace(/^[a-z][a-z]+:\\//, function (r) { return r+\"/\"; } );\r\n                return A.is(path,P.Path);\r\n            },\r\n            get: function (key) {\r\n                return this.value[key];\r\n            },\r\n            set: function (key, value) {\r\n                this.value[key]=value;\r\n            }\r\n    };\r\n    return Env;\r\n});\r\ndefine('SFile',[\"extend\",\"assert\",\"PathUtil\",\"Util\",\"Content\",\"FSClass\",\"FileSaver\",\"DeferredUtil\"],\r\nfunction (extend,A,P,Util,Content,FSClass,saveAs,DU) {\r\n\r\nvar SFile=function (rootFS, path) {\r\n    A.is(path, P.Absolute);\r\n    //A(fs && fs.getReturnTypes, fs);\r\n    this._path=path;\r\n    this.rootFS=rootFS;\r\n    this.fs=rootFS.resolveFS(path);\r\n    /*this.act={};// path/fs after follwed symlink\r\n    this.act.path=this.fs.resolveLink(path);\r\n    this.act.fs=rootFS.resolveFS(this.act.path);\r\n    A.is(this.act, {fs:FSClass, path:P.Absolute});*/\r\n    if (this.isDir() && !P.isDir(path)) {\r\n        this._path+=P.SEP;\r\n    }\r\n};\r\nSFile.is=function (path) {\r\n    return path && typeof (path.isSFile)==\"function\" && path.isSFile();\r\n};\r\nfunction getPath(f) {\r\n    if (SFile.is(f)) {\r\n        return f.path();\r\n    } else {\r\n        A.is(f,P.Absolute);\r\n        return f;\r\n    }\r\n}\r\nSFile.prototype={\r\n    isSFile: function (){return true;},\r\n    setPolicy: function (p) {\r\n        if (this.policy) throw new Error(\"policy already set\");\r\n        this.policy=p;\r\n        return this._clone();\r\n    },\r\n    getPolicy: function (p) {\r\n        return this.policy;\r\n    },\r\n    _clone: function (){\r\n        return this._resolve(this.path());\r\n    },\r\n    _resolve: function (path, options) {\r\n        var res;\r\n        options=options||{};\r\n        if (SFile.is(path)) {\r\n            res=path;\r\n        } else {\r\n            A.is(path,P.Absolute);\r\n            var topdir;\r\n            var policy=options.policy || this.policy;\r\n            if (policy && (topdir=policy.topDir)) {\r\n                if (topdir.path) topdir=topdir.path();\r\n                if (!P.startsWith(path, topdir)) {\r\n                    throw new Error(path+\": cannot access. Restricted to \"+topdir);\r\n                }\r\n            }\r\n            res=new SFile(this.rootFS, path);\r\n            res.policy=policy;\r\n        }\r\n        if (res.policy) {\r\n            return Util.privatize(res);\r\n        } else {\r\n            return res;\r\n        }\r\n    },\r\n    contains: function (file) {\r\n        A(SFile.is(file),file+\" shoud be a SFile object.\");\r\n        if (!this.isDir()) return false;\r\n        return P.startsWith( file.path(), this.path());\r\n    },\r\n    path: function () {\r\n        return this._path;\r\n    },\r\n    name: function () {\r\n        return P.name(this.path());\r\n    },\r\n    truncExt: function (ext) {\r\n        return P.truncExt(this.path(),ext);\r\n    },\r\n    ext: function () {\r\n        return P.ext(this.path());\r\n    },\r\n    relPath: function (base) {\r\n        // base should be SFile or Path from rootFS\r\n        var bp=(base.path ?\r\n                base.path() :\r\n                base );\r\n        return P.relPath(this.path(), A.is(bp,P.Absolute) );\r\n    },\r\n    up: function () {\r\n        var pathR=this.path();\r\n        var pa=P.up(pathR);\r\n        if (pa==null) return null;\r\n        return this._resolve(pa);\r\n    },\r\n    rel: function (relPath) {\r\n        A.is(relPath, P.Relative);\r\n        this.assertDir();\r\n        var pathR=this.path();\r\n        return this._resolve(P.rel(pathR, relPath));\r\n    },\r\n    sibling: function (n) {\r\n        return this.up().rel(n);\r\n    },\r\n    startsWith: function (pre) {\r\n        return P.startsWith(this.name(),pre);\r\n    },\r\n    endsWith: function (post) {\r\n        return P.endsWith(this.name(),post);\r\n    },\r\n    equals:function (o) {\r\n        return (o && typeof o.path==\"function\" && o.path()==this.path());\r\n    },\r\n    toString:function (){\r\n        return this.path();\r\n    },\r\n    //Common\r\n    touch: function () {\r\n        return this.act.fs.touch(this.act.path);\r\n    },\r\n    isReadOnly: function () {\r\n        return this.act.fs.isReadOnly(this.act.path);\r\n    },\r\n    isTrashed:function () {\r\n        var m=this.metaInfo();\r\n        if (!m) return false;\r\n        return m.trashed;\r\n    },\r\n    metaInfo: function () {\r\n        if (arguments.length==0) {\r\n            return this.getMetaInfo.apply(this,arguments);\r\n        } else {\r\n            return this.setMetaInfo.apply(this,arguments);\r\n        }\r\n    },\r\n    getMetaInfo: function (options) {\r\n        return this.act.fs.getMetaInfo(this.act.path,options);\r\n    },\r\n    setMetaInfo: function (info, options) {\r\n        return this.act.fs.setMetaInfo(this.act.path,info, options);\r\n    },\r\n    getDirTree: function (options) {\r\n        return this.act.fs.getDirTree(this.act.path, options);\r\n    },\r\n    assertExists: function () {\r\n        A(this.exists(),this.path()+\" does not exist.\");\r\n    },\r\n    lastUpdate:function () {\r\n        this.assertExists();\r\n        return this.metaInfo().lastUpdate;\r\n    },\r\n    exists: function (options) {\r\n        var args=Array.prototype.slice.call(arguments);\r\n        if (typeof args[0]===\"function\") {\r\n            var f=args.shift();\r\n            return DU.resolve(this.exists.apply(this,args)).then(f);\r\n        }\r\n        options=options||{};\r\n        var p=this.fs.exists(this.path(),options);\r\n        if (p || options.noFollowLink) {\r\n            return p;\r\n        } else {\r\n            return this.act.fs.exists(this.act.path,{noFollowLink:true});\r\n        }\r\n    },\r\n    rm: function (options) {\r\n        //   ln /test/c /a/b/\r\n        //   rm a/b/c/\r\n        //   rm a/b/c/d\r\n        var t=this;\r\n        options=options||{};\r\n        if (this.isLink()) {\r\n            return DU.resolve(this.fs.rm(this.path(),options));\r\n        }\r\n        /*if (!this.exists({noFollowLink:true})) {\r\n            return this.act.fs.rm(this.act.path, options);\r\n        }*/\r\n        var a;\r\n        if (this.isDir() && (options.recursive||options.r)) {\r\n            a=this.each(function (f) {\r\n                return f.rm(options);\r\n            });\r\n        } else {\r\n            a=DU.resolve();\r\n        }\r\n        return a.then(function () {\r\n            return t.act.fs.rm(t.act.path, options);\r\n        });\r\n        //var pathT=this.path();\r\n        //this.fs.rm(pathT, options);\r\n    },\r\n    removeWithoutTrash: function (options) {\r\n        options=options||{};\r\n        options.noTrash=true;\r\n        this.rm(options);\r\n    },\r\n    isDir: function () {\r\n        return this.act.fs.isDir(this.act.path);\r\n    },\r\n    // File\r\n    text:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n\t\t\treturn this.getText(f);\r\n\t\t}\r\n        if (arguments.length>0) {\r\n            return this.setText(arguments[0]);\r\n        } else {\r\n            return this.getText();\r\n        }\r\n    },\r\n    setText:function (t) {\r\n        A.is(t,String);\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        var ct=this.contentType({def:null});\r\n        //if (this.isText()) {\r\n        if (ct!==null && !ct.match(/^text/) && Content.looksLikeDataURL(t)) {\r\n            // bad knowhow: if this is a binary file apparently, convert to URL\r\n            return DU.throwNowIfRejected(this.setContent(Content.url(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.url(t)));\r\n        } else {\r\n            // if use fs.setContentAsync, the error should be handled by .fail\r\n            // setText should throw error immediately (Why? maybe old style of text(\"foo\") did it so...)\r\n            return DU.throwNowIfRejected(this.setContent(Content.plainText(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.plainText(t)));\r\n        }\r\n    },\r\n    appendText:function (t) {\r\n        A.is(t,String);\r\n        //if (this.isText()) {\r\n        return this.act.fs.appendContent(this.act.path, Content.plainText(t));\r\n        /*} else {\r\n            throw new Error(\"append only for text file\");\r\n        }*/\r\n    },\r\n    getContent: function (f) {\r\n        if (typeof f==\"function\") {\r\n            return this.act.fs.getContentAsync(this.act.path).then(f);\r\n        }\r\n        return this.act.fs.getContent(this.act.path);\r\n    },\r\n    setContent: function (c) {\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        // why setContentAsync? AsyncDU.resolvesyncsync...PromiseJQ\r\n        // fs2/promise.js\r\n        return this.act.fs.setContentAsync(this.act.path,c);\r\n    },\r\n\r\n    getText:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n    \t\tvar t=this;\r\n    \t    return this.getContent(forceText).then(f);\r\n    \t}\r\n        return forceText(this.act.fs.getContent(this.act.path));\r\n        /*if (this.isText()) {\r\n            return this.act.fs.getContent(this.act.path).toPlainText();\r\n        } else {\r\n            return this.act.fs.getContent(this.act.path).toURL();\r\n        }*/\r\n        function forceText(c) {\r\n\t    \t//if (t.isText()) {\r\n            try {\r\n                return c.toPlainText();\r\n            } catch(e) {\r\n    \t    \treturn c.toURL();\r\n    \t    }\r\n        }\r\n    },\r\n    getDataURL: function (f) {\r\n        if (typeof f===\"function\") {\r\n            return this.getContent(function (c) {\r\n                return c.toURL();\r\n            });\r\n        }\r\n        return this.getContent().toURL();\r\n    },\r\n    setDataURL: function (u) {\r\n        return this.setContent(Content.url(u));\r\n    },\r\n    dataURL:function (d) {\r\n        if (typeof d===\"string\") return this.setDataURL(d);\r\n        if (typeof d===\"function\") return this.getDataURL(d);\r\n        return this.getDataURL();\r\n    },\r\n    isText: function () {\r\n        return this.act.fs.isText(this.act.path);\r\n    },\r\n    contentType: function (options) {\r\n        return this.act.fs.getContentType(this.act.path,options);\r\n    },\r\n    bytes: function (b) {\r\n        if (Content.isBuffer(b)) return this.setBytes(b);\r\n        return this.getBytes();\r\n    },\r\n    setBytes:function (b) {\r\n        return this.act.fs.setContent(this.act.path, Content.bin(b,this.contentType()));\r\n    },\r\n    getBytes:function (options) {\r\n        options=options||{};\r\n        return this.act.fs.getContent(this.act.path).toBin(options.binType);\r\n    },\r\n    getURL: function () {\r\n        return this.act.fs.getURL(this.act.path);\r\n    },\r\n    lines:function (lines) {\r\n        if (lines instanceof Array) {//WRITE\r\n            return this.text(lines.join(\"\\n\"));\r\n        } else if (typeof lines===\"function\") {//READ async\r\n            return this.text(function (r) {\r\n                return lines(r.replace(/\\r/g,\"\").split(\"\\n\"));\r\n            });\r\n        }\r\n        return this.text().replace(/\\r/g,\"\").split(\"\\n\");\r\n    },\r\n    obj: function () {\r\n        var file=this;\r\n        if (arguments.length==0) {\r\n            var t=file.text();\r\n            if (!t) return null;\r\n            return JSON.parse(t);\r\n        } else {\r\n            file.text(JSON.stringify(A.is(arguments[0],Object) ));\r\n        }\r\n    },\r\n    copyFrom: function (src, options) {\r\n        return src.copyTo(this,options);\r\n    },\r\n    copyTo: function (dst, options) {\r\n        A(dst && dst.isSFile(),dst+\" is not a file\");\r\n        var src=this;\r\n        var options=options||{};\r\n        var srcIsDir=src.isDir();\r\n        var dstIsDir=dst.isDir();\r\n        if (!srcIsDir && dstIsDir) {\r\n            dst=dst.rel(src.name());\r\n            A(!dst.isDir(), dst+\" is a directory.\");\r\n            dstIsDir=false;\r\n        }\r\n        if (srcIsDir && !dstIsDir) {\r\n           this.err(\"Cannot move dir \"+src.path()+\" to file \"+dst.path());\r\n        } else if (!srcIsDir && !dstIsDir) {\r\n            if (options.echo) options.echo(src+\" -> \"+dst);\r\n            var res=this.act.fs.cp(this.act.path, dst.getResolvedLinkPath(),options);\r\n            res=DU.resolve(res);\r\n            if (options.a) {\r\n                return res.then(function () {\r\n                    return dst.setMetaInfo(src.getMetaInfo());\r\n                });\r\n            }\r\n            return res;\r\n        } else {\r\n            A(srcIsDir && dstIsDir,\"Both src and dst should be dir\");\r\n            return src.each(function (s) {\r\n                var r;\r\n                var dstf=dst.rel(s.name());\r\n                if (options.progress) {\r\n                    r=options.progress(dstf,{src:s,dst:dstf});\r\n                }\r\n                return DU.resolve(r).then(function () {\r\n                    return dstf.copyFrom(s, options);\r\n                });\r\n            });\r\n        }\r\n        //file.text(src.text());\r\n        //if (options.a) file.metaInfo(src.metaInfo());\r\n    },\r\n    moveFrom: function (src, options) {\r\n        var t=this;\r\n        return t.exists(function (ex) {\r\n            return t.copyFrom(src,options).then(function () {\r\n                return src.rm({recursive:true});\r\n            },function (e) {\r\n                // rollback\r\n                if (!ex) return t.exists(function (ex) {\r\n                    if (ex) return t.rm({recursive:true});\r\n                }).then(function () {throw e;});\r\n                throw e;\r\n            });\r\n        });\r\n    },\r\n    moveTo: function (dst, options) {\r\n        return dst.moveFrom(this,options);\r\n    },\r\n    // Dir\r\n    assertDir:function () {\r\n        A.is(this.path(),P.Dir);\r\n        return this;\r\n    },\r\n    /*files:function (f,options) {\r\n        var dir=this.assertDir();\r\n        var res=[];\r\n        this.each(function (f) {\r\n            res.add(f);\r\n        },options);\r\n        return res;\r\n    },*/\r\n    each:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls,f);// ls.forEach(f)\r\n        });\r\n    },\r\n    eachrev:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls.reverse(),f);// ls.forEach(f)\r\n        });\r\n    },\r\n    recursive:function (fun,options) {\r\n        var dir=this.assertDir();\r\n        options=dir.convertOptions(options);\r\n        return dir.each(function (f) {\r\n            if (f.isDir()) return f.recursive(fun,options);\r\n            else return fun(f);\r\n        },options);\r\n    },\r\n    _listFiles:function (options,async) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        if (async) {\r\n            return this.act.fs.opendirAsync(this.act.path, options).\r\n            then(cvt);\r\n        } else {\r\n            return cvt( this.act.fs.opendir(this.act.path, options));\r\n        }\r\n        function cvt(di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        }\r\n    },\r\n    listFilesAsync:function (options) {\r\n        return this._listFiles(options,true);\r\n        /*\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        return this.act.fs.opendirAsync(this.act.path, options).\r\n        then(function (di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        });*/\r\n    },\r\n    listFiles:function (options) {\r\n        return this._listFiles(options,false);\r\n        /*var args=Array.prototype.slice.call(arguments);\r\n        return DU.assertResolved(this.listFilesAsync.apply(this,args));*/\r\n    },\r\n    ls:function (options) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        if (!options) {\r\n            return this.act.fs.opendir(this.act.path, options);\r\n        }\r\n        var res=dir.listFiles(options);\r\n        return res.map(function (f) {\r\n            return f.name();\r\n        });\r\n    },\r\n    convertOptions:function(o) {\r\n        var options=Util.extend({},o);\r\n        var dir=this.assertDir();\r\n        var pathR=this.path();\r\n        var excludes=options.excludes || {};\r\n        if (typeof excludes===\"function\") {\r\n            options.excludesF=excludes;\r\n        } else if (typeof excludes===\"object\") {\r\n            if (excludes instanceof Array) {\r\n                var nex={};\r\n                excludes.forEach(function (e) {\r\n                    if (P.startsWith(e,\"/\")) {\r\n                        nex[e]=1;\r\n                    } else {\r\n                        nex[pathR+e]=1;\r\n                    }\r\n                });\r\n                excludes=nex;\r\n            }\r\n            options.excludesF=function (f) {\r\n                return excludes[f.path()];\r\n            };\r\n        }\r\n        return A.is(options,{excludesF:Function});\r\n    },\r\n    mkdir: function () {\r\n        return this.touch();\r\n    },\r\n    link: function (to,options) {// % ln to path\r\n        if (this.exists()) throw new Error(this.path()+\": exists.\");\r\n        return this.act.fs.link(this.act.path,to.path(),options);\r\n    },\r\n    resolveLink:function () {\r\n        return this._resolve(this.act.path);\r\n    },\r\n    isLink: function () {\r\n        return this.fs.isLink(this.path());\r\n    },\r\n    getResolvedLinkPath: function () {\r\n        return this.act.path;\r\n    },\r\n    getFS:function () {\r\n        return this.act.fs;\r\n    },\r\n    observe: function (h) {\r\n        return this.getFS().getRootFS().addObserver(this.path(),h);\r\n    },\r\n    getBlob: function () {\r\n        return new Blob([this.bytes()],{type:this.contentType()});\r\n    },\r\n    setBlob: function (blob) {\r\n        var t=this;\r\n        return DU.promise(function (succ,err) {\r\n            var reader = new FileReader();\r\n            reader.addEventListener(\"loadend\", function() {\r\n                // reader.result contains the contents of blob as a typed array\r\n                DU.resolve(t.setBytes(reader.result)).then(succ);\r\n            });\r\n            reader.readAsArrayBuffer(blob);\r\n        });\r\n    },\r\n    size: function (f) {\r\n        if (!f) {\r\n            if (!this.isDir()) {\r\n                return this.act.fs.size(this.act.path);\r\n                //return this.getBytes().byteLength;\r\n            } else {\r\n                var sum=0;\r\n                this.each(function (f) {\r\n                    sum+=f.size();\r\n                });\r\n                return sum;\r\n            }\r\n        } else {\r\n            //TODO: async\r\n        }\r\n    },\r\n    download: function () {\r\n        if (this.isDir()) throw new Error(this+\": Download dir is not support yet. Use 'zip' instead.\");\r\n        saveAs(this.getBlob(),this.name());;\r\n    },\r\n    err: function () {\r\n        var a=Array.prototype.slice.call(arguments);\r\n        console.log.apply(console,a);\r\n        throw new Error(a.join(\"\"));\r\n    },\r\n    exportAsObject: function (options) {\r\n        var base=this;\r\n        var data={};\r\n        this.recursive(function (f) {\r\n            data[f.relPath(base)]=f.text();\r\n        },options);\r\n        var req={base:base.path(),data:data};\r\n        return req;\r\n    },\r\n    importFromObject: function (data, options) {\r\n        if (typeof data===\"string\") data=JSON.parse(data);\r\n        var data=data.data;\r\n        for (var k in data) {\r\n            this.rel(k).text(data[k]);\r\n        }\r\n    },\r\n    watch: function (_1,_2) {\r\n        var options={},handler=function(){};\r\n        if (typeof _1===\"object\") options=_1;\r\n        if (typeof _2===\"object\") options=_2;\r\n        if (typeof _1===\"function\") handler=_1;\r\n        if (typeof _2===\"function\") handler=_2;\r\n        var rfs=this.getFS().getRootFS();\r\n        //var t=this;\r\n        rfs.addObserver(this.path(),function (path, meta) {\r\n            handler(meta.eventType, rfs.get(path),meta );\r\n        });\r\n    }\r\n};\r\nObject.defineProperty(SFile.prototype,\"act\",{\r\n    get: function () {\r\n        if (this._act) return this._act;\r\n        this._act={};// path/fs after follwed symlink\r\n        this._act.path=this.fs.resolveLink(this._path);\r\n        this._act.fs=this.rootFS.resolveFS(this._act.path);\r\n        A.is(this._act, {fs:FSClass, path:P.Absolute});\r\n        return this._act;\r\n    }\r\n});\r\n\r\nreturn SFile;\r\n});\r\n\r\ndefine('RootFS',[\"assert\",\"FSClass\",\"PathUtil\",\"SFile\"], function (assert,FS,P,SFile) {\r\n    var RootFS=function (defaultFS){\r\n        assert.is(defaultFS,FS);\r\n        this.mount(null, defaultFS);\r\n    };\r\n    var dst=RootFS.prototype;\r\n    var p={\r\n            err: function (path, mesg) {\r\n                throw new Error(path+\": \"+mesg);\r\n            },\r\n            // mounting\r\n            fstab: function () {\r\n                return this._fstab=this._fstab||[];//[{fs:this, path:P.SEP}];\r\n            },\r\n            unmount: function (path, options) {\r\n                assert.is(arguments,[P.AbsDir] );\r\n                var t=this.fstab();\r\n                console.log(t);\r\n                for (var i=0; i<t.length; i++) {\r\n                    if (t[i].mountPoint==path) {\r\n                        t.splice(i,1);\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            availFSTypes:function (){\r\n                return FS.availFSTypes();\r\n            },\r\n            mount: function (path, fs, options) {\r\n                if (typeof fs==\"string\") {\r\n                    var fact=assert( FS.availFSTypes()[fs] ,\"fstype \"+fs+\" is undefined.\");\r\n                    fs=fact(path, options||{});\r\n                }\r\n                assert.is(fs,FS);\r\n                fs.mounted(this, path);\r\n                this.fstab().unshift(fs);\r\n            },\r\n            resolveFS:function (path, options) {\r\n                assert.is(path,P.Absolute);\r\n                var res;\r\n                this.fstab().forEach(function (fs) {\r\n                    if (res) return;\r\n                    if (fs.inMyFS(path)) {\r\n                        res=fs;\r\n                    }\r\n                });\r\n                if (!res) this.err(path,\"Cannot resolve\");\r\n                return assert.is(res,FS);\r\n            },\r\n            get: function (path) {\r\n                assert.is(path,P.Absolute);\r\n                return new SFile(this.resolveFS(path), path);\r\n            },\r\n            addObserver: function (_1,_2,_3) {\r\n                this.observers=this.observers||[];\r\n                var options={},path,f;\r\n                if (typeof _1===\"string\") path=_1;\r\n                if (typeof _2===\"string\") path=_2;\r\n                if (typeof _3===\"string\") path=_3;\r\n                if (typeof _1===\"object\") options=_1;\r\n                if (typeof _2===\"object\") options=_2;\r\n                if (typeof _3===\"object\") options=_3;\r\n                if (typeof _1===\"function\") f=_1;\r\n                if (typeof _2===\"function\") f=_2;\r\n                if (typeof _3===\"function\") f=_3;\r\n                assert.is(path,String);\r\n                assert.is(f,Function);\r\n                var fs=this.resolveFS(path);\r\n                var remover=fs.onAddObserver(path,options);\r\n                var observers=this.observers;\r\n                var observer={\r\n                    path:path,\r\n                    handler:f,\r\n                    remove: function () {\r\n                        var i=observers.indexOf(this);\r\n                        observers.splice(i,1);\r\n                        if (remover) remover.remove();\r\n                    }\r\n                };\r\n                this.observers.push(observer);\r\n                return observer;\r\n            },\r\n            notifyChanged: function (path,metaInfo) {\r\n                if (!this.observers) return;\r\n                this.observers.forEach(function (ob) {\r\n                    if (P.isChildOf(path,ob.path)) {\r\n                        ob.handler(path,metaInfo);\r\n                    }\r\n                });\r\n            },\r\n            getRootFS:function () {\r\n                return this;\r\n            }\r\n    };\r\n    for (var i in p) {\r\n        dst[i]=p[i];\r\n    }\r\n    return RootFS;\r\n});\r\n\r\ndefine('zip',[\"SFile\",/*\"jszip\",*/\"FileSaver\",\"Util\",\"DeferredUtil\"],\r\nfunction (SFile,/*JSZip,*/fsv,Util,DU) {\r\n    var zip={};\r\n    zip.setJSZip=function (JSZip) {\r\n        zip.JSZip=JSZip;\r\n        if (!DU.external.Promise) {\r\n            DU.external.Promise=JSZip.external.Promise;\r\n        }\r\n    };\r\n    if (typeof JSZip!==\"undefined\") zip.setJSZip(JSZip);\r\n    zip.zip=function (dir,dstZip,options) {\r\n        if (!SFile.is(dstZip)) options=dstZip;\r\n        options=options||{};\r\n        var jszip = new zip.JSZip();\r\n        function loop(dst, dir) {\r\n            return dir.each(function (f) {\r\n                var r=DU.resolve();\r\n                if (options.progress) {\r\n                    r=options.progress(f);\r\n                }\r\n                return r.then(function () {\r\n                    if (f.isDir()) {\r\n                        var sf=dst.folder(f.name().replace(/[\\/\\\\]$/,\"\"));\r\n                        return loop(sf, f);\r\n                    } else {\r\n                        return f.getContent(function (c) {\r\n                            dst.file(f.name(),c.toArrayBuffer());\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return loop(jszip, dir).then(function () {\r\n            return DU.resolve(jszip.generateAsync({\r\n                type:\"arraybuffer\",\r\n                compression:\"DEFLATE\"\r\n            }));\r\n        }).then(function (content) {\r\n            //console.log(\"zip.con\",content);\r\n            if (SFile.is(dstZip)) {\r\n                return dstZip.setBytes(content);\r\n            } else {\r\n                saveAs(\r\n                    new Blob([content],{type:\"application/zip\"}),\r\n                    dir.name().replace(/[\\/\\\\]$/,\"\")+\".zip\"\r\n                );\r\n            }\r\n        });\r\n    };\r\n    zip.unzip=function (arrayBuf,destDir,options) {\r\n        var c;\r\n        var status={};\r\n        options=options||{};\r\n        if (SFile.is(arrayBuf)) {\r\n        \tc=arrayBuf.getContent();\r\n        \tarrayBuf=c.toArrayBuffer();\r\n        }\r\n        if (!options.onCheckFile) {\r\n            options.onCheckFile=function (f) {\r\n                if (options.overwrite) {\r\n                    return f;\r\n                } else {\r\n                    if (f.exists()) {\r\n                        return false;\r\n                    }\r\n                    return f;\r\n                }\r\n            };\r\n        }\r\n        var jszip=new zip.JSZip();\r\n        return DU.resolve(jszip.loadAsync(arrayBuf)).then(function () {\r\n            return DU.each(jszip.files,function (key,zipEntry) {\r\n                //var zipEntry=jszip.files[i];\r\n                var buf,dest;\r\n                return DU.resolve(zipEntry.async(\"arraybuffer\")).then(function (_buf) {\r\n                    buf=_buf;\r\n                    dest=destDir.rel(zipEntry.name);\r\n                    if (options.progress) {\r\n                        return DU.resolve(options.progress(dest));\r\n                    }\r\n                }).then(function () {\r\n                    console.log(\"Inflating\",zipEntry.name);\r\n                    if (dest.isDir()) return;\r\n                    var s={\r\n                        file:dest,\r\n                        status:\"uploaded\"\r\n                    };\r\n                    status[dest.path()]=s;\r\n                    var c=FS.Content.bin( buf, dest.contentType() );\r\n                    var res=options.onCheckFile(dest,c);\r\n                    if (res===false) {\r\n                        s.status=\"cancelled\";\r\n                        dest=null;\r\n                    }\r\n                    if (SFile.is(res)) {\r\n                        if (dest.path()!==res.path()) s.redirectedTo=res;\r\n                        dest=res;\r\n                    }\r\n                    if (dest) return dest.setContent(c);\r\n                });\r\n            });\r\n        }).then(function () {\r\n            console.log(\"unzip done\",status);\r\n            return status;\r\n        });\r\n    };\r\n    return zip;\r\n});\r\n\r\n/*(function (global, factory) {\r\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\r\n\ttypeof define === 'function' && define.amd ? define(factory) :\r\n\t(factory());\r\n}(this, (function () { 'use strict';*/\r\n// modified from https://github.com/taylorhakes/promise-polyfill/blob/master/dist/polyfill.js\r\n// if promise resolved immediately, it will run f of then(f)\r\n// P.resolve(5).then(e=>console.log(e)); console.log(3)  ->  show 5 3, while original is 3 5\r\ndefine('promise',[], function() {\r\n\r\n/**\r\n * @this {Promise}\r\n */\r\nfunction finallyConstructor(callback) {\r\n  var constructor = this.constructor;\r\n  return this.then(\r\n    function(value) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        return value;\r\n      });\r\n    },\r\n    function(reason) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        // @ts-ignore\r\n        return constructor.reject(reason);\r\n      });\r\n    }\r\n  );\r\n}\r\n\r\n// Store setTimeout reference so promise-polyfill will be unaffected by\r\n// other code modifying setTimeout (like sinon.useFakeTimers())\r\nvar setTimeoutFunc = setTimeout;\r\n\r\nfunction isArray(x) {\r\n  return Boolean(x && typeof x.length !== 'undefined');\r\n}\r\n\r\nfunction noop() {}\r\n\r\n// Polyfill for Function.prototype.bind\r\nfunction bind(fn, thisArg) {\r\n  return function() {\r\n    fn.apply(thisArg, arguments);\r\n  };\r\n}\r\n\r\n/**\r\n * @constructor\r\n * @param {Function} fn\r\n */\r\nfunction Promise(fn) {\r\n  if (!(this instanceof Promise))\r\n    throw new TypeError('Promises must be constructed via new');\r\n  if (typeof fn !== 'function') throw new TypeError('not a function');\r\n  /** @type {!number} */\r\n  this._state = 0;\r\n  /** @type {!boolean} */\r\n  this._handled = false;\r\n  /** @type {Promise|undefined} */\r\n  this._value = undefined;\r\n  /** @type {!Array<!Function>} */\r\n  this._deferreds = [];\r\n\r\n  doResolve(fn, this);\r\n}\r\n\r\nfunction handle(self, deferred) {\r\n  while (self._state === 3) {\r\n    self = self._value;\r\n  }\r\n  if (self._state === 0) {\r\n    self._deferreds.push(deferred);\r\n    return;\r\n  }\r\n  self._handled = true;\r\n  Promise._immediateFn(function() {\r\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n    if (cb === null) {\r\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n      return;\r\n    }\r\n    var ret;\r\n    try {\r\n      ret = cb(self._value);\r\n    } catch (e) {\r\n      reject(deferred.promise, e);\r\n      return;\r\n    }\r\n    resolve(deferred.promise, ret);\r\n  });\r\n}\r\n\r\nfunction resolve(self, newValue) {\r\n  try {\r\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n    if (newValue === self)\r\n      throw new TypeError('A promise cannot be resolved with itself.');\r\n    if (\r\n      newValue &&\r\n      (typeof newValue === 'object' || typeof newValue === 'function')\r\n    ) {\r\n      var then = newValue.then;\r\n      if (newValue instanceof Promise) {\r\n        self._state = 3;\r\n        self._value = newValue;\r\n        finale(self);\r\n        return;\r\n      } else if (typeof then === 'function') {\r\n        doResolve(bind(then, newValue), self);\r\n        return;\r\n      }\r\n    }\r\n    self._state = 1;\r\n    self._value = newValue;\r\n    finale(self);\r\n  } catch (e) {\r\n    reject(self, e);\r\n  }\r\n}\r\n\r\nfunction reject(self, newValue) {\r\n  self._state = 2;\r\n  self._value = newValue;\r\n  finale(self);\r\n}\r\n\r\nfunction finale(self) {\r\n  if (self._state === 2 && self._deferreds.length === 0) {\r\n    Promise._immediateFn(function() {\r\n      if (!self._handled) {\r\n        Promise._unhandledRejectionFn(self._value);\r\n      }\r\n    });\r\n  }\r\n\r\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n    handle(self, self._deferreds[i]);\r\n  }\r\n  self._deferreds = null;\r\n}\r\n\r\n/**\r\n * @constructor\r\n */\r\nfunction Handler(onFulfilled, onRejected, promise) {\r\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n  this.promise = promise;\r\n}\r\n\r\n/**\r\n * Take a potentially misbehaving resolver function and make sure\r\n * onFulfilled and onRejected are only called once.\r\n *\r\n * Makes no guarantees about asynchrony.\r\n */\r\nfunction doResolve(fn, self) {\r\n  var done = false;\r\n  try {\r\n    fn(\r\n      function(value) {\r\n        if (done) return;\r\n        done = true;\r\n        resolve(self, value);\r\n      },\r\n      function(reason) {\r\n        if (done) return;\r\n        done = true;\r\n        reject(self, reason);\r\n      }\r\n    );\r\n  } catch (ex) {\r\n    if (done) return;\r\n    done = true;\r\n    reject(self, ex);\r\n  }\r\n}\r\n\r\nPromise.prototype['catch'] = function(onRejected) {\r\n  return this.then(null, onRejected);\r\n};\r\n\r\nPromise.prototype.then = function(onFulfilled, onRejected) {\r\n  // @ts-ignore\r\n  var prom = new this.constructor(noop);\r\n\r\n  handle(this, new Handler(onFulfilled, onRejected, prom));\r\n  return prom;\r\n};\r\n\r\nPromise.prototype['finally'] = finallyConstructor;\r\n\r\nPromise.all = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.all accepts an array'));\r\n    }\r\n\r\n    var args = Array.prototype.slice.call(arr);\r\n    if (args.length === 0) return resolve([]);\r\n    var remaining = args.length;\r\n\r\n    function res(i, val) {\r\n      try {\r\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n          var then = val.then;\r\n          if (typeof then === 'function') {\r\n            then.call(\r\n              val,\r\n              function(val) {\r\n                res(i, val);\r\n              },\r\n              reject\r\n            );\r\n            return;\r\n          }\r\n        }\r\n        args[i] = val;\r\n        if (--remaining === 0) {\r\n          resolve(args);\r\n        }\r\n      } catch (ex) {\r\n        reject(ex);\r\n      }\r\n    }\r\n\r\n    for (var i = 0; i < args.length; i++) {\r\n      res(i, args[i]);\r\n    }\r\n  });\r\n};\r\n\r\nPromise.resolve = function(value) {\r\n  if (value && typeof value === 'object' && value.constructor === Promise) {\r\n    return value;\r\n  }\r\n\r\n  return new Promise(function(resolve) {\r\n    resolve(value);\r\n  });\r\n};\r\n\r\nPromise.reject = function(value) {\r\n  return new Promise(function(resolve, reject) {\r\n    reject(value);\r\n  });\r\n};\r\n\r\nPromise.race = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.race accepts an array'));\r\n    }\r\n\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n      Promise.resolve(arr[i]).then(resolve, reject);\r\n    }\r\n  });\r\n};\r\n\r\n// Use polyfill for setImmediate for performance gains\r\nPromise._immediateFn = function (fn) {fn();};/*\r\n  // @ts-ignore\r\n  (typeof setImmediate === 'function' &&\r\n    function(fn) {\r\n      // @ts-ignore\r\n      setImmediate(fn);\r\n    }) ||\r\n  function(fn) {\r\n    setTimeoutFunc(fn, 0);\r\n  };\r\n*/\r\n\r\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(/*err*/) {\r\n  if (typeof console !== 'undefined' && console) {\r\n    //console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\r\n  }\r\n};\r\n/** @suppress {undefinedVars} */\r\n/*\r\nvar globalNS = (function() {\r\n  // the only reliable means to get the global object is\r\n  // `Function('return this')()`\r\n  // However, this causes CSP violations in Chrome apps.\r\n  if (typeof self !== 'undefined') {\r\n    return self;\r\n  }\r\n  if (typeof window !== 'undefined') {\r\n    return window;\r\n  }\r\n  if (typeof global !== 'undefined') {\r\n    return global;\r\n  }\r\n  throw new Error('unable to locate global object');\r\n})();\r\n\r\nif (!('Promise' in globalNS)) {\r\n  globalNS['Promise'] = Promise;\r\n} else if (!globalNS.Promise.prototype['finally']) {\r\n  globalNS.Promise.prototype['finally'] = finallyConstructor;\r\n}*/\r\nreturn Promise;\r\n});\r\n\r\ndefine('FS',[\"FSClass\",\"NativeFS\",\"LSFS\", \"WebFS\", \"PathUtil\",\"Env\",\"assert\",\"SFile\",\"RootFS\",\"Content\",\"zip\",\"DeferredUtil\",\"promise\"],\r\n        function (FSClass,NativeFS,LSFS,WebFS, P,Env,A,SFile,RootFS,Content,zip,DU,PR) {\r\n    var FS={};\r\n    FS.assert=A;\r\n    FS.Content=Content;\r\n    FS.Class=FSClass;\r\n    FS.DeferredUtil=DU;\r\n    if (!DU.config.useJQ) {\r\n        DU.external.Promise=PR;\r\n    }\r\n    FS.Env=Env;\r\n    FS.LSFS=LSFS;\r\n    FS.NativeFS=NativeFS;\r\n    FS.PathUtil=P;\r\n    FS.RootFS=RootFS;\r\n    FS.SFile=SFile;\r\n    FS.WebFS=WebFS;\r\n    FS.zip=zip;\r\n    //if (zip.JSZip) DU.external.Promise=zip.JSZip.external.Promise;\r\n    if (typeof window==\"object\") window.FS=FS;\r\n    var rootFS;\r\n    var env=new Env({});\r\n    FS.addFSType=FSClass.addFSType;\r\n    FS.availFSTypes=FSClass.availFSTypes;\r\n\r\n    FS.setEnvProvider=function (e) {\r\n        env=e;\r\n    };\r\n    FS.getEnvProvider=function () {\r\n        return env;\r\n    };\r\n    FS.setEnv=function (key, value) {\r\n        if (typeof key==\"object\") {\r\n            for (var k in key) {\r\n                env.set(k,key[k]);\r\n            }\r\n        }else {\r\n            env.set(key,value);\r\n        }\r\n    };\r\n    FS.getEnv=function (key) {\r\n        if (typeof key==\"string\") {\r\n            return env.get(key);\r\n        }else {\r\n            return env.value;\r\n        }\r\n    };\r\n    FS.init=function (fs) {\r\n        if (rootFS) return;\r\n        if (!fs) {\r\n            if (NativeFS.available) {\r\n                fs=new NativeFS();\r\n            } else if (typeof localStorage===\"object\") {\r\n                fs=new LSFS(localStorage);\r\n            } else if (typeof importScripts===\"function\") {\r\n                // Worker\r\n                /* global self*/\r\n                self.addEventListener(\"message\", function (e) {\r\n                    var data=e.data;\r\n                    if (typeof data===\"string\") {\r\n                        data=JSON.parse(data);\r\n                    }\r\n                    switch(data.type) {\r\n                    case \"upload\":\r\n                        FS.get(data.base).importFromObject(data.data);\r\n                        break;\r\n                    case \"observe\":\r\n                        rootFS.observe(data.path, function (path,meta) {\r\n                            self.postMessage(JSON.stringify({\r\n                                type: \"changed\",\r\n                                path: path,\r\n                                content: FS.get(path).text(),\r\n                                meta: meta\r\n                            }));\r\n                        });\r\n                        break;\r\n                    }\r\n                });\r\n                fs=LSFS.ramDisk();\r\n            }\r\n        }\r\n        rootFS=new RootFS(fs);\r\n    };\r\n    FS.getRootFS=function () {\r\n        FS.init();\r\n        return rootFS;\r\n    };\r\n    FS.get=function () {\r\n        FS.init();\r\n        return rootFS.get.apply(rootFS,arguments);\r\n    };\r\n    FS.expandPath=function () {\r\n        return env.expandPath.apply(env,arguments);\r\n    };\r\n    FS.resolve=function (path, base) {\r\n        FS.init();\r\n        if (SFile.is(path)) return path;\r\n        path=env.expandPath(path);\r\n        if (base && !P.isAbsolutePath(path)) {\r\n            base=env.expandPath(base);\r\n            return FS.get(base).rel(path);\r\n        }\r\n        return FS.get(path);\r\n    };\r\n    FS.mount=function () {\r\n        FS.init();\r\n        return rootFS.mount.apply(rootFS,arguments);\r\n    };\r\n    FS.unmount=function () {\r\n        FS.init();\r\n        return rootFS.unmount.apply(rootFS,arguments);\r\n    };\r\n    FS.isFile=function (f) {\r\n        return SFile.is(f);\r\n    };\r\n    return FS;\r\n});\r\n\r\n//-----------\r\n\tvar resMod;\r\n\trequirejs([\"FS\"], function (r) {\r\n\t  resMod=r;\r\n\t});\r\n\tif (typeof window!==\"undefined\" && window.FS===undefined) window.FS=resMod;\r\n\tif (typeof module!==\"undefined\") module=resMod;\r\n\treturn resMod;\r\n});\r\n//})(window);\r\n\ndefine('PathUtil',[\"FS\"],function (FS){return FS.PathUtil;});\r\n\ndefine('FileList',['require','exports','module','FS'],function(require,exports,module) {\r\nconst FS=require(\"FS\");\r\nmodule.exports=function FileList(elem, options) {\r\n    var _curDir=null;\r\n    var _curFile=null;\r\n    var _mod=false;\r\n    var selbox=elem[0].tagName.toLowerCase()==\"select\";\r\n    //console.log(elem);\r\n    if (!options) options={};\r\n    var FL={select:select, ls:ls, on:(options.on?options.on:{}), curFile:curFile, curDir: curDir,\r\n    \t\tsetModified:setModified, isModified:isModified};\r\n    var path=$(\"<div>\");\r\n    var items=$(\"<div>\");\r\n    if (!selbox) elem.append(path).append(items);\r\n    else elem.change(function () {\r\n        if(this.value) select(FS.get(this.value));\r\n    });\r\n    function item(f) {\r\n    \tvar res=$();\r\n    \tif (!f) return res;\r\n    \tvar fn=f.path();\r\n    \titems.find(selbox?\"option\":\"span\").each(function () {\r\n    \t\tvar t=$(this);\r\n    \t\tif ( t.data(\"filename\")==fn) {\r\n    \t\t\tres=t;\r\n    \t\t}\r\n    \t});\r\n    \treturn res;\r\n    }\r\n    function select(f) {\r\n        if (FL.on.select && FL.on.select(f)) return;\r\n        if (!f) return;\r\n        _mod=false;\r\n        if (f.isDir()) {\r\n            //_curFile=null;\r\n            ls(f);\r\n        } else {\r\n            var nDir=f.up();\r\n            if (_curDir.path()!=nDir.path() ) {\r\n                _curFile=f;\r\n                ls(nDir);\r\n            } else {\r\n                item(_curFile).removeClass(\"selected\");\r\n                _curFile=f;\r\n                item(_curFile).addClass(\"selected\");\r\n            }\r\n        }\r\n    }\r\n    function setModified(m) {\r\n    \tif (!_curFile) return;\r\n    \t_mod=m;\r\n       \titem(_curFile).text(itemText(_curFile,m));\r\n    }\r\n    function isModified() {\r\n    \treturn _mod;\r\n    }\r\n    function ls(dir) {\r\n        if (typeof dir==\"string\") dir=FS.get(dir);\r\n        if (dir) {\r\n            _curDir=dir;\r\n            path.text(dir.name()).attr({title:dir.path()});\r\n        }\r\n        if (!_curDir) return;\r\n        if (!_curDir.isDir()) return;\r\n        items.empty();\r\n        var wait=$(\"<div>\").text(\"Wait..\");\r\n        items.append(wait);\r\n        if (selbox) {\r\n            elem.empty();\r\n            elem.append($(\"<option>\").text(\"Select...\"));\r\n        }\r\n        var p=_curDir.up();\r\n        if (p && !_curDir.equals(options.topDir)) {\r\n            if (selbox) {\r\n                elem.append($(\"<option>\").\r\n                        attr(\"value\",p.path()).\r\n                        text(\"[Up]\")\r\n                );\r\n            } else {\r\n                $(selbox?\"<option>\":\"<li>\").append(\r\n                        $(\"<span>\").addClass(\"fileItem\").text(\"[Up]\")\r\n                ).appendTo(items).click(function () {\r\n                    select(p);\r\n                });\r\n            }\r\n        }\r\n        if (_curFile && !_curFile.exists()) {\r\n            _curFile=null;\r\n        }\r\n        var i=0;\r\n        var dirs=_curDir.listFiles();\r\n        if (dirs.length>0) setTimeout(lp,0);\r\n        else wait.remove();\r\n        function lp() {\r\n            if (i==0) wait.remove();\r\n            var f=dirs[i++];\r\n            if (i<dirs.length) setTimeout(lp,0);\r\n            var n=displayName(f);\r\n            if (!n) return;\r\n            var isCur=_curFile && _curFile.path()==f.path();\r\n            if (selbox) {\r\n                elem.append($(\"<option>\").\r\n                        attr(\"value\",f.path()).\r\n                        text(itemText(f))\r\n                );\r\n            } else {\r\n                var s=$(\"<span>\").addClass(\"fileItem\").text(itemText(f)).data(\"filename\",f.path());\r\n                if (isCur) { s.addClass(\"selected\");}\r\n                //console.log(\"Add file item \",f,selbox);\r\n                $(\"<li>\").append(s).appendTo(items).click(function () {\r\n                    select(f);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    function itemText(f, mod) {\r\n    \treturn (mod?\"*\":\"\")+(f.isReadOnly()?\"[RO]\":\"\")+displayName(f);\r\n    }\r\n    function displayName(f) {\r\n        if (FL.on.displayName) return FL.on.displayName.apply(FL, arguments );\r\n        return f.name();\r\n    }\r\n    function curFile() {\r\n        return _curFile;\r\n    }\r\n    function curDir() {\r\n        return _curDir;\r\n    }\r\n    return FL;\r\n};\r\n});\r\n\ndefine('exceptionCatcher',[], function () {\r\n    var res={};\r\n    res.f=function (f) {\r\n        if (typeof f==\"function\") {\r\n            if (f.isTrcf) return f;\r\n            var r=function () {\r\n                if (res.handleException && !res.enter) {\r\n                    try {\r\n                        res.enter=true;\r\n                        return f.apply(this,arguments);\r\n                    } catch (e) {\r\n                        res.handleException(e);\r\n                    } finally {\r\n                        res.enter=false;\r\n                    }\r\n                } else {\r\n                    return f.apply(this,arguments);\r\n                }\r\n            };\r\n            r.isTrcf=true;\r\n            return r;\r\n        } else if(typeof f==\"object\") {\r\n            for (var k in f) {\r\n                f[k]=res.f(f[k]);\r\n            }\r\n            return f;\r\n        }\r\n    };\r\n    //res.handleException=function (){};\r\n    return res;\r\n});\ndefine('UI',[\"Util\",\"exceptionCatcher\"],function (Util, EC) {\r\n    var UI={};\r\n    var F=EC.f;\r\n    UI=function () {\r\n        var expr=[];\r\n        for (var i=0 ; i<arguments.length ; i++) {\r\n            expr[i]=arguments[i];\r\n        }\r\n        var listeners=[];\r\n        var $vars={};\r\n        var $edits=[];\r\n        var res=parse(expr);\r\n        res.$edits=$edits;\r\n        res.$vars=$vars;\r\n        $.data(res,\"edits\",$edits);\r\n        $.data(res,\"vars\",$vars);\r\n        $edits.load=function (model) {\r\n            $edits.model=model;\r\n            $edits.forEach(function (edit) {\r\n                $edits.writeToJq(edit.params.$edit, edit.jq);\r\n            });\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.writeToJq=function ($edit, jq) {\r\n        \tvar m=$edits.model;\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                m=m[a[i]];\r\n            }\r\n            m=$edit.type.toVal(m);\r\n            if (jq.attr(\"type\")==\"checkbox\") {\r\n                jq.prop(\"checked\",!!m);\r\n            } else {\r\n                jq.val(m);\r\n            }\r\n        };\r\n        $edits.validator={\r\n       \t\terrors:{},\r\n       \t\tshow: function () {\r\n       \t\t\tif ($vars.validationMessage) {\r\n       \t\t\t\t$vars.validationMessage.empty();\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\t$vars.validationMessage.append(UI(\"div\", this.errors[name].mesg));\r\n       \t\t\t\t}\r\n       \t\t\t}\r\n       \t\t\tif ($vars.OKButton) {\r\n       \t\t\t\tvar ok=true;\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\tok=false;\r\n       \t\t\t\t}\r\n       \t\t\t\t$vars.OKButton.attr(\"disabled\", !ok);\r\n       \t\t\t}\r\n       \t\t},\r\n       \t\ton: {\r\n       \t\t\tvalidate: function () {}\r\n       \t\t},\r\n       \t\taddError: function (name, mesg, jq) {\r\n       \t\t\tthis.errors[name]={mesg:mesg, jq:jq};\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tremoveError: function (name) {\r\n       \t\t\tdelete this.errors[name];\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tallOK: function () {\r\n       \t\t\tfor (var i in this.errors) {\r\n       \t\t\t\tdelete this.errors[i];\r\n       \t\t\t}\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tisValid: function () {\r\n       \t\t    var res=true;\r\n       \t\t    for (var i in this.errors) res=false;\r\n       \t\t    return res;\r\n       \t\t}\r\n        };\r\n        $edits.writeToModel=function ($edit, val ,jq) {\r\n            var m=$edits.model;\r\n        \t//console.log($edit, m);\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            try {\r\n                val=$edit.type.fromVal(val);\r\n            } catch (e) {\r\n            \t$edits.validator.addError(name, e, jq);\r\n            \t//$edits.validator.errors[name]={mesg:e, jq:jq};\r\n                //$edits.validator.change(name, e, jq);\r\n                return;\r\n            }\r\n            $edits.validator.removeError(name);\r\n            /*\r\n            if ($edits.validator.errors[name]) {\r\n                delete $edits.validator.errors[name];\r\n                $edits.validator.change(name, null, jq);\r\n            }*/\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                if (i==a.length-1) {\r\n                    if ($edits.on.writeToModel(name,val)) {\r\n\r\n                    } else {\r\n                        m[a[i]]=val;\r\n                    }\r\n                } else {\r\n                    m=m[a[i]];\r\n                }\r\n            }\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.on={};\r\n        $edits.on.writeToModel= function (name, val) {};\r\n\r\n        if (listeners.length>0) {\r\n            setTimeout(F(l),50);\r\n        }\r\n        function l() {\r\n            listeners.forEach(function (li) {\r\n                li();\r\n            });\r\n            setTimeout(F(l),50);\r\n        }\r\n        return res;\r\n        function parse(expr) {\r\n            if (expr instanceof Array) return parseArray(expr);\r\n            else if (typeof expr==\"string\") return parseString(expr);\r\n            else return expr;\r\n        }\r\n        function parseArray(a) {\r\n            var tag=a[0];\r\n            var i=1;\r\n            var res=$(\"<\"+tag+\">\");\r\n            if (typeof a[i]==\"object\" && !(a[i] instanceof Array) && !(a[i] instanceof $) ) {\r\n                parseAttr(res, a[i],tag);\r\n                i++;\r\n            }\r\n            while (i<a.length) {\r\n                res.append(parse(a[i]));\r\n                i++;\r\n            }\r\n            return res;\r\n        }\r\n        function parseAttr(jq, o, tag) {\r\n            if (o.$var) {\r\n                $vars[o.$var]=jq;\r\n            }\r\n            if (o.$edit) {\r\n                if (typeof o.$edit==\"string\") {\r\n                    o.$edit={name: o.$edit, type: UI.types.String};\r\n                }\r\n                if (!o.on) o.on={};\r\n                o.on.realtimechange=F(function (val) {\r\n                    $edits.writeToModel(o.$edit, val, jq);\r\n                });\r\n                if (!$vars[o.$edit.name]) $vars[o.$edit.name]=jq;\r\n                $edits.push({jq:jq,params:o});\r\n            }\r\n            for (var k in o) {\r\n                if (k==\"on\") {\r\n                    for (var e in o.on) on(e, o.on[e]);\r\n                } else if (k==\"css\" && o[k]!=null) {//ADDJSL\r\n                    jq.css(o[k]);\r\n                } else if (!Util.startsWith(k,\"$\") && o[k]!=null) {//ADDJSL\r\n                    jq.attr(k,o[k]);\r\n                }\r\n            }\r\n            function on(eType, li) {\r\n                if (!li) return; //ADDJSL\r\n                if (eType==\"enterkey\") {\r\n                    jq.on(\"keypress\",F(function (ev) {\r\n                        if (ev.which==13) li.apply(jq,arguments);\r\n                    }));\r\n                } else if (eType==\"realtimechange\") {\r\n                    var first=true, prev;\r\n                    listeners.push(function () {\r\n                        var cur;\r\n                        if (o.type==\"checkbox\") {\r\n                            cur=!!jq.prop(\"checked\");\r\n                        } else {\r\n                            cur=jq.val();\r\n                        }\r\n                        if (first || prev!=cur) {\r\n                            li.apply(jq,[cur,prev]);\r\n                            prev=cur;\r\n                        }\r\n                        first=false;\r\n                    });\r\n                } else {\r\n                    jq.on(eType, F(li));\r\n                }\r\n            }\r\n        }\r\n        function parseString(str) {\r\n            return $(document.createTextNode(str));\r\n            //return $(\"<span>\").text(str);\r\n        }\r\n    };\r\n    UI.types={\r\n       String: {\r\n           toVal: function (val) {\r\n               return val;\r\n           },\r\n           fromVal: function (val) {\r\n               return val;\r\n           }\r\n       },\r\n       Number: {\r\n           toVal: function (val) {\r\n               return val+\"\";\r\n           },\r\n           fromVal: function (val) {\r\n               return parseFloat(val);\r\n           }\r\n       }\r\n   };\r\n    return UI;\r\n});\r\n\ndefine('DeferredUtil',[\"FS\"],function (FS){return FS.DeferredUtil;});\r\n\ndefine('FileMenu',[\"UI\",\"FS\",\"DeferredUtil\"], function (UI,FS,DU) {\r\nvar FileMenu=function () {\r\n    var FM={on:{}};\r\n    FM.on.validateName=function (name,action) {\r\n        if (!name) return {ok:false, reason:\"\"};\r\n        // return {ok:true, file:File } || {ok: false, reason:String}\r\n        var curDir=FM.on.getCurDir();\r\n        var f=curDir.rel(name);\r\n        return {ok: true, file: f};\r\n    };\r\n    FM.on.displayName=function (f) {\r\n        return f.name();\r\n    };\r\n    FM.on.close=function () {};\r\n    FM.on.open=function (f){\r\n        if (typeof FM.fileList==\"object\") {\r\n            FM.fileList.select(f);\r\n        }\r\n    };\r\n    FM.on.ls=function () {\r\n        if (typeof FM.fileList==\"object\") {\r\n            FM.fileList.ls();\r\n        }\r\n    };\r\n    FM.on.getCurFile=function () {\r\n        if (typeof FM.fileList==\"object\") {\r\n            return FM.fileList.curFile();\r\n        }\r\n        throw \"on.getCurFile is missing\";\r\n    };\r\n    FM.on.getCurDir=function () {\r\n        if (typeof FM.fileList==\"object\") {\r\n            return FM.fileList.curDir();\r\n        }\r\n        throw \"on.getCurDir is missing\";\r\n    };\r\n    FM.on.createContent=function (f) {\r\n        return f.text(\"\");\r\n    };\r\n    FM.onMenuStart=function (){};\r\n    FM.dialog=function (title, name, onend) {\r\n    \treturn FM.dialogOpt({title:title, name:name, onend:onend});\r\n    };\r\n    FM.dialogOpt=function (options) {\r\n    \tvar title=options.title;\r\n    \tvar name=options.name || \"\";\r\n    \tvar onend=options.onend || function (){};\r\n        //var t;\r\n        if (!FM.d) FM.d=UI([\"div\"], {title: title},\r\n             \"\",[\"br\"],\r\n             [\"input\", {\r\n                 $var: \"name\",\r\n                 on:{\r\n                \t enterkey:function () {\r\n                \t\t FM.d.$vars.done();\r\n                \t },\r\n                \t realtimechange: function (v) {\r\n                \t\t FM.d.$vars.chg(v);\r\n                \t }\r\n                 }\r\n             }],\r\n             [\"br\"],\r\n             [\"div\",{$var:\"extra\"}],\r\n             [\"div\",{$var:\"msg\"}],\r\n            [\"button\", {$var:\"b\", on:{click: function () {\r\n            \tFM.d.$vars.done();\r\n       \t \t}}}, \"OK\"]\r\n        );\r\n        FM.d.attr({title:title});\r\n        var v=FM.d.$vars;\r\n        //console.log(name);\r\n        v.name.val(name);\r\n        FM.d.dialog({title:title});\r\n        var r=null;\r\n        v.done=function() {\r\n            if (!r || !r.ok) return;\r\n            //clearInterval(t);\r\n            onend(r.file);\r\n            FM.d.dialog(\"close\");\r\n        };\r\n        v.chg=function (s) {\r\n            r=FM.on.validateName(s,options);\r\n            if (r.ok && r.file.exists()) r={ok:false, reason:s+\"\"};\r\n            if (!r.ok) {\r\n                v.msg.css({\"color\":\"red\"});\r\n                v.msg.text(r.reason);\r\n                v.b.attr(\"disabled\",true);\r\n            } else {\r\n                v.msg.css({\"color\":\"blue\"});\r\n                v.msg.text(r.note || \"\");\r\n                v.b.removeAttr(\"disabled\");\r\n            }\r\n        };\r\n        v.extra.empty();\r\n        if (options.extraUI) {\r\n            options.extraUI(v.extra);\r\n        }\r\n    };\r\n\r\n    FM.create=function () {\r\n        FM.onMenuStart(\"create\");\r\n        FM.dialogOpt({title:\"\", action:\"create\", onend:function (f) {\r\n            if (!f.exists()) {\r\n                FM.on.createContent(f); //f.text(\"\");\r\n                FM.on.ls();\r\n                FM.on.open(f);\r\n            }\r\n        }});\r\n    };\r\n    FM.mv=function () {\r\n        FM.onMenuStart(\"mv\");\r\n        var curFile=FM.on.getCurFile();\r\n        if (!curFile) return;\r\n        var oldName=FM.on.displayName(curFile);\r\n        /*var oldName,  mode;\r\n        if (typeof oldNameD==\"string\") oldName=oldNameD;\r\n        else { oldName=oldNameD.name; mode=oldNameD.mode;}*/\r\n        FM.dialogOpt({title:\"\", name:oldName, action:\"mv\", extraUI:FM.on.mvExtraUI, onend:async function (nf) {\r\n            if (!nf) return;\r\n            let r;\r\n            if (FM.on.mv) {\r\n                r=await FM.on.mv(curFile,nf);\r\n            }\r\n            if (r===false) return;\r\n            var t=curFile.text();\r\n            curFile.rm();\r\n            FM.on.close(curFile);\r\n            curFile=nf;\r\n            nf.text(t);\r\n            FM.on.ls();\r\n            FM.on.open(curFile);\r\n        }});\r\n    };\r\n    FM.rm=function (){\r\n        FM.onMenuStart(\"rm\");\r\n        var curFile=FM.on.getCurFile();\r\n        if (!curFile) return;\r\n        if (!confirm(curFile.name()+\"\")) return;\r\n        curFile.rm();\r\n        FM.on.ls();\r\n        FM.on.close(curFile);\r\n    };\r\n    /*$(function () {\r\n        $(\"#newFile\").click(FM.create);\r\n        $(\"#mvFile\").click(FM.mv);\r\n        $(\"#rmFile\").click(FM.rm);\r\n    });*/\r\n    return FM;\r\n};\r\nreturn FileMenu;\r\n\r\n});\r\n\ndefine('ErrorDialog',['require','exports','module','FS','UI'],function (require, exports, module) {\r\nconst FS=require(\"FS\");\r\nconst UI=require(\"UI\");\r\nclass ErrorDialog {\r\n    constructor(ide) {//{restart,stop,displayMode,jump}\r\n        this.ide=ide;\r\n        this.pluginAdded={};\r\n    }\r\n    showErrorPos(elem, err) {\r\n        function close(){\r\n            if ($.data(elem,\"opened\")) {\r\n                elem.dialog(\"close\");\r\n                $.data(elem,\"opened\",false);\r\n            }\r\n        }\r\n        function jump() {\r\n            ide.jump(src,row,col);\r\n            close();\r\n        }\r\n        const ide=this.ide;\r\n        //options=options||{};\r\n        let message=err.message, src, pos, row, col;\r\n        if (!err) {\r\n            close();\r\n            return;\r\n        }\r\n        if (err.isTError) {\r\n            src=err.src;\r\n            pos=err.pos;\r\n            row=err.row;\r\n            col=err.col;\r\n        } else {\r\n            src={name:function (){return \"\";},text:()=>null};\r\n            pos=0;\r\n        }\r\n        if (err.stack && err.stack.length>0 && err.stack[0].fileName) {\r\n            const compiler=ide.project.compiler;\r\n            for (let {columnNumber, lineNumber, fileName} of err.stack) {\r\n                console.log(columnNumber, lineNumber, fileName);\r\n                if (!fileName) continue;\r\n                if (typeof columnNumber!==\"number\") continue;\r\n                if (typeof lineNumber!==\"number\") continue;\r\n                fileName=compiler.convertFromWorkerPath(fileName);\r\n                if (fileName.match(/^http/)) continue; // for concat.js \r\n                try {\r\n                    src=FS.get(fileName);\r\n                    pos={row:lineNumber, col:columnNumber};\r\n                    if (src.exists()) break;\r\n                }catch(e){\r\n                    console.log(\"ErrorDialog\",\"stack\",e);\r\n                }\r\n            }\r\n        }\r\n        if(typeof pos==\"object\") {row=pos.row; col=pos.col;}\r\n        elem.empty();\r\n        const mesgd=$(\"<div>\").text(message+\" \"+src.name()+(typeof row==\"number\"?\":\"+row+\":\"+col:\"\"));\r\n        if(typeof row===\"number\" && typeof col===\"number\") {\r\n            mesgd.append($(\"<button>\").text(\"\").click(jump));\r\n        }\r\n        //mesgd.append($(\"<button>\").text(\"\").click(close));\r\n        elem.append(mesgd);\r\n        elem.append($(\"<div>\").attr(\"class\",\"quickFix\"));\r\n        //console.log(\"src=\",src,err.stack, err.stack instanceof Array);\r\n        console.log(\"src.name\",src.name());\r\n        const str=src.text();\r\n        if (str && typeof pos==\"object\") {\r\n            let npos=0;\r\n            const lines=str.split(\"\\n\");\r\n            for (let i=0 ; i<lines.length && i+1<pos.row ; i++) {\r\n                npos+=lines[i].length+1;\r\n            }\r\n            npos+=pos.col;\r\n            pos=npos;\r\n        }\r\n        if (str) {\r\n            const srcd=$(\"<pre>\");\r\n            srcd.append($(\"<span>\").text(str.substring(0,pos)));\r\n            srcd.append($(\"<img>\").attr(\"src\",FS.expandPath(\"${sampleImg}/ecl.png\")));//MODJSL\r\n            srcd.append($(\"<span>\").text(str.substring(pos)));\r\n            elem.append(srcd);\r\n        }\r\n        elem.attr(\"title\",\"\");\r\n        elem.dialog({width:600,height:400});\r\n        $.data(elem,\"opened\",true);\r\n        return elem;\r\n    }\r\n    show(e) {\r\n        function showTrace() {\r\n            const st=(typeof e.stack===\"string\" ? e.stack :\r\n            typeof e.stack.join===\"function\" ? e.stack.join(\"\\n\") : e+\"\");\r\n            const trcpre=UI(\"pre\",st);\r\n            const html=trcpre.html().replace(/_trc_([\\w]*)/g,function (n) {\r\n                return \"<strong>\"+n+\"</strong>\";\r\n            });\r\n            trcpre.html(html);\r\n            $(\"#errorPos\").find(\".quickFix\").append(trcpre);\r\n        }\r\n        window.shownError=e;\r\n        console.log(\"ErrorDialog\",\"show\",e);\r\n        console.error(e);\r\n        const ide=this.ide;\r\n        const pluginAdded=this.pluginAdded;\r\n        if (e.pluginName && !pluginAdded[e.pluginName]) {\r\n            pluginAdded[e.pluginName]=true;\r\n            ide.restart();\r\n            return;\r\n        }\r\n        if (e.pluginName) {\r\n            alert(e.message);\r\n        } else {\r\n            const diag=this.showErrorPos($(\"#errorPos\"),e);\r\n            ide.displayMode(\"runtime_error\");\r\n            $(\"#errorPos\").find(\".quickFix\").append(\r\n                UI(\"button\",{on:{click:showTrace}},\"\"));\r\n        }\r\n        ide.stop();\r\n    }\r\n}\r\nmodule.exports=ErrorDialog;\r\n\r\n});//--- end of define\r\n;\ndefine('parser',['require','exports','module'],function(require,exports,module) {//used by fixIndent\r\nmodule.exports=function () {\r\n\tfunction extend(dst, src) {\r\n\t\tvar i;\r\n\t\tfor(i in src){\r\n\t\t\tdst[i]=src[i];\r\n\t\t}\r\n\t\treturn dst;\r\n\t}\r\n\tvar $={\r\n\t\tconsoleBuffer:\"\",\r\n\t\toptions: {traceTap:false, optimizeFirst: true, profile: false ,\r\n\t\tverboseFirst: false,traceFirstTbl:false},\r\n\t\tParser: Parser,\r\n\t\tStringParser: StringParser,\r\n\t\tnc: nc\r\n\t};\r\n\t$.dispTbl=function (tbl) {\r\n\t\tvar buf=\"\";\r\n\t\tvar h={};\r\n\t\tif (!tbl) return buf;\r\n\t\tfor (var i in tbl) {// tbl:{char:Parser}   i:char\r\n\t\t\tconst n=tbl[i].name;\r\n\t\t\tif (!h[n]) h[n]=\"\";\r\n\t\t\th[n]+=i;\r\n\t\t}\r\n\t\tfor (let n in h) {\r\n\t\t\tbuf+=h[n]+\"->\"+n+\",\";\r\n\t\t}\r\n\t\treturn buf;\r\n\t};\r\n\t//var console={log:function (s) { $.consoleBuffer+=s; }};\r\n\tfunction _debug(s) {console.log(s);}\r\n\tfunction Parser(parseFunc){\r\n\t\tif ($.options.traceTap) {\r\n\t\t\tthis.parse=function(s){\r\n\t\t\t\tconsole.log(\"tap: name=\"+this.name+\"  pos=\"+(s?s.pos:\"?\"));\r\n\t\t\t\tvar r=parseFunc.apply(this,[s]);\r\n\t\t\t\tvar img=\"NOIMG\";\r\n\t\t\t\tif (r.src && r.src.str) {\r\n\t\t\t\t\timg=r.src.str.substring(r.pos-3,r.pos)+\"^\"+r.src.str.substring(r.pos,r.pos+3);\r\n\t\t\t\t}\r\n\t\t\t\tif (r.src && r.src.tokens) {\r\n\t\t\t\t\timg=r.src.tokens[r.pos-1]+\"[\"+r.src.tokens[r.pos]+\"]\"+r.src.tokens[r.pos+1];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"/tap: name=\"+this.name+\r\n\t\t\t\t\t\t\" pos=\"+(s?s.pos:\"?\")+\"->\"+(r?r.pos:\"?\")+\" \"+img+\" res=\"+(r?r.success:\"?\"));\r\n\t\t\t\treturn r;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tthis.parse=parseFunc;\r\n\t\t}\r\n\t}\r\n\tParser.create=function(parseFunc) { // (State->State)->Parser\r\n\t\treturn new Parser(parseFunc);\r\n\t};\r\n\t$.create=Parser.create;\r\n\tfunction nc(v,name) {\r\n\t\tif (v==null) throw name+\" is null!\";\r\n\t\treturn v;\r\n\t}\r\n\textend(Parser.prototype, {// class Parser\r\n\t\t// Parser.parse:: State->State\r\n\t\texcept: function (f) {\r\n\t\t\tvar t=this;\r\n\t\t\treturn this.ret(Parser.create(function (res) {\r\n\t\t\t\t//var res=t.parse(s);\r\n\t\t\t\t//if (!res.success) return res;\r\n\t\t\t\tif (f.apply({}, res.result)) {\r\n\t\t\t\t\tres.success=false;\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}).setName(\"(except \"+t.name+\")\"));\r\n\t\t},\r\n\t\tnoFollow: function (p) {\r\n\t\t\tvar t=this;\r\n\t\t\tnc(p,\"p\");\r\n\t\t\treturn this.ret(Parser.create(function (res) {\r\n\t\t\t\t//var res=t.parse(s);\r\n\t\t\t\t//if (!res.success) return res;\r\n\t\t\t\tvar res2=p.parse(res);\r\n\t\t\t\tres.success=!res2.success;\r\n\t\t\t\treturn res;\r\n\t\t\t}).setName(\"(\"+t.name+\" noFollow \"+p.name+\")\"));\r\n\t\t},\r\n\t\tandNoUnify: function(next) {// Parser.and:: (Function|Parser)  -> Parser\r\n\t\t\tnc(next,\"next\"); // next==next\r\n\t\t\tvar t=this; // Parser\r\n\t\t\tvar res=Parser.create(function(s){ //s:State\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success) return r1;\r\n\t\t\t\tvar r2=next.parse(r1); //r2:State\r\n\t\t\t\tif (r2.success) {\r\n\t\t\t\t\tr2.result=r1.result.concat(r2.result); // concat===append built in func in Array\r\n\t\t\t\t}\r\n\t\t\t\treturn r2;\r\n\t\t\t});\r\n\t\t\treturn res.setName(\"(\"+this.name+\" \"+next.name+\")\");\r\n\t\t},\r\n\t\tand: function(next) {// Parser.and:: Parser  -> Parser\r\n\t\t\tvar res=this.andNoUnify(next);\r\n\t\t\t//if (!$.options.optimizeFirst) return res;\r\n\t\t\tif (!this._first) return res;\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tvar ntbl={};\r\n\t\t\t//  tbl           ALL:a1  b:b1     c:c1\r\n\t\t\t//  next.tbl      ALL:a2           c:c2     d:d2\r\n\t\t\t//           ALL:a1>>next   b:b1>>next c:c1>>next\r\n\t\t\tfor (var c in tbl) {\r\n\t\t\t\tntbl[c]=tbl[c].andNoUnify(next);\r\n\t\t\t}\r\n\t\t\tres=Parser.fromFirst(this._first.space, ntbl);\r\n\t\t\tres.setName(\"(\"+this.name+\" >> \"+next.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\tconsole.log(\"Created aunify name=\" +res.name+\" tbl=\"+$.dispTbl(ntbl));\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tretNoUnify: function (f) {\r\n\t\t\tvar t=this;\r\n\t\t\tvar p;\r\n\t\t\tif (typeof f==\"function\") {\r\n\t\t\t\tp=Parser.create(function (r1) {\r\n\t\t\t\t\tvar r2=r1.clone();\r\n\t\t\t\t\tr2.result=[ f.apply({}, r1.result) ];\r\n\t\t\t\t\treturn r2;\r\n\t\t\t\t}).setName(\"retfunc\");\r\n\t\t\t} else p=f;\r\n\t\t\tvar res=Parser.create(function(s){ //s:State\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success) return r1;\r\n\t\t\t\treturn p.parse(r1);\r\n\t\t\t\t/*var r2=r1.clone();\r\n\t\t\t\tr2.result=[ f.apply({}, r1.result) ];\r\n\t\t\t\treturn r2;*/\r\n\t\t\t}).setName(\"(\"+this.name+\" >= \"+p.name+\")\");\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tret: function(next) {// Parser.ret:: (Function|Parser)  -> Parser\r\n\t\t\tif (!this._first) return this.retNoUnify(next);\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tvar ntbl={};\r\n\t\t\tfor (var c in tbl) {\r\n\t\t\t\tntbl[c]=tbl[c].retNoUnify(next);\r\n\t\t\t}\r\n\t\t\tconst res=Parser.fromFirst(this._first.space, ntbl);\r\n\t\t\tres.setName(\"(\"+this.name+\" >>= \"+next.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\tconsole.log(\"Created runify name=\" +res.name+\" tbl=\"+$.dispTbl(ntbl));\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\tthis._first={space: space, chars:String};\r\n\t\tthis._first={space: space, tbl:{char:Parser}};\r\n\t*/\r\n\t\tfirst: function (space, ct) {\r\n\t\t\tif (!$.options.optimizeFirst) return this;\r\n\t\t\tif (space==null) throw \"Space is null2!\";\r\n\t\t\tif (typeof ct==\"string\") {\r\n\t\t\t\t\tvar tbl={};\r\n\t\t\t\t\tfor (var i=0; i<ct.length ; i++) {\r\n\t\t\t\t\t\ttbl[ct.substring(i,i+1)]=this;\r\n\t\t\t\t\t}\r\n\t\t\t\t//this._first={space: space, tbl:tbl};\r\n\t\t\t\treturn Parser.fromFirst(space,tbl).setName(\"(fst \"+this.name+\")\");\r\n//        \t\tthis._first={space: space, chars:ct};\r\n\t\t\t} else if (ct==null) {\r\n\t\t\t\treturn Parser.fromFirst(space,{ALL:this}).setName(\"(fst \"+this.name+\")\");\r\n\t\t\t\t//this._first={space:space, tbl:{ALL:this}};\r\n\t\t\t} else if (typeof ct==\"object\") {\r\n\t\t\t\tthrow \"this._first={space: space, tbl:ct}\";\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tfirstTokens: function (tokens) {\r\n\t\t\tif (!$.options.optimizeFirst) return this;\r\n\t\t\tif (typeof tokens==\"string\") tokens=[tokens];\r\n\t\t\tvar tbl={};\r\n\t\t\t\tif (tokens) {\r\n\t\t\t\t\tvar t=this;\r\n\t\t\t\t\ttokens.forEach(function (token) {\r\n\t\t\t\t\ttbl[token]=t;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttbl.ALL=this;\r\n\t\t\t}\r\n\t\t\treturn Parser.fromFirstTokens(tbl).setName(\"(fstT \"+this.name+\")\");\r\n\t\t},\r\n\t\tunifyFirst: function (other) {\r\n\t\t\tvar thiz=this;\r\n\t\t\tfunction or(a,b) {\r\n\t\t\t\tif (!a) return b;\r\n\t\t\t\tif (!b) return a;\r\n\t\t\t\treturn a.orNoUnify(b).checkTbl();\r\n\t\t\t}\r\n\t\t\tvar tbl={}; // tbl.* includes tbl.ALL\r\n\t\t\tthis.checkTbl();\r\n\t\t\tother.checkTbl();\r\n\t\t\tfunction mergeTbl() {\r\n\t\t\t//   {except_ALL: contains_ALL}\r\n\t\t\t\tvar t2=other._first.tbl;\r\n\t\t\t\t//before tbl={ALL:a1, b:b1, c:c1}   t2={ALL:a2,c:c2,d:d2}\r\n\t\t\t\t//       b1 conts a1  c1 conts a1     c2 conts a2   d2 conts a2\r\n\t\t\t\t//after  tbl={ALL:a1|a2 , b:b1|a2    c:c1|c2    d:a1|d2 }\r\n\t\t\t\tvar keys={};\r\n\t\t\t\tfor (let k in tbl) { /*if (d) console.log(\"tbl.k=\"+k);*/ keys[k]=1;}\r\n\t\t\t\tfor (let k in t2)  { /*if (d) console.log(\"t2.k=\"+k);*/ keys[k]=1;}\r\n\t\t\t\tdelete keys.ALL;\r\n\t\t\t\tif (tbl.ALL || t2.ALL) {\r\n\t\t\t\t\ttbl.ALL=or(tbl.ALL, t2.ALL);\r\n\t\t\t\t}\r\n\t\t\t\tfor (let k in keys ) {\r\n\t\t\t\t\t//if (d) console.log(\"k=\"+k);\r\n\t\t\t\t\t//if (tbl[k] && !tbl[k].parse) throw \"tbl[\"+k+\"] = \"+tbl[k];\r\n\t\t\t\t\t//if (t2[k] && !t2[k].parse) throw \"t2[\"+k+\"] = \"+tbl[k];\r\n\t\t\t\t\tif (tbl[k] && t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl[k],t2[k]);\r\n\t\t\t\t\t} else if (tbl[k] && !t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl[k],t2.ALL);\r\n\t\t\t\t\t} else if (!tbl[k] && t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl.ALL, t2[k]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\textend(tbl, this._first.tbl);\r\n\t\t\tmergeTbl();\r\n\t\t\tvar res=Parser.fromFirst(this._first.space, tbl).setName(\"(\"+this.name+\")U(\"+other.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) console.log(\"Created unify name=\" +res.name+\" tbl=\"+$.dispTbl(tbl));\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tor: function(other) { // Parser->Parser\r\n\t\t\tnc(other,\"other\");\r\n\t\t\t\tif (this._first && other._first &&\r\n\t\t\t\t\t\tthis._first.space && this._first.space===other._first.space) {\r\n\t\t\t\treturn this.unifyFirst(other);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\t\t\tconsole.log(\"Cannot unify\"+this.name+\" || \"+other.name+\" \"+this._first+\" - \"+other._first);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.orNoUnify(other);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\torNoUnify: function (other) {\r\n\t\t\t\tvar t=this;  // t:Parser\r\n\t\t\tvar res=Parser.create(function(s){\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success){\r\n\t\t\t\t\tvar r2=other.parse(s); // r2:State\r\n\t\t\t\t\treturn r2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn r1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tres.name=\"(\"+this.name+\")|(\"+other.name+\")\";\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tsetName: function (n) {\r\n\t\t\tthis.name=n;\r\n\t\t\tif (this._first) {\r\n\t\t\t\t/*var tbl=this._first.tbl;\r\n\t\t\t\tfor (var i in tbl) {\r\n\t\t\t\t\ttbl[i].setName(\"(elm \"+i+\" of \"+n+\")\");\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tprofile: function (name) {\r\n\t\t\tif ($.options.profile) {\r\n\t\t\t\tthis.parse=this.parse.profile(name || this.name);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\trepN: function(min){\r\n\t\t\tvar p=this;\r\n\t\t\tif (!min) min=0;\r\n\t\t\tvar res=Parser.create(function(s) {\r\n\t\t\t\tvar current=s;\r\n\t\t\t\tvar result=[];\r\n\t\t\t\twhile(true){\r\n\t\t\t\t\tvar next=p.parse(current);\r\n\t\t\t\t\tif(!next.success) {\r\n\t\t\t\t\t\tvar res;\r\n\t\t\t\t\t\tif (result.length>=min) {\r\n\t\t\t\t\t\t\tres=current.clone();\r\n\t\t\t\t\t\t\tres.result=[result];\r\n\t\t\t\t\t\t\tres.success=true;\r\n\t\t\t\t\t\t\t//console.log(\"rep0 res=\"+disp(res.result));\r\n\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tres=s.clone();\r\n\t\t\t\t\t\t\tres.success=false;\r\n\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.push(next.result[0]);\r\n\t\t\t\t\t\tcurrent=next;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//if (min>0) res._first=p._first;\r\n\t\t\treturn res.setName(\"(\"+p.name+\" * \"+min+\")\");\r\n\t\t},\r\n\t\trep0: function () { return this.repN(0); },\r\n\t\trep1: function () { return this.repN(1); },\r\n\t\topt: function () {\r\n\t\t\tvar t=this;\r\n\t\t\treturn Parser.create(function (s) {\r\n\t\t\t\tvar r=t.parse(s);\r\n\t\t\t\tif (r.success) {\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts=s.clone();\r\n\t\t\t\t\ts.success=true;\r\n\t\t\t\t\ts.result=[null];\r\n\t\t\t\t\treturn s;\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"(\"+t.name+\")?\");\r\n\t\t},\r\n\t\tsep1: function(sep, valuesToArray) {\r\n\t\t\tvar value=this;\r\n\t\t\tnc(value,\"value\");nc(sep,\"sep\");\r\n\t\t\tvar tail=sep.and(value).ret(function(r1, r2) {\r\n\t\t\t\tif(valuesToArray) return r2;\r\n\t\t\t\treturn {sep:r1, value:r2};\r\n\t\t\t});\r\n\t\t\treturn value.and(tail.rep0()).ret(function(r1, r2){\r\n\t\t\t\tvar i;\r\n\t\t\t\tif (valuesToArray) {\r\n\t\t\t\t\tvar r=[r1];\r\n\t\t\t\t\t\tfor (i in r2) {\r\n\t\t\t\t\t\t\tr.push(r2[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {head:r1,tails:r2};\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"(sep1 \"+value.name+\"~~\"+sep.name+\")\");\r\n\t\t},\r\n\t\tsep0: function(s){\r\n\t\t\treturn this.sep1(s,true).opt().ret(function (r) {\r\n\t\t\t\tif (!r) return [];\r\n\t\t\t\treturn r;\r\n\t\t\t});\r\n\t\t},\r\n\t\ttap: function (msg) {\r\n\t\t\treturn this;\r\n\t\t\t/*if (!$.options.traceTap) return this;\r\n\t\t\tif (!msg) msg=\"\";\r\n\t\t\tvar t=this;\r\n\t\t\tvar res=Parser.create(function(s){\r\n\t\t\t\tconsole.log(\"tap:\"+msg+\" name:\"+t.name+\"  pos=\"+(s?s.pos:\"?\"));\r\n\t\t\t\tvar r=t.parse(s);\r\n\t\t\t\tvar img=r.src.str.substring(r.pos-3,r.pos)+\"^\"+r.src.str.substring(r.pos,r.pos+3);\r\n\t\t\t\tconsole.log(\"/tap:\"+msg+\" name:\"+t.name+\" pos=\"+(s?s.pos:\"?\")+\"->\"+(r?r.pos:\"?\")+\" \"+img+\" res=\"+(r?r.success:\"?\"));\r\n\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\treturn res.setName(\"(Tap \"+t.name+\")\");*/\r\n\t\t},\r\n\t\tretN: function (i) {\r\n\t\t\treturn this.ret(function () {\r\n\t\t\t\treturn arguments[i];\r\n\t\t\t});\r\n\t\t},\r\n\t\tparseStr: function (str,global) {\r\n\t\t\tvar st=new State(str,global);\r\n\t\t\treturn this.parse(st);\r\n\t\t},\r\n\t\tcheckTbl: function () {\r\n\t\t\tif (!this._first) return this;\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tfor (var k in tbl) {\r\n\t\t\t\tif (!tbl[k].parse) throw this.name+\": tbl.\"+k+\" is not a parser :\"+tbl[k];\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\t});\r\n\tfunction State(strOrTokens, global) { // class State\r\n\t\tif (strOrTokens!=null) {\r\n\t\t\tthis.src={maxPos:0, global:global};// maxPos is shared by all state\r\n\t\t\tif (typeof strOrTokens==\"string\") {\r\n\t\t\t\tthis.src.str=strOrTokens;\r\n\t\t\t}\r\n\t\t\tif (strOrTokens instanceof Array) {\r\n\t\t\t\tthis.src.tokens=strOrTokens;\r\n\t\t\t}\r\n\t\t\tthis.pos=0;\r\n\t\t\tthis.result=[];\r\n\t\t\tthis.success=true;\r\n\t\t}\r\n\t}\r\n\textend(State.prototype, {\r\n\t\tclone: function() {\r\n\t\t\tvar s=new State();\r\n\t\t\ts.src=this.src;\r\n\t\t\ts.pos=this.pos;\r\n\t\t\ts.result=this.result.slice();\r\n\t\t\ts.success=this.success;\r\n\t\t\treturn s;\r\n\t\t},\r\n\t\tupdateMaxPos:function (npos) {\r\n\t\t\tif (npos > this.src.maxPos) {\r\n\t\t\t\tthis.src.maxPos=npos;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisSuccess: function () {\r\n\t\t\treturn this.success;\r\n\t\t},\r\n\t\tgetGlobal: function () {\r\n\t\t\t\tif (!this.src.global) this.src.global={};\r\n\t\t\t\treturn this.src.global;\r\n\t\t}\r\n\t});\r\n\tParser.fromFirst=function (space, tbl) {\r\n\t\tif (space==\"TOKEN\") {\r\n\t\t\treturn Parser.fromFirstTokens(tbl);\r\n\t\t}\r\n\t\tvar res=Parser.create(function (s0) {\r\n\t\t\tvar s=space.parse(s0);\r\n\t\t\tvar f=s.src.str.substring(s.pos,s.pos+1);\r\n\t\t\tif ($.options.traceFirstTbl) {\r\n\t\t\t\tconsole.log(this.name+\": first=\"+f+\" tbl=\"+( tbl[f]?tbl[f].name:\"-\") );\r\n\t\t\t}\r\n\t\t\tif (tbl[f]) {\r\n\t\t\t\treturn tbl[f].parse(s);\r\n\t\t\t}\r\n\t\t\tif (tbl.ALL) return tbl.ALL.parse(s);\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t});\r\n\t\tres._first={space:space,tbl:tbl};\r\n\t\tres.checkTbl();\r\n\t\treturn res;\r\n\t};\r\n\tParser.fromFirstTokens=function (tbl) {\r\n\t\tvar res=Parser.create(function (s) {\r\n\t\t\tvar t=s.src.tokens[s.pos];\r\n\t\t\tvar f=t?t.type:null;\r\n\t\t\tif ($.options.traceFirstTbl) {\r\n\t\t\t\tconsole.log(this.name+\": firstT=\"+f+\" tbl=\"+( tbl[f]?tbl[f].name:\"-\") );\r\n\t\t\t}\r\n\t\t\tif (f!=null && tbl[f]) {\r\n\t\t\t\treturn tbl[f].parse(s);\r\n\t\t\t}\r\n\t\t\tif (tbl.ALL) return tbl.ALL.parse(s);\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t});\r\n\t\tres._first={space:\"TOKEN\",tbl:tbl};\r\n\t\tres.checkTbl();\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar StringParser={\r\n\t\tempty: Parser.create(function(state) {\r\n\t\t\tvar res=state.clone();\r\n\t\t\tres.success=true;\r\n\t\t\tres.result=[null]; //{length:0, isEmpty:true}];\r\n\t\t\treturn res;\r\n\t\t}).setName(\"E\"),\r\n\t\tfail: Parser.create(function(s){\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t}).setName(\"F\"),\r\n\t\tstr: function (st) { // st:String\r\n\t\t\treturn this.strLike(function (str,pos) {\r\n\t\t\t\tif (str.substring(pos, pos+st.length)===st) return {len:st.length};\r\n\t\t\t\treturn null;\r\n\t\t\t}).setName(st);\r\n\t\t},\r\n\t\treg: function (r) {//r: regex (must have ^ at the head)\r\n\t\t\tif (!(r+\"\").match(/^\\/\\^/)) console.log(\"Waring regex should have ^ at the head:\"+(r+\"\"));\r\n\t\t\treturn this.strLike(function (str,pos) {\r\n\t\t\t\tvar res=r.exec( str.substring(pos) );\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tres.len=res[0].length;\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}).setName(r+\"\");\r\n\t\t},\r\n\t\tstrLike: function (func) {\r\n\t\t\t// func :: str,pos, state? -> {len:int, other...}  (null for no match )\r\n\t\t\treturn Parser.create(function(state){\r\n\t\t\t\tvar str= state.src.str;\r\n\t\t\t\tif (str==null) throw \"strLike: str is null!\";\r\n\t\t\t\tvar spos=state.pos;\r\n\t\t\t\t//console.log(\" strlike: \"+str+\" pos:\"+spos);\r\n\t\t\t\tvar r1=func(str, spos, state);\r\n\t\t\t\tif ($.options.traceToken) console.log(\"pos=\"+spos+\" r=\"+r1);\r\n\t\t\t\tif(r1) {\r\n\t\t\t\t\tif ($.options.traceToken) console.log(\"str:succ\");\r\n\t\t\t\t\tr1.pos=spos;\r\n\t\t\t\t\tr1.src=state.src; // insert 2013/05/01\r\n\t\t\t\t\tvar ns=state.clone();\r\n\t\t\t\t\textend(ns, {pos:spos+r1.len, success:true, result:[r1]});\r\n\t\t\t\t\tstate.updateMaxPos(ns.pos);\r\n\t\t\t\t\treturn ns;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif ($.options.traceToken) console.log(\"str:fail\");\r\n\t\t\t\t\tstate.success=false;\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"STRLIKE\");\r\n\t\t},\r\n\t\tparse: function (parser, str,global) {\r\n\t\t\tvar st=new State(str,global);\r\n\t\t\treturn parser.parse(st);\r\n\t\t}\r\n\t};\r\n\t//  why not eof: ? because StringParser.strLike\r\n\tStringParser.eof=StringParser.strLike(function (str,pos) {\r\n\t\tif (pos==str.length) return {len:0};\r\n\t\treturn null;\r\n\t}).setName(\"EOF\");\r\n\t$.StringParser=StringParser;\r\n\tvar TokensParser={\r\n\t\ttoken: function (type) {\r\n\t\t\treturn Parser.create(function (s) {\r\n\t\t\t\tvar t=s.src.tokens[s.pos];\r\n\t\t\t\ts.success=false;\r\n\t\t\t\tif (!t) return s;\r\n\t\t\t\tif (t.type==type) {\r\n\t\t\t\t\ts=s.clone();\r\n\t\t\t\t\ts.updateMaxPos(s.pos);\r\n\t\t\t\ts.pos++;\r\n\t\t\t\t\ts.success=true;\r\n\t\t\t\t\ts.result=[t];\r\n\t\t\t\t}\r\n\t\t\t\treturn s;\r\n\t\t\t}).setName(type).firstTokens(type);\r\n\t\t},\r\n\t\tparse:function (parser, tokens, global) {\r\n\t\t\tvar st=new State(tokens,global);\r\n\t\t\treturn parser.parse(st);\r\n\t\t},\r\n\t\teof: Parser.create(function (s) {\r\n\t\t\tvar suc=(s.pos>=s.src.tokens.length);\r\n\t\t\ts.success=suc;\r\n\t\t\tif (suc) {\r\n\t\t\t\ts=s.clone();\r\n\t\t\t\ts.result=[{type:\"EOF\"}];\r\n\t\t\t}\r\n\t\t\treturn s;\r\n\t\t}).setName(\"EOT\")\r\n\t};\r\n\t$.TokensParser=TokensParser;\r\n\t$.lazy=function (pf) { //   ( ()->Parser ) ->Parser\r\n\t\tvar p=null;\r\n\t\treturn Parser.create(function (st) {\r\n\t\t\tif (!p) p=pf();\r\n\t\t\tif (!p) throw pf+\" returned null!\";\r\n\t\t\tthis.name=pf.name;\r\n\t\t\treturn p.parse(st);\r\n\t\t}).setName(\"LZ\");\r\n\t};\r\n\t$.addRange=function(res, newr) {\r\n\t\tif (newr==null) return res;\r\n\t\tif (typeof (res.pos)!=\"number\") {\r\n\t\t\tres.pos=newr.pos;\r\n\t\t\tres.len=newr.len;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\tvar newEnd=newr.pos+newr.len;\r\n\t\tvar curEnd=res.pos+res.len;\r\n\t\tif (newr.pos<res.pos) res.pos=newr.pos;\r\n\t\tif (newEnd>curEnd) res.len= newEnd-res.pos;\r\n\t\treturn res;\r\n\t};\r\n\t$.setRange=function (res) {\r\n\t\tif (res==null || typeof res==\"string\" || typeof res==\"number\" || typeof res==\"boolean\") return;\r\n\t\tvar exRange=$.getRange(res);\r\n\t\tif (exRange!=null) return res;\r\n\t\tfor (var i in res) {\r\n\t\t\tif (!res.hasOwnProperty(i)) continue;\r\n\t\t\tvar range=$.setRange(res[i]);\r\n\t\t\t$.addRange(res,range);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\t$.getRange=function(e) {\r\n\t\tif (e==null) return null;\r\n\t\tif (typeof e.pos!=\"number\") return null;\r\n\t\tif (typeof e.len==\"number\") return e;\r\n\t\treturn null;\r\n\t};\r\n\treturn $;\r\n}();\r\n});\r\n\ndefine('tonyu2_token',['require','exports','module','parser'],function(require,exports,module) {//used by fixIndent\r\nconst Parser=require(\"parser\");\r\n\r\nmodule.exports=function () {\r\n\tfunction profileTbl(parser, name) {\r\n\t\tvar tbl=parser._first.tbl;\r\n\t\tfor (var c in tbl) {\r\n\t\t\ttbl[c].profile();//(c+\" of \"+tbl[name);\r\n\t\t}\r\n\t}\r\n\r\n\tvar sp=Parser.StringParser;\r\n\tvar SAMENAME=\"SAMENAME\";\r\n\tvar DIV=1,REG=2;\r\n\tvar space=sp.reg(/^(\\s*(\\/\\*\\/?([^\\/]|[^*]\\/|\\r|\\n)*\\*\\/)*(\\/\\/.*\\r?\\n)*)*/).setName(\"space\");\r\n\tfunction tk(r, name) {\r\n\t\tvar pat;\r\n\t\tvar fst;\r\n\t\tif (typeof r==\"string\") {\r\n\t\t\tpat=sp.str(r);\r\n\t\t\tif (r.length>0) fst=r.substring(0,1);\r\n\t\t\tif (!name) name=r;\r\n\t\t} else {\r\n\t\t\tpat=sp.reg(r);\r\n\t\t\tif (!name) name=r+\"\";\r\n\t\t}\r\n\t\tvar res=space.and(pat).ret(function(a, b) {\r\n\t\t\tvar res={};\r\n\t\t\tres.pos=b.pos;\r\n\t\t\tif (typeof res.pos!=\"number\") throw \"no pos for \"+name+\" \";//+disp(b);\r\n\t\t\tres.len=b.len;\r\n\t\t\tres.text=b.src.str.substring(res.pos, res.pos+res.len);\r\n\t\t\tif (typeof res.text!=\"string\") throw \"no text(\"+res.text+\") for \"+name+\" \";//+disp(b);\r\n\t\t\tres.toString=function (){\r\n\t\t\t\treturn this.text;\r\n\t\t\t};\r\n\t\t\tres.isToken=true;\r\n\t\t\treturn res;\r\n\t\t});\r\n\t\tif (fst) res=res.first(space, fst);\r\n\t\treturn res.setName(name);//.profile();\r\n\t}\r\n\tvar parsers={},posts={};\r\n\tfunction dtk2(prev, name, parser, post) {\r\n\t\t//console.log(\"2reg=\"+prev+\" name=\"+name);\r\n\t\tif (typeof parser==\"string\") parser=tk(parser);\r\n\t\tparsers[prev]=or(parsers[prev], parser.ret(function (res) {\r\n\t\t\tres.type=name;\r\n\t\t\treturn res;\r\n\t\t}).setName(name) );\r\n\t}\r\n\tfunction dtk(prev, name, parser, post) {\r\n\t\tif(name==SAMENAME) name=parser;\r\n\t\tfor (var m=1; m<=prev; m*=2) {\r\n\t\t\t//prev=1  -> m=1\r\n\t\t\t//prev=2  -> m=1x,2\r\n\t\t\t//XXprev=3  -> m=1,2,3\r\n\t\t\tif ((prev&m)!=0) dtk2(prev&m, name,parser,post);\r\n\t\t}\r\n\t\tposts[name]=post;\r\n\t}\r\n\tfunction or(a,b){\r\n\t\tif (!a) return b;\r\n\t\treturn a.or(b);\r\n\t}\r\n\r\n\tvar all=Parser.create(function (st) {\r\n\t\tvar mode=REG;\r\n\t\tvar res=[];\r\n\t\twhile (true) {\r\n\t\t\tst=parsers[mode].parse(st);\r\n\t\t\tif (!st.success) break;\r\n\t\t\tvar e=st.result[0];\r\n\t\t\tmode=posts[e.type];\r\n\t\t\tres.push(e);\r\n\t\t}\r\n\t\tst=space.parse(st);\r\n\t\t//console.log(st.src.maxPos+\"==\"+st.src.str.length)\r\n\t\tst.success=st.src.maxPos==st.src.str.length;\r\n\t\tst.result[0]=res;\r\n\t\treturn st;\r\n\t});\r\n\tvar reserved={\"function\":true, \"var\":true , \"return\":true, \"typeof\": true, \"if\":true,\r\n\t\t\t\"__typeof\": true,\r\n\t\t\t\"for\":true,\r\n\t\t\t\"else\": true,\r\n\t\t\t\"super\": true,\r\n\t\t\t\"while\":true,\r\n\t\t\t\"continue\":true,\r\n\t\t\t\"break\":true,\r\n\t\t\t\"do\":true,\r\n\t\t\t\"switch\":true,\r\n\t\t\t\"case\":true,\r\n\t\t\t\"default\":true,\r\n\t\t\t\"try\": true,\r\n\t\t\t\"catch\": true,\r\n\t\t\t\"finally\": true,\r\n\t\t\t\"throw\": true,\r\n\t\t\t\"of\": true,\r\n\t\t\t\"in\": true,\r\n\t\t\tfiber:true,\r\n\t\t\t\"native\": true,\r\n\t\t\t\"instanceof\":true,\r\n\t\t\t\"new\": true,\r\n\t\t\t\"is\": true,\r\n\t\t\t\"true\": true,\r\n\t\t\t\"false\": true,\r\n\t\t\t\"null\":true,\r\n\t\t\t\"this\":true,\r\n\t\t\t\"undefined\": true,\r\n\t\t\t\"usethread\": true,\r\n\t\t\t\"constructor\": true,\r\n\t\t\tifwait:true,\r\n\t\t\tnowait:true,\r\n\t\t\t_thread:true,\r\n\t\t\targuments:true,\r\n\t\t\t\"delete\": true,\r\n\t\t\t\"extends\":true,\r\n\t\t\t\"includes\":true\r\n\t};\r\n\r\n\tvar num=tk(/^[0-9][xb]?[0-9a-f\\.]*/i).ret(function (n) {\r\n\t\tn.type=\"number\";\r\n\t\tn.value=n.text-0;//parseInt(n.text);\r\n\t\treturn n;\r\n\t}).first(space,\"0123456789\");\r\n\tvar literal=tk({exec: function (s) {\r\n\t\tvar head=s.substring(0,1);\r\n\t\tif (head!=='\"' && head!==\"'\") return false;\r\n\t\tfor (var i=1 ;i<s.length ; i++) {\r\n\t\t\tvar c=s.substring(i,i+1);\r\n\t\t\tif (c===head) {\r\n\t\t\t\treturn [s.substring(0,i+1)];\r\n\t\t\t} else if (c===\"\\\\\") {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},toString:function(){return\"literal\";}\r\n\t}).first(space,\"\\\"'\");\r\n\tvar regex=tk({exec: function (s) {\r\n\t\tif (s.substring(0,1)!=='/') return false;\r\n\t\tfor (var i=1 ;i<s.length ; i++) {\r\n\t\t\tvar c=s.substring(i,i+1);\r\n\t\t\tif (c==='/') {\r\n\t\t\t\tvar r=/^[ig]*/.exec( s.substring(i+1) );\r\n\t\t\t\treturn [s.substring(0,i+1+r[0].length)];\r\n\t\t\t} else if (c==\"\\n\") {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (c===\"\\\\\") {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},toString:function(){return\"regex\";}\r\n\t}).first(space,\"/\");\r\n\r\n\tdtk(REG|DIV, \"number\", num,DIV );\r\n\tdtk(REG,  \"regex\" ,regex,DIV );\r\n\tdtk(REG|DIV,  \"literal\" ,literal,DIV );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"++\",DIV );\r\n\tdtk(REG|DIV,SAMENAME ,\"--\",DIV );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"!==\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"===\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">>>\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"+=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"-=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"*=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"/=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"%=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"!=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"==\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">>\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<<\",REG );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"&&\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"||\",REG );\r\n\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"(\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\")\",DIV );\r\n\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"[\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"]\",DIV );  // a[i]/3\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"{\",REG );\r\n\t//dtk(REG|DIV,SAMENAME ,\"}\",REG );  // if () { .. }  /[a-z]/.exec()\r\n\tdtk(REG|DIV,SAMENAME ,\"}\",DIV ); //in tonyu:  a{x:5}/3\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\">\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"^\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"+\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"-\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\".\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"?\",REG );\r\n\r\n\tdtk(REG|DIV, SAMENAME ,\"=\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\"*\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\"%\",REG );\r\n\tdtk(DIV, SAMENAME ,\"/\",REG );\r\n\r\n\tdtk(DIV|REG, SAMENAME ,\"^\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\"~\",REG );\r\n\r\n\tdtk(DIV|REG, SAMENAME ,\"\\\\\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\":\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\";\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\",\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"!\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"&\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"|\",REG );\r\n\r\n\tvar symresv=tk(/^[a-zA-Z_$][a-zA-Z0-9_$]*/,\"symresv_reg\").ret(function (s) {\r\n\ts.type=(s.text==\"constructor\" ? \"tk_constructor\" :\r\n\t\treserved.hasOwnProperty(s.text) ? s.text : \"symbol\");\r\n\treturn s;\r\n\t}).first(space);\r\n\tfor (var n in reserved) {\r\n\t\tposts[n]=REG;\r\n\t}\r\n\tposts.tk_constructor=REG;\r\n\tposts.symbol=DIV;\r\n\tparsers[REG]=or(parsers[REG],symresv);\r\n\tparsers[DIV]=or(parsers[DIV],symresv);\r\n\r\n\tfunction parse(str) {\r\n\t\tvar res=Parser.StringParser.parse(all, str);\r\n\t\tif (res.success) {\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Stopped at \"+str.substring( res.src.maxPos-5, res.src.maxPos+5));\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\treturn {parse:parse, extension:\"js\",reserved:reserved};\r\n}();\r\n});\r\n\ndefine('IndentFixer',['require','exports','module'],function(require,exports,module) {\r\nmodule.exports=class IndentFixer {\r\n    constructor(t) {\r\n        this.tokenizer=t;\r\n    }\r\n    fix(str,indentStr=\"    \") {\r\n    \t//const incdec={\"{\":1, \"}\":-1};\r\n    \tconst linfo=[];// [\"{{}}\",\"{\",\"}\"...]\r\n        let tokens;\r\n    \ttry {\r\n    \t\tconst tokenRes=this.tokenizer.parse(str);\r\n    \t\ttokens=tokenRes;//.result[0];\r\n    \t\ttokens.forEach(token=>{\r\n                linfo[token.row]=linfo[token.row]||\"\";\r\n    \t\t\tif (this.tokenizer.isOpen(token) ) {\r\n    \t\t\t\tlinfo[token.row]+=\"{\";\r\n    \t\t\t}\r\n                if (this.tokenizer.isClose(token) ) {\r\n    \t\t\t\tlinfo[token.row]+=\"}\";\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}catch(e) {\r\n    \t\tconsole.log(\"ERR\",e);\r\n    \t}\r\n    \t//console.log(linfo);//Edge fails with error 'Could not complete the operation due to error 80020101.'\r\n        //Issue: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/23660690/\r\n    \tconst lines=str.split(\"\\n\");\r\n    \tlet curDepth=0;\r\n    \tlet row=0;\r\n        const depths=[];\r\n    \tlines.forEach((line,i)=>{\r\n    \t\tlet opens=0, closes=0;\r\n    \t\tline=line.replace(/^\\s*/,\"\");\r\n    \t\tif (linfo[row]!=null) {\r\n    \t\t\tlinfo[row].match(/^(\\}*)/);\r\n    \t\t\tcloses=RegExp.$1.length;\r\n    \t\t\tlinfo[row].match(/(\\{*)$/);\r\n    \t\t\topens=RegExp.$1.length;\r\n    \t\t}\r\n    \t\tcurDepth-=closes;\r\n            depths[row]=curDepth;\r\n    \t\tcurDepth+=opens;\r\n    \t\trow++;\r\n    \t});\r\n        row=-1;\r\n        const changeDepths=[];\r\n        for (let token of tokens) {\r\n            if (token.row>row) {\r\n                changeDepths[row]=depths[row];\r\n                row=token.row;\r\n            }\r\n        }\r\n        //console.log(depths, changeDepths);\r\n        return lines.map ((line,row)=>indStr(line, changeDepths[row])).join(\"\\n\");\r\n    \tfunction indStr(line, depth) {\r\n            if (typeof depth!==\"number\") return line;\r\n    \t\tlet res=\"\";\r\n    \t\tfor (let i=0 ;i<depth ;i++) {\r\n    \t\t\tres+=indentStr;\r\n    \t\t}\r\n    \t\treturn res+line.replace(/^\\s*/,\"\");\r\n    \t}\r\n    }\r\n};\r\n});\r\n\ndefine('fixIndent',['require','exports','module','tonyu2_token','IndentFixer'],function(require,exports,module) {\r\nconst TT=require(\"tonyu2_token\");\r\nconst IndentFixer=require(\"IndentFixer\");\r\nconst f=new IndentFixer({\r\n\tparse(str) {\r\n\t\ttry {\r\n\t\t\tconst tokenRes=TT.parse(str);\r\n\t\t\tconst tokens=tokenRes.result[0];\r\n\t\t\t//console.log(tokens);\r\n\t\t\tconst p2r=new Pos2RC(str);\r\n\t\t\treturn tokens.map(t=>Object.assign(t,p2r.get(t.pos)));\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t},\r\n\tisOpen(token) {return token.type===\"{\";},\r\n\tisClose(token) {return token.type===\"}\";}\r\n});\r\n\r\nmodule.exports=function (str,indentStr) {\r\n\treturn f.fix(str,indentStr);\r\n};\r\nclass Pos2RC{\r\n\tconstructor(str) {\r\n\t\tthis.str=str;\r\n\t\tthis.row=0;\r\n\t\tthis.col=0;\r\n\t\tthis.lastPos=0;\r\n\t}\r\n\tget(pos) {\r\n\t\tif (this.lastPos>pos) throw new Error(\"tokens Must be ordered.\");\r\n\t\tconst proc=this.str.substring(this.lastPos,pos);\r\n\t\tconst lines=proc.split(\"\\n\");\r\n\t\tconst lastLine=lines.pop();\r\n\t\tif (lines.length===0) this.col+=lastLine.length;\r\n\t\telse {\r\n\t\t\tthis.row+=lines.length;\r\n\t\t\tthis.col=lastLine.length;\r\n\t\t}\r\n\t\tthis.lastPos=pos;\r\n\t\treturn {row:this.row, col:this.col};\r\n\t}\r\n}\r\n/*\r\nfunction pos2RC(str, pos) {\r\n\tvar res={row:0, col:0};\r\n\tvar len=Math.min(str.length,pos);\r\n\tfor (var i=0 ; i<len ;i++) {\r\n\t\tif (str.substring(i,i+1)==\"\\n\") {\r\n\t\t\tres.row++;\r\n\t\t\tres.col=0;\r\n\t\t} else {\r\n\t\t\tres.col++;\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n}*/\r\n/*module.exports=function fixIndent(str, indentStr) {\r\n\tif (!indentStr) indentStr=\"    \";\r\n\tvar incdec={\"{\":1, \"}\":-1};\r\n\tvar linfo=[];\r\n\ttry {\r\n\t\tthrow \"koware\";\r\n\t\tvar tokenRes=TT.parse(str);\r\n\t\tvar tokens=tokenRes.result[0];\r\n\t\ttokens.forEach(function (token) {\r\n\t\t\tif (incdec[token.type]) {\r\n\t\t\t\tif (!linfo[token.row]) linfo[token.row]=\"\";\r\n\t\t\t\tlinfo[token.row]+=token.type;\r\n\t\t\t}\r\n\t\t});\r\n\t}catch(e) {\r\n\t\tvar r={row:0, col:0};\r\n\t\tvar len=str.length;\r\n\t\tfor (var i=0 ; i<len ;i++) {\r\n\t\t\tvar c=str.substring(i,i+1);\r\n\t\t\tif (incdec[c]) {\r\n\t\t\t\tif (!linfo[r.row]) linfo[r.row]=\"\";\r\n\t\t\t\tlinfo[r.row]+=c;\r\n\t\t\t} else if (c==\"\\n\") {\r\n\t\t\t\tr.row++;\r\n\t\t\t\tr.col=0;\r\n\t\t\t} else {\r\n\t\t\t\tr.col++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//console.log(linfo);\r\n\tvar res=\"\";\r\n\tvar lines=str.split(\"\\n\");\r\n\tvar curDepth=0;\r\n\tvar row=0;\r\n\tlines.forEach(function (line) {\r\n\t\tvar opens=0, closes=0;\r\n\t\tline=line.replace(/^\\s* ?/,\"\");\r\n\t\tif (linfo[row]!=null) {\r\n\t\t\tlinfo[row].match(/^(\\}*)/);\r\n\t\t\tcloses=RegExp.$1.length;\r\n\t\t\tlinfo[row].match(/(\\{*)$/);\r\n\t\t\topens=RegExp.$1.length;\r\n\t\t}\r\n\t\tcurDepth-=closes;\r\n\t\tline=indStr()+line;\r\n\t\tcurDepth+=opens;\r\n\t\tres+=line+\"\\n\";\r\n\t\trow++;\r\n\t});\r\n\tres=res.replace(/\\n$/,\"\");\r\n\t//console.log(res);\r\n\treturn res;\r\n\tfunction indStr() {\r\n\t\tvar res=\"\";\r\n\t\tfor (var i=0 ;i<curDepth ;i++) {\r\n\t\t\tres+=indentStr;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction pos2RC(str, pos) {\r\n\t\tvar res={row:0, col:0};\r\n\t\tvar len=Math.min(str.length,pos);\r\n\t\tfor (var i=0 ; i<len ;i++) {\r\n\t\t\tif (str.substring(i,i+1)==\"\\n\") {\r\n\t\t\t\tres.row++;\r\n\t\t\t\tres.col=0;\r\n\t\t\t} else {\r\n\t\t\t\tres.col++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n};*/\r\n});\r\n\nfunction HttpHelper(options) {\r\n    var $h={};\r\n    var lineMark=options.lineMark;\r\n    $h.buf=$(\"<div>\");\r\n    $h.bufs=[$h.buf];\r\n    $h.maxLineNo=-1;\r\n    $h.cur=function () {\r\n        return $h.bufs[$h.bufs.length-1];\r\n    };\r\n    function mon(s) {\r\n        if (typeof s==\"string\") return s;\r\n        if (!s[0]) throw s+ \" is not jquery obj\";\r\n        return \"<\"+s[0].tagName+\">\"+s.html()+\"</\"+s[0].tagName+\">\";\r\n    }\r\n    $h.p=function (s) {\r\n        if (typeof s==\"string\") {\r\n            if (s.length>0) {\r\n                s=$(\"<span>\").text(s);\r\n            } else {\r\n                s=null;\r\n            }\r\n        }\r\n        //console.log(\"Append - \"+mon(s)+\" to \"+mon($h.cur()));\r\n        if ($h.cur()) {\r\n            if ($h.lineNo>$h.maxLineNo) {\r\n                $h.maxLineNo=$h.lineNo;\r\n                $h.cur().append($(\"<a>\").attr({id:lineMark+\"-\"+$h.lineNo, name:lineMark+\"-\"+$h.lineNo}));\r\n            }\r\n            if (s) $h.cur().append(s);\r\n        } else {\r\n            console.log(\"Warning - Stack underflow\");\r\n        }\r\n    };\r\n    $h.enter=function (s) {\r\n        //console.log(\"Enter - \"+s+\"  size=\"+$h.bufs.length);\r\n        if (typeof s==\"string\") s=$(s);\r\n        $h.bufs.push(s);\r\n    };\r\n    $h.exit=function () {\r\n        var s=$h.bufs.pop();\r\n        $h.p(s);\r\n        //console.log(\"Exit - \"+s.html()+\"  size=\"+$h.bufs.length);\r\n    };\r\n    $h.h=function (s) {\r\n        return s.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");\r\n    };\r\n    return $h;\r\n};\ndefine(\"HttpHelper\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.HttpHelper;\n    };\n}(this)));\n\nArrow=function () {\r\n    var A={};\r\n    A.show=function (t) {\r\n        if (typeof t==\"string\") t=$(t);\r\n        if (t.length==0) return false;\r\n        var b=$.data(t[0],\"blinking\");\r\n        if (b==\"t\") return;\r\n        $.data(t[0],\"blinking\",\"t\");\r\n        var cnt=3;\r\n        function on() {\r\n            t.addClass(\"tutorial-highlight\");\r\n            setTimeout(off,200);\r\n        }\r\n        function off() {\r\n            t.removeClass(\"tutorial-highlight\");\r\n            if (cnt-->0) setTimeout(on,200);\r\n            else clear();\r\n        }\r\n        on();\r\n        function clear() {\r\n            cnt=0;\r\n            $.data(t[0],\"blinking\",\"f\");\r\n        }\r\n        t.click(function () {\r\n            clear();\r\n        });\r\n    };\r\n    A.showOld=function (t) {\r\n        if (typeof t==\"string\") t=$(t);\r\n        if (t.length==0) return false;\r\n        var p=t.offset();\r\n        var arrow=$(\"<img>\").attr({src:\"images/arrow0.png\"}).css(\r\n                {font: \"40px\", position: \"absolute\", left:p.left, top:p.top+t.height(), color:\"red\", zIndex:1000,\r\n                    \"z-index\":1000}).\r\n                appendTo(\"body\");\r\n        var cnt=0;\r\n        function up() {\r\n            if (!arrow) return;\r\n            arrow.attr({ src:\"images/arrow\"+cnt+\".png\" });\r\n            cnt=(cnt+1)%4;\r\n        }\r\n        setInterval(up,250);\r\n        t.click(function () {\r\n           if (!arrow) return;\r\n           arrow.remove();\r\n           arrow=null;\r\n        });\r\n        return true;\r\n    };\r\n    return A;\r\n}();\ndefine(\"Arrow\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Arrow;\n    };\n}(this)));\n\ndefine('Platform',[],function () {\r\n    var WebSite={};\r\n    // from https://w3g.jp/blog/js_browser_sniffing2015\r\n    var u=window.navigator.userAgent.toLowerCase();\r\n    WebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1)\r\n    || u.indexOf(\"ipad\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1)\r\n    || u.indexOf(\"kindle\") != -1\r\n    || u.indexOf(\"silk\") != -1\r\n    || u.indexOf(\"playbook\") != -1;\r\n    WebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1)\r\n    || u.indexOf(\"iphone\") != -1\r\n    || u.indexOf(\"ipod\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || u.indexOf(\"blackberry\") != -1;\r\n    return WebSite;\r\n});\r\n\n/*global process, require, BuiltinAssets */\r\ndefine('WebSite',[\"FS\",\"Platform\"], function (FS,Platform) {\r\n\tvar P=FS.PathUtil;\r\n\tvar loc=document.location.href;\r\n\tvar devMode=!!loc.match(/html\\/dev\\//) && !!loc.match(/localhost:3/);\r\n\tvar WebSite;\r\n\tvar prot=location.protocol;\r\n\tvar k;\r\n\tif (!prot.match(/^http/)) prot=\"https:\";\r\n\tswitch(window.WebSite_runType) {\r\n\tcase \"IDE\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.builtinAssetNames={\r\n\t\t\t\"images/Ball.png\":1,\r\n\t\t\t\"images/base.png\":1,\r\n\t\t\t\"images/Sample.png\":1,\r\n\t\t\t\"images/inputPad.png\":1,\r\n\t\t\t\"images/neko.png\":1,\r\n\t\t\t\"images/mapchip.png\":1\r\n\t\t};\r\n\t\tif (!WebSite.pluginTop) {\r\n\t\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\t}\r\n\t\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.noconcat=true;\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\t\tif (process.env.TONYU_HOME) {\r\n\t\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t\t}\r\n\t\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\t\td=P.directorify(d);\r\n\t\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t\t}\r\n\t\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t} else {\r\n\t\t\tif (loc.match(/edit\\.tonyu\\.jp\\/n\\//)) {\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/n/\";\r\n\t\t\t} else {\r\n\t\t\t\t// Why?\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\t\t}\r\n\t\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t// compiledKernel is URL , not file path.\r\n\t\t// It is correct as long as the html pages in www/ (not html/build|dev )\r\n\t\tWebSite.compiledKernel=\"Kernel/js/concat.js\";   //P.rel(WebSite.kernelDir,\"js/concat.js\");\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.version=2;\r\n\t\tWebSite.hoge=\"fuga\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"singleHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tif (typeof BuiltinAssets===\"object\") {\r\n\t\t\tfor (k in BuiltinAssets) {\r\n\t\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.scriptServer=\"http://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.pluginTop=WebSite.scriptServer+\"js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.compiledKernel=WebSite.scriptServer+\"Kernel/js/concat.js\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"multiHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t}\r\n\t\t// this sets at runScript2.js\r\n\t\t//WebSite.compiledKernel=WebSite.top+\"/js/kernel.js\";\r\n\t\t//-------------\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\t}\r\n\r\n\tif (loc.match(/jsrun\\.it/)) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"http:\"+\"//jsrun.it/assets/9/X/T/b/9XTbt.png\",\r\n\t\t\t\t\"images/base.png\":\"http:\"+\"//jsrun.it/assets/6/F/y/3/6Fy3B.png\",\r\n\t\t\t\t\"images/Sample.png\":\"http:\"+\"//jsrun.it/assets/s/V/S/l/sVSlZ.png\",\r\n\t\t\t\t\"images/neko.png\":\"http:\"+\"//jsrun.it/assets/f/D/z/z/fDzze.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"http:\"+\"//jsrun.it/assets/f/u/N/v/fuNvz.png\"\r\n\t\t\t},top:\"\",devMode:devMode,\r\n\t\t\tpluginTop: \"https://edit.tonyu.jp/js/plugins\",\r\n\t\t\tremoveJSOutput:true\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/) ||\r\n\t\t(\r\n\t\t/*(\r\n\t\t\tloc.match(/^chrome-extension:/) ||\r\n\t\t\tloc.match(/localhost/) ||\r\n\t\t\tloc.match(/tonyuedit\\.appspot\\.com/)\r\n\t\t) &&*/\r\n\t\tloc.match(/\\/html\\/((dev)|(build))\\//)\r\n\t\t)\r\n\t) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"../../images/Ball.png\",\r\n\t\t\t\t\"images/base.png\":\"../../images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":\"../../images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":\"../../images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"../../images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":\"../../images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":\"../../images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":\"../../images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":\"../../images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":\"../../images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":\"../../images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":\"../../images/sound_wav.png\",\r\n\t\t\t\t\t\"images/ecl.png\":\"../../images/ecl.png\"\r\n\t\t\t},top:\"../..\",devMode:devMode\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/bitarrow/) ||\r\n\t\tloc.match(/localhost.*pub/))  {\r\n\t\tWebSite={};\r\n\t\tvar WS=WebSite;\r\n\t\tWebSite.serverType=\"BA\";\r\n\t\tWS.runtime=\"../../../runtime/\";\r\n\t\tWS.urlAliases= {\r\n\t\t\t\t\"images/base.png\":WS.runtime+\"images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":WS.runtime+\"images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":WS.runtime+\"images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":WS.runtime+\"images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":WS.runtime+\"images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":WS.runtime+\"images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":WS.runtime+\"images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":WS.runtime+\"images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":WS.runtime+\"images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":WS.runtime+\"images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":WS.runtime+\"images/sound_wav.png\",\r\n\t\t\t\t\"images/ecl.png\":WS.runtime+\"images/ecl.png\"\r\n\t\t};\r\n\t} else {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",devMode:devMode\r\n\t\t};\r\n\t}\r\n\tif (typeof BuiltinAssets===\"object\") {\r\n\t\tfor (k in BuiltinAssets) {\r\n\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t}\r\n\t}\r\n\tWebSite.builtinAssetNames={\r\n\t\t\"images/Ball.png\":1,\r\n\t\t\"images/base.png\":1,\r\n\t\t\"images/Sample.png\":1,\r\n\t\t\"images/neko.png\":1,\r\n\t\t\"images/mapchip.png\":1\r\n\t};\r\n\t// from https://w3g.jp/blog/js_browser_sniffing2015\r\n\tvar u=window.navigator.userAgent.toLowerCase();\r\n\tWebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1) ||\r\n\tu.indexOf(\"ipad\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1) ||\r\n\tu.indexOf(\"kindle\") != -1 ||\r\n\tu.indexOf(\"silk\") != -1 ||\r\n\tu.indexOf(\"playbook\") != -1;\r\n\tWebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1) ||\r\n\tu.indexOf(\"iphone\") != -1 ||\r\n\tu.indexOf(\"ipod\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\tu.indexOf(\"blackberry\") != -1;\r\n\r\n\tif (!WebSite.pluginTop) {\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t}\r\n\tWebSite.disableROM={};\r\n\t/*if (loc.match(/tonyuedit\\.appspot\\.com/) || loc.match(/localhost:8888/) ) {\r\n\t\t//WebSite.disableROM={\"ROM_d.js\":true};\r\n\t}*/\r\n\tif (loc.match(/\\.appspot\\.com/) ||  loc.match(/localhost:888[87]/)) {\r\n\t\tWebSite.serverType=\"GAE\";\r\n\t}\r\n\tif (loc.match(/localhost:3000/) ) {\r\n\t\tWebSite.serverType=\"Node\";\r\n\t}\r\n\tif (loc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/)) {\r\n\t\tWebSite.serverTop=WebSite.top+\"/exe\"; // Fix NetModule.tonyu!!\r\n\t} else {\r\n\t\tWebSite.serverTop=WebSite.top+\"/edit\";// Fix NetModule.tonyu!!\r\n\t}\r\n\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\tWebSite.blobPath=WebSite.serverTop+\"/serveBlob\";        //TODO: urlchange!\r\n\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\tWebSite.mp4Disabled=WebSite.isNW;\r\n\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\tWebSite.url={\r\n\t\tgetDirInfo:WebSite.serverTop+\"/getDirInfo\",\r\n\t\tgetFiles:WebSite.serverTop+\"/File2LSSync\",\r\n\t\tputFiles:WebSite.serverTop+\"/LS2FileSync\"\r\n\t};\r\n\tWebSite.PathSep=\"/\";\r\n\tif (WebSite.isNW) {\r\n\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\tif (process.env.TONYU_HOME) {\r\n\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t} else {\r\n\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t}\r\n\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\tWebSite.platform=process.platform;\r\n\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\td=P.directorify(d);\r\n\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t} else {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/)) {\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=prot+\"//\"+location.host+\"/Kernel/\";\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/) ||\r\n\t\tWebSite.isNW) {\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t} else if (WebSite.serverType===\"BA\") {\r\n\t\tWebSite.compiledKernel=WebSite.runtime+\"lib/tonyu/kernel.js\";\r\n\t} else {\r\n\t\tWebSite.compiledKernel=\"https://edit.tonyu.jp/Kernel/js/concat.js\";\r\n\t\t//WebSite.compiledKernel=prot+\"//tonyuexe.appspot.com/Kernel/js/concat.js\";\r\n\t}\r\n\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t} else {\r\n\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t}\r\n\r\n\tif (loc.match(/((index)|(project))2/)) {\r\n\t\tWebSite.version=2;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.devMode=true;\r\n\t\t} else {\r\n\t\t\tWebSite.devMode=false;\r\n\t\t}\r\n\t}\r\n\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\twindow.WebSite=WebSite;\r\n\treturn WebSite;\r\n});\r\n\ndefine('assert',[\"FS\"],function (FS){return FS.assert;});\r\n\ndefine('Shell',[\"FS\",\"assert\"],\r\n        function (FS,assert) {\r\n    var Shell={};\r\n    var PathUtil=assert(FS.PathUtil);\r\n    Shell.newCommand=function (name,func) {\r\n        this[name]=func;\r\n    };\r\n    Shell.cd=function (dir) {\r\n        Shell.cwd=resolve(dir,true);\r\n        return Shell.pwd();\r\n    };\r\n    Shell.vars=Object.create(FS.getEnv());\r\n    Shell.mount=function (options, path) {\r\n        //var r=resolve(path);\r\n        if (!options || !options.t) {\r\n            var fst=[];\r\n            for (var k in FS.getRootFS().availFSTypes()) {\r\n                fst.push(k);\r\n            }\r\n            sh.err(\"-t=(\"+fst.join(\"|\")+\") should be specified.\");\r\n            return;\r\n        }\r\n        FS.mount(path,options.t, options);\r\n    };\r\n    Shell.unmount=function (path) {\r\n        FS.unmount(path);\r\n    };\r\n    Shell.fstab=function () {\r\n        var rfs=FS.getRootFS();\r\n        var t=rfs.fstab();\r\n        var sh=this;\r\n        //sh.echo(rfs.fstype()+\"\\t\"+\"<Root>\");\r\n        t.forEach(function (fs) {\r\n            sh.echo(fs.fstype()+\"\\t\"+(fs.mountPoint||\"<Default>\"));\r\n        });\r\n    }\r\n    Shell.resolve=resolve;\r\n    function resolve(v, mustExist) {\r\n        var r=resolve2(v);\r\n        if (!FS.SFile.is(r)) {console.log(r,\" is not file\");}\r\n        if (mustExist && !r.exists()) throw new Error(r+\": no such file or directory\");\r\n        return r;\r\n    }\r\n    function resolve2(v) {\r\n        if (typeof v!=\"string\") return v;\r\n        var c=Shell.cwd;\r\n        if (PathUtil.isAbsolutePath(v)) return FS.resolve(v,c);\r\n        return c.rel(v);\r\n    }\r\n    Shell.pwd=function () {\r\n        return Shell.cwd+\"\";\r\n    };\r\n    Shell.ls=function (dir){\r\n    \tif (!dir) dir=Shell.cwd;\r\n    \telse dir=resolve(dir, true);\r\n        return dir.ls();\r\n    };\r\n    Shell.cp=function (from ,to ,options) {\r\n        if (!options) options={};\r\n        if (options.v) {\r\n            Shell.echo(\"cp\", from ,to);\r\n            options.echo=Shell.echo.bind(Shell);\r\n        }\r\n        var f=resolve(from, true);\r\n        var t=resolve(to);\r\n        return f.copyTo(t,options);\r\n    };\r\n    Shell.ln=function (to , from ,options) {\r\n        var f=resolve(from);\r\n        var t=resolve(to, true);\r\n        if (f.isDir() && f.exists()) {\r\n            f=f.rel(t.name());\r\n        }\r\n        if (f.exists()) {\r\n            throw new Error(f+\" exists\");\r\n        }\r\n        return f.link(t,options);\r\n    };\r\n    Shell.rm=function (file, options) {\r\n        if (!options) options={};\r\n        if (options.notrash) {\r\n            file=resolve(file, false);\r\n            file.removeWithoutTrash();\r\n            return 1;\r\n        }\r\n        file=resolve(file, true);\r\n        if (file.isDir() && options.r) {\r\n            var dir=file;\r\n            var sum=0;\r\n            dir.each(function (f) {\r\n                if (f.exists()) {\r\n                    sum+=Shell.rm(f, options);\r\n                }\r\n            });\r\n            dir.rm();\r\n            return sum+1;\r\n        } else {\r\n            file.rm();\r\n            return 1;\r\n        }\r\n    };\r\n    Shell.mkdir=function (file,options) {\r\n        file=resolve(file, false);\r\n        if (file.exists()) throw new Error(file+\" : exists\");\r\n        return file.mkdir();\r\n\r\n    };\r\n    Shell.cat=function (file,options) {\r\n        file=resolve(file, true);\r\n        return Shell.echo(file.getContent(function (c) {\r\n            if (file.isText()) {\r\n                return c.toPlainText();\r\n            } else {\r\n                return c.toURL();\r\n            }\r\n        }));\r\n    };\r\n    Shell.resolve=function (file) {\r\n        if (!file) file=\".\";\r\n        file=resolve(file);\r\n        return file;\r\n    };\r\n    Shell.grep=function (pattern, file, options) {\r\n        file=resolve(file, true);\r\n        if (!options) options={};\r\n        if (!options.res) options.res=[];\r\n        if (file.isDir()) {\r\n            file.each(function (e) {\r\n                Shell.grep(pattern, e, options);\r\n            });\r\n        } else {\r\n            if (typeof pattern==\"string\") {\r\n                file.lines().forEach(function (line, i) {\r\n                    if (line.indexOf(pattern)>=0) {\r\n                        report(file, i+1, line);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return options.res;\r\n        function report(file, lineNo, line) {\r\n            if (options.res) {\r\n                options.res.push({file:file, lineNo:lineNo,line:line});\r\n            }\r\n            Shell.echo(file+\"(\"+lineNo+\"): \"+line);\r\n\r\n        }\r\n    };\r\n    Shell.touch=function (f) {\r\n    \tf=resolve(f);\r\n    \tf.text(f.exists() ? f.text() : \"\");\r\n    \treturn 1;\r\n    };\r\n    Shell.setout=function (ui) {\r\n        Shell.outUI=ui;\r\n    };\r\n    Shell.echo=function () {\r\n        return $.when.apply($,arguments).then(function () {\r\n            console.log.apply(console,arguments);\r\n            if (Shell.outUI && Shell.outUI.log) Shell.outUI.log.apply(Shell.outUI,arguments);\r\n        });\r\n    };\r\n    Shell.err=function (e) {\r\n        console.log.apply(console,arguments);\r\n        if (e && e.stack) console.log(e.stack);\r\n        if (Shell.outUI && Shell.outUI.err) Shell.outUI.err.apply(Shell.outUI,arguments);\r\n    };\r\n    Shell.clone= function () {\r\n        var r=Object.create(this);\r\n        r.vars=Object.create(this.vars);\r\n        return r;\r\n    };\r\n    Shell.getvar=function (k) {\r\n        return this.vars[k] || (process && process.env[k]);\r\n    };\r\n    Shell.get=Shell.getvar;\r\n    Shell.set=function (k,v) {\r\n        return this.vars[k]=v;\r\n    };\r\n    Shell.strcat=function () {\r\n        if (arguments.length==1) return arguments[0];\r\n        var s=\"\";\r\n        for (var i=0;i<arguments.length;i++) s+=arguments[i];\r\n        return s;\r\n    };\r\n    Shell.exists=function (f) {\r\n        f=this.resolve(f);\r\n        return f.exists();\r\n    };\r\n    Shell.dl=function (f) {\r\n        f=this.resolve(f||\".\");\r\n        return f.download();\r\n    };\r\n    Shell.zip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.zip.apply(FS.zip,a);\r\n    };\r\n    Shell.unzip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.unzip.apply(FS.zip,a);\r\n    };\r\n\r\n    Shell.prompt=function () {};\r\n    Shell.ASYNC={r:\"SH_ASYNC\"};\r\n    Shell.help=function () {\r\n        for (var k in Shell) {\r\n            var c=Shell[k];\r\n            if (typeof c==\"function\") {\r\n                Shell.echo(k+(c.description?\" - \"+c.description:\"\"));\r\n            }\r\n        }\r\n    };\r\n    if (!window.sh) window.sh=Shell;\r\n    if (typeof process==\"object\") {\r\n        sh.devtool=function () { require('nw.gui').Window.get().showDevTools();}\r\n        sh.cd(process.cwd().replace(/\\\\/g,\"/\"));\r\n    } else {\r\n        sh.cd(\"/\");\r\n    }\r\n    return Shell;\r\n});\r\n\ndefine('Log',[\"FS\",\"WebSite\",\"Shell\"], function (FS,WebSite,sh) {\r\n    var Log={};\r\n    var logHome=WebSite.logdir ? FS.resolve(\"${logdir}\") : null;\r\n    var doLog=logHome && logHome.exists();\r\n    Log.todayDir=function () {\r\n        var d=new Date();\r\n        var y=d.getFullYear();\r\n        var m=d.getMonth()+1;\r\n        var da=d.getDate();\r\n        return logHome.rel(y+\"/\").rel(m+\"/\").rel(da+\"/\");\r\n    };\r\n    Log.curFile=function () {\r\n        var d=new Date();\r\n        var y=d.getFullYear();\r\n        var m=d.getMonth()+1;\r\n        var da=d.getDate();\r\n        return Log.todayDir().rel(y+\"-\"+m+\"-\"+da+\".log\");\r\n    };\r\n    Log.curProject=function () {\r\n        var d=new Date();\r\n        var h=d.getHours();\r\n        var m=d.getMinutes();\r\n        var s=d.getSeconds();\r\n        return Log.todayDir().rel(\"Project/\").rel(digit(h,2)+\"_\"+digit(m,2)+\"_\"+digit(s,2)+\"/\");\r\n    };\r\n    function digit(n,zs) {\r\n        n=\"00000000000000\"+n;\r\n        return n.substring(n.length-zs);\r\n    }\r\n    Log.dumpProject=function (dir) {\r\n        if (!doLog) return;\r\n        var out=Log.curProject();\r\n        sh.cp(dir, out);\r\n        Log.append(\"Dumped project to \"+out.path());\r\n    };\r\n    if (!WebSite.logging && !WebSite.isNW) {\r\n        var varlog=FS.get(\"/var/log/\");\r\n        if (varlog.exists() && varlog.fs.storage===localStorage) {\r\n            varlog.removeWithoutTrash({r:true});\r\n        }\r\n    }\r\n    Log.append=function (line) {\r\n        if (!doLog) return;\r\n        //if (WebSite.isNW) return;\r\n        var f=Log.curFile();\r\n        //console.log(Log, \"append \"+f);\r\n        var t=(f.exists()?f.text():\"\");\r\n        f.text(t+line+\"\\n\");\r\n    };\r\n    function mul(con) {\r\n        return con.replace(/\\n/g,\"\\n|\");\r\n    }\r\n    Log.d=function (tag,con) {\r\n        Log.append(new Date()+\": [\"+tag+\"]\"+mul(con));\r\n    };\r\n    Log.e=function (tag,con) {\r\n        Log.append(new Date()+\": ERROR[\"+tag+\"]\"+mul(con));\r\n    };\r\n    return Log;\r\n});\ndefine('Wiki',[\"HttpHelper\", \"Arrow\", \"Util\",\"WebSite\",\"Log\",\"UI\",\"FS\"],\r\nfunction (HttpHelper, Arrow, Util, WebSite,Log,UI,FS) {\r\n// MD https://qiita.com/tbpgr/items/989c6badefff69377da7\r\nreturn Wiki=function (placeHolder, home, options, plugins) {\r\n    var W={};\r\n    var refers={figures:\"\", plists: \"\"};\r\n    var SEQ=\"__seq__\";\r\n    var LINEMARK=\"line_marker_\";//+Math.floor(Math.random()*100000);\r\n    var on={};\r\n    var history=[];\r\n    var EXT=\".txt\";\r\n    if (!options) options={};\r\n    if (home && !home.isDir()) throw home+\": not a dir\";\r\n    var cwd,tocFile;\r\n    W.on=on;\r\n    W.cd=function (dir) {\r\n    \tcwd=dir;\r\n    \ttocFile=cwd.rel(\"toc.json\");\r\n    };\r\n    if (home) W.cd(home);\r\n    W.encodeURL=function (name) {\r\n        return encodeURI(name).replace(/%/g,\"\");\r\n    };\r\n    W.parse=function (body,name,file) {\r\n        var ctx={};\r\n        var $h=HttpHelper({lineMark:LINEMARK});\r\n        ctx.out=$h;\r\n        ctx.name=name;\r\n        ctx.lines=body.split(/\\r?\\n/);\r\n        ctx.lineNo=0;\r\n        ctx.ul=0;\r\n        ctx.beginMark=\"[[\";\r\n        ctx.endMark=\"]]\";\r\n        ctx.blocks=[];\r\n        var figInfo=refInfo(\"figures\");\r\n        var plistInfo=refInfo(\"plists\");\r\n        //ctx.figures={};\r\n        //ctx.figseq=1;\r\n        var toc=[];\r\n        if (tocFile && tocFile.exists()) toc=tocFile.obj();\r\n        var idx=toc.indexOf(name);\r\n        if (idx>=0) {\r\n            var navBar=\"\";\r\n            var prev=toc[idx-1];\r\n            if (prev) navBar+=\"[[>\"+prev+\"]]\";\r\n            var next=toc[idx+1];\r\n            if (next) navBar+=\" - [[>\"+next+\"]]\";\r\n            var top=toc[0];\r\n            if (idx!=0) navBar+=\" - [[>\"+top+\"]]\";\r\n            ctx.lines.unshift(navBar);\r\n            ctx.lines.push(navBar);\r\n        }\r\n        ctx.lines.forEach(parseLine);\r\n        function refInfo(type) {// figures / plists\r\n            ctx[type]={};\r\n            var seq=1;\r\n            var res=function (name, register) {\r\n                var fi=ctx[type][name];\r\n                if (!fi) {\r\n                    fi={\r\n                        refs:[]\r\n                    };\r\n                    //console.log(\"reg \"+type+\" \"+name);\r\n                    ctx[type][name]=fi;\r\n                }\r\n                if (register) {\r\n                    fi.no=seq++;\r\n                    fi.name=refers[type]+fi.no;//  / \r\n                    fi.refs.forEach(function (e) {\r\n                        e.text(fi.name);\r\n                    });\r\n                }\r\n                return fi;\r\n            };\r\n            return res;\r\n        }\r\n\r\n        return $h.buf;\r\n        function parseLine(line) {\r\n            $h.lineNo=ctx.lineNo;\r\n            function unul(to) {\r\n                if (to==null) to=0;\r\n                while (ctx.ul>to) {\r\n                    ctx.ul--;\r\n                    $h.exit();//$.p(\"</ul>\");\r\n                }\r\n            }\r\n            var uld=0;\r\n            if (line.match(/^-+/)) {\r\n                /*MD\r\n- 1\r\n    -  1_1\r\n        -  1_1_1\r\n        -  1_1_2\r\n    -  1_2\r\n- 2\r\n- 3\r\n                */\r\n                uld=RegExp.lastMatch.length;\r\n            }\r\n            if (uld>ctx.ul) {\r\n                while(uld>ctx.ul) {\r\n                    ctx.ul++;\r\n                    $h.enter(\"<ul>\");\r\n                }\r\n            } else unul(uld);\r\n            line=line.substring(uld);\r\n            if (uld>0) $h.enter(\"<li>\");\r\n            if (line.match(/^\\*+/)) {// MD  #\r\n                var r=RegExp.rightContext;\r\n                //unul();\r\n                var h=\"h\"+RegExp.lastMatch.length;\r\n                $h.enter(\"<\"+h+\">\");//$.p(\"<\"+h+\">\");\r\n                parseLink(r);\r\n                $h.exit();// $.p(\"</\"+h+\">\\n\");\r\n            } else if (line.match(/^$/)) {\r\n                unul();\r\n                $h.p($(\"<p>\")); //$.p(\"<p>\\n\");\r\n            } else if (line.match(/^<<toc(.*)/)) {\r\n                ctx.toc=[ctx.name];\r\n                ctx.blocks.push({name: \"toc\", exit: function () {\r\n                    if (tocFile && !tocFile.isReadOnly()) tocFile.obj(ctx.toc);\r\n                    ctx.toc=null;\r\n                }});\r\n            } else if (line.match(/^<<code(.*)/)) {\r\n/*\r\nMD 4pre\r\n    # Tab\r\n    class Hoge\r\n        def hoge\r\n            print 'hoge'\r\n        end\r\n    end\r\n*/\r\n                var s=RegExp.$1;\r\n                s=s.replace(/^ */,\"\");\r\n                if (s.length>0) {\r\n                    var ss=s.split(/ /,2);\r\n                    var label, fn;\r\n                    if (ss.length==2) {\r\n                        fn=ss[0];\r\n                        label=ss[1];\r\n                        var pi=plistInfo(label, true);\r\n                        $h.p($(\"<div>\").addClass(\"plist\").text(pi.name+\" \"+fn));\r\n                    } else {\r\n                        $h.p($(\"<div>\").addClass(\"plist\").text(ss));\r\n                    }\r\n                }\r\n                $h.enter(\"<pre>\");\r\n                ctx.blocks.push({name: \"code\", exit: function () {$h.exit();}});\r\n            } else if (line.match(/^>>/)) {\r\n                var b=ctx.blocks.pop();\r\n                if (b && b.exit) b.exit(ctx);\r\n            } else if (line.match(/^@@@@(.*)/)) {\r\n                //unul();\r\n                if (ctx.pclose) $h.exit();//$.p(\"</pre>\");\r\n                else {\r\n                    if (RegExp.$1.length>0) {\r\n                        var pi=plistInfo(RegExp.$1, true);\r\n                        $h.p($(\"<div>\").addClass(\"plist\").text(pi.name));\r\n                    }\r\n                    $h.enter(\"<pre>\");\r\n                }\r\n                ctx.pclose=!ctx.pclose;\r\n            } else {\r\n                //unul();\r\n                parseLink(line);\r\n                $h.p(\"\\n\");\r\n            }\r\n            if (uld>0) $h.exit();\r\n            ctx.lineNo++;\r\n        }\r\n        function parseLink(line) {\r\n            var w=(typeof line==\"string\"?\r\n                    WikiBraces(line, ctx.beginMark,ctx.endMark)\r\n                    : line);\r\n            w.forEach(function (e) {\r\n                if (typeof e==\"string\") {\r\n                    $h.p(e);\r\n                } else {\r\n                    procLink(e);\r\n                }\r\n            });\r\n            function procLink(e) {\r\n                var name=e.text();\r\n                var a;\r\n                if (name.match(/^@blink ([^>]+)>([^\\s]+)/)) {\r\n                    caption=RegExp.$1;\r\n                    var target=RegExp.$2;\r\n                    a=$(\"<span>\").addClass(\"clickable\").text(caption).hover(function () {\r\n                        var a;\r\n                        if (parent && parent.Arrow) a=parent.Arrow;\r\n                        if (Arrow) a=Arrow;\r\n                        if (a) a.show( target );\r\n                    });\r\n                } else if (name.match(/^@plistref (.*)/)) {\r\n                    var label=RegExp.$1;\r\n                    //console.log(\"fi.l =\"+label);\r\n                    var fi=plistInfo(label);\r\n                    //console.log(\"fi = \"+fi.name);\r\n                    a=$(\"<strong>\").text(fi.name);\r\n                    fi.refs.push(a);\r\n                } else if (name.match(/^@editadd/)) {\r\n                    $h.p($(\"<img>\").attr(\"src\",WebSite.top+\"/images/editAdd.png\"));\r\n                } else if (name.match(/^@figref (.*)/)) {\r\n                    var fi=figInfo(RegExp.$1);\r\n                    a=$(\"<strong>\").text(fi.name);\r\n                    fi.refs.push(a);\r\n                } else if (name.match(/^@cfrag (.*)/)) {\r\n                    // MD `code`\r\n                    var code=RegExp.$1\r\n                    a=$(\"<code>\");\r\n                    $h.enter(a);\r\n                    parseLink(code);\r\n                    $h.exit();\r\n                } else if (name.match(/^@arg (.*)/)) {\r\n                    // MD *code*\r\n                    var varn=RegExp.$1\r\n                    a=$(\"<i>\");\r\n                    $h.enter(a);\r\n                    parseLink(varn);\r\n                    $h.exit();\r\n                } else {\r\n                    // MD [](URL)\r\n                    // MD ![](URL \"\")\r\n                    var cn=e.split(\">\",2);\r\n                    if (cn.length==2) {\r\n                        name=cn[1]+\"\";\r\n                        caption=cn[0];\r\n                    } else caption=name;\r\n                    if (ctx.toc) ctx.toc.push(name);\r\n                    if (name.match(/\\.(png|jpg|gif)$/) && !name.match(/^http/)) {\r\n                        var fi=figInfo(name, true);\r\n                        a=$(\"<div>\").addClass(\"figure\").append(\r\n                                  imageHolder(name)\r\n                           );\r\n                        $h.enter(a);\r\n                        $h.enter($(\"<div>\"));\r\n                        $h.p(refers.figures+fi.no+\".\");\r\n                        parseLink(caption); //$h.p(caption);\r\n                        $h.exit();\r\n                        $h.exit();\r\n                    } else {\r\n                    \tif (name.match(/^https?:\\/\\//)) {\r\n                    \t\ta=$(\"<a>\").attr({href:name,target:\"ext\"}).text(caption);\r\n                    \t} else {\r\n                    \t\tvar f=W.resolveFile(name);\r\n                    \t\tif (!f.exists() && (f.isReadOnly() || !options.editMode)) {\r\n                    \t\t\ta=$(\"<span>\").text(caption);\r\n                    \t\t} else {\r\n                    \t\t    if (options.useAnchor) {\r\n                    \t\t       // a=$(\"<a>\").attr({href:\"wiki.html?file=\"+f.path()}).text(caption);\r\n                    \t\t        var ahref=f.relPath(file.up()).replace(/\\.txt$/,\".html\");\r\n                                    ahref=W.encodeURL(ahref);// encodeURI(ahref).replace(/%/g,\"_\");\r\n                                    a=$(\"<a>\").attr({href:ahref}).text(caption);\r\n                                    //a=$(\"<a>\").attr({href:\"?file=\"+f.path()}).text(caption);\r\n                    \t\t    } else {\r\n                                    a=$(\"<span>\").addClass(\"clickable\").text(caption).click(function () {\r\n                                        W.show(f);\r\n                                    });\r\n                    \t\t    }\r\n                    \t\t\tif (!f.exists()) a.addClass(\"notexist\");\r\n                    \t\t}\r\n                    \t}\r\n                    }\r\n                }\r\n                $h.p(a);\r\n            }\r\n        }\r\n    };\r\n    function imageHolder(name) {\r\n        var res,imfile;\r\n        if (W.builtinImages[name]) {\r\n            return $(\"<div>\").append( $(\"<img>\").attr(\"src\", WebSite.top+\"/doc/images/\"+name) );\r\n        } else {\r\n            res=UI(\"div\", {style:\"margin:10px; padding:10px; border:solid black 1px;\",\r\n                on:{dragover: s, dragenter: s, drop:dropAdd}},\r\n                    \"(png/gif/jpg)\"\r\n            );\r\n            var thome=FS.get(WebSite.tonyuHome);\r\n            imfile=thome.rel(\"doc/images/\").rel(name);\r\n            if (imfile.exists()) {\r\n                res.empty().append(UI(\"img\",{src:imfile.text() }));\r\n            }\r\n            return res;\r\n        }\r\n        function s(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n        function dropAdd(e) {\r\n            if (!options.editMode) return;\r\n            var eo=e.originalEvent;\r\n            var file = eo.dataTransfer.files[0];\r\n            if(!file.type.match(/image\\/(png|gif|jpg)/)[1]) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                return false;\r\n            }\r\n            var reader = new FileReader();\r\n            reader.onload = function(e) {\r\n                var fileContent = reader.result;\r\n                imfile.text(fileContent);\r\n                res.empty().append(UI(\"img\",{src:fileContent}));\r\n            };\r\n            reader.readAsDataURL(file);\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            return false;\r\n        }\r\n    }\r\n    W.resolveFile=function (name) {\r\n        var f;\r\n        if (name.isDir) f=name;\r\n        else if (cwd && name.substring(0,1)!=\"/\") f=cwd.rel(name+EXT);\r\n        else f=FS.get(name);\r\n        return f;\r\n    };\r\n    W.show=function (nameOrFile) {\r\n        var f=W.resolveFile(nameOrFile);\r\n        if (!options.editMode) Log.d(\"wiki\",\"show \"+f);\r\n    \tW.cd(f.up());\r\n\t\tvar fn=f.truncExt(EXT);\r\n    \tif (!f.exists() && !f.isReadOnly() && options.editMode) {\r\n    \t\tvar p=history[history.length-1];\r\n    \t\tif (p) f.text(\"[[\"+p.truncExt(EXT)+\"]]\\n\");\r\n    \t\telse f.text(\"\");\r\n    \t}\r\n    \tif ( f.exists()) {\r\n    \t\tvar ht=W.parse(f.text(), fn, f);\r\n    \t\tplaceHolder.empty();\r\n    \t\tplaceHolder.scrollTop(0);\r\n    \t\tplaceHolder.append(ht);\r\n    \t\tplaceHolder.append($(\"<div>\").css({height:\"100px\"}).text(\"\"));\r\n    \t\t//console.log(\"wikijs.on.show\",f+\"\");\r\n    \t\tif (on.show) on.show.apply(W, [f,fn]);\r\n    \t\thistory.push(f);\r\n    \t} else {\r\n    \t\talert(nameOrFile+\" \");\r\n    \t\t//placeHolder.text(name+\" not found.\");\r\n    \t}\r\n    \treturn;\r\n    };\r\n    W.back=function () {\r\n        var f=history.pop();\r\n        if (f) show(f);\r\n    };\r\n    var curLined;\r\n    W.highlightLine=function (row) { // row:0 origin\r\n        var e=$(\"#\"+LINEMARK+\"-\"+row);\r\n        if (e.length==0) return;\r\n        if (curLined) {\r\n            curLined.removeClass(\"wiki-cur-line\");\r\n        }\r\n        curLined=e.next();\r\n        curLined.addClass(\"wiki-cur-line\");\r\n        var t=e.position().top;\r\n        var area=placeHolder;\r\n        if (t<0) {\r\n            area.scrollTop(area.scrollTop()+(t-10)/2);\r\n        }\r\n        var h=area.height()-100;\r\n        if (t>h) {\r\n            area.scrollTop(area.scrollTop()+(t-h+10)/2);\r\n        }\r\n        function mark(startElem) {\r\n            var e=startElem.next();\r\n            while (e.length>0) {\r\n                if (Util.startsWith( e.attr(\"id\"), LINEMARK)) break;\r\n\r\n            }\r\n        }\r\n    };\r\n    W.builtinImages={\r\n            \"50_100.png\":1,\r\n            \"50_160.png\":1,\r\n            \"50_300.png\":1,\r\n            \"apple1apple2.png\":1,\r\n            \"coords.png\":1,\r\n            \"copy60_100.png\":1,\r\n            \"firstRunRes.png\":1,\r\n            \"firstVarRes.png\":1,\r\n            \"itadaki.png\":1,\r\n            \"noWaitCat.png\":1,\r\n            \"runtimeError.png\":1,\r\n            \"sample.png\":1,\r\n            \"sayonara.png\":1,\r\n            \"syntaxError.png\":1\r\n    };\r\n    return W;\r\n    function WikiBraces(str, begin ,end) {\r\n        var c=0;\r\n        function init() {\r\n            var w=[];\r\n            while(true) {\r\n                var i=str.indexOf(begin,c);\r\n                var j=str.indexOf(end,c);\r\n                if (j>=0 && (i<0 || i>j)) {  // ]]\r\n                    w.push(str.substring(c,j));\r\n                    c=j;  // ]] \r\n                    break;\r\n                }\r\n                if (i<0) {  // [[ ]] \r\n                    w.push(str.substring(c));\r\n                    c=str.length;\r\n                    break;\r\n                }\r\n                // [[\r\n                w.push(str.substring(c,i));\r\n                c=i+begin.length;\r\n                var we=init();\r\n                we.hasBrace=true;\r\n                if (c<str.length) {  // ]] \r\n                    c+=end.length;\r\n                }\r\n                w.push(we);\r\n            }\r\n            bless(w);\r\n            return w;\r\n        }\r\n        function bless(w) {\r\n            w.split=function (sp, lim) {\r\n                if (lim==1) return this;\r\n                var res=[], cur=bless([]);\r\n                this.forEach(function (e) {\r\n                    if (typeof e==\"string\") {\r\n                        var i =e.indexOf(sp);\r\n                        if (res.length>=lim) i=-1;\r\n                        if (i>=0) {  //  ,bbb   aaa,bbb\r\n                            if (i>0) {  //   aaa,bbb\r\n                                var s=e.substring(0,i); // aaa\r\n                                cur.push(s);\r\n                            }\r\n                            i+=sp.length;   //  bbb  bbb\r\n                            if (cur.length!=1) res.push(cur);\r\n                            else res.push(cur[0]);\r\n                            cur=bless([]);\r\n                            if (i<e.length) {  // ,bbb\r\n                                var s=e.substring(i) ;\r\n                                cur.push(s);\r\n                            }\r\n                        } else {  //aaabbb\r\n                            cur.push(e);\r\n                        }\r\n                    } else {\r\n                        cur.push(e);\r\n                    }\r\n                });\r\n                if (cur.length!=1) res.push(cur);\r\n                else res.push(cur[0]);\r\n                return res;\r\n            };\r\n            w.text=function (includeBrace) {\r\n               var res=(this.hasBrace && includeBrace ? begin :\"\");\r\n               this.forEach(function (e) {\r\n                   if (typeof e==\"string\") {\r\n                       res+=e;\r\n                   } else {\r\n                       res+=e.text(true);\r\n                   }\r\n               });\r\n               res+=(this.hasBrace && includeBrace ? end :\"\");\r\n               return res;\r\n            };\r\n            w.toString=function () {\r\n                return this.text(true);\r\n            };\r\n            return w;\r\n        }\r\n        return init(0);\r\n    };\r\n};\r\n});\r\n\ndefine('Shell2',[\"Shell\",\"UI\",\"FS\",\"Util\"], function (sh,UI,FS,Util) {\r\n    var res={};\r\n    res.show=function (dir) {\r\n        var d=res.embed(dir);\r\n        d.dialog({width:600,height:500});\r\n    };\r\n    res.embed=function (dir) {\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"Shell\"},[\"div\",{$var:\"inner\"},\"Type 'help' to show commands.\",[\"br\"]]);\r\n            res.inner=res.d.$vars.inner;\r\n            sh.prompt();\r\n        }\r\n        var d=res.d;\r\n        return d;\r\n    };\r\n    sh.cls=function () {\r\n        res.d.$vars.inner.empty();\r\n    };\r\n    sh.prompt=function () {\r\n        var line=UI(\"div\",\r\n            [\"input\",{$var:\"cmd\",size:40,on:{keydown: kd}}],\r\n            [\"pre\",{$var:\"out\",\"class\":\"shell out\"},[\"div\",{$var:\"cand\",\"class\":\"shell cand\"}]]\r\n        );\r\n        var cmd=line.$vars.cmd;\r\n        var out=line.$vars.out;\r\n        var cand=line.$vars.cand;\r\n        sh.setout({log:function () {\r\n            return $.when.apply($,arguments).then(function () {\r\n                var a=[];\r\n                for (var i=0; i<arguments.length; i++) {\r\n                    a.push(arguments[i]);\r\n                }\r\n                if (a[0] instanceof $) {\r\n                    out.append(a[0]);\r\n                } else {\r\n                    out.append(UI(\"span\",a.join(\" \")+\"\\n\"));\r\n                }\r\n            });\r\n        },err:function (e) {\r\n            out.append(UI(\"div\",{\"class\": \"shell error\"},e,[\"br\"],[\"pre\",e.stack]));\r\n        }});\r\n        line.appendTo(res.inner);\r\n        cmd.focus();\r\n        res.inner.closest(\".ui-dialog-content\").scrollTop(res.inner.height());\r\n        return sh.ASYNC;\r\n        function kd(e) {\r\n            //var eo=e.originalEvent();\r\n            //console.log(e.which);\r\n            if (e.which==9) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                comp();\r\n                return false;\r\n            }\r\n            if (e.which==13) {\r\n                cand.empty();\r\n                exec(cmd.val());\r\n            }\r\n        }\r\n        function exec() {\r\n            var c=cmd.val().replace(/^ */,\"\").replace(/ *$/,\"\");\r\n            if (c.length==0) return;\r\n            var cs=c.split(/ +/);\r\n            var cn=cs.shift();\r\n            var f=sh[cn];\r\n            if (typeof f!=\"function\") return out.append(cn+\": command not found.\");\r\n            try {\r\n                var args=[],options=null;\r\n                cs.forEach(function (ce) {\r\n                    var opt=/^-([A-Za-z_0-9]+)(=(.*))?/.exec(ce);\r\n                    if (opt) {\r\n                        if (!options) options={};\r\n                        options[opt[1]]=opt[3]!=null ? opt[3] : 1;\r\n                    } else {\r\n                        if (options) args.push(options);\r\n                        options=null;\r\n                        args.push(ce);\r\n                    }\r\n                });\r\n                if (options) args.push(options);\r\n                var sres=f.apply(sh, args);\r\n                if (sres===sh.ASYNC) return;\r\n                if (typeof sres==\"object\") {\r\n                    if (sres instanceof Array) {\r\n                        var table=UI(\"table\");\r\n                        var tr=null;\r\n                        var cnt=0;\r\n                        sres.forEach(function (r) {\r\n                            if (!tr) tr=UI(\"tr\").appendTo(table);\r\n                            tr.append(UI(\"td\",r));\r\n                            cnt++;if(cnt%3==0) tr=null;\r\n                        });\r\n                        table.appendTo(out);\r\n                    } else {\r\n                        out.append(JSON.stringify(sres));\r\n                    }\r\n                } else {\r\n                    out.append(sres);\r\n                }\r\n                sh.prompt();\r\n            } catch(e) {\r\n                sh.err(e);\r\n                //out.append(UI(\"div\",{\"class\": \"shell error\"},e,[\"br\"],[\"pre\",e.stack]));\r\n                sh.prompt();\r\n            }\r\n        }\r\n        function comp(){\r\n            var c=cmd.val();\r\n            var cs=c.split(\" \");\r\n            var fn=cs.pop();\r\n            var canda=[];\r\n            if (cs.length==0) {\r\n                for (var k in sh) {\r\n                    if (typeof sh[k]==\"function\" && Util.startsWith(k, fn)) {\r\n                        canda.push(k);\r\n                    }\r\n                }\r\n            } else {\r\n                var f=sh.resolve(fn,false);\r\n                //console.log(fn,f);\r\n                if (!f) return;\r\n                var d=(f.isDir() ? f : f.up());\r\n                d.each(function (e) {\r\n                    if ( Util.startsWith(e.path(), f.path()) ) {\r\n                        canda.push(e.name());\r\n                    }\r\n                });\r\n            }\r\n            if (canda.length==1) {\r\n                var fns=fn.split(\"/\");\r\n                fns.pop();\r\n                fns.push(canda[0]);\r\n                cs.push(fns.join(\"/\"));\r\n                cmd.val(cs.join(\" \"));\r\n                cand.empty();\r\n            } else {\r\n                cand.text(canda.join(\", \"));\r\n            }\r\n            //console.log(canda);\r\n            //cmd.val(cmd.val()+\"hokan\");\r\n        }\r\n    };\r\n    sh.window=function () {\r\n        res.show(sh.cwd);\r\n    };\r\n    sh.atest=function (a,b,options) {\r\n        console.log(a,b,options);\r\n    };\r\n    var oldcat=sh.cat;\r\n    sh.cat=function (file,options) {\r\n        file=sh.resolve(file, true);\r\n        if (file.contentType().match(/^image\\//)) {\r\n            return file.getContent(function (c) {\r\n                sh.echo(UI(\"img\",{src:c.toURL()}));\r\n            });\r\n        } else {\r\n            return oldcat.apply(sh,arguments);\r\n        }\r\n    };\r\n    return res;\r\n});\ndefine('Klass',[\"assert\"],function (A) {\r\n    var Klass={};\r\n    Klass.define=function (pd) {\r\n        var p,parent;\r\n        if (pd.$parent) {\r\n            parent=pd.$parent;\r\n            p=Object.create(parent.prototype);\r\n            p.super=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                var n=a.shift();\r\n                return parent.prototype[n].apply(this,a);\r\n            };\r\n        } else {\r\n            p={};\r\n        }\r\n        var thisName,singletonName;\r\n        if (pd.$this) {\r\n            thisName=pd.$this;\r\n        }\r\n        if (pd.$singleton) {\r\n            singletonName=pd.$singleton;\r\n        }\r\n        var init=wrap(pd.$) || function (e) {\r\n            if (e && typeof e==\"object\") {\r\n                for (var k in e) {\r\n                    this[k]=e[k];\r\n                }\r\n            }\r\n        };\r\n        var fldinit;\r\n        var warn,wrapped,wrapCancelled;\r\n        //var check;\r\n        if (init instanceof Array) {\r\n            fldinit=init;\r\n            init=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                for (var i=0;i<fldinit.length;i++) {\r\n                    if (a.length>0) this[fldinit[i]]=a.shift();\r\n                }\r\n            };\r\n        }\r\n        var klass;\r\n        function checkSchema(self) {\r\n            if (pd.$fields) {\r\n                //console.log(\"Checking schema\",self,pd.$fields);\r\n                A.is(self,pd.$fields);\r\n            }\r\n        }\r\n        klass=function () {\r\n            if (! (this instanceof klass)) {\r\n                var res=Object.create(p);\r\n                init.apply(res,arguments);\r\n                checkSchema(res);\r\n                return res;\r\n            }\r\n            init.apply(this,arguments);\r\n            checkSchema(this);\r\n        };\r\n        if (parent) {\r\n            klass.super=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                var t=a.shift();\r\n                var n=a.shift();\r\n                return parent.prototype[n].apply(t,a);\r\n            };\r\n        }\r\n        klass.inherit=function (pd) {\r\n            pd.$parent=klass;\r\n            return Klass.define(pd);\r\n        };\r\n        klass.prototype=p;\r\n        for (var name in pd) {\r\n            if (name[0]==\"$\") continue;\r\n            if (name.substring(0,7)==\"static$\") {\r\n                klass[name.substring(7)]=wrapStatic(pd[name]);\r\n            } else {\r\n                if (isPropDesc(pd[name])) {\r\n                    Object.defineProperty(p,name,wrap(pd[name]));\r\n                } else {\r\n                    p[name]=wrap(pd[name]);\r\n                }\r\n            }\r\n        }\r\n        function wrapStatic(m) {\r\n            if (!singletonName) return m;\r\n            var args=getArgs(m);\r\n            if (args[0]!==singletonName) return m;\r\n            return (function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                a.unshift(klass);\r\n                return m.apply(klass,a);\r\n            });\r\n        }\r\n        function wrap(m) {\r\n            if (!thisName) return m;\r\n            if (isPropDesc(m)) {\r\n                for (var k in m) {\r\n                    m[k]=wrap(m[k]);\r\n                }\r\n                return m;\r\n            }\r\n            if (typeof m!==\"function\") return m;\r\n            if (thisName!==true) {\r\n                var args=getArgs(m);\r\n                if (args[0]!==thisName) {\r\n                    wrapCancelled=true;\r\n                    return m;\r\n                }\r\n                warn=true;\r\n            }\r\n            wrapped=true;\r\n            return (function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                a.unshift(this);\r\n                return m.apply(this,a);\r\n            });\r\n        }\r\n        p.$=init;\r\n        Object.defineProperty(p,\"$bind\",{\r\n            get: function () {\r\n                if (!this.__bounded) {\r\n                    this.__bounded=new Klass.Binder(this);\r\n                }\r\n                return this.__bounded;\r\n            }\r\n        });\r\n        if (warn) {\r\n            //console.warn(\"This declaration style may malfunction when minified\");\r\n            if (!wrapCancelled) {\r\n                console.warn(\"Use $this:true instead\");\r\n            } else {\r\n                console.warn(\"Use python style in all methods and Use $this:true instead\");\r\n            }\r\n            try{throw new Error(\"Trace\");}\r\n            catch(e) {console.log(e.stack);}\r\n        }\r\n        return klass;\r\n    };\r\n    function getArgs(f) {\r\n        var fpat=/function[^\\(]*\\(([^\\)]*)\\)/;\r\n        var r=fpat.exec(f+\"\");\r\n        if (r) {\r\n            return r[1].replace(/\\s/g,\"\").split(\",\");\r\n        }\r\n        return [];\r\n    }\r\n    function isPropDesc(o) {\r\n        if (typeof o!==\"object\") return false;\r\n        if (!o) return false;\r\n        var pk={configurable:1,enumerable:1,value:1,writable:1,get:1,set:1};\r\n        var c=0;\r\n        for (var k in o) {\r\n            if (!pk[k]) return false;\r\n            c+=pk[k];\r\n        }\r\n        return c;\r\n    }\r\n    Klass.Function=function () {throw new Error(\"Abstract\");};\r\n    Klass.opt=A.opt;\r\n    Klass.Binder=Klass.define({\r\n        $this:true,\r\n        $:function (t,target) {\r\n            function addMethod(k){\r\n                if (typeof target[k]!==\"function\") return;\r\n                t[k]=function () {\r\n                    var a=Array.prototype.slice.call(arguments);\r\n                    //console.log(this, this.__target);\r\n                    //A(this.__target,\"target is not set\");\r\n                    return target[k].apply(target,a);\r\n                };\r\n            }\r\n            for (var k in target) addMethod(k);\r\n        }\r\n    });\r\n    return Klass;\r\n});\r\n/*\r\nrequirejs([\"Klass\"],function (k) {\r\n  P=k.define ({\r\n     $:[\"x\",\"y\"]\r\n  });\r\n  p=P(2,3);\r\n  console.log(p.x,p.y);\r\n});\r\n*/\r\n;\ndefine('GlobalDialog',[\"UI\",\"Klass\"], function (UI,Klass) {\r\n    GlobalDialog=Klass.define({\r\n        $this:true,\r\n        $:[\"prj\"],\r\n        show: function (t,options) {\r\n            t.opt=t.prj.getOptions();\r\n            t.createDOM();\r\n            t.load();\r\n            t.dom.dialog({width:800,height:500});\r\n        },\r\n        load: function (t) {\r\n            if (!t.opt.run) t.opt.run={};\r\n            if (!t.opt.run.globals) t.opt.run.globals={};\r\n            var g=t.opt.run.globals;\r\n            var params=[];\r\n            for (var k in g) {\r\n                params.push({key:k,value:JSON.stringify(g[k])});\r\n            }\r\n            t.editor.keyvalueeditor(\"reset\",params);\r\n        },\r\n        createDOM:function (t) {\r\n            if (t.dom) return t.dom;\r\n            t.dom=UI(\"div\",{title:\"\"},\r\n                [\"ul\",\r\n                [\"li\",\"\"],\r\n                  [\"li\",\"JSON\"]\r\n                  //[\"li\",\"JSON\"]\r\n                ],\r\n                [\"div\",{$var:\"editor\",css:{height:\"350px\",\"overflow-y\":\"scroll\"}}],\r\n                [\"div\",[\"button\",{on:{click:t.$bind.save}},\"\"]]\r\n            );\r\n            t.vars=$.data(t.dom,\"vars\");\r\n            console.log(t.vars,t.dom.$vars);\r\n            t.editor=t.vars.editor;\r\n            var params = {\r\n                placeHolderKey:\"\",\r\n                placeHolderValue:\"\",\r\n                toggleButton: null,\r\n                deleteButton:'<img class=\"deleteButton\" src=\"images/delete.png\">'\r\n            };\r\n            t.editor.keyvalueeditor('init',params);\r\n            t.editor.on('change', '.keyvalueeditor-key', function () {\r\n                var val=this.value;\r\n                if (!val.match(/^[a-zA-Z0-9_$]+$/)) {\r\n                    alert(\"\");\r\n                    return;\r\n                }\r\n                if (!val.match(/^\\$/)) {\r\n                    this.value=\"$\"+this.value;\r\n                }\r\n                t.getValuesA();\r\n            });\r\n            t.editor.on('change', '.keyvalueeditor-value', function (e) {\r\n                var val=this.value;\r\n                try {\r\n                    var o=JSON.parse(val);\r\n                    this.value=JSON.stringify(o);\r\n                } catch (ex) {\r\n                    var qval=JSON.stringify(val);\r\n                    if (qval==='\"'+val+'\"') this.value=qval;\r\n                    else {\r\n                        alert(\"\\n\"+\r\n                        \" \\\\\\\" \\n\"+\r\n                        \"\\\\ \\\\\\\\ \\n\"\r\n                        );\r\n                        e.stopPropagation();\r\n                    }\r\n                }\r\n                t.getValuesA();\r\n            });\r\n            return t.dom;\r\n        },\r\n        save: function (t) {\r\n            var res=t.getValuesA();\r\n            if (res) {\r\n                t.opt.run.globals=res;\r\n                t.prj.setOptions(t.opt);\r\n                t.dom.dialog(\"close\");\r\n            }\r\n        },\r\n        getValuesA: function (t) {\r\n            try {\r\n                return t.getValues();\r\n            } catch(e) {\r\n                console.error(e.stack);\r\n                alert(e);\r\n            }\r\n        },\r\n        getValues: function (t) {\r\n            var vs=t.editor.keyvalueeditor(\"getValues\");\r\n            var res={};\r\n            vs.forEach(function (v) {\r\n                if (v.key in res) throw new Error(\"'\"+v.key+\"'\");\r\n                if (!v.key.match(/^\\$[a-zA-Z0-9_$]*$/)) {\r\n                    throw new Error(\"'\"+v.key+\"'\");\r\n                }\r\n                try {\r\n                    res[v.key]=JSON.parse(v.value);\r\n                } catch (e) {\r\n                    res[v.key]=v.value;\r\n                }\r\n            });\r\n            return res;\r\n        }\r\n    });\r\n    return GlobalDialog;\r\n});\r\n\ndefine('ProjectOptionsEditor',[\"UI\",\"GlobalDialog\"], function (UI,GlobalDialog) {\r\n    return function (TPR) {\r\n        var opt=TPR.getOptions();\r\n        //opt.id=Math.random();\r\n        //console.log(\"Project got\",opt);\r\n        /*   Tonyu.defaultOptions={\r\n                compiler: { defaultSuperClass: \"Actor\"},\r\n                bootClass: \"Boot\",\r\n                kernelEditable: false\r\n             };\r\n         */\r\n        var FType={\r\n                fromVal: function (val){\r\n                    return val;\r\n                },\r\n                toVal: function (v){ return val;}\r\n        };\r\n        if (!TPR.odiag) {\r\n            TPR.odiag=UI(\"div\",{title:\" \"},\r\n                    [\"h5\",\"\"],\r\n                    [\"div\",\r\n                     [\"input\", {type:\"checkbox\", $edit: \"compiler.diagnose\"}],\r\n                     \"()\"],\r\n                    [\"div\",\r\n                     [\"input\", {type:\"checkbox\", $edit: \"compiler.noLoopCheck\"}],\r\n                     \"\"],\r\n                     [\"div\",\r\n                      [\"input\", {type:\"checkbox\", $edit: \"compiler.field_strict\"}],\r\n                      \"(var n; )\"],\r\n                    [\"div\", \"\",\r\n                     [\"input\", {$edit: \"compiler.defaultSuperClass\"}]],\r\n                     [\"h5\",\"\"],\r\n                     [\"div\", \"Main \", [\"input\", {$edit: \"run.mainClass\"}] ],\r\n                     [\"div\", \"Boot \", [\"input\", {$edit: \"run.bootClass\"}] ],\r\n                     [\"div\", \"\",[\"button\", {on:{click: editG}},\"...\"] ],\r\n                     [\"h5\",\"\"],\r\n                     [\"div\",\r\n                      [\"input\", {type:\"checkbox\", $edit: \"kernelEditable\"}],\r\n                      \"Kernel\"],\r\n                      [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}]\r\n            );\r\n        }\r\n        var gdiag=new GlobalDialog(TPR);\r\n        function editG() {\r\n          gdiag.show();\r\n        }\r\n        TPR.odiag.$edits.load(opt);\r\n        TPR.odiag.dialog({\r\n            width: 600,\r\n            buttons: {\r\n                OK: function () {\r\n                    TPR.odiag.dialog(\"close\");\r\n                    //console.log(\"Project opt Saved \",JSON.stringify(opt));\r\n                    TPR.setOptions();\r\n                    TPR.requestRebuild();\r\n                    //console.log(\"new opt \",JSON.stringify(TPR.getOptions()));\r\n                }\r\n            }\r\n        });\r\n    };\r\n});\r\n\nrequirejs([\"Shell\",\"FS\",\"WebSite\"], function (sh,FS,WebSite) {\r\n    sh.copyToKernel=function (name) {\r\n        var home=FS.get(WebSite.tonyuHome);\r\n        var ker=home.rel(\"Kernel/\");\r\n        if (name) {\r\n            return sh.cp( name, ker.rel(name));\r\n        } else {\r\n            var cps=0;\r\n            ker.each(function (f) {\r\n                var src=sh.cwd.rel(f.name());\r\n                if (src.exists()) {\r\n                    cps+=sh.cp(src, ker);\r\n                }\r\n            });\r\n            return cps;\r\n        }\r\n    };\r\n});\ndefine(\"copyToKernel\", function(){});\n\ndefine('KeyEventChecker',[],function () {\r\n\tvar KEC={};\r\n\tKEC.down=function (elem, name, handler) {\r\n\t\tif (!(elem instanceof $)) elem=$(elem);\r\n\t\telem.bind(\"keydown\", function (e) {\r\n\t\t\tif (KEC.is(e, name)) {\r\n\t\t\t\treturn handler.call(elem[0],e);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tKEC.is=function (e,name) {\r\n\t\tname=name.toLowerCase();\r\n\t\te = e.originalEvent || e;\r\n\t\tvar s=\"\";\r\n\t\tif (e.altKey) {\r\n\t\t\ts+=\"alt+\";\r\n\t\t}\r\n\t\tif (e.ctrlKey) {\r\n\t\t\ts+=\"ctrl+\";\r\n\t\t}\r\n\t\tif (e.shiftKey) {\r\n\t\t\ts+=\"shift+\";\r\n\t\t}\r\n\t\tif (e.keyCode>=112 && e.keyCode<=123) {\r\n\t\t\ts+=\"f\"+(e.keyCode-111);\r\n\t\t} else {\r\n\t\t\ts+=String.fromCharCode(e.keyCode);\r\n\t\t}\r\n\t\ts=s.toLowerCase();\r\n\t\t//console.log(s);\r\n\t\treturn name==s;\r\n\t};\r\n\treturn KEC;\r\n});\ndefine('IFrameDialog',[], function () {\r\n    var WD={};\r\n    WD.create=function (home, options) {\r\n        options=options || {title:\"help\",topPage:\"index\"};\r\n        if (!options.height) {\r\n            options.height=$(window).height()*0.7;\r\n        }\r\n        if (!options.width) options.width=500;\r\n        var ifrm=$(\"<iframe>\").attr({\r\n            \"class\":\"wikiDialog\",frameBorder:0,\r\n            src:home//, width:options.width+100, height:options.height\r\n        });\r\n        var d=$(\"<div>\").attr({\"class\":\"wikiDialog\",title:options.title}).append(ifrm);\r\n        return {\r\n            show: function () {\r\n                d.dialog({\r\n                    width:options.width, height:options.height,\r\n                    resize:function (e,ui){\r\n                        //ifrm.width(ui.size.width-50);\r\n                        //ifrm.height(ui.size.height-50);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    };\r\n    return WD;\r\n});\ndefine('PatternParser',[\"Tonyu\"], function (Tonyu) {\r\n    var PP=function (img, options) {\r\n        this.options=options || {};\r\n        this.img=img;\r\n        this.height = img.height;\r\n        this.width = img.width;\r\n        var cv=this.newImage(img.width, img.height);\r\n        var ctx=cv.getContext(\"2d\");\r\n        ctx.drawImage(img, 0,0);\r\n        this.ctx=ctx;\r\n        this.pixels=this.ctx.getImageData(0, 0, img.width, img.height).data;\r\n        this.base=this.getPixel(0,0);\r\n    };\r\n    Tonyu.extend(PP.prototype,{\r\n        newImage: function (w,h) {\r\n            var cv=document.createElement(\"canvas\");\r\n            cv.width=w;\r\n            cv.height=h;\r\n            return cv;\r\n        },\r\n        getPixel: function (x,y) {\r\n            var imagePixelData = this.pixels;\r\n            var ofs=(x+y*this.width)*4;\r\n            var R = imagePixelData[0+ofs];\r\n            var G = imagePixelData[1+ofs];\r\n            var B = imagePixelData[2+ofs];\r\n            var A = imagePixelData[3+ofs];\r\n            return ((((A*256)+B)*256)+G)*256+R;\r\n        },\r\n        setPixel: function (x,y,p) {\r\n            var ofs=(x+y*this.width)*4;\r\n            this.pixels[0+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[1+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[2+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[3+ofs]=p & 255;\r\n        },\r\n        parse: function () {\r\n            try {\r\n                //console.log(\"parse()\");\r\n                var res=[];// List of charpattern\r\n                for (var y=0; y<this.height ;y++) {\r\n                    for (var x=0; x<this.width ;x++) {\r\n                        var c=this.getPixel(x, y);\r\n                        if (c!=this.base) {\r\n                            res.push(this.parse1Pattern(x,y));\r\n                        }\r\n                    }\r\n                }\r\n                //console.log(\"parsed:\"+res.lenth);\r\n                return res;\r\n            } catch (p) {\r\n                if (p.isParseError) {\r\n                    console.log(\"parse error! \"+p);\r\n                    return [{image: this.img, x:0, y:0, width:this.width, height:this.height}];\r\n                }\r\n                throw p;\r\n            }\r\n        },\r\n        parse1Pattern:function (x,y) {\r\n            function hex(s){return s;}\r\n            var trans=this.getPixel(x, y);\r\n            var dx=x,dy=y;\r\n            var base=this.base;\r\n            var width=this.width, height=this.height;\r\n            while (dx<width) {\r\n                var pixel = this.getPixel(dx,dy);\r\n                if (pixel!=trans) break;\r\n                dx++;\r\n            }\r\n            if (dx>=width || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dx--;\r\n            while (dy<height) {\r\n                if (this.getPixel(dx,dy)!=trans) break;\r\n                dy++;\r\n            }\r\n            if (dy>=height || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dy--;\r\n            var sx=x+1,sy=y+1,w=dx-sx,h=dy-sy;\r\n            //console.log(\"PP\",sx,sy,w,h,dx,dy);\r\n            if (w*h==0) throw PatterParseError(dx, dy,\"w*h==0\");\r\n            var newim=this.newImage(w,h);\r\n            var nc=newim.getContext(\"2d\");\r\n            var newImD=nc.getImageData(0,0,w,h);\r\n            var newD=newImD.data;\r\n            var di=0;\r\n            for (var ey=sy ; ey<dy ; ey++) {\r\n                for (var ex=sx ; ex<dx ; ex++) {\r\n                    var p=this.getPixel(ex, ey);\r\n                    if (p==trans) {\r\n                        newD[di++]=0;\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                    } else {\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                    }\r\n                }\r\n            }\r\n            nc.putImageData(newImD,0,0);\r\n            for (var yy=sy-1; yy<=dy; yy++) {\r\n                for (var xx=sx-1; xx<=dx; xx++) {\r\n                    this.setPixel(xx,yy, base);\r\n                }\r\n            }\r\n            if (this.options.boundsInSrc) {\r\n                return {x:sx,y:sy,width:w,height:h};\r\n            }\r\n            return {image:newim, x:0, y:0, width:w, height:h};\r\n            function PatterParseError(x,y,msg) {\r\n                return {toString: function () {\r\n                    return \"at (\"+x+\",\"+y+\") :\"+msg;\r\n                }, isParseError:true};\r\n            }\r\n        }\r\n\r\n    });\r\n    return PP;\r\n});\r\n\ndefine('Assets',[\"WebSite\",\"Util\",\"Tonyu\",\"FS\"],function (WebSite,Util,Tonyu,FS) {\r\n    var Assets={};\r\n    Assets.resolve=function (url, prj, options) {\r\n        options=options||{};\r\n        var baseDir=FS.isFile(prj)?prj:prj.getDir();\r\n        if (url==null) url=\"\";\r\n        url=url.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (t,name) {\r\n            return WebSite[name];\r\n        });\r\n        if (WebSite.urlAliases[url]) url=WebSite.urlAliases[url];\r\n        if (Util.startsWith(url,\"ls:\")) {\r\n            var rel=url.substring(\"ls:\".length);\r\n            if (!baseDir) throw new Error(\"Basedir not specified\");\r\n            var f=baseDir.rel(rel);\r\n            if (!f.exists()) throw new Error(\"Resource file not found: \"+f);\r\n            if (\r\n                (WebSite.mp3Disabled && rel.match(/\\.(mp3)$/)) ||\r\n                (WebSite.mp4Disabled && rel.match(/\\.(mp4|m4a)$/))\r\n            ) {\r\n                var oggf=baseDir.rel(rel.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\"));\r\n                if (oggf.exists()) {\r\n                    f=oggf;\r\n                }\r\n            }\r\n            url=f.getURL();\r\n            if (options.asFile) return f;\r\n        }\r\n        return url;\r\n    };\r\n    Tonyu.Assets=Assets;\r\n    return Assets;\r\n});\r\n\ndefine('ImageList',[\"PatternParser\",\"Util\",\"Assets\",\"assert\"], function (PP,Util,Assets,assert) {\r\n    var cache={};\r\n    function excludeEmpty(resImgs) {\r\n        var r=[];\r\n        resImgs.forEach(function (resImg,i) {\r\n            if (!resImg || resImg.url==\"\") return;\r\n            r.push(resImg);\r\n        });\r\n        return r;\r\n    }\r\n    var IL;\r\n    IL=function (resImgs, onLoad,options) {\r\n        //  resImgs:[{url: , [pwidth: , pheight:]?  }]\r\n\t    if (!options) options={};\r\n        resImgs=excludeEmpty(resImgs);\r\n        var resa=[];\r\n        var cnt=resImgs.length;\r\n        if (cnt==0) setTimeout(function () {\r\n            var res=[];\r\n            res.names={};\r\n            onLoad(res);\r\n        },0);\r\n        resImgs.forEach(function (resImg,i) {\r\n            console.log(\"loading\", resImg,i);\r\n            var url=resImg.url;\r\n            var urlKey=url;\r\n            if (cache[urlKey]) {\r\n            \tproc.apply(cache[urlKey],[]);\r\n            \treturn;\r\n            }\r\n            url=Assets.resolve(url,options.prj||options.baseDir);\r\n            //if (!Util.startsWith(url,\"data:\")) url+=\"?\" + new Date().getTime();\r\n            var im=$(\"<img>\");\r\n            im.load(function () {\r\n            \tcache[urlKey]=this;\r\n            \tproc.apply(this,[]);\r\n            });\r\n            im.attr(\"src\",url);\r\n            function proc() {\r\n                var pw,ph;\r\n                if (resImg.type==\"single\") {\r\n                    resa[i]=[{image:this, x:0,y:0, width:this.width, height:this.height}];\r\n                } else if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n                    var x=0, y=0, w=this.width, h=this.height;\r\n                    var r=[];\r\n                    while (true) {\r\n                        var rw=pw,rh=ph;\r\n                        if (x+pw>w) rw=w-x;\r\n                        if (y+ph>h) rh=h-y;\r\n                        r.push({image:this, x:x,y:y, width:rw, height:rh});\r\n                        x+=pw;\r\n                        if (x+pw>w) {\r\n                            x=0;\r\n                            y+=ph;\r\n                            if (y+ph>h) break;\r\n                        }\r\n                    }\r\n                    resa[i]=r;\r\n                } else {\r\n                    var p=new PP(this);\r\n                    resa[i]=p.parse();\r\n                }\r\n                resa[i].name=resImg.name;\r\n                assert.is(resa[i],Array);\r\n                cnt--;\r\n                if (cnt==0) {\r\n                    var res=[];\r\n                    var names={};\r\n                    resa.forEach(function (a) {\r\n                        names[a.name]=res.length;\r\n                        res=res.concat(a);\r\n                    });\r\n                    res.names=names;\r\n                    onLoad(res);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    IL.load=IL;\r\n    IL.parse1=function (resImg, imgDOM, options) {\r\n        var pw,ph;\r\n        var res;\r\n        if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n            var x=0, y=0, w=imgDOM.width, h=imgDOM.height;\r\n            var r=[];\r\n            while (true) {\r\n                r.push({image:this, x:x,y:y, width:pw, height:ph});\r\n                x+=pw;\r\n                if (x+pw>w) {\r\n                    x=0;\r\n                    y+=ph;\r\n                    if (y+ph>h) break;\r\n                }\r\n            }\r\n            res=r;\r\n        } else {\r\n            var p=new PP(imgDOM,options);\r\n            res=p.parse();\r\n        }\r\n        res.name=resImg.name;\r\n        return assert.is(res,Array);\r\n    };\r\n\twindow.ImageList=IL;\r\n    return IL;\r\n});\r\n\n/*global webkitAudioContext, AudioContext, AudioBuffer, AudioBufferSourceNode, PicoAudio, Mezonet, WebSite, Util*/\r\n// forked from makkii_bcr's \"T2MediaLib\" http://jsdo.it/makkii_bcr/3ioQ\r\n\r\nvar T2MediaLib = (function(){\r\n    function isPicoAudio(bgm) {\r\n        return typeof PicoAudio!==\"undefined\" && bgm instanceof PicoAudio;\r\n    }\r\n    function isMezonetSource(bgm) {\r\n        return typeof Mezonet!==\"undefined\" && bgm instanceof Mezonet.Source;\r\n    }\r\n    var T2MediaLib = function(_context) {\r\n        this.context = null;\r\n        this.picoAudio = null;\r\n        this.soundDataAry = []; // T2MediaLib_SoundData\r\n        this.bgmPlayerMax = 16;\r\n        this.bgmPlayerAry = []; // T2MediaLib_BGMPlayer\r\n\r\n        this.masterVolume = 1.0;\r\n        this.seMasterVolume = 1.0;\r\n        this.bgmMasterVolume = 1.0;\r\n\r\n        this.playingAudio = null;\r\n        this.audioVolume = 1.0;\r\n        this.audioTempo = 1.0;\r\n        this.audioDataAry = {\r\n            data : []\r\n        };\r\n        this.seSources=[];\r\n        this.init(_context);\r\n    };\r\n\r\n    //  //\r\n    T2MediaLib.prototype.init = function(_context) {\r\n        if (this.inited) return;\r\n        this.inited=true;\r\n        if (this.disabled) return;\r\n        if (!_context) {\r\n            if (window.AudioContext) {\r\n                this.context = new AudioContext();\r\n            } else if (window.webkitAudioContext) {\r\n                this.context = new webkitAudioContext();\r\n            } else {\r\n                this.context = null;\r\n                console.log('Your browser does not support yet Web Audio API');\r\n            }\r\n        } else {\r\n            this.context = _context;\r\n        }\r\n\r\n        // Web Audio API \r\n        if (this.context) {\r\n            // BGMPlayer (16)\r\n            for (var i=0; i<this.bgmPlayerMax; i++) {\r\n                this.bgmPlayerAry[i] = new T2MediaLib_BGMPlayer(this, i);\r\n            }\r\n        }\r\n    };\r\n\r\n    // CLEAR //\r\n    T2MediaLib.prototype.allClearSoundData = function() {\r\n        var dataAry = this.soundDataAry;\r\n        for (var idx in dataAry) {\r\n            delete dataAry[idx];\r\n        }\r\n    };\r\n    T2MediaLib.prototype.clearSoundData = function(idx) {\r\n        var dataAry = this.soundDataAry;\r\n        delete dataAry[idx];\r\n    };\r\n    T2MediaLib.prototype.allRemoveDecodedSoundData = function() {\r\n        var dataAry = this.soundDataAry;\r\n        for (var idx in dataAry) {\r\n            var soundData = dataAry[idx];\r\n            if (soundData == null) continue;\r\n            if (!soundData.isDecodeComplete() && !soundData.isDecoding()) continue;\r\n            soundData.removeDecodedData();\r\n        }\r\n    };\r\n    T2MediaLib.prototype.removeDecodedSoundData = function(idx) {\r\n        var soundData = this.soundDataAry[idx];\r\n        if (soundData == null) return;\r\n        if (!soundData.isDecodeComplete() && !soundData.isDecoding()) return;\r\n        soundData.removeDecodedData();\r\n    };\r\n\r\n\r\n    // SE&BGM //\r\n    T2MediaLib.prototype.getMasterVolume = function() {\r\n        return this.masterVolume;\r\n    };\r\n    T2MediaLib.prototype.setMasterVolume = function(vol) {\r\n        this.masterVolume = vol;\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            var bgmPlayer = this.bgmPlayerAry[i];\r\n            if (!(bgmPlayer instanceof T2MediaLib_BGMPlayer)) continue;\r\n            bgmPlayer.onChangeBGMMasterVolume();\r\n        }\r\n    };\r\n\r\n    // \r\n    T2MediaLib.prototype.createSoundFromArray = function(idx, array1, array2) {\r\n        if (!this.context || this.disabled) {\r\n            return null;\r\n        }\r\n        this.soundDataAry[idx] = new T2MediaLib_SoundData(idx);\r\n\r\n        var ctx = this.context;\r\n        var numOfChannels = array1 != null && array2 != null ? 2 : 1;\r\n        var audioBuffer = ctx.createBuffer(numOfChannels, array1.length, ctx.sampleRate);\r\n        var buffer1 = audioBuffer.getChannelData(0);\r\n        var buffer2 = array2 != null ? audioBuffer.getChannelData(1) : null;\r\n        var i;\r\n        for (i = 0; i < array1.length ; i++) {\r\n             buffer1[i] = array1[i];\r\n        }\r\n        if (buffer2) {\r\n            for (i = 0; i < array2.length ; i++) {\r\n                 buffer2[i] = array2[i];\r\n            }\r\n        }\r\n        this.soundDataAry[idx].onDecodeComplete(audioBuffer);\r\n    };\r\n    // \r\n    T2MediaLib.prototype.loadSound = function(idx, url, callbacks, isLoadAndDecode) { //@hoge1e3\r\n        if (!this.context || this.disabled) {\r\n            return null;\r\n        }\r\n\r\n        this.soundDataAry[idx] = new T2MediaLib_SoundData(idx);\r\n\r\n        // midipicoAudio\r\n        if (url.match(/\\.(midi?)$/) || url.match(/^data:audio\\/mid/)) {\r\n            if (this.picoAudio == null) {\r\n                this.picoAudio = new PicoAudio(this.context);\r\n            }\r\n        }\r\n        if (typeof WebSite==\"object\" && WebSite.mp3Disabled) {\r\n            url=url.replace(/\\.(mp3)$/,\".ogg\");\r\n        }\r\n        if (typeof WebSite==\"object\" && WebSite.mp4Disabled) {\r\n            url=url.replace(/\\.(mp4|m4a)$/,\".ogg\");\r\n        }\r\n        var that = this;\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.onload = function() {\r\n            if (xhr.status === 200 || xhr.status === 0 /*@hoge1e3 for node-webkit base64url */) {\r\n                var arrayBuffer = xhr.response;\r\n                if (arrayBuffer instanceof ArrayBuffer) {\r\n                    that.soundDataAry[idx].onLoadComplete(arrayBuffer);\r\n                    if (isLoadAndDecode) { // \r\n                        that.decodeSound(idx, callbacks);\r\n                    } else { // \r\n                        if (callbacks && callbacks.succ) callbacks.succ(idx);\r\n                    }\r\n                } else {\r\n                    that.soundDataAry[idx].onError(\"XHR_RESPONSE_ERROR\");\r\n                    if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n                }\r\n            } else {\r\n                that.soundDataAry[idx].onError(\"XHR_STATUS_ERROR\");\r\n                if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n            }\r\n        };\r\n        xhr.onerror=function (e) {\r\n            console.log(e+\"\");\r\n            that.soundDataAry[idx].onError(\"XHR_ERROR\");\r\n            if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n        };\r\n\r\n        this.soundDataAry[idx].onLoad(url);\r\n        if (url.match(/^data:/) && typeof Util!==\"undefined\" && Util.Base64_To_ArrayBuffer) {//@hoge1e3\r\n            xhr={onload:xhr.onload};\r\n            xhr.response=Util.Base64_To_ArrayBuffer( url.replace(/^data:audio\\/[a-zA-Z0-9\\-]+;base64,/i,\"\"));\r\n            xhr.status=200;\r\n            xhr.onload();\r\n        } else {\r\n            xhr.open('GET', url, true);\r\n            xhr.responseType = 'arraybuffer';\r\n            try {\r\n                xhr.send(null);\r\n            } catch(e) {\r\n                this.soundDataAry[idx].onError(\"FILE_NOT_FOUND\");\r\n                if (callbacks && callbacks.err) callbacks.err(idx,that.soundDataAry[idx].errorID);\r\n            }\r\n        }\r\n    };\r\n    // \r\n    T2MediaLib.prototype.decodeSound = function(idx, callbacks) {\r\n        var soundData = this.soundDataAry[idx];\r\n        if (soundData == null) return;\r\n        if (soundData.fileData == null) return;\r\n        if (!soundData.isLoadComplete()) return;\r\n        if (soundData.isDecodeComplete()) return;\r\n\r\n        // Adding Callback\r\n        if (soundData.decodedCallbacksAry == null) {\r\n            soundData.decodedCallbacksAry = []; // \r\n        }\r\n        if (callbacks) {\r\n            if (callbacks.bgmPlayerId != null) { // bgmPlayerIdcallbacks()\r\n                var exists = soundData.decodedCallbacksAry.some(function(c, i) {\r\n                    if (callbacks.bgmPlayerId == c.bgmPlayerId) {\r\n                        soundData.decodedCallbacksAry[i] = callbacks;\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                });\r\n                if (!exists) {\r\n                    soundData.decodedCallbacksAry.push(callbacks);\r\n                }\r\n            } else {\r\n                soundData.decodedCallbacksAry.push(callbacks);\r\n            }\r\n        }\r\n\r\n        if (soundData.isDecoding()) return;\r\n        soundData.onDecode();\r\n        var arrayBuffer = soundData.fileData.slice(0);\r\n        var that = this;\r\n        if (soundData.url.match(/\\.(midi?)$/) || soundData.url.match(/^data:audio\\/mid/)) {\r\n            // Midi\r\n            // PicoAudio.js\r\n            if (this.picoAudio == null) {\r\n                this.picoAudio = new PicoAudio(this.context);\r\n            }\r\n            var smf = new Uint8Array(arrayBuffer);\r\n            var data = this.picoAudio.parseSMF(smf);\r\n            if (typeof data == \"string\") { // parseSMF Error\r\n                console.log('T2MediaLib: Error parseSMF()', data);\r\n                this.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, this.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            } else {\r\n                this.soundDataAry[idx].onDecodeComplete(data);\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.succ == \"function\") {\r\n                        callbacks.succ(idx);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            }\r\n        } else if (soundData.url.match(/\\.mzo$/) || soundData.url.match(/^data:audio\\/mzo/)) {\r\n            //console.log(\"Loading mzo\");\r\n            // MZO\r\n            Mezonet.init().then(function () {\r\n                var a=Array.prototype.slice.call( new Uint8Array(arrayBuffer) );\r\n                that.soundDataAry[idx].onDecodeComplete(new Mezonet.Source(a));\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.succ == \"function\") {\r\n                        callbacks.succ(idx);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            },function (error) {\r\n                if (error instanceof Error) {\r\n                    console.log('T2MediaLib: '+error.message, soundData.url);//@hoge1e3\r\n                } else {\r\n                    console.log('T2MediaLib: Error decodeMZO()', soundData.url);//@hoge1e3\r\n                }\r\n                that.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, that.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            });\r\n            /*var m=new Mezonet(this.context,a);//,{wavOutSpeed:50});\r\n            //m.load(a);\r\n            m.init().then(function (res) {\r\n                // removeDecodeSoundData()\r\n                switch(res.playbackMode.type) {\r\n                case \"Mezonet\":\r\n                that.soundDataAry[idx].onDecodeComplete(m);\r\n                break;\r\n                case \"AudioBuffer\":\r\n                //console.log(idx, res.decodedData);\r\n                that.soundDataAry[idx].onDecodeComplete(res.decodedData);\r\n                break;\r\n                }\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.succ == \"function\") {\r\n                        callbacks.succ(idx);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            },function (error) {\r\n                if (error instanceof Error) {\r\n                    console.log('T2MediaLib: '+error.message, soundData.url);//@hoge1e3\r\n                } else {\r\n                    console.log('T2MediaLib: Error decodeMZO()', soundData.url);//@hoge1e3\r\n                }\r\n                that.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, that.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            }).finally(function () {\r\n                m.terminate();\r\n            });*/\r\n        } else {\r\n            // MP3, Ogg, AAC, WAV\r\n\r\n            // Ogg(LOOPSTART, LOOPLENGTH)\r\n            if (soundData.url.match(/\\.(ogg?)$/) || soundData.url.match(/^data:audio\\/ogg/)) {\r\n                var retAry = this.searchOggLoop(arrayBuffer);\r\n                soundData.tagLoopStart = retAry[0];\r\n                soundData.tagLoopEnd = retAry[1];\r\n            }\r\n\r\n            var successCallback = function(audioBuffer) {\r\n                // removeDecodeSoundData()\r\n                if (that.soundDataAry[idx].isDecoding()) {\r\n                    that.soundDataAry[idx].onDecodeComplete(audioBuffer);\r\n                    soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                        if (typeof callbacks.succ == \"function\") {\r\n                            callbacks.succ(idx);\r\n                        }\r\n                    });\r\n                    soundData.decodedCallbacksAry = null;\r\n                }\r\n            };\r\n            var errorCallback = function(error) {\r\n                if (error instanceof Error) {\r\n                    console.log('T2MediaLib: '+error.message, soundData.url);//@hoge1e3\r\n                } else {\r\n                    console.log('T2MediaLib: Error decodeAudioData()', soundData.url);//@hoge1e3\r\n                }\r\n                that.soundDataAry[idx].onError(\"DECODE_ERROR\");\r\n                soundData.decodedCallbacksAry.forEach(function(callbacks) {\r\n                    if (typeof callbacks.err == \"function\") {\r\n                        callbacks.err(idx, that.soundDataAry[idx].errorID);\r\n                    }\r\n                });\r\n                soundData.decodedCallbacksAry = null;\r\n            };\r\n            this.context.decodeAudioData(arrayBuffer, successCallback, errorCallback);\r\n        }\r\n    };\r\n    // Web Audio API(iOS)\r\n    // Chrome Autoplay Policy \r\n    T2MediaLib.prototype.activate = function () {\r\n        this.init();\r\n        if (!this.context) return;\r\n        if (!this.isContextResumed && this.context.resume) { // fix Autoplay Policy in Chrome\r\n            var that = this;\r\n            this.context.resume().then(function () {\r\n                that.isContextResumed = true;\r\n            });\r\n        }\r\n        if (this.isActivated) return;\r\n        this.isActivated=true;\r\n        var buffer = this.context.createBuffer(1, Math.floor(this.context.sampleRate/32), this.context.sampleRate);\r\n        var ary = buffer.getChannelData(0);\r\n        for (var i = 0; i < ary.length; i++) {\r\n             ary[i] = 0; // \r\n        }\r\n        var source = this.context.createBufferSource();\r\n        source.buffer = buffer;\r\n        source.connect(this.context.destination);\r\n        source.start = source.start || source.noteOn;\r\n        source.start(0);\r\n    };\r\n    // \r\n    T2MediaLib.prototype.getSoundFileData = function(idx) {\r\n        var soundDataObj = this.soundDataAry[idx];\r\n        if (soundDataObj) {\r\n            return soundDataObj.fileData;\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n    // \r\n    T2MediaLib.prototype.getSoundDecodedData = function(idx) {\r\n        var soundDataObj = this.soundDataAry[idx];\r\n        if (soundDataObj) {\r\n            return soundDataObj.decodedData;\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n    // AudioContextcurrentTime\r\n    T2MediaLib.prototype.getCurrentTime = function () {//@hoge1e3\r\n        if (!this.context) return null;\r\n        return this.context.currentTime;\r\n    };\r\n\r\n    // SE //\r\n\r\n    T2MediaLib.prototype.playSE = function(idx, vol, pan, rate, offset, loop, loopStart, loopEnd,start,duration) {//add start,duration by @hoge1e3\r\n        if (!this.context) return null;\r\n        var soundData = this.soundDataAry[idx];\r\n        if (soundData == null) return null;\r\n        if (!soundData.isDecodeComplete()) {\r\n            var that = this;\r\n            var callbacks = {};\r\n            callbacks.succ = function(idx) {\r\n                that.playSE(idx, vol, pan, rate, offset, loop, loopStart, loopEnd,start,duration);//@hoge1e3\r\n            };\r\n            callbacks.err = function() {\r\n            };\r\n            this.decodeSound(idx, callbacks);\r\n            return null;\r\n        }\r\n        if (isMezonetSource(soundData.decodedData)) {\r\n            var playback=soundData.decodedData.playback(this.context);\r\n            playback.Start();\r\n            return playback;\r\n        }\r\n\r\n        var audioBuffer = soundData.decodedData;\r\n        if (!(audioBuffer instanceof AudioBuffer)) return null;\r\n\r\n        // \r\n        if (vol == null) {\r\n            vol = 1.0;\r\n        }\r\n        if (pan == null) {\r\n            pan = 0.0;\r\n        }\r\n        if (!rate) rate = 1.0;\r\n        if (!offset) {\r\n            offset = 0;\r\n        } else {\r\n            if      (offset > audioBuffer.duration) offset = audioBuffer.duration;\r\n            else if (offset < 0.0) offset = 0.0;\r\n        }\r\n        var durationStart = duration;\r\n        if (!duration) {\r\n            //duration=undefined; // iOS9duration==undefinedsource.start(start, offset, duration);\r\n            durationStart = 86400; // Number.MAX_SAFE_INTEGERiOS986400(24)\r\n        }\r\n        if (!loop) loop = false;\r\n        if (!loopStart) {\r\n            loopStart = soundData.loopStart||0.0;\r\n        } else {\r\n            if      (loopStart < 0.0) loopStart = 0.0;\r\n            else if (loopStart > audioBuffer.duration) loopStart = audioBuffer.duration;\r\n        }\r\n        if (!loopEnd) {\r\n            loopEnd = audioBuffer.duration;\r\n        } else {\r\n            if      (loopEnd < 0.0) loopEnd = 0.0;\r\n            else if (loopEnd > audioBuffer.duration) loopEnd = audioBuffer.duration;\r\n        }\r\n        start=start||0;//@hoge1e3\r\n\r\n        var source = this.context.createBufferSource();\r\n        this.context.createGain = this.context.createGain || this.context.createGainNode;\r\n        var gainNode = this.context.createGain();\r\n        var panNode = this.context.createPanner();\r\n\r\n        source.buffer = audioBuffer;\r\n        source.loop = loop;\r\n        source.loopStart = loopStart;\r\n        source.loopEnd = loopEnd;//audioBuffer.duration;\r\n        source.playbackRate.value = rate;\r\n\r\n        // \r\n        source.connect(gainNode);\r\n        gainNode.connect(panNode);\r\n        panNode.connect(this.context.destination);\r\n        panNode.panningModel = \"equalpower\";\r\n        if      (pan < -1.0) pan = -1.0;\r\n        else if (pan >  1.0) pan =  1.0;\r\n        var panAngle = pan * 90;\r\n        var panX = Math.sin(panAngle * (Math.PI / 180));\r\n        var panZ = -Math.cos(panAngle * (Math.PI / 180));\r\n        if (pan === -1.0 || pan === 1.0) panZ = 0; // 6.123233995736766e-170\r\n        if (panNode.positionX) {\r\n            panNode.positionX.value = panX;\r\n            panNode.positionY.value = 0;\r\n            panNode.positionZ.value = panZ;\r\n        } else {\r\n            panNode.setPosition(panX, 0, panZ);\r\n        }\r\n        // \r\n        //gainNode.gain.value = vol / (1 + Math.abs(pan));\r\n        // \r\n        gainNode.gain.value = vol * this.seMasterVolume * this.masterVolume;\r\n\r\n        // \r\n        var offset_adj;\r\n        if (loop && loopEnd - loopStart > 0 && offset > loopEnd) {\r\n            offset_adj = loopEnd;\r\n        } else {\r\n            offset_adj = offset;\r\n        }\r\n\r\n        // \r\n        source.gainNode = gainNode;\r\n        source.volumeValue = vol;\r\n        source.panNode = panNode;\r\n        source.panValue = pan;\r\n        source.playStartTime = this.context.currentTime+start;//@hoge1e3\r\n        source.playOffset = offset_adj;\r\n        source.plusTime = offset_adj;\r\n\r\n        // \r\n        source.start = source.start || source.noteOn;\r\n        source.stop  = source.stop  || source.noteOff;\r\n        source.start(start, offset, durationStart);\r\n        // iOS, Firefoxlooptrueduration\r\n        // iOSstopInvalidStateError\r\n        if (loop && duration != null) source.stop(start + duration);\r\n        var t=this;\r\n        t.seSources.push(source);\r\n        source.onended = function(event) {\r\n            source.onended = null;\r\n            var idx=t.seSources.indexOf(source);\r\n            if (idx>=0) t.seSources.splice(idx,1);\r\n        };\r\n        return source;\r\n    };\r\n    T2MediaLib.prototype.stopSE = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        try {\r\n            sourceObj.stop(0);\r\n        } catch(e) { // iOS\r\n            // iOSstopInvalidStateError\r\n            if (sourceObj.gainNode) {\r\n                sourceObj.gainNode.gain.cancelScheduledValues(this.context.currentTime);\r\n                sourceObj.gainNode.gain.linearRampToValueAtTime(0, this.context.currentTime);\r\n            }\r\n        }\r\n        return sourceObj;\r\n    };\r\n    T2MediaLib.prototype.stopAllSE = function(sourceObj) {\r\n        var t=this;\r\n        this.seSources.forEach(function (s) {\r\n            t.stopSE(s);\r\n        });\r\n    };\r\n    T2MediaLib.prototype.getSEMasterVolume = function() {\r\n        return this.seMasterVolume;\r\n    };\r\n    T2MediaLib.prototype.setSEMasterVolume = function(vol) {\r\n        this.seMasterVolume = vol;\r\n    };\r\n    T2MediaLib.prototype.getSEVolume = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.volumeValue;\r\n    };\r\n    T2MediaLib.prototype.setSEVolume = function(sourceObj, vol) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.gainNode.gain.value = vol * this.seMasterVolume * this.masterVolume;\r\n        sourceObj.volumeValue = vol;\r\n        return sourceObj;\r\n    };\r\n    T2MediaLib.prototype.getSERate = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.playbackRate.value;\r\n    };\r\n    T2MediaLib.prototype.setSERate = function(sourceObj, rate) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.playbackRate.value = rate;\r\n    };\r\n    T2MediaLib.prototype.getSEPan = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.panValue;\r\n    };\r\n    T2MediaLib.prototype.setSEPan = function(sourceObj, pan) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        var panNode = sourceObj.panNode;\r\n        if      (pan < -1.0) pan = -1.0;\r\n        else if (pan >  1.0) pan =  1.0;\r\n        var panAngle = pan * 90;\r\n        var panX = Math.sin(panAngle * (Math.PI / 180));\r\n        var panZ = Math.cos(panAngle * (Math.PI / 180));\r\n        if (pan === -1.0 || pan === 1.0) panZ = 0; // 6.123233995736766e-170\r\n        if (panNode.positionX) {\r\n            panNode.positionX.value = panX;\r\n            panNode.positionY.value = 0;\r\n            panNode.positionZ.value = panZ;\r\n        } else {\r\n            panNode.setPosition(panX, 0, panZ);\r\n        }\r\n        sourceObj.panValue = pan;\r\n    };\r\n    T2MediaLib.prototype.isSELoop = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.loop;\r\n    };\r\n    T2MediaLib.prototype.setSELoop = function(sourceObj, loop) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.loop = loop;\r\n    };\r\n    T2MediaLib.prototype.getSELoopStartTime = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.loopStart;\r\n    };\r\n    T2MediaLib.prototype.setSELoopStartTime = function(sourceObj, loopStart) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.loopStart = loopStart;\r\n    };\r\n    T2MediaLib.prototype.getSELoopEndTime = function(sourceObj) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        return sourceObj.loopEnd;\r\n    };\r\n    T2MediaLib.prototype.setSELoopEndTime = function(sourceObj, loopEnd) {\r\n        if (!(sourceObj instanceof AudioBufferSourceNode)) return null;\r\n        sourceObj.loopEnd = loopEnd;\r\n    };\r\n\r\n    // BGM //\r\n\r\n    T2MediaLib.prototype.playBGM = function(id, idx, loop, offset, loopStart, loopEnd) {\r\n        if (!this.context) return null;\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.playBGM(idx, loop, offset, loopStart, loopEnd);\r\n    };\r\n    T2MediaLib.prototype.stopBGM = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.stopBGM();\r\n    };\r\n    T2MediaLib.prototype.pauseBGM = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.pauseBGM();\r\n    };\r\n    T2MediaLib.prototype.resumeBGM = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.resumeBGM();\r\n    };\r\n    T2MediaLib.prototype.getBGMMasterVolume = function() {\r\n        return this.bgmMasterVolume;\r\n    };\r\n    T2MediaLib.prototype.setBGMMasterVolume = function(vol) {\r\n        this.bgmMasterVolume = vol;\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            var bgmPlayer = this.bgmPlayerAry[i];\r\n            if (!(bgmPlayer instanceof T2MediaLib_BGMPlayer)) continue;\r\n            bgmPlayer.onChangeBGMMasterVolume();\r\n        }\r\n    };\r\n    T2MediaLib.prototype.getBGMVolume = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMVolume();\r\n    };\r\n    T2MediaLib.prototype.setBGMVolume = function(id, vol) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMVolume(vol);\r\n    };\r\n    T2MediaLib.prototype.getBGMTempo = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMTempo();\r\n    };\r\n    T2MediaLib.prototype.setBGMTempo = function(id, tempo) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMTempo(tempo);\r\n    };\r\n    T2MediaLib.prototype.getBGMPan = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMPan();\r\n    };\r\n    T2MediaLib.prototype.setBGMPan = function(id, pan) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMPan(pan);\r\n    };\r\n    T2MediaLib.prototype.isBGMLoop = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.isBGMLoop();\r\n    };\r\n    T2MediaLib.prototype.setBGMLoop = function(id, loop) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMLoop(loop);\r\n    };\r\n    T2MediaLib.prototype.getBGMLoopStartTime = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMLoopStartTime();\r\n    };\r\n    T2MediaLib.prototype.setBGMLoopStartTime = function(id, loopStart) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMLoopStartTime(loopStart);\r\n    };\r\n    T2MediaLib.prototype.getBGMLoopEndTime = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMLoopEndTime();\r\n    };\r\n    T2MediaLib.prototype.setBGMLoopEndTime = function(id, loopEnd) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setBGMLoopEndTime(loopEnd);\r\n    };\r\n    T2MediaLib.prototype.getBGMCurrentTime = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMCurrentTime();\r\n    };\r\n    T2MediaLib.prototype.getBGMLength = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMLength();\r\n    };\r\n    T2MediaLib.prototype.getPlayingBGMName = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getPlayingBGMName();\r\n    };\r\n    T2MediaLib.prototype.setOnBGMEndListener = function(id, listener) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setOnBGMEndListener(listener);\r\n    };\r\n    T2MediaLib.prototype.getPlayingBGMState = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getPlayingBGMState();\r\n    };\r\n    T2MediaLib.prototype.getBGMPicoAudio = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.getBGMPicoAudio();\r\n    };\r\n    T2MediaLib.prototype.isTagLoop = function(id) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.isTagLoop();\r\n    };\r\n    T2MediaLib.prototype.setTagLoop = function(id, isTagLoop) {\r\n        var bgmPlayer = this._getBgmPlayer(id);\r\n        if (!bgmPlayer) return null;\r\n        return bgmPlayer.setTagLoop(isTagLoop);\r\n    };\r\n    T2MediaLib.prototype.getBGMPlayerMax = function() {\r\n        return this.bgmPlayerMax;\r\n    };\r\n    T2MediaLib.prototype.allStopBGM = function() {\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            this.stopBGM(i);\r\n        }\r\n    };\r\n    T2MediaLib.prototype.allResetBGM = function() {\r\n        for (var i=0; i<this.bgmPlayerMax; i++) {\r\n            this.stopBGM(i);\r\n            this.setBGMVolume(i, 1.0);\r\n            this.setBGMTempo(i, 1.0);\r\n            this.setBGMPan(i, 0.0);\r\n        }\r\n        this.setMasterVolume(1.0);\r\n        this.setSEMasterVolume(1.0);\r\n        this.setBGMMasterVolume(1.0);\r\n    };\r\n    T2MediaLib.prototype._getBgmPlayer = function(id) {\r\n        if (id < 0 || this.bgmPlayerMax <= id) return null;\r\n        var bgmPlayer = this.bgmPlayerAry[id];\r\n        if (!(bgmPlayer instanceof T2MediaLib_BGMPlayer)) return null;\r\n        return bgmPlayer;\r\n    };\r\n\r\n    // Audio //\r\n\r\n    T2MediaLib.prototype.loadAudio = function(idx, url) {\r\n        var audio = new Audio(url);\r\n        audio.play();\r\n\r\n        this.audioDataAry.data[idx] = null;\r\n\r\n        var that = this;\r\n        audio.addEventListener('loadstart', function() {\r\n            if (!that.context) return null;\r\n            var source = that.context.createMediaElementSource(audio);\r\n            source.connect(that.context.destination);\r\n        }, false);\r\n\r\n        audio.addEventListener('canplay', function() {\r\n            this.audioDataAry.data[idx] = audio;\r\n        }, false);\r\n\r\n        audio.load();\r\n\r\n    };\r\n    T2MediaLib.prototype.playAudio = function(idx, loop, startTime) {\r\n        var audio = this.audioDataAry.data[idx];\r\n        if (!audio) return null;\r\n        if (!startTime) startTime = 0;\r\n\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.pause();\r\n            this.playingAudio.currentTime = 0;\r\n        }\r\n        this.playingAudio = audio;\r\n        audio.loop = loop;\r\n        audio.volume = this.audioVolume;\r\n        audio.currentTime = startTime;\r\n        audio.play();\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.stopAudio = function() {\r\n        var audio = this.playingAudio;\r\n        if (!(audio instanceof Audio)) return null;\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n        this.playingAudio = null;\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.pauseAudio = function() {\r\n        var audio = this.playingAudio;\r\n        if (!audio) return null;\r\n        audio.pause();\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.resumeAudio = function() {\r\n        var audio = this.playingAudio;\r\n        if (!audio) return null;\r\n        audio.play();\r\n        return audio;\r\n    };\r\n    T2MediaLib.prototype.setAudioVolume = function(vol) {\r\n        this.audioVolume = vol;\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.volume = vol;\r\n        }\r\n    };\r\n    T2MediaLib.prototype.setAudioTempo = function(tempo) {\r\n        this.audioTempo = tempo;\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.playbackRate = tempo;\r\n        }\r\n    };\r\n    T2MediaLib.prototype.setAudioPosition = function(time) {\r\n        if (this.playingAudio instanceof Audio) {\r\n            this.playingAudio.currentTime = time;\r\n        }\r\n    };\r\n    T2MediaLib.prototype.getAudioData = function(idx) {\r\n        return this.audioDataAry.data[idx];\r\n    };\r\n    T2MediaLib.prototype.getAudioCurrentTime = function() {\r\n        if (!(this.playingAudio instanceof Audio)) return null;\r\n        return this.playingAudio.currentTime;\r\n    };\r\n    T2MediaLib.prototype.getAudioLength = function() {\r\n        if (!(this.playingAudio instanceof Audio)) return null;\r\n        return this.playingAudio.duration;\r\n    };\r\n\r\n    // Ogg //\r\n    T2MediaLib.prototype.searchOggLoop = function(arrayBuffer) {\r\n        var buf = new Uint8Array(arrayBuffer.slice(0, 3000));\r\n        var str = String.fromCharCode.apply(null, buf);\r\n        var isVorbis = str.lastIndexOf(\"vorbis\", 0x22);\r\n        if (isVorbis == -1) return [0, 0]; // Vorbis\r\n        var startIdx = str.indexOf(\"LOOPSTART=\");\r\n        var lengthIdx = str.indexOf(\"LOOPLENGTH=\");\r\n        var loopStart = 0;\r\n        var loopLength = 0;\r\n        var sampleRate = buf[40] + (buf[41]<<8) + (buf[42]<<16) + (buf[43]<<24);\r\n        var tagSize,i,c;\r\n        if (startIdx != -1) {\r\n            tagSize = buf[startIdx] + (buf[startIdx+1]<<8) + (buf[startIdx+2]<<16) + (buf[startIdx+3]<<24);\r\n            for (i=startIdx+10; i<startIdx+tagSize; i++) {\r\n                c = str[i];\r\n                if (c < '0' || c > '9') break;\r\n                loopStart = loopStart*10 + (c - '0');\r\n            }\r\n        }\r\n        if (lengthIdx != -1) {\r\n            tagSize = buf[lengthIdx] + (buf[lengthIdx+1]<<8) + (buf[lengthIdx+2]<<16) + (buf[lengthIdx+3]<<24);\r\n            for (i=lengthIdx+11; i<lengthIdx+tagSize; i++) {\r\n                c = str[i];\r\n                if (c < '0' || c > '9') break;\r\n                loopLength = loopLength*10 + (c - '0');\r\n            }\r\n        }\r\n        // \r\n        var loopEnd = (loopStart + loopLength) / sampleRate;\r\n        loopStart /= sampleRate;\r\n        return [loopStart, loopEnd];\r\n    };\r\n\r\n    return T2MediaLib;\r\n})();\r\n\r\n\r\n\r\nvar T2MediaLib_BGMPlayer = (function(){\r\n    function isPicoAudio(bgm) {\r\n        return typeof PicoAudio!==\"undefined\" && bgm instanceof PicoAudio;\r\n    }\r\n    function isMezonetSource(bgm) {\r\n        return typeof Mezonet!==\"undefined\" && bgm instanceof Mezonet.Source;\r\n    }\r\n    function isMezonetPlayback(bgm) {\r\n        return typeof Mezonet!==\"undefined\" && bgm instanceof Mezonet.Playback;\r\n    }\r\n    var T2MediaLib_BGMPlayer = function(t2MediaLib, arg_id) {\r\n        this.t2MediaLib = t2MediaLib;\r\n        this.id = arg_id;\r\n        this.playingBGMState = \"stop\";\r\n        this.playingBGMStatePending = null;\r\n        this.playingBGM = null;\r\n        this.playingBGMName = null;\r\n        this.bgmPause = 0;\r\n        this.bgmPauseTime = 0;\r\n        this.bgmPauseCurrentTime = 0;\r\n        this.bgmPauseTempo = 0;\r\n        this.bgmPauseLoop = false;\r\n        this.bgmPauseLoopStart = 0;\r\n        this.bgmPauseLoopEnd = 0;\r\n        this.bgmVolume = 1.0;\r\n        this.bgmTempo = 1.0;\r\n        this.bgmPan = 0.0;\r\n        this.picoAudio = null;//new PicoAudio(this.context);\r\n        this.picoAudioSetDataBGMName = null; // setDatasetData\r\n        this.PICO_AUDIO_VOLUME_COEF = 1;//0.2;\r\n        this.isTagLoop = true; // Ogg VorbisLOOPSTART,LOOPLENGTH\r\n    };\r\n\r\n    // BGM //\r\n\r\n    T2MediaLib_BGMPlayer.prototype.playBGM = function(idx, loop, offset, loopStart, loopEnd) {\r\n        this.stopBGM();\r\n\r\n        var soundData = this.t2MediaLib.soundDataAry[idx];\r\n        if (soundData == null) return null;\r\n        if (!soundData.isDecodeComplete()) {\r\n            var that = this;\r\n            var callbacks = {};\r\n            callbacks.bgmPlayerId = this.id;\r\n            callbacks.succ = function() {\r\n                var succFunc = function() {\r\n                    var pending = that.playingBGMStatePending; // \r\n                    that._setPlayingBGMState(\"stop\", true);\r\n                    if (pending != \"stop\" && that.playingBGMName == idx) {\r\n                        that.playBGM(idx, loop, offset, loopStart, loopEnd);\r\n                    }\r\n                    if (pending == \"pause\") {\r\n                        that.pauseBGM();\r\n                    }\r\n                };\r\n                var decodedData = soundData.decodedData;\r\n                if (decodedData instanceof Object) { // MIDI\r\n                    // MIDIAudioContext.currenTime\r\n                    // playBGM\r\n                    setTimeout(function(){succFunc();}, 0);\r\n                } else { // MP3, Ogg, AAC, WAV\r\n                    succFunc();\r\n                }\r\n            };\r\n            callbacks.err = function() {\r\n                that._setPlayingBGMState(\"stop\", true);\r\n            };\r\n            this.playingBGMName = idx;\r\n            this._setPlayingBGMState(\"decoding\", true);\r\n            this._setPlayingBGMState(\"play\");\r\n            this.t2MediaLib.decodeSound(idx, callbacks);\r\n            return this;\r\n        }\r\n\r\n        var decodedData = soundData.decodedData;\r\n        if (isMezonetSource(decodedData)) {\r\n            var m=decodedData.playback(this.t2MediaLib.context);\r\n            this.playingBGM = m;\r\n            m.Start();\r\n        } else if (decodedData instanceof AudioBuffer) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.isTagLoop) {\r\n                loopStart = loopStart||soundData.tagLoopStart;\r\n                loopEnd = loopEnd||soundData.tagLoopEnd;\r\n            }\r\n            this.playingBGM = this.t2MediaLib.playSE(idx, this.bgmVolume, this.bgmPan, this.bgmTempo, offset, loop, loopStart, loopEnd);\r\n        } else if (decodedData instanceof Object) {\r\n            // Midi\r\n            this._initPicoAudio();\r\n            if (idx != this.picoAudioSetDataBGMName) {\r\n                this.picoAudio.setData(decodedData);\r\n                this.picoAudioSetDataBGMName = idx;\r\n            } else {\r\n                this.picoAudio.initStatus();\r\n            }\r\n            this.picoAudio.setLoop(loop);\r\n            this.picoAudio.setMasterVolume(this.PICO_AUDIO_VOLUME_COEF * this.bgmVolume *\r\n                 this.t2MediaLib.bgmMasterVolume * this.t2MediaLib.masterVolume);\r\n            if (!offset) {\r\n                offset = 0;\r\n            } else {\r\n                var bgmLengthTime = this.picoAudio.getTime(Number.MAX_SAFE_INTEGER);\r\n                if      (offset > bgmLengthTime) offset = bgmLengthTime;\r\n                else if (offset < 0.0) offset = 0.0;\r\n            }\r\n            this.picoAudio.setStartTime(offset);\r\n            this.picoAudio.play();\r\n            this.playingBGM = this.picoAudio;\r\n        }\r\n        this.playingBGMName = idx;\r\n        this.bgmPause = 0;\r\n        this._setPlayingBGMState(\"play\");\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.stopBGM = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.Stop();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            this.picoAudio.stop();\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            try {\r\n                bgm.stop(0);\r\n            } catch(e) { // iOS\r\n                // iOSstopInvalidStateError\r\n                if (bgm.gainNode) {\r\n                    bgm.gainNode.gain.cancelScheduledValues(this.t2MediaLib.context.currentTime);\r\n                    bgm.gainNode.gain.linearRampToValueAtTime(0, this.t2MediaLib.context.currentTime);\r\n                }\r\n            }\r\n        }\r\n        this.playingBGM = null;\r\n        this.playingBGMName = null;\r\n        this._setPlayingBGMState(\"stop\");\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.pauseBGM = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.pause();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            if (this.bgmPause === 0) {\r\n                this.bgmPauseTime = this.getBGMCurrentTime();\r\n                this.bgmPauseCurrentTime = bgm.context.currentTime;\r\n                bgm.stop();\r\n                this.bgmPause = 1;\r\n            }\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 0) {\r\n                this.bgmPauseTime = this.getBGMCurrentTime();\r\n                this.bgmPauseLoopStart = this.t2MediaLib.getSELoopStartTime(bgm);\r\n                this.bgmPauseLoopEnd = this.t2MediaLib.getSELoopEndTime(bgm);\r\n                this.bgmPauseLoop = this.t2MediaLib.isSELoop(bgm);\r\n                this.bgmPauseCurrentTime = bgm.context.currentTime;\r\n                this.bgmPauseTempo = this.bgmTempo;\r\n                try {\r\n                    bgm.stop(0);\r\n                } catch(e) { // iOS\r\n                    // iOSstopInvalidStateError\r\n                    if (bgm.gainNode) {\r\n                        bgm.gainNode.gain.cancelScheduledValues(this.t2MediaLib.context.currentTime);\r\n                        bgm.gainNode.gain.linearRampToValueAtTime(0, this.t2MediaLib.context.currentTime);\r\n                    }\r\n                }\r\n                this.bgmPause = 1;\r\n            }\r\n        }\r\n        if (this.playingBGMState != \"stop\") {\r\n            this._setPlayingBGMState(\"pause\");\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.resumeBGM = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.resume();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            if (this.bgmPause === 1) {\r\n                bgm.play();\r\n                this.bgmPause = 0;\r\n            }\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                bgm = this.playBGM(this.playingBGMName, this.bgmPauseLoop, this.bgmPauseTime, this.bgmPauseLoopStart, this.bgmPauseLoopEnd);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.onChangeBGMMasterVolume = function() {\r\n        this.setBGMVolume(this.getBGMVolume());\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMVolume = function() {\r\n        return this.bgmVolume;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMVolume = function(vol) {\r\n        var bgm = this.playingBGM;\r\n        this.bgmVolume = vol;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.setVolume(vol);\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            this.picoAudio.setMasterVolume(this.PICO_AUDIO_VOLUME_COEF * vol * this.t2MediaLib.bgmMasterVolume * this.t2MediaLib.masterVolume);\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            bgm.gainNode.gain.value = vol * this.t2MediaLib.bgmMasterVolume * this.t2MediaLib.masterVolume;\r\n            //seMasterVolume\r\n            //this.t2MediaLib.setSEVolume(bgm, vol);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMTempo = function() {\r\n        return this.bgmTempo;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMTempo = function(tempo) {\r\n        // MP3, Ogg, AAC, WAV\r\n        var bgm = this.playingBGM;\r\n\r\n        if (tempo <= 0 || isNaN(tempo)) tempo = 1;\r\n        if (isMezonetPlayback(bgm)){\r\n            bgm.setRate(tempo);\r\n            return this;\r\n        } else if ((bgm instanceof AudioBufferSourceNode) && this.bgmPause === 0) {\r\n            bgm.plusTime -= (this.t2MediaLib.context.currentTime - bgm.playStartTime) * (tempo - this.bgmTempo);\r\n        }\r\n        this.bgmTempo = tempo;\r\n        this.t2MediaLib.setSERate(bgm, tempo);\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMPan = function() {\r\n        return this.bgmPan;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMPan = function(pan) {\r\n        var bgm = this.playingBGM;\r\n        this.bgmPan = pan;\r\n        if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            this.t2MediaLib.setSEPan(bgm, pan);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.isBGMLoop = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return this.picoAudio.isLoop();\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                return this.bgmPauseLoop;\r\n            } else {\r\n                return this.t2MediaLib.isSELoop(bgm);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMLoop = function(loop) {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            this.picoAudio.setLoop(loop);\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                this.bgmPauseLoop = loop;\r\n            } else {\r\n                this.t2MediaLib.setSELoop(bgm, loop);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMLoopStartTime = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return 0;\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                return this.bgmPauseLoopStart;\r\n            } else {\r\n                return this.t2MediaLib.getSELoopStartTime(bgm);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMLoopStartTime = function(loopStart) {\r\n        var bgm = this.playingBGM;\r\n        if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                this.bgmPauseLoopStart = loopStart;\r\n            } else {\r\n                return this.t2MediaLib.setSELoopStartTime(bgm, loopStart);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMLoopEndTime = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return this.getBGMLength();\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                return this.bgmPauseLoopEnd;\r\n            } else {\r\n                return this.t2MediaLib.getSELoopEndTime(bgm);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setBGMLoopEndTime = function(loopEnd) {\r\n        var bgm = this.playingBGM;\r\n        if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            if (this.bgmPause === 1) {\r\n                this.bgmPauseLoopEnd = loopEnd;\r\n            } else {\r\n                return this.t2MediaLib.setSELoopEndTime(bgm, loopEnd);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMCurrentTime = function() {\r\n        var bgm = this.playingBGM;\r\n        var time;\r\n        if (isMezonetPlayback(bgm)){\r\n            return bgm.getTrackTime();\r\n        } else if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            if (this.bgmPause === 0) {\r\n                time = this.picoAudio.context.currentTime - this.picoAudio.states.startTime;\r\n            } else {\r\n                time = this.bgmPauseTime;\r\n            }\r\n            return time;\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            var time2, currenTime, tempo, plusTime, minusTime, mod;\r\n\r\n            if (this.bgmPause === 0) {\r\n                currenTime = this.t2MediaLib.context.currentTime;\r\n                tempo = this.bgmTempo;\r\n            } else {\r\n                currenTime = this.bgmPauseCurrentTime;\r\n                tempo = this.bgmPauseTempo;\r\n            }\r\n\r\n            time2 = (currenTime - bgm.playStartTime) * tempo + bgm.plusTime;\r\n            if (bgm.loop) {\r\n                if (bgm.loopEnd - bgm.loopStart > 0) { // \r\n\r\n                    if (time2 < bgm.loopStart) { // \r\n                        plusTime  = 0;\r\n                        minusTime = 0;\r\n                        mod = bgm.buffer.duration;\r\n                    } else { // \r\n                        plusTime  = bgm.loopStart;\r\n                        minusTime = bgm.loopStart;\r\n                        mod = bgm.loopEnd - bgm.loopStart;\r\n                    }\r\n                } else { // \r\n                    mod = bgm.buffer.duration;\r\n                    plusTime = 0;\r\n                    minusTime = 0;\r\n                }\r\n            }\r\n\r\n            if (bgm.loop) {\r\n                time = ((time2 - minusTime) % mod) + plusTime;\r\n            } else {\r\n                time = time2;\r\n                if (time > bgm.buffer.duration) time = bgm.buffer.duration;\r\n            }\r\n            return time;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMLength = function() {\r\n        var bgm = this.playingBGM;\r\n        if (isPicoAudio(bgm)) {\r\n            // Midi\r\n            return this.picoAudio.getTime(Number.MAX_SAFE_INTEGER);\r\n        } else if (bgm instanceof AudioBufferSourceNode) {\r\n            // MP3, Ogg, AAC, WAV\r\n            return bgm.buffer.duration;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getPlayingBGMName = function() {\r\n        return this.playingBGMName;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setOnBGMEndListener = function(listener) {\r\n        if (this.picoAudio != null) {\r\n            this.picoAudio.setOnSongEndListener(listener);\r\n        }\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getPlayingBGMState = function() {\r\n        return this.playingBGMState;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.getBGMPicoAudio = function() {\r\n        this._initPicoAudio();\r\n        return this.picoAudio;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.isTagLoop = function() {\r\n        return this.isTagLoop;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype.setTagLoop = function(isTagLoop) {\r\n        this.isTagLoop = isTagLoop;\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype._setPlayingBGMState = function(state, force) {\r\n        if (force || this.playingBGMState != \"decoding\") {\r\n            this.playingBGMState = state;\r\n            this.playingBGMStatePending = null;\r\n        } else {\r\n            this.playingBGMStatePending = state;\r\n        }\r\n    };\r\n\r\n    T2MediaLib_BGMPlayer.prototype._initPicoAudio = function() {\r\n        if (this.picoAudio == null) {\r\n            if (this.id == 0) {\r\n                this.picoAudio = this.t2MediaLib.picoAudio; // 0T2MediaLib.picoAudio\r\n            }\r\n            if (this.picoAudio == null) {\r\n                this.picoAudio = new PicoAudio(this.t2MediaLib.context, this.t2MediaLib.picoAudio); // AudioContextmax6\r\n            }\r\n        }\r\n    };\r\n\r\n    return T2MediaLib_BGMPlayer;\r\n})();\r\n\r\n\r\n\r\nvar T2MediaLib_SoundData = (function(){\r\n    var T2MediaLib_SoundData = function(idx, url) {\r\n        // \"none\"    :\r\n        // \"loading\" :\r\n        // \"loaded\"  :\r\n        // \"decoding\":\r\n        // \"decoded\" :\r\n        // \"error\"   :\r\n        this.idx = idx;\r\n        this.state = \"none\";\r\n        this.errorID = null;\r\n        this.url = null;\r\n        this.fileData = null;\r\n        this.decodedData = null;\r\n        this.decodedCallbacksAry = null;\r\n        this.tagLoopStart = 0;\r\n        this.tagLoopEnd = 0;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onLoad = function(url) {\r\n        this.state = \"loading\";\r\n        this.url = url;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onLoadComplete = function(data) {\r\n        this.state = \"loaded\";\r\n        this.fileData = data;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onDecode = function() {\r\n        this.state = \"decoding\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onDecodeComplete = function(data) {\r\n        this.state = \"decoded\";\r\n        this.decodedData = data;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.onError = function(errorID) {\r\n        this.state = \"error\";\r\n        this.errorID = errorID;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isNone = function() {\r\n        return this.state == \"none\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isLoadComplete = function() {\r\n        switch(this.state) {\r\n            case \"loaded\":\r\n            case \"decoding\":\r\n            case \"decoded\":\r\n                return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isDecoding = function() {\r\n        return this.state == \"decoding\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.isDecodeComplete = function() {\r\n        return this.state == \"decoded\";\r\n    };\r\n\r\n    T2MediaLib_SoundData.prototype.removeDecodedData = function() {\r\n        this.state = \"loaded\";\r\n        this.decodedData = null;\r\n    };\r\n\r\n    return T2MediaLib_SoundData;\r\n})();\r\n// r.jsfunction(){...var T2Media...}() \r\nwindow.T2MediaLib=T2MediaLib;\r\nwindow.T2MediaLib_BGMPlayer=T2MediaLib_BGMPlayer;\r\nwindow.T2MediaLib_SoundData=T2MediaLib_SoundData;\r\n\ndefine(\"T2MediaLib\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.T2MediaLib;\n    };\n}(this)));\n\ndefine('UIDiag',[\"UI\"],function (UI) {\r\n    var UIDiag={};\r\n    function isPrimitive(mesg) {\r\n        return (typeof mesg===\"string\" ||\r\n        typeof mesg===\"number\" ||\r\n        typeof mesg===\"boolean\");\r\n    }\r\n    function parseMesg(mesg,defTitle) {\r\n        if (mesg==null) mesg=\"\";\r\n        if (isPrimitive(mesg)) {\r\n            return {title:defTitle,body:multiLine(mesg)};\r\n        } else if ( (typeof $!==\"undefined\") && mesg instanceof $) {\r\n            return {\r\n                title:mesg.title||defTitle,\r\n                body:mesg\r\n            };\r\n        } else {\r\n            if (isPrimitive(mesg.body)) mesg.body=multiLine(mesg.body);\r\n            return mesg;\r\n        }\r\n    }\r\n    function multiLine(mesg) {\r\n        var lines=(mesg+\"\").split(\"\\n\");\r\n        if (lines.length==1) return lines[0];\r\n        return UI.apply(this,[\"div\"].concat(lines.map(function (e) {\r\n            return [\"div\",e];\r\n        })));\r\n    }\r\n    UIDiag.confirm=function (mesg) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"button\",{on:{click:sendF(true)}},\"OK\"],\r\n                [\"button\",{on:{click:sendF(false)}},\"\"]).dialog({width:\"auto\",close:sendF(false)});\r\n        var d=$.Deferred();\r\n        function sendF(r) {\r\n            return function () { d.resolve(r); di.dialog(\"close\"); di.remove(); };\r\n        }\r\n        return d.promise();\r\n    };\r\n    UIDiag.alert=function (mesg) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"button\",{on:{click:sendF(true)}},\"OK\"]).dialog({width:\"auto\",close:sendF(false)});\r\n        var d=$.Deferred();\r\n        function sendF(r) {\r\n            return function () { d.resolve(r); di.dialog(\"close\"); di.remove(); };\r\n        }\r\n        return d.promise();\r\n    };\r\n    // Compat with $InputBox\r\n    UIDiag.open=function(title,prompt,_default, left, top, width, height) {\r\n        return UIDiag.prompt({title:title,body:prompt},_default,{\r\n            left:left, top:top, width:width, height:height\r\n        });\r\n    };\r\n    UIDiag.getStatus=function () {return UIDiag.status;};\r\n    UIDiag.getText=function () {return UIDiag.val? UIDiag.val.val():\"\";};\r\n    //---\r\n    UIDiag.prompt=function (mesg,value,geom) {\r\n        mesg=parseMesg(mesg,\"\");\r\n        geom=geom||{};\r\n        if (typeof geom.left===\"number\" && typeof geom.top===\"number\") {\r\n            position={my:\"left top\",at:\"left+\"+geom.left+\" top+\"+geom.top, of:\"body\"};\r\n        } else {\r\n            position={of:\"body\",at:\"center\",my:\"center\"};\r\n        }\r\n        var di=UI(\"div\",{title:mesg.title},[\"div\",mesg.body],\r\n                [\"input\",{on:{enterkey:ok},$var:\"val\", value:value}],[\"br\"],\r\n                [\"button\",{on:{click:ok}},\"OK\"],\r\n                [\"button\",{on:{click:cancel}},\"\"]).dialog({\r\n                    width:geom.width||\"auto\",\r\n                    height:geom.height||\"auto\",\r\n                    position:position,\r\n                    close:function (){\r\n                        di.dialog(\"close\");\r\n                        d.resolve();\r\n                    }\r\n                });\r\n        setTimeout(function () {\r\n            di.$vars.val.focus();\r\n            //console.log(\"FOcus\");\r\n        },10);\r\n        UIDiag.status=0;\r\n        UIDiag.val=di.$vars.val;\r\n        var d=$.Deferred();\r\n        function ok() {\r\n            UIDiag.status=1;\r\n            var r=di.$vars.val.val();\r\n            UIDiag.resultValue=r;\r\n            d.resolve(r);\r\n            di.dialog(\"close\");\r\n            di.remove();\r\n        }\r\n        function cancel() {\r\n            UIDiag.status=2;\r\n            di.dialog(\"close\");\r\n            di.remove();\r\n            d.resolve();\r\n        }\r\n        return d.promise();\r\n\r\n    };\r\n    if (typeof window!=\"undefined\") window.UIDiag=UIDiag;\r\n    return UIDiag;\r\n});\r\n\n/*global requirejs*/\r\ndefine('runtime',[\"ImageList\",\"T2MediaLib\",\"UIDiag\"],\r\nfunction (ImageList,T2MediaLib,UIDiag) {\r\n    console.log(\"runtimes loaded\",arguments);\r\n    if (!window.T2MediaLib) window.T2MediaLib=T2MediaLib;\r\n    return {ImageList,T2MediaLib,UIDiag};\r\n});\r\n\n/***\r\nThis is part of jsdifflib v1.0. <http://snowtide.com/jsdifflib>\r\n\r\nCopyright (c) 2007, Snowtide Informatics Systems, Inc.\r\nAll rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without modification,\r\nare permitted provided that the following conditions are met:\r\n\r\n\t* Redistributions of source code must retain the above copyright notice, this\r\n\t\tlist of conditions and the following disclaimer.\r\n\t* Redistributions in binary form must reproduce the above copyright notice,\r\n\t\tthis list of conditions and the following disclaimer in the documentation\r\n\t\tand/or other materials provided with the distribution.\r\n\t* Neither the name of the Snowtide Informatics Systems nor the names of its\r\n\t\tcontributors may be used to endorse or promote products derived from this\r\n\t\tsoftware without specific prior written permission.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\r\nEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\nOF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT\r\nSHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\r\nINCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\r\nTO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\r\nBUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\nCONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN\r\nANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\r\nDAMAGE.\r\n***/\r\n/* Author: Chas Emerick <cemerick@snowtide.com> */\r\n__whitespace = {\" \":true, \"\\t\":true, \"\\n\":true, \"\\f\":true, \"\\r\":true};\r\n\r\ndifflib = {\r\n\tdefaultJunkFunction: function (c) {\r\n\t\treturn __whitespace.hasOwnProperty(c);\r\n\t},\r\n\t\r\n\tstripLinebreaks: function (str) { return str.replace(/^[\\n\\r]*|[\\n\\r]*$/g, \"\"); },\r\n\t\r\n\tstringAsLines: function (str) {\r\n\t\tvar lfpos = str.indexOf(\"\\n\");\r\n\t\tvar crpos = str.indexOf(\"\\r\");\r\n\t\tvar linebreak = ((lfpos > -1 && crpos > -1) || crpos < 0) ? \"\\n\" : \"\\r\";\r\n\t\t\r\n\t\tvar lines = str.split(linebreak);\r\n\t\tfor (var i = 0; i < lines.length; i++) {\r\n\t\t\tlines[i] = difflib.stripLinebreaks(lines[i]);\r\n\t\t}\r\n\t\t\r\n\t\treturn lines;\r\n\t},\r\n\t\r\n\t// iteration-based reduce implementation\r\n\t__reduce: function (func, list, initial) {\r\n\t\tif (initial != null) {\r\n\t\t\tvar value = initial;\r\n\t\t\tvar idx = 0;\r\n\t\t} else if (list) {\r\n\t\t\tvar value = list[0];\r\n\t\t\tvar idx = 1;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tfor (; idx < list.length; idx++) {\r\n\t\t\tvalue = func(value, list[idx]);\r\n\t\t}\r\n\t\t\r\n\t\treturn value;\r\n\t},\r\n\t\r\n\t// comparison function for sorting lists of numeric tuples\r\n\t__ntuplecomp: function (a, b) {\r\n\t\tvar mlen = Math.max(a.length, b.length);\r\n\t\tfor (var i = 0; i < mlen; i++) {\r\n\t\t\tif (a[i] < b[i]) return -1;\r\n\t\t\tif (a[i] > b[i]) return 1;\r\n\t\t}\r\n\t\t\r\n\t\treturn a.length == b.length ? 0 : (a.length < b.length ? -1 : 1);\r\n\t},\r\n\t\r\n\t__calculate_ratio: function (matches, length) {\r\n\t\treturn length ? 2.0 * matches / length : 1.0;\r\n\t},\r\n\t\r\n\t// returns a function that returns true if a key passed to the returned function\r\n\t// is in the dict (js object) provided to this function; replaces being able to\r\n\t// carry around dict.has_key in python...\r\n\t__isindict: function (dict) {\r\n\t\treturn function (key) { return dict.hasOwnProperty(key); };\r\n\t},\r\n\t\r\n\t// replacement for python's dict.get function -- need easy default values\r\n\t__dictget: function (dict, key, defaultValue) {\r\n\t\treturn dict.hasOwnProperty(key) ? dict[key] : defaultValue;\r\n\t},\t\r\n\t\r\n\tSequenceMatcher: function (a, b, isjunk) {\r\n\t\tthis.set_seqs = function (a, b) {\r\n\t\t\tthis.set_seq1(a);\r\n\t\t\tthis.set_seq2(b);\r\n\t\t}\r\n\t\t\r\n\t\tthis.set_seq1 = function (a) {\r\n\t\t\tif (a == this.a) return;\r\n\t\t\tthis.a = a;\r\n\t\t\tthis.matching_blocks = this.opcodes = null;\r\n\t\t}\r\n\t\t\r\n\t\tthis.set_seq2 = function (b) {\r\n\t\t\tif (b == this.b) return;\r\n\t\t\tthis.b = b;\r\n\t\t\tthis.matching_blocks = this.opcodes = this.fullbcount = null;\r\n\t\t\tthis.__chain_b();\r\n\t\t}\r\n\t\t\r\n\t\tthis.__chain_b = function () {\r\n\t\t\tvar b = this.b;\r\n\t\t\tvar n = b.length;\r\n\t\t\tvar b2j = this.b2j = {};\r\n\t\t\tvar populardict = {};\r\n\t\t\tfor (var i = 0; i < b.length; i++) {\r\n\t\t\t\tvar elt = b[i];\r\n\t\t\t\tif (b2j.hasOwnProperty(elt)) {\r\n\t\t\t\t\tvar indices = b2j[elt];\r\n\t\t\t\t\tif (n >= 200 && indices.length * 100 > n) {\r\n\t\t\t\t\t\tpopulardict[elt] = 1;\r\n\t\t\t\t\t\tdelete b2j[elt];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindices.push(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb2j[elt] = [i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfor (var elt in populardict) {\r\n\t\t\t\tif (populardict.hasOwnProperty(elt)) {\r\n\t\t\t\t\tdelete b2j[elt];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar isjunk = this.isjunk;\r\n\t\t\tvar junkdict = {};\r\n\t\t\tif (isjunk) {\r\n\t\t\t\tfor (var elt in populardict) {\r\n\t\t\t\t\tif (populardict.hasOwnProperty(elt) && isjunk(elt)) {\r\n\t\t\t\t\t\tjunkdict[elt] = 1;\r\n\t\t\t\t\t\tdelete populardict[elt];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var elt in b2j) {\r\n\t\t\t\t\tif (b2j.hasOwnProperty(elt) && isjunk(elt)) {\r\n\t\t\t\t\t\tjunkdict[elt] = 1;\r\n\t\t\t\t\t\tdelete b2j[elt];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.isbjunk = difflib.__isindict(junkdict);\r\n\t\t\tthis.isbpopular = difflib.__isindict(populardict);\r\n\t\t}\r\n\t\t\r\n\t\tthis.find_longest_match = function (alo, ahi, blo, bhi) {\r\n\t\t\tvar a = this.a;\r\n\t\t\tvar b = this.b;\r\n\t\t\tvar b2j = this.b2j;\r\n\t\t\tvar isbjunk = this.isbjunk;\r\n\t\t\tvar besti = alo;\r\n\t\t\tvar bestj = blo;\r\n\t\t\tvar bestsize = 0;\r\n\t\t\tvar j = null;\r\n\t\r\n\t\t\tvar j2len = {};\r\n\t\t\tvar nothing = [];\r\n\t\t\tfor (var i = alo; i < ahi; i++) {\r\n\t\t\t\tvar newj2len = {};\r\n\t\t\t\tvar jdict = difflib.__dictget(b2j, a[i], nothing);\r\n\t\t\t\tfor (var jkey in jdict) {\r\n\t\t\t\t\tif (jdict.hasOwnProperty(jkey)) {\r\n\t\t\t\t\t\tj = jdict[jkey];\r\n\t\t\t\t\t\tif (j < blo) continue;\r\n\t\t\t\t\t\tif (j >= bhi) break;\r\n\t\t\t\t\t\tnewj2len[j] = k = difflib.__dictget(j2len, j - 1, 0) + 1;\r\n\t\t\t\t\t\tif (k > bestsize) {\r\n\t\t\t\t\t\t\tbesti = i - k + 1;\r\n\t\t\t\t\t\t\tbestj = j - k + 1;\r\n\t\t\t\t\t\t\tbestsize = k;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tj2len = newj2len;\r\n\t\t\t}\r\n\t\r\n\t\t\twhile (besti > alo && bestj > blo && !isbjunk(b[bestj - 1]) && a[besti - 1] == b[bestj - 1]) {\r\n\t\t\t\tbesti--;\r\n\t\t\t\tbestj--;\r\n\t\t\t\tbestsize++;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\twhile (besti + bestsize < ahi && bestj + bestsize < bhi &&\r\n\t\t\t\t\t!isbjunk(b[bestj + bestsize]) &&\r\n\t\t\t\t\ta[besti + bestsize] == b[bestj + bestsize]) {\r\n\t\t\t\tbestsize++;\r\n\t\t\t}\r\n\t\r\n\t\t\twhile (besti > alo && bestj > blo && isbjunk(b[bestj - 1]) && a[besti - 1] == b[bestj - 1]) {\r\n\t\t\t\tbesti--;\r\n\t\t\t\tbestj--;\r\n\t\t\t\tbestsize++;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\twhile (besti + bestsize < ahi && bestj + bestsize < bhi && isbjunk(b[bestj + bestsize]) &&\r\n\t\t\t\t\ta[besti + bestsize] == b[bestj + bestsize]) {\r\n\t\t\t\tbestsize++;\r\n\t\t\t}\r\n\t\r\n\t\t\treturn [besti, bestj, bestsize];\r\n\t\t}\r\n\t\t\r\n\t\tthis.get_matching_blocks = function () {\r\n\t\t\tif (this.matching_blocks != null) return this.matching_blocks;\r\n\t\t\tvar la = this.a.length;\r\n\t\t\tvar lb = this.b.length;\r\n\t\r\n\t\t\tvar queue = [[0, la, 0, lb]];\r\n\t\t\tvar matching_blocks = [];\r\n\t\t\tvar alo, ahi, blo, bhi, qi, i, j, k, x;\r\n\t\t\twhile (queue.length) {\r\n\t\t\t\tqi = queue.pop();\r\n\t\t\t\talo = qi[0];\r\n\t\t\t\tahi = qi[1];\r\n\t\t\t\tblo = qi[2];\r\n\t\t\t\tbhi = qi[3];\r\n\t\t\t\tx = this.find_longest_match(alo, ahi, blo, bhi);\r\n\t\t\t\ti = x[0];\r\n\t\t\t\tj = x[1];\r\n\t\t\t\tk = x[2];\r\n\t\r\n\t\t\t\tif (k) {\r\n\t\t\t\t\tmatching_blocks.push(x);\r\n\t\t\t\t\tif (alo < i && blo < j)\r\n\t\t\t\t\t\tqueue.push([alo, i, blo, j]);\r\n\t\t\t\t\tif (i+k < ahi && j+k < bhi)\r\n\t\t\t\t\t\tqueue.push([i + k, ahi, j + k, bhi]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmatching_blocks.sort(difflib.__ntuplecomp);\r\n\t\r\n\t\t\tvar i1 = j1 = k1 = block = 0;\r\n\t\t\tvar non_adjacent = [];\r\n\t\t\tfor (var idx in matching_blocks) {\r\n\t\t\t\tif (matching_blocks.hasOwnProperty(idx)) {\r\n\t\t\t\t\tblock = matching_blocks[idx];\r\n\t\t\t\t\ti2 = block[0];\r\n\t\t\t\t\tj2 = block[1];\r\n\t\t\t\t\tk2 = block[2];\r\n\t\t\t\t\tif (i1 + k1 == i2 && j1 + k1 == j2) {\r\n\t\t\t\t\t\tk1 += k2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (k1) non_adjacent.push([i1, j1, k1]);\r\n\t\t\t\t\t\ti1 = i2;\r\n\t\t\t\t\t\tj1 = j2;\r\n\t\t\t\t\t\tk1 = k2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (k1) non_adjacent.push([i1, j1, k1]);\r\n\t\r\n\t\t\tnon_adjacent.push([la, lb, 0]);\r\n\t\t\tthis.matching_blocks = non_adjacent;\r\n\t\t\treturn this.matching_blocks;\r\n\t\t}\r\n\t\t\r\n\t\tthis.get_opcodes = function () {\r\n\t\t\tif (this.opcodes != null) return this.opcodes;\r\n\t\t\tvar i = 0;\r\n\t\t\tvar j = 0;\r\n\t\t\tvar answer = [];\r\n\t\t\tthis.opcodes = answer;\r\n\t\t\tvar block, ai, bj, size, tag;\r\n\t\t\tvar blocks = this.get_matching_blocks();\r\n\t\t\tfor (var idx in blocks) {\r\n\t\t\t\tif (blocks.hasOwnProperty(idx)) {\r\n\t\t\t\t\tblock = blocks[idx];\r\n\t\t\t\t\tai = block[0];\r\n\t\t\t\t\tbj = block[1];\r\n\t\t\t\t\tsize = block[2];\r\n\t\t\t\t\ttag = '';\r\n\t\t\t\t\tif (i < ai && j < bj) {\r\n\t\t\t\t\t\ttag = 'replace';\r\n\t\t\t\t\t} else if (i < ai) {\r\n\t\t\t\t\t\ttag = 'delete';\r\n\t\t\t\t\t} else if (j < bj) {\r\n\t\t\t\t\t\ttag = 'insert';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (tag) answer.push([tag, i, ai, j, bj]);\r\n\t\t\t\t\ti = ai + size;\r\n\t\t\t\t\tj = bj + size;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (size) answer.push(['equal', ai, i, bj, j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn answer;\r\n\t\t}\r\n\t\t\r\n\t\t// this is a generator function in the python lib, which of course is not supported in javascript\r\n\t\t// the reimplementation builds up the grouped opcodes into a list in their entirety and returns that.\r\n\t\tthis.get_grouped_opcodes = function (n) {\r\n\t\t\tif (!n) n = 3;\r\n\t\t\tvar codes = this.get_opcodes();\r\n\t\t\tif (!codes) codes = [[\"equal\", 0, 1, 0, 1]];\r\n\t\t\tvar code, tag, i1, i2, j1, j2;\r\n\t\t\tif (codes[0][0] == 'equal') {\r\n\t\t\t\tcode = codes[0];\r\n\t\t\t\ttag = code[0];\r\n\t\t\t\ti1 = code[1];\r\n\t\t\t\ti2 = code[2];\r\n\t\t\t\tj1 = code[3];\r\n\t\t\t\tj2 = code[4];\r\n\t\t\t\tcodes[0] = [tag, Math.max(i1, i2 - n), i2, Math.max(j1, j2 - n), j2];\r\n\t\t\t}\r\n\t\t\tif (codes[codes.length - 1][0] == 'equal') {\r\n\t\t\t\tcode = codes[codes.length - 1];\r\n\t\t\t\ttag = code[0];\r\n\t\t\t\ti1 = code[1];\r\n\t\t\t\ti2 = code[2];\r\n\t\t\t\tj1 = code[3];\r\n\t\t\t\tj2 = code[4];\r\n\t\t\t\tcodes[codes.length - 1] = [tag, i1, Math.min(i2, i1 + n), j1, Math.min(j2, j1 + n)];\r\n\t\t\t}\r\n\t\r\n\t\t\tvar nn = n + n;\r\n\t\t\tvar group = [];\r\n\t\t\tvar groups = [];\r\n\t\t\tfor (var idx in codes) {\r\n\t\t\t\tif (codes.hasOwnProperty(idx)) {\r\n\t\t\t\t\tcode = codes[idx];\r\n\t\t\t\t\ttag = code[0];\r\n\t\t\t\t\ti1 = code[1];\r\n\t\t\t\t\ti2 = code[2];\r\n\t\t\t\t\tj1 = code[3];\r\n\t\t\t\t\tj2 = code[4];\r\n\t\t\t\t\tif (tag == 'equal' && i2 - i1 > nn) {\r\n\t\t\t\t\t\tgroup.push([tag, i1, Math.min(i2, i1 + n), j1, Math.min(j2, j1 + n)]);\r\n\t\t\t\t\t\tgroups.push(group);\r\n\t\t\t\t\t\tgroup = [];\r\n\t\t\t\t\t\ti1 = Math.max(i1, i2-n);\r\n\t\t\t\t\t\tj1 = Math.max(j1, j2-n);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tgroup.push([tag, i1, i2, j1, j2]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (group && !(group.length == 1 && group[0][0] == 'equal')) groups.push(group)\r\n\t\t\t\r\n\t\t\treturn groups;\r\n\t\t}\r\n\t\t\r\n\t\tthis.ratio = function () {\r\n\t\t\tmatches = difflib.__reduce(\r\n\t\t\t\t\t\t\tfunction (sum, triple) { return sum + triple[triple.length - 1]; },\r\n\t\t\t\t\t\t\tthis.get_matching_blocks(), 0);\r\n\t\t\treturn difflib.__calculate_ratio(matches, this.a.length + this.b.length);\r\n\t\t}\r\n\t\t\r\n\t\tthis.quick_ratio = function () {\r\n\t\t\tvar fullbcount, elt;\r\n\t\t\tif (this.fullbcount == null) {\r\n\t\t\t\tthis.fullbcount = fullbcount = {};\r\n\t\t\t\tfor (var i = 0; i < this.b.length; i++) {\r\n\t\t\t\t\telt = this.b[i];\r\n\t\t\t\t\tfullbcount[elt] = difflib.__dictget(fullbcount, elt, 0) + 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfullbcount = this.fullbcount;\r\n\t\r\n\t\t\tvar avail = {};\r\n\t\t\tvar availhas = difflib.__isindict(avail);\r\n\t\t\tvar matches = numb = 0;\r\n\t\t\tfor (var i = 0; i < this.a.length; i++) {\r\n\t\t\t\telt = this.a[i];\r\n\t\t\t\tif (availhas(elt)) {\r\n\t\t\t\t\tnumb = avail[elt];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnumb = difflib.__dictget(fullbcount, elt, 0);\r\n\t\t\t\t}\r\n\t\t\t\tavail[elt] = numb - 1;\r\n\t\t\t\tif (numb > 0) matches++;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn difflib.__calculate_ratio(matches, this.a.length + this.b.length);\r\n\t\t}\r\n\t\t\r\n\t\tthis.real_quick_ratio = function () {\r\n\t\t\tvar la = this.a.length;\r\n\t\t\tvar lb = this.b.length;\r\n\t\t\treturn _calculate_ratio(Math.min(la, lb), la + lb);\r\n\t\t}\r\n\t\t\r\n\t\tthis.isjunk = isjunk ? isjunk : difflib.defaultJunkFunction;\r\n\t\tthis.a = this.b = null;\r\n\t\tthis.set_seqs(a, b);\r\n\t}\r\n};\r\n\r\n\ndefine(\"difflib\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.difflib;\n    };\n}(this)));\n\n/*\r\nThis is part of jsdifflib v1.0. <http://github.com/cemerick/jsdifflib>\r\n\r\nCopyright 2007 - 2011 Chas Emerick <cemerick@snowtide.com>. All rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without modification, are\r\npermitted provided that the following conditions are met:\r\n\r\n   1. Redistributions of source code must retain the above copyright notice, this list of\r\n      conditions and the following disclaimer.\r\n\r\n   2. Redistributions in binary form must reproduce the above copyright notice, this list\r\n      of conditions and the following disclaimer in the documentation and/or other materials\r\n      provided with the distribution.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY Chas Emerick ``AS IS'' AND ANY EXPRESS OR IMPLIED\r\nWARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\nFITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL Chas Emerick OR\r\nCONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\nCONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\r\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\nNEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\r\nADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\r\nThe views and conclusions contained in the software and documentation are those of the\r\nauthors and should not be interpreted as representing official policies, either expressed\r\nor implied, of Chas Emerick.\r\n*/\r\ndiffview = {\r\n\t/**\r\n\t * Builds and returns a visual diff view.  The single parameter, `params', should contain\r\n\t * the following values:\r\n\t *\r\n\t * - baseTextLines: the array of strings that was used as the base text input to SequenceMatcher\r\n\t * - newTextLines: the array of strings that was used as the new text input to SequenceMatcher\r\n\t * - opcodes: the array of arrays returned by SequenceMatcher.get_opcodes()\r\n\t * - baseTextName: the title to be displayed above the base text listing in the diff view; defaults\r\n\t *\t   to \"Base Text\"\r\n\t * - newTextName: the title to be displayed above the new text listing in the diff view; defaults\r\n\t *\t   to \"New Text\"\r\n\t * - contextSize: the number of lines of context to show around differences; by default, all lines\r\n\t *\t   are shown\r\n\t * - viewType: if 0, a side-by-side diff view is generated (default); if 1, an inline diff view is\r\n\t *\t   generated\r\n\t */\r\n\tbuildView: function (params) {\r\n\t\tvar baseTextLines = params.baseTextLines;\r\n\t\tvar newTextLines = params.newTextLines;\r\n\t\tvar opcodes = params.opcodes;\r\n\t\tvar baseTextName = params.baseTextName ? params.baseTextName : \"Base Text\";\r\n\t\tvar newTextName = params.newTextName ? params.newTextName : \"New Text\";\r\n\t\tvar contextSize = params.contextSize;\r\n\t\tvar inline = (params.viewType == 0 || params.viewType == 1) ? params.viewType : 0;\r\n\r\n\t\tif (baseTextLines == null)\r\n\t\t\tthrow \"Cannot build diff view; baseTextLines is not defined.\";\r\n\t\tif (newTextLines == null)\r\n\t\t\tthrow \"Cannot build diff view; newTextLines is not defined.\";\r\n\t\tif (!opcodes)\r\n\t\t\tthrow \"Canno build diff view; opcodes is not defined.\";\r\n\t\t\r\n\t\tfunction celt (name, clazz) {\r\n\t\t\tvar e = document.createElement(name);\r\n\t\t\te.className = clazz;\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\t\r\n\t\tfunction telt (name, text) {\r\n\t\t\tvar e = document.createElement(name);\r\n\t\t\te.appendChild(document.createTextNode(text));\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\t\r\n\t\tfunction ctelt (name, clazz, text) {\r\n\t\t\tvar e = document.createElement(name);\r\n\t\t\te.className = clazz;\r\n\t\t\te.appendChild(document.createTextNode(text));\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\r\n\t\tvar tdata = document.createElement(\"thead\");\r\n\t\tvar node = document.createElement(\"tr\");\r\n\t\ttdata.appendChild(node);\r\n\t\tif (inline) {\r\n\t\t\tnode.appendChild(document.createElement(\"th\"));\r\n\t\t\tnode.appendChild(document.createElement(\"th\"));\r\n\t\t\tnode.appendChild(ctelt(\"th\", \"texttitle\", baseTextName + \" vs. \" + newTextName));\r\n\t\t} else {\r\n\t\t\tnode.appendChild(document.createElement(\"th\"));\r\n\t\t\tnode.appendChild(ctelt(\"th\", \"texttitle\", baseTextName));\r\n\t\t\tnode.appendChild(document.createElement(\"th\"));\r\n\t\t\tnode.appendChild(ctelt(\"th\", \"texttitle\", newTextName));\r\n\t\t}\r\n\t\ttdata = [tdata];\r\n\t\t\r\n\t\tvar rows = [];\r\n\t\tvar node2;\r\n\t\t\r\n\t\t/**\r\n\t\t * Adds two cells to the given row; if the given row corresponds to a real\r\n\t\t * line number (based on the line index tidx and the endpoint of the \r\n\t\t * range in question tend), then the cells will contain the line number\r\n\t\t * and the line of text from textLines at position tidx (with the class of\r\n\t\t * the second cell set to the name of the change represented), and tidx + 1 will\r\n\t\t * be returned.\t Otherwise, tidx is returned, and two empty cells are added\r\n\t\t * to the given row.\r\n\t\t */\r\n\t\tfunction addCells (row, tidx, tend, textLines, change) {\r\n\t\t\tif (tidx < tend) {\r\n\t\t\t\trow.appendChild(telt(\"th\", (tidx + 1).toString()));\r\n\t\t\t\trow.appendChild(ctelt(\"td\", change, textLines[tidx].replace(/\\t/g, \"\\u00a0\\u00a0\\u00a0\\u00a0\")));\r\n\t\t\t\treturn tidx + 1;\r\n\t\t\t} else {\r\n\t\t\t\trow.appendChild(document.createElement(\"th\"));\r\n\t\t\t\trow.appendChild(celt(\"td\", \"empty\"));\r\n\t\t\t\treturn tidx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction addCellsInline (row, tidx, tidx2, textLines, change) {\r\n\t\t\trow.appendChild(telt(\"th\", tidx == null ? \"\" : (tidx + 1).toString()));\r\n\t\t\trow.appendChild(telt(\"th\", tidx2 == null ? \"\" : (tidx2 + 1).toString()));\r\n\t\t\trow.appendChild(ctelt(\"td\", change, textLines[tidx != null ? tidx : tidx2].replace(/\\t/g, \"\\u00a0\\u00a0\\u00a0\\u00a0\")));\r\n\t\t}\r\n\t\t\r\n\t\tfor (var idx = 0; idx < opcodes.length; idx++) {\r\n\t\t\tcode = opcodes[idx];\r\n\t\t\tchange = code[0];\r\n\t\t\tvar b = code[1];\r\n\t\t\tvar be = code[2];\r\n\t\t\tvar n = code[3];\r\n\t\t\tvar ne = code[4];\r\n\t\t\tvar rowcnt = Math.max(be - b, ne - n);\r\n\t\t\tvar toprows = [];\r\n\t\t\tvar botrows = [];\r\n\t\t\tfor (var i = 0; i < rowcnt; i++) {\r\n\t\t\t\t// jump ahead if we've alredy provided leading context or if this is the first range\r\n\t\t\t\tif (contextSize && opcodes.length > 1 && ((idx > 0 && i == contextSize) || (idx == 0 && i == 0)) && change==\"equal\") {\r\n\t\t\t\t\tvar jump = rowcnt - ((idx == 0 ? 1 : 2) * contextSize);\r\n\t\t\t\t\tif (jump > 1) {\r\n\t\t\t\t\t\ttoprows.push(node = document.createElement(\"tr\"));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tb += jump;\r\n\t\t\t\t\t\tn += jump;\r\n\t\t\t\t\t\ti += jump - 1;\r\n\t\t\t\t\t\tnode.appendChild(telt(\"th\", \"...\"));\r\n\t\t\t\t\t\tif (!inline) node.appendChild(ctelt(\"td\", \"skip\", \"\"));\r\n\t\t\t\t\t\tnode.appendChild(telt(\"th\", \"...\"));\r\n\t\t\t\t\t\tnode.appendChild(ctelt(\"td\", \"skip\", \"\"));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// skip last lines if they're all equal\r\n\t\t\t\t\t\tif (idx + 1 == opcodes.length) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttoprows.push(node = document.createElement(\"tr\"));\r\n\t\t\t\tif (inline) {\r\n\t\t\t\t\tif (change == \"insert\") {\r\n\t\t\t\t\t\taddCellsInline(node, null, n++, newTextLines, change);\r\n\t\t\t\t\t} else if (change == \"replace\") {\r\n\t\t\t\t\t\tbotrows.push(node2 = document.createElement(\"tr\"));\r\n\t\t\t\t\t\tif (b < be) addCellsInline(node, b++, null, baseTextLines, \"delete\");\r\n\t\t\t\t\t\tif (n < ne) addCellsInline(node2, null, n++, newTextLines, \"insert\");\r\n\t\t\t\t\t} else if (change == \"delete\") {\r\n\t\t\t\t\t\taddCellsInline(node, b++, null, baseTextLines, change);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// equal\r\n\t\t\t\t\t\taddCellsInline(node, b++, n++, baseTextLines, change);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb = addCells(node, b, be, baseTextLines, change);\r\n\t\t\t\t\tn = addCells(node, n, ne, newTextLines, change);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < toprows.length; i++) rows.push(toprows[i]);\r\n\t\t\tfor (var i = 0; i < botrows.length; i++) rows.push(botrows[i]);\r\n\t\t}\r\n\t\t\r\n\t\trows.push(node = ctelt(\"th\", \"author\", \"diff view generated by \"));\r\n\t\tnode.setAttribute(\"colspan\", inline ? 3 : 4);\r\n\t\tnode.appendChild(node2 = telt(\"a\", \"jsdifflib\"));\r\n\t\tnode2.setAttribute(\"href\", \"http://github.com/cemerick/jsdifflib\");\r\n\t\t\r\n\t\ttdata.push(node = document.createElement(\"tbody\"));\r\n\t\tfor (var idx in rows) rows.hasOwnProperty(idx) && node.appendChild(rows[idx]);\r\n\t\t\r\n\t\tnode = celt(\"table\", \"diff\" + (inline ? \" inlinediff\" : \"\"));\r\n\t\tfor (var idx in tdata) tdata.hasOwnProperty(idx) && node.appendChild(tdata[idx]);\r\n\t\treturn node;\r\n\t}\r\n};\r\n\r\n\ndefine(\"diffview\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.diffview;\n    };\n}(this)));\n\ndefine('DiffDialog',[\"UI\",\"difflib\",\"diffview\"], function (UI,difflib,diffview) {\r\n    var res={};\r\n\tres.show=function (baseFile, newFile, options) {\r\n    \tvar d=res.embed(baseFile, newFile, options);\r\n    \td.dialog({width:600,height:500});\r\n\t};\r\n\tres.embed=function (baseFile, newFile, options) {\r\n        if (!res.d) {\r\n            var FType={\r\n                    fromVal: function (val){\r\n                        return val==\"\" ? null : FS.get(val);\r\n                    },\r\n                    toVal: function (v){ return v ? v.path() : \"\";}\r\n            };\r\n        \tres.d=UI(\"div\",{title:\"\"},\r\n        \t\t\t[\"div\",\r\n        \t\t\t [\"input\",{style:\"background-color: #f88;\",\r\n        \t\t\t     $edit:{name:\"baseFile\",type:FType},size:60}],[\"br\"],\r\n                     [\"input\",{style:\"background-color: #8f8;\",\r\n                         $var:\"newFile\",\r\n                         $edit:{name:\"newFile\",type:FType},size:60}]\r\n        \t\t\t],\r\n                    [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}],\r\n                 [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                \t res.done();\r\n                 }}}, \"\"],\r\n      \t\t\t[\"div\",{$var: \"diffoutput\", css:{height:\"350px\", overflow:\"scroll\"}}]\r\n            );\r\n        }\r\n        var d=res.d;\r\n        var model={baseFile:baseFile , newFile:newFile};\r\n        d.$edits.load(model);\r\n        function isValidFile(f) {\r\n            return f && !f.isDir() && f.exists() ;\r\n        }\r\n    \td.$edits.validator.on.validate=function (model) {\r\n    \t    if (!isValidFile(model.newFile)  ) {\r\n    \t        this.addError(\"new\",newFile+\"\");\r\n    \t    } else if (!isValidFile(model.baseFile)  ) {\r\n                this.addError(\"base\",baseFile+\"\");\r\n    \t    } else {\r\n    \t        this.allOK();\r\n    \t    }\r\n    \t    /*\r\n    \t    if ( isValidFile(model.baseFile) && !isValidFile(model.newFile)  ) {\r\n    \t        model.newFile=(model.newFile ? model.newFile.rel(model.baseFile.name()) : model.baseFile) ;\r\n    \t        d.$vars.newFile.val(model.newFile+\"\");\r\n    \t    }*/\r\n    \t};\r\n    \tres.done=function () {\r\n    \t    var base = difflib.stringAsLines(model.baseFile.text());\r\n    \t    var newtxt = difflib.stringAsLines(model.newFile.text());\r\n\r\n    \t    var sm = new difflib.SequenceMatcher(base, newtxt);\r\n\r\n    \t    // get the opcodes from the SequenceMatcher instance\r\n    \t    // opcodes is a list of 3-tuples describing what changes should be made to the base text\r\n    \t    // in order to yield the new text\r\n    \t    var opcodes = sm.get_opcodes();\r\n    \t    var diffoutputdiv = d.$vars.diffoutput[0];\r\n    \t    while (diffoutputdiv.firstChild) diffoutputdiv.removeChild(diffoutputdiv.firstChild);\r\n    \t    //var contextSize = $(\"contextSize\").value;\r\n    \t    contextSize = null; //contextSize ? contextSize : null;\r\n\r\n    \t    // build the diff view and add it to the current DOM\r\n    \t    diffoutputdiv.appendChild(diffview.buildView({\r\n    \t        baseTextLines: base,\r\n    \t        newTextLines: newtxt,\r\n    \t        opcodes: opcodes,\r\n    \t        // set the display titles for each resource\r\n    \t        baseTextName: model.baseFile+\"\",\r\n    \t        newTextName: model.newFile+\"\",\r\n    \t        contextSize: contextSize,\r\n    \t        viewType: 1 //$(\"inline\").checked ? 1 : 0\r\n    \t    }));\r\n\r\n    \t\t//onOK();\r\n    \t};\r\n    \tif (isValidFile(model.baseFile) && isValidFile(model.newFile)) {\r\n    \t\tres.done();\r\n    \t}\r\n    \treturn d;\r\n    };\r\n    return res;\r\n});\ndefine('KernelDiffDialog',[\"UI\",\"DiffDialog\",\"Shell\"], function (UI,dd,sh) {\r\n    var res={};\r\n\tres.show=function (devDir, kernelDir , options) {\r\n    \tvar d=res.embed(devDir, kernelDir, options);\r\n    \td.dialog({width:250,height:400});\r\n\t};\r\n\tres.embed=function (devDir, kernelDir, options) {\r\n        if (!res.d) {\r\n        \tres.d=UI(\"div\",{title:\"Kernel\"},\r\n        \t\t\t[\"div\", {$var:\"out\"}],\r\n                 [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                \t res.refresh();\r\n                 }}}, \"\"]\r\n            );\r\n        }\r\n        var d=res.d;\r\n    \tres.refresh=function () {\r\n    \t\tvar out=d.$vars.out;\r\n    \t\tout.empty();\r\n    \t\tkernelDir.each(function (kerf) {\r\n    \t\t\tvar devf=devDir.rel(kerf.relPath(kernelDir));\r\n    \t\t\tif (kerf.endsWith(\".tonyu\") && devf.exists()) {\r\n    \t\t\t\tif (kerf.text()==devf.text()) {\r\n    \t\t\t\t\tout.append(UI(\"div\",kerf.name(),\"()\"));\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tout.append(UI(\"div\",\r\n    \t\t\t\t\t\t\t[\"a\",{href:\"javascript:;\",on:{click:openDiagF(devf, kerf)}}, kerf.name()]\r\n    \t\t\t\t\t));\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    \t};\r\n    \tres.refresh();\r\n    \treturn d;\r\n    };\r\n    function openDiagF(a,b) {\r\n    \treturn function () {\r\n    \t\tdd.show(a,b);\r\n    \t};\r\n    }\r\n    return res;\r\n});\ndefine('requestFragment',[\"WebSite\"],function (WebSite) {\r\n    var FR={};\r\n    FR.ajax=function (options) {\r\n        var THRESH=options.THRESH || 1000*800;\r\n        var d=options.data;\r\n        if (typeof d!=\"object\") throw \"Data should be object: \"+d;\r\n        d=JSON.stringify(d);\r\n        if (!options.redirectTo && (WebSite.serverType!=\"GAE\" || d.length<THRESH)) return $.ajax(options);\r\n        var frags=[];\r\n        var cnt=0;\r\n        var id=Math.random();\r\n        while (d.length>0) {\r\n            frags.push(d.substring(0,THRESH));\r\n            d=d.substring(THRESH);\r\n\r\n        }\r\n        var len=frags.length;\r\n        var sent=0;\r\n        var waitTime=1000;\r\n        function addRedir(p) {\r\n            if (options.redirectTo) p.redirectTo=options.redirectTo;\r\n            return p;\r\n        }\r\n        frags.forEach(function (frag,i) {\r\n          //TODO: urlchange!\r\n            $.ajax({type:\"post\",url:WebSite.serverTop+\"/sendFragment\",data:addRedir({\r\n                id:id, seq:i, len:len, content:frag\r\n            }),success: function (res) {\r\n                console.log(\"sendFrag\",res,i);//,frag);\r\n                sent++;\r\n                if (sent>=len) setTimeout(runFrag,waitTime);\r\n            }, error: options.error\r\n            });\r\n        });\r\n        function runFrag() {\r\n          //TODO: urlchange!\r\n            $.ajax({type:\"post\",url:WebSite.serverTop+\"/runFragments\",data:addRedir({id:id}),\r\n                success: function (res) {\r\n                    //console.log(\"runFrag res1=\",res,arguments.length);\r\n                    if (typeof res==\"string\") {\r\n                        if (res.match(/^notCompleted:([\\-\\d]+)\\/([\\-\\d]+)$/)) {\r\n                            console.log(\"notcomp\",res);\r\n                            waitTime*=2;\r\n                            setTimeout(runFrag,waitTime);\r\n                            return;\r\n                        }\r\n                    }\r\n                    options.success(res);\r\n                },\r\n                error: options.error,\r\n                complete: options.complete\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    return FR;\r\n});\ndefine('Sync',[\"FS\",\"Shell\",\"requestFragment\",\"WebSite\"],function (FS,sh,rf,WebSite) {\r\n    var Sync={};\r\n    sh.sync=function () {\r\n        // sync options:o onend:f     local=remote=cwd\r\n        // sync dir:s|file options:o onend:f  local=remote=dir\r\n        // sync local:s|file remote:s|file options:o onend:f\r\n        var local,remote,options,onend=function(){};\r\n        var i=0;\r\n        if (typeof arguments[i]==\"string\" || isFile(arguments[i])) {\r\n            local=sh.resolve(arguments[i], true);\r\n            i++;\r\n            if (typeof arguments[i]==\"string\" || isFile(arguments[i])) {\r\n                remote=sh.resolve(arguments[i], false);\r\n                i++;\r\n            }\r\n        }\r\n        if (typeof arguments[i]==\"object\") { options=arguments[i]; i++;}\r\n        if (typeof arguments[i]==\"function\") { onend=arguments[i]; i++;}\r\n        if (!local) remote=local=sh.cwd;\r\n        if (options && options.onend) options.onend=promptAfter(options.onend);\r\n        if (!remote) remote=local;\r\n        sh.echo(\"sync args=\",local,remote,options,onend);\r\n        Sync.sync(local,remote,options,promptAfter(onend));\r\n        return sh.ASYNC;\r\n        function promptAfter(f) {\r\n            return function () {\r\n                //alert(\"pro\");\r\n                if (f) f.apply({},arguments);\r\n                sh.prompt();\r\n            };\r\n        }\r\n    };\r\n    function isFile(v) {\r\n        return v && v.isDir;\r\n    }\r\n    Sync.sync=function () {\r\n        // sync dir:file options:o onend:f  local=remote=dir\r\n        // sync local:file remote:file options:o onend:f\r\n        var local,remote,options,onend;\r\n        var i=0;\r\n        if (isFile(arguments[i])) {\r\n            local=arguments[i];\r\n            i++;\r\n            if (isFile(arguments[i])) {\r\n                remote=arguments[i];\r\n                i++;\r\n            }\r\n        }\r\n        if (typeof arguments[i]==\"object\") { options=arguments[i]; i++;}\r\n        if (typeof arguments[i]==\"function\") { onend=arguments[i]; i++;}\r\n\r\n        if (!local) throw \"Sync.sync: Local dir must be specified as file object\";\r\n        if (!remote) remote=local;\r\n        if (!options) options={};\r\n        if (!onend && options.onend) onend=options.onend;\r\n        if (options.test) options.v=1;\r\n        n0();\r\n        var uploads={},downloads=[],visited={};\r\n        function status(name, param) {\r\n            sh.echo(\"Status: \"+name+\" param:\",param);\r\n            if (options.onstatus) {\r\n                options.onstatus(name, param);\r\n            }\r\n        }\r\n        function onError() {\r\n            if (options.onerror) {\r\n                options.onerror.apply(this, arguments);\r\n            }\r\n        }\r\n        function n0() {\r\n            var req={base:remote.path(),excludes:JSON.stringify(options.excludes)};\r\n            status(\"getDirInfo\", req);\r\n          //TODO: urlchange!\r\n            $.ajax({\r\n                type:\"get\",\r\n                url:WebSite.serverTop+\"/getDirInfo\",\r\n                data:req,\r\n                success:n1,\r\n                error:onError\r\n            });\r\n        }\r\n        function n1(info) {\r\n            //info=JSON.parse(info);\r\n            if (options.v) sh.echo(\"getDirInfo\",info);\r\n            var base=local;//FS.get(info.base);\r\n            var data=info.data;\r\n            for (var rel in data) {\r\n                var file=base.rel(rel);\r\n                var lcm=file.exists({includeTrashed:true}) && file.metaInfo();\r\n                var rmm=data[rel];\r\n                cmp(file,rel,lcm,rmm);\r\n            }\r\n            local.recursive(function (file) {\r\n                var lcm=file.exists({includeTrashed:true}) && file.metaInfo();\r\n                var rel=file.relPath(local);\r\n                var rmm=data[rel];\r\n                cmp(file,rel,lcm,rmm);\r\n            },{includeTrashed:true, excludes:options.excludes});\r\n            if (options.v) {\r\n                sh.echo(\"uploads:\",uploads);\r\n                sh.echo(\"downloads:\",downloads);\r\n            }\r\n\r\n            var req={base:remote.path(),paths:JSON.stringify(downloads)};\r\n            status(\"File2LSSync\", req);\r\n          //TODO: urlchange!\r\n            $.ajax({\r\n                type:\"post\",\r\n                url:WebSite.serverTop+\"/File2LSSync\",\r\n                data:req,\r\n                success:n2,\r\n                error:onError\r\n            });\r\n        }\r\n        function n2(dlData) {\r\n            sh.echo(\"dlData=\",dlData);\r\n            //dlData=JSON.parse(dlData);\r\n            if (options.v) sh.echo(\"dlData:\",dlData);\r\n            var base=local;//FS.get(dlData.base);\r\n            if (options.test) return;\r\n            for (var rel in dlData.data) {\r\n                var dlf=base.rel(rel);\r\n                var d=dlData.data[rel];\r\n                //if (options.v) sh.echo(dlf.path(), d);\r\n                if (d.trashed) {\r\n                    if (dlf.exists()) dlf.rm();\r\n                } else {\r\n                    dlf.text(d.text);\r\n                }\r\n                delete d.text;\r\n                dlf.metaInfo(d);\r\n            }\r\n            var req={base:remote.path(),data:JSON.stringify(uploads)};\r\n            req.pathInfo=\"/LS2FileSync\";//TODO: urlchange!\r\n            status(\"LS2FileSync\", req);\r\n          //TODO: urlchange!\r\n            rf.ajax({\r\n                type:\"post\",\r\n                url:WebSite.serverTop+\"/LS2FileSync\",\r\n                data:req,\r\n                success:n3,\r\n                error:onError\r\n            });\r\n        }\r\n        function n3(res){\r\n            if (options.v) sh.echo(\"LS2FileSync res=\",res);\r\n            var upds=[];\r\n            for (var i in uploads) upds.push(i);\r\n            res={msg:res,uploads:upds,downloads: downloads};\r\n            //if (options.v) sh.echo(\"onend\",onend);\r\n            if (typeof onend==\"function\") onend(res);\r\n        }\r\n        function cmp(f,rel,lcm,rmm) {// f:localFile\r\n            if (visited[rel]) return ;\r\n            visited[rel]=1;\r\n            if (rmm && (!lcm || lcm.lastUpdate<rmm.lastUpdate)) {\r\n                downloads.push(rel);\r\n                if (options.v)\r\n                    sh.echo((!lcm?\"New\":\"\")+\r\n                            \"Download \"+f+\r\n                            \" trash=\"+!!rmm.trashed);\r\n            } else if (lcm && (!rmm || lcm.lastUpdate>rmm.lastUpdate)) {\r\n                var o=lcm.trashed ? {} : {text:f.text()};\r\n                var m=f.metaInfo();\r\n                for (var i in m) o[i]=m[i];\r\n                uploads[rel]=o;\r\n                if (options.v)\r\n                    sh.echo((!rmm?\"New\":\"\")+\r\n                            \"Upload \"+f+\r\n                            \" trash=\"+!!lcm.trashed);\r\n            }\r\n\r\n        }\r\n    };\r\n    sh.rsh=function () {\r\n        var a=[];\r\n        for (var i=0; i<arguments.length; i++) a[i]=arguments[i];\r\n      //TODO: urlchange!\r\n        $.ajax({\r\n            url:WebSite.serverTop+\"/rsh\",\r\n            data:{args:JSON.stringify(a)},\r\n            success:function (r) {\r\n                sh.echo(r);\r\n            },error:function (req,e,mesg) {\r\n                sh.err(mesg);\r\n            },complete:function (){\r\n                sh.prompt();\r\n            }\r\n        });\r\n        return sh.ASYNC;\r\n    };\r\n    return Sync;\r\n});\r\n\ndefine('searchDialog',[\"UI\",\"Shell\"], function (UI,sh) {\r\n    var res={};\r\n    res.show=function (prjDir, onLineClick) {\r\n        var d=res.embed(prjDir,onLineClick);\r\n        d.dialog({width:600});\r\n    };\r\n    res.embed=function (prjDir, onLineClick) {\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                    [\"div\",\r\n                     [\"span\",\"\"],\r\n                     [\"input\",{$edit:\"word\",on:{enterkey:function () {\r\n                         res.d.start();\r\n                     }}}]],\r\n                     [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}],\r\n                     [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                         res.d.start();\r\n                     }}}, \"\"],\r\n                     [\"div\",{style:\"overflow-y:scroll; height:200px\"},\r\n                      [\"table\",{$var:\"searchRes\"}]]\r\n            );\r\n        }\r\n        var d=res.d;\r\n        var model={word:\"\"};\r\n        d.$edits.load(model);\r\n        d.start=function () {\r\n            d.$vars.searchRes.empty();\r\n            var sres=sh.grep(model.word, prjDir);\r\n            sres.forEach(function (l) {\r\n                if (l.file.name().match(/^concat\\.js/)) {\r\n                    return;\r\n                }\r\n                d.$vars.searchRes.append(\r\n                        UI(\"tr\",\r\n                                [\"td\",{on:{click:doLineClick}},l.file.name()+\"(\"+l.lineNo+\")\"],\r\n                                [\"td\",{on:{click:doLineClick}},l.line]\r\n                        ));\r\n                function doLineClick() {\r\n                    if (onLineClick) onLineClick(l);\r\n                }\r\n            });\r\n        };\r\n        return d;\r\n    };\r\n    return res;\r\n});\r\n\nrequirejs([\"Shell\",\"FS\",\"WebSite\"], function (sh,FS,WebSite) {\r\n    sh.syncWithKernel=function (name) {\r\n        var home=FS.get(WebSite.tonyuHome);\r\n        var ker=home.rel(\"Kernel/\");\r\n        if (name) {\r\n            var prj=sh.resolve(name);\r\n            var inKer=ker.rel(name);\r\n            if (prj.lastUpdate()>inKer.lastUpdate()) {\r\n                sh.cp(prj, inKer,{v:1});\r\n                return 1;\r\n            }\r\n            if (prj.lastUpdate()<inKer.lastUpdate()) {\r\n                sh.cp(inKer,prj,{v:1});\r\n                return 1;\r\n            }\r\n            return 0;\r\n            //return sh.cp( name, ker.rel(name));\r\n        } else {\r\n            var cps=0;\r\n            ker.each(function (f) {\r\n                var src=sh.resolve(f.name());\r\n                if (src.exists()) {\r\n                    cps+= sh.syncWithKernel(f.name());\r\n                }\r\n            });\r\n            return cps;\r\n        }\r\n    };\r\n});\ndefine(\"syncWithKernel\", function(){});\n\ndefine('Auth',[\"WebSite\"],function (WebSite) {\r\n    var auth={};\r\n    auth.currentUser=function (onend) {\r\n        //TODO: urlchange!\r\n        $.ajax({type:\"get\",url:WebSite.serverTop+\"/currentUser\",data:{withCsrfToken:true},\r\n            success:function (res) {\r\n                console.log(\"auth.currentUser\",res);\r\n                res=JSON.parse(res);\r\n                var u=res.user;\r\n                if (u==\"null\") u=null;\r\n                console.log(\"user\", u, \"csrfToken\",res.csrfToken);\r\n                onend(u,res.csrfToken);\r\n            }\r\n        });\r\n    };\r\n    auth.assertLogin=function (options) {\r\n        /*if (typeof options==\"function\") options={complete:options};\r\n        if (!options.confirm) options.confirm=\"\";\r\n        if (typeof options.confirm==\"string\") {\r\n            var mesg=options.confirm;\r\n            options.confirm=function () {\r\n                return confirm(mesg);\r\n            };\r\n        }*/\r\n        auth.currentUser(function (user,csrfToken) {\r\n            if (user) {\r\n                return options.success(user,csrfToken);\r\n            }\r\n            window.onLoggedIn=options.success;\r\n            //TODO: urlchange!\r\n            options.showLoginLink(WebSite.serverTop+\"/login\");\r\n        });\r\n    };\r\n    window.Auth=auth;\r\n    return auth;\r\n});\ndefine('Blob',[\"Auth\",\"WebSite\",\"Util\"],function (a,WebSite,Util) {\r\n    var Blob={};\r\n    var BLOB_PATH_EXPR=\"${blobPath}\";\r\n    Blob.BLOB_PATH_EXPR=BLOB_PATH_EXPR;\r\n    Blob.upload=function(user, project, file, options) {\r\n        var fd = new FormData(document.getElementById(\"fileinfo\"));\r\n        if (options.error) {\r\n            options.error=function (r) {alert(r);};\r\n        }\r\n        fd.append(\"theFile\", file);\r\n        fd.append(\"user\",user);\r\n        fd.append(\"project\",project);\r\n        fd.append(\"fileName\",file.name);\r\n      //TODO: urlchange!\r\n        $.ajax({\r\n            type : \"get\",\r\n            url : WebSite.serverTop+\"/blobURL\",\r\n            success : function(url) {\r\n                $.ajax({\r\n                    url : url,\r\n                    type : \"POST\",\r\n                    data : fd,\r\n                    processData : false, // jQuery \r\n                    contentType : false, // jQuery  contentType \r\n                    success : function(res) {\r\n                        console.log(\"Res = \" + res);\r\n                        options.success.apply({},arguments);// $(\"#drag\").append(res);\r\n                    },\r\n                    error: options.error\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Blob.isBlobURL=function (url) {\r\n        if (Util.startsWith(url,BLOB_PATH_EXPR)) {\r\n            var a=url.split(\"/\");\r\n            return {user:a[1], project:a[2], fileName:a[3]};\r\n        }\r\n    };\r\n    // actualURL;\r\n    Blob.url=function(user,project,fileName) {\r\n        return WebSite.blobPath+user+\"/\"+project+\"/\"+fileName;\r\n    };\r\n    Blob.uploadToExe=function (prj, options) {\r\n        var bis=prj.getBlobInfos();\r\n        var cnt=bis.length;\r\n        console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        if (cnt==0) return options.success();\r\n        if (!options.progress) options.progress=function (cnt) {\r\n            console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        };\r\n        bis.forEach(function (bi) {\r\n            var data={csrfToken:options.csrfToken};\r\n            for (var i in bi) data[i]=bi[i];\r\n            $.ajax({\r\n                type:\"get\",\r\n                url: WebSite.serverTop+\"/uploadBlobToExe\",   //TODO: urlchange!\r\n                data:data,\r\n                success: function () {\r\n                     cnt--;\r\n                     if (cnt==0) return options.success();\r\n                     else options.progress(cnt);\r\n                },\r\n                error:options.error\r\n             });\r\n        });\r\n    };\r\n    return Blob;\r\n});\ndefine('ImageRect',[],function () {\r\n    function draw(img, canvas) {\r\n        if (typeof img==\"string\") {\r\n            var i=new Image();\r\n            var res=null;\r\n            var callback=null;\r\n            var onld=function (clb) {\r\n                if (clb) callback=clb;\r\n                if (callback && res) {\r\n                    callback(res);\r\n                }\r\n            };\r\n            i.onload=function () {\r\n                res=draw(i,canvas);\r\n                onld();\r\n            };\r\n            i.src=img;\r\n            return onld;\r\n        }\r\n        var cw=canvas.width;\r\n        var ch=canvas.height;\r\n        var cctx=canvas.getContext(\"2d\");\r\n        var width=img.width;\r\n        var height=img.height;\r\n        var calcw=ch/height*width; // calch=ch\r\n        var calch=cw/width*height; // calcw=cw\r\n        if (calch>ch) calch=ch;\r\n        if (calcw>cw) calcw=cw;\r\n        cctx.clearRect(0,0,cw,ch);\r\n        var marginw=Math.floor((cw-calcw)/2);\r\n        var marginh=Math.floor((ch-calch)/2);\r\n        cctx.drawImage(img,\r\n                0,0,width, height,\r\n                marginw,marginh,calcw, calch );\r\n        return {left: marginw, top:marginh, width:calcw, height:calch,src:img};\r\n    }\r\n    return draw;\r\n});\ndefine('ImageDetailEditor',[\"UI\",\"ImageList\",\"ImageRect\",\"PatternParser\",\"WebSite\",\"Assets\"],\r\n        function (UI,ImageList,ImageRect,PP,WebSite,Assets) {\r\n    var d=UI(\"div\",{title:\"\"},\r\n            [\"div\",\r\n             [\"div\",\"URL:\",[\"input\",{$var:\"url\",size:40,on:{change:setURL}}],\r\n               [\"a\",{$var:\"openImg\",target:\"_blank\"},\"...\"]],\r\n             [\"canvas\",{$edit:\"cv\",width:500,height:250,on:{mousemove:cvMouse,mousedown:cvClick}}] ],\r\n             [\"form\",{$var:\"theForm\"},\r\n               [\"div\",radio(\"single\"),\"\"],\r\n               [\"div\",radio(\"rc\"),\"\",\r\n                [\"input\",{$var:\"cols\",size:5,on:{realtimechange:setRC,focus:selRC}}],\"x\",\r\n                [\"input\",{$var:\"rows\",size:5,on:{realtimechange:setRC,focus:selRC}}]],\r\n               [\"div\",radio(\"wh\"),\"1\",\r\n                [\"input\",{$var:\"pwidth\",size:5,on:{realtimechange:setWH,focus:selWH}}],\"x\",\r\n                [\"input\",{$var:\"pheight\",size:5,on:{realtimechange:setWH,focus:selWH}}]],\r\n               [\"div\",radio(\"t1\"),\"Tonyu1\",\r\n                 [\"button\",{on:{click:tonyu1}},\"\"]],\r\n               [\"div\",\":\",[\"input\",{$var:\"patName\"}] ],\r\n               [\"button\",{on:{click:close}},\"OK\"]]\r\n    );\r\n    function radio(v) {\r\n        return UI(\"input\",{type:\"radio\",name:\"type\",value:v,on:{\r\n            click:function (){selval(v);}\r\n        }});\r\n    }\r\n    function selval(v) {\r\n        switch (v) {\r\n        case \"single\":\r\n            if (!item) return false;\r\n            cols=1;//nNan( parseInt(v.cols.val()) ,cols);\r\n            rows=1;//nNan( parseInt(v.rows.val()) ,rows);\r\n            calcWH();\r\n            setWH();//?\r\n            redrawImage();\r\n            return false;\r\n        case \"rc\":\r\n            return setRC();\r\n        case \"wh\":\r\n            return setWH();\r\n        }\r\n    }\r\n    var v=d.$vars;\r\n    var w,h,rows,cols;\r\n    var IMD={};\r\n    var item;\r\n    var srcImg;\r\n    var onclose;\r\n    var canvasRect;\r\n    var chipRects, curChipIndex=-1;\r\n    var curItemName;\r\n    function setURL() {\r\n        if (item) item.url=v.url.val();\r\n    }\r\n    function selRC() {\r\n        v.theForm[0].type.value=\"rc\";\r\n    }\r\n    function selWH() {\r\n        v.theForm[0].type.value=\"wh\";\r\n    }\r\n    function selSingle() {\r\n        v.theForm[0].type.value=\"single\";\r\n    }\r\n    IMD.show=function (_item, prj, itemName, options) {\r\n        if (!options) options={};\r\n        onclose=options.onclose;\r\n        item=_item;\r\n        curItemName=itemName;\r\n        d.dialog({width:600,height:520});\r\n        v.url.val(item.url);\r\n        var url=Assets.resolve(item.url,prj);\r\n\r\n        if (WebSite.isNW) {\r\n            var path;\r\n            // NW.jsWebSite.urlAliases\r\n            // \r\n            var urlAliases = {\r\n                \"images/Ball.png\":\"www/images/Ball.png\",\r\n                \"images/base.png\":\"www/images/base.png\",\r\n                \"images/Sample.png\":\"www/images/Sample.png\",\r\n                \"images/neko.png\":\"www/images/neko.png\",\r\n                \"images/mapchip.png\":\"www/images/mapchip.png\",\r\n                \"images/sound.png\":\"www/images/sound.png\",\r\n                \"images/sound_ogg.png\":\"www/images/sound_ogg.png\",\r\n                \"images/sound_mp3.png\":\"www/images/sound_mp3.png\",\r\n                \"images/sound_mp4.png\":\"www/images/sound_mp4.png\",\r\n                \"images/sound_m4a.png\":\"www/images/sound_m4a.png\",\r\n                \"images/sound_mid.png\":\"www/images/sound_mid.png\",\r\n                \"images/sound_wav.png\":\"www/images/sound_wav.png\",\r\n                \"images/ecl.png\":\"www/images/ecl.png\"\r\n            }\r\n            try {\r\n                path=urlAliases[item.url];\r\n                if(!path)path=url;\r\n            }catch(e) {\r\n                path=url;\r\n            }\r\n            var urlScript = \"javascript:nw.Window.open('\"+path+\"', {}, function(w) {w.y=20;w.width=700;w.height=600;})\";\r\n            v.openImg.attr(\"href\",urlScript);\r\n        } else {\r\n            v.openImg.attr(\"href\",url);\r\n        }\r\n        \r\n        ImageRect(url, v.cv[0])(function (res) {\r\n            canvasRect=res;\r\n            console.log(res);\r\n            srcImg=res.src;\r\n            w=srcImg.width;\r\n            h=srcImg.height;\r\n            if (item.type==\"single\") {\r\n                selSingle();\r\n            } else if (item.pwidth && item.pheight) {\r\n                v.pwidth.val(item.pwidth);\r\n                v.pheight.val(item.pheight);\r\n                calcRC();\r\n                selWH();\r\n            } else {\r\n                v.theForm[0].type.value=\"t1\";\r\n            }\r\n            drawFrame();\r\n        });\r\n    };\r\n    function redrawImage() {\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        var r=canvasRect;\r\n        if (!r) return;\r\n        if (!srcImg) return;\r\n        ctx.clearRect( r.left, r.top, r.width, r.height);\r\n        ctx.drawImage(srcImg, 0,0,w,h, r.left, r.top, r.width, r.height);\r\n        drawFrame();\r\n    }\r\n    function drawFrame() {\r\n        var rects=ImageList.parse1(item, srcImg, {boundsInSrc:true});\r\n//        console.log(\"drawFrame\", rects);\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        rects.forEach(function (r) {\r\n            rect(ctx,calcRect(r));\r\n        });\r\n        chipRects=rects;\r\n    }\r\n    function inRect(point,rect) {\r\n        return rect.left<= point.x && point.x<= rect.left+rect.width &&\r\n               rect.top<=point.y && point.y<=rect.top+rect.height ;\r\n    }\r\n    function calcRect(r) { // rect in srcImg:{x,y,width,height}\r\n        var s={};  // returns rect in canvas(v.cv):{left,top,width,hegiht};\r\n        var scaleX=canvasRect.width/w;\r\n        var scaleY=canvasRect.height/h;\r\n        s.left=canvasRect.left+r.x*scaleX;\r\n        s.top=canvasRect.top+r.y*scaleY;\r\n        s.width=r.width*scaleX;\r\n        s.height=r.height*scaleY;\r\n        return s;\r\n    }\r\n    function cvMouse(e) {\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        var o=v.cv.offset();\r\n        var p={x:e.pageX-o.left, y:e.pageY-o.top};\r\n        if (!chipRects) {\r\n            console.log(\"cvMouse\");\r\n            return;\r\n        }\r\n        chipRects.forEach(function (r,i) {\r\n            var cr=calcRect(r);\r\n            //console.log(p.x, p.y, cr);\r\n            if (inRect(p,cr )) {\r\n                var pc=chipRects[curChipIndex];\r\n                if (pc) {\r\n                    var pcr=calcRect(pc);\r\n                    rect(ctx,pcr);\r\n                }\r\n                curChipIndex=i;\r\n                rect(ctx,cr,\"#ff0\");\r\n            }\r\n        })\r\n    }\r\n    function cvClick() {\r\n        var pc=chipRects[curChipIndex];\r\n        if (pc) {\r\n            var pv=curItemName+\"+\"+curChipIndex;\r\n            v.patName.val(pv);\r\n            copyToClipboard(pv);\r\n        }\r\n    }\r\n    function rect(ctx,rect,col) {\r\n        ctx.strokeStyle=col || \"#f0f\";\r\n        ctx.beginPath();\r\n        ctx.moveTo(rect.left,rect.top);\r\n        ctx.lineTo(rect.left+rect.width,rect.top);\r\n        ctx.lineTo(rect.left+rect.width,rect.top+rect.height);\r\n        ctx.lineTo(rect.left,rect.top+rect.height);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    function nNan(val,def) {\r\n        if (val===val) return val;\r\n        return def;\r\n    }\r\n    function setRC() {\r\n        if (v.theForm[0].type.value!=\"rc\") return false;\r\n        if (!item) return false;\r\n        //console.log(\"setRC\");\r\n        cols=nNan( parseInt(v.cols.val()) ,cols);\r\n        rows=nNan( parseInt(v.rows.val()) ,rows);\r\n        calcWH();\r\n        redrawImage();\r\n        return false;\r\n    }\r\n    function calcWH() {\r\n        if (!item) return false;\r\n        item.type=\"wh\";\r\n        item.pwidth=nNan( Math.floor(w/cols), w);//item.pwidth);\r\n        item.pheight=nNan( Math.floor(h/rows), h);//item.pheight);\r\n        console.log(\"calcWH\",item);\r\n        v.pwidth.val(item.pwidth);\r\n        v.pheight.val(item.pheight);\r\n    }\r\n    function setWH() {\r\n        if (v.theForm[0].type.value!=\"wh\") return false;\r\n        if (!item) return false;\r\n        //console.log(\"setWH\",item);\r\n        item.type=\"wh\";\r\n        item.pwidth=nNan( parseInt(v.pwidth.val()), item.pwidth);\r\n        item.pheight=nNan( parseInt(v.pheight.val()), item.pheight);\r\n        calcRC();\r\n        redrawImage();\r\n        return false;\r\n    }\r\n    function calcRC() {\r\n        if (!item) return false;\r\n        cols=nNan( Math.floor(w/item.pwidth),cols);\r\n        rows=nNan( Math.floor(h/item.pheight),rows);\r\n        v.rows.val(rows);\r\n        v.cols.val(cols);\r\n    }\r\n    function tonyu1() {\r\n        if (!item) return false;\r\n        delete item.pwidth;\r\n        delete item.pheight;\r\n        item.type=\"t1\";\r\n        v.theForm[0].type.value=\"t1\";\r\n        try {\r\n            redrawImage();\r\n        } catch (e) {\r\n            alert(e);\r\n        }\r\n        /*var p=new PP(srcImg);\r\n        p.parse();\r\n        */\r\n        return false;\r\n    }\r\n    function close() {\r\n        d.dialog(\"close\");\r\n        if (onclose) onclose();\r\n        return false;\r\n    }\r\n    function copyToClipboard(value) {\r\n        if (!WebSite.isNW) return;\r\n        var gui = require('nw.gui');\r\n        var clipboard = gui.Clipboard.get();\r\n        clipboard.set(value, 'text');\r\n    }\r\n\r\n    return IMD;\r\n});\r\n\ndefine('ResEditor',[\"FS\",\"Tonyu\",\"UI\",\"ImageList\",\"Blob\",\"Auth\",\"WebSite\",\r\n\"ImageDetailEditor\",\"Util\",\"Assets\"],\r\n        function (FS, Tonyu, UI,IL,Blob,Auth,WebSite,\r\n                ImageDetailEditor,Util,Assets) {\r\n    /*var mediaInfos={\r\n        image:{name:\"\",exts:[\"png\",\"gif\",\"jpg\"],path:\"images/\",key:\"images\",\r\n            extPattern:/\\.(png|gif|jpe?g)$/i,contentType:/image\\/(png|gif|jpe?g)/,\r\n            newItem:function (name) {\r\n                var r={type:\"single\"};//pwidth:32,pheight:32};\r\n                if (name) r.name=\"$pat_\"+name;\r\n                return r;\r\n            }\r\n        },\r\n        sound:{name:\"\",exts:[\"mp3\",\"ogg\",\"mp4\",\"m4a\",\"mid\",\"wav\",\"mzo\"],path:\"sounds/\",key:\"sounds\",\r\n            extPattern:/\\.(mp3|ogg|mp4|m4a|midi?|wav|mzo)$/i,contentType:/((audio\\/(mp3|ogg|x-m4a|midi?|wav|mzo))|(video\\/mp4))/,\r\n            newItem:function (name) {\r\n                var r={};\r\n                if (name) r.name=\"$se_\"+name;\r\n                return r;\r\n            }\r\n        }\r\n    };*/\r\n    var ResEditor=function (prj, mediaInfo) {\r\n        //var mediaInfo=mediaInfos[mediaType||\"image\"];\r\n        var d=UI(\"div\", {title:mediaInfo.name+\"\"});\r\n        d.css({height:200+\"px\", \"overflow-v\":\"scroll\"});\r\n        var rsrc=prj.getResource();\r\n        var items=rsrc[mediaInfo.key];\r\n        var tempFiles = items.slice();\r\n        var rsrcDir=prj.getDir().rel(mediaInfo.path);\r\n        var itemUIs=[];\r\n        var _dropAdd;\r\n        if (!rsrc) prj.setResource({images:[],sounds:[]});\r\n        function convURL(u) {\r\n            function cvs(u) {\r\n                return WebSite.urlAliases[u] || u;\r\n            }\r\n            try {\r\n                if (Util.endsWith(u,\".ogg\")) {\r\n                    u=cvs(\"images/sound_ogg.png\");\r\n                } else if (Util.endsWith(u,\".mp3\")) {\r\n                    u=cvs(\"images/sound_mp3.png\");\r\n                } else if (Util.endsWith(u,\".mzo\")) {\r\n                    u=cvs(\"images/sound_mzo.png\");\r\n                } else if (Util.endsWith(u,\".mp4\")) {\r\n                    u=cvs(\"images/sound_mp4.png\");\r\n                } else if (Util.endsWith(u,\".m4a\")) {\r\n                    u=cvs(\"images/sound_m4a.png\");\r\n                } else if (Util.endsWith(u,\".mid\") || Util.endsWith(u,\".midi\")) {\r\n                    u=cvs(\"images/sound_mid.png\");\r\n                } else if (Util.endsWith(u,\".wav\")) {\r\n                    u=cvs(\"images/sound_wav.png\");\r\n                }\r\n                return Assets.resolve(u,prj);\r\n            }catch(e) {\r\n                return WebSite.urlAliases[\"images/ecl.png\"];\r\n            }\r\n        }\r\n        function reload(action, args) {\r\n            if (action==\"del\") { // htmlremove\r\n                var delItem = $(\"#\"+args);\r\n                rsrc=prj.getResource();\r\n                items=rsrc[mediaInfo.key];\r\n                tempFiles = items.slice();\r\n                itemUIs.some(function (itemUI, idx){\r\n                    if (itemUI[0].id==args) {\r\n                        itemUIs.splice(idx, 1);\r\n                        return true;\r\n                    }\r\n                });\r\n                delItem.removeAttr(\"id\");\r\n                delItem.remove();\r\n            } else { // reloadhtml\r\n                d.empty();\r\n                rsrc=prj.getResource();\r\n                items=rsrc[mediaInfo.key];\r\n                tempFiles = items.slice();\r\n                itemUIs=[];\r\n                if (action!=\"close\") { // \r\n                    var dragMsg=\"\"+mediaInfo.name+\"(\"+mediaInfo.exts.join(\"/\")+\")\";\r\n                    var dragPoint=UI(\"div\", {style:\"margin:10px; padding:10px; border:solid blue 2px;\",\r\n                        on:{dragover: s, dragenter: s, drop:dropAdd}},dragMsg\r\n                    ).appendTo(d);\r\n                    var itemTbl=UI(\"div\").appendTo(d);\r\n                    items.forEach(function (item){\r\n                        var itemUI=genItemUI(item, items);\r\n                        itemUIs.push(itemUI);\r\n                        itemUI.appendTo(itemTbl);\r\n                    });\r\n                    d.append(UI(\"div\",{style:\"clear:left;\"},\r\n                                [\"button\", {on:{click:function (){ add();}}}, \"\"],\r\n                                [\"button\", {on:{click:function (){ d.dialog(\"close\"); }}}, \"\"]\r\n                    ));\r\n                }\r\n            }\r\n            _dropAdd=dropAdd;\r\n            function dropAdd(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                var eo=e.originalEvent;\r\n                var files = eo.dataTransfer.files;\r\n                var readFiles = new Array(files.length);\r\n                var readFileSum = files.length;\r\n                var notReadFiles = [];\r\n                var existsFiles = [];\r\n                var readCnt = 0;\r\n                for (var i=0; i<files.length; i++) loop(i);\r\n                function loop(i){\r\n                    var file = files[i];\r\n                    var filetype= file.type;\r\n                    if (file.name.match(/\\.mzo$/)) filetype=\"audio/mzo\";\r\n                    var useBlob=WebSite.serverType==\"GAE\" && (file.size>1000*300);\r\n                    if(!filetype.match(mediaInfo.contentType)) {\r\n                        readFileSum--;\r\n                        notReadFiles.push(file);\r\n                        return;//continue;\r\n                    }\r\n                    var itemName=file.name.replace(mediaInfo.extPattern,\"\").replace(/\\W/g,\"_\");\r\n                    var itemExt=\"\";\r\n                    if (file.name.match(mediaInfo.extPattern)) {\r\n                        itemExt=RegExp.lastMatch.toLowerCase();\r\n                    }\r\n                    var itemFile=rsrcDir.rel(itemName+itemExt);\r\n                    var itemRelPath=\"ls:\"+itemFile.relPath(prj.getDir());\r\n                    var existsFile;\r\n                    var fileExists=tempFiles.some(function(f){\r\n                        existsFile=f;\r\n                        var fNameTemp=f.url.replace(mediaInfo.extPattern,\"\");\r\n                        var fName=fNameTemp.substring(fNameTemp.lastIndexOf(\"/\")+1,fNameTemp.length);\r\n                        return fName==itemName;\r\n                    });\r\n                    if (fileExists) {\r\n                        readFileSum--;\r\n                        file.existsFile=existsFile;\r\n                        existsFiles.push(file);\r\n                        return;//continue;\r\n                    }\r\n\r\n                    var v=mediaInfo.newItem(itemName);\r\n                    v.url=itemRelPath;\r\n                    renameUnique(v);\r\n                    tempFiles.push(v);\r\n                    if (useBlob) {\r\n                        Auth.assertLogin({\r\n                            showLoginLink:function (u) {\r\n                                dragPoint.css(\"border\",\"solid red 2px\").empty().append(\r\n                                        UI(\"div\",\"\"+mediaInfo.name+\"\",\r\n                                           [\"a\",{href:u,target:\"login\",style:\"color: blue;\"},\"\"])\r\n                                );\r\n                            },success:function (u) {\r\n                                dragPoint.text(\"...\");\r\n                                var prjN=prj.getName();\r\n                                Blob.upload(u,prjN,file,{success:function (){\r\n                                    dragPoint.text(dragMsg);\r\n                                    v.url=\"${blobPath}/\"+u+\"/\"+prjN+\"/\"+file.name;\r\n                                    add(v);\r\n                                }});\r\n                            }\r\n                        });\r\n                    } else {\r\n                        var reader = new FileReader();\r\n                        reader.temp_file=file;\r\n                        reader.temp_itemName=itemName;\r\n                        reader.temp_itemExt=itemExt;\r\n                        reader.temp_v=v;\r\n                        reader.onloadend = function(e) {\r\n                            var target = e.target;\r\n                            var fileContent = target.result;\r\n                            if (target.error==null && fileContent!=null) {\r\n                                var itemFile=rsrcDir.rel(target.temp_itemName+target.temp_itemExt);\r\n                                itemFile.setBytes(fileContent);\r\n                                target.temp_v.url=\"ls:\"+itemFile.relPath(prj.getDir());// fileContent;\r\n                                for (var i=0;i<files.length;i++) {\r\n                                    if (files[i]==target.temp_file) {\r\n                                        readFiles[i]=target.temp_v;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                            readCnt++;\r\n                            if (readCnt == readFileSum) {\r\n                                addAry(readFiles);\r\n                            }\r\n                        };\r\n                        reader.readAsArrayBuffer(file);\r\n                    }\r\n                }\r\n                var mes;\r\n                if (notReadFiles.length>0) {\r\n                    mes=\"\\n\";\r\n                    notReadFiles.forEach(function(f){\r\n                        if (f) mes+=f.name+\"\\n\";\r\n                    });\r\n                    alert(mes);\r\n                }\r\n                if (existsFiles.length>0) {\r\n                    mes=\"\\n\";\r\n                    existsFiles.forEach(function(f){\r\n                        if (f) {\r\n                            var fNameTemp=f.existsFile.url;\r\n                            var fName=fNameTemp.substring(fNameTemp.lastIndexOf(\"/\")+1,fNameTemp.length);\r\n                            mes+=f.name+\"  \"+fName+\"(\"+f.existsFile.name+\") \\n\";\r\n                            //mes+=f.name+\" (\"+f.existsFile.name+\")\\n\";\r\n                        }\r\n                    });\r\n                    alert(mes);\r\n                }\r\n                return false;\r\n            }\r\n            function s(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n            }\r\n            function genItemUI(item) {\r\n                function detail() {\r\n                    if (mediaInfo.key==\"sounds\") return;\r\n                    ImageDetailEditor.show(item, prj, item.name, {\r\n                        onclose: function () {\r\n                            prj.setResource(rsrc);\r\n                            reload();\r\n                        }\r\n                    });\r\n                }\r\n                function del() {\r\n                    for (var i=items.length-1; i>=0 ; i--) {\r\n                        if (items[i].name==item.name) { // itemsobjecttrueitem.name\r\n                            try {\r\n                                var r=Assets.resolve( items[i].url, prj,{asFile:1});\r\n                                if (FS.isFile(r) && rsrcDir.contains(r)) {\r\n                                    console.log(r.path(),\" is removed.\");\r\n                                    r.rm();\r\n                                }\r\n                            } catch(e) {}\r\n                            items.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update(\"del\", item.name.substring(1));\r\n                }\r\n                function up() {\r\n                    for (var i=items.length-1; i>=1 ; i--) {\r\n                        if (items[i]===item) {\r\n                            items.splice(i,1);\r\n                            items.splice(i-1,0,item);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update();\r\n                }\r\n                function down() {\r\n                    for (var i=items.length-2; i>=0 ; i--) {\r\n                        if (items[i]===item) {\r\n                            items.splice(i,1);\r\n                            items.splice(i+1,0,item);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update();\r\n                }\r\n\r\n                var res=UI(\"div\",{style:\"float:left;\", id:item.name.substring(1)}, // $se_bgm$\r\n                        [\"canvas\",{$var:\"c\",width:100,height:100,\"class\":\"clickable\",on:{click: detail}}],\r\n                        [\"div\",{style:\"float:right;\"},\r\n                        [\"button\",{on:{click:del}}, \"\"],[\"br\"],\r\n                        [\"button\",{on:{click:up}}, \"\"],[\"br\"],\r\n                        [\"button\",{on:{click:down}}, \"\"]],\r\n                        [\"div\",\r\n                            [\"input\", {$var:\"name\", size:12,value:item.name}]\r\n                            ]\r\n                   );\r\n                draw(convURL(item.url),res.$vars.c[0]);\r\n                var v=res.$vars;\r\n                v.data=item;\r\n                return res;\r\n            }\r\n            function add(v) {\r\n                items.push(v || mediaInfo.newItem());\r\n                update();\r\n            }\r\n            function addAry(vAry) {\r\n                vAry.forEach(function(v){\r\n                    if (v) items.push(v || mediaInfo.newItem());\r\n                });\r\n                update();\r\n            }\r\n            function renameUnique(v) {\r\n                var name=v.name;\r\n                var rename=name;\r\n                var cnt=1;\r\n                for (var i=tempFiles.length-1; i>=0 ; i--) {\r\n                    var o=tempFiles[i];\r\n                    if (o.name==rename) {\r\n                        rename=name+\"_\"+cnt;\r\n                        cnt++;\r\n                        i=tempFiles.length;\r\n                        continue;\r\n                    }\r\n                }\r\n                v.name=rename;\r\n            }\r\n        }\r\n        function update(action, args) {\r\n            itemUIs.forEach(function (itemUI) {\r\n                var v=itemUI.$vars;\r\n                var item=v.data;\r\n                item.name=v.name.val();\r\n            });\r\n            console.log(rsrc);\r\n            prj.setResource(rsrc);\r\n            reload(action, args);\r\n        }\r\n        /*function cleanFiles() {\r\n            var items=rsrc[mediaInfo.key];\r\n            Auth.currentUser(function (u,ct) {\r\n                if (!u) return;\r\n                var rtf=[];\r\n                items.forEach(function (item) {\r\n                    var a=Blob.isBlobURL(item.url),ogg;\r\n                    if (a) {\r\n                        rtf.push(a.fileName);\r\n                        ogg=a.fileName.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\");\r\n                        if (ogg!=a.fileName) rtf.push(ogg);\r\n                    }\r\n                });\r\n                var data={\r\n                        user:u,\r\n                        project:prj.getName(),\r\n                        mediaType:mediaType,\r\n                        csrfToken:ct,\r\n                        retainFileNames:JSON.stringify(rtf)\r\n                };\r\n                console.log(\"retainBlobs\",data);\r\n                //TODO: urlchange!\r\n                $.ajax({url:WebSite.serverTop+\"/retainBlobs\",type:\"get\",\r\n                    data:data\r\n                });\r\n            });\r\n            var cleanFile={};\r\n            if (rsrcDir.exists()) {\r\n                rsrcDir.each(function (f) {\r\n                    cleanFile[\"ls:\"+f.relPath(prj.getDir())]=f;\r\n                });\r\n            }\r\n            rsrc=prj.getResource();\r\n            items.forEach(function (item){\r\n                delete cleanFile[item.url];\r\n                delete cleanFile[item.url.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\")];\r\n            });\r\n            console.log(cleanFile);\r\n        }*/\r\n        function toi(s) {\r\n            if (!s || s==\"\") return undefined;\r\n            return parseInt(s);\r\n        }\r\n        return {\r\n            dropAdd:function (e) {\r\n                _dropAdd(e);\r\n            },\r\n            open: function () {\r\n                reload();\r\n                d.dialog({\r\n                    modal:true,\r\n                    width: 800,\r\n                    height: 500,\r\n                    close: function () {\r\n                        update(\"close\");\r\n                        //cleanFiles();\r\n                        if (typeof mediaInfo.close===\"function\") {\r\n                            mediaInfo.close({\r\n                                items:items,\r\n                                resourceDir:rsrcDir,\r\n                                project:prj\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            close: function () {\r\n                d.dialog(\"close\");\r\n            }\r\n        };\r\n    };\r\n    function draw(img, canvas) {\r\n        if (typeof img==\"string\") {\r\n            var i=new Image();\r\n            i.onload=function () {\r\n                draw(i,canvas);\r\n            };\r\n            i.src=img;\r\n            return i;\r\n        }\r\n        var cw=canvas.width;\r\n        var ch=canvas.height;\r\n        var cctx=canvas.getContext(\"2d\");\r\n        var width=img.width;\r\n        var height=img.height;\r\n        var calcw=ch/height*width; // calch=ch\r\n        var calch=cw/width*height; // calcw=cw\r\n        if (calch>ch) calch=ch;\r\n        if (calcw>cw) calcw=cw;\r\n        cctx.clearRect(0,0,cw,ch);\r\n        var marginw=Math.floor((cw-calcw)/2);\r\n        var marginh=Math.floor((ch-calch)/2);\r\n        cctx.drawImage(img,\r\n        0,0,width, height,\r\n        marginw,marginh,calcw, calch );\r\n    }\r\n    return ResEditor;\r\n});\r\n\ndefine('OggConverter',[\"FS\",\"WebSite\"], function (FS,WebSite) {\r\n    var C={};\r\n    var spawn;//=require(\"child_process\").spawn;\r\n    if (WebSite.isNW) {spawn=require(\"child_process\").spawn;}\r\n    C.convert=function (dir) {\r\n        if (!WebSite.isNW) return;\r\n        var ffmpeg=FS.get(WebSite.ffmpeg);\r\n        if (!ffmpeg.exists()) return;\r\n        console.log(\"Convert mpx->ogg \",dir.path());\r\n        dir.each(function (src) {\r\n            if (/*src.endsWith(\".mp3\") ||*/ src.endsWith(\".mp4\") || src.endsWith(\".m4a\")) {\r\n                var ext;\r\n                if (src.endsWith(\".mp3\")) ext=\".mp3\";\r\n                if (src.endsWith(\".mp4\")) ext=\".mp4\";\r\n                if (src.endsWith(\".m4a\")) ext=\".m4a\";\r\n                var dst=src.up().rel(src.truncExt(ext)+\".ogg\");\r\n                if (!dst.exists()) {\r\n                    console.log(\"running\",ffmpeg.path(),\"-i\",src.path(),dst.path());\r\n                    var proc=spawn(ffmpeg.path(),[\"-i\",src.path(),dst.path()]);\r\n                    proc.stdin.end();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    return C;\r\n});\r\n\ndefine('ResEditors',[\"ResEditor\",\"Klass\",\"OggConverter\"],\r\nfunction (ResEditor,Klass,OggConverter) {\r\n    var mediaInfos={\r\n        image:{name:\"\",exts:[\"png\",\"gif\",\"jpg\"],path:\"images/\",key:\"images\",\r\n            extPattern:/\\.(png|gif|jpe?g)$/i,contentType:/image\\/(png|gif|jpe?g)/,\r\n            newItem:function (name) {\r\n                var r={type:\"single\"};//pwidth:32,pheight:32};\r\n                if (name) r.name=\"$pat_\"+name;\r\n                return r;\r\n            }\r\n        },\r\n        sound:{name:\"\",exts:[\"mp3\",\"ogg\",\"mp4\",\"m4a\",\"mid\",\"wav\",\"mzo\"],path:\"sounds/\",key:\"sounds\",\r\n            extPattern:/\\.(mp3|ogg|mp4|m4a|midi?|wav|mzo)$/i,contentType:/((audio\\/(mp3|ogg|x-m4a|midi?|wav|mzo))|(video\\/mp4))/,\r\n            newItem:function (name) {\r\n                var r={};\r\n                if (name) r.name=\"$se_\"+name;\r\n                return r;\r\n            },\r\n            close: function (context) {\r\n                var prj=context.project;\r\n                console.log(context);\r\n                var hasMZO=false,hasMIDI=false;\r\n                context.items.forEach(function (item) {\r\n                    if (item.url.match(/\\.mzo/)) hasMZO=true;\r\n                    if (item.url.match(/\\.midi?/)) hasMIDI=true;\r\n                });\r\n                if (hasMZO) prj.addPlugin(\"Mezonet\");\r\n                else prj.removePlugin(\"Mezonet\");\r\n                if (hasMIDI) prj.addPlugin(\"PicoAudio\");\r\n                else prj.removePlugin(\"PicoAudio\");\r\n\r\n                var rsrcDir=context.resourceDir;\r\n                if (rsrcDir.exists()) {\r\n                    OggConverter.convert(rsrcDir);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return Klass.define({\r\n        $: function (prj) {\r\n            this.prj=prj;\r\n            this.editors={};\r\n            $(\"body\").on(\"dragover\",s).on(\"dragenter\",s).on(\"drop\",this.dropAndOpen.bind(this));\r\n            function s(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        dropAndOpen: function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            var eo=e.originalEvent;\r\n            var files = Array.prototype.slice.call(eo.dataTransfer.files);\r\n            console.log(\"DROP\",e,files);\r\n            if (files.length==0) return;\r\n            for (var k in mediaInfos) {\r\n                if (mediaInfos[k].extPattern.exec(files[0].name)) {\r\n                    this.open(k);\r\n                    this.curResEditor.dropAdd(e);\r\n                }\r\n            }\r\n        },\r\n        open: function (type) {// type \"image\" / \"sound\"\r\n            this.editors[type]=this.editors[type]||ResEditor(this.prj,mediaInfos[type]);\r\n            if (this.curResEditor && this.curResEditor!==this.editors[type]) {\r\n                this.curResEditor.close();\r\n            }\r\n            this.curResEditor=this.editors[type];\r\n            this.curResEditor.open();\r\n        }\r\n    });\r\n});\r\n\ndefine('MainClassDialog',[\"UI\"],function (UI) {\r\n    var res={};\r\n    res.show=function (prj, options) {\r\n        var d=res.embed(prj, options);\r\n        d.dialog({width:600});\r\n        return d;\r\n    };\r\n    res.embed=function (prj, options) {\r\n        if (!options) options={};\r\n\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                    [\"div\",\r\n                          [\"select\",{$var:\"mainClass\"}],\r\n                          [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}],\r\n                          [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                              res.d.done(false);\r\n                          }}}, \"OK\"],\r\n                          [\"button\", {$var:\"RunButton\", on:{click: function () {\r\n                              res.d.done(true);\r\n                          }}}, \"\"]\r\n                    ]\r\n            );\r\n        }\r\n        var d=res.d;\r\n        var v=res.d.$vars;\r\n        prj.getDir();\r\n\r\n        var opt=prj.getOptions();\r\n\r\n        d.done=function (run) {\r\n            opt.run.mainClass=v.mainClass.val();\r\n            prj.setOptions(opt);\r\n            if (options.on && options.on.done) {\r\n                options.on.done(v.mainClass.val(),run);\r\n            }\r\n            d.dialog(\"close\");\r\n        };\r\n\r\n        return d;\r\n    };\r\n    return res;\r\n});\n(function () {\r\n    var ifrm;// <iframe> element in parent window\r\n    if (typeof process!=\"object\") return {};\r\n    function Menu(cutLabel, copyLabel, pasteLabel) {\r\n        var gui = require('nw.gui')\r\n        , menu = new gui.Menu()\r\n\r\n        , cut = new gui.MenuItem({\r\n            label: cutLabel || \"Cut\"\r\n            , click: function() {\r\n                document.execCommand(\"cut\");\r\n                console.log('Menu:', 'cutted to clipboard');\r\n            }\r\n        })\r\n\r\n        , copy = new gui.MenuItem({\r\n            label: copyLabel || \"Copy\"\r\n            , click: function() {\r\n                document.execCommand(\"copy\");\r\n                console.log('Menu:', 'copied to clipboard');\r\n            }\r\n        })\r\n\r\n        , paste = new gui.MenuItem({\r\n            label: pasteLabel || \"Paste\"\r\n            , click: function() {\r\n                document.execCommand(\"paste\");\r\n                console.log('Menu:', 'pasted to textarea');\r\n            }\r\n        })\r\n        ;\r\n\r\n        menu.append(cut);\r\n        menu.append(copy);\r\n        menu.append(paste);\r\n\r\n        return menu;\r\n    }\r\n\r\n    var menu = new Menu(/* pass cut, copy, paste labels if you need i18n*/);\r\n    $(document).on(\"contextmenu\", function(e) {\r\n        e.preventDefault();\r\n        var p={left:0,top:0};\r\n        if (ifrm) {\r\n            p=parent.$(ifrm).offset();\r\n            console.log(p);\r\n        }\r\n        menu.popup(e.originalEvent.x+ Math.floor(p.left), e.originalEvent.y+Math.floor(p.top));\r\n    });\r\n\r\n    try {\r\n        var gui = require('nw.gui');\r\n        win = gui.Window.get();\r\n        var nativeMenuBar = new gui.Menu({ type: \"menubar\" });\r\n        nativeMenuBar.createMacBuiltin(\"My App\");\r\n        win.menu = nativeMenuBar;\r\n    } catch (ex) {\r\n        console.log(ex.message);\r\n    }\r\n    if (parent) {\r\n        parent.$(\"iframe\").each(function () {\r\n            var fDoc = this.contentDocument || this.contentWindow.document;\r\n            if (fDoc===document) {\r\n                ifrm=this;\r\n            }\r\n        });\r\n    }\r\n    return {};\r\n})();\ndefine(\"NWMenu\", function(){});\n\ndefine('extLink',[\"WebSite\",\"UI\",\"PathUtil\",\"Util\",\"assert\"],\r\n        function (WebSite,UI,PathUtil,Util,assert) {\r\n    var exec = (WebSite.isNW? require('child_process').exec : function (){});\r\n    function extLink(href,caption,options) {\r\n        options=options||{};\r\n        var opt=getOpt(href,options);\r\n        //for (var k in options) opt[k]=options[k];\r\n        return UI(\"a\",opt,caption);\r\n    };\r\n    function getOpt(href,options) {\r\n        var p=WebSite.platform;\r\n        options=options||{};\r\n        options.on=options.on||{};\r\n        var afterClick=(options.on && options.on.click) || function(){};\r\n        if (p==\"win32\") {\r\n            options.href=\"javascript:;\";\r\n            options.on.click=ext(\"start\",href,afterClick);\r\n        } else if (p==\"darwin\") {\r\n            options.href=\"javascript:;\";\r\n            options.on.click=ext(\"open\",href,afterClick);\r\n        } else {\r\n            options.href=href;\r\n            options.on.click=afterClick;\r\n            options.target=\"_new\";\r\n        }\r\n        return options;\r\n    }\r\n    function ext(cmd, href,afterClick) {\r\n        return function () {\r\n            exec(cmd+\" \"+href);\r\n            if (afterClick) afterClick();\r\n        };\r\n    }\r\n    extLink.all=function () {\r\n        if (!WebSite.isNW) return;\r\n        $(\"a\").each(function () {\r\n            var head=location.protocol+\"//\"+location.host+\"/\";\r\n            var a=$(this);\r\n            var href=a.attr(\"href\");\r\n            //console.log(\"href\",href);\r\n            if (href.match(/^http/) ) {\r\n                var opt=assert.is( getOpt(href),\r\n                        {href:String,on:{click:Function}} );\r\n                a.attr(\"href\",opt.href);\r\n                a.click(opt.on.click);\r\n            }\r\n        });\r\n    };\r\n    return extLink;\r\n});\r\n\n/*global window,self,global*/\r\ndefine('root',[],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\ndefine('plugins',[\"WebSite\",\"root\"],function (WebSite,root){\r\n    var plugins={};\r\n    var installed= {\r\n        box2d:{src: \"Box2dWeb-2.1.a.3.min.js\",detection:/BodyActor/,symbol:\"Box2D\" },\r\n        timbre: {src:\"timbre.js\",symbol:\"T\" },\r\n        gif: {src:\"gif-concat.js\",detection:/GIFWriter/,symbol:\"GIF\"},\r\n        Mezonet: {src:\"Mezonet.js\", symbol: \"Mezonet\"},\r\n        PicoAudio: {src:\"PicoAudio.min.js\", symbol:\"PicoAudio\"},\r\n        // single js is required for runScript1.js\r\n        jquery_ui: {src:\"jquery-ui.js\", detection:/\\$InputBox/,symbol:\"$.ui\"}\r\n    };\r\n    plugins.installed=installed;\r\n    plugins.detectNeeded=function (src,res) {\r\n        for (var name in installed) {\r\n            var d=installed[name].detection;\r\n            if (d) {\r\n                var r=d.exec(src);\r\n                if (r) res[name]=1;\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    plugins.loaded=function (name) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        return hasInGlobal(i.symbol);\r\n    };\r\n    function hasInGlobal(name) {\r\n        // name: dot ok\r\n        var g=window;\r\n        name.split(\".\").forEach(function (e) {\r\n            if (!g) return;\r\n            g=g[e];\r\n        });\r\n        return g;\r\n    }\r\n    plugins.loadAll=function (names,options) {\r\n        options=convOpt(options);\r\n        var namea=[];\r\n        for (var name in names) {\r\n            if (installed[name] && !plugins.loaded(name)) {\r\n                namea.push(name);\r\n            }\r\n        }\r\n        var i=0;\r\n        console.log(\"loading plugins\",namea);\r\n        setTimeout(loadNext,0);\r\n        function loadNext() {\r\n            if (i>=namea.length) options.onload();\r\n            else plugins.load(namea[i++],loadNext);\r\n        }\r\n    };\r\n    function convOpt(options) {\r\n        if (typeof options==\"function\") options={onload:options};\r\n        if (!options) options={};\r\n        if (!options.onload) options.onload=function (){};\r\n        return options;\r\n    }\r\n    plugins.load=function (name,options) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        options=convOpt(options);\r\n        var src=WebSite.pluginTop+\"/\"+i.src;\r\n        var reqj=root.requirejs;\r\n        /*if (typeof requireSimulator===\"undefined\") {\r\n            if (typeof requirejs===\"function\") reqj=requirejs;\r\n        } else {\r\n            if (requireSimulator.real) reqj=requireSimulator.real.requirejs;\r\n        }*/\r\n        if (reqj) {\r\n            src=src.replace(/\\.js$/,\"\");\r\n            console.log(\"Loading plugin via requirejs\",src);\r\n            reqj([src], function (res) {\r\n                if (!window[i.symbol] && res) window[i.symbol]=res;\r\n                options.onload(res);\r\n            });\r\n        } else {\r\n            console.log(\"Loading plugin via <script>\",src);\r\n            var s=document.createElement(\"script\");\r\n            s.src=src;\r\n            s.onload=options.onload;\r\n            document.body.appendChild(s);\r\n            //$(\"<script>\").on(\"load\",options.onload).attr(\"src\",src).appendTo(\"body\");\r\n        }\r\n        //setTimeout(options.onload,500);\r\n\r\n    };\r\n    plugins.request=function (name) {\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"Plugin \"+name+\" required\");\r\n        req.pluginName=name;\r\n    };\r\n    return plugins;\r\n});\r\n\ndefine('mkrun',[\"FS\",\"Util\",\"assert\",\"WebSite\",\"plugins\",\"Shell\",\"Tonyu\"],\r\n        function (FS,Util,assert,WebSite,plugins,sh,Tonyu) {\r\n    var MkRun={};\r\n    sh.mkrun=function (dest) {\r\n        return MkRun.run( Tonyu.currentProject, FS.get(dest));\r\n    };\r\n    MkRun.run2=function (prj,type,options) {\r\n        // type: zip , prj, dir\r\n        // when type==\"dir\" , options.dest is required\r\n        var dest,destZip;\r\n        switch(type) {\r\n            case \"prj\":\r\n            destZip=this.tmpDir().rel(\"prj.zip\");\r\n            case \"zip\":\r\n            dest=this.tmpDir().rel(prj.getDir().name());\r\n            break;\r\n            case \"dir\":\r\n            dest=options.dest;\r\n        }\r\n        assert(dest,\"dest is not set\");\r\n        console.log(\"mkrun2\",dest,destZip);\r\n        return MkRun.run(prj,dest,options).then(function () {\r\n            switch(type) {\r\n                case \"zip\":\r\n                return FS.zip.zip(dest,options).finally(function () {\r\n                    return dest.rm({r:1});\r\n                });\r\n                case \"prj\":\r\n                return FS.zip.zip(dest,destZip,options).then(function () {\r\n                    return destZip.getContent(function (c) {\r\n                        var f=new FormData();\r\n                        var url=WebSite.uploadTmpUrl;\r\n                        f.append( \"content\" , new Blob( [c.toBin(ArrayBuffer)], {type:c.contentType} ) , destZip.name() );\r\n                        return $.ajax({url:url,method:\"POST\",data:f,processData: false, contentType: false});\r\n                    });\r\n                }).then(function (r) {\r\n                    console.log(r);\r\n                    if (!r.match(/^[\\w\\d\\.]+\\.zip$/)) {\r\n                        //alert(\": \"+r);\r\n                        throw new Error(\": \"+r);\r\n                    }\r\n                    //alert(r);\r\n                    return {tmpFileName:r};\r\n                }).finally(function (r) {\r\n                    return dest.rm({r:1}).then(function () {\r\n                        destZip.rm();\r\n                    }).then(function () {return r;});\r\n                });\r\n            }\r\n        });\r\n    };\r\n    MkRun.tmpDir=function () {\r\n        var mkramPath=\"/mkram/\";\r\n        if (!MkRun.mounted) FS.mount(mkramPath, FS.LSFS.ramDisk() );\r\n        MkRun.mounted=true;\r\n        var mkram=FS.get(mkramPath);\r\n        if (mkram.exists()) mkram.rm({r:1});\r\n        return mkram;\r\n    };\r\n    MkRun.run=function (prj,dest,options) {\r\n        options=options||{};\r\n        var prjDir=prj.getDir();\r\n        var resc=prj.getResource();\r\n        var opt=prj.getOptions();\r\n        var loadFilesBuf=\"function loadFiles(dir){\\n\"+\r\n        \"   if (WebSite.isNW) return;\\n\";\r\n        var wwwDir=FS.get(WebSite.wwwDir);\r\n        var jsDir=wwwDir.rel(\"js/\");\r\n        const runScrFileName=\"runScript2_concat.min.js\";\r\n\r\n        console.log(\"jsDir\",jsDir);\r\n        //var sampleImgDir=wwwDir.rel(\"images/\");\r\n        if (options.copySrc) copySrc();\r\n        return $.when(\r\n                copySampleImages(),\r\n                convertLSURL(resc.images),\r\n                convertLSURL(resc.sounds),\r\n                genFilesJS(),\r\n                copyScripts(),\r\n                copyPlugins(),\r\n                copyLibs(),\r\n                copyResources(\"images/\"),\r\n                copyResources(\"sounds/\"),\r\n                copyIndexHtml(),\r\n                genReadme()\r\n        );\r\n\r\n        function genReadme() {\r\n            dest.rel(\"Readme.txt\").text(\r\n                    \"Web\\n\"+\r\n                    \"\\nhttps://www.tonyu.jp/tonyu2/runtime.html\\n\\n\"\r\n            );\r\n        }\r\n        function copyResources(dir) {\r\n            var src=prjDir.rel(dir);\r\n            if (src.exists()) src.copyTo(dest.rel(dir));\r\n        }\r\n        function genFilesJS(){\r\n            addFileToLoadFiles(\"res.json\",resc);\r\n            addFileToLoadFiles(\"options.json\",opt);\r\n            var mapd=prjDir.rel(\"maps/\");\r\n            if (mapd.exists()) {\r\n                mapd.recursive(function (mf) {\r\n                    addFileToLoadFiles( mf.relPath(prjDir), mf.obj());\r\n                });\r\n            }\r\n            var staticd=prjDir.rel(\"static/\");\r\n            if (staticd.exists()) {\r\n                staticd.recursive(function (mf) {\r\n                    addFileToLoadFiles( mf.relPath(prjDir));\r\n                });\r\n            }\r\n            dest.rel(\"js/files.js\").text(loadFilesBuf+\"}\");\r\n        }\r\n        function copyIndexHtml() {\r\n            var htmlfile=wwwDir.rel(\"html/runtimes/index.html\");\r\n            return htmlfile.text(function (htmlcont) {\r\n                htmlcont=htmlcont.replace(/TONYU_APP_VERSION/g,Math.floor(Math.random()*100000));\r\n                return dest.rel(htmlfile.name()).text(htmlcont);\r\n            });\r\n        }\r\n        function copyScripts() {\r\n            var usrjs=prjDir.rel(\"js/concat.js\");\r\n            var usrjsmap=prjDir.rel(\"js/concat.js.map\");\r\n            //TODO async...\r\n            //dest.rel(\"js/concat.js\").text(usrjs.text()+\"\\n//# sourceMappingURL=concat.js.map\");// js/ is needed??\r\n            var kerjs=FS.get(WebSite.kernelDir).rel(\"js/concat.js\");\r\n            var runScr2=jsDir.rel(`g2/${runScrFileName}`);\r\n            var runScr2Map=jsDir.rel(`g2/${runScrFileName}.map`);\r\n            return $.when(\r\n                usrjsmap.exists() && usrjsmap.copyTo(dest.rel(\"js/concat.js.map\")),\r\n                usrjs.copyTo(dest.rel(\"js/concat.js\")),\r\n                kerjs.copyTo(dest.rel(\"js/kernel.js\")),\r\n                runScr2.copyTo(dest.rel(`js/${runScrFileName}`)),\r\n                (runScr2Map.exists() ?\r\n                    runScr2Map.copyTo(dest.rel(`js/${runScrFileName}.map`)) :\r\n                    Promise.resolve()\r\n                )\r\n            );\r\n        }\r\n        function copyPlugins() {\r\n            var pluginDir=jsDir.rel(\"plugins/\");\r\n            if (!opt.plugins) return;\r\n            // TODO opt.plugins is now hash, but array is preferrable....\r\n            var args=[];\r\n            for (var n in opt.plugins) {\r\n                // TODO if src not found, do not copy and use src directory(maybe http://....)\r\n                var pf=pluginDir.rel(plugins.installed[n].src);\r\n                args.push( pf.copyTo(dest.rel(\"js/plugins/\")) );\r\n            }\r\n            return $.when.apply($,args);\r\n        }\r\n        function copyLibs() {\r\n            return $.when(\r\n                    jsDir.rel(\"lib/jquery-1.10.1.js\").copyTo(dest.rel(\"js/lib/\")),\r\n                    jsDir.rel(\"lib/require.js\").copyTo(dest.rel(\"js/lib/\"))\r\n            );\r\n        }\r\n        function addFileToLoadFiles(name, data) {\r\n            var file=prjDir.rel(name);\r\n            file.copyTo(dest.rel(name)); // needs on nwjs runtime\r\n            if (data==null) {\r\n                // in \"static\" folder\r\n                if (file.ext()===\".json\") {\r\n                    data=file.obj();\r\n                } else if (file.isText()) {\r\n                    //file.copyTo(dest.rel(name));\r\n                    data=file.text();\r\n                    loadFilesBuf+=\"\\tdir.rel('\"+name+\"').text(\"+JSON.stringify(data)+\");\\n\";\r\n                    return;\r\n                } else {\r\n                    //file.copyTo(dest.rel(name));\r\n                    data=file.dataURL();\r\n                    loadFilesBuf+=\"\\tdir.rel('\"+name+\"').dataURL(\"+JSON.stringify(data)+\");\\n\";\r\n                    return;\r\n                }\r\n            }\r\n            //dest.rel(name).obj(data);\r\n            loadFilesBuf+=\"\\tdir.rel('\"+name+\"').obj(\"+JSON.stringify(data)+\");\\n\";\r\n        }\r\n        function convertLSURL(r) {\r\n            for (var k in r) {\r\n                var url=r[k].url;\r\n                if (Util.startsWith(url,\"ls:\")) {\r\n                    var rel=url.substring(\"ls:\".length);\r\n                    r[k].url=rel;\r\n                }\r\n            }\r\n        }\r\n        function copySampleImages() {\r\n            var urlAliases= {\r\n                \"images/Ball.png\":1,\r\n                \"images/base.png\":1,\r\n                \"images/Sample.png\":\"../../images/Sample.png\",\r\n                \"images/neko.png\":\"../../images/neko.png\",\r\n                \"images/inputPad.png\":\"../../images/inputPad.png\",\r\n                \"images/mapchip.png\":\"../../images/mapchip.png\",\r\n                \"images/sound.png\":\"../../images/sound.png\",\r\n                \"images/sound_ogg.png\":\"../../images/sound_ogg.png\",\r\n                \"images/sound_mp3.png\":\"../../images/sound_mp3.png\",\r\n                \"images/sound_mp4.png\":\"../../images/sound_mp4.png\",\r\n                \"images/sound_m4a.png\":\"../../images/sound_m4a.png\",\r\n                \"images/sound_mid.png\":\"../../images/sound_mid.png\",\r\n                \"images/sound_wav.png\":\"../../images/sound_wav.png\",\r\n                    \"images/ecl.png\":\"../../images/ecl.png\"\r\n            };\r\n            var args=[];\r\n            for (var k in resc.images) {\r\n                var u= resc.images[k].url;\r\n                if (urlAliases[u] && !prjDir.rel(u).exists()) {\r\n                    var imgf=wwwDir.rel(u);\r\n                    if (imgf.exists()) {\r\n                        args.push( imgf.copyTo(dest.rel(u)) );\r\n                    } else {\r\n                        sh.echo(imgf+\" not exists!\");\r\n                    }\r\n                }\r\n            }\r\n            return $.when.apply($,args);\r\n        }\r\n        function copySrc() {\r\n            prjDir.copyTo(dest.rel(\"src/\"));\r\n        }\r\n    };\r\n    return MkRun;\r\n});\r\n\ndefine('zip',[\"FS\"],function (FS){return FS.zip;});\r\n\ndefine('mkrunDiag',[\"UI\",\"extLink\",\"mkrun\",\"Tonyu\",\"zip\",\"DeferredUtil\"],\r\nfunction (UI,extLink,mkrun,Tonyu,zip,DU) {\r\n    var res={};\r\n    res.show=function (prj,dest,options) {\r\n        var d=res.embed(prj,dest,options);\r\n        d.dialog({width:800,height:400});\r\n    };\r\n    res.embed=function (prj,/*dest,*/options) {\r\n        options=options||{};\r\n        var dest=options.dest;\r\n        var onComplete=options.onComplete||(function(){});\r\n        var ote={\r\n            click: function () {\r\n                if (outtype.value===\"dir\") {\r\n                    vars.dest.prop(\"disabled\",false);\r\n                } else {\r\n                    vars.dest.prop(\"disabled\",true);\r\n                }\r\n            }\r\n        };\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                  // [\"span\", {$var:\"hiddenFolder\"},\r\n                  [\"form\",{action:\"javascript:;\",$var:\"form\",name:\"mkrunform\"},\r\n                [\"h1\",\"\"],\r\n                    [\"div\",\r\n                        [\"input\", {type:\"radio\",name:\"outtype\",value:\"zip\",on:ote}],\r\n                        [\"label\",{\"for\":\"outtype\"},\"ZIP\"]\r\n                    ],//],\r\n                    [\"div\",\r\n                        [\"input\", {type:\"radio\",name:\"outtype\",value:\"prj\",on:ote}],\r\n                        [\"label\",{\"for\":\"outtype\"},\"\"]\r\n                    ],//],\r\n                    [\"div\",{$var:\"folder\"},\r\n                        [\"input\",{type:\"radio\",name:\"outtype\",value:\"dir\",on:ote}],\r\n                        [\"label\",{\"for\":\"dest\"},\"\"],[\"br\"],\r\n                        [\"input\", {$var:\"dest\",id:\"dest\",$edit:\"dest\",size:60}]\r\n                    ],\r\n                [\"h1\",\"\"],\r\n                    [\"div\",\r\n                        [\"input\", {id:\"src\",$edit:\"src\",type:\"checkbox\"}],\r\n                        [\"label\",{\"for\":\"src\"},\"\"],\r\n                        [\"div\",\r\n                        {\"class\":\"srcwarn\"},\r\n                        \"\"+\r\n                        \"\"]\r\n                    ],\r\n                    [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                         res.run();\r\n                    }}}, \"\"],\r\n                    [\"span\",{$var:\"progress\"}]\r\n                ]\r\n            );\r\n        }\r\n        var vars=res.d.$vars;\r\n        vars.OKButton.prop(\"disabled\", false);\r\n        if (!options.dest) {\r\n            vars.folder.hide();\r\n        } else {\r\n            vars.folder.show();\r\n        }\r\n        var model={dest:(dest && dest.path)?dest.path():(dest||\"\"), src:true, zip:true};\r\n        var form=vars.form[0];\r\n        var outtype=form.outtype;\r\n        vars.dest.prop(\"disabled\",true);\r\n        outtype.value=\"zip\";\r\n        res.d.$edits.load(model);\r\n        res.run=function () {\r\n            var type=outtype.value;\r\n            res.d.$vars.OKButton.prop(\"disabled\", true);\r\n            var opt={copySrc:model.src};\r\n            opt.progress=function (f) {\r\n                vars.progress.text(f.name());\r\n                return DU.timeout(0);\r\n            };\r\n            if (type===\"dir\") opt.dest=FS.get(FS.PathUtil.directorify(model.dest));\r\n            return mkrun.run2(prj,type, opt ).then(function (r) {\r\n                /*if (outtype.value===\"zip\") {\r\n                    zip.zip(FS.get(model.dest)).then(function () {\r\n                        console.log(\"ZIPPED?\");\r\n                    },function (e) {\r\n                        console.log(e.stack);\r\n                    });\r\n                }*/\r\n                switch(type) {\r\n                case \"dir\":\r\n                UIDiag.alert(UI(\"div\",\r\n                    [\"p\",\r\n                    [\"a\",{href:\"javascript:;\",\r\n                    style:\"color: blue;\",on:{click:openFolder}},model.dest],\r\n                    \"\"],\r\n                    [\"p\",\"Web\"],\r\n                    [\"ul\",\r\n                    [\"li\",\"Web\"],\r\n                    [\"li\",\"ZIP\",\r\n                      extLink(\"http://www.tonyu.jp/project/\",\r\n                              \"\",{style:\"color: blue;\"}),\r\n                    \"\"]]\r\n                    ),{width:\"auto\"}\r\n                );\r\n                break;\r\n                case \"zip\":\r\n                UIDiag.alert(UI(\"div\",\r\n                    [\"p\",\"\"],\r\n                    [\"p\",\"Web\"],\r\n                    [\"ul\",\r\n                    [\"li\",\"Web\"],\r\n                    [\"li\",\"ZIP\",\r\n                      extLink(\"http://www.tonyu.jp/project/\",\r\n                              \"\",{style:\"color: blue;\"}),\r\n                    \"\"]]\r\n                    ),{width:\"auto\"}\r\n                );\r\n                break;\r\n                case \"prj\":\r\n                var diag;\r\n                diag=UI(\"div\",\r\n                    [\"p\",[\"strong\",\"\"]],\r\n                    [\"p\",\r\n                      extLink(WebSite.newVersionUrl+\"?tmpFile=\"+r.tmpFileName,\r\n                        \"\",{\r\n                            style:\"color: blue;\",\r\n                            on:{\r\n                                click: function () {\r\n                                    diag.$vars.button.prop(\"disabled\", false);\r\n                                }\r\n                            }\r\n                        }),\r\n                        \"\"\r\n                    ],\r\n                    [\"button\",{\r\n                        $var:\"button\",\r\n                        on:{\r\n                            click: function () {\r\n                                diag.dialog(\"close\");\r\n                                diag.remove();\r\n                            }\r\n                        }\r\n                    },\"OK\"]\r\n                );\r\n                diag.$vars.button.prop(\"disabled\", true);\r\n                diag.dialog();\r\n                break;\r\n                }\r\n                onComplete({type:type,config:model});\r\n                res.d.$vars.OKButton.prop(\"disabled\", false);\r\n                if (res.d.dialog) res.d.dialog(\"close\");\r\n                if (options.onEnd) options.onEnd();\r\n            }).then(function (){},function (e) {\r\n              console.error(e);\r\n              alert(e);\r\n            });\r\n            function openFolder() {\r\n                var f=FS.get(model.dest);\r\n                var gui = require(\"nw.gui\");//nwDispatcher.requireNwGui();\r\n                gui.Shell.showItemInFolder(f.path().replace(/\\//g,\"\\\\\"));\r\n            }\r\n        };\r\n        return res.d;\r\n    };\r\n    return res;\r\n});\r\n\ndefine('LSFS',[\"FS\"],function (FS){return FS.LSFS;});\r\n\ndefine('WebFS',[\"FS\"],function (FS){return FS.WebFS;});\r\n\ndefine('DiagAdjuster',[],function () {\r\n    var DiagAdjuster=function (diagElem) {\r\n        this.diagElem=diagElem;\r\n        this.rszt=null;\r\n        this.margin=30;\r\n        this.timeout=100;\r\n    };\r\n    DiagAdjuster.prototype.handleResize=function () {\r\n        var self=this;\r\n        if (this.rszt) clearTimeout(this.rszt);\r\n        this.rszt=setTimeout(function () {\r\n            var d=self.diagElem.closest(\".ui-dialog\");\r\n            var t=d.find(\".ui-dialog-titlebar\");\r\n            var dw=d.width(),dh=d.height(),th=t.height();\r\n            var pad=self.margin;\r\n            var sz={w:dw-pad, h:dh-th-pad};\r\n            self.diagElem.css({width:sz.w,height:sz.h});\r\n            self.afterResize(self.diagElem);\r\n        },this.timeout);\r\n    };\r\n    DiagAdjuster.prototype.handleResizeF=function () {\r\n        var self=this;\r\n        return function () {\r\n            self.handleResize();    \r\n        };\r\n    };\r\n    DiagAdjuster.prototype.afterResize=function (){};\r\n    return DiagAdjuster;\r\n});\r\n\ndefine('exportAsScriptTags',[\"FS\",\"Util\",\"WebSite\"], function (FS,Util,WebSite) {\r\n    var east=function (dir,options) {\r\n        options=options||{};\r\n        var excludes=options.excludes||{};\r\n        var includeJSScript=options.includeJSScript;\r\n        var buf=\"<!DOCTYPE html>\\n<html><head>\\n\";\r\n        buf+='<meta http-equiv=\"Content-type\" content=\"text/html; charset=utf8\"/>\\n';\r\n        buf+=\"<script>WebSite_runType='singleHTML';</script>\\n\";\r\n        if (includeJSScript) {\r\n            var resFile=dir.rel(\"res.json\");\r\n            var resObj=resFile.obj();\r\n            var scriptServer=WebSite.scriptServer||\"https://edit.tonyu.jp/\";\r\n            const genPath=scriptServer+\"js/g2/\";\r\n            resObj.images.forEach(function (im) {\r\n                if (WebSite.builtinAssetNames[im.url]) {\r\n                    buf+='<script src=\"'+scriptServer+im.url+'.js\"></script>\\n';\r\n                }\r\n            });\r\n            buf+='<script src=\"'+scriptServer+'js/lib/jquery-1.10.1.js\" type=\"text/javascript\"></script>\\n';\r\n            buf+='<script src=\"'+genPath+'runScript_concat.min.js\" type=\"text/javascript\"></script>\\n';\r\n        }\r\n        buf+=\"<div id='splash' style='position:relative; height: 100%;'>\\n\";\r\n        buf+=\"<!---->\\n\";\r\n        buf+=\"<!--You can write here what you want to show while loading. -->\\n\";\r\n        buf+=\"<div class='progress'>\\n\";\r\n        buf+=\"<!-- div -->\\n\";\r\n        buf+=\"<!-- This shows progress. If you don't want to shot, remove this element -->\\n\";\r\n        buf+=\"</div>\\n\";\r\n        buf+=\"</div>\\n\";\r\n        buf+=\"<!--\\n\";\r\n        buf+=\"Open this site when editing this game:\\n\";\r\n        buf+=\"https://edit.tonyu.jp/index.html?importFromHTML=1\\n\";\r\n        buf+=\"-->\\n\";\r\n        var binary=[],json=[];\r\n        //dir=FS.get(dir);\r\n        dir.recursive(function (f) {\r\n            var rel=f.relPath(dir);\r\n            if (excludes[rel]) return;\r\n            if (f.endsWith(\".json\") && rel.indexOf(\"maps/\")<0) {\r\n                json.push(f);\r\n                return;\r\n            } else if (f.endsWith(\".desktop\")) {\r\n                return;\r\n            } else if (f.endsWith(\".js.map\")) {\r\n                return;\r\n            } else if (f.endsWith(\".js\")) {\r\n                return;\r\n            } else if (!f.endsWith(\".tonyu\")) {\r\n                binary.push(f);\r\n                return;\r\n            }\r\n            //var name=f.truncExt(\".tonyu\");\r\n            var m=\"\";//(name==main?\" data-main='true'\":\"\");\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"'\"+lu+\">\";\r\n            buf+=escapeLoosely(f.text());\r\n            buf+=\"</script>\\n\\n\";\r\n        },{excludes:[\"files/\"]});\r\n        json.forEach(function (f) {\r\n            var rel=f.relPath(dir);\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"'\"+lu+\">\\n\";\r\n            buf+=beautifyJSON(f.text());\r\n            buf+=\"</script>\\n\\n\";\r\n        });\r\n        binary.forEach(function (f) {\r\n            var rel=f.relPath(dir);\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"' data-wrap='80'\"+lu+\">\";\r\n            buf+=wrap(f.text(),80);\r\n            buf+=\"</script>\\n\\n\";\r\n        });\r\n        buf+=\"</head><body></body></html>\";\r\n        return buf;\r\n        function wrap(str, cols) {\r\n            var lines=str.split(\"\\n\");\r\n            var buf=\"\";\r\n            lines.forEach(function (line) {\r\n                while (true) {\r\n                    if (line.length>cols) {\r\n                        buf+=line.substring(0,cols)+\"\\\\\\n\";\r\n                        line=line.substring(cols);\r\n                    } else {\r\n                        buf+=line+\"\\n\";\r\n                        break;\r\n                    }\r\n                }\r\n                return buf;\r\n            });\r\n            return buf;\r\n        }\r\n        function beautifyJSON(str) {\r\n            try {\r\n                var o=JSON.parse(str);\r\n                return JSON.stringify(o,null,4);\r\n            }catch(e) {\r\n                return str;\r\n            }\r\n        }\r\n    };\r\n    function escapeLoosely(text) {\r\n        text=text.replace(/&(#?[\\w\\d]+;)/g, function (_,a){\r\n            return \"&amp;\"+a;\r\n        });\r\n        text=text.replace(/<(\\s*)\\/(\\s*)script(\\s*)>/ig,function (_,s1,s2,s3) {\r\n            return \"&lt;\"+s1+\"/\"+s2+\"script\"+s3+\"&gt;\" ;\r\n        });\r\n        return text;\r\n    }\r\n    return east;\r\n});\r\n\ndefine('ExportHTMLDialog',[\"exportAsScriptTags\",\"UI\",\"Klass\"], function (east,UI,Klass) {\r\n    ExportHTMLDialog=Klass.define({\r\n        $this:true,\r\n        $:[\"prj\"],\r\n        show: function (t,options) {\r\n            var dir=t.prj.getDir();\r\n            t.createDOM();\r\n            t.dom.dialog({width:800,height:400});\r\n            setTimeout(function () {\r\n                var buf=east(dir,options);\r\n                t.prog.val(buf);\r\n            },0);\r\n        },\r\n        createDOM:function (t) {\r\n            if (t.dom) return t.dom;\r\n            t.dom=UI(\"div\",{title:\"HTML\"},\r\n                [\"div\",\"HTMLcodepenJS\"],\r\n                [\"textarea\",{$var:\"prog\",rows:20,cols:60,placeholder:\"Please wait...\"}]\r\n            );\r\n            t.prog=t.dom.$vars.prog;\r\n            return t.dom;\r\n        }\r\n    });\r\n    return ExportHTMLDialog;\r\n});\r\n\ndefine('DebugDialog',['require','exports','module','UI'],function (require,exports, module) {\r\nconst UI=require(\"UI\");\r\nmodule.exports=class {\r\n    constructor(param) {\r\n        const t=this;\r\n        // desktopEnv,  screenH, onClose\r\n        t.param=param;\r\n        var d=UI(\"div\",{\r\n                id:\"runArea\",\r\n                style:\"text-align : center ;overflow:hidden;\",\r\n                class:\"runArea\"\r\n            },\r\n            [\"iframe\",{\r\n                $var:\"iframe\",id:\"iframe\",src:\"about:blank\",width:465,height:465,\r\n                class:\"tonyu-canvas\",\r\n                style:\" margin-left : auto ; margin-right : auto ;\"\r\n            }]\r\n        );\r\n        t.dom=d;\r\n        t.iframe=d.$vars.iframe;\r\n    }\r\n    close() {\r\n        this.dom.dialog(\"close\");\r\n    }\r\n    show(reset) {\r\n        const t=this;\r\n        var d=t.dom;\r\n        var param=t.param;\r\n        var desktopEnv=param.desktopEnv;\r\n        if (reset) desktopEnv.runDialog={};\r\n        t.size=desktopEnv.runDialog||(desktopEnv.runDialog={});\r\n        var size=t.size;\r\n        t.iframe=d.$vars.iframe;\r\n        size.width=size.width||($(window).width()-100)/2-20;\r\n        size.height=size.height||param.screenH-20;\r\n        if (!t.shownOnce || reset) {\r\n            console.log(\"DIag::show\",size);\r\n            d.dialog({\r\n                width:size.width,\r\n                height:size.height,\r\n                position:size.top?\r\n                {\r\n                    my: \"left top\",\r\n                    at: \"left+\"+size.left+\" top+\"+size.top\r\n                }:\r\n                {my:\"right top\",at:\"right-10 bottom+10\",of:$(\"#navBar\")},\r\n                resize:function (e,ngeom) {\r\n                    size.width=d.width();\r\n                    size.height=d.height();\r\n                    t.resizeCanvas(d.width(),d.height());\r\n                    if (ngeom) {\r\n                        size.width=ngeom.size.width;\r\n                        size.height=ngeom.size.height;\r\n                        size.left=ngeom.position.left;\r\n                        size.top=ngeom.position.top;\r\n                        t.modified=true;\r\n                    }\r\n                },\r\n                drag: function (e,ngeom) {\r\n                    if (ngeom) {\r\n                        size.left=ngeom.position.left;\r\n                        size.top=ngeom.position.top;\r\n                        t.modified=true;\r\n                    }\r\n                },\r\n                close:function () {\r\n                    t.opened=false;\r\n                    t.param.onClose();\r\n                    t.iframe.attr(\"src\",\"about:blank\");\r\n                }\r\n            });\r\n            t.shownOnce=true;\r\n        } else {\r\n            d.dialog();\r\n        }\r\n        t.iframe.attr(\"src\",\"debug.html?prj=\"+param.prj);\r\n        t.opened=true;\r\n        $(\".ui-dialog-titlebar-close\").blur();\r\n        t.iframe.focus();\r\n        t.resizeCanvas(d.width(),d.height());\r\n        console.log(\"Diag\",size);\r\n    }\r\n    resizeCanvas(w,h) {\r\n        //console.log(\"canvas size\",w,h);\r\n        this.iframe.attr(\"height\", h).attr(\"width\",w);\r\n        try {\r\n            this.iframe[0].contentWindow.Tonyu.globals.$mainCanvas.attr(\"height\", h).attr(\"width\",w);\r\n        }catch(e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n};\r\n});\r\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define('BuilderClient4Sys',[],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.TonyuBuilderClient = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\nconst root=require(\"../lib/root\");\r\nconst Worker=root.Worker;\r\nconst WS=require(\"../lib/WorkerServiceB\");\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst FileMap=require(\"../lib/FileMap\");\r\n//const FS=(root.parent && root.parent.FS) || root.FS;\r\nconst FS=root.FS;// TODO\r\n\r\nclass BuilderClient {\r\n    constructor(prj,config) {// dirBased\r\n        this.prj=prj;\r\n        let url=config.worker.url;\r\n        if (!url.match(/^blob/)) url+=\"?\"+Math.random();\r\n        this.w=new WS.Wrapper(new Worker(url));\r\n        this.config=config;\r\n        this.fileMap=new FileMap();\r\n    }\r\n    getOutputFile(...f) {return this.prj.getOutputFile(...f);}\r\n    getDir(){return this.prj.getDir();}\r\n    setDebugger(t) {this.debugger=t;}// t:iframe.contentWindow.Debugger\r\n    exec(srcraw) {\r\n        if (this.debugger) return this.debugger.exec(srcraw);\r\n    }\r\n    convertFromWorkerPath(path) {\r\n        return this.fileMap.convert(path,\"remote\",\"local\");\r\n    }\r\n    async init() {\r\n        if (this.inited) return;\r\n        const fileMap=this.fileMap;\r\n        const localPrjDir=this.getDir();\r\n        const files=localPrjDir.exportAsObject({\r\n            excludesF: f=>f.ext()!==\".tonyu\" && f.name()!==\"options.json\"\r\n        });\r\n        const ns2depspec=this.config.worker.ns2depspec;\r\n        const {prjDir:remotePrjDir}=await this.w.run(\"compiler/init\",{\r\n            namespace:this.prj.getNamespace(),\r\n            files, ns2depspec\r\n        });\r\n        fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n        const deps=this.prj.getDependingProjects();//TODO recursive\r\n        for (let dep of deps) {\r\n            const ns=dep.getNamespace();\r\n            if (!ns2depspec[ns]) {\r\n                const localPrjDir=dep.getDir();\r\n                const files=localPrjDir.exportAsObject({\r\n                    excludesF: f=>f.ext()!==\".tonyu\" && f.name()!==\"options.json\"\r\n                });\r\n                const {prjDir:remotePrjDir}=await this.w.run(\"compiler/addDependingProject\",{\r\n                    namespace:ns, files\r\n                });\r\n                fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n            }\r\n        }\r\n        this.inited=true;\r\n    }\r\n    async fullCompile() {\r\n        try {\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/fullCompile\");\r\n            console.log(compres);\r\n            const sf=SourceFiles.add(compres);\r\n            await sf.saveAs(this.getOutputFile());\r\n            await this.exec(compres);\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async partialCompile(f) {\r\n        try {\r\n            const files={};files[f.relPath(this.getDir())]=f.text();\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/postChange\",{files});\r\n            console.log(compres);\r\n            await this.exec(compres);\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async renameClassName(from,to) {\r\n        try {\r\n            await this.init();\r\n            let changed=await this.w.run(\"compiler/renameClassName\",{from,to});\r\n            for (let n in changed) {\r\n                let val=changed[n];\r\n                n=this.convertFromWorkerPath(n);\r\n                if (val==null) {\r\n                    FS.get(n).rm();\r\n                } else {\r\n                    FS.get(n).text(val);\r\n                }\r\n            }\r\n            return changed;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    convertError(e) {\r\n        if (e.isTError) {\r\n            e.src=FS.get(this.convertFromWorkerPath(e.src));\r\n        }\r\n        return e;\r\n    }\r\n    async run() {\r\n        await this.init();\r\n        await this.fullCompile();\r\n        this.getDir().watch(async (e,f)=>{\r\n            console.log(e,f.path());\r\n            if (f.ext()===\".tonyu\") {\r\n                const nsraw=await this.partialCompile(f);\r\n                if (this.config.onCompiled) this.config.onCompiled(nsraw);\r\n\r\n                //if (root.Tonyu.globals.$restart) root.Tonyu.globals.$restart();\r\n            }\r\n        });\r\n    }\r\n}\r\nBuilderClient.SourceFiles=SourceFiles;\r\n//root.TonyuBuilderClient=BuilderClient;\r\nmodule.exports=BuilderClient;\r\n\r\n},{\"../lang/SourceFiles\":3,\"../lib/FileMap\":8,\"../lib/WorkerServiceB\":9,\"../lib/root\":10}],2:[function(require,module,exports){\r\n// Add extra libraries for Tonyu System IDE\r\n//const root=require(\"../lib/root\");\r\nconst BuilderClient=require(\"./BuilderClient\");\r\n\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst ProjectFactory=require(\"../project/ProjectFactory\");\r\nconst CompiledProject=require(\"../project/CompiledProject\");\r\nconst langMod=require(\"../lang/langMod\");\r\nconst StackDecoder=require(\"../lang/StackDecoder\");\r\nconst SourceMap=require(\"../lang/source-map\");\r\nBuilderClient.SourceFiles=SourceFiles;\r\nBuilderClient.ProjectFactory=ProjectFactory;\r\nBuilderClient.CompiledProject=CompiledProject;\r\nBuilderClient.langMod=langMod;\r\nBuilderClient.StackDecoder=StackDecoder;\r\nBuilderClient.SourceMap=SourceMap;\r\nmodule.exports=BuilderClient;\r\n//root.TonyuBuilderClient=BuilderClient;\r\n\r\n},{\"../lang/SourceFiles\":3,\"../lang/StackDecoder\":4,\"../lang/langMod\":5,\"../lang/source-map\":6,\"../project/CompiledProject\":11,\"../project/ProjectFactory\":12,\"./BuilderClient\":1}],3:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n/*const root=require(\"root\");*/\r\nconst root=require(\"../lib/root\");\r\nfunction timeout(t) {\r\n    return new Promise(s=>setTimeout(s,t));\r\n}\r\nlet vm;\r\n/*global global*/\r\nif (typeof global!==\"undefined\" && global.require) {\r\n    vm=global.require(\"vm\");\r\n}\r\nclass SourceFile {\r\n    // var text, sourceMap:S.Sourcemap;\r\n    constructor(text, sourceMap) {\r\n        if (typeof text===\"object\") {\r\n            const params=text;\r\n            sourceMap=params.sourceMap;\r\n            //functions=params.functions;\r\n            text=params.text;\r\n            if (params.url) {\r\n                this.url=params.url;\r\n            }\r\n        }\r\n        this.text=text;\r\n        this.sourceMap=sourceMap && sourceMap.toString();\r\n        //this.functions=functions;\r\n    }\r\n    async saveAs(outf) {\r\n        const mapFile=outf.sibling(outf.name()+\".map\");\r\n        let text=this.text;\r\n        //text+=\"\\n//# traceFunctions=\"+JSON.stringify(this.functions);\r\n        if (this.sourceMap) {\r\n            await mapFile.text(this.sourceMap);\r\n            text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n        }\r\n        await outf.text(text);\r\n        //return Promise.resolve();\r\n    }\r\n    exec(options) {\r\n        return new Promise((resolve, reject)=>{\r\n            if (root.window) {\r\n                const document=root.document;\r\n                let u;\r\n                if (this.url) {\r\n                    u=this.url;\r\n                } else {\r\n                    const b=new root.Blob([this.text], {type: 'text/plain'});\r\n                    u=root.URL.createObjectURL(b);\r\n                }\r\n                const s=document.createElement(\"script\");\r\n                console.log(\"load script\",u);\r\n                s.setAttribute(\"src\",u);\r\n                s.addEventListener(\"load\",e=>{\r\n                    resolve(e);\r\n                });\r\n                this.parent.url2SourceFile[u]=this;\r\n                document.body.appendChild(s);\r\n            } else if (options && options.tmpdir){\r\n                const tmpdir=options.tmpdir;\r\n                const uniqFile=tmpdir.rel(Math.random()+\".js\");\r\n                const mapFile=uniqFile.sibling(uniqFile.name()+\".map\");\r\n                let text=this.text;\r\n                text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n                uniqFile.text(text);\r\n                mapFile.text(this.sourceMap);\r\n                //console.log(\"EX\",uniqFile.exists());\r\n                require(uniqFile.path());\r\n                uniqFile.rm();\r\n                mapFile.rm();\r\n                resolve();\r\n            } else if (root.importScripts && this.url){\r\n                root.importScripts(this.url);\r\n                resolve();\r\n            } else {\r\n                const F=Function;\r\n                const f=(vm? vm.compileFunction(this.text) : new F(this.text));\r\n                resolve(f());\r\n            }\r\n        });\r\n    }\r\n    export() {\r\n        return {text:this.text, sourceMap:this.sourceMap, functions:this.functions};\r\n    }\r\n}\r\nclass SourceFiles {\r\n    constructor() {\r\n        this.url2SourceFile={};\r\n    }\r\n    add(text, sourceMap) {\r\n        const sourceFile=new SourceFile(text, sourceMap);\r\n        /*if (sourceFile.functions) for (let k in sourceFile.functions) {\r\n            this.functions[k]=sourceFile;\r\n        }*/\r\n        sourceFile.parent=this;\r\n        return sourceFile;\r\n    }\r\n\r\n}\r\nmodule.exports=new SourceFiles();\r\n//});/*--end of define--*/\r\n\r\n},{\"../lib/root\":10}],4:[function(require,module,exports){\r\nconst S=require(\"./source-map\");\r\nconst StackTrace=require(\"./stacktrace\");\r\nconst SourceFiles=require(\"./SourceFiles\");\r\nmodule.exports={\r\n    async decode(e) {\r\n        try{\r\n            const tr=await StackTrace.fromError(e,{offline:true});\r\n            tr.forEach(t=>{\r\n                try {\r\n                    const sf=SourceFiles.url2SourceFile[t.fileName];\r\n                    console.log(\"sf\", t.fileName, sf, SourceFiles.url2SourceFile);\r\n                    if (sf) {\r\n                        const opt={\r\n                            line: t.lineNumber, column:t.columnNumber,\r\n                            bias:S.SourceMapConsumer.GREATEST_LOWER_BOUND\r\n                        };\r\n                        const pos=this.originalPositionFor(sf,opt);\r\n                        console.log(\"pos\",opt,pos);\r\n                        if (pos.source) t.fileName=pos.source;\r\n                        if (pos.line) t.lineNumber=pos.line;\r\n                        if (pos.column) t.columnNumber=pos.column;\r\n                    }\r\n                }catch(ex) {\r\n                    console.log(\"Sourcemap error\",ex);\r\n                }\r\n            });\r\n            console.log(\"Converted: \",tr);\r\n            return tr;\r\n        } catch(ex) {\r\n            console.log(\"StackTrace error\",ex);\r\n            if (!e || !e.stack) {\r\n                console.log(\"HennaError\",e);\r\n                return [];\r\n            }\r\n            return e.stack.split(\"\\n\");\r\n        }\r\n    },\r\n    originalPositionFor(sf,opt) {\r\n        const s=this.getSourceMapConsumer(sf);\r\n        if (!s) return opt;\r\n        return s.originalPositionFor(opt);\r\n    },\r\n    getSourceMapConsumer(sf) {\r\n        if (sf.sourceMapConsumer) return sf.sourceMapConsumer;\r\n        sf.sourceMapConsumer=new S.SourceMapConsumer(JSON.parse(sf.sourceMap));\r\n        //console.log(this.sourceMapConsumer);\r\n        return sf.sourceMapConsumer;\r\n    }\r\n};\r\n\r\n},{\"./SourceFiles\":3,\"./source-map\":6,\"./stacktrace\":7}],5:[function(require,module,exports){\r\n    module.exports={\r\n        getNamespace: function () {//override\r\n            var opt=this.getOptions();\r\n            if (opt.compiler && opt.compiler.namespace) return opt.compiler.namespace;\r\n            throw new Error(\"Namespace is not set\");\r\n        },\r\n        async loadDependingClasses() {\r\n            const myNsp=this.getNamespace();\r\n            for (let p of this.getDependingProjects()) {\r\n                if (p.getNamespace()===myNsp) continue;\r\n                await p.loadClasses();\r\n            }\r\n        },\r\n        getEXT() {return \".tonyu\";}\r\n        // loadClasses: stub\r\n    };\r\n\r\n},{}],6:[function(require,module,exports){\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine(\"source-map\",[], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"sourceMap\"] = factory();\r\n\telse\r\n\t\troot[\"sourceMap\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId])\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\texports: {},\r\n/******/ \t\t\tid: moduleId,\r\n/******/ \t\t\tloaded: false\r\n/******/ \t\t};\r\n\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.loaded = true;\r\n\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n\r\n\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/*\r\n\t* Copyright 2009-2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE.txt or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\texports.SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\texports.SourceMapConsumer = __webpack_require__(7).SourceMapConsumer;\r\n\texports.SourceNode = __webpack_require__(10).SourceNode;\r\n\r\n\r\n/***/ },\r\n/* 1 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar util = __webpack_require__(4);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar MappingList = __webpack_require__(6).MappingList;\r\n\r\n\t/**\r\n\t* An instance of the SourceMapGenerator represents a source map which is\r\n\t* being built incrementally. You may pass an object with the following\r\n\t* properties:\r\n\t*\r\n\t*   - file: The filename of the generated source.\r\n\t*   - sourceRoot: A root for all relative URLs in this source map.\r\n\t*/\r\n\tfunction SourceMapGenerator(aArgs) {\r\n\t\tif (!aArgs) {\r\n\t\taArgs = {};\r\n\t\t}\r\n\t\tthis._file = util.getArg(aArgs, 'file', null);\r\n\t\tthis._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\r\n\t\tthis._skipValidation = util.getArg(aArgs, 'skipValidation', false);\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\t\tthis._mappings = new MappingList();\r\n\t\tthis._sourcesContents = null;\r\n\t}\r\n\r\n\tSourceMapGenerator.prototype._version = 3;\r\n\r\n\t/**\r\n\t* Creates a new SourceMapGenerator based on a SourceMapConsumer\r\n\t*\r\n\t* @param aSourceMapConsumer The SourceMap.\r\n\t*/\r\n\tSourceMapGenerator.fromSourceMap =\r\n\t\tfunction SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\r\n\t\tvar sourceRoot = aSourceMapConsumer.sourceRoot;\r\n\t\tvar generator = new SourceMapGenerator({\r\n\t\t\tfile: aSourceMapConsumer.file,\r\n\t\t\tsourceRoot: sourceRoot\r\n\t\t});\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tvar newMapping = {\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: mapping.generatedLine,\r\n\t\t\t\tcolumn: mapping.generatedColumn\r\n\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tnewMapping.source = mapping.source;\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tnewMapping.source = util.relative(sourceRoot, newMapping.source);\r\n\t\t\t}\r\n\r\n\t\t\tnewMapping.original = {\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnewMapping.name = mapping.name;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgenerator.addMapping(newMapping);\r\n\t\t});\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tgenerator.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn generator;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a single mapping from original source line and column to the generated\r\n\t* source's line and column for this source map being created. The mapping\r\n\t* object should have the following properties:\r\n\t*\r\n\t*   - generated: An object with the generated line and column positions.\r\n\t*   - original: An object with the original line and column positions.\r\n\t*   - source: The original source file (relative to the sourceRoot).\r\n\t*   - name: An optional original token name for this mapping.\r\n\t*/\r\n\tSourceMapGenerator.prototype.addMapping =\r\n\t\tfunction SourceMapGenerator_addMapping(aArgs) {\r\n\t\tvar generated = util.getArg(aArgs, 'generated');\r\n\t\tvar original = util.getArg(aArgs, 'original', null);\r\n\t\tvar source = util.getArg(aArgs, 'source', null);\r\n\t\tvar name = util.getArg(aArgs, 'name', null);\r\n\r\n\t\tif (!this._skipValidation) {\r\n\t\t\tthis._validateMapping(generated, original, source, name);\r\n\t\t}\r\n\r\n\t\tif (source != null) {\r\n\t\t\tsource = String(source);\r\n\t\t\tif (!this._sources.has(source)) {\r\n\t\t\tthis._sources.add(source);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (name != null) {\r\n\t\t\tname = String(name);\r\n\t\t\tif (!this._names.has(name)) {\r\n\t\t\tthis._names.add(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mappings.add({\r\n\t\t\tgeneratedLine: generated.line,\r\n\t\t\tgeneratedColumn: generated.column,\r\n\t\t\toriginalLine: original != null && original.line,\r\n\t\t\toriginalColumn: original != null && original.column,\r\n\t\t\tsource: source,\r\n\t\t\tname: name\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file.\r\n\t*/\r\n\tSourceMapGenerator.prototype.setSourceContent =\r\n\t\tfunction SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tvar source = aSourceFile;\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tsource = util.relative(this._sourceRoot, source);\r\n\t\t}\r\n\r\n\t\tif (aSourceContent != null) {\r\n\t\t\t// Add the source content to the _sourcesContents map.\r\n\t\t\t// Create a new _sourcesContents map if the property is null.\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\tthis._sourcesContents = Object.create(null);\r\n\t\t\t}\r\n\t\t\tthis._sourcesContents[util.toSetString(source)] = aSourceContent;\r\n\t\t} else if (this._sourcesContents) {\r\n\t\t\t// Remove the source file from the _sourcesContents map.\r\n\t\t\t// If the _sourcesContents map is empty, set the property to null.\r\n\t\t\tdelete this._sourcesContents[util.toSetString(source)];\r\n\t\t\tif (Object.keys(this._sourcesContents).length === 0) {\r\n\t\t\tthis._sourcesContents = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Applies the mappings of a sub-source-map for a specific source file to the\r\n\t* source map being generated. Each mapping to the supplied source file is\r\n\t* rewritten using the supplied source map. Note: The resolution for the\r\n\t* resulting mappings is the minimium of this map and the supplied map.\r\n\t*\r\n\t* @param aSourceMapConsumer The source map to be applied.\r\n\t* @param aSourceFile Optional. The filename of the source file.\r\n\t*        If omitted, SourceMapConsumer's file property will be used.\r\n\t* @param aSourceMapPath Optional. The dirname of the path to the source map\r\n\t*        to be applied. If relative, it is relative to the SourceMapConsumer.\r\n\t*        This parameter is needed when the two source maps aren't in the same\r\n\t*        directory, and the source map to be applied contains relative source\r\n\t*        paths. If so, those relative source paths need to be rewritten\r\n\t*        relative to the SourceMapGenerator.\r\n\t*/\r\n\tSourceMapGenerator.prototype.applySourceMap =\r\n\t\tfunction SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\r\n\t\tvar sourceFile = aSourceFile;\r\n\t\t// If aSourceFile is omitted, we will use the file property of the SourceMap\r\n\t\tif (aSourceFile == null) {\r\n\t\t\tif (aSourceMapConsumer.file == null) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\r\n\t\t\t\t'or the source map\\'s \"file\" property. Both were omitted.'\r\n\t\t\t);\r\n\t\t\t}\r\n\t\t\tsourceFile = aSourceMapConsumer.file;\r\n\t\t}\r\n\t\tvar sourceRoot = this._sourceRoot;\r\n\t\t// Make \"sourceFile\" relative if an absolute Url is passed.\r\n\t\tif (sourceRoot != null) {\r\n\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t}\r\n\t\t// Applying the SourceMap can add and remove items from the sources and\r\n\t\t// the names array.\r\n\t\tvar newSources = new ArraySet();\r\n\t\tvar newNames = new ArraySet();\r\n\r\n\t\t// Find mappings for the \"sourceFile\"\r\n\t\tthis._mappings.unsortedForEach(function (mapping) {\r\n\t\t\tif (mapping.source === sourceFile && mapping.originalLine != null) {\r\n\t\t\t// Check if it can be mapped by the source map, then update the mapping.\r\n\t\t\tvar original = aSourceMapConsumer.originalPositionFor({\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t});\r\n\t\t\tif (original.source != null) {\r\n\t\t\t\t// Copy mapping\r\n\t\t\t\tmapping.source = original.source;\r\n\t\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tmapping.source = util.join(aSourceMapPath, mapping.source)\r\n\t\t\t\t}\r\n\t\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tmapping.source = util.relative(sourceRoot, mapping.source);\r\n\t\t\t\t}\r\n\t\t\t\tmapping.originalLine = original.line;\r\n\t\t\t\tmapping.originalColumn = original.column;\r\n\t\t\t\tif (original.name != null) {\r\n\t\t\t\tmapping.name = original.name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar source = mapping.source;\r\n\t\t\tif (source != null && !newSources.has(source)) {\r\n\t\t\tnewSources.add(source);\r\n\t\t\t}\r\n\r\n\t\t\tvar name = mapping.name;\r\n\t\t\tif (name != null && !newNames.has(name)) {\r\n\t\t\tnewNames.add(name);\r\n\t\t\t}\r\n\r\n\t\t}, this);\r\n\t\tthis._sources = newSources;\r\n\t\tthis._names = newNames;\r\n\r\n\t\t// Copy sourcesContents of applied map.\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tsourceFile = util.join(aSourceMapPath, sourceFile);\r\n\t\t\t}\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t\t}\r\n\t\t\tthis.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* A mapping can have one of the three levels of data:\r\n\t*\r\n\t*   1. Just the generated position.\r\n\t*   2. The Generated position, original position, and original source.\r\n\t*   3. Generated and original position, original source, as well as a name\r\n\t*      token.\r\n\t*\r\n\t* To maintain consistency, we validate that any new mapping being added falls\r\n\t* in to one of these categories.\r\n\t*/\r\n\tSourceMapGenerator.prototype._validateMapping =\r\n\t\tfunction SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taName) {\r\n\t\tif (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t&& !aOriginal && !aSource && !aName) {\r\n\t\t\t// Case 1.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t\t&& aOriginal && 'line' in aOriginal && 'column' in aOriginal\r\n\t\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t\t&& aOriginal.line > 0 && aOriginal.column >= 0\r\n\t\t\t\t&& aSource) {\r\n\t\t\t// Cases 2 and 3.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('Invalid mapping: ' + JSON.stringify({\r\n\t\t\tgenerated: aGenerated,\r\n\t\t\tsource: aSource,\r\n\t\t\toriginal: aOriginal,\r\n\t\t\tname: aName\r\n\t\t\t}));\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Serialize the accumulated mappings in to the stream of base 64 VLQs\r\n\t* specified by the source map format.\r\n\t*/\r\n\tSourceMapGenerator.prototype._serializeMappings =\r\n\t\tfunction SourceMapGenerator_serializeMappings() {\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousGeneratedLine = 1;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar result = '';\r\n\t\tvar next;\r\n\t\tvar mapping;\r\n\t\tvar nameIdx;\r\n\t\tvar sourceIdx;\r\n\r\n\t\tvar mappings = this._mappings.toArray();\r\n\t\tfor (var i = 0, len = mappings.length; i < len; i++) {\r\n\t\t\tmapping = mappings[i];\r\n\t\t\tnext = ''\r\n\r\n\t\t\tif (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\twhile (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\t\tnext += ';';\r\n\t\t\t\tpreviousGeneratedLine++;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tif (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tnext += ',';\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.generatedColumn\r\n\t\t\t\t\t\t\t\t\t- previousGeneratedColumn);\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tsourceIdx = this._sources.indexOf(mapping.source);\r\n\t\t\tnext += base64VLQ.encode(sourceIdx - previousSource);\r\n\t\t\tpreviousSource = sourceIdx;\r\n\r\n\t\t\t// lines are stored 0-based in SourceMap spec version 3\r\n\t\t\tnext += base64VLQ.encode(mapping.originalLine - 1\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalLine);\r\n\t\t\tpreviousOriginalLine = mapping.originalLine - 1;\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.originalColumn\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalColumn);\r\n\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnameIdx = this._names.indexOf(mapping.name);\r\n\t\t\t\tnext += base64VLQ.encode(nameIdx - previousName);\r\n\t\t\t\tpreviousName = nameIdx;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult += next;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t\t};\r\n\r\n\tSourceMapGenerator.prototype._generateSourcesContent =\r\n\t\tfunction SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\r\n\t\treturn aSources.map(function (source) {\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (aSourceRoot != null) {\r\n\t\t\tsource = util.relative(aSourceRoot, source);\r\n\t\t\t}\r\n\t\t\tvar key = util.toSetString(source);\r\n\t\t\treturn Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\r\n\t\t\t? this._sourcesContents[key]\r\n\t\t\t: null;\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Externalize the source map.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toJSON =\r\n\t\tfunction SourceMapGenerator_toJSON() {\r\n\t\tvar map = {\r\n\t\t\tversion: this._version,\r\n\t\t\tsources: this._sources.toArray(),\r\n\t\t\tnames: this._names.toArray(),\r\n\t\t\tmappings: this._serializeMappings()\r\n\t\t};\r\n\t\tif (this._file != null) {\r\n\t\t\tmap.file = this._file;\r\n\t\t}\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tmap.sourceRoot = this._sourceRoot;\r\n\t\t}\r\n\t\tif (this._sourcesContents) {\r\n\t\t\tmap.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Render the source map being generated to a string.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toString =\r\n\t\tfunction SourceMapGenerator_toString() {\r\n\t\treturn JSON.stringify(this.toJSON());\r\n\t\t};\r\n\r\n\texports.SourceMapGenerator = SourceMapGenerator;\r\n\r\n\r\n/***/ },\r\n/* 2 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*\r\n\t* Based on the Base 64 VLQ implementation in Closure Compiler:\r\n\t* https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\r\n\t*\r\n\t* Copyright 2011 The Closure Compiler Authors. All rights reserved.\r\n\t* Redistribution and use in source and binary forms, with or without\r\n\t* modification, are permitted provided that the following conditions are\r\n\t* met:\r\n\t*\r\n\t*  * Redistributions of source code must retain the above copyright\r\n\t*    notice, this list of conditions and the following disclaimer.\r\n\t*  * Redistributions in binary form must reproduce the above\r\n\t*    copyright notice, this list of conditions and the following\r\n\t*    disclaimer in the documentation and/or other materials provided\r\n\t*    with the distribution.\r\n\t*  * Neither the name of Google Inc. nor the names of its\r\n\t*    contributors may be used to endorse or promote products derived\r\n\t*    from this software without specific prior written permission.\r\n\t*\r\n\t* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n\t* \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n\t* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n\t* A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n\t* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n\t* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n\t* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n\t* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n\t* THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n\t* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n\t* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t*/\r\n\r\n\tvar base64 = __webpack_require__(3);\r\n\r\n\t// A single base 64 digit can contain 6 bits of data. For the base 64 variable\r\n\t// length quantities we use in the source map spec, the first bit is the sign,\r\n\t// the next four bits are the actual value, and the 6th bit is the\r\n\t// continuation bit. The continuation bit tells us whether there are more\r\n\t// digits in this value following this digit.\r\n\t//\r\n\t//   Continuation\r\n\t//   |    Sign\r\n\t//   |    |\r\n\t//   V    V\r\n\t//   101011\r\n\r\n\tvar VLQ_BASE_SHIFT = 5;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\r\n\r\n\t// binary: 011111\r\n\tvar VLQ_BASE_MASK = VLQ_BASE - 1;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_CONTINUATION_BIT = VLQ_BASE;\r\n\r\n\t/**\r\n\t* Converts from a two-complement value to a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\r\n\t*   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\r\n\t*/\r\n\tfunction toVLQSigned(aValue) {\r\n\t\treturn aValue < 0\r\n\t\t? ((-aValue) << 1) + 1\r\n\t\t: (aValue << 1) + 0;\r\n\t}\r\n\r\n\t/**\r\n\t* Converts to a two-complement value from a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\r\n\t*   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\r\n\t*/\r\n\tfunction fromVLQSigned(aValue) {\r\n\t\tvar isNegative = (aValue & 1) === 1;\r\n\t\tvar shifted = aValue >> 1;\r\n\t\treturn isNegative\r\n\t\t? -shifted\r\n\t\t: shifted;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the base 64 VLQ encoded value.\r\n\t*/\r\n\texports.encode = function base64VLQ_encode(aValue) {\r\n\t\tvar encoded = \"\";\r\n\t\tvar digit;\r\n\r\n\t\tvar vlq = toVLQSigned(aValue);\r\n\r\n\t\tdo {\r\n\t\tdigit = vlq & VLQ_BASE_MASK;\r\n\t\tvlq >>>= VLQ_BASE_SHIFT;\r\n\t\tif (vlq > 0) {\r\n\t\t\t// There are still more digits in this value, so we must make sure the\r\n\t\t\t// continuation bit is marked.\r\n\t\t\tdigit |= VLQ_CONTINUATION_BIT;\r\n\t\t}\r\n\t\tencoded += base64.encode(digit);\r\n\t\t} while (vlq > 0);\r\n\r\n\t\treturn encoded;\r\n\t};\r\n\r\n\t/**\r\n\t* Decodes the next base 64 VLQ value from the given string and returns the\r\n\t* value and the rest of the string via the out parameter.\r\n\t*/\r\n\texports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\r\n\t\tvar strLen = aStr.length;\r\n\t\tvar result = 0;\r\n\t\tvar shift = 0;\r\n\t\tvar continuation, digit;\r\n\r\n\t\tdo {\r\n\t\tif (aIndex >= strLen) {\r\n\t\t\tthrow new Error(\"Expected more digits in base 64 VLQ value.\");\r\n\t\t}\r\n\r\n\t\tdigit = base64.decode(aStr.charCodeAt(aIndex++));\r\n\t\tif (digit === -1) {\r\n\t\t\tthrow new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\r\n\t\t}\r\n\r\n\t\tcontinuation = !!(digit & VLQ_CONTINUATION_BIT);\r\n\t\tdigit &= VLQ_BASE_MASK;\r\n\t\tresult = result + (digit << shift);\r\n\t\tshift += VLQ_BASE_SHIFT;\r\n\t\t} while (continuation);\r\n\r\n\t\taOutParam.value = fromVLQSigned(result);\r\n\t\taOutParam.rest = aIndex;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 3 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\r\n\r\n\t/**\r\n\t* Encode an integer in the range of 0 to 63 to a single base 64 digit.\r\n\t*/\r\n\texports.encode = function (number) {\r\n\t\tif (0 <= number && number < intToCharMap.length) {\r\n\t\treturn intToCharMap[number];\r\n\t\t}\r\n\t\tthrow new TypeError(\"Must be between 0 and 63: \" + number);\r\n\t};\r\n\r\n\t/**\r\n\t* Decode a single base 64 character code digit to an integer. Returns -1 on\r\n\t* failure.\r\n\t*/\r\n\texports.decode = function (charCode) {\r\n\t\tvar bigA = 65;     // 'A'\r\n\t\tvar bigZ = 90;     // 'Z'\r\n\r\n\t\tvar littleA = 97;  // 'a'\r\n\t\tvar littleZ = 122; // 'z'\r\n\r\n\t\tvar zero = 48;     // '0'\r\n\t\tvar nine = 57;     // '9'\r\n\r\n\t\tvar plus = 43;     // '+'\r\n\t\tvar slash = 47;    // '/'\r\n\r\n\t\tvar littleOffset = 26;\r\n\t\tvar numberOffset = 52;\r\n\r\n\t\t// 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\r\n\t\tif (bigA <= charCode && charCode <= bigZ) {\r\n\t\treturn (charCode - bigA);\r\n\t\t}\r\n\r\n\t\t// 26 - 51: abcdefghijklmnopqrstuvwxyz\r\n\t\tif (littleA <= charCode && charCode <= littleZ) {\r\n\t\treturn (charCode - littleA + littleOffset);\r\n\t\t}\r\n\r\n\t\t// 52 - 61: 0123456789\r\n\t\tif (zero <= charCode && charCode <= nine) {\r\n\t\treturn (charCode - zero + numberOffset);\r\n\t\t}\r\n\r\n\t\t// 62: +\r\n\t\tif (charCode == plus) {\r\n\t\treturn 62;\r\n\t\t}\r\n\r\n\t\t// 63: /\r\n\t\tif (charCode == slash) {\r\n\t\treturn 63;\r\n\t\t}\r\n\r\n\t\t// Invalid base64 digit.\r\n\t\treturn -1;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 4 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t/**\r\n\t* This is a helper function for getting values from parameter/options\r\n\t* objects.\r\n\t*\r\n\t* @param args The object we are extracting values from\r\n\t* @param name The name of the property we are getting.\r\n\t* @param defaultValue An optional value to return if the property is missing\r\n\t* from the object. If this is not specified and the property is missing, an\r\n\t* error will be thrown.\r\n\t*/\r\n\tfunction getArg(aArgs, aName, aDefaultValue) {\r\n\t\tif (aName in aArgs) {\r\n\t\treturn aArgs[aName];\r\n\t\t} else if (arguments.length === 3) {\r\n\t\treturn aDefaultValue;\r\n\t\t} else {\r\n\t\tthrow new Error('\"' + aName + '\" is a required argument.');\r\n\t\t}\r\n\t}\r\n\texports.getArg = getArg;\r\n\r\n\tvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\r\n\tvar dataUrlRegexp = /^data:.+\\,.+$/;\r\n\r\n\tfunction urlParse(aUrl) {\r\n\t\tvar match = aUrl.match(urlRegexp);\r\n\t\tif (!match) {\r\n\t\treturn null;\r\n\t\t}\r\n\t\treturn {\r\n\t\tscheme: match[1],\r\n\t\tauth: match[2],\r\n\t\thost: match[3],\r\n\t\tport: match[4],\r\n\t\tpath: match[5]\r\n\t\t};\r\n\t}\r\n\texports.urlParse = urlParse;\r\n\r\n\tfunction urlGenerate(aParsedUrl) {\r\n\t\tvar url = '';\r\n\t\tif (aParsedUrl.scheme) {\r\n\t\turl += aParsedUrl.scheme + ':';\r\n\t\t}\r\n\t\turl += '//';\r\n\t\tif (aParsedUrl.auth) {\r\n\t\turl += aParsedUrl.auth + '@';\r\n\t\t}\r\n\t\tif (aParsedUrl.host) {\r\n\t\turl += aParsedUrl.host;\r\n\t\t}\r\n\t\tif (aParsedUrl.port) {\r\n\t\turl += \":\" + aParsedUrl.port\r\n\t\t}\r\n\t\tif (aParsedUrl.path) {\r\n\t\turl += aParsedUrl.path;\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\texports.urlGenerate = urlGenerate;\r\n\r\n\t/**\r\n\t* Normalizes a path, or the path portion of a URL:\r\n\t*\r\n\t* - Replaces consequtive slashes with one slash.\r\n\t* - Removes unnecessary '.' parts.\r\n\t* - Removes unnecessary '<dir>/..' parts.\r\n\t*\r\n\t* Based on code in the Node.js 'path' core module.\r\n\t*\r\n\t* @param aPath The path or url to normalize.\r\n\t*/\r\n\tfunction normalize(aPath) {\r\n\t\tvar path = aPath;\r\n\t\tvar url = urlParse(aPath);\r\n\t\tif (url) {\r\n\t\tif (!url.path) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\t\tpath = url.path;\r\n\t\t}\r\n\t\tvar isAbsolute = exports.isAbsolute(path);\r\n\r\n\t\tvar parts = path.split(/\\/+/);\r\n\t\tfor (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\r\n\t\tpart = parts[i];\r\n\t\tif (part === '.') {\r\n\t\t\tparts.splice(i, 1);\r\n\t\t} else if (part === '..') {\r\n\t\t\tup++;\r\n\t\t} else if (up > 0) {\r\n\t\t\tif (part === '') {\r\n\t\t\t// The first part is blank if the path is absolute. Trying to go\r\n\t\t\t// above the root is a no-op. Therefore we can remove all '..' parts\r\n\t\t\t// directly after the root.\r\n\t\t\tparts.splice(i + 1, up);\r\n\t\t\tup = 0;\r\n\t\t\t} else {\r\n\t\t\tparts.splice(i, 2);\r\n\t\t\tup--;\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t\tpath = parts.join('/');\r\n\r\n\t\tif (path === '') {\r\n\t\tpath = isAbsolute ? '/' : '.';\r\n\t\t}\r\n\r\n\t\tif (url) {\r\n\t\turl.path = path;\r\n\t\treturn urlGenerate(url);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\texports.normalize = normalize;\r\n\r\n\t/**\r\n\t* Joins two paths/URLs.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be joined with the root.\r\n\t*\r\n\t* - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\r\n\t*   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\r\n\t*   first.\r\n\t* - Otherwise aPath is a path. If aRoot is a URL, then its path portion\r\n\t*   is updated with the result and aRoot is returned. Otherwise the result\r\n\t*   is returned.\r\n\t*   - If aPath is absolute, the result is aPath.\r\n\t*   - Otherwise the two paths are joined with a slash.\r\n\t* - Joining for example 'http://' and 'www.example.com' is also supported.\r\n\t*/\r\n\tfunction join(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\t\tif (aPath === \"\") {\r\n\t\taPath = \".\";\r\n\t\t}\r\n\t\tvar aPathUrl = urlParse(aPath);\r\n\t\tvar aRootUrl = urlParse(aRoot);\r\n\t\tif (aRootUrl) {\r\n\t\taRoot = aRootUrl.path || '/';\r\n\t\t}\r\n\r\n\t\t// `join(foo, '//www.example.org')`\r\n\t\tif (aPathUrl && !aPathUrl.scheme) {\r\n\t\tif (aRootUrl) {\r\n\t\t\taPathUrl.scheme = aRootUrl.scheme;\r\n\t\t}\r\n\t\treturn urlGenerate(aPathUrl);\r\n\t\t}\r\n\r\n\t\tif (aPathUrl || aPath.match(dataUrlRegexp)) {\r\n\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// `join('http://', 'www.example.com')`\r\n\t\tif (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\r\n\t\taRootUrl.host = aPath;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\r\n\t\tvar joined = aPath.charAt(0) === '/'\r\n\t\t? aPath\r\n\t\t: normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\r\n\r\n\t\tif (aRootUrl) {\r\n\t\taRootUrl.path = joined;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\t\treturn joined;\r\n\t}\r\n\texports.join = join;\r\n\r\n\texports.isAbsolute = function (aPath) {\r\n\t\treturn aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\r\n\t};\r\n\r\n\t/**\r\n\t* Make a path relative to a URL or another path.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be made relative to aRoot.\r\n\t*/\r\n\tfunction relative(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\r\n\t\taRoot = aRoot.replace(/\\/$/, '');\r\n\r\n\t\t// It is possible for the path to be above the root. In this case, simply\r\n\t\t// checking whether the root is a prefix of the path won't work. Instead, we\r\n\t\t// need to remove components from the root one by one, until either we find\r\n\t\t// a prefix that fits, or we run out of components to remove.\r\n\t\tvar level = 0;\r\n\t\twhile (aPath.indexOf(aRoot + '/') !== 0) {\r\n\t\tvar index = aRoot.lastIndexOf(\"/\");\r\n\t\tif (index < 0) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// If the only part of the root that is left is the scheme (i.e. http://,\r\n\t\t// file:///, etc.), one or more slashes (/), or simply nothing at all, we\r\n\t\t// have exhausted all components, so the path is not relative to the root.\r\n\t\taRoot = aRoot.slice(0, index);\r\n\t\tif (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t++level;\r\n\t\t}\r\n\r\n\t\t// Make sure we add a \"../\" for each component we removed from the root.\r\n\t\treturn Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\r\n\t}\r\n\texports.relative = relative;\r\n\r\n\tvar supportsNullProto = (function () {\r\n\t\tvar obj = Object.create(null);\r\n\t\treturn !('__proto__' in obj);\r\n\t}());\r\n\r\n\tfunction identity (s) {\r\n\t\treturn s;\r\n\t}\r\n\r\n\t/**\r\n\t* Because behavior goes wacky when you set `__proto__` on objects, we\r\n\t* have to prefix all the strings in our set with an arbitrary character.\r\n\t*\r\n\t* See https://github.com/mozilla/source-map/pull/31 and\r\n\t* https://github.com/mozilla/source-map/issues/30\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tfunction toSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn '$' + aStr;\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.toSetString = supportsNullProto ? identity : toSetString;\r\n\r\n\tfunction fromSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn aStr.slice(1);\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.fromSetString = supportsNullProto ? identity : fromSetString;\r\n\r\n\tfunction isProtoString(s) {\r\n\t\tif (!s) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar length = s.length;\r\n\r\n\t\tif (length < 9 /* \"__proto__\".length */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 2) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 3) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 4) !== 116 /* 't' */ ||\r\n\t\t\ts.charCodeAt(length - 5) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 6) !== 114 /* 'r' */ ||\r\n\t\t\ts.charCodeAt(length - 7) !== 112 /* 'p' */ ||\r\n\t\t\ts.charCodeAt(length - 8) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 9) !== 95  /* '_' */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor (var i = length - 10; i >= 0; i--) {\r\n\t\tif (s.charCodeAt(i) !== 36 /* '$' */) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings where the original positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same original source/line/column, but different generated\r\n\t* line and column the same. Useful when searching for a mapping with a\r\n\t* stubbed out mapping.\r\n\t*/\r\n\tfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\r\n\t\tvar cmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0 || onlyCompareOriginal) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByOriginalPositions = compareByOriginalPositions;\r\n\r\n\t/**\r\n\t* Comparator between two mappings with deflated source and name indices where\r\n\t* the generated positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same generated line and column, but different\r\n\t* source/name/original line and column the same. Useful when searching for a\r\n\t* mapping with a stubbed out mapping.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0 || onlyCompareGenerated) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\r\n\r\n\tfunction strcmp(aStr1, aStr2) {\r\n\t\tif (aStr1 === aStr2) {\r\n\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif (aStr1 > aStr2) {\r\n\t\treturn 1;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings with inflated source and name strings where\r\n\t* the generated positions are compared.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = strcmp(mappingA.source, mappingB.source);\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn strcmp(mappingA.name, mappingB.name);\r\n\t}\r\n\texports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\r\n\r\n\r\n/***/ },\r\n/* 5 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar has = Object.prototype.hasOwnProperty;\r\n\r\n\t/**\r\n\t* A data structure which is a combination of an array and a set. Adding a new\r\n\t* member is O(1), testing for membership is O(1), and finding the index of an\r\n\t* element is O(1). Removing elements from the set is not supported. Only\r\n\t* strings are supported for membership.\r\n\t*/\r\n\tfunction ArraySet() {\r\n\t\tthis._array = [];\r\n\t\tthis._set = Object.create(null);\r\n\t}\r\n\r\n\t/**\r\n\t* Static method for creating ArraySet instances from an existing array.\r\n\t*/\r\n\tArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\r\n\t\tvar set = new ArraySet();\r\n\t\tfor (var i = 0, len = aArray.length; i < len; i++) {\r\n\t\tset.add(aArray[i], aAllowDuplicates);\r\n\t\t}\r\n\t\treturn set;\r\n\t};\r\n\r\n\t/**\r\n\t* Return how many unique items are in this ArraySet. If duplicates have been\r\n\t* added, than those do not count towards the size.\r\n\t*\r\n\t* @returns Number\r\n\t*/\r\n\tArraySet.prototype.size = function ArraySet_size() {\r\n\t\treturn Object.getOwnPropertyNames(this._set).length;\r\n\t};\r\n\r\n\t/**\r\n\t* Add the given string to this set.\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tvar isDuplicate = has.call(this._set, sStr);\r\n\t\tvar idx = this._array.length;\r\n\t\tif (!isDuplicate || aAllowDuplicates) {\r\n\t\tthis._array.push(aStr);\r\n\t\t}\r\n\t\tif (!isDuplicate) {\r\n\t\tthis._set[sStr] = idx;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Is the given string a member of this set?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.has = function ArraySet_has(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\treturn has.call(this._set, sStr);\r\n\t};\r\n\r\n\t/**\r\n\t* What is the index of the given string in the array?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tif (has.call(this._set, sStr)) {\r\n\t\treturn this._set[sStr];\r\n\t\t}\r\n\t\tthrow new Error('\"' + aStr + '\" is not in the set.');\r\n\t};\r\n\r\n\t/**\r\n\t* What is the element at the given index?\r\n\t*\r\n\t* @param Number aIdx\r\n\t*/\r\n\tArraySet.prototype.at = function ArraySet_at(aIdx) {\r\n\t\tif (aIdx >= 0 && aIdx < this._array.length) {\r\n\t\treturn this._array[aIdx];\r\n\t\t}\r\n\t\tthrow new Error('No element indexed by ' + aIdx);\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the array representation of this set (which has the proper indices\r\n\t* indicated by indexOf). Note that this is a copy of the internal array used\r\n\t* for storing the members so that no one can mess with internal state.\r\n\t*/\r\n\tArraySet.prototype.toArray = function ArraySet_toArray() {\r\n\t\treturn this._array.slice();\r\n\t};\r\n\r\n\texports.ArraySet = ArraySet;\r\n\r\n\r\n/***/ },\r\n/* 6 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2014 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t/**\r\n\t* Determine whether mappingB is after mappingA with respect to generated\r\n\t* position.\r\n\t*/\r\n\tfunction generatedPositionAfter(mappingA, mappingB) {\r\n\t\t// Optimized for most common case\r\n\t\tvar lineA = mappingA.generatedLine;\r\n\t\tvar lineB = mappingB.generatedLine;\r\n\t\tvar columnA = mappingA.generatedColumn;\r\n\t\tvar columnB = mappingB.generatedColumn;\r\n\t\treturn lineB > lineA || lineB == lineA && columnB >= columnA ||\r\n\t\t\tutil.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\r\n\t}\r\n\r\n\t/**\r\n\t* A data structure to provide a sorted view of accumulated mappings in a\r\n\t* performance conscious manner. It trades a neglibable overhead in general\r\n\t* case for a large speedup in case of mappings being added in order.\r\n\t*/\r\n\tfunction MappingList() {\r\n\t\tthis._array = [];\r\n\t\tthis._sorted = true;\r\n\t\t// Serves as infimum\r\n\t\tthis._last = {generatedLine: -1, generatedColumn: 0};\r\n\t}\r\n\r\n\t/**\r\n\t* Iterate through internal items. This method takes the same arguments that\r\n\t* `Array.prototype.forEach` takes.\r\n\t*\r\n\t* NOTE: The order of the mappings is NOT guaranteed.\r\n\t*/\r\n\tMappingList.prototype.unsortedForEach =\r\n\t\tfunction MappingList_forEach(aCallback, aThisArg) {\r\n\t\tthis._array.forEach(aCallback, aThisArg);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add the given source mapping.\r\n\t*\r\n\t* @param Object aMapping\r\n\t*/\r\n\tMappingList.prototype.add = function MappingList_add(aMapping) {\r\n\t\tif (generatedPositionAfter(this._last, aMapping)) {\r\n\t\tthis._last = aMapping;\r\n\t\tthis._array.push(aMapping);\r\n\t\t} else {\r\n\t\tthis._sorted = false;\r\n\t\tthis._array.push(aMapping);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the flat, sorted array of mappings. The mappings are sorted by\r\n\t* generated position.\r\n\t*\r\n\t* WARNING: This method returns internal data without copying, for\r\n\t* performance. The return value must NOT be mutated, and should be treated as\r\n\t* an immutable borrow. If you want to take ownership, you must make your own\r\n\t* copy.\r\n\t*/\r\n\tMappingList.prototype.toArray = function MappingList_toArray() {\r\n\t\tif (!this._sorted) {\r\n\t\tthis._array.sort(util.compareByGeneratedPositionsInflated);\r\n\t\tthis._sorted = true;\r\n\t\t}\r\n\t\treturn this._array;\r\n\t};\r\n\r\n\texports.MappingList = MappingList;\r\n\r\n\r\n/***/ },\r\n/* 7 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar binarySearch = __webpack_require__(8);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar quickSort = __webpack_require__(9).quickSort;\r\n\r\n\tfunction SourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\treturn sourceMap.sections != null\r\n\t\t? new IndexedSourceMapConsumer(sourceMap)\r\n\t\t: new BasicSourceMapConsumer(sourceMap);\r\n\t}\r\n\r\n\tSourceMapConsumer.fromSourceMap = function(aSourceMap) {\r\n\t\treturn BasicSourceMapConsumer.fromSourceMap(aSourceMap);\r\n\t}\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tSourceMapConsumer.prototype._version = 3;\r\n\r\n\t// `__generatedMappings` and `__originalMappings` are arrays that hold the\r\n\t// parsed mapping coordinates from the source map's \"mappings\" attribute. They\r\n\t// are lazily instantiated, accessed via the `_generatedMappings` and\r\n\t// `_originalMappings` getters respectively, and we only parse the mappings\r\n\t// and create these arrays once queried for a source location. We jump through\r\n\t// these hoops because there can be many thousands of mappings, and parsing\r\n\t// them is expensive, so we only want to do it if we must.\r\n\t//\r\n\t// Each object in the arrays is of the form:\r\n\t//\r\n\t//     {\r\n\t//       generatedLine: The line number in the generated code,\r\n\t//       generatedColumn: The column number in the generated code,\r\n\t//       source: The path to the original source file that generated this\r\n\t//               chunk of code,\r\n\t//       originalLine: The line number in the original source that\r\n\t//                     corresponds to this chunk of generated code,\r\n\t//       originalColumn: The column number in the original source that\r\n\t//                       corresponds to this chunk of generated code,\r\n\t//       name: The name of the original symbol which generated this chunk of\r\n\t//             code.\r\n\t//     }\r\n\t//\r\n\t// All properties except for `generatedLine` and `generatedColumn` can be\r\n\t// `null`.\r\n\t//\r\n\t// `_generatedMappings` is ordered by the generated positions.\r\n\t//\r\n\t// `_originalMappings` is ordered by the original positions.\r\n\r\n\tSourceMapConsumer.prototype.__generatedMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__generatedMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__generatedMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype.__originalMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__originalMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__originalMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype._charIsMappingSeparator =\r\n\t\tfunction SourceMapConsumer_charIsMappingSeparator(aStr, index) {\r\n\t\tvar c = aStr.charAt(index);\r\n\t\treturn c === \";\" || c === \",\";\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthrow new Error(\"Subclasses must implement _parseMappings\");\r\n\t\t};\r\n\r\n\tSourceMapConsumer.GENERATED_ORDER = 1;\r\n\tSourceMapConsumer.ORIGINAL_ORDER = 2;\r\n\r\n\tSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\r\n\tSourceMapConsumer.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Iterate over each mapping between an original source/line/column and a\r\n\t* generated line/column in this source map.\r\n\t*\r\n\t* @param Function aCallback\r\n\t*        The function that is called with each mapping.\r\n\t* @param Object aContext\r\n\t*        Optional. If specified, this object will be the value of `this` every\r\n\t*        time that `aCallback` is called.\r\n\t* @param aOrder\r\n\t*        Either `SourceMapConsumer.GENERATED_ORDER` or\r\n\t*        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\r\n\t*        iterate over the mappings sorted by the generated file's line/column\r\n\t*        order or the original's source/line/column order, respectively. Defaults to\r\n\t*        `SourceMapConsumer.GENERATED_ORDER`.\r\n\t*/\r\n\tSourceMapConsumer.prototype.eachMapping =\r\n\t\tfunction SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\r\n\t\tvar context = aContext || null;\r\n\t\tvar order = aOrder || SourceMapConsumer.GENERATED_ORDER;\r\n\r\n\t\tvar mappings;\r\n\t\tswitch (order) {\r\n\t\tcase SourceMapConsumer.GENERATED_ORDER:\r\n\t\t\tmappings = this._generatedMappings;\r\n\t\t\tbreak;\r\n\t\tcase SourceMapConsumer.ORIGINAL_ORDER:\r\n\t\t\tmappings = this._originalMappings;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(\"Unknown order of iteration.\");\r\n\t\t}\r\n\r\n\t\tvar sourceRoot = this.sourceRoot;\r\n\t\tmappings.map(function (mapping) {\r\n\t\t\tvar source = mapping.source === null ? null : this._sources.at(mapping.source);\r\n\t\t\tif (source != null && sourceRoot != null) {\r\n\t\t\tsource = util.join(sourceRoot, source);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\tsource: source,\r\n\t\t\tgeneratedLine: mapping.generatedLine,\r\n\t\t\tgeneratedColumn: mapping.generatedColumn,\r\n\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\tname: mapping.name === null ? null : this._names.at(mapping.name)\r\n\t\t\t};\r\n\t\t}, this).forEach(aCallback, context);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns all generated line and column information for the original source,\r\n\t* line, and column provided. If no column is provided, returns all mappings\r\n\t* corresponding to a either the line we are searching for or the next\r\n\t* closest line that has any mappings. Otherwise, returns all mappings\r\n\t* corresponding to the given line and either the column we are searching for\r\n\t* or the next closest column that has any offsets.\r\n\t*\r\n\t* The only argument is an object with the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: Optional. the column number in the original source.\r\n\t*\r\n\t* and an array of objects is returned, each with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tSourceMapConsumer.prototype.allGeneratedPositionsFor =\r\n\t\tfunction SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\r\n\t\tvar line = util.getArg(aArgs, 'line');\r\n\r\n\t\t// When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\r\n\t\t// returns the index of the closest mapping less than the needle. By\r\n\t\t// setting needle.originalColumn to 0, we thus find the last mapping for\r\n\t\t// the given line, provided such a mapping exists.\r\n\t\tvar needle = {\r\n\t\t\tsource: util.getArg(aArgs, 'source'),\r\n\t\t\toriginalLine: line,\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column', 0)\r\n\t\t};\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tneedle.source = util.relative(this.sourceRoot, needle.source);\r\n\t\t}\r\n\t\tif (!this._sources.has(needle.source)) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tneedle.source = this._sources.indexOf(needle.source);\r\n\r\n\t\tvar mappings = [];\r\n\r\n\t\tvar index = this._findMapping(needle,\r\n\t\t\t\t\t\t\t\t\t\tthis._originalMappings,\r\n\t\t\t\t\t\t\t\t\t\t\"originalLine\",\r\n\t\t\t\t\t\t\t\t\t\t\"originalColumn\",\r\n\t\t\t\t\t\t\t\t\t\tutil.compareByOriginalPositions,\r\n\t\t\t\t\t\t\t\t\t\tbinarySearch.LEAST_UPPER_BOUND);\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (aArgs.column === undefined) {\r\n\t\t\tvar originalLine = mapping.originalLine;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we found. Since\r\n\t\t\t// mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we found.\r\n\t\t\twhile (mapping && mapping.originalLine === originalLine) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tvar originalColumn = mapping.originalColumn;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we were searching for.\r\n\t\t\t// Since mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we are searching for.\r\n\t\t\twhile (mapping &&\r\n\t\t\t\t\tmapping.originalLine === line &&\r\n\t\t\t\t\tmapping.originalColumn == originalColumn) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mappings;\r\n\t\t};\r\n\r\n\texports.SourceMapConsumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* A BasicSourceMapConsumer instance represents a parsed source map which we can\r\n\t* query for information about the original file positions by giving it a file\r\n\t* position in the generated source.\r\n\t*\r\n\t* The only parameter is the raw source map (either as a JSON string, or\r\n\t* already parsed to an object). According to the spec, source maps have the\r\n\t* following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - sources: An array of URLs to the original source files.\r\n\t*   - names: An array of identifiers which can be referrenced by individual mappings.\r\n\t*   - sourceRoot: Optional. The URL root from which all sources are relative.\r\n\t*   - sourcesContent: Optional. An array of contents of the original source files.\r\n\t*   - mappings: A string of base64 VLQs which contain the actual mappings.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*\r\n\t* Here is an example source map, taken from the source map spec[0]:\r\n\t*\r\n\t*     {\r\n\t*       version : 3,\r\n\t*       file: \"out.js\",\r\n\t*       sourceRoot : \"\",\r\n\t*       sources: [\"foo.js\", \"bar.js\"],\r\n\t*       names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*       mappings: \"AA,AB;;ABCDE;\"\r\n\t*     }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\r\n\t*/\r\n\tfunction BasicSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sources = util.getArg(sourceMap, 'sources');\r\n\t\t// Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\r\n\t\t// requires the array) to play nice here.\r\n\t\tvar names = util.getArg(sourceMap, 'names', []);\r\n\t\tvar sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\r\n\t\tvar sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\r\n\t\tvar mappings = util.getArg(sourceMap, 'mappings');\r\n\t\tvar file = util.getArg(sourceMap, 'file', null);\r\n\r\n\t\t// Once again, Sass deviates from the spec and supplies the version as a\r\n\t\t// string rather than a number, so we use loose equality checking here.\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tsources = sources\r\n\t\t.map(String)\r\n\t\t// Some source maps produce relative source paths like \"./foo.js\" instead of\r\n\t\t// \"foo.js\".  Normalize these first so that future comparisons will succeed.\r\n\t\t// See bugzil.la/1090768.\r\n\t\t.map(util.normalize)\r\n\t\t// Always ensure that absolute sources are internally stored relative to\r\n\t\t// the source root, if the source root is absolute. Not doing this would\r\n\t\t// be particularly problematic when the source root is a prefix of the\r\n\t\t// source (valid, but why??). See github issue #199 and bugzil.la/1188982.\r\n\t\t.map(function (source) {\r\n\t\t\treturn sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\r\n\t\t\t? util.relative(sourceRoot, source)\r\n\t\t\t: source;\r\n\t\t});\r\n\r\n\t\t// Pass `true` below to allow duplicate names and sources. While source maps\r\n\t\t// are intended to be compressed and deduplicated, the TypeScript compiler\r\n\t\t// sometimes generates source maps with duplicates in them. See Github issue\r\n\t\t// #72 and bugzil.la/889492.\r\n\t\tthis._names = ArraySet.fromArray(names.map(String), true);\r\n\t\tthis._sources = ArraySet.fromArray(sources, true);\r\n\r\n\t\tthis.sourceRoot = sourceRoot;\r\n\t\tthis.sourcesContent = sourcesContent;\r\n\t\tthis._mappings = mappings;\r\n\t\tthis.file = file;\r\n\t}\r\n\r\n\tBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* Create a BasicSourceMapConsumer from a SourceMapGenerator.\r\n\t*\r\n\t* @param SourceMapGenerator aSourceMap\r\n\t*        The source map that will be consumed.\r\n\t* @returns BasicSourceMapConsumer\r\n\t*/\r\n\tBasicSourceMapConsumer.fromSourceMap =\r\n\t\tfunction SourceMapConsumer_fromSourceMap(aSourceMap) {\r\n\t\tvar smc = Object.create(BasicSourceMapConsumer.prototype);\r\n\r\n\t\tvar names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\r\n\t\tvar sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\r\n\t\tsmc.sourceRoot = aSourceMap._sourceRoot;\r\n\t\tsmc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmc.sourceRoot);\r\n\t\tsmc.file = aSourceMap._file;\r\n\r\n\t\t// Because we are modifying the entries (by converting string sources and\r\n\t\t// names to indices into the sources and names ArraySets), we have to make\r\n\t\t// a copy of the entry or else bad things happen. Shared mutable state\r\n\t\t// strikes again! See github issue #191.\r\n\r\n\t\tvar generatedMappings = aSourceMap._mappings.toArray().slice();\r\n\t\tvar destGeneratedMappings = smc.__generatedMappings = [];\r\n\t\tvar destOriginalMappings = smc.__originalMappings = [];\r\n\r\n\t\tfor (var i = 0, length = generatedMappings.length; i < length; i++) {\r\n\t\t\tvar srcMapping = generatedMappings[i];\r\n\t\t\tvar destMapping = new Mapping;\r\n\t\t\tdestMapping.generatedLine = srcMapping.generatedLine;\r\n\t\t\tdestMapping.generatedColumn = srcMapping.generatedColumn;\r\n\r\n\t\t\tif (srcMapping.source) {\r\n\t\t\tdestMapping.source = sources.indexOf(srcMapping.source);\r\n\t\t\tdestMapping.originalLine = srcMapping.originalLine;\r\n\t\t\tdestMapping.originalColumn = srcMapping.originalColumn;\r\n\r\n\t\t\tif (srcMapping.name) {\r\n\t\t\t\tdestMapping.name = names.indexOf(srcMapping.name);\r\n\t\t\t}\r\n\r\n\t\t\tdestOriginalMappings.push(destMapping);\r\n\t\t\t}\r\n\r\n\t\t\tdestGeneratedMappings.push(destMapping);\r\n\t\t}\r\n\r\n\t\tquickSort(smc.__originalMappings, util.compareByOriginalPositions);\r\n\r\n\t\treturn smc;\r\n\t\t};\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\treturn this._sources.toArray().map(function (s) {\r\n\t\t\treturn this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\r\n\t\t}, this);\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Provide the JIT with a nice shape / hidden class.\r\n\t*/\r\n\tfunction Mapping() {\r\n\t\tthis.generatedLine = 0;\r\n\t\tthis.generatedColumn = 0;\r\n\t\tthis.source = null;\r\n\t\tthis.originalLine = null;\r\n\t\tthis.originalColumn = null;\r\n\t\tthis.name = null;\r\n\t}\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tvar generatedLine = 1;\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar length = aStr.length;\r\n\t\tvar index = 0;\r\n\t\tvar cachedSegments = {};\r\n\t\tvar temp = {};\r\n\t\tvar originalMappings = [];\r\n\t\tvar generatedMappings = [];\r\n\t\tvar mapping, str, segment, end, value;\r\n\r\n\t\twhile (index < length) {\r\n\t\t\tif (aStr.charAt(index) === ';') {\r\n\t\t\tgeneratedLine++;\r\n\t\t\tindex++;\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\t}\r\n\t\t\telse if (aStr.charAt(index) === ',') {\r\n\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tmapping = new Mapping();\r\n\t\t\tmapping.generatedLine = generatedLine;\r\n\r\n\t\t\t// Because each offset is encoded relative to the previous one,\r\n\t\t\t// many segments often have the same encoding. We can exploit this\r\n\t\t\t// fact by caching the parsed variable length fields of each segment,\r\n\t\t\t// allowing us to avoid a second parse if we encounter the same\r\n\t\t\t// segment again.\r\n\t\t\tfor (end = index; end < length; end++) {\r\n\t\t\t\tif (this._charIsMappingSeparator(aStr, end)) {\r\n\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstr = aStr.slice(index, end);\r\n\r\n\t\t\tsegment = cachedSegments[str];\r\n\t\t\tif (segment) {\r\n\t\t\t\tindex += str.length;\r\n\t\t\t} else {\r\n\t\t\t\tsegment = [];\r\n\t\t\t\twhile (index < end) {\r\n\t\t\t\tbase64VLQ.decode(aStr, index, temp);\r\n\t\t\t\tvalue = temp.value;\r\n\t\t\t\tindex = temp.rest;\r\n\t\t\t\tsegment.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 2) {\r\n\t\t\t\tthrow new Error('Found a source, but no line and column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 3) {\r\n\t\t\t\tthrow new Error('Found a source and line, but no column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcachedSegments[str] = segment;\r\n\t\t\t}\r\n\r\n\t\t\t// Generated column.\r\n\t\t\tmapping.generatedColumn = previousGeneratedColumn + segment[0];\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (segment.length > 1) {\r\n\t\t\t\t// Original source.\r\n\t\t\t\tmapping.source = previousSource + segment[1];\r\n\t\t\t\tpreviousSource += segment[1];\r\n\r\n\t\t\t\t// Original line.\r\n\t\t\t\tmapping.originalLine = previousOriginalLine + segment[2];\r\n\t\t\t\tpreviousOriginalLine = mapping.originalLine;\r\n\t\t\t\t// Lines are stored 0-based\r\n\t\t\t\tmapping.originalLine += 1;\r\n\r\n\t\t\t\t// Original column.\r\n\t\t\t\tmapping.originalColumn = previousOriginalColumn + segment[3];\r\n\t\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\t\tif (segment.length > 4) {\r\n\t\t\t\t// Original name.\r\n\t\t\t\tmapping.name = previousName + segment[4];\r\n\t\t\t\tpreviousName += segment[4];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgeneratedMappings.push(mapping);\r\n\t\t\tif (typeof mapping.originalLine === 'number') {\r\n\t\t\t\toriginalMappings.push(mapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tthis.__generatedMappings = generatedMappings;\r\n\r\n\t\tquickSort(originalMappings, util.compareByOriginalPositions);\r\n\t\tthis.__originalMappings = originalMappings;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Find the mapping that best matches the hypothetical \"needle\" mapping that\r\n\t* we are searching for in the given \"haystack\" of mappings.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._findMapping =\r\n\t\tfunction SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\r\n\t\t\t\t\t\t\t\t\t\t\taColumnName, aComparator, aBias) {\r\n\t\t// To return the position we are searching for, we must first find the\r\n\t\t// mapping for the given position and then return the opposite position it\r\n\t\t// points to. Because the mappings are sorted, we can use binary search to\r\n\t\t// find the best mapping.\r\n\r\n\t\tif (aNeedle[aLineName] <= 0) {\r\n\t\t\tthrow new TypeError('Line must be greater than or equal to 1, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aLineName]);\r\n\t\t}\r\n\t\tif (aNeedle[aColumnName] < 0) {\r\n\t\t\tthrow new TypeError('Column must be greater than or equal to 0, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aColumnName]);\r\n\t\t}\r\n\r\n\t\treturn binarySearch.search(aNeedle, aMappings, aComparator, aBias);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Compute the last column for each generated mapping. The last column is\r\n\t* inclusive.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.computeColumnSpans =\r\n\t\tfunction SourceMapConsumer_computeColumnSpans() {\r\n\t\tfor (var index = 0; index < this._generatedMappings.length; ++index) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\t// Mappings do not contain a field for the last generated columnt. We\r\n\t\t\t// can come up with an optimistic estimate, however, by assuming that\r\n\t\t\t// mappings are contiguous (i.e. given two consecutive mappings, the\r\n\t\t\t// first mapping ends where the second one starts).\r\n\t\t\tif (index + 1 < this._generatedMappings.length) {\r\n\t\t\tvar nextMapping = this._generatedMappings[index + 1];\r\n\r\n\t\t\tif (mapping.generatedLine === nextMapping.generatedLine) {\r\n\t\t\t\tmapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// The last mapping for each line spans the entire line.\r\n\t\t\tmapping.lastGeneratedColumn = Infinity;\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction SourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._generatedMappings,\r\n\t\t\t\"generatedLine\",\r\n\t\t\t\"generatedColumn\",\r\n\t\t\tutil.compareByGeneratedPositionsDeflated,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\tif (mapping.generatedLine === needle.generatedLine) {\r\n\t\t\tvar source = util.getArg(mapping, 'source', null);\r\n\t\t\tif (source !== null) {\r\n\t\t\t\tsource = this._sources.at(source);\r\n\t\t\t\tif (this.sourceRoot != null) {\r\n\t\t\t\tsource = util.join(this.sourceRoot, source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar name = util.getArg(mapping, 'name', null);\r\n\t\t\tif (name !== null) {\r\n\t\t\t\tname = this._names.at(name);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tline: util.getArg(mapping, 'originalLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'originalColumn', null),\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction BasicSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.sourcesContent.length >= this._sources.size() &&\r\n\t\t\t!this.sourcesContent.some(function (sc) { return sc == null; });\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\taSource = util.relative(this.sourceRoot, aSource);\r\n\t\t}\r\n\r\n\t\tif (this._sources.has(aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(aSource)];\r\n\t\t}\r\n\r\n\t\tvar url;\r\n\t\tif (this.sourceRoot != null\r\n\t\t\t&& (url = util.urlParse(this.sourceRoot))) {\r\n\t\t\t// XXX: file:// URIs and absolute paths lead to unexpected behavior for\r\n\t\t\t// many users. We can help them out when they expect file:// URIs to\r\n\t\t\t// behave like it would if they were running a local HTTP server. See\r\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\r\n\t\t\tvar fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\r\n\t\t\tif (url.scheme == \"file\"\r\n\t\t\t\t&& this._sources.has(fileUriAbsPath)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\r\n\t\t\t}\r\n\r\n\t\t\tif ((!url.path || url.path == \"/\")\r\n\t\t\t\t&& this._sources.has(\"/\" + aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// This function is used recursively from\r\n\t\t// IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\r\n\t\t// don't want to throw if we can't find the source - we just want to\r\n\t\t// return null, so we provide a flag to exit gracefully.\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction SourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tvar source = util.getArg(aArgs, 'source');\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tsource = util.relative(this.sourceRoot, source);\r\n\t\t}\r\n\t\tif (!this._sources.has(source)) {\r\n\t\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t\t};\r\n\t\t}\r\n\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\tvar needle = {\r\n\t\t\tsource: source,\r\n\t\t\toriginalLine: util.getArg(aArgs, 'line'),\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._originalMappings,\r\n\t\t\t\"originalLine\",\r\n\t\t\t\"originalColumn\",\r\n\t\t\tutil.compareByOriginalPositions,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (mapping.source === needle.source) {\r\n\t\t\treturn {\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\texports.BasicSourceMapConsumer = BasicSourceMapConsumer;\r\n\r\n\t/**\r\n\t* An IndexedSourceMapConsumer instance represents a parsed source map which\r\n\t* we can query for information. It differs from BasicSourceMapConsumer in\r\n\t* that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\r\n\t* input.\r\n\t*\r\n\t* The only parameter is a raw source map (either as a JSON string, or already\r\n\t* parsed to an object). According to the spec for indexed source maps, they\r\n\t* have the following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*   - sections: A list of section definitions.\r\n\t*\r\n\t* Each value under the \"sections\" field has two fields:\r\n\t*   - offset: The offset into the original specified at which this section\r\n\t*       begins to apply, defined as an object with a \"line\" and \"column\"\r\n\t*       field.\r\n\t*   - map: A source map definition. This source map could also be indexed,\r\n\t*       but doesn't have to be.\r\n\t*\r\n\t* Instead of the \"map\" field, it's also possible to have a \"url\" field\r\n\t* specifying a URL to retrieve a source map from, but that's currently\r\n\t* unsupported.\r\n\t*\r\n\t* Here's an example source map, taken from the source map spec[0], but\r\n\t* modified to omit a section which uses the \"url\" field.\r\n\t*\r\n\t*  {\r\n\t*    version : 3,\r\n\t*    file: \"app.js\",\r\n\t*    sections: [{\r\n\t*      offset: {line:100, column:10},\r\n\t*      map: {\r\n\t*        version : 3,\r\n\t*        file: \"section.js\",\r\n\t*        sources: [\"foo.js\", \"bar.js\"],\r\n\t*        names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*        mappings: \"AAAA,E;;ABCDE;\"\r\n\t*      }\r\n\t*    }],\r\n\t*  }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\r\n\t*/\r\n\tfunction IndexedSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sections = util.getArg(sourceMap, 'sections');\r\n\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\r\n\t\tvar lastOffset = {\r\n\t\tline: -1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tthis._sections = sections.map(function (s) {\r\n\t\tif (s.url) {\r\n\t\t\t// The url field will require support for asynchronicity.\r\n\t\t\t// See https://github.com/mozilla/source-map/issues/16\r\n\t\t\tthrow new Error('Support for url field in sections not implemented.');\r\n\t\t}\r\n\t\tvar offset = util.getArg(s, 'offset');\r\n\t\tvar offsetLine = util.getArg(offset, 'line');\r\n\t\tvar offsetColumn = util.getArg(offset, 'column');\r\n\r\n\t\tif (offsetLine < lastOffset.line ||\r\n\t\t\t(offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\r\n\t\t\tthrow new Error('Section offsets must be ordered and non-overlapping.');\r\n\t\t}\r\n\t\tlastOffset = offset;\r\n\r\n\t\treturn {\r\n\t\t\tgeneratedOffset: {\r\n\t\t\t// The offset fields are 0-based, but we use 1-based indices when\r\n\t\t\t// encoding/decoding from VLQ.\r\n\t\t\tgeneratedLine: offsetLine + 1,\r\n\t\t\tgeneratedColumn: offsetColumn + 1\r\n\t\t\t},\r\n\t\t\tconsumer: new SourceMapConsumer(util.getArg(s, 'map'))\r\n\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\tvar sources = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tfor (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\r\n\t\t\tsources.push(this._sections[i].consumer.sources[j]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sources;\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\t// Find the section containing the generated position we're trying to map\r\n\t\t// to an original position.\r\n\t\tvar sectionIndex = binarySearch.search(needle, this._sections,\r\n\t\t\tfunction(needle, section) {\r\n\t\t\tvar cmp = needle.generatedLine - section.generatedOffset.generatedLine;\r\n\t\t\tif (cmp) {\r\n\t\t\t\treturn cmp;\r\n\t\t\t}\r\n\r\n\t\t\treturn (needle.generatedColumn -\r\n\t\t\t\t\tsection.generatedOffset.generatedColumn);\r\n\t\t\t});\r\n\t\tvar section = this._sections[sectionIndex];\r\n\r\n\t\tif (!section) {\r\n\t\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn section.consumer.originalPositionFor({\r\n\t\t\tline: needle.generatedLine -\r\n\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\tcolumn: needle.generatedColumn -\r\n\t\t\t(section.generatedOffset.generatedLine === needle.generatedLine\r\n\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t: 0),\r\n\t\t\tbias: aArgs.bias\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction IndexedSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\treturn this._sections.every(function (s) {\r\n\t\t\treturn s.consumer.hasContentsOfAllSources();\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\tvar content = section.consumer.sourceContentFor(aSource, true);\r\n\t\t\tif (content) {\r\n\t\t\treturn content;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\t// Only consider this section if the requested source is in the list of\r\n\t\t\t// sources of the consumer.\r\n\t\t\tif (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\r\n\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar generatedPosition = section.consumer.generatedPositionFor(aArgs);\r\n\t\t\tif (generatedPosition) {\r\n\t\t\tvar ret = {\r\n\t\t\t\tline: generatedPosition.line +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tcolumn: generatedPosition.column +\r\n\t\t\t\t(section.generatedOffset.generatedLine === generatedPosition.line\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0)\r\n\t\t\t};\r\n\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthis.__generatedMappings = [];\r\n\t\tthis.__originalMappings = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\t\t\tvar sectionMappings = section.consumer._generatedMappings;\r\n\t\t\tfor (var j = 0; j < sectionMappings.length; j++) {\r\n\t\t\tvar mapping = sectionMappings[j];\r\n\r\n\t\t\tvar source = section.consumer._sources.at(mapping.source);\r\n\t\t\tif (section.consumer.sourceRoot !== null) {\r\n\t\t\t\tsource = util.join(section.consumer.sourceRoot, source);\r\n\t\t\t}\r\n\t\t\tthis._sources.add(source);\r\n\t\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\t\tvar name = section.consumer._names.at(mapping.name);\r\n\t\t\tthis._names.add(name);\r\n\t\t\tname = this._names.indexOf(name);\r\n\r\n\t\t\t// The mappings coming from the consumer for the section have\r\n\t\t\t// generated positions relative to the start of the section, so we\r\n\t\t\t// need to offset them to be relative to the start of the concatenated\r\n\t\t\t// generated file.\r\n\t\t\tvar adjustedMapping = {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tgeneratedLine: mapping.generatedLine +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tgeneratedColumn: mapping.generatedColumn +\r\n\t\t\t\t(section.generatedOffset.generatedLine === mapping.generatedLine\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0),\r\n\t\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t\tthis.__generatedMappings.push(adjustedMapping);\r\n\t\t\tif (typeof adjustedMapping.originalLine === 'number') {\r\n\t\t\t\tthis.__originalMappings.push(adjustedMapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tquickSort(this.__originalMappings, util.compareByOriginalPositions);\r\n\t\t};\r\n\r\n\texports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\r\n\r\n\r\n/***/ },\r\n/* 8 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\texports.GREATEST_LOWER_BOUND = 1;\r\n\texports.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Recursive implementation of binary search.\r\n\t*\r\n\t* @param aLow Indices here and lower do not contain the needle.\r\n\t* @param aHigh Indices here and higher do not contain the needle.\r\n\t* @param aNeedle The element being searched for.\r\n\t* @param aHaystack The non-empty array being searched.\r\n\t* @param aCompare Function which takes two elements and returns -1, 0, or 1.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*/\r\n\tfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\r\n\t\t// This function terminates when one of the following is true:\r\n\t\t//\r\n\t\t//   1. We find the exact element we are looking for.\r\n\t\t//\r\n\t\t//   2. We did not find the exact element, but we can return the index of\r\n\t\t//      the next-closest element.\r\n\t\t//\r\n\t\t//   3. We did not find the exact element, and there is no next-closest\r\n\t\t//      element than the one we are searching for, so we return -1.\r\n\t\tvar mid = Math.floor((aHigh - aLow) / 2) + aLow;\r\n\t\tvar cmp = aCompare(aNeedle, aHaystack[mid], true);\r\n\t\tif (cmp === 0) {\r\n\t\t// Found the element we are looking for.\r\n\t\treturn mid;\r\n\t\t}\r\n\t\telse if (cmp > 0) {\r\n\t\t// Our needle is greater than aHaystack[mid].\r\n\t\tif (aHigh - mid > 1) {\r\n\t\t\t// The element is in the upper half.\r\n\t\t\treturn recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// The exact needle element was not found in this haystack. Determine if\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn aHigh < aHaystack.length ? aHigh : -1;\r\n\t\t} else {\r\n\t\t\treturn mid;\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t// Our needle is less than aHaystack[mid].\r\n\t\tif (mid - aLow > 1) {\r\n\t\t\t// The element is in the lower half.\r\n\t\t\treturn recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn mid;\r\n\t\t} else {\r\n\t\t\treturn aLow < 0 ? -1 : aLow;\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* This is an implementation of binary search which will always try and return\r\n\t* the index of the closest element if there is no exact hit. This is because\r\n\t* mappings between original and generated line/col pairs are single points,\r\n\t* and there is an implicit region between each of them, so a miss just means\r\n\t* that you aren't on the very start of a region.\r\n\t*\r\n\t* @param aNeedle The element you are looking for.\r\n\t* @param aHaystack The array that is being searched.\r\n\t* @param aCompare A function which takes the needle and an element in the\r\n\t*     array and returns -1, 0, or 1 depending on whether the needle is less\r\n\t*     than, equal to, or greater than the element, respectively.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\r\n\t*/\r\n\texports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\r\n\t\tif (aHaystack.length === 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tvar index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\r\n\t\t\t\t\t\t\t\t\taCompare, aBias || exports.GREATEST_LOWER_BOUND);\r\n\t\tif (index < 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\t// We have found either the exact element, or the next-closest element than\r\n\t\t// the one we are searching for. However, there may be more than one such\r\n\t\t// element. Make sure we always return the smallest of these.\r\n\t\twhile (index - 1 >= 0) {\r\n\t\tif (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t--index;\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 9 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t// It turns out that some (most?) JavaScript engines don't self-host\r\n\t// `Array.prototype.sort`. This makes sense because C++ will likely remain\r\n\t// faster than JS when doing raw CPU-intensive sorting. However, when using a\r\n\t// custom comparator function, calling back and forth between the VM's C++ and\r\n\t// JIT'd JS is rather slow *and* loses JIT type information, resulting in\r\n\t// worse generated code for the comparator function than would be optimal. In\r\n\t// fact, when sorting with a comparator, these costs outweigh the benefits of\r\n\t// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\r\n\t// a ~3500ms mean speed-up in `bench/bench.html`.\r\n\r\n\t/**\r\n\t* Swap the elements indexed by `x` and `y` in the array `ary`.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        The array.\r\n\t* @param {Number} x\r\n\t*        The index of the first item.\r\n\t* @param {Number} y\r\n\t*        The index of the second item.\r\n\t*/\r\n\tfunction swap(ary, x, y) {\r\n\t\tvar temp = ary[x];\r\n\t\tary[x] = ary[y];\r\n\t\tary[y] = temp;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a random integer within the range `low .. high` inclusive.\r\n\t*\r\n\t* @param {Number} low\r\n\t*        The lower bound on the range.\r\n\t* @param {Number} high\r\n\t*        The upper bound on the range.\r\n\t*/\r\n\tfunction randomIntInRange(low, high) {\r\n\t\treturn Math.round(low + (Math.random() * (high - low)));\r\n\t}\r\n\r\n\t/**\r\n\t* The Quick Sort algorithm.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t* @param {Number} p\r\n\t*        Start index of the array\r\n\t* @param {Number} r\r\n\t*        End index of the array\r\n\t*/\r\n\tfunction doQuickSort(ary, comparator, p, r) {\r\n\t\t// If our lower bound is less than our upper bound, we (1) partition the\r\n\t\t// array into two pieces and (2) recurse on each half. If it is not, this is\r\n\t\t// the empty array and our base case.\r\n\r\n\t\tif (p < r) {\r\n\t\t// (1) Partitioning.\r\n\t\t//\r\n\t\t// The partitioning chooses a pivot between `p` and `r` and moves all\r\n\t\t// elements that are less than or equal to the pivot to the before it, and\r\n\t\t// all the elements that are greater than it after it. The effect is that\r\n\t\t// once partition is done, the pivot is in the exact place it will be when\r\n\t\t// the array is put in sorted order, and it will not need to be moved\r\n\t\t// again. This runs in O(n) time.\r\n\r\n\t\t// Always choose a random pivot so that an input array which is reverse\r\n\t\t// sorted does not cause O(n^2) running time.\r\n\t\tvar pivotIndex = randomIntInRange(p, r);\r\n\t\tvar i = p - 1;\r\n\r\n\t\tswap(ary, pivotIndex, r);\r\n\t\tvar pivot = ary[r];\r\n\r\n\t\t// Immediately after `j` is incremented in this loop, the following hold\r\n\t\t// true:\r\n\t\t//\r\n\t\t//   * Every element in `ary[p .. i]` is less than or equal to the pivot.\r\n\t\t//\r\n\t\t//   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\r\n\t\tfor (var j = p; j < r; j++) {\r\n\t\t\tif (comparator(ary[j], pivot) <= 0) {\r\n\t\t\ti += 1;\r\n\t\t\tswap(ary, i, j);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswap(ary, i + 1, j);\r\n\t\tvar q = i + 1;\r\n\r\n\t\t// (2) Recurse on each half.\r\n\r\n\t\tdoQuickSort(ary, comparator, p, q - 1);\r\n\t\tdoQuickSort(ary, comparator, q + 1, r);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Sort the given array in-place with the given comparator function.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t*/\r\n\texports.quickSort = function (ary, comparator) {\r\n\t\tdoQuickSort(ary, comparator, 0, ary.length - 1);\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 10 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\r\n\t// operating systems these days (capturing the result).\r\n\tvar REGEX_NEWLINE = /(\\r?\\n)/;\r\n\r\n\t// Newline character code for charCodeAt() comparisons\r\n\tvar NEWLINE_CODE = 10;\r\n\r\n\t// Private symbol for identifying `SourceNode`s when multiple versions of\r\n\t// the source-map library are loaded. This MUST NOT CHANGE across\r\n\t// versions!\r\n\tvar isSourceNode = \"$$$isSourceNode$$$\";\r\n\r\n\t/**\r\n\t* SourceNodes provide a way to abstract over interpolating/concatenating\r\n\t* snippets of generated JavaScript source code while maintaining the line and\r\n\t* column information associated with the original source code.\r\n\t*\r\n\t* @param aLine The original line number.\r\n\t* @param aColumn The original column number.\r\n\t* @param aSource The original source's filename.\r\n\t* @param aChunks Optional. An array of strings which are snippets of\r\n\t*        generated JS, or other SourceNodes.\r\n\t* @param aName The original identifier.\r\n\t*/\r\n\tfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\r\n\t\tthis.children = [];\r\n\t\tthis.sourceContents = {};\r\n\t\tthis.line = aLine == null ? null : aLine;\r\n\t\tthis.column = aColumn == null ? null : aColumn;\r\n\t\tthis.source = aSource == null ? null : aSource;\r\n\t\tthis.name = aName == null ? null : aName;\r\n\t\tthis[isSourceNode] = true;\r\n\t\tif (aChunks != null) this.add(aChunks);\r\n\t}\r\n\r\n\t/**\r\n\t* Creates a SourceNode from generated code and a SourceMapConsumer.\r\n\t*\r\n\t* @param aGeneratedCode The generated code\r\n\t* @param aSourceMapConsumer The SourceMap for the generated code\r\n\t* @param aRelativePath Optional. The path that relative sources in the\r\n\t*        SourceMapConsumer should be relative to.\r\n\t*/\r\n\tSourceNode.fromStringWithSourceMap =\r\n\t\tfunction SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\r\n\t\t// The SourceNode we want to fill with the generated code\r\n\t\t// and the SourceMap\r\n\t\tvar node = new SourceNode();\r\n\r\n\t\t// All even indices of this array are one line of the generated code,\r\n\t\t// while all odd indices are the newlines between two adjacent lines\r\n\t\t// (since `REGEX_NEWLINE` captures its match).\r\n\t\t// Processed fragments are removed from this array, by calling `shiftNextLine`.\r\n\t\tvar remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\r\n\t\tvar shiftNextLine = function() {\r\n\t\t\tvar lineContents = remainingLines.shift();\r\n\t\t\t// The last line of a file might not have a newline.\r\n\t\t\tvar newLine = remainingLines.shift() || \"\";\r\n\t\t\treturn lineContents + newLine;\r\n\t\t};\r\n\r\n\t\t// We need to remember the position of \"remainingLines\"\r\n\t\tvar lastGeneratedLine = 1, lastGeneratedColumn = 0;\r\n\r\n\t\t// The generate SourceNodes we need a code range.\r\n\t\t// To extract it current and last mapping is used.\r\n\t\t// Here we store the last mapping.\r\n\t\tvar lastMapping = null;\r\n\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tif (lastMapping !== null) {\r\n\t\t\t// We add the code from \"lastMapping\" to \"mapping\":\r\n\t\t\t// First check if there is a new line in between.\r\n\t\t\tif (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\t\t// Associate first line with \"lastMapping\"\r\n\t\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t\tlastGeneratedLine++;\r\n\t\t\t\tlastGeneratedColumn = 0;\r\n\t\t\t\t// The remaining code is added without mapping\r\n\t\t\t} else {\r\n\t\t\t\t// There is no new line in between.\r\n\t\t\t\t// Associate the code between \"lastGeneratedColumn\" and\r\n\t\t\t\t// \"mapping.generatedColumn\" with \"lastMapping\"\r\n\t\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\t\tvar code = nextLine.substr(0, mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t\taddMappingWithCode(lastMapping, code);\r\n\t\t\t\t// No more remaining code, continue\r\n\t\t\t\tlastMapping = mapping;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\t// We add the generated code until the first mapping\r\n\t\t\t// to the SourceNode without any mapping.\r\n\t\t\t// Each line is added as separate string.\r\n\t\t\twhile (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\tnode.add(shiftNextLine());\r\n\t\t\tlastGeneratedLine++;\r\n\t\t\t}\r\n\t\t\tif (lastGeneratedColumn < mapping.generatedColumn) {\r\n\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\tnode.add(nextLine.substr(0, mapping.generatedColumn));\r\n\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn);\r\n\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t}\r\n\t\t\tlastMapping = mapping;\r\n\t\t}, this);\r\n\t\t// We have processed all mappings.\r\n\t\tif (remainingLines.length > 0) {\r\n\t\t\tif (lastMapping) {\r\n\t\t\t// Associate the remaining code in the current line with \"lastMapping\"\r\n\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t}\r\n\t\t\t// and add the remaining lines without any mapping\r\n\t\t\tnode.add(remainingLines.join(\"\"));\r\n\t\t}\r\n\r\n\t\t// Copy sourcesContent into SourceNode\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aRelativePath != null) {\r\n\t\t\t\tsourceFile = util.join(aRelativePath, sourceFile);\r\n\t\t\t}\r\n\t\t\tnode.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn node;\r\n\r\n\t\tfunction addMappingWithCode(mapping, code) {\r\n\t\t\tif (mapping === null || mapping.source === undefined) {\r\n\t\t\tnode.add(code);\r\n\t\t\t} else {\r\n\t\t\tvar source = aRelativePath\r\n\t\t\t\t? util.join(aRelativePath, mapping.source)\r\n\t\t\t\t: mapping.source;\r\n\t\t\tnode.add(new SourceNode(mapping.originalLine,\r\n\t\t\t\t\t\t\t\t\tmapping.originalColumn,\r\n\t\t\t\t\t\t\t\t\tsource,\r\n\t\t\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\t\t\tmapping.name));\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.add = function SourceNode_add(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\taChunk.forEach(function (chunk) {\r\n\t\t\tthis.add(chunk);\r\n\t\t}, this);\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tif (aChunk) {\r\n\t\t\tthis.children.push(aChunk);\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to the beginning of this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\tfor (var i = aChunk.length-1; i >= 0; i--) {\r\n\t\t\tthis.prepend(aChunk[i]);\r\n\t\t}\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tthis.children.unshift(aChunk);\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of JS snippets in this node and its children. The\r\n\t* walking function is called once for each snippet of JS and is passed that\r\n\t* snippet and the its original associated source's line/column location.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walk = function SourceNode_walk(aFn) {\r\n\t\tvar chunk;\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\tchunk = this.children[i];\r\n\t\tif (chunk[isSourceNode]) {\r\n\t\t\tchunk.walk(aFn);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (chunk !== '') {\r\n\t\t\taFn(chunk, { source: this.source,\r\n\t\t\t\t\t\tline: this.line,\r\n\t\t\t\t\t\tcolumn: this.column,\r\n\t\t\t\t\t\tname: this.name });\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\r\n\t* each of `this.children`.\r\n\t*\r\n\t* @param aSep The separator.\r\n\t*/\r\n\tSourceNode.prototype.join = function SourceNode_join(aSep) {\r\n\t\tvar newChildren;\r\n\t\tvar i;\r\n\t\tvar len = this.children.length;\r\n\t\tif (len > 0) {\r\n\t\tnewChildren = [];\r\n\t\tfor (i = 0; i < len-1; i++) {\r\n\t\t\tnewChildren.push(this.children[i]);\r\n\t\t\tnewChildren.push(aSep);\r\n\t\t}\r\n\t\tnewChildren.push(this.children[i]);\r\n\t\tthis.children = newChildren;\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Call String.prototype.replace on the very right-most source snippet. Useful\r\n\t* for trimming whitespace from the end of a source node, etc.\r\n\t*\r\n\t* @param aPattern The pattern to replace.\r\n\t* @param aReplacement The thing to replace the pattern with.\r\n\t*/\r\n\tSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\r\n\t\tvar lastChild = this.children[this.children.length - 1];\r\n\t\tif (lastChild[isSourceNode]) {\r\n\t\tlastChild.replaceRight(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse if (typeof lastChild === 'string') {\r\n\t\tthis.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse {\r\n\t\tthis.children.push(''.replace(aPattern, aReplacement));\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file. This will be added to the SourceMapGenerator\r\n\t* in the sourcesContent field.\r\n\t*\r\n\t* @param aSourceFile The filename of the source file\r\n\t* @param aSourceContent The content of the source file\r\n\t*/\r\n\tSourceNode.prototype.setSourceContent =\r\n\t\tfunction SourceNode_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tthis.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of SourceNodes. The walking function is called for each\r\n\t* source file content and is passed the filename and source content.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walkSourceContents =\r\n\t\tfunction SourceNode_walkSourceContents(aFn) {\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\t\tif (this.children[i][isSourceNode]) {\r\n\t\t\tthis.children[i].walkSourceContents(aFn);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sources = Object.keys(this.sourceContents);\r\n\t\tfor (var i = 0, len = sources.length; i < len; i++) {\r\n\t\t\taFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return the string representation of this source node. Walks over the tree\r\n\t* and concatenates all the various snippets together to one string.\r\n\t*/\r\n\tSourceNode.prototype.toString = function SourceNode_toString() {\r\n\t\tvar str = \"\";\r\n\t\tthis.walk(function (chunk) {\r\n\t\tstr += chunk;\r\n\t\t});\r\n\t\treturn str;\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the string representation of this source node along with a source\r\n\t* map.\r\n\t*/\r\n\tSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\r\n\t\tvar generated = {\r\n\t\tcode: \"\",\r\n\t\tline: 1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tvar map = new SourceMapGenerator(aArgs);\r\n\t\tvar sourceMappingActive = false;\r\n\t\tvar lastOriginalSource = null;\r\n\t\tvar lastOriginalLine = null;\r\n\t\tvar lastOriginalColumn = null;\r\n\t\tvar lastOriginalName = null;\r\n\t\tthis.walk(function (chunk, original) {\r\n\t\tgenerated.code += chunk;\r\n\t\tif (original.source !== null\r\n\t\t\t&& original.line !== null\r\n\t\t\t&& original.column !== null) {\r\n\t\t\tif(lastOriginalSource !== original.source\r\n\t\t\t|| lastOriginalLine !== original.line\r\n\t\t\t|| lastOriginalColumn !== original.column\r\n\t\t\t|| lastOriginalName !== original.name) {\r\n\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\tline: original.line,\r\n\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t});\r\n\t\t\t}\r\n\t\t\tlastOriginalSource = original.source;\r\n\t\t\tlastOriginalLine = original.line;\r\n\t\t\tlastOriginalColumn = original.column;\r\n\t\t\tlastOriginalName = original.name;\r\n\t\t\tsourceMappingActive = true;\r\n\t\t} else if (sourceMappingActive) {\r\n\t\t\tmap.addMapping({\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t}\r\n\t\t\t});\r\n\t\t\tlastOriginalSource = null;\r\n\t\t\tsourceMappingActive = false;\r\n\t\t}\r\n\t\tfor (var idx = 0, length = chunk.length; idx < length; idx++) {\r\n\t\t\tif (chunk.charCodeAt(idx) === NEWLINE_CODE) {\r\n\t\t\tgenerated.line++;\r\n\t\t\tgenerated.column = 0;\r\n\t\t\t// Mappings end at eol\r\n\t\t\tif (idx + 1 === length) {\r\n\t\t\t\tlastOriginalSource = null;\r\n\t\t\t\tsourceMappingActive = false;\r\n\t\t\t} else if (sourceMappingActive) {\r\n\t\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\t\tline: original.line,\r\n\t\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\t\tline: generated.line,\r\n\t\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tgenerated.column++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t});\r\n\t\tthis.walkSourceContents(function (sourceFile, sourceContent) {\r\n\t\tmap.setSourceContent(sourceFile, sourceContent);\r\n\t\t});\r\n\r\n\t\treturn { code: generated.code, map: map };\r\n\t};\r\n\r\n\texports.SourceNode = SourceNode;\r\n\r\n\r\n/***/ }\r\n/******/ ])\r\n});\r\n;\r\n},{}],7:[function(require,module,exports){\r\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.StackTrace=e()}}(function(){var e;return function n(e,r,t){function o(a,s){if(!r[a]){if(!e[a]){var u=\"function\"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error(\"Cannot find module '\"+a+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(n){var r=e[a][1][n];return o(r?r:n)},l,l.exports,n,e,r,t)}return r[a].exports}for(var i=\"function\"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"error-stack-parser\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){\"use strict\";var n=/(^|@)\\S+\\:\\d+/,r=/^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m,t=/^(eval@)?(\\[native code\\])?$/;return{parse:function(e){if(\"undefined\"!=typeof e.stacktrace||\"undefined\"!=typeof e[\"opera#sourceloc\"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error(\"Cannot parse given Error object\")},extractLocation:function(e){if(e.indexOf(\":\")===-1)return[e];var n=/(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/,r=n.exec(e.replace(/[\\(\\)]/g,\"\"));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(n){var t=n.stack.split(\"\\n\").filter(function(e){return!!e.match(r)},this);return t.map(function(n){n.indexOf(\"(eval \")>-1&&(n=n.replace(/eval code/g,\"eval\").replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g,\"\"));var r=n.replace(/^\\s+/,\"\").replace(/\\(eval code/g,\"(\").split(/\\s+/).slice(1),t=this.extractLocation(r.pop()),o=r.join(\" \")||void 0,i=[\"eval\",\"<anonymous>\"].indexOf(t[0])>-1?void 0:t[0];return new e({functionName:o,fileName:i,lineNumber:t[1],columnNumber:t[2],source:n})},this)},parseFFOrSafari:function(n){var r=n.stack.split(\"\\n\").filter(function(e){return!e.match(t)},this);return r.map(function(n){if(n.indexOf(\" > eval\")>-1&&(n=n.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g,\":$1\")),n.indexOf(\"@\")===-1&&n.indexOf(\":\")===-1)return new e({functionName:n});var r=/((.*\".+\"[^@]*)?[^@]*)(?:@)/,t=n.match(r),o=t&&t[1]?t[1]:void 0,i=this.extractLocation(n.replace(r,\"\"));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:n})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(\"\\n\")>-1&&e.message.split(\"\\n\").length>e.stacktrace.split(\"\\n\").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)/i,t=n.message.split(\"\\n\"),o=[],i=2,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera10:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i,t=n.stacktrace.split(\"\\n\"),o=[],i=0,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera11:function(r){var t=r.stack.split(\"\\n\").filter(function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return t.map(function(n){var r,t=n.split(\"@\"),o=this.extractLocation(t.pop()),i=t.shift()||\"\",a=i.replace(/<anonymous function(: (\\w+))?>/,\"$2\").replace(/\\([^\\)]*\\)/g,\"\")||void 0;i.match(/\\(([^\\)]*)\\)/)&&(r=i.replace(/^[^\\(]+\\(([^\\)]*)\\)$/,\"$1\"));var s=void 0===r||\"[arguments not available]\"===r?void 0:r.split(\",\");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:n})},this)}}})},{stackframe:3}],2:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stack-generator\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(n){var r=[],t=10;\"object\"==typeof n&&\"number\"==typeof n.maxStackSize&&(t=n.maxStackSize);for(var o=arguments.callee;o&&r.length<t&&o.arguments;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\\s+([\\w$]+))+\\s*\\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch(s){break}}return r}}})},{stackframe:3}],3:[function(n,r,t){!function(n,o){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stackframe\",[],o):\"object\"==typeof t?r.exports=o():n.StackFrame=o()}(this,function(){\"use strict\";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function t(e){if(e instanceof Object)for(var r=0;r<u.length;r++)e.hasOwnProperty(u[r])&&void 0!==e[u[r]]&&this[\"set\"+n(u[r])](e[u[r]])}var o=[\"isConstructor\",\"isEval\",\"isNative\",\"isToplevel\"],i=[\"columnNumber\",\"lineNumber\"],a=[\"fileName\",\"functionName\",\"source\"],s=[\"args\"],u=o.concat(i,a,s);t.prototype={getArgs:function(){return this.args},setArgs:function(e){if(\"[object Array]\"!==Object.prototype.toString.call(e))throw new TypeError(\"Args must be an Array\");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof t)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError(\"Eval Origin must be an Object or StackFrame\");this.evalOrigin=new t(e)}},toString:function(){var n=this.getFunctionName()||\"{anonymous}\",r=\"(\"+(this.getArgs()||[]).join(\",\")+\")\",t=this.getFileName()?\"@\"+this.getFileName():\"\",o=e(this.getLineNumber())?\":\"+this.getLineNumber():\"\",i=e(this.getColumnNumber())?\":\"+this.getColumnNumber():\"\";return n+r+t+o+i}};for(var c=0;c<o.length;c++)t.prototype[\"get\"+n(o[c])]=r(o[c]),t.prototype[\"set\"+n(o[c])]=function(e){return function(n){this[e]=Boolean(n)}}(o[c]);for(var l=0;l<i.length;l++)t.prototype[\"get\"+n(i[l])]=r(i[l]),t.prototype[\"set\"+n(i[l])]=function(n){return function(r){if(!e(r))throw new TypeError(n+\" must be a Number\");this[n]=Number(r)}}(i[l]);for(var f=0;f<a.length;f++)t.prototype[\"get\"+n(a[f])]=r(a[f]),t.prototype[\"set\"+n(a[f])]=function(e){return function(n){this[e]=String(n)}}(a[f]);return t})},{}],4:[function(e,n,r){function t(){this._array=[],this._set=Object.create(null)}var o=e(\"./util\"),i=Object.prototype.hasOwnProperty;t.fromArray=function(e,n){for(var r=new t,o=0,i=e.length;o<i;o++)r.add(e[o],n);return r},t.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},t.prototype.add=function(e,n){var r=o.toSetString(e),t=i.call(this._set,r),a=this._array.length;t&&!n||this._array.push(e),t||(this._set[r]=a)},t.prototype.has=function(e){var n=o.toSetString(e);return i.call(this._set,n)},t.prototype.indexOf=function(e){var n=o.toSetString(e);if(i.call(this._set,n))return this._set[n];throw new Error('\"'+e+'\" is not in the set.')},t.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error(\"No element indexed by \"+e)},t.prototype.toArray=function(){return this._array.slice()},r.ArraySet=t},{\"./util\":10}],5:[function(e,n,r){function t(e){return e<0?(-e<<1)+1:(e<<1)+0}function o(e){var n=1===(1&e),r=e>>1;return n?-r:r}var i=e(\"./base64\"),a=5,s=1<<a,u=s-1,c=s;r.encode=function(e){var n,r=\"\",o=t(e);do n=o&u,o>>>=a,o>0&&(n|=c),r+=i.encode(n);while(o>0);return r},r.decode=function(e,n,r){var t,s,l=e.length,f=0,p=0;do{if(n>=l)throw new Error(\"Expected more digits in base 64 VLQ value.\");if(s=i.decode(e.charCodeAt(n++)),s===-1)throw new Error(\"Invalid base64 digit: \"+e.charAt(n-1));t=!!(s&c),s&=u,f+=s<<p,p+=a}while(t);r.value=o(f),r.rest=n}},{\"./base64\":6}],6:[function(e,n,r){var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\"\");r.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError(\"Must be between 0 and 63: \"+e)},r.decode=function(e){var n=65,r=90,t=97,o=122,i=48,a=57,s=43,u=47,c=26,l=52;return n<=e&&e<=r?e-n:t<=e&&e<=o?e-t+c:i<=e&&e<=a?e-i+l:e==s?62:e==u?63:-1}},{}],7:[function(e,n,r){function t(e,n,o,i,a,s){var u=Math.floor((n-e)/2)+e,c=a(o,i[u],!0);return 0===c?u:c>0?n-u>1?t(u,n,o,i,a,s):s==r.LEAST_UPPER_BOUND?n<i.length?n:-1:u:u-e>1?t(e,u,o,i,a,s):s==r.LEAST_UPPER_BOUND?u:e<0?-1:e}r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,n,o,i){if(0===n.length)return-1;var a=t(-1,n.length,e,n,o,i||r.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===o(n[a],n[a-1],!0);)--a;return a}},{}],8:[function(e,n,r){function t(e,n,r){var t=e[n];e[n]=e[r],e[r]=t}function o(e,n){return Math.round(e+Math.random()*(n-e))}function i(e,n,r,a){if(r<a){var s=o(r,a),u=r-1;t(e,s,a);for(var c=e[a],l=r;l<a;l++)n(e[l],c)<=0&&(u+=1,t(e,u,l));t(e,u+1,l);var f=u+1;i(e,n,r,f-1),i(e,n,f+1,a)}}r.quickSort=function(e,n){i(e,n,0,e.length-1)}},{}],9:[function(e,n,r){function t(e){var n=e;return\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\"))),null!=n.sections?new a(n):new o(n)}function o(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),t=s.getArg(n,\"sources\"),o=s.getArg(n,\"names\",[]),i=s.getArg(n,\"sourceRoot\",null),a=s.getArg(n,\"sourcesContent\",null),u=s.getArg(n,\"mappings\"),l=s.getArg(n,\"file\",null);if(r!=this._version)throw new Error(\"Unsupported version: \"+r);t=t.map(String).map(s.normalize).map(function(e){return i&&s.isAbsolute(i)&&s.isAbsolute(e)?s.relative(i,e):e}),this._names=c.fromArray(o.map(String),!0),this._sources=c.fromArray(t,!0),this.sourceRoot=i,this.sourcesContent=a,this._mappings=u,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function a(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),o=s.getArg(n,\"sections\");if(r!=this._version)throw new Error(\"Unsupported version: \"+r);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error(\"Support for url field in sections not implemented.\");var n=s.getArg(e,\"offset\"),r=s.getArg(n,\"line\"),o=s.getArg(n,\"column\");if(r<i.line||r===i.line&&o<i.column)throw new Error(\"Section offsets must be ordered and non-overlapping.\");return i=n,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new t(s.getArg(e,\"map\"))}})}var s=e(\"./util\"),u=e(\"./binary-search\"),c=e(\"./array-set\").ArraySet,l=e(\"./base64-vlq\"),f=e(\"./quick-sort\").quickSort;t.fromSourceMap=function(e){return o.fromSourceMap(e)},t.prototype._version=3,t.prototype.__generatedMappings=null,Object.defineProperty(t.prototype,\"_generatedMappings\",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),t.prototype.__originalMappings=null,Object.defineProperty(t.prototype,\"_originalMappings\",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),t.prototype._charIsMappingSeparator=function(e,n){var r=e.charAt(n);return\";\"===r||\",\"===r},t.prototype._parseMappings=function(e,n){throw new Error(\"Subclasses must implement _parseMappings\")},t.GENERATED_ORDER=1,t.ORIGINAL_ORDER=2,t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.prototype.eachMapping=function(e,n,r){var o,i=n||null,a=r||t.GENERATED_ORDER;switch(a){case t.GENERATED_ORDER:o=this._generatedMappings;break;case t.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error(\"Unknown order of iteration.\")}var u=this.sourceRoot;o.map(function(e){var n=null===e.source?null:this._sources.at(e.source);return null!=n&&null!=u&&(n=s.join(u,n)),{source:n,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},t.prototype.allGeneratedPositionsFor=function(e){var n=s.getArg(e,\"line\"),r={source:s.getArg(e,\"source\"),originalLine:n,originalColumn:s.getArg(e,\"column\",0)};if(null!=this.sourceRoot&&(r.source=s.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var t=[],o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var a=i.originalLine;i&&i.originalLine===a;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===n&&i.originalColumn==c;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o]}return t},r.SourceMapConsumer=t,o.prototype=Object.create(t.prototype),o.prototype.consumer=t,o.fromSourceMap=function(e){var n=Object.create(o.prototype),r=n._names=c.fromArray(e._names.toArray(),!0),t=n._sources=c.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file;for(var a=e._mappings.toArray().slice(),u=n.__generatedMappings=[],l=n.__originalMappings=[],p=0,g=a.length;p<g;p++){var h=a[p],m=new i;m.generatedLine=h.generatedLine,m.generatedColumn=h.generatedColumn,h.source&&(m.source=t.indexOf(h.source),m.originalLine=h.originalLine,m.originalColumn=h.originalColumn,h.name&&(m.name=r.indexOf(h.name)),l.push(m)),u.push(m)}return f(n.__originalMappings,s.compareByOriginalPositions),n},o.prototype._version=3,Object.defineProperty(o.prototype,\"sources\",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?s.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,n){for(var r,t,o,a,u,c=1,p=0,g=0,h=0,m=0,d=0,v=e.length,_=0,y={},w={},b=[],C=[];_<v;)if(\";\"===e.charAt(_))c++,_++,p=0;else if(\",\"===e.charAt(_))_++;else{for(r=new i,r.generatedLine=c,a=_;a<v&&!this._charIsMappingSeparator(e,a);a++);if(t=e.slice(_,a),o=y[t])_+=t.length;else{for(o=[];_<a;)l.decode(e,_,w),u=w.value,_=w.rest,o.push(u);if(2===o.length)throw new Error(\"Found a source, but no line and column\");if(3===o.length)throw new Error(\"Found a source and line, but no column\");y[t]=o}r.generatedColumn=p+o[0],p=r.generatedColumn,o.length>1&&(r.source=m+o[1],m+=o[1],r.originalLine=g+o[2],g=r.originalLine,r.originalLine+=1,r.originalColumn=h+o[3],h=r.originalColumn,o.length>4&&(r.name=d+o[4],d+=o[4])),C.push(r),\"number\"==typeof r.originalLine&&b.push(r)}f(C,s.compareByGeneratedPositionsDeflated),this.__generatedMappings=C,f(b,s.compareByOriginalPositions),this.__originalMappings=b},o.prototype._findMapping=function(e,n,r,t,o,i){if(e[r]<=0)throw new TypeError(\"Line must be greater than or equal to 1, got \"+e[r]);if(e[t]<0)throw new TypeError(\"Column must be greater than or equal to 0, got \"+e[t]);return u.search(e,n,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=this._findMapping(n,this._generatedMappings,\"generatedLine\",\"generatedColumn\",s.compareByGeneratedPositionsDeflated,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===n.generatedLine){var i=s.getArg(o,\"source\",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=s.join(this.sourceRoot,i)));var a=s.getArg(o,\"name\",null);return null!==a&&(a=this._names.at(a)),{source:i,line:s.getArg(o,\"originalLine\",null),column:s.getArg(o,\"originalColumn\",null),name:a}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=s.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=s.urlParse(this.sourceRoot))){var t=e.replace(/^file:\\/\\//,\"\");if(\"file\"==r.scheme&&this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];if((!r.path||\"/\"==r.path)&&this._sources.has(\"/\"+e))return this.sourcesContent[this._sources.indexOf(\"/\"+e)]}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var n=s.getArg(e,\"source\");if(null!=this.sourceRoot&&(n=s.relative(this.sourceRoot,n)),!this._sources.has(n))return{line:null,column:null,lastColumn:null};n=this._sources.indexOf(n);var r={source:n,originalLine:s.getArg(e,\"line\"),originalColumn:s.getArg(e,\"column\")},o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=o,a.prototype=Object.create(t.prototype),a.prototype.constructor=t,a.prototype._version=3,Object.defineProperty(a.prototype,\"sources\",{get:function(){for(var e=[],n=0;n<this._sections.length;n++)for(var r=0;r<this._sections[n].consumer.sources.length;r++)e.push(this._sections[n].consumer.sources[r]);return e}}),a.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=u.search(n,this._sections,function(e,n){var r=e.generatedLine-n.generatedOffset.generatedLine;return r?r:e.generatedColumn-n.generatedOffset.generatedColumn}),t=this._sections[r];return t?t.consumer.originalPositionFor({line:n.generatedLine-(t.generatedOffset.generatedLine-1),column:n.generatedColumn-(t.generatedOffset.generatedLine===n.generatedLine?t.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},a.prototype.sourceContentFor=function(e,n){for(var r=0;r<this._sections.length;r++){var t=this._sections[r],o=t.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer.sources.indexOf(s.getArg(e,\"source\"))!==-1){var t=r.consumer.generatedPositionFor(e);if(t){var o={line:t.line+(r.generatedOffset.generatedLine-1),column:t.column+(r.generatedOffset.generatedLine===t.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},a.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var t=this._sections[r],o=t.consumer._generatedMappings,i=0;i<o.length;i++){var a=o[i],u=t.consumer._sources.at(a.source);null!==t.consumer.sourceRoot&&(u=s.join(t.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var c=t.consumer._names.at(a.name);this._names.add(c),c=this._names.indexOf(c);var l={source:u,generatedLine:a.generatedLine+(t.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(t.generatedOffset.generatedLine===a.generatedLine?t.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),\"number\"==typeof l.originalLine&&this.__originalMappings.push(l)}f(this.__generatedMappings,s.compareByGeneratedPositionsDeflated),f(this.__originalMappings,s.compareByOriginalPositions)},r.IndexedSourceMapConsumer=a},{\"./array-set\":4,\"./base64-vlq\":5,\"./binary-search\":7,\"./quick-sort\":8,\"./util\":10}],10:[function(e,n,r){function t(e,n,r){if(n in e)return e[n];if(3===arguments.length)return r;throw new Error('\"'+n+'\" is a required argument.')}function o(e){var n=e.match(v);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var n=\"\";return e.scheme&&(n+=e.scheme+\":\"),n+=\"//\",e.auth&&(n+=e.auth+\"@\"),e.host&&(n+=e.host),e.port&&(n+=\":\"+e.port),e.path&&(n+=e.path),n}function a(e){var n=e,t=o(e);if(t){if(!t.path)return e;n=t.path}for(var a,s=r.isAbsolute(n),u=n.split(/\\/+/),c=0,l=u.length-1;l>=0;l--)a=u[l],\".\"===a?u.splice(l,1):\"..\"===a?c++:c>0&&(\"\"===a?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return n=u.join(\"/\"),\"\"===n&&(n=s?\"/\":\".\"),t?(t.path=n,i(t)):n}function s(e,n){\"\"===e&&(e=\".\"),\"\"===n&&(n=\".\");var r=o(n),t=o(e);if(t&&(e=t.path||\"/\"),r&&!r.scheme)return t&&(r.scheme=t.scheme),i(r);if(r||n.match(_))return n;if(t&&!t.host&&!t.path)return t.host=n,i(t);var s=\"/\"===n.charAt(0)?n:a(e.replace(/\\/+$/,\"\")+\"/\"+n);return t?(t.path=s,i(t)):s}function u(e,n){\"\"===e&&(e=\".\"),e=e.replace(/\\/$/,\"\");for(var r=0;0!==n.indexOf(e+\"/\");){var t=e.lastIndexOf(\"/\");if(t<0)return n;if(e=e.slice(0,t),e.match(/^([^\\/]+:\\/)?\\/*$/))return n;++r}return Array(r+1).join(\"../\")+n.substr(e.length+1)}function c(e){return e}function l(e){return p(e)?\"$\"+e:e}function f(e){return p(e)?e.slice(1):e}function p(e){if(!e)return!1;var n=e.length;if(n<9)return!1;if(95!==e.charCodeAt(n-1)||95!==e.charCodeAt(n-2)||111!==e.charCodeAt(n-3)||116!==e.charCodeAt(n-4)||111!==e.charCodeAt(n-5)||114!==e.charCodeAt(n-6)||112!==e.charCodeAt(n-7)||95!==e.charCodeAt(n-8)||95!==e.charCodeAt(n-9))return!1;for(var r=n-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function g(e,n,r){var t=e.source-n.source;return 0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t||r?t:(t=e.generatedColumn-n.generatedColumn,0!==t?t:(t=e.generatedLine-n.generatedLine,0!==t?t:e.name-n.name))))}function h(e,n,r){var t=e.generatedLine-n.generatedLine;return 0!==t?t:(t=e.generatedColumn-n.generatedColumn,0!==t||r?t:(t=e.source-n.source,0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t?t:e.name-n.name))))}function m(e,n){return e===n?0:e>n?1:-1}function d(e,n){var r=e.generatedLine-n.generatedLine;return 0!==r?r:(r=e.generatedColumn-n.generatedColumn,0!==r?r:(r=m(e.source,n.source),0!==r?r:(r=e.originalLine-n.originalLine,0!==r?r:(r=e.originalColumn-n.originalColumn,0!==r?r:m(e.name,n.name)))))}r.getArg=t;var v=/^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/,_=/^data:.+\\,.+$/;r.urlParse=o,r.urlGenerate=i,r.normalize=a,r.join=s,r.isAbsolute=function(e){return\"/\"===e.charAt(0)||!!e.match(v)},r.relative=u;var y=function(){var e=Object.create(null);return!(\"__proto__\"in e)}();r.toSetString=y?c:l,r.fromSetString=y?c:f,r.compareByOriginalPositions=g,r.compareByGeneratedPositionsDeflated=h,r.compareByGeneratedPositionsInflated=d},{}],11:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace-gps\",[\"source-map\",\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"source-map/lib/source-map-consumer\"),n(\"stackframe\")):o.StackTraceGPS=i(o.SourceMap||o.sourceMap,o.StackFrame)}(this,function(e,n){\"use strict\";function r(e){return new Promise(function(n,r){var t=new XMLHttpRequest;t.open(\"get\",e),t.onerror=r,t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<300||\"file://\"===e.substr(0,7)&&t.responseText?n(t.responseText):r(new Error(\"HTTP status: \"+t.status+\" retrieving \"+e)))},t.send()})}function t(e){if(\"undefined\"!=typeof window&&window.atob)return window.atob(e);throw new Error(\"You must supply a polyfill for window.atob in this environment\")}function o(e){if(\"undefined\"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error(\"You must supply a polyfill for JSON.parse in this environment\")}function i(e,n){for(var r=[/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/,/function\\s+([^('\"`]*?)\\s*\\(([^)]*)\\)/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/,/\\b(?!(?:if|for|switch|while|with|catch)\\b)(?:(?:static)\\s+)?(\\S+)\\s*\\(.*?\\)\\s*\\{/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*\\(.*?\\)\\s*=>/],t=e.split(\"\\n\"),o=\"\",i=Math.min(n,20),a=0;a<i;++a){var s=t[n-a-1],u=s.indexOf(\"//\");if(u>=0&&(s=s.substr(0,u)),s){o=s+o;for(var c=r.length,l=0;l<c;l++){var f=r[l].exec(o);if(f&&f[1])return f[1]}}}}function a(){if(\"function\"!=typeof Object.defineProperty||\"function\"!=typeof Object.create)throw new Error(\"Unable to consume source maps in older browsers\")}function s(e){if(\"object\"!=typeof e)throw new TypeError(\"Given StackFrame is not an object\");if(\"string\"!=typeof e.fileName)throw new TypeError(\"Given file name is not a String\");if(\"number\"!=typeof e.lineNumber||e.lineNumber%1!==0||e.lineNumber<1)throw new TypeError(\"Given line number must be a positive integer\");if(\"number\"!=typeof e.columnNumber||e.columnNumber%1!==0||e.columnNumber<0)throw new TypeError(\"Given column number must be a non-negative integer\");return!0}function u(e){for(var n,r,t=/\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/gm;r=t.exec(e);)n=r[1];if(n)return n;throw new Error(\"sourceMappingURL not found\")}function c(e,r,t){return new Promise(function(o,i){var a=r.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(a.source){var s=r.sourceContentFor(a.source);s&&(t[a.source]=s),o(new n({functionName:a.name||e.functionName,args:e.args,fileName:a.source,lineNumber:a.line,columnNumber:a.column}))}else i(new Error(\"Could not get original source for given stackframe and source map\"))})}return function l(f){return this instanceof l?(f=f||{},this.sourceCache=f.sourceCache||{},this.sourceMapConsumerCache=f.sourceMapConsumerCache||{},this.ajax=f.ajax||r,this._atob=f.atob||t,this._get=function(e){return new Promise(function(n,r){var t=\"data:\"===e.substr(0,5);if(this.sourceCache[e])n(this.sourceCache[e]);else if(f.offline&&!t)r(new Error(\"Cannot make network requests in offline mode\"));else if(t){var o=/^data:application\\/json;([\\w=:\"-]+;)*base64,/,i=e.match(o);if(i){var a=i[0].length,s=e.substr(a),u=this._atob(s);this.sourceCache[e]=u,n(u)}else r(new Error(\"The encoding of the inline sourcemap is not supported\"))}else{var c=this.ajax(e,{method:\"get\"});this.sourceCache[e]=c,c.then(n,r)}}.bind(this))},this._getSourceMapConsumer=function(n,r){return new Promise(function(t,i){if(this.sourceMapConsumerCache[n])t(this.sourceMapConsumerCache[n]);else{var a=new Promise(function(t,i){return this._get(n).then(function(n){\"string\"==typeof n&&(n=o(n.replace(/^\\)\\]\\}'/,\"\"))),\"undefined\"==typeof n.sourceRoot&&(n.sourceRoot=r),t(new e.SourceMapConsumer(n))},i)}.bind(this));this.sourceMapConsumerCache[n]=a,t(a)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(n,r){this.getMappedLocation(e).then(function(e){function r(){n(e)}this.findFunctionName(e).then(n,r)[\"catch\"](r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(r,t){s(e),this._get(e.fileName).then(function(t){var o=e.lineNumber,a=e.columnNumber,s=i(t,o,a);r(s?new n({functionName:s,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:a}):e)},t)[\"catch\"](t)}.bind(this))},void(this.getMappedLocation=function(e){return new Promise(function(n,r){a(),s(e);var t=this.sourceCache,o=e.fileName;this._get(o).then(function(r){var i=u(r),a=\"data:\"===i.substr(0,5),s=o.substring(0,o.lastIndexOf(\"/\")+1);return\"/\"===i[0]||a||/^https?:\\/\\/|^\\/\\//i.test(i)||(i=s+i),this._getSourceMapConsumer(i,s).then(function(r){return c(e,r,t).then(n)[\"catch\"](function(){n(e)})})}.bind(this),r)[\"catch\"](r)}.bind(this))})):new l(f)}})},{\"source-map/lib/source-map-consumer\":9,stackframe:3}],12:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace\",[\"error-stack-parser\",\"stack-generator\",\"stacktrace-gps\"],i):\"object\"==typeof t?r.exports=i(n(\"error-stack-parser\"),n(\"stack-generator\"),n(\"stacktrace-gps\")):o.StackTrace=i(o.ErrorStackParser,o.StackGenerator,o.StackTraceGPS)}(this,function(e,n,r){function t(e,n){var r={};return[e,n].forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}),r}function o(e){return e.stack||e[\"opera#sourceloc\"]}function i(e,n){return\"function\"==typeof n?e.filter(n):e}var a={filter:function(e){return(e.functionName||\"\").indexOf(\"StackTrace$$\")===-1&&(e.functionName||\"\").indexOf(\"ErrorStackParser$$\")===-1&&(e.functionName||\"\").indexOf(\"StackTraceGPS$$\")===-1&&(e.functionName||\"\").indexOf(\"StackGenerator$$\")===-1},sourceCache:{}},s=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var n=s();return o(n)?this.fromError(n,e):this.generateArtificially(e)},getSync:function(r){r=t(a,r);var u=s(),c=o(u)?e.parse(u):n.backtrace(r);return i(c,r.filter)},fromError:function(n,o){o=t(a,o);var s=new r(o);return new Promise(function(r){var t=i(e.parse(n),o.filter);r(Promise.all(t.map(function(e){return new Promise(function(n){function r(){n(e)}s.pinpoint(e).then(n,r)[\"catch\"](r)})})))}.bind(this))},generateArtificially:function(e){e=t(a,e);var r=n.backtrace(e);return\"function\"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,n,r,t){if(\"function\"!=typeof e)throw new Error(\"Cannot instrument non-function object\");if(\"function\"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(n,r)[\"catch\"](r),e.apply(t||this,arguments)}catch(i){throw o(i)&&this.fromError(i).then(n,r)[\"catch\"](r),i}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if(\"function\"!=typeof e)throw new Error(\"Cannot de-instrument non-function object\");return\"function\"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,n,r,t){return new Promise(function(o,i){var a=new XMLHttpRequest;if(a.onerror=i,a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<400?o(a.responseText):i(new Error(\"POST to \"+n+\" failed with status: \"+a.status)))},a.open(\"post\",n),a.setRequestHeader(\"Content-Type\",\"application/json\"),t&&\"object\"==typeof t.headers){var s=t.headers;for(var u in s)s.hasOwnProperty(u)&&a.setRequestHeader(u,s[u])}var c={stack:e};void 0!==r&&null!==r&&(c.message=r),a.send(JSON.stringify(c))})}}})},{\"error-stack-parser\":1,\"stack-generator\":2,\"stacktrace-gps\":11}]},{},[12])(12)});\r\n\r\n\r\n},{}],8:[function(require,module,exports){\r\nclass FileMap {\r\n    constructor(){this.sidesList=[];}\r\n    add(sides) {// {sideA:path, sideB:path}\r\n        this.sidesList.push(sides);\r\n    }\r\n    convert(path, fromSide, toSide) {\r\n        for (let sides of this.sidesList) {\r\n            if (path.startsWith(sides[fromSide])) {\r\n                return sides[toSide]+path.substring(sides[fromSide].length);\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n}\r\nmodule.exports=FileMap;\r\n\r\n},{}],9:[function(require,module,exports){\r\n/*global Worker*/\r\n// Browser Side\r\nlet idseq=0;\r\nclass Wrapper {\r\n    constructor(worker) {\r\n        const t=this;\r\n        t.idseq=1;\r\n        t.queue={};\r\n        t.worker=worker;\r\n        t.readyQueue=[];\r\n        worker.addEventListener(\"message\",function (e) {\r\n            var d=e.data;\r\n            if (d.reverse) {\r\n                t.procReverse(e);\r\n            } else if (d.ready) {\r\n                t.ready();\r\n            } else if (d.id) {\r\n                t.queue[d.id](d);\r\n                delete t.queue[d.id];\r\n            }\r\n        });\r\n        t.run(\"WorkerService/isReady\").then(function (r) {\r\n            if (r) t.ready();\r\n        });\r\n    }\r\n    procReverse(e) {\r\n        const t=this;\r\n        var d=e.data;\r\n        var id=d.id;\r\n        var path=d.path;\r\n        var params=d.params;\r\n        try {\r\n            Promise.resolve(paths[path](params)).then(function (r) {\r\n                t.worker.postMessage({\r\n                    reverse:true,\r\n                    status:\"ok\",\r\n                    id:id,\r\n                    result: r\r\n                });\r\n            },sendError);\r\n        } catch(err) {\r\n            sendError(err);\r\n        }\r\n        function sendError(e) {\r\n            e=Object.assign({name:e.name, message:e.message, stack:e.stack},e||{});\r\n            try {\r\n                const j=JSON.stringify(e);\r\n                e=JSON.parse(j);\r\n            } catch(je) {\r\n                e=e ? e.message || e+\"\" : \"unknown\";\r\n                console.log(\"WorkerServiceW\", je, e);\r\n            }\r\n            t.worker.postMessage({\r\n                reverse: true,\r\n                id:id, error:e, status:\"error\"\r\n            });\r\n        }\r\n    }\r\n    ready() {\r\n        const t=this;\r\n        if (t.isReady) return;\r\n        t.isReady=true;\r\n        console.log(\"Worker is ready!\");\r\n        t.readyQueue.forEach(function (f){ f();});\r\n    }\r\n    readyPromise() {\r\n        const t=this;\r\n        return new Promise(function (succ) {\r\n            if (t.isReady) return succ();\r\n            t.readyQueue.push(succ);\r\n        });\r\n    }\r\n    run(path, params) {\r\n        const t=this;\r\n        return t.readyPromise().then(function() {\r\n            return new Promise(function (succ,err) {\r\n                var id=t.idseq++;\r\n                t.queue[id]=function (e) {\r\n                    //console.log(\"Status\",e);\r\n                    if (e.status==\"ok\") {\r\n                        succ(e.result);\r\n                    } else {\r\n                        err(e.error);\r\n                    }\r\n                };\r\n                t.worker.postMessage({\r\n                    id: id,\r\n                    path: path,\r\n                    params: params\r\n                });\r\n            });\r\n        });\r\n    }\r\n    terminate() {\r\n        const t=this;\r\n        t.worker.terminate();\r\n    }\r\n}\r\nvar paths={};\r\nconst WorkerService={\r\n    Wrapper:Wrapper,\r\n    load: function (src) {\r\n        var w=new Worker(src);\r\n        return new Wrapper(w);\r\n    },\r\n    install: function (path, func) {\r\n        paths[path]=func;\r\n    },\r\n    serv: function (path,func) {\r\n        this.install(path,func);\r\n    }\r\n};\r\nWorkerService.serv(\"console/log\", function (params){\r\n    console.log.apply(console,params);\r\n});\r\nmodule.exports=WorkerService;\r\n\r\n},{}],10:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],11:[function(require,module,exports){\r\n/*define(function (require,exports,module) {\r\n    const F=require(\"ProjectFactory\");\r\n    const root=require(\"root\");\r\n    const SourceFiles=require(\"SourceFiles\");\r\n    const langMod=require(\"langMod\");\r\n    */\r\n    const F=require(\"./ProjectFactory\");\r\n    const root=require(\"../lib/root\");\r\n    const SourceFiles=require(\"../lang/SourceFiles\");\r\n    //const A=require(\"../lib/assert\");\r\n    const langMod=require(\"../lang/langMod\");\r\n\r\n    F.addType(\"compiled\",params=> {\r\n        if (params.namespace && params.url) return urlBased(params);\r\n        if (params.dir) return dirBased(params);\r\n        console.error(\"Invalid compiled project\", params);\r\n        throw new Error(\"Invalid compiled project\");\r\n    });\r\n    function urlBased(params) {\r\n        const ns=params.namespace;\r\n        const url=params.url;\r\n        const res=F.createCore();\r\n        return res.include(langMod).include({\r\n            getNamespace:function () {return ns;},\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes ns=\",ns,\"url=\",url);\r\n                await this.loadDependingClasses();\r\n                const s=SourceFiles.add({url});\r\n                await s.exec();\r\n                console.log(\"Loaded compiled classes ns=\",ns,\"url=\",url);\r\n            },\r\n        });\r\n    }\r\n    function dirBased(params) {\r\n        const res=F.createDirBasedCore(params);\r\n        return res.include(langMod).include({\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes params=\",params);\r\n                await this.loadDependingClasses();\r\n                const outJS=this.getOutputFile();\r\n                const map=outJS.sibling(outJS.name()+\".map\");\r\n                const sf=SourceFiles.add({\r\n                    text:outJS.text(),\r\n                    sourceMap:map.exists() && map.text(),\r\n                });\r\n                await sf.exec();\r\n                console.log(\"Loaded compiled classes params=\",params);\r\n            }\r\n        });\r\n    }\r\n    exports.create=params=>F.create(\"compiled\",params);\r\n    F.addDependencyResolver((prj, spec)=> {\r\n        if (spec.dir && prj.resolve) {\r\n            return F.create(\"compiled\",{dir:prj.resolve(spec.dir)});\r\n        }\r\n        if (spec.namespace && spec.url) {\r\n            return F.create(\"compiled\",spec);\r\n        }\r\n    });\r\n//});/*--end of define--*/\r\n\r\n},{\"../lang/SourceFiles\":3,\"../lang/langMod\":5,\"../lib/root\":10,\"./ProjectFactory\":12}],12:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n    // This factory will be widely used, even BitArrow.\r\n\r\n\r\n    let Compiler, SourceFiles,sysMod,run2Mod;\r\n    const  resolvers=[],types={};\r\n    exports.addDependencyResolver=(f)=>{\r\n        //f: (prj, spec) => prj\r\n        resolvers.push(f);\r\n    };\r\n    exports.addType=(n,f)=>{\r\n        types[n]=f;\r\n    };\r\n    exports.fromDependencySpec=function (prj,spec) {\r\n        if (typeof spec==\"string\") {\r\n            var prjDir=prj.resolve(spec);\r\n            return this.fromDir(prjDir);\r\n        }\r\n        for (let f of resolvers) {\r\n            const res=f(prj,spec);\r\n            if (res) return res;\r\n        }\r\n        console.error(\"Invalid dep spec\", spec);\r\n        throw new Error(\"Invalid dep spec\", spec);\r\n        /* else if (typeof dprj==\"object\") {\r\n            return this.create(\"compiled\", {\r\n                namespace:dprj.namespace,\r\n                url: FS.expandPath(dprj.compiledURL)\r\n            });\r\n        }*/\r\n    };\r\n    exports.create=function (type,params) {\r\n        if (!types[type]) throw new Error(`Invalid type ${type}`);\r\n        return types[type](params);\r\n    };\r\n    class ProjectCore {\r\n        getPublishedURL(){}//TODO\r\n        getOptions(opt) {return {};}//stub\r\n        getName() {\r\n            return this.dir.name().replace(/\\/$/,\"\");\r\n        }\r\n        getDependingProjects() {\r\n            var opt=this.getOptions();\r\n            var dp=(opt.compiler && opt.compiler.dependingProjects) || [];\r\n            return dp.map(dprj=>\r\n                ProjectCore.factory.fromDependencySpec(this,dprj)\r\n            );\r\n        }\r\n        include(mod) {\r\n            for (let k of Object.getOwnPropertyNames(mod)) {\r\n                if (typeof mod[k]===\"function\") this[k]=mod[k];\r\n            }\r\n            return this;\r\n        }\r\n        delegate(obj) {\r\n            if (obj.constructor.prototype) {\r\n                const add=k=>{\r\n                    if (typeof obj[k]===\"function\") this[k]=(...args)=>obj[k](...args);\r\n                };\r\n                for (let k of Object.getOwnPropertyNames(obj.constructor.prototype)) add(k);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n    ProjectCore.factory=exports;\r\n    exports.createCore=()=>new ProjectCore();\r\n    const dirBasedMod={\r\n        getDir() {return this.dir;},\r\n        resolve(rdir){// not in compiledProject\r\n            if (rdir instanceof Array) {\r\n                var res=[];\r\n                rdir.forEach(function (e) {\r\n                    res.push(this.resolve(e));\r\n                });\r\n                return res;\r\n            }\r\n            if (typeof rdir==\"string\") {\r\n                /*global FS*/ //TODO\r\n                if (typeof FS!==\"undefined\") {\r\n                    return FS.resolve(rdir, this.getDir().path());\r\n                } else {\r\n                    return this.getDir().rel(rdir);\r\n                }\r\n            }\r\n            if (!rdir || !rdir.isDir) throw new Error(\"Cannot TPR.resolve: \"+rdir);\r\n            return rdir;\r\n        },\r\n        getOptions(opt) {\r\n            return this.getOptionsFile().obj();\r\n        },\r\n        getOptionsFile() {// not in compiledProject\r\n            var resFile=this.dir.rel(\"options.json\");\r\n            return resFile;\r\n        },\r\n        setOptions(opt) {// not in compiledProject\r\n            return this.getOptionsFile().obj(opt);\r\n        },\r\n        getOutputFile(lang) {// not in compiledProject\r\n            var opt=this.getOptions();\r\n            var outF=this.resolve(opt.compiler.outputFile||\"js/concat.js\");\r\n            if (outF.isDir()) {\r\n                throw new Error(\"out: directory style not supported\");\r\n            }\r\n            return outF;\r\n        },\r\n        removeOutputFile() {// not in compiledProject\r\n            this.getOutputFile().rm();\r\n        },\r\n        path(){return this.dir.path();},// not in compiledProject\r\n        getEXT() {throw new Error(\"getEXT must be overriden.\");},//stub\r\n        sourceFiles() {\r\n            const res={};\r\n            const ext=this.getEXT();\r\n    \t\tthis.dir.recursive(collect);\r\n    \t\tfunction collect(f) {\r\n    \t\t\tif (f.endsWith(ext)) {\r\n    \t\t\t\tvar nb=f.truncExt(ext);\r\n    \t\t\t\tres[nb]=f;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn res;\r\n        }\r\n    };\r\n    exports.createDirBasedCore=function (params) {\r\n        const res=this.createCore();\r\n        res.dir=params.dir;\r\n        return res.include(dirBasedMod);\r\n    };\r\n//});/*--end of define--*/\r\n\r\n},{}]},{},[2])(2)\r\n});\r\n\ndefine('ProjectFactory',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.ProjectFactory;\r\n});\r\n\ndefine('BuilderClient',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient;\r\n});\r\n\ndefine('Content',[\"FS\"],function (FS){return FS.Content;});\r\n\ndefine('thumbnail',[\"ImageRect\",\"Content\"],function (IR,Content) {\r\n    var TN={};\r\n    var createThumbnail;\r\n    var NAME=\"$icon_thumbnail\";\r\n    var WIDTH=200;HEIGHT=200;\r\n    TN.set=function (prj,delay) {\r\n        setTimeout(function () { crt(prj);} ,delay);\r\n    };\r\n    TN.get=function (prj) {\r\n        var f=TN.file(prj);\r\n        if (!f.exists()) return null;\r\n        return f.text();\r\n    };\r\n    TN.file=function (prj) {\r\n        var prjdir=prj.getDir();\r\n        var imfile= prjdir.rel(\"images/\").rel(\"icon_thumbnail.png\");\r\n        //console.log(\"Thumb file=\",imfile.path(),imfile.exists());\r\n        return imfile;\r\n    };\r\n    function crt(prj) {\r\n        try {\r\n            var img=Tonyu.globals.$Screen.buf[0];\r\n            var cv=$(\"<canvas>\").attr({width:WIDTH,height:HEIGHT});\r\n            IR(img, cv[0]);\r\n            var url=cv[0].toDataURL();\r\n            var rsrc=prj.getResource();\r\n            var prjdir=prj.getDir();\r\n            var imfile=TN.file(prj);\r\n            imfile.text( url );\r\n            var item={\r\n                name:NAME,\r\n                pwidth:WIDTH,pheight:HEIGHT,\r\n                url:\"ls:\"+imfile.relPath(prjdir)\r\n            };\r\n            var imgs=rsrc.images;\r\n            var add=false;\r\n            for (var i=0 ; i<imgs.length ; i++) {\r\n                if (imgs[i].name==NAME) {\r\n                    imgs[i]=item;\r\n                    add=true;\r\n                }\r\n            }\r\n            if (!add) imgs.push(item);\r\n\r\n            prj.setResource(rsrc);\r\n            console.log(\"setRSRC\",rsrc);\r\n        } catch (e) {\r\n            console.log(\"Create thumbnail failed\",e);\r\n            console.log(e.stack);\r\n        }\r\n    };\r\n    return TN;\r\n});\r\n\ndefine('sysMod',[\"Tonyu\", \"FS\", \"ImageList\",\r\n        \"Blob\",\"thumbnail\",\"WebSite\",\"plugins\",\r\n        \"DeferredUtil\"],\r\n        function (Tonyu, FS, ImageList,\r\n                Blob,thumbnail,WebSite,plugins,\r\n                DU) {\r\n// (was TonyuProject)\r\nreturn {\r\n    /*stop:function () {\r\n        var cur=this.runningThread; // Tonyu.getGlobal(\"$currentThreadGroup\");\r\n        if (cur) cur.kill();\r\n        var main=this.runningObj;\r\n        if (main && main.stop) return main.stop();\r\n    },*/\r\n    rawRun:function (bootClassName) {\r\n        if (WebSite.removeJSOutput) {\r\n            var o=this.getOutputFile();\r\n            if (o.exists()) o.rm();\r\n        }\r\n        return this.loadClasses().then(()=>{\r\n            //TPR.compile();\r\n            this.detectPlugins();\r\n            this.fixBootRunClasses();\r\n            if (!this.runScriptMode) thumbnail.set(this, 2000);\r\n            this.rawBoot(bootClassName);\r\n        });\r\n    },\r\n    getResourceFile: function () {\r\n        return this.getDir().rel(\"res.json\");\r\n    },\r\n    getResource: function () {\r\n        var resFile=this.getResourceFile();\r\n        if (resFile.exists()) {\r\n            var res=resFile.obj();\r\n            var chg=false;\r\n            for (var imgSnd in res) {\r\n                var ary=res[imgSnd];\r\n                for (var i=ary.length-1; i>=0 ;i--) {\r\n                    if (!ary[i].url) {\r\n                        ary.splice(i,1);\r\n                        chg=true;\r\n                    }\r\n                }\r\n            }\r\n            if (chg) this.setResource(res);\r\n            return res;\r\n        }\r\n        return Tonyu.defaultResource;\r\n    },\r\n    hasSoundResource: function () {\r\n        var res=this.getResource();\r\n        return res && res.sounds && res.sounds.length>0;\r\n    },\r\n    setResource: function (rsrc) {\r\n        var resFile=this.getResourceFile();\r\n        resFile.obj(rsrc);\r\n    },\r\n    getThumbnail: function () {\r\n        return thumbnail.get(this);\r\n    },\r\n    convertBlobInfos: function (user) {\r\n        var rsrc=this.getResource();\r\n        var name=this.getName();\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        o[k]=[Blob.BLOB_PATH_EXPR,user,name,a.fileName].join(\"/\");\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        this.setResource(rsrc);\r\n    },\r\n    getBlobInfos: function () {\r\n        var rsrc=this.getResource();\r\n        var res=[];\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        res.push(a);\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        return res;\r\n    },\r\n    loadResource: function (next) {\r\n        var r=this.getResource();\r\n        ImageList( r.images, function (r) {\r\n            var sp=Tonyu.getGlobal(\"$Sprites\");\r\n            if (sp) {\r\n                //console.log(\"$Sprites set!\");\r\n                sp.setImageList(r);\r\n            }\r\n            //Sprites.setImageList(r);\r\n            for (var i in r.names) {\r\n                Tonyu.setGlobal(i, r.names[i]);\r\n            }\r\n            if (next) next();\r\n        });\r\n    },\r\n    detectPlugins: function () {\r\n        var opt=this.getOptions();\r\n        var plugins=opt.plugins=opt.plugins||{};\r\n        if (!plugins.Mezonet || !plugins.PicoAudio) {\r\n            var res=this.getResource();\r\n            var hasMZO=false,hasMIDI=false;\r\n            if (res.sounds) res.sounds.forEach(function (item) {\r\n                if (item.url.match(/\\.mzo/)) hasMZO=true;\r\n                if (item.url.match(/\\.midi?/)) hasMIDI=true;\r\n            });\r\n            if (hasMZO) this.addPlugin(\"Mezonet\");\r\n            else this.removePlugin(\"Mezonet\");\r\n            if (hasMIDI) this.addPlugin(\"PicoAudio\");\r\n            else this.removePlugin(\"PicoAudio\");\r\n        }\r\n    },\r\n    addPlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        if (!opt.plugins[name]) {\r\n            opt.plugins[name]=1;\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    removePlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        if (opt.plugins[name]) {\r\n            delete opt.plugins[name];\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    requestPlugin: function (name) {\r\n        this.addPlugin(name);\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"\"+name+\"\");\r\n        req.pluginName=name;\r\n        throw req;\r\n    },\r\n    loadPlugins: function (onload) {\r\n        var opt=this.getOptions();\r\n        return plugins.loadAll(opt.plugins,onload);\r\n    },\r\n    fixBootRunClasses: function () {\r\n        var opt=this.getOptions();\r\n        if (opt.run) {\r\n            var mc=this.fixClassName(opt.run.mainClass);\r\n            var bc=this.fixClassName(opt.run.bootClass);\r\n            if (mc!=opt.run.mainClass  ||  bc!=opt.run.bootClass) {\r\n                opt.run.mainClass=mc;\r\n                opt.run.bootClass=bc;\r\n                this.setOptions(opt);\r\n            }\r\n        }\r\n    },\r\n    fixClassName: function (className) {\r\n        if (Tonyu.classMetas[className]) return className;\r\n        const ns=this.getNamespace();\r\n        console.log(\"NS\", ns);\r\n        let res=Tonyu.classes[ns][className];\r\n        if (res) return `${ns}.${className}`;\r\n        for (var k in Tonyu.classes) {\r\n            res=Tonyu.classes[k][className];\r\n            if (res) return `${k}.${className}`;\r\n        }\r\n        throw new Error(`Cannot fix className ${className}`);\r\n    },\r\n    rawBoot: function (bootClassName) {\r\n        this.showProgress(\"Running \"+bootClassName);\r\n        this.initCanvas();\r\n        Tonyu.run(bootClassName);\r\n    },\r\n    initCanvas: function () {\r\n        Tonyu.globals.$mainCanvas=$(\"canvas\");\r\n    },\r\n    /*isKernelEditable: function () {\r\n    \treturn env.options.kernelEditable;\r\n    },*/\r\n    //TPR.getDir=function () {return dir;};\r\n    //TPR.getName=function () { return dir.name().replace(/\\/$/,\"\"); };\r\n\r\n    showProgress: function (m) {\r\n        console.log(\"PROGRESS\",m);\r\n        /*global SplashScreen*/\r\n        if (typeof SplashScreen!=\"undefined\") {\r\n            SplashScreen.progress(m);\r\n        }\r\n        return DU.promise(function (succ) {\r\n            setTimeout(succ,0);\r\n        });\r\n    }\r\n};\r\n});\r\n\ndefine('CompiledProject',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.CompiledProject;\r\n});\r\n\ndefine('IDEProject',['require','exports','module','ProjectFactory','BuilderClient','root','sysMod','CompiledProject','WebSite'],function (require,exports,module) {\r\n    const F=require(\"ProjectFactory\");\r\n    //const A=require(\"assert\");\r\n    const BuilderClient=require(\"BuilderClient\");\r\n    const root=require(\"root\");\r\n    const sysMod=require(\"sysMod\");\r\n    const CP=require(\"CompiledProject\");\r\n    const WebSite=require(\"WebSite\");\r\n    const langMod=BuilderClient.langMod;\r\n    /*F.addDependencyResolver((prj,spec)=> {\r\n        if (spec.namespace) {\r\n\r\n        }\r\n    });*/\r\n    F.addType(\"IDE\",params=>{\r\n        const ide=params.ide;\r\n        const res=F.createDirBasedCore(params);\r\n        const ns2depspec= {\r\n            kernel: {namespace:\"kernel\", url: WebSite.compiledKernel}\r\n        };\r\n        const c=new BuilderClient(res ,{\r\n            worker: {ns2depspec, url: \"BuilderWorker.js\"/*WORKER_URL*/}\r\n        });\r\n        F.addDependencyResolver((prj,spec)=>{\r\n            if (ns2depspec[spec.namespace]) {\r\n                return CP.create(ns2depspec[spec.namespace]);\r\n            }\r\n        });\r\n        c.onCompiled=function (src) {\r\n            console.log(\"Sending src\",src);\r\n            const rp=res.getIframeProject();\r\n            if (rp) rp.exec(src).catch(e=>console.error(e));\r\n        };\r\n        let curDebugger;\r\n        root.onTonyuDebuggerReady=d=>{\r\n            d.on(\"runtimeError\",e=>{\r\n                console.log(\"runt\",e.stack.map(s=>s+\"\").join(\"\\n\"));\r\n                ide.showError(e);\r\n            });\r\n            curDebugger=d;\r\n            c.setDebugger(d);\r\n        };\r\n        res.setDebugger=d=>c.setDebugger(d);\r\n        res.compiler=c;\r\n        res.getIframeProject=()=>{\r\n            const ifrm=root.document.querySelector(\"iframe\");\r\n            if (ifrm) return ifrm.contentWindow.Project;\r\n        };\r\n        res.disconnectDebugger=()=>c.setDebugger();\r\n        res.fullCompile=c.fullCompile.bind(c);\r\n        res.partialCompile=c.partialCompile.bind(c);\r\n        res.renameClassName=c.renameClassName.bind(c);\r\n        res.include(sysMod).include(langMod);\r\n        res.stop=()=>{\r\n            try {\r\n                if (curDebugger) curDebugger.stop();\r\n            }catch(e) {\r\n                //Edge: Can't execute code from a freed script\r\n                console.error(e);\r\n            }\r\n        };\r\n        /*res.getOutputFile=function () {\r\n            // relative path in outputFile will fail old version\r\n            var opt=this.getOptions();\r\n            var o=opt.compiler.outputFile||\"js/concat.js\";\r\n            var outF=this.resolve(opt.compiler.outputFile);\r\n            return outF;\r\n        };*/\r\n        console.log(\"res.loadClasses\", res.loadClasses) ;\r\n        /*Object.assign(res,{\r\n            async loadClasses() {\r\n                await this.loadDependingClasses();\r\n\r\n            }\r\n        });*/\r\n        return res;\r\n    });\r\n    exports.create=params=>F.create(\"IDE\",params);\r\n\r\n});\r\n\ndefine('optionFixer',[\"Tonyu\"],function (Tonyu) {\r\n    const NSP_USR=\"user\",NSP_KER=\"kernel\";\r\n    const defaultOptions={\r\n        compiler: {\r\n            namespace:NSP_USR,\r\n            defaultSuperClass: `${NSP_KER}.Actor`,\r\n            // relative path in outputFile will fail old version\r\n            //outputFile: \"js/concat.js\",\r\n            dependingProjects: [{namespace:NSP_KER}],\r\n        },\r\n        run: {\r\n            mainClass: `${NSP_USR}.Main`,\r\n            bootClass: `${NSP_KER}.Boot`,\r\n            globals:{\r\n                $defaultFPS:60,\r\n                $imageSmoothingDisabled:true,\r\n                $soundLoadAndDecode:false\r\n            }\r\n        },\r\n        kernelEditable: false,\r\n        language:\"tonyu\",\r\n        version: Tonyu.VERSION\r\n    };\r\n    Tonyu.defaultOptions=defaultOptions;\r\n    return {\r\n        fixFile: function (f) {\r\n            if (!f.exists()) {\r\n                f.obj(defaultOptions);\r\n                return;\r\n            }\r\n            const t=f.text();\r\n            const o=JSON.parse(t);\r\n            const fo=this.fixObject(o);\r\n            const ft=JSON.stringify(fo);\r\n            if(t!==ft) f.text(ft);\r\n        },\r\n        fixObject:function (o) {\r\n            this.fixOptions(o);\r\n            this.fixBootRunClasses(o);\r\n            return o;\r\n        },\r\n        fixOptions: function (opt) {//override\r\n            if (!opt.compiler) opt.compiler={};\r\n            //opt.compiler.commentLastPos=TPR.runScriptMode || StackTrace.isAvailable();\r\n            if (!opt.plugins) {\r\n                opt.plugins={};\r\n                /*dir.each(function (f) {\r\n                    if (f.endsWith(TPR.EXT)) {\r\n                        plugins.detectNeeded(  f.text(), opt.plugins);\r\n                    }\r\n                });*/\r\n            }\r\n            opt.compiler.dependingProjects=opt.compiler.dependingProjects||[{namespace:\"kernel\"}];\r\n            opt.compiler.namespace=opt.compiler.namespace||\"user\";\r\n            // relative path in outputFile will fail old version\r\n            //opt.compiler.outputFile=opt.compiler.outputFile||\"js/concat.js\";\r\n            opt.run=opt.run||{};\r\n            opt.language=\"tonyu\";\r\n        },\r\n        fixBootRunClasses: function (opt) {\r\n            if (opt.run) {\r\n                var mc=this.fixClassName(opt.run.mainClass);\r\n                var bc=this.fixClassName(opt.run.bootClass);\r\n                if (mc!=opt.run.mainClass  ||  bc!=opt.run.bootClass) {\r\n                    opt.run.mainClass=mc;\r\n                    opt.run.bootClass=bc;\r\n                }\r\n            }\r\n        },\r\n        fixClassName: function (cn) {\r\n            //if (TPR.classExists(cn)) return cn;\r\n            if (Tonyu.getClass(cn)) return cn;\r\n            var cna=cn.split(\".\");\r\n            var sn=cna.pop();\r\n            var res;\r\n            res=NSP_USR+\".\"+sn;\r\n            if (Tonyu.getClass(res)) return res;\r\n            //if (TPR.classExists(res)) return res;\r\n            res=NSP_KER+\".\"+sn;\r\n            if (Tonyu.getClass(res)) return res;\r\n            //if (TPR.classExists(res)) return res;\r\n            return cn;\r\n        }\r\n    };\r\n\r\n});\r\n\ndefine('SourceFiles',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.SourceFiles;\r\n});\r\n\n/*global requirejs, require*/\r\nrequirejs([\"Util\", \"Tonyu\", \"FS\", \"PathUtil\",\"FileList\", \"FileMenu\",\r\n           \"ErrorDialog\", \"fixIndent\", \"Wiki\",\r\n           \"Shell\",\"Shell2\",\"ProjectOptionsEditor\",\"copyToKernel\",\"KeyEventChecker\",\r\n           \"IFrameDialog\",\"runtime\", \"KernelDiffDialog\",\"Sync\",\"searchDialog\",\"syncWithKernel\",\r\n           \"UI\",\"ResEditors\",\"WebSite\",\"exceptionCatcher\",\r\n           \"Log\",\"MainClassDialog\",\"DeferredUtil\",\"NWMenu\",\r\n           \"mkrunDiag\",\"zip\",\"LSFS\",\"WebFS\",\r\n           \"extLink\",\"DiagAdjuster\",\"ExportHTMLDialog\",\"DebugDialog\",\"GlobalDialog\",\r\n           \"root\",\"IDEProject\",\"optionFixer\",\"SourceFiles\"\r\n          ],\r\nfunction (Util, Tonyu, FS, PathUtil, FileList, FileMenu,\r\n          ErrorDialog, fixIndent, Wiki,\r\n          sh,sh2, ProjectOptionsEditor, ctk, KeyEventChecker,\r\n          IFrameDialog, rt , KDD,Sync,searchDialog,swk,\r\n          UI,ResEditors,WebSite,EC,\r\n          Log,MainClassDialog,DU,NWMenu,\r\n          mkrunDiag,zip,LSFS,WebFS,\r\n          extLink,DiagAdjuster,ExportHTMLDialog,DebugDialog,GlobalDialog,\r\n          root,IDEProject,optionFixer,SourceFiles\r\n          ) {\r\n$(function () {\r\n    if (!WebSite.isNW) {\r\n        FS.mount(location.protocol+\"//\"+location.host+\"/\", new WebFS());\r\n    }\r\n    if (WebSite.serverType===\"projectBoard\") {\r\n        $.ajax(\"../../../a.php?Test/test\").then(function (r){console.log(\"Session\",r);});\r\n    }\r\n    $.get(\"https://edit.tonyu.jp/doc/welcome_edit.html?a\").then(function (t) {\r\n        $(\"#welcome\").append(t);\r\n    });\r\n\r\n    /*\r\n    location.href\r\n\"chrome-extension://olbcdbbkoeedndbghihgpljnlppogeia/Demo/index.html\"\r\nwindow.open(\"chrome-extension://olbcdbbkoeedndbghihgpljnlppogeia/Demo/Explode/index.html\")\r\n    */\r\n\r\n    var F=EC.f;\r\n    root.$LASTPOS=0;\r\n    //copySample();\r\n    var mobile=WebSite.mobile || FS.get(WebSite.tonyuHome).rel(\"mobile.txt\").exists();\r\n    if (mobile) {\r\n        $(\"#fileViewer\").hide();\r\n        $(\"#runAreaParent\").hide();\r\n        $(\"#mainArea\").attr(\"class\",\"col-xs-12\");\r\n        $(\"#fileSel\").show();\r\n    }\r\n    var home=FS.get(WebSite.tonyuHome);\r\n    //if (!Tonyu.ide)  Tonyu.ide={};\r\n    var kernelDir;\r\n    /*if (WebSite.kernelDir && !PathUtil.isURL(WebSite.kernelDir)){\r\n        kernelDir=FS.get(WebSite.kernelDir);//home.rel(\"Kernel/\");\r\n        if (kernelDir.exists()) {\r\n            TPRC(kernelDir).loadClasses().fail(function (e) {\r\n                console.log(e);\r\n                alert(\"Kernel compile error!\");\r\n            });\r\n        }\r\n    }*/\r\n    var dir=Util.getQueryString(\"dir\", \"/Tonyu/Projects/SandBox/\");\r\n    var curPrjDir=FS.get(dir);\r\n    const optionFile=curPrjDir.rel(\"options.json\");\r\n    optionFixer.fixFile(optionFile);\r\n    //var curProjectDir=curPrjDir;\r\n    //console.log(\"F\",F,root);\r\n    const ide={restart,stop,displayMode,jump};\r\n    const curPrj=IDEProject.create({dir:curPrjDir,ide});//, kernelDir);\r\n    ide.project=curPrj;\r\n    const NSP_USR=curPrj.getNamespace();\r\n\r\n    root.curPrj=curPrj;\r\n    var resEditors=new ResEditors(curPrj);\r\n    Tonyu.globals.$currentProject=curPrj;\r\n    Tonyu.currentProject=curPrj;\r\n    var EXT=curPrj.getEXT();\r\n    var desktopEnv=loadDesktopEnv();\r\n    var runMenuOrd=desktopEnv.runMenuOrd;\r\n    var exportHTMLDialog=new ExportHTMLDialog(curPrj);\r\n    function setDiagMode(d) {\r\n        var opt=curPrj.getOptions();\r\n        if (opt.compiler.diagnose!=d) {\r\n            opt.compiler.diagnose=d;\r\n            curPrj.setOptions(opt);\r\n        }\r\n    }\r\n    Tonyu.defaultResource={\r\n       images:[\r\n          {name:\"$pat_base\", url: \"images/base.png\", pwidth:32, pheight:32},\r\n          {name:\"$pat_sample\", url: \"images/Sample.png\"},\r\n          {name:\"$pat_neko\", url: \"images/neko.png\", pwidth:32, pheight:32},\r\n          {name:\"$pat_mapchip\", url: \"images/mapchip.png\", pwidth:32, pheight:32}\r\n       ],\r\n       sounds:[]\r\n    };\r\n    const resf=curPrj.getResourceFile();\r\n    if (!resf.exists()) resf.obj(Tonyu.defaultResource);\r\n    /*if (location.href.match(/^file/)) {\r\n       Tonyu.defaultResource.images.splice(1,1);\r\n   }*/\r\n\r\n    setDiagMode(false);\r\n    //var screenH;\r\n    //var runDialogMode,dialogClosed;\r\n    var runDialogParam={\r\n        screenH:200,\r\n        onClose: stop,\r\n        desktopEnv: desktopEnv,\r\n        prj: curPrjDir.path()\r\n    };\r\n    function onResize() {\r\n        //console.log($(window).height(), $(\"#navBar\").height());\r\n        var h=$(window).height()-$(\"#navBar\").height();\r\n        h-=20;\r\n        runDialogParam.screenH=h;\r\n        //if (!runDialogMode) resizeCanvas($(\"#runArea\").width(),screenH);\r\n        $(\"#progs pre\").css(\"height\",h+\"px\");\r\n        $(\"#fileItemList\").height(h);\r\n    }\r\n    onResize();\r\n    var editors={};\r\n    KeyEventChecker.down(document,\"F9\",F(run));\r\n    KeyEventChecker.down(document,\"F2\",F(stop));\r\n    KeyEventChecker.down(document,\"ctrl+s\",F(function (e) {\r\n    \tsave();\r\n    \te.stopPropagation();\r\n    \te.preventDefault();\r\n    \treturn false;\r\n    }));\r\n    $(window).resize(F(onResize));\r\n    $(\"body\")[0].spellcheck=false;\r\n    sh.cd(curPrjDir);\r\n\r\n    var fl=FileList($(mobile?\"#fileSel\":\"#fileItemList\"),{\r\n        topDir: curPrjDir,\r\n        on:{\r\n            select: F(open),\r\n            displayName: dispName\r\n        }\r\n    });\r\n    var FM=FileMenu();\r\n    FM.fileList=fl;\r\n    $(\"#newFile\").click(F(FM.create));\r\n    $(\"#mvFile\").click(F(FM.mv));\r\n    $(\"#rmFile\").click(F(FM.rm));\r\n    $(\"#closeFile\").click(F(function () {\r\n        var inf=getCurrentEditorInfo();\r\n        if (inf) {\r\n            close(inf.file);\r\n        }\r\n    }));\r\n    $(\"#runDialog\").click(F(function () {\r\n        runDialog.show(true);\r\n    }));\r\n\r\n    FM.on.close=close;\r\n    FM.on.ls=ls;\r\n    FM.on.validateName=fixName;\r\n    FM.on.createContent=function (f) {\r\n        /*var k=curPrj.isKernel(f.truncExt(EXT));\r\n        if (k) {\r\n            f.text(k.text());\r\n        } else {*/\r\n            f.text(\"\");\r\n        //}\r\n    };\r\n    FM.on.displayName=function (f) {\r\n        var r=dispName(f);\r\n        if (r) {\r\n            return r;\r\n        }\r\n        return f.name();\r\n    };\r\n    var refactorUI;\r\n    FM.on.mvExtraUI=function (d) {\r\n        refactorUI=UI(\"div\",[\"input\",{type:\"checkbox\",$var:\"chk\",checked:\"true\",value:\"chked\"}],\"\");\r\n        d.append(refactorUI);\r\n    };\r\n    FM.on.mv=async function (old,_new) {\r\n        if (!refactorUI) return;\r\n        const refactor=refactorUI.$vars.chk.prop(\"checked\");\r\n        await save();\r\n        if (refactor) {\r\n            var oldCN=old.truncExt(EXT);\r\n            var newCN=_new.truncExt(EXT);\r\n            try {\r\n                const ren=await curPrj.renameClassName(oldCN,newCN);\r\n                console.log(\"REN\",ren);\r\n                FM.on.ls();\r\n                FM.on.open(_new);\r\n            } catch(e) {\r\n                alert(\"\");\r\n                console.error(e);\r\n                console.log(e);\r\n            }\r\n        } else {\r\n            reloadFromFiles();\r\n        }\r\n        refactorUI=null;\r\n        if (root.SplashScreen) root.SplashScreen.hide();\r\n        console.log(\"REN2\",!refactor);\r\n        return !refactor;\r\n    };\r\n    F(FM.on);\r\n    fl.ls(curPrjDir);\r\n    refreshRunMenu();\r\n    function ls(){\r\n        fl.ls(curPrjDir);\r\n        refreshRunMenu();\r\n    }\r\n    function refreshRunMenu() {\r\n        curPrjDir.each(function (f) {\r\n            if (f.endsWith(EXT)) {\r\n                var n=f.truncExt(EXT);\r\n                if (runMenuOrd.indexOf(n)<0) {\r\n                    runMenuOrd.push(n);\r\n                }\r\n            }\r\n        });\r\n        var i;\r\n        for (i=runMenuOrd.length-1; i>=0 ; i--) {\r\n            var f=curPrjDir.rel(runMenuOrd[i]+EXT);\r\n            if (!f.exists()) {\r\n                runMenuOrd.splice(i,1);\r\n            }\r\n        }\r\n        $(\"#runMenu\").empty();\r\n        i=0;\r\n        runMenuOrd.forEach(function(n) {\r\n            var ii=i;\r\n            if (typeof n!=\"string\") {console.log(n); alert(\"not a string: \"+n);}\r\n            if (ii>=15) return;\r\n            $(\"#runMenu\").append(\r\n                    $(\"<li>\").append(\r\n                            $(\"<a>\").attr(\"href\",\"#\").text(n+\"\"+(i==0?\"(F9)\":\"\")).click(F(function () {\r\n                                if (typeof n!=\"string\") {console.log(n); alert(\"not a string2: \"+n);}\r\n                                run(`${NSP_USR}.${n}`);\r\n                                if (ii>0) {\r\n                                    runMenuOrd.splice(ii, 1);\r\n                                    runMenuOrd.unshift(n);\r\n                                    refreshRunMenu();\r\n                                    saveDesktopEnv();\r\n                                }\r\n                            }))));\r\n            i++;\r\n        });\r\n        $(\"#runMenu\").append(\r\n                $(\"<li>\").append(\r\n                        $(\"<a>\").attr(\"href\",\"#\").text(\"(F2)\").click(F(function () {\r\n                            stop();\r\n                        }))));\r\n        $(\"#runMenu\").append(\r\n                $(\"<li>\").append(\r\n                        $(\"<a>\").attr(\"href\",\"#\").text(\"...\").click(F(function () {\r\n                            var diag=MainClassDialog.show(curPrj,{on:{done:function (n,dorun) {\r\n                                var ii=runMenuOrd.indexOf(n);\r\n                                if (ii>0) {\r\n                                    runMenuOrd.splice(ii, 1);\r\n                                    runMenuOrd.unshift(n);\r\n                                    refreshRunMenu();\r\n                                    saveDesktopEnv();\r\n                                }\r\n                                if (dorun) run(n);\r\n                            }}});\r\n                            diag.$vars.mainClass.empty();\r\n                            runMenuOrd.forEach(function (m) {\r\n                                diag.$vars.mainClass.append(UI(\"option\",{value:m},m));\r\n                            });\r\n                        }))));\r\n\r\n        //saveDesktopEnv();\r\n        $(\"#exportToJsdoit\").attr(\"href\", \"javascriptoo\".replace(\"oo\",\":;\")).click(function () {\r\n            exportHTMLDialog.show({\r\n                excludes:{\"js/concat.js\":1,\"js/concat.js.map\":1},\r\n                includeJSScript:true\r\n            });\r\n        });\r\n        //$(\"#exportToJsdoit\").attr(\"href\", \"exportToJsdoit.html?dir=\"+curPrjDir.path());//+\"&main=\"+runMenuOrd[0]);\r\n        $(\"#exportToExe\").attr(\"href\", \"exportToExe.html?dir=\"+curPrjDir.path());//+\"&main=\"+runMenuOrd[0]);\r\n    }\r\n    function dispName(f) {\r\n        var name=f.name();\r\n        if (f.isDir()) return name;\r\n        if (f.endsWith(EXT)) return f.truncExt(EXT);\r\n        return null;\r\n    }\r\n    function isKernel() {\r\n        return false;//TODO\r\n    }\r\n    function fixName(name, options) {\r\n        var upcased=false;\r\n        //if (name==\"aaaa\") throw new Error(\"iikagen name error \"+EC.enter);\r\n        if (name.match(/^[a-z]/)) {\r\n            name= name.substring(0,1).toUpperCase()+name.substring(1);\r\n            upcased=true;\r\n        }\r\n        if (name.match(/^[A-Z_][a-zA-Z0-9_]*$/)) {\r\n            var dir=fl.curDir();\r\n            var sysdir={files:1, static:1 ,maps:1};\r\n            if (sysdir[dir.relPath(curPrjDir).replace(/\\/*/,\"\")]) {\r\n                return {ok:false, reason:dir.name()+\"\"};\r\n            }\r\n            if (isKernel(name)) {\r\n                /*if (curPrj.getOptions().kernelEditable) {\r\n                    return {ok:true, file: dir.rel(name+EXT),\r\n                        note: options.action==\"create\"? \"Kernel\"+name+\"\" :\"\"};\r\n                } else {*/\r\n                    return {ok:false, reason:name+\"\"};\r\n                //}\r\n            }\r\n            if (upcased) {\r\n                //name= name.substring(0,1).toUpperCase()+name.substring(1);\r\n                return {ok:true, file: dir.rel(name+EXT), note: \"(\"+name+\") \"};\r\n            }\r\n            return {ok:true, file: dir.rel(name+EXT)};\r\n        } else {\r\n            return {ok:false, reason:\"(_)\"};\r\n        }\r\n    }\r\n    function getCurrentEditorInfo() {\r\n        var f=fl.curFile();\r\n        if (!f) return null;\r\n        return editors[f.path()];\r\n    }\r\n    function getCurrentEditor() {\r\n        var i=getCurrentEditorInfo();\r\n        if (i) return i.editor;\r\n        return null;\r\n    }\r\n    var runDialog=new DebugDialog(runDialogParam);\r\n    function displayMode(mode, next) {\r\n        // mode == run     compile_error     runtime_error    edit\r\n        var prog=getCurrentEditor();\r\n        switch(mode) {\r\n        case \"run\":\r\n            if (prog) prog.blur();\r\n            errorDialog.close();\r\n            //showErrorPos($(\"#errorPos\"));\r\n            //$(\"#errorPos\").hide();// (1000,next);\r\n            //$(\"#runArea\").slideDown(1000, next);\r\n            if (mobile) {\r\n                //$(\"#fileViewer\").hide();\r\n                $(\"#runAreaParent\").show().attr(\"class\",\"col-xs-12\");\r\n                $(\"#mainArea\").hide();//attr(\"class\",\"col-xs-12\");\r\n                onResize();\r\n            }\r\n            if (!runDialog.opened) {\r\n                runDialog.show();\r\n            }\r\n            break;\r\n        case \"compile_error\":\r\n            //$(\"#errorPos\").show();// slideDown(1000, next);\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n            break;\r\n        case \"runtime_error\":\r\n            //$(\"#errorPos\").slideDown(1000, next);\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n            break;\r\n        case \"edit\":\r\n            if (runDialog.modified) {\r\n                delete runDialog.modified;\r\n                saveDesktopEnv();\r\n            }\r\n            //$(\"#runArea\").slideUp(1000);\r\n            //$(\"#errorPos\").slideUp(1000, next);\r\n            if (mobile) {\r\n                //$(\"#fileViewer\").hide();\r\n                $(\"#runAreaParent\").hide();//.attr(\"class\",\"col-xs-12\");\r\n                $(\"#mainArea\").show();//attr(\"class\",\"col-xs-12\");\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    var cmdrun;\r\n    function setCmdStat(c) {\r\n        if (c && cmdrun) {\r\n            alert(\"(\"+cmdrun+\")\\n\"+\r\n                \"Home\");\r\n            return;\r\n        }\r\n        cmdrun=c;\r\n        return c;\r\n    }\r\n    function stop() {\r\n        if (!setCmdStat(\"stop\")) return;\r\n        return $.when(curPrj.stop()).then(function () {\r\n            curPrj.disconnectDebugger();\r\n            displayMode(\"edit\");\r\n            console.log(\"Boot stopped\");\r\n        }).finally(function () {\r\n            setCmdStat();\r\n        });\r\n    }\r\n    //\\run\r\n    function run(name) {\r\n        if (!setCmdStat(\"run\")) return;\r\n        return $.when(curPrj.stop()).then(function () {\r\n            return run2(name);\r\n        }).catch(Tonyu.onRuntimeError).finally(function () {\r\n            setCmdStat();\r\n        });\r\n    }\r\n    function run2(fullName) {\r\n        if (typeof fullName!=\"string\") {\r\n            if (runMenuOrd.length==0) {\r\n                alert(\"\");\r\n                return;\r\n            }\r\n            fullName=`${NSP_USR}.${runMenuOrd[0]}`;// curFile.name().replace(/\\.tonyu$/,\"\");\r\n        }\r\n        save();\r\n        curPrj.initCanvas=function () {\r\n            displayMode(\"run\");\r\n            Tonyu.globals.$mainCanvas=runDialog.canvas;\r\n        };\r\n        Log.dumpProject(curPrjDir);\r\n        if (root.SplashScreen) root.SplashScreen.show();\r\n        var o=curPrj.getOptions();\r\n        if (o.run.mainClass!=fullName) {\r\n            o.run.mainClass=fullName;\r\n            curPrj.setOptions(o);\r\n        }\r\n        curPrjDir.touch();\r\n        return curPrj.fullCompile().then(async r=>{\r\n            await SourceFiles.add(r).saveAs(curPrj.getOutputFile());\r\n            runDialog.show();\r\n        },showError).finally(function () {\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n        });\r\n        /*return curPrj.rawRun(o.run.bootClass).catch(function (e) {\r\n            if (e.isTError) {\r\n                console.log(\"showErr: run\");\r\n                showErrorPos($(\"#errorPos\"),e,{jump:jump});\r\n                displayMode(\"compile_error\");\r\n            }else{\r\n                Tonyu.onRuntimeError(e);\r\n            }\r\n        }).finally(function () {\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n        });*/\r\n    }\r\n    var alertOnce;\r\n    alertOnce=function (e) {\r\n        alert(e);\r\n        alertOnce=function(){};\r\n    };\r\n    function jump(file,row,col) {\r\n        //alert(file+\":\"+row+\":\"+col);\r\n        fl.select(file);\r\n        var inf=getCurrentEditorInfo();\r\n        if (inf) {\r\n            setTimeout(function () {\r\n                var prog=getCurrentEditor();\r\n                if (prog) prog.gotoLine(row,col);\r\n            },50);\r\n        }\r\n    }\r\n    function restart(){\r\n        stop();\r\n        runDialog.close();\r\n        setTimeout(run,100);\r\n    }\r\n    //var pluginAdded={};\r\n    const errorDialog=new ErrorDialog(ide);\r\n    function showError(e) {\r\n        try{\r\n            errorDialog.show(e);\r\n        } catch(ee) {\r\n            console.log(ee);\r\n            stop();\r\n            //alert(ee);\r\n        }\r\n    }\r\n    window.onerror=EC.handleException=Tonyu.onRuntimeError=ide.showError=showError;/*function (e) {\r\n        console.error(e);\r\n        Tonyu.globals.$lastError=e;\r\n        var t=curPrj.env.traceTbl;\r\n        var te;\r\n        if (e.pluginName && !pluginAdded[e.pluginName]) {\r\n            //alert(\"\");\r\n            pluginAdded[e.pluginName]=true;\r\n            stop();\r\n            runDialog.close();\r\n            setTimeout(run,100);\r\n            return;\r\n        }\r\n        var tid = t.find(e) || t.decode(root.$LASTPOS); // user.Main:234\r\n        if (tid) {\r\n            te=curPrj.decodeTrace(tid);\r\n        }\r\n        console.log(\"onRunTimeError:stackTrace1\",e.stack,te,root.$LASTPOS);\r\n        if (te) {\r\n            te.mesg=e;\r\n            if (e.pluginName) {\r\n                alert(e.message);\r\n            } else {\r\n                var diag=showErrorPos($(\"#errorPos\"),te,{jump:jump});\r\n                displayMode(\"runtime_error\");\r\n                $(\"#errorPos\").find(\".quickFix\").append(\r\n                        UI(\"button\",{on:{click: function () {\r\n                            //setDiagMode(true);\r\n                            //diag.dialog(\"close\");\r\n                            //run();\r\n                            var trcpre=UI(\"pre\",e.stack);\r\n                            var html=trcpre.html().replace(/_trc_([\\w]*)/g,function (n) {\r\n                                return \"<strong>\"+n+\"</strong>\";\r\n                            });\r\n                            trcpre.html(html);\r\n                            $(\"#errorPos\").find(\".quickFix\").append(trcpre);\r\n                        }}},\"\"));\r\n            }\r\n            stop();\r\n        } else {\r\n            UI(\"div\",{title:\"Error\"},e+\"\",[\"pre\",e.stack]).dialog({width:800});\r\n            stop();\r\n        }\r\n    };*/\r\n    $(\"#mapEditor\").click(F(function () {\r\n        console.log(\"run map\");\r\n        run(\"kernel.MapEditor\");\r\n    }));\r\n    $(\"#search\").click(F(function () {\r\n        console.log(\"src diag\");\r\n        searchDialog.show(curPrjDir,function (info){\r\n            fl.select(info.file);\r\n            setTimeout(function () {\r\n                var prog=getCurrentEditor();\r\n                if (prog) prog.gotoLine(info.lineNo);\r\n            },50);\r\n        });\r\n    }));\r\n    function close(rm) { // rm or mv\r\n        var i=editors[rm.path()]; //getCurrentEditorInfo();\r\n        if (i) {\r\n            i.editor.destroy();\r\n            i.dom.remove();\r\n            delete editors[rm.path()];\r\n            var remains;\r\n            for (var k in editors) remains=true;\r\n            if (!remains) $(\"#welcome\").show();\r\n        }\r\n    }\r\n    function fixEditorIndent(prog) {\r\n        var cur=prog.getCursorPosition();\r\n        var orig=prog.getValue();\r\n        var fixed=fixIndent( orig );\r\n        if (orig!=fixed) {\r\n            prog.setValue(fixed);\r\n            prog.clearSelection();\r\n            prog.moveCursorTo(cur.row, cur.column);\r\n        }\r\n    }\r\n    function reloadFromFiles() {\r\n        for (var path in editors) {\r\n            var inf=editors[path];\r\n            var curFile=inf.file; //fl.curFile();\r\n            var prog=inf.editor; //getCurrentEditor();\r\n            if (curFile.exists() && prog) {\r\n                prog.setValue(curFile.text());\r\n                prog.clearSelection();\r\n            }\r\n        }\r\n    }\r\n    function save() {\r\n        var inf=getCurrentEditorInfo();\r\n        if (!inf) return;\r\n        var curFile=inf.file; //fl.curFile();\r\n        var prog=inf.editor; //getCurrentEditor();\r\n        if (curFile && prog && !curFile.isReadOnly()) {\r\n            fixEditorIndent(prog);\r\n            var old=curFile.text();\r\n            var nw=prog.getValue();\r\n            if (old!=nw) {\r\n                curFile.text(nw);\r\n                curPrj.partialCompile(curFile).catch(Tonyu.onRunTimeError);\r\n                inf.lastTimeStamp=curFile.lastUpdate();\r\n            }\r\n        }\r\n        fl.setModified(false);\r\n    }\r\n    function watchModified() {\r\n        var inf=getCurrentEditorInfo();\r\n        if (!inf) return;\r\n        if (!inf.file.exists()) return;\r\n        if (inf.lastTimeStamp<inf.file.lastUpdate()) {\r\n            inf.editor.setValue(inf.file.text());\r\n            inf.editor.clearSelection();\r\n            inf.lastTimeStamp=inf.file.lastUpdate();\r\n        }\r\n    \tfl.setModified(inf.file.text()!=inf.editor.getValue());\r\n    }\r\n    setInterval(watchModified,1000);\r\n    var curDOM;\r\n    function open(f) {\r\n\t// do not call directly !!  it doesnt change fl.curFile\r\n        if (f.isDir()) {\r\n            return;\r\n        }\r\n        $(\"#welcome\").hide();\r\n        save();\r\n        if (curDOM) curDOM.hide();\r\n        var inf=editors[f.path()];\r\n        if (!inf) {\r\n            var progDOM=$(\"<pre>\").css(\"height\", runDialogParam.screenH+\"px\").text(f.text()).appendTo(\"#progs\");\r\n            var prog=root.ace.edit(progDOM[0]);\r\n            window.lastEditor=prog;\r\n            if (typeof desktopEnv.editorFontSize==\"number\") prog.setFontSize(desktopEnv.editorFontSize);\r\n            else prog.setFontSize(16);\r\n            prog.setTheme(\"ace/theme/eclipse\");\r\n            prog.getSession().setMode(\"ace/mode/tonyu\");\r\n            inf=editors[f.path()]={file:f , editor: prog, dom:progDOM};\r\n            progDOM.click(F(function () {\r\n                displayMode(\"edit\");\r\n            }));\r\n            prog.setReadOnly(false);\r\n            prog.clearSelection();\r\n            prog.focus();\r\n            try {\r\n                prog.commands.removeCommand(\"toggleFoldWidget\");\r\n                prog.setOptions({fixedWidthGutter:true});\r\n            }catch(e){}// F2\r\n\r\n            curDOM=progDOM;\r\n        } else {\r\n            if (inf.lastTimeStamp<inf.file.lastUpdate()) {\r\n                inf.editor.setValue(inf.file.text());\r\n                inf.editor.clearSelection();\r\n                inf.lastTimeStamp=inf.file.lastUpdate();\r\n            }\r\n            inf.dom.show();\r\n            inf.editor.focus();\r\n            curDOM=inf.dom;\r\n        }\r\n        inf.lastTimeStamp=inf.file.lastUpdate();\r\n    }\r\n\r\n    function loadDesktopEnv() {\r\n        var d=curPrjDir.rel(\".desktop\");\r\n        var res;\r\n        if (d.exists()) {\r\n            res=d.obj();\r\n        } else {\r\n            res={};\r\n        }\r\n        if (!res.runMenuOrd) res.runMenuOrd=[];\r\n        desktopEnv=res;\r\n        return res;\r\n    }\r\n    function saveDesktopEnv() {\r\n        var d=curPrjDir.rel(\".desktop\");\r\n        d.obj(desktopEnv);\r\n    }\r\n    $(\"#mkrun\").click(F(function () {\r\n        var dest;\r\n        if (WebSite.isNW) {\r\n            if (desktopEnv && desktopEnv.runtimeConfig) {\r\n                dest=desktopEnv.runtimeConfig.dest;\r\n            } else {\r\n                dest=FS.get(WebSite.cwd).rel(\"Runtimes/\").rel( curPrjDir.name());\r\n            }\r\n            mkrunDiag.show(curPrj,{\r\n                dest: dest,\r\n                onComplete: function (e) {\r\n                    if (e.type===\"dir\" && desktopEnv) {\r\n                        desktopEnv.runtimeConfig=e.config;\r\n                        saveDesktopEnv();\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            mkrunDiag.show(curPrj, {\r\n                hiddenFolder:true,\r\n                onEnd:function () {}\r\n            });\r\n        }\r\n    }));\r\n    $(\"#imgResEditor\").click(F(function () {\r\n        resEditors.open(\"image\");\r\n    }));\r\n    $(\"#soundResEditor\").click(F(function () {\r\n        resEditors.open(\"sound\");\r\n    }));\r\n    $(\"#prjOptEditor\").click(F(function () {\r\n        ProjectOptionsEditor(curPrj);\r\n    }));\r\n    var helpd=null;\r\n    $(\"#refHelp\").click(F(function () {\r\n    \t//if (!helpd) helpd=WikiDialog.create(home.rel(\"doc/tonyu2/\"));\r\n        if (!helpd) helpd=IFrameDialog.create(WebSite.top+\"/doc/index.html\");\r\n    \thelpd.show();\r\n    }));\r\n    window.startTutorial=F(function () {\r\n        if (!helpd) helpd=IFrameDialog.create(WebSite.top+\"/doc/tutorial.html\");\r\n    \thelpd.show();\r\n    });\r\n    //if (typeof progBar==\"object\") {progBar.clear();}\r\n    $(\"#rmPRJ\").click(F(function () {\r\n        if (prompt(curPrjDir+\"DELETE \",\"\")!=\"DELETE\") {\r\n            return;\r\n        }\r\n        sh.rm(curPrjDir,{r:1});\r\n        document.location.href=\"index.html\";\r\n    }));\r\n    $(\"#mvPRJ\").click(F(function () {\r\n        var np=prompt(\"\", curPrjDir.name().replace(/\\//g,\"\"));\r\n        if (!np || np==\"\") return;\r\n        if (!np.match(/\\/$/)) np+=\"/\";\r\n        var npd=curPrjDir.up().rel(np);\r\n        if (npd.exists()) {\r\n            alert(npd+\" \");\r\n            return;\r\n        }\r\n        sh.cp(curPrjDir,npd);\r\n        sh.rm(curPrjDir,{r:1});\r\n        document.location.href=\"project.html?dir=\"+npd;\r\n    }));\r\n    $(\"#editorEditor\").click(F(function () {\r\n        var prog=getCurrentEditor();\r\n        var s=prompt(\"\", desktopEnv.editorFontSize||16);\r\n        desktopEnv.editorFontSize=parseInt(s);\r\n        if (prog) prog.setFontSize(desktopEnv.editorFontSize||16);\r\n        saveDesktopEnv();\r\n    }));\r\n    $(\"#openFolder\").click(F(function () {\r\n        var f=curPrjDir;\r\n        var gui = require(\"nw.gui\");//(global.nwDispatcher||global.nw).requireNwGui();\r\n        gui.Shell.showItemInFolder(f.path().replace(/\\//g,require(\"path\").sep));\r\n    }));\r\n    sh.curFile=function () {\r\n        return fl.curFile();\r\n    };\r\n    FM.onMenuStart=save;\r\n    if (root.SplashScreen) root.SplashScreen.hide();\r\n    extLink.all();\r\n});\r\n});\r\n\ndefine(\"ide/editor\", function(){});\n\n})();\r\n"]}