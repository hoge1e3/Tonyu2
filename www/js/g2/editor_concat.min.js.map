{"version":3,"sources":["editor_concat.js"],"names":["Util","hasNodeBuffer","Buffer","isNodeBuffer","data","getQueryString","key","default_","replace","s","qs","RegExp","exec","window","location","href","decodeURIComponent","endsWith","str","postfix","substring","length","startsWith","prefix","Base64_To_ArrayBuffer","base64","dic","Object","e","num","n","b","ArrayBuffer","Math","floor","charAt","ary_buffer","ary_u8","Uint8Array","i","p","undefined","charCodeAt","fail","m","console","log","Error","Base64_From_ArrayBuffer","utf8bytes2str","bytes","push","toString","slice","join","er","str2utf8bytes","binType","encodeURIComponent","r","a","parseInt","buffer","privatize","o","__privatized","res","match","apply","arguments","isBuffer","define","global","this","t","f","c","require","u","code","exports","call","1","module","Assertion","failMesg","flatten","$a","prototype","_regedType","registerType","name","MODE_STRICT","MODE_DEFENSIVE","MODE_BOOL","value","shift","concat","_mode","isDefensive","isBool","subAssertion","assert","eq","ne","isset","is","type","v","_assert_func","Array","na","String","Number","Function","k","ty","ensureError","action","err","message","setMode","mode","isStrict","args","top","forEach","stack","bind","opt","and","types","2","self","3","root","TonyuThreadF","IT","performance","now","Date","Tonyu","TT","klass","handleEx","onRuntimeError","alert","addMeta","fn","extend","getMeta","bless","val","create","dst","src","removeMeta","classMetas","removeMetaAll","ns","meta","mm","ensureNamespace","nsp","keys","split","propReg","params","parent","superclass","includes","fullName","shortName","namespace","methodsF","methods","decls","nso","classes","chkclass","ctx","hasOwnProperty","chkmeta","isShim","path","extenderFullName","mod","pop","extender","init","includesRec","extendFrom","initialize","useNew","constructor","nonShimParent","map","func","prot","props","fbk","methodInfo","fiber","isTonyuObject","defineProperty","getClassInfo","initFullName","isSourceChanged","tonyu","nodeTimestamp","lastUpdate","shouldCompile","hasSemanticError","dks","getDependingClasses","globals","getClass","found","nn","nr","lastLoopCheck","resetLoopCheck","disableTime","thread","setGlobal","getGlobal","timeout","Promise","setTimeout","bindFunc","meth","thiz","not_a_tonyu_object","obj","hasKey","invokeMethod","objName","callFunc","fName","checkNonNull","iterator","run","bootClassName","bootClass","runMode","boot","TPR","$currentProject","currentProject","runningObj","checkLoop","VERSION","A","ID","random","error","../lib/assert","../lib/root","./TonyuThread","./tonyuIterator","4","idSeq","TonyuThread","[object Object]","frame","_isDead","cnt","_isWaiting","fSuspended","tryStack","preemptionTime","onEndHandlers","onTerminateHandlers","id","age","isDead","_threadGroup","objectPoolAge","tGrpObjectPoolAge","isDeadThreadGroup","g","frameFunc","prev","methodName","method","pc","enter","th","termStatus","notifyEnd","retVal","exit","notifyTermination","status","tst","fb","succ","on","st","exception","promise","then","kill","lastEx","catchPC","eventSpec","h","suspend","lastEvent","remove","steps","msg","gotoCatch","j","resolve","stepsLoop","wrapError","re","original","sv","currentThread","preempted","isAlive","5","ArrayValueIterator","set","ArrayKeyValueIterator","ObjectKeyIterator","elems","ObjectKeyValueIterator","arity","tonyuIterator","requirejs","resMod","R","reqjsSeq","def","reqs","getModuleInfo","reqsFromFunc","setReqs","doLoad","getObjs","loadIfAvailable","amd","req","reqm","loaded","revReqs","ms","modules","notifyLoaded","dependingMod","loadedModuleName","ary","cur","d","Boolean","PathUtil","driveLetter","url","Path","isPath","Absolute","isAbsolutePath","Relative","Dir","isDir","AbsDir","File","SEP","isChildOf","child","normalize","fixSep","hasDriveLetter","isURL","protocol","hostPort","isRelativePath","hasBackslashSep","indexOf","to","directorify","filify","splitPath","ext","truncExt","truncSEP","up","rel","relPath","paths","resPath","base","ps","old","backslashifyAfter","isAbsolute","isRelative",".png",".gif",".jpeg",".jpg",".ico",".wav",".mp3",".ogg",".midi",".mid",".mzo",".txt",".html",".htm",".css",".js",".json",".zip",".swf",".pdf",".doc",".xls",".ppt",".docx",".docm",".dotx",".dotm",".xlsx",".xlsm",".xltx",".xltm",".xlsb",".xlam",".pptx",".pptm",".potx",".potm",".ppsx",".ppsm",".ppam",".tonyu",".c",".dtl","DU","DUBRK","same","isNativePromise","catch","isJQPromise","isPromise","all","rest","config","useJQ","throwNowIfRejected","state","reject","assertResolved","resolved","ensureDefer","isDeferred","directPromise","funcPromise","$","Deferred","external","rej","throwPromise","throwF","each","loop","brk","objs","when1","deff1","deff2","r1","dr","r2","tryLoop","tr","tryEach","documentReady","callbackToPromise","NOP","E","errorHandler","setE","begin","try","DeferredUtil","P","M","FS","fstypes","stub","addFSType","fsgen","availFSTypes","mesg","fstype","isReadOnly","options","supportsSync","resolveFS","getRootFS","mounted","rootFS","mountPoint","inMyFS","getReturnTypes","getContent","size","toBin","byteLength","getContentAsync","setContent","content","setContentAsync","appendContent","appendContentAsync","getMetaInfo","setMetaInfo","info","mkdir","touch","exists","opendir","opendirAsync","cp","assertExist","srcIsDir","dstfs","dstIsDir","cont","mv","rm","link","getURL","onAddObserver","delegateMethods","fs","assertWriteable","getContentType","toLowerCase","getBlob","blobType","Blob","hasPlainText","toPlainText","isText","find","ls","ep","resolveLink","l","isLink","np","opendirEx","dest","getDirTree","style","excludes","relP","_global","download","opts","xhr","XMLHttpRequest","open","responseType","onload","saveAs","response","onerror","send","corsEnabled","click","node","dispatchEvent","MouseEvent","evt","document","createEvent","initMouseEvent","HTMLAnchorElement","blob","URL","webkitURL","createElement","origin","target","createObjectURL","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","test","fromCharCode","bom","popup","title","body","innerText","force","isSafari","HTMLElement","safari","isChromeIOS","userAgent","FileReader","reader","onloadend","result","readAsDataURL","Content","plainText","contentType","plain","buffer2ArrayBuffer","arrayBuffer2Buffer","bin","bufType","nodeBuffer","arrayBuffer","looksLikeDataURL","text","DataURL","setBuffer","toArrayBuffer","toNodeBuffer","toURL","hasBin","hasURL","hasArrayBuffer","toBlob","dataURL2bin","bin2dataURL","head","dataHeader","dataURL","ctype","existsSync","NativeFS","rootPoint","process","cwd","available","Pro","toNativePath","readFileSync","statSync","pa","writeFileSync","appendFileSync","stat","mtime","getTime","mkdirSync","ts","readdirSync","nosep","isDirectory","rmdirSync","unlinkSync","utimesSync","apath","rfs","w","watch","rpath","fpath","eventType","notifyChanged","close","LSFS","storage","useDirCache","dirCache","ramDisk","localStorage","resolveKey","getItem","setItem","removeItem","itemExists","getDirInfo","dinfos","dinfo","JSON","parse","putDirInfo","trashed","stringify","ppath","pdinfo","_touch","removeEntry","removeEntryWithoutTrash","isRAM","getUsage","using","getCapacity","seq","KEY","lim","pow","ru","add","max","readOnly","cs","includeTrashed","pinfo","inf","noTrash","ajaxTransport","originalOptions","jqXHR","FormData","dataType","headers","callback","async","username","password","addEventListener","statusText","getAllResponseHeaders","setRequestHeader","abort","WebFS","get","readAsArrayBuffer","Env","expand","expandPath","FSClass","SFile","_path","isSFile","setPolicy","policy","_clone","getPolicy","_resolve","topdir","topDir","contains","file","bp","pathR","assertDir","sibling","pre","post","equals","act","isTrashed","metaInfo","assertExists","noFollowLink","recursive","removeWithoutTrash","getText","setText","ct","appendText","forceText","getDataURL","setDataURL","setBytes","getBytes","lines","copyFrom","copyTo","dstf","progress","echo","getResolvedLinkPath","moveFrom","ex","moveTo","listFilesAsync","eachrev","reverse","fun","dir","convertOptions","_listFiles","ord","order","cvt","di","excludesF","sort","listFiles","nex","getFS","observe","addObserver","setBlob","sum","exportAsObject","importFromObject","_1","_2","handler","_act","RootFS","defaultFS","mount","fstab","_fstab","unmount","splice","fact","unshift","_3","observers","remover","observer","ob","fsv","zip","setJSZip","JSZip","dstZip","jszip","folder","generateAsync","compression","unzip","arrayBuf","destDir","onCheckFile","overwrite","loadAsync","files","zipEntry","buf","_buf","redirectedTo","isArray","x","noop","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","newValue","finale","thisArg","_unhandledRejectionFn","len","done","reason","prom","arr","remaining","race","PR","Class","env","setEnvProvider","getEnvProvider","setEnv","getEnv","importScripts","postMessage","isFile","isTrcf","handleException","F","elem","_curDir","_curFile","_mod","selbox","tagName","ide","runDialogParam","desktopEnv","FL","select","curFile","curDir","setModified","item","itemText","isModified","items","hide","save","editors","curDOM","lastTimeStamp","editor","setValue","clearSelection","dom","show","focus","progDOM","css","screenH","appendTo","prog","ace","edit","lastEditor","editorFontSize","setFontSize","setTheme","getSession","displayMode","setReadOnly","commands","removeCommand","setOptions","fixedWidthGutter","nDir","removeClass","addClass","attr","empty","wait","append","dirs","lp","displayName","isCur","change","EC","UI","expr","listeners","$vars","$edits","load","model","writeToJq","$edit","jq","validator","validate","toVal","prop","errors","validationMessage","OKButton","ok","addError","removeError","allOK","isValid","writeToModel","fromVal","li","tag","$var","realtimechange","eType","ev","which","first","parseAttr","parseArray","createTextNode","parseFloat","WebSite","tablet","mobile","Platform","loc","devMode","WebSite_runType","urlAliases","builtinAssetNames","images/Ball.png","images/base.png","images/Sample.png","images/inputPad.png","images/neko.png","images/mapchip.png","pluginTop","sampleImg","isNW","__node_webkit","__nwjs","mp4Disabled","tonyuHome","PathSep","noconcat","sep","TONYU_HOME","logdir","TONYU_LOGDIR","wwwDir","platform","ffmpeg","pkgInfo","TONYU_PROJECTS","projects","delimiter","prjDirs","kernelDir","host","compiledKernel","uploadTmpUrl","newVersionUrl","scriptServer","version","hoge","BuiltinAssets","removeJSOutput","images/sound.png","images/sound_ogg.png","images/sound_mp3.png","images/sound_mp4.png","images/sound_m4a.png","images/sound_mid.png","images/sound_wav.png","images/ecl.png","WS","serverType","runtime","disableROM","serverTop","blobPath","getFiles","putFiles","setAttribute","appendChild","isKernel","kernel","kernelChecker","FM","EXT","project","getEXT","curPrjDir","getDir","fileList","getCurFile","refactorUI","mvExtraUI","checked","resetFiles","refreshRunMenu","remains","destroy","dialog","onend","dialogOpt","enterkey","chg","fl","upcased","toUpperCase","static","maps","note","fixName","color","removeAttr","extra","extraUI","createContent","oldName","dispName","nf","chk","_new","oldCN","newCN","ren","renameClassName","SplashScreen","refactor","reloadFromFiles","confirm","pluginAdded","pos","row","col","isTError","fileName","compiler","columnNumber","lineNumber","convertFromWorkerPath","mesgd","jump","npos","srcd","width","height","shownError","pluginName","restart","showErrorPos","trcpre","html","stop","consoleBuffer","traceTap","optimizeFirst","profile","verboseFirst","traceFirstTbl","Parser","StringParser","nc","parseFunc","img","tokens","success","State","strOrTokens","maxPos","dispTbl","tbl","except","setName","noFollow","res2","andNoUnify","next","_first","ntbl","fromFirst","space","retNoUnify","clone","ALL","firstTokens","token","fromFirstTokens","unifyFirst","other","or","orNoUnify","checkTbl","t2","mergeTbl","repN","min","current","rep0","rep1","sep1","valuesToArray","tail","tails","sep0","tap","retN","parseStr","updateMaxPos","isSuccess","s0","strLike","reg","spos","traceToken","parser","eof","TokensParser","suc","lazy","pf","addRange","newr","newEnd","curEnd","setRange","getRange","range","sp","SAMENAME","tk","pat","fst","isToken","parsers","posts","dtk2","dtk","reserved","function","var","return","typeof","if","__typeof","for","else","super","while","continue","break","do","switch","case","default","finally","throw","of","in","native","instanceof","new","true","false","null","usethread","ifwait","nowait","_thread","delete","extends","literal","regex","REG","DIV","symresv","tk_constructor","symbol","extension","tokenizer","indentStr","linfo","isOpen","isClose","curDepth","depths","line","opens","closes","$1","changeDepths","depth","indStr","p2r","lastPos","proc","lastLine","assign","fix","Klass","getArgs","isPropDesc","pk","configurable","enumerable","writable","pd","thisName","singletonName","$parent","$this","$singleton","fldinit","wrapCancelled","wrap","checkSchema","$fields","inherit","wrapStatic","__bounded","Binder","addMethod","GlobalDialog","prj","getOptions","createDOM","keyvalueeditor","overflow-y","$bind","vars","placeHolderKey","placeHolderValue","toggleButton","deleteButton","getValuesA","qval","stopPropagation","getValues","odiag","gdiag","buttons","OK","KEC","down","originalEvent","altKey","ctrlKey","shiftKey","keyCode","WD","home","topPage","ifrm","class","frameBorder","resize","ui","Shell","mustExist","resolve2","newCommand","cd","pwd","sh","from","ln","notrash","cat","grep","pattern","lineNo","report","setout","outUI","when","getvar","strcat","dl","prompt","ASYNC","help","description","devtool","Window","showDevTools","prjDir","onLineClick","embed","start","word","searchRes","doLineClick","PP","newImage","getContext","drawImage","pixels","getImageData","getPixel","cv","y","imagePixelData","ofs","G","B","setPixel","parse1Pattern","isParseError","image","hex","trans","dx","dy","PatterParseError","sx","sy","newim","newImD","newD","ey","putImageData","yy","xx","boundsInSrc","Assets","baseDir","mp3Disabled","oggf","asFile","IL","cache","resImgs","onLoad","resa","resImg","excludeEmpty","names","urlKey","im","pw","ph","pwidth","pheight","rw","rh","parse1","imgDOM","ImageList","auth","currentUser","ajax","withCsrfToken","user","csrfToken","assertLogin","onLoggedIn","showLoginLink","Auth","BLOB_PATH_EXPR","upload","fd","getElementById","processData","isBlobURL","uploadToExe","bis","getBlobInfos","bi","draw","canvas","Image","onld","clb","cw","ch","cctx","calcw","calch","clearRect","marginw","marginh","left","ImageRect","mousemove","offset","pageX","pageY","chipRects","cr","calcRect","point","rect","inRect","curChipIndex","pcr","mousedown","pv","curItemName","patName","Clipboard","copyToClipboard","radio","setRC","selRC","setWH","selWH","theForm","redrawImage","onclose","cols","rows","calcWH","selval","srcImg","canvasRect","IMD","drawFrame","rects","scaleX","scaleY","strokeStyle","beginPath","lineTo","closePath","stroke","nNan","calcRC","_item","itemName","urlScript","openImg","ImageDetailEditor","mediaInfo","overflow-v","_dropAdd","rsrc","getResource","tempFiles","rsrcDir","itemUIs","reload","delItem","some","itemUI","idx","dragMsg","exts","dragPoint","dragover","dragenter","drop","dropAdd","itemTbl","setResource","update","cvs","convURL","genItemUI","preventDefault","mes","dataTransfer","readFiles","readFileSum","notReadFiles","existsFiles","readCnt","filetype","useBlob","extPattern","itemExt","lastMatch","existsFile","itemRelPath","fNameTemp","lastIndexOf","newItem","rename","renameUnique","prjN","getName","temp_file","temp_itemName","temp_itemExt","temp_v","fileContent","itemFile","images","sounds","modal","resourceDir","spawn","C","convert","stdin","end","ResEditor","OggConverter","mediaInfos","sound","context","hasMZO","hasMIDI","addPlugin","removePlugin","dropAndOpen","eo","curResEditor","Log","logHome","doLog","digit","zs","todayDir","getFullYear","getMonth","da","getDate","curProject","getHours","getMinutes","getSeconds","dumpProject","out","logging","varlog","mul","con","mainClass","extLink","caption","getOpt","afterClick","cmd","plugins","installed","box2d","detection","timbre","gif","Mezonet","PicoAudio","jquery_ui","convOpt","detectNeeded","hasInGlobal","loadAll","namea","loadNext","reqj","request","splashElement","MkRun","mkrun","run2","destZip","tmpDir","tmpFileName","mkram","resc","loadFilesBuf","jsDir","runScrFileName","genDir","IE","copySrc","imgf","copySampleImages","convertLSURL","addFileToLoadFiles","mapd","mf","staticd","genFilesJS","usrjs","usrjsmap","kerjs","runScr2","runScr2Map","pluginDir","copyPlugins","copyResources","htmlfile","htmlcont","onComplete","ote","outtype","form","UIDiag","openFolder","diag","button","onEnd","showItemInFolder","includeJSScript","resObj","genPath","binary","json","lu","_","s1","s2","s3","beautifyJSON","east","ExportHTMLDialog","write","placeholder","param","iframe","forceClose","reset","runDialog","shownOnce","position","my","at","ngeom","resizeCanvas","modified","drag","opened","onClose","beforeClose","closeAfterStop","blur","contentWindow","$mainCanvas","TonyuBuilderClient","Worker","SourceFiles","FileMap","BuilderClient","worker","Wrapper","fileMap","getOutputFile","debugger","srcraw","localPrjDir","n2files","sourceFiles","exported","getOptionsFile","inited","exportFiles","ns2depspec","remotePrjDir","getNamespace","local","remote","deps","getDependingProjects","dep","fullCompile","partialCompilable","compres","sf","convertError","clean","changed","nsraw","partialCompile","onCompiled","../lang/SourceFiles","../lib/FileMap","../lib/WorkerServiceB","ProjectFactory","CompiledProject","langMod","StackDecoder","SourceMap","DebuggerCore","../browser/DebuggerCore","../lang/StackDecoder","../lang/langMod","../lang/source-map","../project/CompiledProject","../project/ProjectFactory","./BuilderClient","Debugger","Events","handlers","getHandler","noCatch","setErrorHandler","decode","fire","$debugger","loadClasses","className","onTonyuDebuggerReady","vm","SourceFile","sourceMap","outf","mapFile","url2SourceFile","tmpdir","uniqFile","compileFunction","functions","sourceFile","S","StackTrace","fromError","offline","column","bias","SourceMapConsumer","GREATEST_LOWER_BOUND","originalPositionFor","source","getSourceMapConsumer","sourceMapConsumer","./SourceFiles","./source-map","./stacktrace","6","myNsp","7","factory","installedModules","__webpack_require__","moduleId","SourceMapGenerator","SourceNode","base64VLQ","util","ArraySet","MappingList","aArgs","_file","getArg","_sourceRoot","_skipValidation","_sources","_names","_mappings","_sourcesContents","_version","fromSourceMap","aSourceMapConsumer","sourceRoot","generator","eachMapping","mapping","newMapping","generated","generatedLine","generatedColumn","relative","originalLine","originalColumn","addMapping","sources","sourceContentFor","setSourceContent","_validateMapping","has","aSourceFile","aSourceContent","toSetString","applySourceMap","aSourceMapPath","newSources","newNames","unsortedForEach","aGenerated","aOriginal","aSource","aName","_serializeMappings","nameIdx","sourceIdx","previousGeneratedColumn","previousGeneratedLine","previousOriginalColumn","previousOriginalLine","previousName","previousSource","mappings","toArray","compareByGeneratedPositionsInflated","encode","_generateSourcesContent","aSources","aSourceRoot","toJSON","sourcesContent","aValue","encoded","vlq","toVLQSigned","VLQ_BASE","aStr","aIndex","aOutParam","continuation","shifted","strLen","intToCharMap","number","charCode","aDefaultValue","urlRegexp","dataUrlRegexp","urlParse","aUrl","scheme","port","urlGenerate","aParsedUrl","aPath","part","parts","aRoot","aPathUrl","aRootUrl","joined","level","index","substr","supportsNullProto","identity","isProtoString","strcmp","aStr1","aStr2","fromSetString","compareByOriginalPositions","mappingA","mappingB","onlyCompareOriginal","cmp","compareByGeneratedPositionsDeflated","onlyCompareGenerated","_array","_set","fromArray","aArray","aAllowDuplicates","getOwnPropertyNames","sStr","isDuplicate","aIdx","_sorted","_last","aCallback","aThisArg","aMapping","lineA","lineB","columnA","columnB","binarySearch","quickSort","aSourceMap","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","Mapping","lastOffset","_sections","offsetLine","offsetColumn","generatedOffset","consumer","__generatedMappings","_parseMappings","__originalMappings","_charIsMappingSeparator","GENERATED_ORDER","ORIGINAL_ORDER","LEAST_UPPER_BOUND","aContext","aOrder","_generatedMappings","_originalMappings","allGeneratedPositionsFor","needle","_findMapping","lastColumn","smc","generatedMappings","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","segment","cachedSegments","temp","originalMappings","aNeedle","aMappings","aLineName","aColumnName","aComparator","aBias","search","computeColumnSpans","nextMapping","lastGeneratedColumn","Infinity","hasContentsOfAllSources","sc","nullOnMissing","fileUriAbsPath","generatedPositionFor","sectionIndex","section","every","generatedPosition","sectionMappings","adjustedMapping","aHaystack","aCompare","recursiveSearch","aLow","aHigh","mid","swap","doQuickSort","comparator","low","high","round","pivot","q","REGEX_NEWLINE","isSourceNode","aLine","aColumn","aChunks","children","sourceContents","fromStringWithSourceMap","aGeneratedCode","aRelativePath","remainingLines","shiftNextLine","lastGeneratedLine","lastMapping","nextLine","addMappingWithCode","aChunk","chunk","prepend","walk","aFn","aSep","newChildren","replaceRight","aPattern","aReplacement","lastChild","walkSourceContents","toStringWithSourceMap","sourceMappingActive","lastOriginalSource","lastOriginalLine","lastOriginalColumn","lastOriginalName","sourceContent","8","ErrorStackParser","StackFrame","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","filter","functionName","parseOpera9","parseOpera11","parseOpera10","stackframe","StackGenerator","backtrace","maxStackSize","callee","caller","isNaN","isFinite","setArgs","getEvalOrigin","evalOrigin","setEvalOrigin","getFunctionName","getFileName","getLineNumber","getColumnNumber","./util","./base64","9","./array-set","./base64-vlq","./binary-search","./quick-sort","10","11","StackTraceGPS","onreadystatechange","readyState","responseText","atob","sourceCache","sourceMapConsumerCache","_atob","_get","_getSourceMapConsumer","pinpoint","getMappedLocation","findFunctionName","source-map/lib/source-map-consumer","12","generateArtificially","getSync","instrument","__stacktraceOriginalFn","deinstrument","error-stack-parser","stack-generator","stacktrace-gps","sidesList","sides","fromSide","toSide","idseq","queue","readyQueue","procReverse","ready","sendError","je","isReady","readyPromise","terminate","WorkerService","install","serv","addType","createCore","include","loadDependingClasses","urlBased","createDirBasedCore","outJS","addDependencyResolver","spec","./ProjectFactory","13","resolvers","fromDependencySpec","fromDir","ProjectCore","dependingProjects","dprj","dirBasedMod","rdir","lang","outF","outputFile","nb","IR","TN","NAME","WIDTH","HEIGHT","delay","$Screen","toDataURL","prjdir","imfile","imgs","crt","thumbnail","rawRun","detectPlugins","fixBootRunClasses","runScriptMode","rawBoot","getResourceFile","resFile","imgSnd","defaultResource","hasSoundResource","getThumbnail","convertBlobInfos","loadResource","setImageList","requestPlugin","loadPlugins","mc","fixClassName","bc","showProgress","initCanvas","sysMod","CP","curDebugger","rp","getIframeProject","showError","requestStop","setDebugger","querySelector","Project","disconnectDebugger","defaultOptions","defaultSuperClass","$defaultFPS","$imageSmoothingDisabled","$soundLoadAndDecode","kernelEditable","language","fixFile","fo","fixObject","ft","fixOptions","cn","sn","NSP_USR","NSP_KER","FileList","FileMenu","ErrorDialog","fixIndent","ProjectOptionsEditor","KeyEventChecker","IFrameDialog","searchDialog","ResEditors","MainClassDialog","mkrunDiag","DebugDialog","IDEProject","optionFixer","$LASTPOS","optionFile","getCurrentEditorInfo","getCurrentEditor","gotoLine","curPrj","resEditors","runMenuOrd","loadDesktopEnv","exportHTMLDialog","resf","diagnose","onResize","spellcheck","ii","saveDesktopEnv","dorun","js/concat.js","js/concat.js.map","errorDialog","cmdStat","setCmdStat","ee","getCursorPosition","orig","getValue","fixed","moveCursorTo","fixEditorIndent","nw","onRunTimeError","setInterval","runtimeConfig","hiddenFolder","helpd","startTutorial","npd"],"mappings":"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","sourcesContent":["(function (){\r\nUtil=(function () {\r\n\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\n// From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\nfunction Base64_To_ArrayBuffer(base64){\r\n    base64=base64.replace(/[\\n=]/g,\"\");\r\n    var dic = new Object();\r\n    dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n    dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n    dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n    dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n    var num = base64.length;\r\n    var n = 0;\r\n    var b = 0;\r\n    var e;\r\n\r\n    if(!num) return (new ArrayBuffer(0));\r\n    //if(num < 4) return null;\r\n    //if(num % 4) return null;\r\n\r\n    // AA     12    1\r\n    // AAA    18    2\r\n    // AAAA   24    3\r\n    // AAAAA  30    3\r\n    // AAAAAA 36    4\r\n    // num*6/8\r\n    e = Math.floor(num / 4 * 3);\r\n    if(base64.charAt(num - 1) == '=') e -= 1;\r\n    if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n    var ary_buffer = new ArrayBuffer( e );\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var i = 0;\r\n    var p = 0;\r\n    while(p < e){\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n        n = (b << 2);\r\n        i ++;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 4) & 0x3);\r\n        n = (b & 0x0f) << 4;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | ((b >> 2) & 0xf);\r\n        n = (b & 0x03) << 6;\r\n        i ++;\r\n        p ++;\r\n        if(p >= e) break;\r\n\r\n        b = dic[base64.charCodeAt(i)];\r\n        if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n        ary_u8[p] = n | b;\r\n        i ++;\r\n        p ++;\r\n    }\r\n    function fail(m) {\r\n        console.log(m);\r\n        console.log(base64,i);\r\n        throw new Error(m);\r\n    }\r\n    return ary_buffer;\r\n}\r\n\r\nfunction Base64_From_ArrayBuffer(ary_buffer){\r\n    var dic = [\r\n        'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n        'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n        'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n        'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n    ];\r\n    var base64 = \"\";\r\n    var ary_u8 = new Uint8Array( ary_buffer );\r\n    var num = ary_u8.length;\r\n    var n = 0;\r\n    var b = 0;\r\n\r\n    var i = 0;\r\n    while(i < num){\r\n        b = ary_u8[i];\r\n        base64 += dic[(b >> 2)];\r\n        n = (b & 0x03) << 4;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 4)];\r\n        n = (b & 0x0f) << 2;\r\n        i ++;\r\n        if(i >= num) break;\r\n\r\n        b = ary_u8[i];\r\n        base64 += dic[n | (b >> 6)];\r\n        base64 += dic[(b & 0x3f)];\r\n        i ++;\r\n    }\r\n\r\n    var m = num % 3;\r\n    if(m){\r\n        base64 += dic[n];\r\n    }\r\n    if(m == 1){\r\n        base64 += \"==\";\r\n    }else if(m == 2){\r\n        base64 += \"=\";\r\n    }\r\n    return base64;\r\n}\r\n\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction hasNodeBuffer() {\r\n    return typeof Buffer!=\"undefined\";\r\n}\r\nfunction isNodeBuffer(data) {\r\n    return (hasNodeBuffer() && data instanceof Buffer);\r\n}\r\nfunction isBuffer(data) {\r\n    return data instanceof ArrayBuffer || isNodeBuffer(data);\r\n}\r\nfunction utf8bytes2str(bytes) {\r\n    var e=[];\r\n    for (var i=0 ; i<bytes.length ; i++) {\r\n         e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n    }\r\n    try {\r\n        return decodeURIComponent(e.join(\"\"));\r\n    } catch (er) {\r\n        console.log(e.join(\"\"));\r\n        throw er;\r\n    }\r\n}\r\nfunction str2utf8bytes(str, binType) {\r\n    var e=encodeURIComponent(str);\r\n    var r=/^%(..)/;\r\n    var a=[];\r\n    var ad=0;\r\n    for (var i=0 ; i<e.length; i++) {\r\n        var m=r.exec( e.substring(i));\r\n        if (m) {\r\n            a.push(parseInt(\"0x\"+m[1]));\r\n            i+=m[0].length-1;\r\n        } else a.push(e.charCodeAt(i));\r\n    }\r\n    return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n}\r\n\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    Base64_To_ArrayBuffer:Base64_To_ArrayBuffer,\r\n    Base64_From_ArrayBuffer:Base64_From_ArrayBuffer,\r\n    utf8bytes2str: utf8bytes2str,\r\n    str2utf8bytes: str2utf8bytes,\r\n    privatize: privatize,\r\n    hasNodeBuffer:hasNodeBuffer,\r\n    isNodeBuffer: isNodeBuffer,\r\n    isBuffer: isBuffer\r\n};\r\n})();\r\n\ndefine(\"Util\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Util;\n    };\n}(this)));\n\n(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n    const Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a).concat([\"mode\",this._mode]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    let na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    let na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    }\r\n    module.exports=assert;\r\n\r\n},{}],2:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],3:[function(require,module,exports){\r\n//\t\tfunction (assert,TT,IT,DU) {\r\nvar assert=require(\"../lib/assert\");\r\nvar root=require(\"../lib/root\");\r\nvar TonyuThreadF=require(\"./TonyuThread\");\r\nvar IT=require(\"./tonyuIterator\");\r\nmodule.exports=function () {\r\n\t// old browser support\r\n\tif (!root.performance) {\r\n\t\troot.performance = {};\r\n\t}\r\n\tif (!root.performance.now) {\r\n\t\troot.performance.now = function now() {\r\n\t\t\treturn Date.now();\r\n\t\t};\r\n\t}\r\n\tvar preemptionTime=60;\r\n\tvar klass={};\r\n\tvar Tonyu,TT;\r\n\tfunction thread() {\r\n\t\tvar t=new TT();\r\n\t\tt.handleEx=handleEx;\r\n\t\treturn t;\r\n\t}\r\n\tfunction timeout(t) {\r\n\t\treturn new Promise(function (s) {\r\n\t\t\tsetTimeout(s,t);\r\n\t\t});\r\n\t}\r\n\t/*function animationFrame() {\r\n\t\treturn new Promise( function (f) {\r\n\t\t\trequestAnimationFrame(f);\r\n\t\t});\r\n\t}*/\r\n\r\n\tfunction handleEx(e) {\r\n\t\tif (Tonyu.onRuntimeError) {\r\n\t\t\tTonyu.onRuntimeError(e);\r\n\t\t} else {\r\n\t\t\t//if (typeof $LASTPOS==\"undefined\") $LASTPOS=0;\r\n\t\t\tif (root.alert) root.alert(\"!   : \"+e);\r\n\t\t\tconsole.log(e.stack);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}\r\n\tklass.addMeta=addMeta;\r\n\tfunction addMeta(fn,m) {\r\n\t\t// why use addMeta?\r\n\t\t// because when compiled from source, additional info(src file) is contained.\r\n\t\t// k.meta={...} erases these info\r\n\t\tassert.is(arguments,[String,Object]);\r\n\t\treturn extend(klass.getMeta(fn), m);\r\n\t}\r\n\tklass.removeMeta=function (n) {\r\n\t\tdelete classMetas[n];\r\n\t};\r\n\tklass.removeMetaAll=function (ns) {\r\n\t\tns+=\".\";\r\n\t\tfor (let n in classMetas) {\r\n\t\t\tif (n.substring(0,ns.length)===ns) delete classMetas[n];\r\n\t\t}\r\n\t};\r\n\tklass.getMeta=function (k) {// Class or fullName\r\n\t\tif (typeof k==\"function\") {\r\n\t\t\treturn k.meta;\r\n\t\t} else if (typeof k==\"string\"){\r\n\t\t\tvar mm = classMetas[k];\r\n\t\t\tif (!mm) classMetas[k]=mm={};\r\n\t\t\treturn mm;\r\n\t\t}\r\n\t};\r\n\tklass.ensureNamespace=function (top,nsp) {\r\n\t\tvar keys=nsp.split(\".\");\r\n\t\tvar o=top;\r\n\t\tvar i;\r\n\t\tfor (i=0; i<keys.length; i++) {\r\n\t\t\tvar k=keys[i];\r\n\t\t\tif (!o[k]) o[k]={};\r\n\t\t\to=o[k];\r\n\t\t}\r\n\t\treturn o;\r\n\t};\r\n\t/*Function.prototype.constructor=function () {\r\n\t\tthrow new Error(\"This method should not be called\");\r\n\t};*/\r\n\tklass.propReg=/^__([gs]et)ter__(.*)$/;\r\n\tklass.define=function (params) {\r\n\t\t// fullName, shortName,namspace, superclass, includes, methods:{name/fiber$name: func}, decls\r\n\t\tvar parent=params.superclass;\r\n\t\tvar includes=params.includes;\r\n\t\tvar fullName=params.fullName;\r\n\t\tvar shortName=params.shortName;\r\n\t\tvar namespace=params.namespace;\r\n\t\tvar methodsF=params.methods;\r\n\t\tvar decls=params.decls;\r\n\t\tvar nso=klass.ensureNamespace(Tonyu.classes, namespace);\r\n\t\tvar outerRes;\r\n\t\tfunction chkmeta(m,ctx) {\r\n\t\t\tctx=ctx||{};\r\n\t\t\tif (ctx.isShim) return m;\r\n\t\t\tctx.path=ctx.path||[];\r\n\t\t\tctx.path.push(m);\r\n\t\t\tif (m.isShim) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"Shim found \"+m.extenderFullName);\r\n\t\t\t}\r\n\t\t\tif (m.superclass) chkmeta(m.superclass,ctx);\r\n\t\t\tif (!m.includes) {\r\n\t\t\t\tconsole.log(\"chkmeta::ctx\",ctx);\r\n\t\t\t\tthrow new Error(\"includes not found\");\r\n\t\t\t}\r\n\t\t\tm.includes.forEach(function (mod) {\r\n\t\t\t\tchkmeta(mod,ctx);\r\n\t\t\t});\r\n\t\t\tctx.path.pop();\r\n\t\t\treturn m;\r\n\t\t}\r\n\t\tfunction chkclass(c,ctx) {\r\n\t\t\tif (!c.prototype.hasOwnProperty(\"getClassInfo\")) throw new Error(\"NO\");\r\n\t\t\tif (!c.meta) {\r\n\t\t\t\tconsole.log(\"metanotfound\",c);\r\n\t\t\t\tthrow new Error(\"meta not found\");\r\n\t\t\t}\r\n\t\t\tchkmeta(c.meta,ctx);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tfunction extender(parent,ctx) {\r\n\t\t\tvar isShim=!ctx.init;\r\n\t\t\tvar includesRec=ctx.includesRec;\r\n\t\t\tif (includesRec[fullName]) return parent;\r\n\t\t\tincludesRec[fullName]=true;\r\n\t\t\t//console.log(ctx.initFullName, fullName);//,  includesRec[fullName],JSON.stringify(ctx));\r\n\t\t\tincludes.forEach(function (m) {\r\n\t\t\t\tparent=m.extendFrom(parent,extend(ctx,{init:false}));\r\n\t\t\t});\r\n\t\t\tvar methods=typeof methodsF===\"function\"? methodsF(parent):methodsF;\r\n\t\t\t/*if (typeof Profiler!==\"undefined\") {\r\n\t\t\t\tProfiler.profile(methods, fullName);\r\n\t\t\t}*/\r\n\t\t\tvar init=methods.initialize;\r\n\t\t\tdelete methods.initialize;\r\n\t\t\tvar res;\r\n\t\t\tres=(init?\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tinit.apply(this,arguments);\r\n\t\t\t\t}:\r\n\t\t\t\t(parent? function () {\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t\tparent.apply(this,arguments);\r\n\t\t\t\t}:function (){\r\n\t\t\t\t\tif (!(this instanceof res)) useNew(fullName);\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tres.prototype=bless(parent,{constructor:res});\r\n\t\t\tif (isShim) {\r\n\t\t\t\tres.meta={isShim:true,extenderFullName:fullName};\r\n\t\t\t} else {\r\n\t\t\t\tres.meta=addMeta(fullName,{\r\n\t\t\t\t\tfullName:fullName,shortName:shortName,namespace:namespace,decls:decls,\r\n\t\t\t\t\tsuperclass:ctx.nonShimParent ? ctx.nonShimParent.meta : null,\r\n\t\t\t\t\tincludesRec:includesRec,\r\n\t\t\t\t\tincludes:includes.map(function(c){return c.meta;})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tres.meta.func=res;\r\n\t\t\t// methods: res's own methods(no superclass/modules)\r\n\t\t\tres.methods=methods;\r\n\t\t\tvar prot=res.prototype;\r\n\t\t\tvar props={};\r\n\t\t\tvar propReg=klass.propReg;//^__([gs]et)ter__(.*)$/;\r\n\t\t\tvar k;\r\n\t\t\tfor (k in methods) {\r\n\t\t\t\tif (k.match(/^fiber\\$/)) continue;\r\n\t\t\t\tprot[k]=methods[k];\r\n\t\t\t\tvar fbk=\"fiber$\"+k;\r\n\t\t\t\tif (methods[fbk]) {\r\n\t\t\t\t\tprot[fbk]=methods[fbk];\r\n\t\t\t\t\tprot[fbk].methodInfo=prot[fbk].methodInfo||{name:k,klass:res,fiber:true};\r\n\t\t\t\t\tprot[k].fiber=prot[fbk];\r\n\t\t\t\t}\r\n\t\t\t\tif (k!==\"__dummy\" && !prot[k]) {\r\n\t\t\t\t\tconsole.log(\"WHY!\",prot[k],prot,k);\r\n\t\t\t\t\tthrow new Error(\"WHY!\"+k);\r\n\t\t\t\t}\r\n\t\t\t\tprot[k].methodInfo=prot[k].methodInfo||{name:k,klass:res};\r\n\t\t\t\t// if profile...\r\n\t\t\t\tvar r=propReg.exec(k);\r\n\t\t\t\tif (r) {\r\n\t\t\t\t\t// __(r[1]g/setter)__r[2]\r\n\t\t\t\t\tprops[r[2]]=props[r[2]]||{};\r\n\t\t\t\t\tprops[r[2]][r[1]]=prot[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tprot.isTonyuObject=true;\r\n\t\t\tfor (k in props) {\r\n\t\t\t\tObject.defineProperty(prot, k , props[k]);\r\n\t\t\t}\r\n\t\t\tprot.getClassInfo=function () {\r\n\t\t\t\treturn res.meta;\r\n\t\t\t};\r\n\t\t\treturn chkclass(res,{isShim:isShim});\r\n\t\t}\r\n\t\tvar res=extender(parent,{\r\n\t\t\tinit:true,\r\n\t\t\tinitFullName:fullName,\r\n\t\t\tincludesRec:(parent?extend({},parent.meta.includesRec):{}),\r\n\t\t\tnonShimParent:parent\r\n\t\t});\r\n\t\tres.extendFrom=extender;\r\n\t\t//addMeta(fullName, res.meta);\r\n\t\tnso[shortName]=res;\r\n\t\touterRes=res;\r\n\t\t//console.log(\"defined\", fullName, Tonyu.classes,Tonyu.ID);\r\n\t\treturn chkclass(res,{isShim:false});\r\n\t};\r\n\tklass.isSourceChanged=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.src && k.src.tonyu) {\r\n\t\t\tif (!k.nodeTimestamp) return true;\r\n\t\t\treturn k.src.tonyu.lastUpdate()> k.nodeTimestamp;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tklass.shouldCompile=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tif (k.hasSemanticError) return true;\r\n\t\tif (klass.isSourceChanged(k)) return true;\r\n\t\tvar dks=klass.getDependingClasses(k);\r\n\t\tfor (var i=0 ; i<dks.length ;i++) {\r\n\t\t\tif (klass.shouldCompile(dks[i])) return true;\r\n\t\t}\r\n\t};\r\n\tklass.getDependingClasses=function (k) {\r\n\t\tk=k.meta||k;\r\n\t\tvar res=[];\r\n\t\tif (k.superclass) res=[k.superclass];\r\n\t\tif (k.includes) res=res.concat(k.includes);\r\n\t\treturn res;\r\n\t};\r\n\tfunction bless( klass, val) {\r\n\t\tif (!klass) return extend({},val);\r\n\t\treturn extend( Object.create(klass.prototype) , val);\r\n\t\t//return extend( new klass() , val);\r\n\t}\r\n\tfunction extend (dst, src) {\r\n\t\tif (src && typeof src==\"object\") {\r\n\t\t\tfor (var i in src) {\r\n\t\t\t\tdst[i]=src[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dst;\r\n\t}\r\n\r\n\t//alert(\"init\");\r\n\tvar globals={};\r\n\tvar classes={};// classes.namespace.classname= function\r\n\tvar classMetas={}; // classes.namespace.classname.meta ( or env.classes / ctx.classes)\r\n\tfunction setGlobal(n,v) {\r\n\t\tglobals[n]=v;\r\n\t}\r\n\tfunction getGlobal(n) {\r\n\t\treturn globals[n];\r\n\t}\r\n\tfunction getClass(n) {\r\n\t\t//CFN: n.split(\".\")\r\n\t\tvar ns=n.split(\".\");\r\n\t\tvar res=classes;\r\n\t\tns.forEach(function (na) {\r\n\t\t\tif (!res) return;\r\n\t\t\tres=res[na];\r\n\t\t});\r\n\t\tif (!res && ns.length==1) {\r\n\t\t\tvar found;\r\n\t\t\tfor (var nn in classes) {\r\n\t\t\t\tvar nr=classes[nn][n];\r\n\t\t\t\tif (nr) {\r\n\t\t\t\t\tif (!res) { res=nr; found=nn+\".\"+n; }\r\n\t\t\t\t\telse throw new Error(\" \"+nn+\".\"+n+\", \"+found);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;//classes[n];\r\n\t}\r\n\tfunction bindFunc(t,meth) {\r\n\t\tif (typeof meth!=\"function\") return meth;\r\n\t\tvar res=function () {\r\n\t\t\treturn meth.apply(t,arguments);\r\n\t\t};\r\n\t\tres.methodInfo=Tonyu.extend({thiz:t},meth.methodInfo||{});\r\n\t\tif (meth.fiber) {\r\n\t\t\tres.fiber=function fiber_func() {\r\n\t\t\t\treturn meth.fiber.apply(t,arguments);\r\n\t\t\t};\r\n\t\t\tres.fiber.methodInfo=Tonyu.extend({thiz:t},meth.fiber.methodInfo||{});\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction invokeMethod(t, name, args, objName) {\r\n\t\tif (!t) throw new Error(objName+\"(=\"+t+\") \"+name+\"\");\r\n\t\tvar f=t[name];\r\n\t\tif (typeof f!=\"function\") throw new Error((objName==\"this\"? \"\": objName+\".\")+name+\"(=\"+f+\")\");\r\n\t\treturn f.apply(t,args);\r\n\t}\r\n\tfunction callFunc(f,args, fName) {\r\n\t\tif (typeof f!=\"function\") throw new Error(fName+\"\");\r\n\t\treturn f.apply({},args);\r\n\t}\r\n\tfunction checkNonNull(v, name) {\r\n\t\tif (v!=v || v==null) throw new Error(name+\"(=\"+v+\")\");\r\n\t\treturn v;\r\n\t}\r\n\tfunction A(args) {\r\n\t\tvar res=[];\r\n\t\tfor (var i=1 ; i<args.length; i++) {\r\n\t\t\tres[i-1]=args[i];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction useNew(c) {\r\n\t\tthrow new Error(\"\"+c+\"new\");\r\n\t}\r\n\tfunction not_a_tonyu_object(o) {\r\n\t\tconsole.log(\"Not a tonyu object: \",o);\r\n\t\tthrow new Error(o+\" is not a tonyu object\");\r\n\t}\r\n\tfunction hasKey(k, obj) {\r\n\t\treturn k in obj;\r\n\t}\r\n\tfunction run(bootClassName) {\r\n\t\tvar bootClass=getClass(bootClassName);\r\n\t\tif (!bootClass) throw new Error( bootClassName+\" \");\r\n\t\tTonyu.runMode=true;\r\n\t\tvar boot=new bootClass();\r\n\t\t//var th=thread();\r\n\t\t//th.apply(boot,\"main\");\r\n\t\tvar TPR=Tonyu.globals.$currentProject||Tonyu.currentProject;\r\n\t\tif (TPR) {\r\n\t\t\t//TPR.runningThread=th;\r\n\t\t\tTPR.runningObj=boot;\r\n\t\t}\r\n\t\t//$LASTPOS=0;\r\n\t\t//th.steps();\r\n\t}\r\n\tvar lastLoopCheck=root.performance.now();\r\n\tvar prevCheckLoopCalled;\r\n\tfunction checkLoop() {\r\n\t\tvar now=root.performance.now();\r\n\t\tif (now-lastLoopCheck>1000) {\r\n\t\t\tresetLoopCheck(10000);\r\n\t\t\tthrow new Error(\"\\n\"+\r\n\t\t\t\t\"    \\n\"+\r\n\t\t\t\t\"   []https://edit.tonyu.jp/doc/options.html\\n\");\r\n\t\t}\r\n\t\tprevCheckLoopCalled=now;\r\n\t}\r\n\tfunction resetLoopCheck(disableTime) {\r\n\t\tlastLoopCheck=root.performance.now()+(disableTime||0);\r\n\t}\r\n\tfunction is(obj,klass) {\r\n\t\tif (!obj) return false;\r\n\t\tif (obj instanceof klass) return true;\r\n\t\tif (typeof obj.getClassInfo===\"function\" && klass.meta) {\r\n\t\t\treturn obj.getClassInfo().includesRec[klass.meta.fullName];\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t//setInterval(resetLoopCheck,16);\r\n\tTonyu={thread:thread, /*threadGroup:threadGroup,*/\r\n\t\t\tklass:klass, bless:bless, extend:extend,\r\n\t\t\tglobals:globals, classes:classes, classMetas:classMetas, setGlobal:setGlobal, getGlobal:getGlobal, getClass:getClass,\r\n\t\t\ttimeout:timeout,//animationFrame:animationFrame, /*asyncResult:asyncResult,*/\r\n\t\t\tbindFunc:bindFunc,not_a_tonyu_object:not_a_tonyu_object,is:is,\r\n\t\t\thasKey:hasKey,invokeMethod:invokeMethod, callFunc:callFunc,checkNonNull:checkNonNull,\r\n\t\t\titerator:IT,run:run,checkLoop:checkLoop,resetLoopCheck:resetLoopCheck,//DeferredUtil:DU,\r\n\t\t\tVERSION:1560828115159,//EMBED_VERSION\r\n\t\t\tA:A,ID:Math.random()};\r\n\tTT=TonyuThreadF(Tonyu);\r\n\tif (root.Tonyu) {\r\n\t\tconsole.error(\"Tonyu called twice!\");\r\n\t\tthrow new Error(\"Tonyu called twice!\");\r\n\t}\r\n\troot.Tonyu=Tonyu;\r\n\treturn Tonyu;\r\n}();\r\n\r\n},{\"../lib/assert\":1,\"../lib/root\":2,\"./TonyuThread\":4,\"./tonyuIterator\":5}],4:[function(require,module,exports){\r\n//\tvar Klass=require(\"../lib/Klass\");\r\nmodule.exports=function (Tonyu) {\r\n\tvar cnts={enterC:{},exitC:0};\r\n\tvar idSeq=1;\r\n\t//try {window.cnts=cnts;}catch(e){}\r\n\tclass TonyuThread {\r\n\t\tconstructor() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis._isDead=false;\r\n\t\t\t//this._isAlive=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t\tthis._isWaiting=false;\r\n\t\t\tthis.fSuspended=false;\r\n\t\t\tthis.tryStack=[];\r\n\t\t\tthis.preemptionTime=60;\r\n\t\t\tthis.onEndHandlers=[];\r\n\t\t\tthis.onTerminateHandlers=[];\r\n\t\t\tthis.id=idSeq++;\r\n\t\t\tthis.age=0; // inc if object pooled\r\n\t\t}\r\n\t\tisAlive() {\r\n\t\t\treturn !this.isDead();\r\n\t\t\t//return this.frame!=null && this._isAlive;\r\n\t\t}\r\n\t\tisDead() {\r\n\t\t\tthis._isDead=this._isDead || (this.frame==null) ||\r\n\t\t\t(this._threadGroup && (\r\n\t\t\t\t\tthis._threadGroup.objectPoolAge!=this.tGrpObjectPoolAge ||\r\n\t\t\t\t\tthis._threadGroup.isDeadThreadGroup()\r\n\t\t\t));\r\n\t\t\treturn this._isDead;\r\n\t\t}\r\n\t\tsetThreadGroup(g) {// g:TonyuThread\r\n\t\t\tthis._threadGroup=g;\r\n\t\t\tthis.tGrpObjectPoolAge=g.objectPoolAge;\r\n\t\t\t//if (g) g.add(fb);\r\n\t\t}\r\n\t\tisWaiting() {\r\n\t\t\treturn this._isWaiting;\r\n\t\t}\r\n\t\tsuspend() {\r\n\t\t\tthis.fSuspended=true;\r\n\t\t\tthis.cnt=0;\r\n\t\t}\r\n\t\tenter(frameFunc) {\r\n\t\t\t//var n=frameFunc.name;\r\n\t\t\t//cnts.enterC[n]=(cnts.enterC[n]||0)+1;\r\n\t\t\tthis.frame={prev:this.frame, func:frameFunc};\r\n\t\t}\r\n\t\tapply(obj, methodName, args) {\r\n\t\t\tif (!args) args=[];\r\n\t\t\tvar method;\r\n\t\t\tif (typeof methodName==\"string\") {\r\n\t\t\t\tmethod=obj[\"fiber$\"+methodName];\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tthrow new Error(\"\"+methodName+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof methodName==\"function\") {\r\n\t\t\t\tmethod=methodName.fiber;\r\n\t\t\t\tif (!method) {\r\n\t\t\t\t\tvar n=methodName.methodInfo ? methodName.methodInfo.name : methodName.name;\r\n\t\t\t\t\tthrow new Error(\"\"+n+\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\targs=[this].concat(args);\r\n\t\t\tvar pc=0;\r\n\t\t\treturn this.enter(function (th) {\r\n\t\t\t\tswitch (pc){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tmethod.apply(obj,args);\r\n\t\t\t\t\tpc=1;break;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tth.termStatus=\"success\";\r\n\t\t\t\t\tth.notifyEnd(th.retVal);\r\n\t\t\t\t\targs[0].exit();\r\n\t\t\t\t\tpc=2;break;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tnotifyEnd(r) {\r\n\t\t\tthis.onEndHandlers.forEach(function (e) {\r\n\t\t\t\te(r);\r\n\t\t\t});\r\n\t\t\tthis.notifyTermination({status:\"success\",value:r});\r\n\t\t}\r\n\t\tnotifyTermination(tst) {\r\n\t\t\tthis.onTerminateHandlers.forEach(function (e) {\r\n\t\t\t\te(tst);\r\n\t\t\t});\r\n\t\t}\r\n\t\ton(type,f) {\r\n\t\t\tif (type===\"end\"||type===\"success\") this.onEndHandlers.push(f);\r\n\t\t\tif (type===\"terminate\") {\r\n\t\t\t\tthis.onTerminateHandlers.push(f);\r\n\t\t\t\tif (this.handleEx) delete this.handleEx;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpromise() {\r\n\t\t\tvar fb=this;\r\n\t\t\treturn new Promise(function (succ,err) {\r\n\t\t\t\tfb.on(\"terminate\",function (st) {\r\n\t\t\t\t\tif (st.status===\"success\") {\r\n\t\t\t\t\t\tsucc(st.value);\r\n\t\t\t\t\t} else if (st.status===\"exception\"){\r\n\t\t\t\t\t\terr(st.exception);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terr(new Error(st.status));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tthen(succ,err) {\r\n\t\t\tif (err) return this.promise().then(succ,err);\r\n\t\t\telse return this.promise().then(succ);\r\n\t\t}\r\n\t\tfail(err) {\r\n\t\t\treturn this.promise().then(e=>e, err);\r\n\t\t}\r\n\t\tgotoCatch(e) {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.tryStack.length==0) {\r\n\t\t\t\tfb.termStatus=\"exception\";\r\n\t\t\t\tfb.kill();\r\n\t\t\t\tif (fb.handleEx) fb.handleEx(e);\r\n\t\t\t\telse fb.notifyTermination({status:\"exception\",exception:e});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfb.lastEx=e;\r\n\t\t\tvar s=fb.tryStack.pop();\r\n\t\t\twhile (fb.frame) {\r\n\t\t\t\tif (s.frame===fb.frame) {\r\n\t\t\t\t\tfb.catchPC=s.catchPC;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfb.frame=fb.frame.prev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tstartCatch() {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar e=fb.lastEx;\r\n\t\t\tfb.lastEx=null;\r\n\t\t\treturn e;\r\n\t\t}\r\n\t\texit(res) {\r\n\t\t\t//cnts.exitC++;\r\n\t\t\tthis.frame=(this.frame ? this.frame.prev:null);\r\n\t\t\tthis.retVal=res;\r\n\t\t}\r\n\t\tenterTry(catchPC) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.push({frame:fb.frame,catchPC:catchPC});\r\n\t\t}\r\n\t\texitTry() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.tryStack.pop();\r\n\t\t}\r\n\t\twaitEvent(obj,eventSpec) { // eventSpec=[EventType, arg1, arg2....]\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (!obj.on) return;\r\n\t\t\tvar h;\r\n\t\t\teventSpec=eventSpec.concat(function () {\r\n\t\t\t\tfb.lastEvent=arguments;\r\n\t\t\t\tfb.retVal=arguments[0];\r\n\t\t\t\th.remove();\r\n\t\t\t\tfb.steps();\r\n\t\t\t});\r\n\t\t\th=obj.on.apply(obj, eventSpec);\r\n\t\t}\r\n\t\trunAsync(f) {\r\n\t\t\tvar fb=this;\r\n\t\t\tvar succ=function () {\r\n\t\t\t\tfb.retVal=arguments;\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tvar err=function () {\r\n\t\t\t\tvar msg=\"\";\r\n\t\t\t\tfor (var i=0; i<arguments.length; i++) {\r\n\t\t\t\t\tmsg+=arguments[i]+\",\";\r\n\t\t\t\t}\r\n\t\t\t\tif (msg.length==0) msg=\"Async fail\";\r\n\t\t\t\tvar e=new Error(msg);\r\n\t\t\t\te.args=arguments;\r\n\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\tfb.steps();\r\n\t\t\t};\r\n\t\t\tfb.suspend();\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tf(succ,err);\r\n\t\t\t},0);\r\n\t\t}\r\n\t\twaitFor(j) {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb._isWaiting=true;\r\n\t\t\tfb.suspend();\r\n\t\t\tif (j instanceof TonyuThread) j=j.promise();\r\n\t\t\treturn Promise.resolve(j).then(function (r) {\r\n\t\t\t\tfb.retVal=r;\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t}).then(e=>e,function (e) {\r\n\t\t\t\tfb.gotoCatch(fb.wrapError(e));\r\n\t\t\t\tfb.stepsLoop();\r\n\t\t\t});\r\n\t\t}\r\n\t\twrapError(e) {\r\n\t\t\tif (e instanceof Error) return e;\r\n\t\t\tvar re=new Error(e);\r\n\t\t\tre.original=e;\r\n\t\t\treturn re;\r\n\t\t}\r\n\t\tresume(retVal) {\r\n\t\t\tthis.retVal=retVal;\r\n\t\t\tthis.steps();\r\n\t\t}\r\n\t\tsteps() {\r\n\t\t\tvar fb=this;\r\n\t\t\tif (fb.isDead()) return;\r\n\t\t\tvar sv=Tonyu.currentThread;\r\n\t\t\tTonyu.currentThread=fb;\r\n\t\t\tfb.cnt=fb.preemptionTime;\r\n\t\t\tfb.preempted=false;\r\n\t\t\tfb.fSuspended=false;\r\n\t\t\twhile (fb.cnt>0 && fb.frame) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//while (new Date().getTime()<lim) {\r\n\t\t\t\t\twhile (fb.cnt-->0 && fb.frame) {\r\n\t\t\t\t\t\tfb.frame.func(fb);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfb.preempted= (!fb.fSuspended) && fb.isAlive();\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tfb.gotoCatch(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tTonyu.currentThread=sv;\r\n\t\t}\r\n\t\tstepsLoop() {\r\n\t\t\tvar fb=this;\r\n\t\t\tfb.steps();\r\n\t\t\tif (fb.preempted) {\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tfb.stepsLoop();\r\n\t\t\t\t},0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tkill() {\r\n\t\t\tvar fb=this;\r\n\t\t\t//fb._isAlive=false;\r\n\t\t\tfb._isDead=true;\r\n\t\t\tfb.frame=null;\r\n\t\t\tif (!fb.termStatus) {\r\n\t\t\t\tfb.termStatus=\"killed\";\r\n\t\t\t\tfb.notifyTermination({status:\"killed\"});\r\n\t\t\t}\r\n\t\t}\r\n\t\tclearFrame() {\r\n\t\t\tthis.frame=null;\r\n\t\t\tthis.tryStack=[];\r\n\t\t}\r\n\t}\r\n\treturn TonyuThread;\r\n};\r\n\r\n},{}],5:[function(require,module,exports){\r\n//define([\"Klass\"], function (Klass) {\r\n\t//var Klass=require(\"../lib/Klass\");\r\n\tclass ArrayValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext () {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ArrayKeyValueIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.set=set;\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.set.length) return false;\r\n\t\t\tthis[0]=this.i;\r\n\t\t\tthis[1]=this.set[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyIterator {\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push(k);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tclass ObjectKeyValueIterator{\r\n\t\tconstructor(set) {\r\n\t\t\tthis.elems=[];\r\n\t\t\tfor (var k in set) {\r\n\t\t\t\tthis.elems.push([k,set[k]]);\r\n\t\t\t}\r\n\t\t\tthis.i=0;\r\n\t\t}\r\n\t\tnext() {\r\n\t\t\tif (this.i>=this.elems.length) return false;\r\n\t\t\tthis[0]=this.elems[this.i][0];\r\n\t\t\tthis[1]=this.elems[this.i][1];\r\n\t\t\tthis.i++;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction IT(set, arity) {\r\n\t\tif (set.tonyuIterator) {\r\n\t\t\t// TODO: the prototype of class having tonyuIterator will iterate infinitively\r\n\t\t\treturn set.tonyuIterator(arity);\r\n\t\t} else if (set instanceof Array) {\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ArrayValueIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ArrayKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else if (set instanceof Object){\r\n\t\t\tif (arity==1) {\r\n\t\t\t\treturn new ObjectKeyIterator(set);\r\n\t\t\t} else {\r\n\t\t\t\treturn new ObjectKeyValueIterator(set);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(set);\r\n\t\t\tthrow new Error(set+\" is not iterable\");\r\n\t\t}\r\n\t}\r\n\tmodule.exports=IT;\r\n//   Tonyu.iterator=IT;\r\n//\treturn IT;\r\n//});\r\n\r\n},{}]},{},[3]);\r\n\ndefine(\"Tonyu\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Tonyu;\n    };\n}(this)));\n\n// This is kowareta! because r.js does not generate module name:\r\n//   define(\"FSLib\",[], function () { ...\r\n//(function (global) {\r\n//var useGlobal=(typeof global.define!=\"function\");\r\n//var define=(useGlobal ? define=function(_,f){f();} : global.define);\r\ndefine('FS',[],function () {\r\n    var define,requirejs;\r\n\tvar R={};\r\n\tvar REQJS=\"REQJS_\";\r\n\tvar reqjsSeq=0;\r\n\tR.def=function (name, reqs,func) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (typeof reqs==\"function\") {\r\n\t\t    func=reqs;\r\n\t\t    reqs=R.reqsFromFunc(func);\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t    var module={exports:{}};\r\n    \t\t\tvar res=func(R.doLoad,module,module.exports);\r\n    \t\t\treturn res || module.exports;\r\n    \t\t};\r\n\t\t} else {\r\n    \t\tR.setReqs( m, reqs);\r\n    \t\tm.func=function () {\r\n    \t\t\treturn func.apply(this, R.getObjs(reqs));\r\n    \t\t};\r\n\t\t}\r\n\t\tR.loadIfAvailable(m);\r\n\t};\r\n\tdefine=function (name,reqs,func) {\r\n\t\tR.def(name, reqs,func);\r\n\t};\r\n\tdefine.amd={};\r\n\trequirejs=function (reqs,func) {\r\n\t\tR.def(REQJS+(reqjsSeq++),reqs,func);\r\n\t};\r\n\tR.setReqs=function (m, reqs) {\r\n\t\treqs.forEach(function (req) {\r\n\t\t\tvar reqm=R.getModuleInfo(req);\r\n\t\t\tif (!reqm.loaded) {\r\n\t\t\t\tm.reqs[req]=reqm;\r\n\t\t\t\treqm.revReqs[m.name]=m;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tR.getModuleInfo=function (name) {\r\n\t\tvar ms=R.modules;\r\n\t\treturn ms[name]=ms[name]||{name:name,reqs:{},revReqs:{}};\r\n\t};\r\n\tR.doLoad=function (name) {\r\n\t\tvar m=R.getModuleInfo(name);\r\n\t\tif (m.loaded) return m.obj;\r\n\t\tm.loaded=true;\r\n\t\tvar res=m.func();\r\n\t    if ( res==null && !name.match(/^REQJS_/)) console.log(\"Warning: No obj for \"+name);\r\n\t\tm.obj=res;\r\n\t\tfor (var i in m.revReqs) {\r\n\t\t\tR.notifyLoaded(m.revReqs[i], m.name);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tR.notifyLoaded=function (dependingMod, loadedModuleName) {\r\n\t    // depengindMod depends on loadedModule\r\n\t\tdelete dependingMod.reqs[loadedModuleName];\r\n\t\tR.loadIfAvailable(dependingMod);\r\n\t};\r\n\tR.loadIfAvailable=function (m) {\r\n\t\tfor (var i in m.reqs) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tR.doLoad(m.name);\r\n\t};\r\n\tR.getObjs=function (ary) {\r\n\t\tvar res=[];\r\n\t\tary.forEach(function (n) {\r\n\t\t\tvar cur=R.doLoad(n);\r\n\t\t\tres.push(cur);\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\tR.reqsFromFunc=function (f) {\r\n\t    var str=f+\"\";\r\n\t    var res=[];\r\n\t    str.replace(/require\\s*\\(\\s*[\"']([^\"']+)[\"']\\s*\\)/g,function (m,a) {\r\n\t       res.push(a);\r\n\t    });\r\n\t    return res;\r\n\t};\r\n\tR.modules={};\r\n\t//requireSimulator=R;\r\n//----------\r\ndefine('extend',[],function (){\r\n   return function extend(d,s) {\r\n      for (var i in s) {d[i]=s[i];}\r\n      return d;\r\n   };\r\n});\r\n\r\ndefine('assert',[],function () {\r\n    var Assertion=function(failMesg) {\r\n        this.failMesg=flatten(failMesg || \"Assertion failed: \");\r\n    };\r\n    var $a;\r\n    Assertion.prototype={\r\n        _regedType:{},\r\n        registerType: function (name,t) {\r\n            this._regedType[name]=t;\r\n        },\r\n        MODE_STRICT:\"strict\",\r\n        MODE_DEFENSIVE:\"defensive\",\r\n        MODE_BOOL:\"bool\",\r\n        fail:function () {\r\n            var a=$a(arguments);\r\n            var value=a.shift();\r\n            a=flatten(a);\r\n            a=this.failMesg.concat(value).concat(a);//.concat([\"(mode:\",this._mode,\")\"]);\r\n            console.log.apply(console,a);\r\n            if (this.isDefensive()) return value;\r\n            if (this.isBool()) return false;\r\n            throw new Error(a.join(\" \"));\r\n        },\r\n        subAssertion: function () {\r\n            var a=$a(arguments);\r\n            a=flatten(a);\r\n            return new Assertion(this.failMesg.concat(a));\r\n        },\r\n        assert: function (t,failMesg) {\r\n            if (!t) return this.fail(t,failMesg);\r\n            return t;\r\n        },\r\n        eq: function (a,b) {\r\n            if (a!==b) return this.fail(a,\"!==\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        ne: function (a,b) {\r\n            if (a===b) return this.fail(a,\"===\",b);\r\n            return this.isBool()?true:a;\r\n        },\r\n        isset: function (a, n) {\r\n            if (a==null) return this.fail(a, (n||\"\")+\" is null/undef\");\r\n            return this.isBool()?true:a;\r\n        },\r\n        is: function (value,type) {\r\n            var t=type,v=value;\r\n            if (t==null) {\r\n                return this.fail(value, \"assert.is: type must be set\");\r\n                // return t; Why!!!!???? because is(args,[String,Number])\r\n            }\r\n            if (t._assert_func) {\r\n                t._assert_func.apply(this,[v]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            this.assert(value!=null,[value, \"should be \",t]);\r\n            if (t instanceof Array || (typeof global==\"object\" && typeof global.Array==\"function\" && t instanceof global.Array) ) {\r\n                if (!value || typeof value.length!=\"number\") {\r\n                    return this.fail(value, \"should be array:\");\r\n                }\r\n                var self=this;\r\n                for (var i=0 ;i<t.length; i++) {\r\n                    var na=self.subAssertion(\"failed at \",value,\"[\",i,\"]: \");\r\n                    if (t[i]==null) {\r\n                        console.log(\"WOW!7\", v[i],t[i]);\r\n                    }\r\n                    na.is(v[i],t[i]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===String || t==\"string\") {\r\n                this.assert(typeof(v)==\"string\",[v,\"should be a string \"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Number || t==\"number\") {\r\n                this.assert(typeof(v)==\"number\",[v,\"should be a number\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Boolean || t==\"boolean\") {\r\n                this.assert(typeof(v)==\"boolean\",[v,\"should be a boolean\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t instanceof RegExp || (typeof global==\"object\" && typeof global.RegExp==\"function\" && t instanceof global.RegExp)) {\r\n                this.is(v,String);\r\n                this.assert(t.exec(v),[v,\"does not match to\",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t===Function) {\r\n                this.assert(typeof v==\"function\",[v,\"should be a function\"]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"function\") {\r\n                this.assert((v instanceof t),[v, \"should be \",t]);\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (t && typeof t==\"object\") {\r\n                for (var k in t) {\r\n                    var na=this.subAssertion(\"failed at \",value,\".\",k,\":\");\r\n                    na.is(value[k],t[k]);\r\n                }\r\n                return this.isBool()?true:value;\r\n            }\r\n            if (typeof t==\"string\") {\r\n                var ty=this._regedType[t];\r\n                if (ty) return this.is(value,ty);\r\n                //console.log(\"assertion Warning:\",\"unregistered type:\", t, \"value:\",value);\r\n                return this.isBool()?true:value;\r\n            }\r\n            return this.fail(value, \"Invaild type: \",t);\r\n        },\r\n        ensureError: function (action, err) {\r\n            try {\r\n                action();\r\n            } catch(e) {\r\n                if(typeof err==\"string\") {\r\n                    assert(e+\"\"===err,action+\" thrown an error \"+e+\" but expected:\"+err);\r\n                }\r\n                console.log(\"Error thrown successfully: \",e.message);\r\n                return;\r\n            }\r\n            this.fail(action,\"should throw an error\",err);\r\n        },\r\n        setMode:function (mode) {\r\n            this._mode=mode;\r\n        },\r\n        isDefensive:function () {\r\n            return this._mode===this.MODE_DEFENSIVE;\r\n        },\r\n        isBool:function () {\r\n            return this._mode===this.MODE_BOOL;\r\n        },\r\n        isStrict:function () {\r\n            return !this.isDefensive() && !this.isBool();\r\n        }\r\n    };\r\n    $a=function (args) {\r\n        var a=[];\r\n        for (var i=0; i<args.length ;i++) a.push(args[i]);\r\n        return a;\r\n    };\r\n    var top=new Assertion();\r\n    var assert=function () {\r\n        try {\r\n            return top.assert.apply(top,arguments);\r\n        } catch(e) {\r\n            throw new Error(e.stack);\r\n        }\r\n    };\r\n    [\"setMode\",\"isDefensive\",\"is\",\"isset\",\"ne\",\"eq\",\"ensureError\"].forEach(function (m) {\r\n        assert[m]=function () {\r\n            try {\r\n                return top[m].apply(top,arguments);\r\n            } catch(e) {\r\n                console.log(e.stack);\r\n                //if (top.isDefensive()) return arguments[0];\r\n                //if (top.isBool()) return false;\r\n                throw new Error(e.message);\r\n            }\r\n        };\r\n    });\r\n    assert.fail=top.fail.bind(top);\r\n    assert.MODE_STRICT=top.MODE_STRICT;\r\n    assert.MODE_DEFENSIVE=top.MODE_DEFENSIVE;\r\n    assert.MODE_BOOL=top.MODE_BOOL;\r\n    assert.f=function (f) {\r\n        return {\r\n            _assert_func: f\r\n        };\r\n    };\r\n    assert.opt=function (t) {\r\n        return assert.f(function (v) {\r\n            return v==null || v instanceof t;\r\n        });\r\n    };\r\n    assert.and=function () {\r\n        var types=$a(arguments);\r\n        assert(types instanceof Array);\r\n        return assert.f(function (value) {\r\n            var t=this;\r\n            for (var i=0; i<types.length; i++) {\r\n                t.is(value,types[i]);\r\n            }\r\n        });\r\n    };\r\n    function flatten(a) {\r\n        if (a instanceof Array) {\r\n            var res=[];\r\n            a.forEach(function (e) {\r\n                res=res.concat(flatten(e));\r\n            });\r\n            return res;\r\n        }\r\n        return [a];\r\n    }\r\n    function isArg(a) {\r\n        return \"length\" in a && \"caller\" in a && \"callee\" in a;\r\n    };\r\n    return assert;\r\n});\r\n\r\ndefine('PathUtil',[\"assert\"],function (assert) {\r\nfunction endsWith(str,postfix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    assert.is(arguments,[String,String]);\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nvar driveLetter=/^([a-zA-Z]):/;\r\n// hyphen on protocol -> chrome-extension://....\r\nvar url=/^([a-z\\-]+):\\/\\/\\/?([^\\/]+)\\//;\r\nvar PathUtil;\r\nvar Path=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isPath(s) , [s, \" is not a path\"]);\r\n});\r\nvar Absolute=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( PathUtil.isAbsolutePath(s) , [s, \" is not a absolute path\"]);\r\n});\r\nvar Relative=assert.f(function (s) {\r\n    this.is(s,String);\r\n    this.assert( !PathUtil.isAbsolutePath(s) , [s, \" is not a relative path\"]);\r\n});\r\n\r\nvar Dir=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( PathUtil.isDir(s) , [s, \" is not a directory path\"]);\r\n});\r\nvar AbsDir=assert.and(Dir,Absolute);\r\nvar File=assert.f(function (s) {\r\n    this.is(s,Path);\r\n    this.assert( !PathUtil.isDir(s) , [s, \" is not a file path\"]);\r\n});\r\n\r\nvar SEP=\"/\";\r\nPathUtil={\r\n    Path: Path,Absolute:Absolute, Relative:Relative, Dir:Dir,File:File,\r\n    AbsDir:AbsDir,\r\n    SEP: SEP,\r\n    endsWith: endsWith, startsWith:startsWith,\r\n    isChildOf: function(child, parent) {\r\n        return this.startsWith( this.normalize(child), this.normalize(parent));\r\n    },\r\n    normalize: function (path) {\r\n        return this.fixSep(path,\"/\").replace(/\\/+$/,\"/\");\r\n    },\r\n    hasDriveLetter: function (path) {\r\n        return driveLetter.exec(path);\r\n    },\r\n    isURL: function (path) {\r\n        var r=url.exec(path);\r\n        if (!r) return;\r\n        return {protocol:r[1], hostPort:r[2], path:SEP+path.substring(r[0].length)  };\r\n    },\r\n    isPath: function (path) {\r\n    \tassert.is(arguments,[String]);\r\n\t\treturn true;//!path.match(/\\/\\//);\r\n    },\r\n    isRelativePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) && !PathUtil.isAbsolutePath(path);\r\n    },\r\n    isAbsolutePath: function (path) {\r\n\t\tassert.is(arguments,[String]);\r\n\t\treturn PathUtil.isPath(path) &&\r\n\t\t(PathUtil.startsWith(path,SEP) || PathUtil.hasDriveLetter(path) ||  PathUtil.isURL(path));\r\n    },\r\n    isDir: function (path) {\r\n        path=PathUtil.fixSep(path);\r\n\t\tassert.is(arguments,[Path]);\r\n        return endsWith(path,SEP);\r\n    },\r\n    hasBackslashSep:function (path) {\r\n        return path.indexOf(\"\\\\\")>=0;\r\n    },\r\n    fixSep: function (path,to) {\r\n        to=to||\"/\";\r\n        assert.is(arguments,[String]);\r\n        return assert.is( path.replace(/[\\\\\\/]/g,to), Path);\r\n    },\r\n    directorify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (PathUtil.isDir(path)) return path;\r\n        return assert.is(path+SEP, Dir);\r\n    },\r\n    filify: function (path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (!PathUtil.isDir(path)) return path;\r\n        return assert.is(path.substring(0,path.length-1),File);\r\n    },\r\n\tsplitPath: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tvar u;\r\n\t\tif (u=this.isURL(path)) {\r\n\t\t    var p=this.splitPath(u.path);\r\n\t\t    p[0]=u.protocol+\"://\"+u.hostPort;\r\n\t\t    return p;\r\n\t\t}\r\n\t\tpath=path.replace(/\\/+/g,SEP);\r\n\t    var res=path.split(SEP);\r\n        if (res[res.length-1]==\"\") {\r\n            res[res.length-2]+=SEP;\r\n            res.pop();\r\n        }\r\n        return res;\r\n    },\r\n    name: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.splitPath(path).pop();\r\n    },\r\n    ext: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        var n = PathUtil.name(path);\r\n        var r = (/\\.[a-zA-Z0-9]+$/).exec(n);\r\n        if (r) return r[0];\r\n        return null;\r\n    },\r\n    truncExt: function(path, ext) {\r\n\t\tassert.is(path,String);\r\n        var name = PathUtil.name(path);\r\n        ext=ext || PathUtil.ext(path);\r\n        assert.is(ext,String);\r\n        return name.substring(0, name.length - ext.length);\r\n    },\r\n    truncSEP: function (path) {\r\n\t\tassert.is(arguments,[Path]);\r\n\t\tif (!PathUtil.isDir(path)) return path;\r\n\t\treturn path.substring(0,path.length-1);\r\n    },\r\n    endsWith: function(path, postfix) {\r\n\t\tassert.is(arguments,[String,String]);\r\n        return endsWith(PathUtil.name(path), postfix);\r\n    },\r\n    parent: function(path) {\r\n\t\tassert.is(arguments,[String]);\r\n        return PathUtil.up(path);\r\n    },\r\n    rel: function(path,relPath) {\r\n        if (relPath==\"\") return path;\r\n\t\tassert.is(arguments,[AbsDir, Relative]);\r\n    \tvar paths=PathUtil.splitPath(relPath);\r\n        var resPath=path;\r\n        resPath=resPath.replace(/\\/$/,\"\");\r\n        var t=PathUtil;\r\n        paths.forEach(function (n) {\r\n             if (n==\"..\" || n==\"../\") resPath=t.up(resPath);\r\n             else {\r\n                 resPath=resPath.replace(/\\/$/,\"\");\r\n                 resPath+=SEP+(n==\".\"||n==\"./\" ? \"\": n);\r\n             }\r\n        });\r\n        return resPath;\r\n    },\r\n    relPath: function(path,base) {\r\n\t\tassert.is(arguments,[Absolute,Absolute]);\r\n        if (path.substring(0,base.length)!=base) {\r\n            return \"../\"+PathUtil.relPath(path, this.up(base));\r\n        }\r\n        return path.substring(base.length);\r\n    },\r\n    up: function(path) {\r\n        //path=PathUtil.fixSep(path);\r\n        if (path==SEP) return null;\r\n        var ps=PathUtil.splitPath(path);\r\n        ps.pop();\r\n        return ps.join(SEP)+SEP;\r\n    }\r\n};\r\n[\"directorify\", \"filify\", \"splitPath\", \"name\", \"rel\", \"relPath\", \"up\"].forEach(function (k) {\r\n    var old=PathUtil[k];\r\n    PathUtil[k]=function () {\r\n        var backslashifyAfter=false;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (PathUtil.hasBackslashSep(e)) {\r\n                backslashifyAfter=true;\r\n                return PathUtil.fixSep(e);\r\n            } else {\r\n                return e;\r\n            }\r\n        });\r\n        var res=old.apply(PathUtil,a);\r\n        if (backslashifyAfter) {\r\n            return PathUtil.fixSep(res,\"\\\\\");\r\n        } else {\r\n            return res;\r\n        }\r\n    };\r\n});\r\n\r\nPathUtil.isAbsolute=PathUtil.isAbsolutePath;\r\nPathUtil.isRelative=PathUtil.isRelativePath;\r\nif (typeof window==\"object\") window.PathUtil=PathUtil;\r\nreturn PathUtil;\r\n});\r\n\r\ndefine('MIMETypes',[], function () {\r\n   return {\r\n      \".png\":\"image/png\",\r\n      \".gif\":\"image/gif\",\r\n      \".jpeg\":\"image/jpeg\",\r\n      \".jpg\":\"image/jpeg\",\r\n      \".ico\":\"image/icon\",\r\n      \".wav\":\"audio/x-wav\",\r\n      \".mp3\":\"audio/mp3\",\r\n      \".ogg\":\"audio/ogg\",\r\n      \".midi\":\"audio/midi\",\r\n      \".mid\":\"audio/midi\",\r\n      \".mzo\":\"audio/mzo\",\r\n      \".txt\":\"text/plain\",\r\n      \".html\":\"text/html\",\r\n      \".htm\":\"text/html\",\r\n      \".css\":\"text/css\",\r\n      \".js\":\"text/javascript\",\r\n      \".json\":\"text/json\",\r\n      \".zip\":\"application/zip\",\r\n      \".swf\":\"application/x-shockwave-flash\",\r\n      \".pdf\":\"application/pdf\",\r\n      \".doc\":\"application/word\",\r\n      \".xls\":\"application/excel\",\r\n      \".ppt\":\"application/powerpoint\",\r\n      '.docx':'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      '.docm':'application/vnd.ms-word.document.macroEnabled.12',\r\n      '.dotx':'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\r\n      '.dotm':'application/vnd.ms-word.template.macroEnabled.12',\r\n      '.xlsx':'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      '.xlsm':'application/vnd.ms-excel.sheet.macroEnabled.12',\r\n      '.xltx':'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\r\n      '.xltm':'application/vnd.ms-excel.template.macroEnabled.12',\r\n      '.xlsb':'application/vnd.ms-excel.sheet.binary.macroEnabled.12',\r\n      '.xlam':'application/vnd.ms-excel.addin.macroEnabled.12',\r\n      '.pptx':'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n      '.pptm':'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\r\n      '.potx':'application/vnd.openxmlformats-officedocument.presentationml.template',\r\n      '.potm':'application/vnd.ms-powerpoint.template.macroEnabled.12',\r\n      '.ppsx':'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\r\n      '.ppsm':'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',\r\n      '.ppam':'application/vnd.ms-powerpoint.addin.macroEnabled.12',\r\n      \".tonyu\":\"text/tonyu\",\r\n      \".c\":\"text/c\",\r\n      \".dtl\":\"text/dolittle\"\r\n   };\r\n});\r\n\r\ndefine('DeferredUtil',[], function () {\r\n    var root=(\r\n        typeof window!==\"undefined\" ? window :\r\n        typeof self!==\"undefined\" ? self :\r\n        typeof global!==\"undefined\" ? global : null\r\n    );\r\n    //  promise.then(S,F)  and promise.then(S).fail(F) is not same!\r\n    //  ->  when fail on S,  F is executed?\r\n    //   same is promise.then(S).then(same,F)\r\n    var DU;\r\n    var DUBRK=function(r){this.res=r;};\r\n    function same(e){return e;}\r\n    DU={\r\n        isNativePromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise!==\"function\") && (typeof p.catch===\"function\") ;\r\n        },\r\n        isJQPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            (typeof p.promise===\"function\") &&(typeof p.fail===\"function\") ;\r\n        },\r\n        isPromise: function (p) {\r\n            return p && (typeof p.then===\"function\") &&\r\n            ((typeof p.promise===\"function\") || (typeof p.catch===\"function\")) ;\r\n        },\r\n        all: function (a) {\r\n            //var a=Array.prototype.slice.call(arguments);\r\n            return DU.promise(function (succ,fail) {\r\n                var res=[],rest=a.length;\r\n                a.forEach(function (p, i) {\r\n                    DU.resolve(p).then(function (r) {\r\n                        res[i]=r;\r\n                        rest--;\r\n                        if (rest===0) {\r\n                            succ(res);\r\n                        }\r\n                    },fail);\r\n                });\r\n            });\r\n        },\r\n        resolve: function (p) {\r\n            if (DU.config.useJQ && DU.isJQPromise(p)) return p;\r\n            if (!DU.config.useJQ && DU.isNativePromise(p)) return p;\r\n            return DU.promise(function (succ,fail) {\r\n                if (DU.isPromise(p)) {\r\n                    p.then(succ,fail);\r\n                } else {\r\n                    succ(p);\r\n                }\r\n            });\r\n            /*if (DU.isPromise(p)) { // NO! it returns Promise when using JQPromise and vise versa.\r\n                return f;\r\n            }\r\n            if (DU.confing.useJQ) {\r\n                return $.when(p);\r\n            }*/\r\n        },\r\n        throwNowIfRejected: function (p) {\r\n            // If Promise p has already rejected, throws the rejeceted reason immediately.\r\n            var state;\r\n            var err;\r\n            var res=p.then(function (r) {\r\n                if (!state) {\r\n                    state=\"resolved\";\r\n                }\r\n                return r;\r\n            },function (e) {\r\n                if (!state) {\r\n                    state=\"rejected\";\r\n                    err=e;\r\n                } else {\r\n                    return DU.reject(e);\r\n                }\r\n            });\r\n            if (!state) state=\"notyet\";\r\n            if (state===\"rejected\") throw err;\r\n            return res;\r\n        },\r\n        assertResolved: function (p) {\r\n            var res,resolved;\r\n            p.then(function (r) {\r\n                res=r;\r\n                resolved=true;\r\n            });\r\n            if (!resolved) {\r\n                throw new Error(\"Promise not resolved\");\r\n            }\r\n            return res;\r\n        },\r\n        /*toJQPromise: function (p) {// From native Promise\r\n            if (!p) return $.when(p);\r\n            if ($.isFunction(p.promise)) return p;\r\n            if (!$.isFunction(p.then) || !$.isFunction(p.catch)) return $.when(p);\r\n            var d=new $.Deferred();\r\n            p.then(function (r) {\r\n                d.resolve(r);\r\n            }).catch(function (r) {\r\n                d.reject(r);\r\n            });\r\n            return d.promise();\r\n        },*/\r\n        ensureDefer: function (v) {\r\n            return DU.promise(function (resolve,reject) {\r\n                var isDeferred;\r\n                DU.resolve(v).then(function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            resolve(r);\r\n                        },0);\r\n                    } else {\r\n                        resolve(r);\r\n                    }\r\n                }).then(same,function (r) {\r\n                    if (!isDeferred) {\r\n                        setTimeout(function () {\r\n                            reject(r);\r\n                        },0);\r\n                    } else {\r\n                        reject(r);\r\n                    }\r\n                });\r\n                isDeferred=true;\r\n            });\r\n        },\r\n        directPromise:function (v) {\r\n            return DU.timeout(v,0);\r\n        },\r\n        then: function (f) {\r\n            return DU.directPromise().then(f);\r\n        },\r\n        timeout:function (timeout,value) {\r\n            return DU.promise(function (resolve) {\r\n                setTimeout(function () {resolve(value);},timeout||0);\r\n            });\r\n        },\r\n        funcPromise:function (f) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                try {\r\n                    f(function (v) {\r\n                        d.resolve(v);\r\n                    },function (e) {\r\n                        d.reject(e);\r\n                    });\r\n                }catch(e) {\r\n                    d.reject(e);\r\n                }\r\n                return d.promise();\r\n            } else if (DU.external.Promise) {\r\n                return new DU.external.Promise(function (resolve,reject) {\r\n                    try {\r\n                        f(resolve,reject);\r\n                    }catch(e) {\r\n                        reject(e);\r\n                    }\r\n                });\r\n            } else {\r\n                throw new Error(\"promise is not found\");\r\n            }\r\n        },\r\n        reject: function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                d.reject(e);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwPromise:function (e) {\r\n            if (DU.config.useJQ) {\r\n                var d=new $.Deferred();\r\n                setTimeout(function () {\r\n                    d.reject(e);\r\n                }, 0);\r\n                return d.promise();\r\n            } else {\r\n                return new DU.external.Promise(function (s,rej) {\r\n                    rej(e);\r\n                });\r\n            }\r\n        },\r\n        throwF: function (f) {\r\n            return function () {\r\n                try {\r\n                    return f.apply(this,arguments);\r\n                } catch(e) {\r\n                    console.log(e,e.stack);\r\n                    return DU.throwPromise(e);\r\n                }\r\n            };\r\n        },\r\n        each: function (set,f) {\r\n            if (set instanceof Array) {\r\n                return DU.loop(function (i) {\r\n                    if (i>=set.length) return DU.brk();\r\n                    return DU.resolve(f(set[i],i)).then(function () {\r\n                        return i+1;\r\n                    });\r\n                },0);\r\n            } else {\r\n                var objs=[];\r\n                for (var i in set) {\r\n                    objs.push({k:i,v:set[i]});\r\n                }\r\n                return DU.each(objs,function (e) {\r\n                    return f(e.k, e.v);\r\n                });\r\n            }\r\n        },\r\n        loop: function (f,r) {\r\n            try {\r\n                var err;\r\n                while(true) {\r\n                    if (r instanceof DUBRK) return DU.when1(r.res);\r\n                    var deff1=true, deff2=false;\r\n                    //  not deffered    deferred\r\n                    var r1=f(r);\r\n                    var dr=DU.resolve(r1).then(function (r2) {\r\n                        r=r2;\r\n                        deff1=false;\r\n                        if (r instanceof DUBRK) return r.res;\r\n                        if (deff2) return DU.loop(f,r); //\r\n                    }).then(same,function (e) {\r\n                        deff1=false;\r\n                        err=e;\r\n                    });\r\n                    if (err) throw err;\r\n                    deff2=true;\r\n                    if (deff1) return dr;//\r\n                    //\r\n                }\r\n            }catch (e) {\r\n                return DU.reject(e);\r\n            }\r\n        },\r\n        brk: function (res) {\r\n            return new DUBRK(res);\r\n        },\r\n        tryLoop: function (f,r) {\r\n            return DU.loop(DU.tr(f),r);\r\n        },\r\n        tryEach: function (s,f) {\r\n            return DU.loop(s,DU.tr(f));\r\n        },\r\n        documentReady:function () {\r\n            return DU.callbackToPromise(function (s) {$(s);});\r\n        },\r\n        requirejs:function (modules) {\r\n            if (!root.requirejs) throw new Error(\"requirejs is not loaded\");\r\n            return DU.callbackToPromise(function (s) {\r\n                root.requirejs(modules,s);\r\n            });\r\n        }\r\n    };\r\n    DU.NOP=function (r) {return r;};\r\n    DU.E=function () {\r\n        console.log(\"DUE\",arguments);\r\n        DU.errorHandler.apply(DU,arguments);\r\n    };\r\n    DU.errorHandler=function (e) {\r\n        console.error.apply(console,arguments);\r\n        alert(e);\r\n    };\r\n    DU.setE=function (f) {\r\n        DU.errorHandler=f;\r\n    };\r\n    DU.begin=DU.try=DU.tr=DU.throwF;\r\n    DU.promise=DU.callbackToPromise=DU.funcPromise;\r\n    DU.when1=DU.resolve;\r\n    DU.config={};\r\n    if (root.$ && root.$.Deferred) {\r\n        DU.config.useJQ=true;\r\n    }\r\n    DU.external={Promise:root.Promise};\r\n    if (!root.DeferredUtil) root.DeferredUtil=DU;\r\n    return DU;\r\n});\r\n\r\ndefine('FSClass',[\"extend\",\"PathUtil\",\"MIMETypes\",\"assert\",\"DeferredUtil\"],\r\nfunction (extend, P, M,assert,DU){\r\n    var FS=function () {\r\n    };\r\n    var fstypes={};\r\n    FS.addFSType=function (name,fsgen) {\r\n        fstypes[name]=fsgen;\r\n    };\r\n    FS.availFSTypes=function () {\r\n        return fstypes;\r\n    };\r\n    function stub(n) {\r\n        throw new Error (n+\" is STUB!\");\r\n    }\r\n    extend(FS.prototype, {\r\n        err: function (path, mesg) {\r\n            throw new Error(path+\": \"+mesg);\r\n        },\r\n        fstype:function () {\r\n            return \"Unknown\";\r\n        },\r\n        isReadOnly: function (path, options) {// mainly for check ENTIRELY read only\r\n            stub(\"isReadOnly\");\r\n        },\r\n        supportsSync: function () {\r\n            return true;\r\n        },\r\n        resolveFS:function (path, options) {\r\n            assert(this.getRootFS()!==this);\r\n            return this.getRootFS().resolveFS(path);\r\n        },\r\n        mounted: function (rootFS, mountPoint ) {\r\n            //assert.is(arguments,[FS,P.AbsDir]);\r\n            this.rootFS=rootFS;\r\n            this.mountPoint=mountPoint;\r\n        },\r\n        inMyFS:function (path) {\r\n            return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n        },\r\n        /*dirFromFstab: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var res=(options||{}).res || [];\r\n            this.fstab().forEach(function (tb) {\r\n                if (P.up( tb.path )==path) res.push(P.name(tb.path));\r\n            });\r\n            return res;\r\n        },*/\r\n        getRootFS: function () {\r\n            return assert( this.rootFS, \"rootFS is not set\" );\r\n        },\r\n        //-------- end of mouting\r\n        //-------- spec\r\n        getReturnTypes: function (path, options) {\r\n            //{getContent:String|DataURL|ArrayBuffer|OutputStream|Writer\r\n            //   ,opendir:Array|...}\r\n            stub(\"\");\r\n        },\r\n        //-------  for file\r\n        getContent: function (path, options) {\r\n            // options:{type:String|DataURL|ArrayBuffer|OutputStream|Writer}\r\n            // succ : [type],\r\n            stub(\"getContent\");\r\n        },\r\n        size: function (path) {\r\n            var c=this.getContent(path,{type:ArrayBuffer});\r\n            var l=c.toBin().byteLength;\r\n            return l;\r\n        },\r\n        getContentAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"getContentAsync\");\r\n            return DU.resolve(this.getContent.apply(this,arguments));\r\n        },\r\n        setContent: function (path, content, options) {\r\n            // content: String|ArrayBuffer|InputStream|Reader\r\n            stub(\"\");\r\n        },\r\n        setContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"setContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.setContent(path,content,options));\r\n            });\r\n        },\r\n        appendContent: function (path, content, options) {\r\n            //var nc=this.getContent(path,options).toPlainText()+content.toPlainText();\r\n            //return this.setContent(path, Content.fromPlainText(nc) , options);\r\n            stub(\"\");\r\n        },\r\n        appendContentAsync: function (path, content, options) {\r\n            var t=this;\r\n            if (!t.supportsSync()) stub(\"appendContentAsync\");\r\n            return DU.resolve(content).then(function (content) {\r\n                return DU.resolve(t.appendContent(path,content,options));\r\n            });\r\n        },\r\n        getMetaInfo: function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        setMetaInfo: function (path, info, options) {\r\n            stub(\"\");\r\n        },\r\n        mkdir: function (path, options) {\r\n            stub(\"mkdir\");\r\n        },\r\n        touch: function (path) {\r\n            stub(\"touch\");\r\n        },\r\n        exists: function (path, options) {\r\n            // exists return false if path is existent by follwing symlink\r\n            stub(\"exists\");\r\n        },\r\n        opendir: function (path, options) {\r\n            //ret: [String] || Stream<string> // https://nodejs.org/api/stream.html#stream_class_stream_readable\r\n            stub(\"opendir\");\r\n        },\r\n        opendirAsync: function (path, options) {\r\n            if (!this.supportsSync()) stub(\"opendirAsync\");\r\n            return DU.resolve(this.opendir.apply(this,arguments));\r\n        },\r\n        cp: function(path, dst, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertExist(path);\r\n            options=options||{};\r\n            var srcIsDir=this.isDir(path);\r\n            var dstfs=this.getRootFS().resolveFS(dst);\r\n            var dstIsDir=dstfs.isDir(dst);\r\n            if (!srcIsDir && !dstIsDir) {\r\n                if (this.supportsSync() && dstfs.supportsSync()) {\r\n                    var cont=this.getContent(path);\r\n                    var res=dstfs.setContent(dst,cont);\r\n                    if (options.a) {\r\n                        dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                    }\r\n                    return res;\r\n                } else {\r\n                    return dstfs.setContentAsync(\r\n                            dst,\r\n                            this.getContentAsync(path)\r\n                    ).then(function (res) {\r\n                        if (options.a) {\r\n                            return dstfs.setMetaInfo(dst, this.getMetaInfo(path));\r\n                        }\r\n                        return res;\r\n                    });\r\n                }\r\n            } else {\r\n                throw new Error(\"only file to file supports\");\r\n            }\r\n        },\r\n        mv: function (path,to,options) {\r\n            this.cp(path,to,options);\r\n            return this.rm(path,{r:true});\r\n        },\r\n        rm:function (path, options) {\r\n            stub(\"\");\r\n        },\r\n        link: function (path, to, options) {\r\n            throw new Error(\"ln \"+to+\" \"+path+\" : This FS not support link.\");\r\n        },\r\n        getURL: function (path) {\r\n            stub(\"\");\r\n        },\r\n        onAddObserver: function (path) {\r\n        }\r\n    });\r\n    //res=[]; for (var k in a) { res.push(k); } res;\r\n    FS.delegateMethods=function (prototype,  methods) {\r\n        for (var n in methods) {\r\n            (function (n){\r\n                assert.ne(n,\"inMyFS\");\r\n                prototype[n]=function () {\r\n                    var path=arguments[0];\r\n                    assert.is(path,P.Absolute);\r\n                    var fs=this.resolveFS(path);\r\n                    //console.log(n, f.fs===this  ,f.fs, this);\r\n                    if (fs!==this) {\r\n                        console.log(\"Invoked for other fs\",this.mountPoint, fs.mountPoint)\r\n                        //arguments[0]=f.path;\r\n                        return fs[n].apply(fs, arguments);\r\n                    } else {\r\n                        return methods[n].apply(this, arguments);\r\n                    }\r\n                };\r\n            })(n);\r\n        }\r\n    };\r\n    FS.delegateMethods(FS.prototype, {\r\n        assertWriteable: function (path) {\r\n            if (this.isReadOnly(path)) this.err(path, \"read only.\");\r\n        },\r\n        getContentType: function (path, options) {\r\n            var e=(P.ext(path)+\"\").toLowerCase();\r\n            return M[e] || (options||{}).def || \"application/octet-stream\";\r\n        },\r\n        getBlob: function (path, options) {\r\n            var c=this.getContent(path);\r\n            options=options||{};\r\n            options.blobType=options.blobType||Blob;\r\n            options.binType=options.binType||ArrayBuffer;\r\n            if (c.hasPlainText()) {\r\n                return new options.blobType([c.toPlainText()],this.getContentType(path));\r\n            } else {\r\n                return new options.blobType([c.toBin(options.binType)],this.getContentType(path));\r\n            }\r\n        },\r\n        isText:function (path) {\r\n            var m=this.getContentType(path);\r\n            return P.startsWith( m, \"text\");\r\n        },\r\n        assertExist: function (path, options) {\r\n            if (!this.exists(path, options)) {\r\n                this.err(path, \": No such \"+(P.isDir(path)?\"directory\":\"file\"));\r\n            }\r\n        },\r\n        isDir: function (path,options) {\r\n            return P.isDir(path);\r\n        },\r\n        find: function (path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            var ls=this.opendir(path, options);\r\n            var t=this;\r\n            var res=[path];\r\n            ls.forEach(function (e) {\r\n                var ep=P.rel(path, e);\r\n                if (P.isDir(ep)) {\r\n                    var fs=t.resolveFS(ep);\r\n                    res=res.concat(\r\n                            fs.find( ep ,options)\r\n                    );\r\n                } else {\r\n                    res.push( ep );//getPathFromRootFS\r\n                }\r\n            });\r\n            return res;\r\n        },\r\n        resolveLink: function (path) {\r\n            assert.is(path,P.Absolute);\r\n            // returns non-link path\r\n            // ln -s /a/b/ /c/d/\r\n            // resolveLink /a/b/    ->  /a/b/\r\n            // resolveLink /c/d/e/f -> /a/b/e/f\r\n            // resolveLink /c/d/non_existent -> /a/b/non_existent\r\n            // isLink      /c/d/    -> /a/b/\r\n            // isLink      /c/d/e/f -> null\r\n            // ln /testdir/ /ram/files/\r\n            // resolveLink /ram/files/sub/test2.txt -> /testdir/sub/test2.txt\r\n            // path=/ram/files/test.txt\r\n            for (var p=path ; p ; p=P.up(p)) {\r\n                assert(!this.mountPoint || P.startsWith(p, this.mountPoint), p+\" is out of mountPoint. path=\"+path);\r\n                var l=this.isLink(p);  // p=/ram/files/ l=/testdir/\r\n                if (l) {\r\n                    assert(l!=p,\"l==p==\"+l);\r\n                    //        /testdir/    test.txt\r\n                    var np=P.rel(l,P.relPath(path, p));  //   /testdir/test.txt\r\n                    assert(np!=path,\"np==path==\"+np);\r\n                    return assert.is(this.getRootFS().resolveFS(np).resolveLink(np),P.Absolute)  ;\r\n                }\r\n                if (this.exists(p)) return path;\r\n            }\r\n            return path;\r\n        },\r\n        isLink: function (path) {\r\n            return null;\r\n        },\r\n        opendirEx: function (path, options) {\r\n            assert.is(path, P.AbsDir);\r\n            var ls=this.opendir(path);\r\n            var t=this;\r\n            var dest={};\r\n            ls.forEach(function (f) {\r\n                var p=P.rel(path,f);\r\n                dest[f]=t.getMetaInfo(p);\r\n            });\r\n            return dest;\r\n        },\r\n        getDirTree: function (path, options) {\r\n            options=options||{};\r\n            var dest=options.dest=options.dest||{};\r\n            options.style=options.style||\"flat-absolute\";\r\n            options.excludes=options.excludes||[];\r\n            assert.is(options.excludes,Array);\r\n            if (!options.base) {\r\n                options.base=path;\r\n            }\r\n            assert.is(path, P.AbsDir);\r\n            var tr=this.opendirEx(path,options);\r\n            if (options.style==\"no-recursive\") return tr;\r\n            var t=this;\r\n            for (var f in tr) {\r\n                var meta=tr[f];\r\n                var p=P.rel(path,f);\r\n                var relP=P.relPath(p,options.base);\r\n                switch(options.style) {\r\n                    case \"flat-relative\":\r\n                    case \"hierarchical\":\r\n                        if (options.excludes.indexOf(relP)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                    case \"flat-absolute\":\r\n                        if (options.excludes.indexOf(p)>=0) {\r\n                            continue;\r\n                        }\r\n                        break;\r\n                }\r\n                if (t.isDir(p)) {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                    case \"flat-relative\":\r\n                        t.getDirTree(p,options);\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        options.dest={};\r\n                        dest[f]=t.getDirTree(p,options);\r\n                        break;\r\n                    }\r\n                } else {\r\n                    switch(options.style) {\r\n                    case \"flat-absolute\":\r\n                        dest[p]=meta;\r\n                        break;\r\n                    case \"flat-relative\":\r\n                        dest[relP]=meta;\r\n                        break;\r\n                    case \"hierarchical\":\r\n                        dest[f]=meta;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return dest;\r\n        }\r\n        /*get: function (path) {\r\n            assert.eq(this.resolveFS(path), this);\r\n            return new SFile(this, path);\r\n            //var r=this.resolveFS(path);\r\n            //return new SFile(r.fs, r.path);\r\n        }*/\r\n\r\n    });\r\n    return FS;\r\n});\r\n\r\ndefine('Util',[],function () {\r\nfunction getQueryString(key, default_)\r\n{\r\n   if (default_==null) default_=\"\";\r\n   key = key.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\r\n   var regex = new RegExp(\"[\\\\?&]\"+key+\"=([^&#]*)\");\r\n   var qs = regex.exec(window.location.href);\r\n   if(qs == null)\r\n    return default_;\r\n   else\r\n    return decodeURLComponentEx(qs[1]);\r\n}\r\nfunction decodeURLComponentEx(s){\r\n    return decodeURIComponent(s.replace(/\\+/g, '%20'));\r\n}\r\nfunction endsWith(str,postfix) {\r\n    return str.substring(str.length-postfix.length)===postfix;\r\n}\r\nfunction startsWith(str,prefix) {\r\n    return str.substring(0, prefix.length)===prefix;\r\n}\r\nfunction privatize(o){\r\n    if (o.__privatized) return o;\r\n    var res={__privatized:true};\r\n    for (var n in o) {\r\n        (function (n) {\r\n            var m=o[n];\r\n            if (n.match(/^_/)) return;\r\n            if (typeof m!=\"function\") return;\r\n            res[n]=function () {\r\n                var r=m.apply(o,arguments);\r\n                return r;\r\n            };\r\n        })(n);\r\n    }\r\n    return res;\r\n}\r\nfunction extend(d,s) {\r\n    for (var i in (s||{})) {d[i]=s[i];} \r\n    return d;\r\n}\r\nreturn {\r\n    getQueryString:getQueryString,\r\n    endsWith: endsWith, startsWith: startsWith,\r\n    privatize: privatize,extend:extend\r\n};\r\n});\r\n\r\n/*\r\n* FileSaver.js\r\n* A saveAs() FileSaver implementation.\r\n*\r\n* By Eli Grey, http://eligrey.com\r\n*\r\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\r\n* source  : http://purl.eligrey.com/github/FileSaver.js\r\n*/\r\ndefine('FileSaver',[],function (){\r\n\r\n// The one and only way of getting global scope in all environments\r\n// https://stackoverflow.com/q/3277182/1008999\r\nvar _global = typeof window === 'object' && window.window === window\r\n  ? window : typeof self === 'object' && self.self === self\r\n  ? self : typeof global === 'object' && global.global === global\r\n  ? global\r\n  : this\r\n\r\nfunction bom (blob, opts) {\r\n  if (typeof opts === 'undefined') opts = { autoBom: false }\r\n  else if (typeof opts !== 'object') {\r\n    console.warn('Depricated: Expected third argument to be a object')\r\n    opts = { autoBom: !opts }\r\n  }\r\n\r\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\r\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\r\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\r\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\r\n  }\r\n  return blob\r\n}\r\n\r\nfunction download (url, name, opts) {\r\n  var xhr = new XMLHttpRequest()\r\n  xhr.open('GET', url)\r\n  xhr.responseType = 'blob'\r\n  xhr.onload = function () {\r\n    saveAs(xhr.response, name, opts)\r\n  }\r\n  xhr.onerror = function () {\r\n    console.error('could not download file')\r\n  }\r\n  xhr.send()\r\n}\r\n\r\nfunction corsEnabled (url) {\r\n  var xhr = new XMLHttpRequest()\r\n  // use sync to avoid popup blocker\r\n  xhr.open('HEAD', url, false)\r\n  xhr.send()\r\n  return xhr.status >= 200 && xhr.status <= 299\r\n}\r\n\r\n// `a.click()` doesn't work for all browsers (#465)\r\nfunction click(node) {\r\n  try {\r\n    node.dispatchEvent(new MouseEvent('click'))\r\n  } catch (e) {\r\n    var evt = document.createEvent('MouseEvents')\r\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\r\n                          20, false, false, false, false, 0, null)\r\n    node.dispatchEvent(evt)\r\n  }\r\n}\r\n\r\nvar saveAs = _global.saveAs ||\r\n// probably in some web worker\r\n(typeof window !== 'object' || window !== _global)\r\n  ? function saveAs () { /* noop */ }\r\n\r\n// Use download attribute first if possible (#193 Lumia mobile)\r\n: 'download' in HTMLAnchorElement.prototype\r\n? function saveAs (blob, name, opts) {\r\n  var URL = _global.URL || _global.webkitURL\r\n  var a = document.createElement('a')\r\n  name = name || blob.name || 'download'\r\n\r\n  a.download = name\r\n  a.rel = 'noopener' // tabnabbing\r\n\r\n  // TODO: detect chrome extensions & packaged apps\r\n  // a.target = '_blank'\r\n\r\n  if (typeof blob === 'string') {\r\n    // Support regular links\r\n    a.href = blob\r\n    if (a.origin !== location.origin) {\r\n      corsEnabled(a.href)\r\n        ? download(blob, name, opts)\r\n        : click(a, a.target = '_blank')\r\n    } else {\r\n      click(a)\r\n    }\r\n  } else {\r\n    // Support blobs\r\n    a.href = URL.createObjectURL(blob)\r\n    setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\r\n    setTimeout(function () { click(a) }, 0)\r\n  }\r\n}\r\n\r\n// Use msSaveOrOpenBlob as a second approach\r\n: 'msSaveOrOpenBlob' in navigator\r\n? function saveAs (blob, name, opts) {\r\n  name = name || blob.name || 'download'\r\n\r\n  if (typeof blob === 'string') {\r\n    if (corsEnabled(blob)) {\r\n      download(blob, name, opts)\r\n    } else {\r\n      var a = document.createElement('a')\r\n      a.href = blob\r\n      a.target = '_blank'\r\n      setTimeout(function () { click(a) })\r\n    }\r\n  } else {\r\n    navigator.msSaveOrOpenBlob(bom(blob, opts), name)\r\n  }\r\n}\r\n\r\n// Fallback to using FileReader and a popup\r\n: function saveAs (blob, name, opts, popup) {\r\n  // Open a popup immediately do go around popup blocker\r\n  // Mostly only avalible on user interaction and the fileReader is async so...\r\n  popup = popup || open('', '_blank')\r\n  if (popup) {\r\n    popup.document.title =\r\n    popup.document.body.innerText = 'downloading...'\r\n  }\r\n\r\n  if (typeof blob === 'string') return download(blob, name, opts)\r\n\r\n  var force = blob.type === 'application/octet-stream'\r\n  var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\r\n  var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\r\n\r\n  if ((isChromeIOS || (force && isSafari)) && typeof FileReader === 'object') {\r\n    // Safari doesn't allow downloading of blob urls\r\n    var reader = new FileReader()\r\n    reader.onloadend = function () {\r\n      var url = reader.result\r\n      url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\r\n      if (popup) popup.location.href = url\r\n      else location = url\r\n      popup = null // reverse-tabnabbing #460\r\n    }\r\n    reader.readAsDataURL(blob)\r\n  } else {\r\n    var URL = _global.URL || _global.webkitURL\r\n    var url = URL.createObjectURL(blob)\r\n    if (popup) popup.location = url\r\n    else location.href = url\r\n    popup = null // reverse-tabnabbing #460\r\n    setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\r\n  }\r\n}\r\n\r\n_global.saveAs = saveAs.saveAs = saveAs\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = saveAs;\r\n}\r\nreturn saveAs;\r\n});\r\n\r\ndefine('Content',[\"assert\",\"Util\",\"FileSaver\"],function (assert,Util,saveAs) {\r\n    var Content=function () {};\r\n    var extend=Util.extend;\r\n    // ------ constructor\r\n    Content.plainText=function (s,contentType){\r\n        var b=new Content;\r\n        b.contentType=contentType||\"text/plain\";\r\n        b.plain=s;\r\n        return b;\r\n    };\r\n    Content.url=function (s) {\r\n        var b=new Content;\r\n        b.url=s;\r\n        return b;\r\n    };\r\n    Content.buffer2ArrayBuffer = function (a) {\r\n        if (Content.isBuffer(a)) {\r\n            var u=new Uint8Array(a);\r\n            var r=u.buffer;\r\n            if (r instanceof ArrayBuffer) return r;\r\n            var ary=Array.prototype.slice.call(u);\r\n            return assert(new Uint8Array(ary).buffer,\"n2a: buf is not set\");\r\n        }\r\n        return assert(a,\"n2a: a is not set\");\r\n    };\r\n    Content.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return assert(a,\"a2n: a is not set\");\r\n    };\r\n\r\n    Content.bin=function (bin, contentType) {\r\n        assert(contentType, \"contentType should be set\");\r\n        var b=new Content;\r\n        if (Content.isNodeBuffer(bin)) {\r\n            b.bufType=\"node\";\r\n            b.nodeBuffer=bin;\r\n        } else if (bin instanceof ArrayBuffer) {\r\n            b.bufType=\"array2\";\r\n            b.arrayBuffer=bin;\r\n        } else if (bin && Content.isBuffer(bin.buffer)) {\r\n            // in node.js v8.9.1 ,\r\n            ///  bin is Buffer, bin.buffer is ArrayBuffer\r\n            //   and bin.buffer is content of different file(memory leak?) \r\n            b.bufType=\"array1\";\r\n            b.arrayBuffer=bin.buffer;\r\n        } else {\r\n            throw new Error(bin+\" is not a bin\");\r\n        }\r\n        b.contentType=contentType;\r\n        return b;\r\n    };\r\n    Content.looksLikeDataURL=function (text) {\r\n        return text.match(/^data:/);\r\n    };\r\n    Content.download=saveAs;\r\n    // why blob is not here... because blob content requires FileReader (cannot read instantly!)\r\n    //------- methods\r\n    var p=Content.prototype;\r\n    p.toBin = function (binType) {\r\n        binType=binType || (Content.hasNodeBuffer() ? Buffer: ArrayBuffer);\r\n        if (this.nodeBuffer) {\r\n            if (binType===Buffer) {\r\n                return this.nodeBuffer;\r\n            } else {\r\n                return this.arrayBuffer=( Content.buffer2ArrayBuffer(this.nodeBuffer) );\r\n            }\r\n        } else if (this.arrayBuffer) {\r\n            if (binType===ArrayBuffer) {\r\n                return this.arrayBuffer;\r\n            } else {\r\n                return this.nodeBuffer=( Content.arrayBuffer2Buffer(this.arrayBuffer) );\r\n            }\r\n        } else if (this.url) {\r\n            var d=new DataURL(this.url, binType);\r\n            return this.setBuffer(d.buffer);\r\n        } else if (this.plain!=null) {\r\n            return this.setBuffer( Content.str2utf8bytes(this.plain, binType) );\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.setBuffer=function (b) {\r\n        assert(b,\"b is not set\");\r\n        if (Content.isNodeBuffer(b)) {\r\n            return this.nodeBuffer=b;\r\n        } else {\r\n            return this.arrayBuffer=b;\r\n        }\r\n    };\r\n    p.toArrayBuffer=function () {\r\n        return this.toBin(ArrayBuffer);\r\n    };\r\n    p.toNodeBuffer=function () {\r\n        return this.toBin(Buffer);\r\n    };\r\n    p.toURL=function () {\r\n        if (this.url) {\r\n            return this.url;\r\n        } else {\r\n            if (!this.arrayBuffer && this.plain!=null) {\r\n                this.arrayBuffer=Content.str2utf8bytes(this.plain,ArrayBuffer);\r\n            }\r\n            if (this.arrayBuffer || this.nodeBuffer) {\r\n                var d=new DataURL(this.arrayBuffer || this.nodeBuffer,this.contentType);\r\n                return this.url=d.url;\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.toPlainText=function () {\r\n        if (this.hasPlainText()) {\r\n            return this.plain;\r\n        } else {\r\n            if (this.url && !this.hasBin() ) {\r\n                var d=new DataURL(this.url,ArrayBuffer);\r\n                this.arrayBuffer=d.buffer;\r\n            }\r\n            if (this.hasBin()) {\r\n                return this.plain=Content.utf8bytes2str(\r\n                        this.nodeBuffer || new Uint8Array(this.arrayBuffer)\r\n                );\r\n            }\r\n        }\r\n        throw new Error(\"No data\");\r\n    };\r\n    p.hasURL=function (){return this.url;};\r\n    p.hasPlainText=function (){return this.plain!=null;};\r\n    p.hasBin=function (){return this.nodeBuffer || this.arrayBuffer;};\r\n    p.hasNodeBuffer= function () {return this.nodeBuffer;};\r\n    p.hasArrayBuffer= function () {return this.arrayBuffer;};\r\n    p.toBlob=function () {\r\n        return new Blob([this.toBin(ArrayBuffer)],{type:this.contentType});\r\n    };\r\n    p.download=function (name) {\r\n        Content.download(this.toBlob(),name);\r\n    };\r\n    //--------Util funcs\r\n    // From http://hakuhin.jp/js/base64.html#BASE64_DECODE_ARRAY_BUFFER\r\n    Content.Base64_To_ArrayBuffer=function (base64,binType){\r\n\t    var A=binType||ArrayBuffer;\r\n        base64=base64.replace(/[\\n=]/g,\"\");\r\n        var dic = new Object();\r\n        dic[0x41]= 0; dic[0x42]= 1; dic[0x43]= 2; dic[0x44]= 3; dic[0x45]= 4; dic[0x46]= 5; dic[0x47]= 6; dic[0x48]= 7; dic[0x49]= 8; dic[0x4a]= 9; dic[0x4b]=10; dic[0x4c]=11; dic[0x4d]=12; dic[0x4e]=13; dic[0x4f]=14; dic[0x50]=15;\r\n        dic[0x51]=16; dic[0x52]=17; dic[0x53]=18; dic[0x54]=19; dic[0x55]=20; dic[0x56]=21; dic[0x57]=22; dic[0x58]=23; dic[0x59]=24; dic[0x5a]=25; dic[0x61]=26; dic[0x62]=27; dic[0x63]=28; dic[0x64]=29; dic[0x65]=30; dic[0x66]=31;\r\n        dic[0x67]=32; dic[0x68]=33; dic[0x69]=34; dic[0x6a]=35; dic[0x6b]=36; dic[0x6c]=37; dic[0x6d]=38; dic[0x6e]=39; dic[0x6f]=40; dic[0x70]=41; dic[0x71]=42; dic[0x72]=43; dic[0x73]=44; dic[0x74]=45; dic[0x75]=46; dic[0x76]=47;\r\n        dic[0x77]=48; dic[0x78]=49; dic[0x79]=50; dic[0x7a]=51; dic[0x30]=52; dic[0x31]=53; dic[0x32]=54; dic[0x33]=55; dic[0x34]=56; dic[0x35]=57; dic[0x36]=58; dic[0x37]=59; dic[0x38]=60; dic[0x39]=61; dic[0x2b]=62; dic[0x2f]=63;\r\n        var num = base64.length;\r\n        var n = 0;\r\n        var b = 0;\r\n        var e;\r\n\r\n        if(!num) return (new A(0));\r\n        //if(num < 4) return null;\r\n        //if(num % 4) return null;\r\n\r\n        // AA     12    1\r\n        // AAA    18    2\r\n        // AAAA   24    3\r\n        // AAAAA  30    3\r\n        // AAAAAA 36    4\r\n        // num*6/8\r\n        e = Math.floor(num / 4 * 3);\r\n        if(base64.charAt(num - 1) == '=') e -= 1;\r\n        if(base64.charAt(num - 2) == '=') e -= 1;\r\n\r\n        var ary_buffer = new A( e );\r\n        var ary_u8 = (Content.isNodeBuffer(ary_buffer) ? ary_buffer : new Uint8Array( ary_buffer ));//new Uint8Array( ary_buffer );\r\n        var i = 0;\r\n        var p = 0;\r\n        while(p < e){\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i));//return null;\r\n            n = (b << 2);\r\n            i ++;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 4) & 0x3);\r\n            n = (b & 0x0f) << 4;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | ((b >> 2) & 0xf);\r\n            n = (b & 0x03) << 6;\r\n            i ++;\r\n            p ++;\r\n            if(p >= e) break;\r\n\r\n            b = dic[base64.charCodeAt(i)];\r\n            if(b === undefined) fail(\"Invalid letter: \"+base64.charCodeAt(i))\r\n            ary_u8[p] = n | b;\r\n            i ++;\r\n            p ++;\r\n        }\r\n        function fail(m) {\r\n            console.log(m);\r\n            console.log(base64,i);\r\n            throw new Error(m);\r\n        }\r\n        return ary_buffer;\r\n    };\r\n\r\n    Content.Base64_From_ArrayBuffer=function (ary_buffer){\r\n        var dic = [\r\n            'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\r\n            'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',\r\n            'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',\r\n            'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'\r\n        ];\r\n        var base64 = \"\";\r\n        var ary_u8 = new Uint8Array( ary_buffer );\r\n        var num = ary_u8.length;\r\n        var n = 0;\r\n        var b = 0;\r\n\r\n        var i = 0;\r\n        while(i < num){\r\n            b = ary_u8[i];\r\n            base64 += dic[(b >> 2)];\r\n            n = (b & 0x03) << 4;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 4)];\r\n            n = (b & 0x0f) << 2;\r\n            i ++;\r\n            if(i >= num) break;\r\n\r\n            b = ary_u8[i];\r\n            base64 += dic[n | (b >> 6)];\r\n            base64 += dic[(b & 0x3f)];\r\n            i ++;\r\n        }\r\n\r\n        var m = num % 3;\r\n        if(m){\r\n            base64 += dic[n];\r\n        }\r\n        if(m == 1){\r\n            base64 += \"==\";\r\n        }else if(m == 2){\r\n            base64 += \"=\";\r\n        }\r\n        return base64;\r\n    };\r\n\r\n    Content.hasNodeBuffer=function () {\r\n        return typeof Buffer!=\"undefined\";\r\n    };\r\n    Content.isNodeBuffer=function (data) {\r\n        return (Content.hasNodeBuffer() && data instanceof Buffer);\r\n    };\r\n    Content.isBuffer=function (data) {\r\n        return data instanceof ArrayBuffer || Content.isNodeBuffer(data);\r\n    };\r\n    Content.utf8bytes2str=function (bytes) {\r\n        var e=[];\r\n        for (var i=0 ; i<bytes.length ; i++) {\r\n             e.push(\"%\"+(\"0\"+bytes[i].toString(16)).slice(-2));\r\n        }\r\n        //try {\r\n            return decodeURIComponent(e.join(\"\"));\r\n        /*} catch (er) {\r\n            console.log(e.join(\"\"));\r\n            throw er;\r\n        }*/\r\n    };\r\n    Content.str2utf8bytes=function (str, binType) {\r\n        var e=encodeURIComponent(str);\r\n        var r=/^%(..)/;\r\n        var a=[];\r\n        var ad=0;\r\n        for (var i=0 ; i<e.length; i++) {\r\n            var m=r.exec( e.substring(i));\r\n            if (m) {\r\n                a.push(parseInt(\"0x\"+m[1]));\r\n                i+=m[0].length-1;\r\n            } else a.push(e.charCodeAt(i));\r\n        }\r\n        return (typeof Buffer!=\"undefined\" && binType===Buffer ? new Buffer(a) : new Uint8Array(a).buffer);\r\n    };\r\n    //-------- DataURL\r\n    var A=Content.hasNodeBuffer() ? Buffer :ArrayBuffer;\r\n    //var isBuffer=Util.isBuffer;\r\n    var DataURL=function (data, contentType){\r\n      // data: String/Array/ArrayBuffer\r\n      if (typeof data==\"string\") {\r\n          this.url=data;\r\n          this.binType=contentType || A;\r\n          this.dataURL2bin(data);\r\n      } else if (data && Content.isBuffer(data.buffer)) {\r\n          this.buffer=data.buffer;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else if (Content.isBuffer(data)) {\r\n          this.buffer=data;\r\n          assert.is(contentType,String);\r\n          this.contentType=contentType;\r\n          this.bin2dataURL(this.buffer, this.contentType);\r\n      } else {\r\n          console.log(arguments);\r\n          assert.fail(\"Invalid args: \",arguments);\r\n      }\r\n   };\r\n   Content.DataURL=DataURL;\r\n   extend(DataURL.prototype,{\r\n      bin2dataURL: function (b, contentType) {\r\n          assert(Content.isBuffer(b));\r\n          assert.is(contentType,String);\r\n  \t     var head=this.dataHeader(contentType);\r\n\t     var base64=Content.Base64_From_ArrayBuffer(b);\r\n\t     assert.is(base64,String);\r\n\t     return this.url=head+base64;\r\n\t  },\r\n\t  dataURL2bin: function (dataURL) {\r\n          assert.is(arguments,[String]);\r\n\t      var reg=/^data:([^;]+);base64,/i;\r\n\t      var r=reg.exec(dataURL);\r\n\t      assert(r, [\"malformed dataURL:\", dataURL] );\r\n\t      this.contentType=r[1];\r\n\t      this.buffer=Content.Base64_To_ArrayBuffer(dataURL.substring(r[0].length) , this.binType);\r\n          return assert.is(this.buffer , this.binType);\r\n  \t  },\r\n  \t  dataHeader: function (ctype) {\r\n\t      assert.is(arguments,[String]);\r\n\t      return \"data:\"+ctype+\";base64,\";\r\n   \t  },\r\n   \t  toString: function () {return assert.is(this.url,String);}\r\n   });\r\n\r\n    return Content;\r\n});\r\n\r\n/*global process, global, Buffer*/\r\ndefine('NativeFS',[\"FSClass\",\"assert\",\"PathUtil\",\"extend\",\"Content\"],\r\n        function (FS,A,P,extend,Content) {\r\n    var assert=A,fs;\r\n    try {\r\n        fs=global.require(\"fs\");\r\n        fs.existsSync('test.txt');\r\n    }catch(e){\r\n        return function () {\r\n            throw new Error(\"This system not support native FS\");\r\n        };\r\n    }\r\n    var NativeFS=function (rootPoint) {\r\n        if (rootPoint) {\r\n            A.is(rootPoint, P.AbsDir);\r\n            this.rootPoint=rootPoint;\r\n        }\r\n    };\r\n    var hasDriveLetter=P.hasDriveLetter(process.cwd());\r\n    NativeFS.available=true;\r\n    var SEP=P.SEP;\r\n    //var json=JSON; // JSON changes when page changes, if this is node module, JSON is original JSON\r\n    var Pro=NativeFS.prototype=new FS();\r\n    Pro.toNativePath = function (path) {\r\n        // rootPoint: on NativePath   C:/jail/\r\n        // mountPoint: on VirtualFS   /mnt/natfs/\r\n        if (!this.rootPoint) return path;\r\n        A.is(path, P.Absolute);\r\n        A(this.inMyFS(path),path+\" is not fs of \"+this);\r\n        //console.log(\"tonat:MP\",P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP)));\r\n        return P.rel( this.rootPoint, P.relPath(path, this.mountPoint || P.SEP));\r\n    };\r\n    Pro.arrayBuffer2Buffer= function (a) {\r\n        if (a instanceof ArrayBuffer) {\r\n            var b=new Buffer(new Uint8Array(a));\r\n            return b;\r\n        }\r\n        return a;\r\n    };\r\n\r\n    FS.addFSType(\"NativeFS\",function (path, options) {\r\n            return new NativeFS(options.r);\r\n    });\r\n    NativeFS.prototype.fstype=function () {\r\n        return \"Native\"+(this.rootPoint?\"(\"+this.rootPoint+\")\":\"\");\r\n    };\r\n    NativeFS.prototype.inMyFS=function (path) {\r\n        //console.log(\"inmyfs\",path);\r\n        if (this.mountPoint) {\r\n            return P.startsWith(path, this.mountPoint);\r\n        } else {\r\n//            console.log(path, hasDriveLetter , P.hasDriveLetter(path));\r\n            return !( !!hasDriveLetter ^ !!P.hasDriveLetter(path));\r\n        }\r\n    };\r\n    function E(r){return r;}\r\n    FS.delegateMethods(NativeFS.prototype, {\r\n        getReturnTypes: function(path, options) {\r\n            E(path,options);\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: ArrayBuffer, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function (path, options) {\r\n            options=options||{};\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            this.assertExist(path);\r\n            /*if (this.isText(path)) {\r\n                return Content.plainText( fs.readFileSync(np, {encoding:\"utf8\"}) );\r\n            } else {*/\r\n                return Content.bin( fs.readFileSync(np) , this.getContentType(path));\r\n            //}\r\n        },\r\n        size: function(path) {\r\n            var np=this.toNativePath(path);\r\n            var st=fs.statSync(np);\r\n            return st.size;\r\n        },\r\n        setContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.writeFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.writeFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        appendContent: function (path,content) {\r\n            A.is(arguments,[P.Absolute,Content]);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            if (content.hasBin() || !content.hasPlainText() ) {\r\n                fs.appendFileSync(np, content.toNodeBuffer() );\r\n            } else {\r\n                // !hasBin && hasText\r\n                fs.appendFileSync(np, content.toPlainText());\r\n            }\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, options);\r\n            var s=this.stat(path);\r\n            s.lastUpdate=s.mtime.getTime();\r\n            return s;\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            E(path, info, options);\r\n            //options.lastUpdate\r\n\r\n            //TODO:\r\n        },\r\n        isReadOnly: function (path) {\r\n            E(path);\r\n            // TODO:\r\n            return false;\r\n        },\r\n        stat: function (path) {\r\n            A.is(path,P.Absolute);\r\n            var np=this.toNativePath(path);\r\n            return fs.statSync(np);\r\n        },\r\n        mkdir: function(path, options) {\r\n            options=options||{};\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (this.exists(path)){\r\n                if (this.isDir(path)) {\r\n                    return;\r\n                } else {\r\n                    throw new Error(this+\" is a file. not a dir.\");\r\n                }\r\n            }\r\n            this.assertWriteable(path);\r\n            var pa=P.up(path);\r\n            if (pa) this.getRootFS().resolveFS(pa).mkdir(pa);\r\n            var np=this.toNativePath(path);\r\n            fs.mkdirSync(np);\r\n            return this.assertExist(np);\r\n        },\r\n        opendir: function (path, options) {\r\n            assert.is(arguments,[String]);\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            var ts=P.truncSEP(np);\r\n            var r=fs.readdirSync(np);\r\n            if (!options.nosep) {\r\n                r=r.map(function (e) {\r\n                    var s=fs.statSync(ts+SEP+e);\r\n                    var ss=s.isDirectory()?SEP:\"\";\r\n                    return e+ss;\r\n                });\r\n            }\r\n            var res=[]; //this.dirFromFstab(path);\r\n            return assert.is(res.concat(r),Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            options=options||{};\r\n            this.assertExist(path);\r\n            var np=this.toNativePath(path);\r\n            if (this.isDir(path)) {\r\n                return fs.rmdirSync(np);\r\n            } else {\r\n                return fs.unlinkSync(np);\r\n            }\r\n        },\r\n        // mv: is Difficult, should check dst.fs==src.fs\r\n        //     and both have not subFileSystems\r\n        exists: function (path, options) {\r\n            options=options||{};\r\n            var np=this.toNativePath(path);\r\n            return fs.existsSync(np);\r\n        },\r\n        isDir: function (path) {\r\n            if (!this.exists(path)) {\r\n                return P.isDir(path);\r\n            }\r\n            return this.stat(path).isDirectory();\r\n        },\r\n        /*link: function(path, to, options) {\r\n        }//TODO\r\n        isLink:\r\n        */\r\n        touch: function (path) {\r\n            if (!this.exists(path) && this.isDir(path)) {\r\n                this.mkdir(path);\r\n            } else if (this.exists(path) /*&& !this.isDir(path)*/ ) {\r\n                // TODO(setlastupdate)\r\n                fs.utimesSync(path,Date.now()/1000,Date.now()/1000);\r\n            }\r\n        },\r\n        getURL:function (path) {\r\n            return \"file:///\"+path.replace(/\\\\/g,\"/\");\r\n        },\r\n        onAddObserver: function (apath,options) {\r\n            var t=this;\r\n            var rfs=t.getRootFS();\r\n            options=options||{};\r\n            var isDir=this.isDir(apath);\r\n            //console.log(\"Invoke oao\",options);\r\n            var w=fs.watch(apath, options, function (evt,rpath) {\r\n                //console.log(path);\r\n                var fpath=isDir ? P.rel(apath,rpath) : apath;\r\n                var meta;\r\n                if (t.exists(fpath)) {\r\n                    meta=extend({eventType:evt},t.getMetaInfo(fpath));\r\n                } else {\r\n                    meta={eventType:evt};\r\n                }\r\n                rfs.notifyChanged(fpath,meta);\r\n            });\r\n            return {\r\n                remove: function () {\r\n                    w.close();\r\n                }\r\n            };\r\n        }\r\n    });\r\n    return NativeFS;\r\n});\r\n\r\ndefine('LSFS',[\"FSClass\",\"PathUtil\",\"extend\",\"assert\",\"Util\",\"Content\"],\r\n        function(FS,P,extend,assert,Util,Content) {\r\n    var LSFS = function(storage,options) {\r\n        assert(storage,\" new LSFS fail: no storage\");\r\n    \tthis.storage=storage;\r\n    \tthis.options=options||{};\r\n    \tif (this.options.useDirCache) this.dirCache={};\r\n    };\r\n    var isDir = P.isDir.bind(P);\r\n    var up = P.up.bind(P);\r\n    var endsWith= P.endsWith.bind(P);\r\n    //var getName = P.name.bind(P);\r\n    //var Path=P.Path;\r\n    var Absolute=P.Absolute;\r\n    var SEP= P.SEP;\r\n    function now(){\r\n        return new Date().getTime();\r\n    }\r\n    LSFS.ramDisk=function (options) {\r\n        var s={};\r\n        s[P.SEP]=\"{}\";\r\n        options=options||{};\r\n        if (!(\"useDirCache\" in options)) options.useDirCache=true;\r\n        return new LSFS(s,options);\r\n    };\r\n    FS.addFSType(\"localStorage\",function (path, options) {\r\n        return new LSFS(localStorage,options);\r\n    });\r\n    FS.addFSType(\"ram\",function (path, options) {\r\n        return LSFS.ramDisk(options);\r\n    });\r\n\r\n    LSFS.now=now;\r\n    LSFS.prototype=new FS();\r\n    //private methods\r\n    LSFS.prototype.resolveKey=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        if (this.mountPoint) {\r\n            return P.SEP+P.relPath(path,this.mountPoint);//FromMountPoint(path);\r\n        } else {\r\n            return path;\r\n        }\r\n    };\r\n    LSFS.prototype.getItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        return this.storage[key];\r\n    };\r\n    LSFS.prototype.setItem=function (path, value) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        /*if (key.indexOf(\"..\")>=0) {\r\n            console.log(path,key,value);\r\n        }*/\r\n        assert(key.indexOf(\"..\")<0);\r\n        assert(P.startsWith(key,P.SEP));\r\n        this.storage[key]=value;\r\n    };\r\n    LSFS.prototype.removeItem=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        delete this.storage[key];\r\n    };\r\n    LSFS.prototype.itemExists=function (path) {\r\n        assert.is(path,P.Absolute);\r\n        var key=this.resolveKey(path);\r\n        assert(this.storage,\"No storage\");\r\n        return key in this.storage;\r\n    };\r\n    /*LSFS.prototype.inMyFS=function (path){\r\n        return !this.mountPoint || P.startsWith(path, this.mountPoint);\r\n    };*/\r\n    LSFS.prototype.getDirInfo=function getDirInfo(path) {\r\n        assert.is(arguments,[P.AbsDir]);\r\n        if (path == null) throw new Error(\"getDir: Null path\");\r\n        if (!endsWith(path, SEP)) path += SEP;\r\n        assert(this.inMyFS(path));\r\n        if (this.dirCache && this.dirCache[path]) return this.dirCache[path];\r\n        var dinfo =  {},dinfos;\r\n        try {\r\n            dinfos = this.getItem(path);\r\n            if (dinfos) {\r\n                dinfo = JSON.parse(dinfos);\r\n            }\r\n        } catch (e) {\r\n            console.log(\"dinfo err : \" , path , dinfos);\r\n        }\r\n        if (this.dirCache) this.dirCache[path]=dinfo;\r\n        return dinfo;\r\n    };\r\n    LSFS.prototype.putDirInfo=function putDirInfo(path, dinfo, trashed) {\r\n  \t    assert.is(arguments,[P.AbsDir, Object]);\r\n  \t    if (!isDir(path)) throw new Error(\"Not a directory : \" + path);\r\n  \t    assert(this.inMyFS(path));\r\n  \t    if (this.dirCache) this.dirCache[path] = dinfo;\r\n  \t    this.setItem(path, JSON.stringify(dinfo));\r\n        var ppath = up(path);\r\n        if (ppath == null) return;\r\n        if (!this.inMyFS(ppath)) {\r\n            //assert(this.getRootFS()!==this);\r\n            //this.getRootFS().resolveFS(ppath).touch(ppath);\r\n            return;\r\n        }\r\n        var pdinfo = this.getDirInfo(ppath);\r\n        this._touch(pdinfo, ppath, P.name(path), trashed);\r\n    };\r\n    LSFS.prototype._touch=function _touch(dinfo, path, name, trashed) {\r\n        // path:path of dinfo\r\n        // trashed: this touch is caused by trashing the file/dir.\r\n        assert.is(arguments,[Object, String, String]);\r\n        assert(this.inMyFS(path));\r\n        var eventType=\"change\";\r\n        if (!dinfo[name]) {\r\n            eventType=\"create\";\r\n            dinfo[name] = {};\r\n            if (trashed) dinfo[name].trashed = true;\r\n        }\r\n        if (!trashed) delete dinfo[name].trashed;\r\n        dinfo[name].lastUpdate = now();\r\n        var meta=extend({eventType:eventType},dinfo[name]);\r\n        this.getRootFS().notifyChanged(P.rel(path,name), meta);\r\n        this.putDirInfo(path, dinfo, trashed);\r\n    };\r\n    LSFS.prototype.removeEntry=function removeEntry(dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            dinfo[name] = {\r\n                lastUpdate: now(),\r\n                trashed: true\r\n            };\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"trash\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.removeEntryWithoutTrash=function (dinfo, path, name) { // path:path of dinfo\r\n        assert.is(arguments,[Object, String, String]);\r\n        if (dinfo[name]) {\r\n            delete dinfo[name];\r\n            this.getRootFS().notifyChanged(P.rel(path,name), {eventType:\"delete\"});\r\n            this.putDirInfo(path, dinfo, true);\r\n        }\r\n    };\r\n    LSFS.prototype.isRAM=function (){\r\n        return this.storage!==localStorage;\r\n    };\r\n    LSFS.prototype.fstype=function () {\r\n        return (this.isRAM() ? \"ramDisk\" : \"localStorage\" );\r\n    };\r\n    LSFS.getUsage=function () {\r\n        var using=0;\r\n        for (var i in localStorage) {\r\n            if (typeof localStorage[i]==\"string\"){\r\n                using+=localStorage[i].length;\r\n            }\r\n        }\r\n        return using;\r\n    };\r\n    LSFS.getCapacity=function () {\r\n        var seq=0;\r\n        var str=\"a\";\r\n        var KEY=\"___checkls___\";\r\n        var using=0;\r\n        var lim=Math.pow(2,25);//32MB?\r\n        try {\r\n            // make 1KB str\r\n            for (var i=0; i<10 ;i++) {\r\n                str+=str;\r\n            }\r\n            for (var i in localStorage) {\r\n                if (i.substring(0,KEY.length)==KEY) delete localStorage[i];\r\n                else if (typeof localStorage[i]==\"string\"){\r\n                    using+=localStorage[i].length;\r\n                }\r\n            }\r\n            var ru=using;\r\n            while (add()) {\r\n                if (str.length<lim) {\r\n                    str+=str;\r\n                } else break;\r\n            }\r\n            while(str.length>1024) {\r\n                str=str.substring(str.length/2);\r\n                add();\r\n            }\r\n            return {using:ru, max:using};\r\n        } finally {\r\n            for (var i=0; i<seq; i++) {\r\n                 delete localStorage[KEY+i];\r\n            }\r\n        }\r\n        function add() {\r\n            try {\r\n                localStorage[KEY+seq]=str;\r\n                seq++;\r\n                using+=str.length;\r\n                //console.log(\"Added \"+str.length, str.length, using);\r\n                return true;\r\n            } catch(e) {\r\n                delete localStorage[KEY+seq];\r\n                //console.log(\"Add Fail \"+str.length);\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n\r\n    // public methods (with resolve fs)\r\n    FS.delegateMethods(LSFS.prototype, {\r\n        isReadOnly: function () {return this.options.readOnly;},\r\n        getReturnTypes: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            return {\r\n                getContent: String, opendir:[String]\r\n            };\r\n        },\r\n        getContent: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertExist(path); // Do not use this??( because it does not follow symlinks)\r\n            var c;\r\n            var cs=this.getItem(path);\r\n            if (Content.looksLikeDataURL(cs)) {\r\n                c=Content.url(cs);\r\n            } else {\r\n                c=Content.plainText(cs);\r\n            }\r\n            return c;\r\n        },\r\n        setContent: function(path, content, options) {\r\n            assert.is(arguments,[Absolute,Content]);\r\n            this.assertWriteable(path);\r\n            var t=null;\r\n            if (content.hasPlainText()) {\r\n                t=content.toPlainText();\r\n                if (Content.looksLikeDataURL(t)) t=null;\r\n            }\r\n            if (t!=null) {\r\n                this.setItem(path, t);\r\n            } else {\r\n                this.setItem(path, content.toURL());\r\n            }\r\n            this.touch(path);\r\n        },\r\n        getMetaInfo: function(path, options) {\r\n            this.assertExist(path, {includeTrashed:true});\r\n            assert.is(arguments,[Absolute]);\r\n            if (path==P.SEP) {\r\n                return {};\r\n            }\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return {};\r\n            }\r\n            var name=P.name(path);\r\n            assert.is(parent,P.AbsDir);\r\n            var pinfo=this.getDirInfo(parent);\r\n            return assert(pinfo[name]);\r\n        },\r\n        setMetaInfo: function(path, info, options) {\r\n            assert.is(arguments,[String,Object]);\r\n            this.assertWriteable(path);\r\n            var parent=assert(P.up(path));\r\n            if (!this.inMyFS(parent)) {\r\n                return;\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            var name=P.name(path);\r\n            pinfo[name]=info;\r\n            this.putDirInfo(parent, pinfo, pinfo[name].trashed);\r\n        },\r\n        mkdir: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n\t\t\tthis.touch(path);\r\n        },\r\n        opendir: function(path, options) {\r\n            assert.is(arguments,[String]);\r\n            //succ: iterator<string> // next()\r\n            // options: {includeTrashed:Boolean}\r\n            options=options||{};\r\n            var inf=this.getDirInfo(path);\r\n            var res=[]; //this.dirFromFstab(path);\r\n            for (var i in inf) {\r\n                assert(inf[i]);\r\n                if (!inf[i].trashed || options.includeTrashed) res.push(i);\r\n            }\r\n            return assert.is(res,Array);\r\n        },\r\n        rm: function(path, options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            this.assertWriteable(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) {\r\n                throw new Error(path+\": cannot remove. It is root of this FS.\");\r\n            }\r\n            this.assertExist(path,{includeTrashed:options.noTrash });\r\n            if (P.isDir(path)) {\r\n                var lis=this.opendir(path);\r\n                if (lis.length>0) {\r\n                    this.err(path,\"Directory not empty\");\r\n                }\r\n                if (options.noTrash) {\r\n                    this.removeItem(path);\r\n                }\r\n            } else {\r\n                this.removeItem(path);\r\n            }\r\n            var pinfo=this.getDirInfo(parent);\r\n            if (options.noTrash) {\r\n                this.removeEntryWithoutTrash(pinfo, parent, P.name(path) );\r\n            } else {\r\n                this.removeEntry(pinfo, parent, P.name(path) );\r\n            }\r\n        },\r\n        exists: function (path,options) {\r\n            assert.is(arguments,[Absolute]);\r\n            options=options||{};\r\n            var name=P.name(path);\r\n            var parent=P.up(path);\r\n            if (parent==null || !this.inMyFS(parent)) return true;\r\n            var pinfo=this.getDirInfo(parent);\r\n            var res=pinfo[name];\r\n            if (res && res.trashed && this.itemExists(path)) {\r\n                if (this.isDir(path)) {\r\n\r\n                } else {\r\n                    //assert.fail(\"Inconsistent \"+path+\": trashed, but remains in storage\");\r\n                }\r\n            }\r\n            if (!res && this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": not exists in metadata, but remains in storage\");\r\n            }\r\n            if (res && !res.trashed && !res.link && !this.itemExists(path)) {\r\n                //assert.fail(\"Inconsistent \"+path+\": exists in metadata, but not in storage\");\r\n            }\r\n            if (res && !options.includeTrashed) {\r\n                res=!res.trashed;\r\n            }\r\n            return !!res;\r\n        },\r\n        link: function(path, to, options) {\r\n            assert.is(arguments,[P.Absolute,P.Absolute]);\r\n            this.assertWriteable(path);\r\n            if (this.exists(path)) this.err(path,\"file exists\");\r\n            if (P.isDir(path) && !P.isDir(to)) {\r\n                this.err(path,\" can not link to file \"+to);\r\n            }\r\n            if (!P.isDir(path) && P.isDir(to)) {\r\n                this.err(path,\" can not link to directory \"+to);\r\n            }\r\n            var m={};//assert(this.getMetaInfo(path));\r\n            m.link=to;\r\n            m.lastUpdate=now();\r\n            this.setMetaInfo(path, m);\r\n            //console.log(this.getMetaInfo(path));\r\n            //console.log(this.storage);\r\n            //console.log(this.getMetaInfo(P.up(path)));\r\n            assert(this.exists(path));\r\n            assert(this.isLink(path));\r\n        },\r\n        isLink: function (path) {\r\n            assert.is(arguments,[P.Absolute]);\r\n            if (!this.exists(path)) return null;\r\n            var m=assert(this.getMetaInfo(path));\r\n            return m.link;\r\n        },\r\n        touch: function (path) {\r\n            assert.is(arguments,[Absolute]);\r\n            this.assertWriteable(path);\r\n            if (!this.itemExists(path)) {\r\n                if (P.isDir(path)) {\r\n                    if (this.dirCache) this.dirCache[path]={};\r\n                    this.setItem(path,\"{}\");\r\n                } else {\r\n                    this.setItem(path,\"\");\r\n                }\r\n            }\r\n            var parent=up(path);\r\n            if (parent!=null) {\r\n                if (this.inMyFS(parent)) {\r\n                    var pinfo=this.getDirInfo(parent);\r\n                    this._touch(pinfo, parent , P.name(path), false);\r\n                } else {\r\n                    assert(this.getRootFS()!==this);\r\n                    this.getRootFS().resolveFS(parent).touch(parent);\r\n                }\r\n            }\r\n        },\r\n        getURL: function (path) {\r\n            return this.getContent(path).toURL();\r\n        },\r\n        opendirEx: function (path,options) {\r\n            assert.is(path,P.AbsDir);\r\n            options=options||{};\r\n            var res={};\r\n            var d=this.getDirInfo(path);\r\n            if (options.includeTrashed) {\r\n                //console.log(\"INCLTR\",d);\r\n                return d;\r\n            }\r\n            for (var k in d) {\r\n                if (d[k].trashed) continue;\r\n                res[k]=d[k];\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    return LSFS;\r\n\r\n});\r\n\r\n/**\r\n *\r\n * jquery.binarytransport.js\r\n *\r\n * @description. jQuery ajax transport for making binary data type requests.\r\n * @version 1.0\r\n * @author Henry Algus <henryalgus@gmail.com>\r\n *\r\n */\r\n\r\n// use this transport for \"binary\" data type\r\nif (typeof $!==\"undefined\")\r\n$.ajaxTransport(\"+binary\", function(options, originalOptions, jqXHR){\r\n    // check for conditions and support for blob / arraybuffer response type\r\n    if (window.FormData && ((options.dataType && (options.dataType == 'binary')) || (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) || (window.Blob && options.data instanceof Blob)))))\r\n    {\r\n        return {\r\n            // create new XMLHttpRequest\r\n            send: function(headers, callback){\r\n                // setup all variables\r\n                var xhr = new XMLHttpRequest(),\r\n                url = options.url,\r\n                type = options.type,\r\n                async = options.async || true,\r\n                // blob or arraybuffer. Default is blob\r\n                dataType = options.responseType || \"blob\",\r\n                data = options.data || null,\r\n                username = options.username || null,\r\n                password = options.password || null;\r\n\r\n                xhr.addEventListener('load', function(){\r\n                    var data = {};\r\n                    data[options.dataType] = xhr.response;\r\n                    // make callback and send data\r\n                    callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\r\n                });\r\n\r\n                xhr.open(type, url, async, username, password);\r\n\r\n                // setup custom headers\r\n                for (var i in headers ) {\r\n                    xhr.setRequestHeader(i, headers[i] );\r\n                }\r\n\r\n                xhr.responseType = dataType;\r\n                xhr.send(data);\r\n            },\r\n            abort: function(){\r\n                jqXHR.abort();\r\n            }\r\n        };\r\n    }\r\n});\r\n\r\ndefine(\"jquery.binarytransport\", function(){});\r\n\r\ndefine('WebFS',[\"FSClass\",\"jquery.binarytransport\",\"DeferredUtil\",\"Content\",\"PathUtil\"],\r\n        function (FS,j,DU,Content,P) {\r\n    // FS.mount(location.protocol+\"//\"+location.host+\"/\", \"web\");\r\n    var WebFS=function (){};\r\n    var p=WebFS.prototype=new FS;\r\n    FS.addFSType(\"web\", function () {\r\n        return new WebFS;\r\n    });\r\n    p.fstype=function () {return \"Web\";};\r\n    p.supportsSync=function () {return false;};\r\n    p.inMyFS=function (path) {\r\n        return P.isURL(path);\r\n    };\r\n    FS.delegateMethods(p, {\r\n        exists: function () {return true;},\r\n        getContentAsync: function (path){\r\n            var t=this;\r\n            return DU.promise(function (succ,err) {\r\n                $.get(path,function (blob) {\r\n                    var reader = new FileReader();\r\n                    reader.addEventListener(\"loadend\", function() {\r\n                        succ(Content.bin(reader.result, t.getContentType(path)));\r\n                    });\r\n                    reader.readAsArrayBuffer(blob);\r\n                },\"binary\").fail(err);\r\n            });\r\n        },\r\n        /*setContentAsync: function (path){\r\n\r\n        },*/\r\n        getURL: function (path) {\r\n            return path;\r\n        }\r\n    });\r\n\r\n    return WebFS;\r\n\r\n});\r\ndefine('Env',[\"assert\",\"PathUtil\"],function (A,P) {\r\n    var Env=function (value) {\r\n        this.value=value;\r\n    };\r\n    Env.prototype={\r\n            expand:function (str) {\r\n                A.is(str,String);\r\n                var t=this;\r\n                return str.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (a,key) {\r\n                    return t.get(key);\r\n                });\r\n            },\r\n            expandPath:function (path) {\r\n                A.is(path,String);\r\n                path=this.expand(path);\r\n                path=path.replace(/\\/+/g,\"/\");\r\n                path=path.replace(/^[a-z][a-z]+:\\//, function (r) { return r+\"/\"; } );\r\n                return A.is(path,P.Path);\r\n            },\r\n            get: function (key) {\r\n                return this.value[key];\r\n            },\r\n            set: function (key, value) {\r\n                this.value[key]=value;\r\n            }\r\n    };\r\n    return Env;\r\n});\r\ndefine('SFile',[\"extend\",\"assert\",\"PathUtil\",\"Util\",\"Content\",\"FSClass\",\"FileSaver\",\"DeferredUtil\"],\r\nfunction (extend,A,P,Util,Content,FSClass,saveAs,DU) {\r\n\r\nvar SFile=function (rootFS, path) {\r\n    A.is(path, P.Absolute);\r\n    //A(fs && fs.getReturnTypes, fs);\r\n    this._path=path;\r\n    this.rootFS=rootFS;\r\n    this.fs=rootFS.resolveFS(path);\r\n    /*this.act={};// path/fs after follwed symlink\r\n    this.act.path=this.fs.resolveLink(path);\r\n    this.act.fs=rootFS.resolveFS(this.act.path);\r\n    A.is(this.act, {fs:FSClass, path:P.Absolute});*/\r\n    if (this.isDir() && !P.isDir(path)) {\r\n        this._path+=P.SEP;\r\n    }\r\n};\r\nSFile.is=function (path) {\r\n    return path && typeof (path.isSFile)==\"function\" && path.isSFile();\r\n};\r\nfunction getPath(f) {\r\n    if (SFile.is(f)) {\r\n        return f.path();\r\n    } else {\r\n        A.is(f,P.Absolute);\r\n        return f;\r\n    }\r\n}\r\nSFile.prototype={\r\n    isSFile: function (){return true;},\r\n    setPolicy: function (p) {\r\n        if (this.policy) throw new Error(\"policy already set\");\r\n        this.policy=p;\r\n        return this._clone();\r\n    },\r\n    getPolicy: function (p) {\r\n        return this.policy;\r\n    },\r\n    _clone: function (){\r\n        return this._resolve(this.path());\r\n    },\r\n    _resolve: function (path, options) {\r\n        var res;\r\n        options=options||{};\r\n        if (SFile.is(path)) {\r\n            res=path;\r\n        } else {\r\n            A.is(path,P.Absolute);\r\n            var topdir;\r\n            var policy=options.policy || this.policy;\r\n            if (policy && (topdir=policy.topDir)) {\r\n                if (topdir.path) topdir=topdir.path();\r\n                if (!P.startsWith(path, topdir)) {\r\n                    throw new Error(path+\": cannot access. Restricted to \"+topdir);\r\n                }\r\n            }\r\n            res=new SFile(this.rootFS, path);\r\n            res.policy=policy;\r\n        }\r\n        if (res.policy) {\r\n            return Util.privatize(res);\r\n        } else {\r\n            return res;\r\n        }\r\n    },\r\n    contains: function (file) {\r\n        A(SFile.is(file),file+\" shoud be a SFile object.\");\r\n        if (!this.isDir()) return false;\r\n        return P.startsWith( file.path(), this.path());\r\n    },\r\n    path: function () {\r\n        return this._path;\r\n    },\r\n    name: function () {\r\n        return P.name(this.path());\r\n    },\r\n    truncExt: function (ext) {\r\n        return P.truncExt(this.path(),ext);\r\n    },\r\n    ext: function () {\r\n        return P.ext(this.path());\r\n    },\r\n    relPath: function (base) {\r\n        // base should be SFile or Path from rootFS\r\n        var bp=(base.path ?\r\n                base.path() :\r\n                base );\r\n        return P.relPath(this.path(), A.is(bp,P.Absolute) );\r\n    },\r\n    up: function () {\r\n        var pathR=this.path();\r\n        var pa=P.up(pathR);\r\n        if (pa==null) return null;\r\n        return this._resolve(pa);\r\n    },\r\n    rel: function (relPath) {\r\n        A.is(relPath, P.Relative);\r\n        this.assertDir();\r\n        var pathR=this.path();\r\n        return this._resolve(P.rel(pathR, relPath));\r\n    },\r\n    sibling: function (n) {\r\n        return this.up().rel(n);\r\n    },\r\n    startsWith: function (pre) {\r\n        return P.startsWith(this.name(),pre);\r\n    },\r\n    endsWith: function (post) {\r\n        return P.endsWith(this.name(),post);\r\n    },\r\n    equals:function (o) {\r\n        return (o && typeof o.path==\"function\" && o.path()==this.path());\r\n    },\r\n    toString:function (){\r\n        return this.path();\r\n    },\r\n    //Common\r\n    touch: function () {\r\n        return this.act.fs.touch(this.act.path);\r\n    },\r\n    isReadOnly: function () {\r\n        return this.act.fs.isReadOnly(this.act.path);\r\n    },\r\n    isTrashed:function () {\r\n        var m=this.metaInfo();\r\n        if (!m) return false;\r\n        return m.trashed;\r\n    },\r\n    metaInfo: function () {\r\n        if (arguments.length==0) {\r\n            return this.getMetaInfo.apply(this,arguments);\r\n        } else {\r\n            return this.setMetaInfo.apply(this,arguments);\r\n        }\r\n    },\r\n    getMetaInfo: function (options) {\r\n        return this.act.fs.getMetaInfo(this.act.path,options);\r\n    },\r\n    setMetaInfo: function (info, options) {\r\n        return this.act.fs.setMetaInfo(this.act.path,info, options);\r\n    },\r\n    getDirTree: function (options) {\r\n        return this.act.fs.getDirTree(this.act.path, options);\r\n    },\r\n    assertExists: function () {\r\n        A(this.exists(),this.path()+\" does not exist.\");\r\n    },\r\n    lastUpdate:function () {\r\n        this.assertExists();\r\n        return this.metaInfo().lastUpdate;\r\n    },\r\n    exists: function (options) {\r\n        var args=Array.prototype.slice.call(arguments);\r\n        if (typeof args[0]===\"function\") {\r\n            var f=args.shift();\r\n            return DU.resolve(this.exists.apply(this,args)).then(f);\r\n        }\r\n        options=options||{};\r\n        var p=this.fs.exists(this.path(),options);\r\n        if (p || options.noFollowLink) {\r\n            return p;\r\n        } else {\r\n            return this.act.fs.exists(this.act.path,{noFollowLink:true});\r\n        }\r\n    },\r\n    rm: function (options) {\r\n        //   ln /test/c /a/b/\r\n        //   rm a/b/c/\r\n        //   rm a/b/c/d\r\n        var t=this;\r\n        options=options||{};\r\n        if (this.isLink()) {\r\n            return DU.resolve(this.fs.rm(this.path(),options));\r\n        }\r\n        /*if (!this.exists({noFollowLink:true})) {\r\n            return this.act.fs.rm(this.act.path, options);\r\n        }*/\r\n        var a;\r\n        if (this.isDir() && (options.recursive||options.r)) {\r\n            a=this.each(function (f) {\r\n                return f.rm(options);\r\n            });\r\n        } else {\r\n            a=DU.resolve();\r\n        }\r\n        return a.then(function () {\r\n            return t.act.fs.rm(t.act.path, options);\r\n        });\r\n        //var pathT=this.path();\r\n        //this.fs.rm(pathT, options);\r\n    },\r\n    removeWithoutTrash: function (options) {\r\n        options=options||{};\r\n        options.noTrash=true;\r\n        this.rm(options);\r\n    },\r\n    isDir: function () {\r\n        return this.act.fs.isDir(this.act.path);\r\n    },\r\n    // File\r\n    text:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n\t\t\treturn this.getText(f);\r\n\t\t}\r\n        if (arguments.length>0) {\r\n            return this.setText(arguments[0]);\r\n        } else {\r\n            return this.getText();\r\n        }\r\n    },\r\n    setText:function (t) {\r\n        A.is(t,String);\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        var ct=this.contentType({def:null});\r\n        //if (this.isText()) {\r\n        if (ct!==null && !ct.match(/^text/) && Content.looksLikeDataURL(t)) {\r\n            // bad knowhow: if this is a binary file apparently, convert to URL\r\n            return DU.throwNowIfRejected(this.setContent(Content.url(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.url(t)));\r\n        } else {\r\n            // if use fs.setContentAsync, the error should be handled by .fail\r\n            // setText should throw error immediately (Why? maybe old style of text(\"foo\") did it so...)\r\n            return DU.throwNowIfRejected(this.setContent(Content.plainText(t)));\r\n            return DU.resolve(this.act.fs.setContent(this.act.path, Content.plainText(t)));\r\n        }\r\n    },\r\n    appendText:function (t) {\r\n        A.is(t,String);\r\n        //if (this.isText()) {\r\n        return this.act.fs.appendContent(this.act.path, Content.plainText(t));\r\n        /*} else {\r\n            throw new Error(\"append only for text file\");\r\n        }*/\r\n    },\r\n    getContent: function (f) {\r\n        if (typeof f==\"function\") {\r\n            return this.act.fs.getContentAsync(this.act.path).then(f);\r\n        }\r\n        return this.act.fs.getContent(this.act.path);\r\n    },\r\n    setContent: function (c) {\r\n        if (this.isDir()) {\r\n            throw new Error(\"Cannot write to directory: \"+this.path());\r\n        }\r\n        // why setContentAsync? AsyncDU.resolvesyncsync...PromiseJQ\r\n        // fs2/promise.js\r\n        return this.act.fs.setContentAsync(this.act.path,c);\r\n    },\r\n\r\n    getText:function (f) {\r\n    \tif (typeof f===\"function\") {\r\n    \t\tvar t=this;\r\n    \t    return this.getContent(forceText).then(f);\r\n    \t}\r\n        return forceText(this.act.fs.getContent(this.act.path));\r\n        /*if (this.isText()) {\r\n            return this.act.fs.getContent(this.act.path).toPlainText();\r\n        } else {\r\n            return this.act.fs.getContent(this.act.path).toURL();\r\n        }*/\r\n        function forceText(c) {\r\n\t    \t//if (t.isText()) {\r\n            try {\r\n                return c.toPlainText();\r\n            } catch(e) {\r\n    \t    \treturn c.toURL();\r\n    \t    }\r\n        }\r\n    },\r\n    getDataURL: function (f) {\r\n        if (typeof f===\"function\") {\r\n            return this.getContent(function (c) {\r\n                return c.toURL();\r\n            });\r\n        }\r\n        return this.getContent().toURL();\r\n    },\r\n    setDataURL: function (u) {\r\n        return this.setContent(Content.url(u));\r\n    },\r\n    dataURL:function (d) {\r\n        if (typeof d===\"string\") return this.setDataURL(d);\r\n        if (typeof d===\"function\") return this.getDataURL(d);\r\n        return this.getDataURL();\r\n    },\r\n    isText: function () {\r\n        return this.act.fs.isText(this.act.path);\r\n    },\r\n    contentType: function (options) {\r\n        return this.act.fs.getContentType(this.act.path,options);\r\n    },\r\n    bytes: function (b) {\r\n        if (Content.isBuffer(b)) return this.setBytes(b);\r\n        return this.getBytes();\r\n    },\r\n    setBytes:function (b) {\r\n        return this.act.fs.setContent(this.act.path, Content.bin(b,this.contentType()));\r\n    },\r\n    getBytes:function (options) {\r\n        options=options||{};\r\n        return this.act.fs.getContent(this.act.path).toBin(options.binType);\r\n    },\r\n    getURL: function () {\r\n        return this.act.fs.getURL(this.act.path);\r\n    },\r\n    lines:function (lines) {\r\n        if (lines instanceof Array) {//WRITE\r\n            return this.text(lines.join(\"\\n\"));\r\n        } else if (typeof lines===\"function\") {//READ async\r\n            return this.text(function (r) {\r\n                return lines(r.replace(/\\r/g,\"\").split(\"\\n\"));\r\n            });\r\n        }\r\n        return this.text().replace(/\\r/g,\"\").split(\"\\n\");\r\n    },\r\n    obj: function () {\r\n        var file=this;\r\n        if (arguments.length==0) {\r\n            var t=file.text();\r\n            if (!t) return null;\r\n            return JSON.parse(t);\r\n        } else {\r\n            file.text(JSON.stringify(A.is(arguments[0],Object) ));\r\n        }\r\n    },\r\n    copyFrom: function (src, options) {\r\n        return src.copyTo(this,options);\r\n    },\r\n    copyTo: function (dst, options) {\r\n        A(dst && dst.isSFile(),dst+\" is not a file\");\r\n        var src=this;\r\n        var options=options||{};\r\n        var srcIsDir=src.isDir();\r\n        var dstIsDir=dst.isDir();\r\n        if (!srcIsDir && dstIsDir) {\r\n            dst=dst.rel(src.name());\r\n            A(!dst.isDir(), dst+\" is a directory.\");\r\n            dstIsDir=false;\r\n        }\r\n        if (srcIsDir && !dstIsDir) {\r\n           this.err(\"Cannot move dir \"+src.path()+\" to file \"+dst.path());\r\n        } else if (!srcIsDir && !dstIsDir) {\r\n            if (options.echo) options.echo(src+\" -> \"+dst);\r\n            var res=this.act.fs.cp(this.act.path, dst.getResolvedLinkPath(),options);\r\n            res=DU.resolve(res);\r\n            if (options.a) {\r\n                return res.then(function () {\r\n                    return dst.setMetaInfo(src.getMetaInfo());\r\n                });\r\n            }\r\n            return res;\r\n        } else {\r\n            A(srcIsDir && dstIsDir,\"Both src and dst should be dir\");\r\n            return src.each(function (s) {\r\n                var r;\r\n                var dstf=dst.rel(s.name());\r\n                if (options.progress) {\r\n                    r=options.progress(dstf,{src:s,dst:dstf});\r\n                }\r\n                return DU.resolve(r).then(function () {\r\n                    return dstf.copyFrom(s, options);\r\n                });\r\n            });\r\n        }\r\n        //file.text(src.text());\r\n        //if (options.a) file.metaInfo(src.metaInfo());\r\n    },\r\n    moveFrom: function (src, options) {\r\n        var t=this;\r\n        return t.exists(function (ex) {\r\n            return t.copyFrom(src,options).then(function () {\r\n                return src.rm({recursive:true});\r\n            },function (e) {\r\n                // rollback\r\n                if (!ex) return t.exists(function (ex) {\r\n                    if (ex) return t.rm({recursive:true});\r\n                }).then(function () {throw e;});\r\n                throw e;\r\n            });\r\n        });\r\n    },\r\n    moveTo: function (dst, options) {\r\n        return dst.moveFrom(this,options);\r\n    },\r\n    // Dir\r\n    assertDir:function () {\r\n        A.is(this.path(),P.Dir);\r\n        return this;\r\n    },\r\n    /*files:function (f,options) {\r\n        var dir=this.assertDir();\r\n        var res=[];\r\n        this.each(function (f) {\r\n            res.add(f);\r\n        },options);\r\n        return res;\r\n    },*/\r\n    each:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls,f);// ls.forEach(f)\r\n        });\r\n    },\r\n    eachrev:function (f,options) {\r\n        var dir=this.assertDir();\r\n        return dir.listFilesAsync(options).then(function (ls) {\r\n            return DU.each(ls.reverse(),f);// ls.forEach(f)\r\n        });\r\n    },\r\n    recursive:function (fun,options) {\r\n        var dir=this.assertDir();\r\n        options=dir.convertOptions(options);\r\n        return dir.each(function (f) {\r\n            if (f.isDir()) return f.recursive(fun,options);\r\n            else return fun(f);\r\n        },options);\r\n    },\r\n    _listFiles:function (options,async) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        if (async) {\r\n            return this.act.fs.opendirAsync(this.act.path, options).\r\n            then(cvt);\r\n        } else {\r\n            return cvt( this.act.fs.opendir(this.act.path, options));\r\n        }\r\n        function cvt(di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        }\r\n    },\r\n    listFilesAsync:function (options) {\r\n        return this._listFiles(options,true);\r\n        /*\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        var path=this.path();\r\n        var ord;\r\n        options=dir.convertOptions(options);\r\n        if (!ord) ord=options.order;\r\n        return this.act.fs.opendirAsync(this.act.path, options).\r\n        then(function (di) {\r\n            var res=[];\r\n            for (var i=0;i<di.length; i++) {\r\n                var name=di[i];\r\n                //if (!options.includeTrashed && dinfo[i].trashed) continue;\r\n                var f=dir.rel(name);\r\n                if (options.excludesF(f) ) continue;\r\n                res.push(f);\r\n            }\r\n            if (typeof ord==\"function\" && res.sort) res.sort(ord);\r\n            return res;\r\n        });*/\r\n    },\r\n    listFiles:function (options) {\r\n        return this._listFiles(options,false);\r\n        /*var args=Array.prototype.slice.call(arguments);\r\n        return DU.assertResolved(this.listFilesAsync.apply(this,args));*/\r\n    },\r\n    ls:function (options) {\r\n        A(options==null || typeof options==\"object\");\r\n        var dir=this.assertDir();\r\n        if (!options) {\r\n            return this.act.fs.opendir(this.act.path, options);\r\n        }\r\n        var res=dir.listFiles(options);\r\n        return res.map(function (f) {\r\n            return f.name();\r\n        });\r\n    },\r\n    convertOptions:function(o) {\r\n        var options=Util.extend({},o);\r\n        var dir=this.assertDir();\r\n        var pathR=this.path();\r\n        var excludes=options.excludes || {};\r\n        if (typeof excludes===\"function\") {\r\n            options.excludesF=excludes;\r\n        } else if (typeof excludes===\"object\") {\r\n            if (excludes instanceof Array) {\r\n                var nex={};\r\n                excludes.forEach(function (e) {\r\n                    if (P.startsWith(e,\"/\")) {\r\n                        nex[e]=1;\r\n                    } else {\r\n                        nex[pathR+e]=1;\r\n                    }\r\n                });\r\n                excludes=nex;\r\n            }\r\n            options.excludesF=function (f) {\r\n                return excludes[f.path()];\r\n            };\r\n        }\r\n        return A.is(options,{excludesF:Function});\r\n    },\r\n    mkdir: function () {\r\n        return this.touch();\r\n    },\r\n    link: function (to,options) {// % ln to path\r\n        if (this.exists()) throw new Error(this.path()+\": exists.\");\r\n        return this.act.fs.link(this.act.path,to.path(),options);\r\n    },\r\n    resolveLink:function () {\r\n        return this._resolve(this.act.path);\r\n    },\r\n    isLink: function () {\r\n        return this.fs.isLink(this.path());\r\n    },\r\n    getResolvedLinkPath: function () {\r\n        return this.act.path;\r\n    },\r\n    getFS:function () {\r\n        return this.act.fs;\r\n    },\r\n    observe: function (h) {\r\n        return this.getFS().getRootFS().addObserver(this.path(),h);\r\n    },\r\n    getBlob: function () {\r\n        return new Blob([this.bytes()],{type:this.contentType()});\r\n    },\r\n    setBlob: function (blob) {\r\n        var t=this;\r\n        return DU.promise(function (succ,err) {\r\n            var reader = new FileReader();\r\n            reader.addEventListener(\"loadend\", function() {\r\n                // reader.result contains the contents of blob as a typed array\r\n                DU.resolve(t.setBytes(reader.result)).then(succ);\r\n            });\r\n            reader.readAsArrayBuffer(blob);\r\n        });\r\n    },\r\n    size: function (f) {\r\n        if (!f) {\r\n            if (!this.isDir()) {\r\n                return this.act.fs.size(this.act.path);\r\n                //return this.getBytes().byteLength;\r\n            } else {\r\n                var sum=0;\r\n                this.each(function (f) {\r\n                    sum+=f.size();\r\n                });\r\n                return sum;\r\n            }\r\n        } else {\r\n            //TODO: async\r\n        }\r\n    },\r\n    download: function () {\r\n        if (this.isDir()) throw new Error(this+\": Download dir is not support yet. Use 'zip' instead.\");\r\n        saveAs(this.getBlob(),this.name());;\r\n    },\r\n    err: function () {\r\n        var a=Array.prototype.slice.call(arguments);\r\n        console.log.apply(console,a);\r\n        throw new Error(a.join(\"\"));\r\n    },\r\n    exportAsObject: function (options) {\r\n        var base=this;\r\n        var data={};\r\n        this.recursive(function (f) {\r\n            data[f.relPath(base)]=f.text();\r\n        },options);\r\n        var req={base:base.path(),data:data};\r\n        return req;\r\n    },\r\n    importFromObject: function (data, options) {\r\n        if (typeof data===\"string\") data=JSON.parse(data);\r\n        var data=data.data;\r\n        for (var k in data) {\r\n            this.rel(k).text(data[k]);\r\n        }\r\n    },\r\n    watch: function (_1,_2) {\r\n        var options={},handler=function(){};\r\n        if (typeof _1===\"object\") options=_1;\r\n        if (typeof _2===\"object\") options=_2;\r\n        if (typeof _1===\"function\") handler=_1;\r\n        if (typeof _2===\"function\") handler=_2;\r\n        var rfs=this.getFS().getRootFS();\r\n        //var t=this;\r\n        rfs.addObserver(this.path(),function (path, meta) {\r\n            handler(meta.eventType, rfs.get(path),meta );\r\n        });\r\n    }\r\n};\r\nObject.defineProperty(SFile.prototype,\"act\",{\r\n    get: function () {\r\n        if (this._act) return this._act;\r\n        this._act={};// path/fs after follwed symlink\r\n        this._act.path=this.fs.resolveLink(this._path);\r\n        this._act.fs=this.rootFS.resolveFS(this._act.path);\r\n        A.is(this._act, {fs:FSClass, path:P.Absolute});\r\n        return this._act;\r\n    }\r\n});\r\n\r\nreturn SFile;\r\n});\r\n\r\ndefine('RootFS',[\"assert\",\"FSClass\",\"PathUtil\",\"SFile\"], function (assert,FS,P,SFile) {\r\n    var RootFS=function (defaultFS){\r\n        assert.is(defaultFS,FS);\r\n        this.mount(null, defaultFS);\r\n    };\r\n    var dst=RootFS.prototype;\r\n    var p={\r\n            err: function (path, mesg) {\r\n                throw new Error(path+\": \"+mesg);\r\n            },\r\n            // mounting\r\n            fstab: function () {\r\n                return this._fstab=this._fstab||[];//[{fs:this, path:P.SEP}];\r\n            },\r\n            unmount: function (path, options) {\r\n                assert.is(arguments,[P.AbsDir] );\r\n                var t=this.fstab();\r\n                console.log(t);\r\n                for (var i=0; i<t.length; i++) {\r\n                    if (t[i].mountPoint==path) {\r\n                        t.splice(i,1);\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            availFSTypes:function (){\r\n                return FS.availFSTypes();\r\n            },\r\n            mount: function (path, fs, options) {\r\n                if (typeof fs==\"string\") {\r\n                    var fact=assert( FS.availFSTypes()[fs] ,\"fstype \"+fs+\" is undefined.\");\r\n                    fs=fact(path, options||{});\r\n                }\r\n                assert.is(fs,FS);\r\n                fs.mounted(this, path);\r\n                this.fstab().unshift(fs);\r\n            },\r\n            resolveFS:function (path, options) {\r\n                assert.is(path,P.Absolute);\r\n                var res;\r\n                this.fstab().forEach(function (fs) {\r\n                    if (res) return;\r\n                    if (fs.inMyFS(path)) {\r\n                        res=fs;\r\n                    }\r\n                });\r\n                if (!res) this.err(path,\"Cannot resolve\");\r\n                return assert.is(res,FS);\r\n            },\r\n            get: function (path) {\r\n                assert.is(path,P.Absolute);\r\n                return new SFile(this.resolveFS(path), path);\r\n            },\r\n            addObserver: function (_1,_2,_3) {\r\n                this.observers=this.observers||[];\r\n                var options={},path,f;\r\n                if (typeof _1===\"string\") path=_1;\r\n                if (typeof _2===\"string\") path=_2;\r\n                if (typeof _3===\"string\") path=_3;\r\n                if (typeof _1===\"object\") options=_1;\r\n                if (typeof _2===\"object\") options=_2;\r\n                if (typeof _3===\"object\") options=_3;\r\n                if (typeof _1===\"function\") f=_1;\r\n                if (typeof _2===\"function\") f=_2;\r\n                if (typeof _3===\"function\") f=_3;\r\n                assert.is(path,String);\r\n                assert.is(f,Function);\r\n                var fs=this.resolveFS(path);\r\n                var remover=fs.onAddObserver(path,options);\r\n                var observers=this.observers;\r\n                var observer={\r\n                    path:path,\r\n                    handler:f,\r\n                    remove: function () {\r\n                        var i=observers.indexOf(this);\r\n                        observers.splice(i,1);\r\n                        if (remover) remover.remove();\r\n                    }\r\n                };\r\n                this.observers.push(observer);\r\n                return observer;\r\n            },\r\n            notifyChanged: function (path,metaInfo) {\r\n                if (!this.observers) return;\r\n                this.observers.forEach(function (ob) {\r\n                    if (P.isChildOf(path,ob.path)) {\r\n                        ob.handler(path,metaInfo);\r\n                    }\r\n                });\r\n            },\r\n            getRootFS:function () {\r\n                return this;\r\n            }\r\n    };\r\n    for (var i in p) {\r\n        dst[i]=p[i];\r\n    }\r\n    return RootFS;\r\n});\r\n\r\ndefine('zip',[\"SFile\",/*\"jszip\",*/\"FileSaver\",\"Util\",\"DeferredUtil\"],\r\nfunction (SFile,/*JSZip,*/fsv,Util,DU) {\r\n    var zip={};\r\n    zip.setJSZip=function (JSZip) {\r\n        zip.JSZip=JSZip;\r\n        if (!DU.external.Promise) {\r\n            DU.external.Promise=JSZip.external.Promise;\r\n        }\r\n    };\r\n    if (typeof JSZip!==\"undefined\") zip.setJSZip(JSZip);\r\n    zip.zip=function (dir,dstZip,options) {\r\n        if (!SFile.is(dstZip)) options=dstZip;\r\n        options=options||{};\r\n        var jszip = new zip.JSZip();\r\n        function loop(dst, dir) {\r\n            return dir.each(function (f) {\r\n                var r=DU.resolve();\r\n                if (options.progress) {\r\n                    r=options.progress(f);\r\n                }\r\n                return r.then(function () {\r\n                    if (f.isDir()) {\r\n                        var sf=dst.folder(f.name().replace(/[\\/\\\\]$/,\"\"));\r\n                        return loop(sf, f);\r\n                    } else {\r\n                        return f.getContent(function (c) {\r\n                            dst.file(f.name(),c.toArrayBuffer());\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return loop(jszip, dir).then(function () {\r\n            return DU.resolve(jszip.generateAsync({\r\n                type:\"arraybuffer\",\r\n                compression:\"DEFLATE\"\r\n            }));\r\n        }).then(function (content) {\r\n            //console.log(\"zip.con\",content);\r\n            if (SFile.is(dstZip)) {\r\n                return dstZip.setBytes(content);\r\n            } else {\r\n                saveAs(\r\n                    new Blob([content],{type:\"application/zip\"}),\r\n                    dir.name().replace(/[\\/\\\\]$/,\"\")+\".zip\"\r\n                );\r\n            }\r\n        });\r\n    };\r\n    zip.unzip=function (arrayBuf,destDir,options) {\r\n        var c;\r\n        var status={};\r\n        options=options||{};\r\n        if (SFile.is(arrayBuf)) {\r\n        \tc=arrayBuf.getContent();\r\n        \tarrayBuf=c.toArrayBuffer();\r\n        }\r\n        if (!options.onCheckFile) {\r\n            options.onCheckFile=function (f) {\r\n                if (options.overwrite) {\r\n                    return f;\r\n                } else {\r\n                    if (f.exists()) {\r\n                        return false;\r\n                    }\r\n                    return f;\r\n                }\r\n            };\r\n        }\r\n        var jszip=new zip.JSZip();\r\n        return DU.resolve(jszip.loadAsync(arrayBuf)).then(function () {\r\n            return DU.each(jszip.files,function (key,zipEntry) {\r\n                //var zipEntry=jszip.files[i];\r\n                var buf,dest;\r\n                return DU.resolve(zipEntry.async(\"arraybuffer\")).then(function (_buf) {\r\n                    buf=_buf;\r\n                    dest=destDir.rel(zipEntry.name);\r\n                    if (options.progress) {\r\n                        return DU.resolve(options.progress(dest));\r\n                    }\r\n                }).then(function () {\r\n                    console.log(\"Inflating\",zipEntry.name);\r\n                    if (dest.isDir()) return;\r\n                    var s={\r\n                        file:dest,\r\n                        status:\"uploaded\"\r\n                    };\r\n                    status[dest.path()]=s;\r\n                    var c=FS.Content.bin( buf, dest.contentType() );\r\n                    var res=options.onCheckFile(dest,c);\r\n                    if (res===false) {\r\n                        s.status=\"cancelled\";\r\n                        dest=null;\r\n                    }\r\n                    if (SFile.is(res)) {\r\n                        if (dest.path()!==res.path()) s.redirectedTo=res;\r\n                        dest=res;\r\n                    }\r\n                    if (dest) return dest.setContent(c);\r\n                });\r\n            });\r\n        }).then(function () {\r\n            console.log(\"unzip done\",status);\r\n            return status;\r\n        });\r\n    };\r\n    return zip;\r\n});\r\n\r\n/*(function (global, factory) {\r\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\r\n\ttypeof define === 'function' && define.amd ? define(factory) :\r\n\t(factory());\r\n}(this, (function () { 'use strict';*/\r\n// modified from https://github.com/taylorhakes/promise-polyfill/blob/master/dist/polyfill.js\r\n// if promise resolved immediately, it will run f of then(f)\r\n// P.resolve(5).then(e=>console.log(e)); console.log(3)  ->  show 5 3, while original is 3 5\r\ndefine('promise',[], function() {\r\n\r\n/**\r\n * @this {Promise}\r\n */\r\nfunction finallyConstructor(callback) {\r\n  var constructor = this.constructor;\r\n  return this.then(\r\n    function(value) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        return value;\r\n      });\r\n    },\r\n    function(reason) {\r\n      // @ts-ignore\r\n      return constructor.resolve(callback()).then(function() {\r\n        // @ts-ignore\r\n        return constructor.reject(reason);\r\n      });\r\n    }\r\n  );\r\n}\r\n\r\n// Store setTimeout reference so promise-polyfill will be unaffected by\r\n// other code modifying setTimeout (like sinon.useFakeTimers())\r\nvar setTimeoutFunc = setTimeout;\r\n\r\nfunction isArray(x) {\r\n  return Boolean(x && typeof x.length !== 'undefined');\r\n}\r\n\r\nfunction noop() {}\r\n\r\n// Polyfill for Function.prototype.bind\r\nfunction bind(fn, thisArg) {\r\n  return function() {\r\n    fn.apply(thisArg, arguments);\r\n  };\r\n}\r\n\r\n/**\r\n * @constructor\r\n * @param {Function} fn\r\n */\r\nfunction Promise(fn) {\r\n  if (!(this instanceof Promise))\r\n    throw new TypeError('Promises must be constructed via new');\r\n  if (typeof fn !== 'function') throw new TypeError('not a function');\r\n  /** @type {!number} */\r\n  this._state = 0;\r\n  /** @type {!boolean} */\r\n  this._handled = false;\r\n  /** @type {Promise|undefined} */\r\n  this._value = undefined;\r\n  /** @type {!Array<!Function>} */\r\n  this._deferreds = [];\r\n\r\n  doResolve(fn, this);\r\n}\r\n\r\nfunction handle(self, deferred) {\r\n  while (self._state === 3) {\r\n    self = self._value;\r\n  }\r\n  if (self._state === 0) {\r\n    self._deferreds.push(deferred);\r\n    return;\r\n  }\r\n  self._handled = true;\r\n  Promise._immediateFn(function() {\r\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n    if (cb === null) {\r\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n      return;\r\n    }\r\n    var ret;\r\n    try {\r\n      ret = cb(self._value);\r\n    } catch (e) {\r\n      reject(deferred.promise, e);\r\n      return;\r\n    }\r\n    resolve(deferred.promise, ret);\r\n  });\r\n}\r\n\r\nfunction resolve(self, newValue) {\r\n  try {\r\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n    if (newValue === self)\r\n      throw new TypeError('A promise cannot be resolved with itself.');\r\n    if (\r\n      newValue &&\r\n      (typeof newValue === 'object' || typeof newValue === 'function')\r\n    ) {\r\n      var then = newValue.then;\r\n      if (newValue instanceof Promise) {\r\n        self._state = 3;\r\n        self._value = newValue;\r\n        finale(self);\r\n        return;\r\n      } else if (typeof then === 'function') {\r\n        doResolve(bind(then, newValue), self);\r\n        return;\r\n      }\r\n    }\r\n    self._state = 1;\r\n    self._value = newValue;\r\n    finale(self);\r\n  } catch (e) {\r\n    reject(self, e);\r\n  }\r\n}\r\n\r\nfunction reject(self, newValue) {\r\n  self._state = 2;\r\n  self._value = newValue;\r\n  finale(self);\r\n}\r\n\r\nfunction finale(self) {\r\n  if (self._state === 2 && self._deferreds.length === 0) {\r\n    Promise._immediateFn(function() {\r\n      if (!self._handled) {\r\n        Promise._unhandledRejectionFn(self._value);\r\n      }\r\n    });\r\n  }\r\n\r\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n    handle(self, self._deferreds[i]);\r\n  }\r\n  self._deferreds = null;\r\n}\r\n\r\n/**\r\n * @constructor\r\n */\r\nfunction Handler(onFulfilled, onRejected, promise) {\r\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n  this.promise = promise;\r\n}\r\n\r\n/**\r\n * Take a potentially misbehaving resolver function and make sure\r\n * onFulfilled and onRejected are only called once.\r\n *\r\n * Makes no guarantees about asynchrony.\r\n */\r\nfunction doResolve(fn, self) {\r\n  var done = false;\r\n  try {\r\n    fn(\r\n      function(value) {\r\n        if (done) return;\r\n        done = true;\r\n        resolve(self, value);\r\n      },\r\n      function(reason) {\r\n        if (done) return;\r\n        done = true;\r\n        reject(self, reason);\r\n      }\r\n    );\r\n  } catch (ex) {\r\n    if (done) return;\r\n    done = true;\r\n    reject(self, ex);\r\n  }\r\n}\r\n\r\nPromise.prototype['catch'] = function(onRejected) {\r\n  return this.then(null, onRejected);\r\n};\r\n\r\nPromise.prototype.then = function(onFulfilled, onRejected) {\r\n  // @ts-ignore\r\n  var prom = new this.constructor(noop);\r\n\r\n  handle(this, new Handler(onFulfilled, onRejected, prom));\r\n  return prom;\r\n};\r\n\r\nPromise.prototype['finally'] = finallyConstructor;\r\n\r\nPromise.all = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.all accepts an array'));\r\n    }\r\n\r\n    var args = Array.prototype.slice.call(arr);\r\n    if (args.length === 0) return resolve([]);\r\n    var remaining = args.length;\r\n\r\n    function res(i, val) {\r\n      try {\r\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n          var then = val.then;\r\n          if (typeof then === 'function') {\r\n            then.call(\r\n              val,\r\n              function(val) {\r\n                res(i, val);\r\n              },\r\n              reject\r\n            );\r\n            return;\r\n          }\r\n        }\r\n        args[i] = val;\r\n        if (--remaining === 0) {\r\n          resolve(args);\r\n        }\r\n      } catch (ex) {\r\n        reject(ex);\r\n      }\r\n    }\r\n\r\n    for (var i = 0; i < args.length; i++) {\r\n      res(i, args[i]);\r\n    }\r\n  });\r\n};\r\n\r\nPromise.resolve = function(value) {\r\n  if (value && typeof value === 'object' && value.constructor === Promise) {\r\n    return value;\r\n  }\r\n\r\n  return new Promise(function(resolve) {\r\n    resolve(value);\r\n  });\r\n};\r\n\r\nPromise.reject = function(value) {\r\n  return new Promise(function(resolve, reject) {\r\n    reject(value);\r\n  });\r\n};\r\n\r\nPromise.race = function(arr) {\r\n  return new Promise(function(resolve, reject) {\r\n    if (!isArray(arr)) {\r\n      return reject(new TypeError('Promise.race accepts an array'));\r\n    }\r\n\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n      Promise.resolve(arr[i]).then(resolve, reject);\r\n    }\r\n  });\r\n};\r\n\r\n// Use polyfill for setImmediate for performance gains\r\nPromise._immediateFn = function (fn) {fn();};/*\r\n  // @ts-ignore\r\n  (typeof setImmediate === 'function' &&\r\n    function(fn) {\r\n      // @ts-ignore\r\n      setImmediate(fn);\r\n    }) ||\r\n  function(fn) {\r\n    setTimeoutFunc(fn, 0);\r\n  };\r\n*/\r\n\r\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(/*err*/) {\r\n  if (typeof console !== 'undefined' && console) {\r\n    //console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\r\n  }\r\n};\r\n/** @suppress {undefinedVars} */\r\n/*\r\nvar globalNS = (function() {\r\n  // the only reliable means to get the global object is\r\n  // `Function('return this')()`\r\n  // However, this causes CSP violations in Chrome apps.\r\n  if (typeof self !== 'undefined') {\r\n    return self;\r\n  }\r\n  if (typeof window !== 'undefined') {\r\n    return window;\r\n  }\r\n  if (typeof global !== 'undefined') {\r\n    return global;\r\n  }\r\n  throw new Error('unable to locate global object');\r\n})();\r\n\r\nif (!('Promise' in globalNS)) {\r\n  globalNS['Promise'] = Promise;\r\n} else if (!globalNS.Promise.prototype['finally']) {\r\n  globalNS.Promise.prototype['finally'] = finallyConstructor;\r\n}*/\r\nreturn Promise;\r\n});\r\n\r\ndefine('FS',[\"FSClass\",\"NativeFS\",\"LSFS\", \"WebFS\", \"PathUtil\",\"Env\",\"assert\",\"SFile\",\"RootFS\",\"Content\",\"zip\",\"DeferredUtil\",\"promise\"],\r\n        function (FSClass,NativeFS,LSFS,WebFS, P,Env,A,SFile,RootFS,Content,zip,DU,PR) {\r\n    var FS={};\r\n    FS.assert=A;\r\n    FS.Content=Content;\r\n    FS.Class=FSClass;\r\n    FS.DeferredUtil=DU;\r\n    if (!DU.config.useJQ) {\r\n        DU.external.Promise=PR;\r\n    }\r\n    FS.Env=Env;\r\n    FS.LSFS=LSFS;\r\n    FS.NativeFS=NativeFS;\r\n    FS.PathUtil=P;\r\n    FS.RootFS=RootFS;\r\n    FS.SFile=SFile;\r\n    FS.WebFS=WebFS;\r\n    FS.zip=zip;\r\n    //if (zip.JSZip) DU.external.Promise=zip.JSZip.external.Promise;\r\n    if (typeof window==\"object\") window.FS=FS;\r\n    var rootFS;\r\n    var env=new Env({});\r\n    FS.addFSType=FSClass.addFSType;\r\n    FS.availFSTypes=FSClass.availFSTypes;\r\n\r\n    FS.setEnvProvider=function (e) {\r\n        env=e;\r\n    };\r\n    FS.getEnvProvider=function () {\r\n        return env;\r\n    };\r\n    FS.setEnv=function (key, value) {\r\n        if (typeof key==\"object\") {\r\n            for (var k in key) {\r\n                env.set(k,key[k]);\r\n            }\r\n        }else {\r\n            env.set(key,value);\r\n        }\r\n    };\r\n    FS.getEnv=function (key) {\r\n        if (typeof key==\"string\") {\r\n            return env.get(key);\r\n        }else {\r\n            return env.value;\r\n        }\r\n    };\r\n    FS.init=function (fs) {\r\n        if (rootFS) return;\r\n        if (!fs) {\r\n            if (NativeFS.available) {\r\n                fs=new NativeFS();\r\n            } else if (typeof localStorage===\"object\") {\r\n                fs=new LSFS(localStorage);\r\n            } else if (typeof importScripts===\"function\") {\r\n                // Worker\r\n                /* global self*/\r\n                self.addEventListener(\"message\", function (e) {\r\n                    var data=e.data;\r\n                    if (typeof data===\"string\") {\r\n                        data=JSON.parse(data);\r\n                    }\r\n                    switch(data.type) {\r\n                    case \"upload\":\r\n                        FS.get(data.base).importFromObject(data.data);\r\n                        break;\r\n                    case \"observe\":\r\n                        rootFS.observe(data.path, function (path,meta) {\r\n                            self.postMessage(JSON.stringify({\r\n                                type: \"changed\",\r\n                                path: path,\r\n                                content: FS.get(path).text(),\r\n                                meta: meta\r\n                            }));\r\n                        });\r\n                        break;\r\n                    }\r\n                });\r\n                fs=LSFS.ramDisk();\r\n            }\r\n        }\r\n        rootFS=new RootFS(fs);\r\n    };\r\n    FS.getRootFS=function () {\r\n        FS.init();\r\n        return rootFS;\r\n    };\r\n    FS.get=function () {\r\n        FS.init();\r\n        return rootFS.get.apply(rootFS,arguments);\r\n    };\r\n    FS.expandPath=function () {\r\n        return env.expandPath.apply(env,arguments);\r\n    };\r\n    FS.resolve=function (path, base) {\r\n        FS.init();\r\n        if (SFile.is(path)) return path;\r\n        path=env.expandPath(path);\r\n        if (base && !P.isAbsolutePath(path)) {\r\n            base=env.expandPath(base);\r\n            return FS.get(base).rel(path);\r\n        }\r\n        return FS.get(path);\r\n    };\r\n    FS.mount=function () {\r\n        FS.init();\r\n        return rootFS.mount.apply(rootFS,arguments);\r\n    };\r\n    FS.unmount=function () {\r\n        FS.init();\r\n        return rootFS.unmount.apply(rootFS,arguments);\r\n    };\r\n    FS.isFile=function (f) {\r\n        return SFile.is(f);\r\n    };\r\n    return FS;\r\n});\r\n\r\n//-----------\r\n\tvar resMod;\r\n\trequirejs([\"FS\"], function (r) {\r\n\t  resMod=r;\r\n\t});\r\n\tif (typeof window!==\"undefined\" && window.FS===undefined) window.FS=resMod;\r\n\tif (typeof module!==\"undefined\") module=resMod;\r\n\treturn resMod;\r\n});\r\n//})(window);\r\n\n/*global window,self,global*/\r\ndefine('root',[],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\ndefine('exceptionCatcher',[], function () {\r\n    var res={};\r\n    res.f=function (f) {\r\n        if (typeof f==\"function\") {\r\n            if (f.isTrcf) return f;\r\n            var r=function () {\r\n                if (res.handleException && !res.enter) {\r\n                    try {\r\n                        res.enter=true;\r\n                        return f.apply(this,arguments);\r\n                    } catch (e) {\r\n                        res.handleException(e);\r\n                    } finally {\r\n                        res.enter=false;\r\n                    }\r\n                } else {\r\n                    return f.apply(this,arguments);\r\n                }\r\n            };\r\n            r.isTrcf=true;\r\n            return r;\r\n        } else if(typeof f==\"object\") {\r\n            for (var k in f) {\r\n                f[k]=res.f(f[k]);\r\n            }\r\n            return f;\r\n        }\r\n    };\r\n    //res.handleException=function (){};\r\n    return res;\r\n});\ndefine('FileList',['require','exports','module','FS','root','exceptionCatcher'],function(require,exports,module) {\r\nconst FS=require(\"FS\");\r\nconst root=require(\"root\");\r\nconst EC=require(\"exceptionCatcher\");\r\nconst F=EC.f;\r\nmodule.exports=function FileList(elem, options) {\r\n    var _curDir=null;\r\n    var _curFile=null;\r\n    var _mod=false;\r\n    var selbox=elem[0].tagName.toLowerCase()==\"select\";\r\n    //console.log(elem);\r\n    if (!options) options={};\r\n    const ide=options.ide;\r\n    const runDialogParam=options.runDialogParam;\r\n    const desktopEnv=runDialogParam.desktopEnv;\r\n    var FL={select:select, ls:ls, on:(options.on?options.on:{}), curFile:curFile, curDir: curDir,\r\n    \t\tsetModified:setModified, isModified:isModified};\r\n    var path=$(\"<div>\");\r\n    var items=$(\"<div>\");\r\n    if (!selbox) elem.append(path).append(items);\r\n    else elem.change(function () {\r\n        if(this.value) select(FS.get(this.value));\r\n    });\r\n    function item(f) {\r\n    \tvar res=$();\r\n    \tif (!f) return res;\r\n    \tvar fn=f.path();\r\n    \titems.find(selbox?\"option\":\"span\").each(function () {\r\n    \t\tvar t=$(this);\r\n    \t\tif ( t.data(\"filename\")==fn) {\r\n    \t\t\tres=t;\r\n    \t\t}\r\n    \t});\r\n    \treturn res;\r\n    }\r\n    function select(f) {\r\n        if (open(f)) return;\r\n        if (!f) return;\r\n        _mod=false;\r\n        if (f.isDir()) {\r\n            //_curFile=null;\r\n            ls(f);\r\n        } else {\r\n            var nDir=f.up();\r\n            if (_curDir.path()!=nDir.path() ) {\r\n                _curFile=f;\r\n                ls(nDir);\r\n            } else {\r\n                item(_curFile).removeClass(\"selected\");\r\n                _curFile=f;\r\n                item(_curFile).addClass(\"selected\");\r\n            }\r\n        }\r\n    }\r\n    function setModified(m) {\r\n    \tif (!_curFile) return;\r\n    \t_mod=m;\r\n       \titem(_curFile).text(itemText(_curFile,m));\r\n    }\r\n    function isModified() {\r\n    \treturn _mod;\r\n    }\r\n    function ls(dir) {\r\n        if (typeof dir==\"string\") dir=FS.get(dir);\r\n        if (dir) {\r\n            _curDir=dir;\r\n            path.text(dir.name()).attr({title:dir.path()});\r\n        }\r\n        if (!_curDir) return;\r\n        if (!_curDir.isDir()) return;\r\n        items.empty();\r\n        var wait=$(\"<div>\").text(\"Wait..\");\r\n        items.append(wait);\r\n        if (selbox) {\r\n            elem.empty();\r\n            elem.append($(\"<option>\").text(\"Select...\"));\r\n        }\r\n        var p=_curDir.up();\r\n        if (p && !_curDir.equals(options.topDir)) {\r\n            if (selbox) {\r\n                elem.append($(\"<option>\").\r\n                        attr(\"value\",p.path()).\r\n                        text(\"[Up]\")\r\n                );\r\n            } else {\r\n                $(selbox?\"<option>\":\"<li>\").append(\r\n                        $(\"<span>\").addClass(\"fileItem\").text(\"[Up]\")\r\n                ).appendTo(items).click(function () {\r\n                    select(p);\r\n                });\r\n            }\r\n        }\r\n        if (_curFile && !_curFile.exists()) {\r\n            _curFile=null;\r\n        }\r\n        var i=0;\r\n        var dirs=_curDir.listFiles();\r\n        if (dirs.length>0) setTimeout(lp,0);\r\n        else wait.remove();\r\n        function lp() {\r\n            if (i==0) wait.remove();\r\n            var f=dirs[i++];\r\n            if (i<dirs.length) setTimeout(lp,0);\r\n            var n=displayName(f);\r\n            if (!n) return;\r\n            var isCur=_curFile && _curFile.path()==f.path();\r\n            if (selbox) {\r\n                elem.append($(\"<option>\").\r\n                        attr(\"value\",f.path()).\r\n                        text(itemText(f))\r\n                );\r\n            } else {\r\n                var s=$(\"<span>\").addClass(\"fileItem\").text(itemText(f)).data(\"filename\",f.path());\r\n                if (isCur) { s.addClass(\"selected\");}\r\n                //console.log(\"Add file item \",f,selbox);\r\n                $(\"<li>\").append(s).appendTo(items).click(function () {\r\n                    select(f);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    function itemText(f, mod) {\r\n    \treturn (mod?\"*\":\"\")+(f.isReadOnly()?\"[RO]\":\"\")+displayName(f);\r\n    }\r\n    function displayName(f) {\r\n        if (FL.on.displayName) return FL.on.displayName.apply(FL, arguments );\r\n        return f.name();\r\n    }\r\n    function curFile() {\r\n        return _curFile;\r\n    }\r\n    function curDir() {\r\n        return _curDir;\r\n    }\r\n    let curDOM;\r\n    function open(f) {\r\n\t// do not call directly !!  it doesnt change fl.curFile\r\n        if (f.isDir()) {\r\n            return;\r\n        }\r\n        $(\"#welcome\").hide();\r\n        ide.save();\r\n        const editors=ide.editors;\r\n        if (curDOM) curDOM.hide();\r\n        var inf=editors[f.path()];\r\n        if (!inf) {\r\n            var progDOM=$(\"<pre>\").css(\"height\", runDialogParam.screenH+\"px\").text(f.text()).appendTo(\"#progs\");\r\n            var prog=root.ace.edit(progDOM[0]);\r\n            window.lastEditor=prog;\r\n            if (typeof desktopEnv.editorFontSize==\"number\") prog.setFontSize(desktopEnv.editorFontSize);\r\n            else prog.setFontSize(16);\r\n            prog.setTheme(\"ace/theme/eclipse\");\r\n            prog.getSession().setMode(\"ace/mode/tonyu\");\r\n            inf=editors[f.path()]={file:f , editor: prog, dom:progDOM};\r\n            progDOM.click(F(function () {\r\n                ide.displayMode(\"edit\");\r\n            }));\r\n            prog.setReadOnly(false);\r\n            prog.clearSelection();\r\n            prog.focus();\r\n            try {\r\n                prog.commands.removeCommand(\"toggleFoldWidget\");\r\n                prog.setOptions({fixedWidthGutter:true});\r\n            }catch(e){}// F2\r\n\r\n            curDOM=progDOM;\r\n        } else {\r\n            if (inf.lastTimeStamp<inf.file.lastUpdate()) {\r\n                inf.editor.setValue(inf.file.text());\r\n                inf.editor.clearSelection();\r\n                inf.lastTimeStamp=inf.file.lastUpdate();\r\n            }\r\n            inf.dom.show();\r\n            inf.editor.focus();\r\n            curDOM=inf.dom;\r\n        }\r\n        inf.lastTimeStamp=inf.file.lastUpdate();\r\n    }\r\n\r\n    return FL;\r\n};\r\n});\r\n\ndefine('UI',[\"Util\",\"exceptionCatcher\"],function (Util, EC) {\r\n    var UI={};\r\n    var F=EC.f;\r\n    UI=function () {\r\n        var expr=[];\r\n        for (var i=0 ; i<arguments.length ; i++) {\r\n            expr[i]=arguments[i];\r\n        }\r\n        var listeners=[];\r\n        var $vars={};\r\n        var $edits=[];\r\n        var res=parse(expr);\r\n        res.$edits=$edits;\r\n        res.$vars=$vars;\r\n        $.data(res,\"edits\",$edits);\r\n        $.data(res,\"vars\",$vars);\r\n        $edits.load=function (model) {\r\n            $edits.model=model;\r\n            $edits.forEach(function (edit) {\r\n                $edits.writeToJq(edit.params.$edit, edit.jq);\r\n            });\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.writeToJq=function ($edit, jq) {\r\n        \tvar m=$edits.model;\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                m=m[a[i]];\r\n            }\r\n            m=$edit.type.toVal(m);\r\n            if (jq.attr(\"type\")==\"checkbox\") {\r\n                jq.prop(\"checked\",!!m);\r\n            } else {\r\n                jq.val(m);\r\n            }\r\n        };\r\n        $edits.validator={\r\n       \t\terrors:{},\r\n       \t\tshow: function () {\r\n       \t\t\tif ($vars.validationMessage) {\r\n       \t\t\t\t$vars.validationMessage.empty();\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\t$vars.validationMessage.append(UI(\"div\", this.errors[name].mesg));\r\n       \t\t\t\t}\r\n       \t\t\t}\r\n       \t\t\tif ($vars.OKButton) {\r\n       \t\t\t\tvar ok=true;\r\n       \t\t\t\tfor (var name in this.errors) {\r\n       \t\t\t\t\tok=false;\r\n       \t\t\t\t}\r\n       \t\t\t\t$vars.OKButton.attr(\"disabled\", !ok);\r\n       \t\t\t}\r\n       \t\t},\r\n       \t\ton: {\r\n       \t\t\tvalidate: function () {}\r\n       \t\t},\r\n       \t\taddError: function (name, mesg, jq) {\r\n       \t\t\tthis.errors[name]={mesg:mesg, jq:jq};\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tremoveError: function (name) {\r\n       \t\t\tdelete this.errors[name];\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tallOK: function () {\r\n       \t\t\tfor (var i in this.errors) {\r\n       \t\t\t\tdelete this.errors[i];\r\n       \t\t\t}\r\n       \t\t\tthis.show();\r\n       \t\t},\r\n       \t\tisValid: function () {\r\n       \t\t    var res=true;\r\n       \t\t    for (var i in this.errors) res=false;\r\n       \t\t    return res;\r\n       \t\t}\r\n        };\r\n        $edits.writeToModel=function ($edit, val ,jq) {\r\n            var m=$edits.model;\r\n        \t//console.log($edit, m);\r\n            if (!m) return;\r\n            var name = $edit.name;\r\n            try {\r\n                val=$edit.type.fromVal(val);\r\n            } catch (e) {\r\n            \t$edits.validator.addError(name, e, jq);\r\n            \t//$edits.validator.errors[name]={mesg:e, jq:jq};\r\n                //$edits.validator.change(name, e, jq);\r\n                return;\r\n            }\r\n            $edits.validator.removeError(name);\r\n            /*\r\n            if ($edits.validator.errors[name]) {\r\n                delete $edits.validator.errors[name];\r\n                $edits.validator.change(name, null, jq);\r\n            }*/\r\n            var a=name.split(\".\");\r\n            for (var i=0 ; i<a.length ;i++) {\r\n                if (i==a.length-1) {\r\n                    if ($edits.on.writeToModel(name,val)) {\r\n\r\n                    } else {\r\n                        m[a[i]]=val;\r\n                    }\r\n                } else {\r\n                    m=m[a[i]];\r\n                }\r\n            }\r\n            $edits.validator.on.validate.call($edits.validator, $edits.model);\r\n        };\r\n        $edits.on={};\r\n        $edits.on.writeToModel= function (name, val) {};\r\n\r\n        if (listeners.length>0) {\r\n            setTimeout(F(l),50);\r\n        }\r\n        function l() {\r\n            listeners.forEach(function (li) {\r\n                li();\r\n            });\r\n            setTimeout(F(l),50);\r\n        }\r\n        return res;\r\n        function parse(expr) {\r\n            if (expr instanceof Array) return parseArray(expr);\r\n            else if (typeof expr==\"string\") return parseString(expr);\r\n            else return expr;\r\n        }\r\n        function parseArray(a) {\r\n            var tag=a[0];\r\n            var i=1;\r\n            var res=$(\"<\"+tag+\">\");\r\n            if (typeof a[i]==\"object\" && !(a[i] instanceof Array) && !(a[i] instanceof $) ) {\r\n                parseAttr(res, a[i],tag);\r\n                i++;\r\n            }\r\n            while (i<a.length) {\r\n                res.append(parse(a[i]));\r\n                i++;\r\n            }\r\n            return res;\r\n        }\r\n        function parseAttr(jq, o, tag) {\r\n            if (o.$var) {\r\n                $vars[o.$var]=jq;\r\n            }\r\n            if (o.$edit) {\r\n                if (typeof o.$edit==\"string\") {\r\n                    o.$edit={name: o.$edit, type: UI.types.String};\r\n                }\r\n                if (!o.on) o.on={};\r\n                o.on.realtimechange=F(function (val) {\r\n                    $edits.writeToModel(o.$edit, val, jq);\r\n                });\r\n                if (!$vars[o.$edit.name]) $vars[o.$edit.name]=jq;\r\n                $edits.push({jq:jq,params:o});\r\n            }\r\n            for (var k in o) {\r\n                if (k==\"on\") {\r\n                    for (var e in o.on) on(e, o.on[e]);\r\n                } else if (k==\"css\" && o[k]!=null) {//ADDJSL\r\n                    jq.css(o[k]);\r\n                } else if (!Util.startsWith(k,\"$\") && o[k]!=null) {//ADDJSL\r\n                    jq.attr(k,o[k]);\r\n                }\r\n            }\r\n            function on(eType, li) {\r\n                if (!li) return; //ADDJSL\r\n                if (eType==\"enterkey\") {\r\n                    jq.on(\"keypress\",F(function (ev) {\r\n                        if (ev.which==13) li.apply(jq,arguments);\r\n                    }));\r\n                } else if (eType==\"realtimechange\") {\r\n                    var first=true, prev;\r\n                    listeners.push(function () {\r\n                        var cur;\r\n                        if (o.type==\"checkbox\") {\r\n                            cur=!!jq.prop(\"checked\");\r\n                        } else {\r\n                            cur=jq.val();\r\n                        }\r\n                        if (first || prev!=cur) {\r\n                            li.apply(jq,[cur,prev]);\r\n                            prev=cur;\r\n                        }\r\n                        first=false;\r\n                    });\r\n                } else {\r\n                    jq.on(eType, F(li));\r\n                }\r\n            }\r\n        }\r\n        function parseString(str) {\r\n            return $(document.createTextNode(str));\r\n            //return $(\"<span>\").text(str);\r\n        }\r\n    };\r\n    UI.types={\r\n       String: {\r\n           toVal: function (val) {\r\n               return val;\r\n           },\r\n           fromVal: function (val) {\r\n               return val;\r\n           }\r\n       },\r\n       Number: {\r\n           toVal: function (val) {\r\n               return val+\"\";\r\n           },\r\n           fromVal: function (val) {\r\n               return parseFloat(val);\r\n           }\r\n       }\r\n   };\r\n    return UI;\r\n});\r\n\ndefine('Platform',[],function () {\r\n    var WebSite={};\r\n    // from https://w3g.jp/blog/js_browser_sniffing2015\r\n    var u=window.navigator.userAgent.toLowerCase();\r\n    WebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1)\r\n    || u.indexOf(\"ipad\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1)\r\n    || u.indexOf(\"kindle\") != -1\r\n    || u.indexOf(\"silk\") != -1\r\n    || u.indexOf(\"playbook\") != -1;\r\n    WebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1)\r\n    || u.indexOf(\"iphone\") != -1\r\n    || u.indexOf(\"ipod\") != -1\r\n    || (u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || (u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1)\r\n    || u.indexOf(\"blackberry\") != -1;\r\n    return WebSite;\r\n});\r\n\n/*global process, require, BuiltinAssets */\r\ndefine('WebSite',[\"FS\",\"Platform\"], function (FS,Platform) {\r\n\tvar P=FS.PathUtil;\r\n\tvar loc=document.location.href;\r\n\tvar devMode=!!loc.match(/html\\/dev\\//) && !!loc.match(/localhost:3/);\r\n\tvar WebSite;\r\n\tvar prot=location.protocol;\r\n\tvar k;\r\n\tif (!prot.match(/^http/)) prot=\"https:\";\r\n\tswitch(window.WebSite_runType) {\r\n\tcase \"IDE\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.builtinAssetNames={\r\n\t\t\t\"images/Ball.png\":1,\r\n\t\t\t\"images/base.png\":1,\r\n\t\t\t\"images/Sample.png\":1,\r\n\t\t\t\"images/inputPad.png\":1,\r\n\t\t\t\"images/neko.png\":1,\r\n\t\t\t\"images/mapchip.png\":1\r\n\t\t};\r\n\t\tif (!WebSite.pluginTop) {\r\n\t\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\t}\r\n\t\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.noconcat=true;\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\t\tif (process.env.TONYU_HOME) {\r\n\t\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t\t}\r\n\t\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\t\td=P.directorify(d);\r\n\t\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t\t}\r\n\t\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t} else {\r\n\t\t\tif (loc.match(/edit\\.tonyu\\.jp\\/n\\//)) {\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/n/\";\r\n\t\t\t} else {\r\n\t\t\t\t// Why?\r\n\t\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\t\t}\r\n\t\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t\t// compiledKernel is URL , not file path.\r\n\t\t// It is correct as long as the html pages in www/ (not html/build|dev )\r\n\t\tWebSite.compiledKernel=\"Kernel/js/concat.js\";   //P.rel(WebSite.kernelDir,\"js/concat.js\");\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.version=2;\r\n\t\tWebSite.hoge=\"fuga\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"singleHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tif (typeof BuiltinAssets===\"object\") {\r\n\t\t\tfor (k in BuiltinAssets) {\r\n\t\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\t\tWebSite.scriptServer=\"http://localhost/tonyu2/\";\r\n\t\t} else {\r\n\t\t\tWebSite.scriptServer=\"https://edit.tonyu.jp/\";\r\n\t\t}\r\n\t\tWebSite.pluginTop=WebSite.scriptServer+\"js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.compiledKernel=WebSite.scriptServer+\"Kernel/js/concat.js\";\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\tcase \"multiHTML\":\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",\r\n\t\t\ttablet:Platform.tablet,\r\n\t\t\tmobile:Platform.mobile\r\n\t\t};\r\n\t\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\t\tWebSite.PathSep=\"/\";\r\n\t\tWebSite.mp4Disabled=WebSite.isNW;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t\tWebSite.platform=process.platform;\r\n\t\t}\r\n\t\t// this sets at runScript2.js\r\n\t\t//WebSite.compiledKernel=WebSite.top+\"/js/kernel.js\";\r\n\t\t//-------------\r\n\t\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\t\twindow.WebSite=WebSite;\r\n\t\treturn WebSite;\r\n\t}\r\n\r\n\tif (loc.match(/jsrun\\.it/)) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"http:\"+\"//jsrun.it/assets/9/X/T/b/9XTbt.png\",\r\n\t\t\t\t\"images/base.png\":\"http:\"+\"//jsrun.it/assets/6/F/y/3/6Fy3B.png\",\r\n\t\t\t\t\"images/Sample.png\":\"http:\"+\"//jsrun.it/assets/s/V/S/l/sVSlZ.png\",\r\n\t\t\t\t\"images/neko.png\":\"http:\"+\"//jsrun.it/assets/f/D/z/z/fDzze.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"http:\"+\"//jsrun.it/assets/f/u/N/v/fuNvz.png\"\r\n\t\t\t},top:\"\",devMode:devMode,\r\n\t\t\tpluginTop: \"https://edit.tonyu.jp/js/plugins\",\r\n\t\t\tremoveJSOutput:true\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/) ||\r\n\t\t(\r\n\t\t/*(\r\n\t\t\tloc.match(/^chrome-extension:/) ||\r\n\t\t\tloc.match(/localhost/) ||\r\n\t\t\tloc.match(/tonyuedit\\.appspot\\.com/)\r\n\t\t) &&*/\r\n\t\tloc.match(/\\/html\\/((dev)|(build))\\//)\r\n\t\t)\r\n\t) {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {\r\n\t\t\t\t\"images/Ball.png\":\"../../images/Ball.png\",\r\n\t\t\t\t\"images/base.png\":\"../../images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":\"../../images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":\"../../images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":\"../../images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":\"../../images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":\"../../images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":\"../../images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":\"../../images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":\"../../images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":\"../../images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":\"../../images/sound_wav.png\",\r\n\t\t\t\t\t\"images/ecl.png\":\"../../images/ecl.png\"\r\n\t\t\t},top:\"../..\",devMode:devMode\r\n\t\t};\r\n\t} else if (\r\n\t\tloc.match(/bitarrow/) ||\r\n\t\tloc.match(/localhost.*pub/))  {\r\n\t\tWebSite={};\r\n\t\tvar WS=WebSite;\r\n\t\tWebSite.serverType=\"BA\";\r\n\t\tWS.runtime=\"../../../runtime/\";\r\n\t\tWS.urlAliases= {\r\n\t\t\t\t\"images/base.png\":WS.runtime+\"images/base.png\",\r\n\t\t\t\t\"images/Sample.png\":WS.runtime+\"images/Sample.png\",\r\n\t\t\t\t\"images/neko.png\":WS.runtime+\"images/neko.png\",\r\n\t\t\t\t\"images/mapchip.png\":WS.runtime+\"images/mapchip.png\",\r\n\t\t\t\t\"images/sound.png\":WS.runtime+\"images/sound.png\",\r\n\t\t\t\t\"images/sound_ogg.png\":WS.runtime+\"images/sound_ogg.png\",\r\n\t\t\t\t\"images/sound_mp3.png\":WS.runtime+\"images/sound_mp3.png\",\r\n\t\t\t\t\"images/sound_mp4.png\":WS.runtime+\"images/sound_mp4.png\",\r\n\t\t\t\t\"images/sound_m4a.png\":WS.runtime+\"images/sound_m4a.png\",\r\n\t\t\t\t\"images/sound_mid.png\":WS.runtime+\"images/sound_mid.png\",\r\n\t\t\t\t\"images/sound_wav.png\":WS.runtime+\"images/sound_wav.png\",\r\n\t\t\t\t\"images/ecl.png\":WS.runtime+\"images/ecl.png\"\r\n\t\t};\r\n\t} else {\r\n\t\tWebSite={\r\n\t\t\turlAliases: {}, top: \".\",devMode:devMode\r\n\t\t};\r\n\t}\r\n\tif (typeof BuiltinAssets===\"object\") {\r\n\t\tfor (k in BuiltinAssets) {\r\n\t\t\tWebSite.urlAliases[k]=BuiltinAssets[k];\r\n\t\t}\r\n\t}\r\n\tWebSite.builtinAssetNames={\r\n\t\t\"images/Ball.png\":1,\r\n\t\t\"images/base.png\":1,\r\n\t\t\"images/Sample.png\":1,\r\n\t\t\"images/neko.png\":1,\r\n\t\t\"images/mapchip.png\":1\r\n\t};\r\n\t// from https://w3g.jp/blog/js_browser_sniffing2015\r\n\tvar u=window.navigator.userAgent.toLowerCase();\r\n\tWebSite.tablet=(u.indexOf(\"windows\") != -1 && u.indexOf(\"touch\") != -1) ||\r\n\tu.indexOf(\"ipad\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") == -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"tablet\") != -1) ||\r\n\tu.indexOf(\"kindle\") != -1 ||\r\n\tu.indexOf(\"silk\") != -1 ||\r\n\tu.indexOf(\"playbook\") != -1;\r\n\tWebSite.mobile=(u.indexOf(\"windows\") != -1 && u.indexOf(\"phone\") != -1) ||\r\n\tu.indexOf(\"iphone\") != -1 ||\r\n\tu.indexOf(\"ipod\") != -1 ||\r\n\t(u.indexOf(\"android\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\t(u.indexOf(\"firefox\") != -1 && u.indexOf(\"mobile\") != -1) ||\r\n\tu.indexOf(\"blackberry\") != -1;\r\n\r\n\tif (!WebSite.pluginTop) {\r\n\t\tWebSite.pluginTop=WebSite.top+\"/js/plugins\";\r\n\t}\r\n\tWebSite.disableROM={};\r\n\t/*if (loc.match(/tonyuedit\\.appspot\\.com/) || loc.match(/localhost:8888/) ) {\r\n\t\t//WebSite.disableROM={\"ROM_d.js\":true};\r\n\t}*/\r\n\tif (loc.match(/\\.appspot\\.com/) ||  loc.match(/localhost:888[87]/)) {\r\n\t\tWebSite.serverType=\"GAE\";\r\n\t}\r\n\tif (loc.match(/localhost:3000/) ) {\r\n\t\tWebSite.serverType=\"Node\";\r\n\t}\r\n\tif (loc.match(/tonyuexe\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:8887/)) {\r\n\t\tWebSite.serverTop=WebSite.top+\"/exe\"; // Fix NetModule.tonyu!!\r\n\t} else {\r\n\t\tWebSite.serverTop=WebSite.top+\"/edit\";// Fix NetModule.tonyu!!\r\n\t}\r\n\tWebSite.sampleImg=WebSite.top+\"/images\";\r\n\tWebSite.blobPath=WebSite.serverTop+\"/serveBlob\";        //TODO: urlchange!\r\n\tWebSite.isNW=(typeof process==\"object\" && (process.__node_webkit||process.__nwjs));\r\n\tWebSite.mp4Disabled=WebSite.isNW;\r\n\tWebSite.tonyuHome=\"/Tonyu/\";\r\n\tWebSite.url={\r\n\t\tgetDirInfo:WebSite.serverTop+\"/getDirInfo\",\r\n\t\tgetFiles:WebSite.serverTop+\"/File2LSSync\",\r\n\t\tputFiles:WebSite.serverTop+\"/LS2FileSync\"\r\n\t};\r\n\tWebSite.PathSep=\"/\";\r\n\tif (WebSite.isNW) {\r\n\t\tWebSite.PathSep=require(\"path\").sep;\r\n\t\tWebSite.cwd=P.directorify(process.cwd().replace(/\\\\/g,\"/\"));\r\n\t\t//WebSite.exeDir=WebSite.execDir=P.up(P.fixSep(process.execPath)); not suitable when mac\r\n\t\tif (process.env.TONYU_HOME) {\r\n\t\t\tWebSite.tonyuHome=P.directorify(process.env.TONYU_HOME);\r\n\t\t} else {\r\n\t\t\tWebSite.tonyuHome=P.rel(WebSite.cwd,\"fs/Tonyu/\");\r\n\t\t}\r\n\t\tWebSite.logdir=process.env.TONYU_LOGDIR;//\"C:/var/log/Tonyu/\";\r\n\t\tWebSite.wwwDir=P.rel(WebSite.cwd,\"www/\");\r\n\t\tWebSite.platform=process.platform;\r\n\t\tWebSite.ffmpeg=P.rel(WebSite.cwd,(WebSite.platform==\"win32\"?\r\n\t\t\t\t\"ffmpeg/bin/ffmpeg.exe\":\"ffmpeg/bin/ffmpeg\"));\r\n\t\tWebSite.pkgInfo=require(P.rel(WebSite.cwd, \"package.json\"));\r\n\t\tif (process.env.TONYU_PROJECTS) {\r\n\t\t\tWebSite.projects=process.env.TONYU_PROJECTS.replace(/\\\\/g,\"/\").split(require('path').delimiter);\r\n\t\t} else if ( WebSite.pkgInfo && WebSite.pkgInfo.config && WebSite.pkgInfo.config.prjDirs ){\r\n\t\t\tWebSite.projects=WebSite.pkgInfo.config.prjDirs.map(function (d) {\r\n\t\t\t\td=P.directorify(d);\r\n\t\t\t\tif (P.isAbsolute(d)) return d;\r\n\t\t\t\treturn P.rel(WebSite.cwd,d);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tWebSite.projects=[P.rel(WebSite.cwd,\"Projects/\"),\r\n\t\t\t\t\t\t\t\tP.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t\t}\r\n\t\tWebSite.kernelDir=P.rel(WebSite.wwwDir,\"Kernel/\");\r\n\t} else {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/\";\r\n\t\tWebSite.projects=[P.rel(WebSite.tonyuHome,\"Projects/\")];\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/)) {\r\n\t\t//WebSite.kernelDir=WebSite.top+\"/Kernel/\";\r\n\t\t// kernelDir must be absolute\r\n\t\tWebSite.kernelDir=prot+\"//\"+location.host+\"/Kernel/\";\r\n\t}\r\n\tif (loc.match(/edit\\.tonyu\\.jp/) ||\r\n\t\tloc.match(/tonyuedit\\.appspot\\.com/) ||\r\n\t\tloc.match(/localhost:888/) ||\r\n\t\tWebSite.isNW) {\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t} else if (WebSite.serverType===\"BA\") {\r\n\t\tWebSite.compiledKernel=WebSite.runtime+\"lib/tonyu/kernel.js\";\r\n\t} else {\r\n\t\tWebSite.compiledKernel=\"https://edit.tonyu.jp/Kernel/js/concat.js\";\r\n\t\t//WebSite.compiledKernel=prot+\"//tonyuexe.appspot.com/Kernel/js/concat.js\";\r\n\t}\r\n\tif (loc.match(/localhost\\/tonyu2/)) {\r\n\t\tWebSite.wwwDir=prot+\"//\"+location.host+\"/tonyu2/\";\r\n\t\tWebSite.kernelDir=WebSite.wwwDir+\"Kernel/\";\r\n\t\tWebSite.compiledKernel=WebSite.kernelDir+\"js/concat.js\";\r\n\t\tWebSite.uploadTmpUrl=prot+\"//localhost/tsite/tonyu/e/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//localhost/tsite/tonyu/project/newVersion.cgi\";\r\n\t} else {\r\n\t\tWebSite.uploadTmpUrl=prot+\"//edit.tonyu.jp/cgi-bin/uploadTmp.cgi\";\r\n\t\tWebSite.newVersionUrl=prot+\"//www.tonyu.jp/project/newVersion.cgi\";\r\n\t}\r\n\r\n\tif (loc.match(/((index)|(project))2/)) {\r\n\t\tWebSite.version=2;\r\n\t\tif (WebSite.isNW) {\r\n\t\t\tWebSite.devMode=true;\r\n\t\t} else {\r\n\t\t\tWebSite.devMode=false;\r\n\t\t}\r\n\t}\r\n\tFS.setEnvProvider(new FS.Env(WebSite));\r\n\twindow.WebSite=WebSite;\r\n\treturn WebSite;\r\n});\r\n\ndefine('miniJSLoader',['require','exports','module'],function (require, exports, module) {\r\n    exports.load=url=>new Promise(succ=>{\r\n        const s=document.createElement(\"script\");\r\n        s.setAttribute(\"src\",url);\r\n        s.addEventListener(\"load\",succ);\r\n        document.body.appendChild(s);\r\n        // JQuery does not work\r\n        //$(\"<script>\").attr({src:url}).on(\"load\",succ).appendTo(\"body\");\r\n    });\r\n});//-----\r\n;\ndefine('kernelChecker',['require','exports','module','Tonyu','WebSite','miniJSLoader'],function(require,exports,module) {//----\r\nconst Tonyu=require(\"Tonyu\");\r\nconst WebSite=require(\"WebSite\");\r\nconst miniJSLoader=require(\"miniJSLoader\");\r\nminiJSLoader.load(WebSite.compiledKernel);// It takes several times...\r\nexports.isKernel=name=>{\r\n    if (!Tonyu.classes.kernel) {\r\n        return false;\r\n    }\r\n    return Tonyu.classes.kernel[name];\r\n};\r\n});//----of define\r\n;\ndefine('FileMenu',['require','exports','module','UI','kernelChecker','root'],function (require,exports,module) {\r\nconst UI=require(\"UI\");\r\n//const EC=require(\"exceptionCatcher\");\r\n//const F=EC.f;\r\nconst kernelChecker=require(\"kernelChecker\");\r\nconst root=require(\"root\");\r\n\r\nmodule.exports=function (ide) {\r\n    const FM={};\r\n    const EXT=ide.project.getEXT();\r\n    const curPrjDir=ide.project.getDir();\r\n    function open(f){\r\n        if (typeof FM.fileList==\"object\") {\r\n            FM.fileList.select(f);\r\n        }\r\n    }\r\n    function getCurFile() {\r\n        if (typeof FM.fileList==\"object\") {\r\n            return FM.fileList.curFile();\r\n        }\r\n        throw \"FM.fileList is missing\";\r\n    }\r\n    FM.dialog=function (title, name, onend) {\r\n    \treturn FM.dialogOpt({title:title, name:name, onend:onend});\r\n    };\r\n    FM.dialogOpt=function (options) {\r\n    \tvar title=options.title;\r\n    \tvar name=options.name || \"\";\r\n    \tvar onend=options.onend || function (){};\r\n        //var t;\r\n        if (!FM.d) FM.d=UI([\"div\"], {title: title},\r\n             \"\",[\"br\"],\r\n             [\"input\", {\r\n                 $var: \"name\",\r\n                 on:{\r\n                \t enterkey:function () {\r\n                \t\t FM.d.$vars.done();\r\n                \t },\r\n                \t realtimechange: function (v) {\r\n                \t\t FM.d.$vars.chg(v);\r\n                \t }\r\n                 }\r\n             }],\r\n             [\"br\"],\r\n             [\"div\",{$var:\"extra\"}],\r\n             [\"div\",{$var:\"msg\"}],\r\n            [\"button\", {$var:\"b\", on:{click: function () {\r\n            \tFM.d.$vars.done();\r\n       \t \t}}}, \"OK\"]\r\n        );\r\n        FM.d.attr({title:title});\r\n        var v=FM.d.$vars;\r\n        //console.log(name);\r\n        v.name.val(name);\r\n        FM.d.dialog({title:title});\r\n        var r=null;\r\n        v.done=function() {\r\n            if (!r || !r.ok) return;\r\n            //clearInterval(t);\r\n            onend(r.file);\r\n            FM.d.dialog(\"close\");\r\n        };\r\n        v.chg=function (s) {\r\n            r=fixName(s,options);\r\n            if (r.ok && r.file.exists()) r={ok:false, reason:s+\"\"};\r\n            if (!r.ok) {\r\n                v.msg.css({\"color\":\"red\"});\r\n                v.msg.text(r.reason);\r\n                v.b.attr(\"disabled\",true);\r\n            } else {\r\n                v.msg.css({\"color\":\"blue\"});\r\n                v.msg.text(r.note || \"\");\r\n                v.b.removeAttr(\"disabled\");\r\n            }\r\n        };\r\n        v.extra.empty();\r\n        if (options.extraUI) {\r\n            options.extraUI(v.extra);\r\n        }\r\n    };\r\n\r\n    FM.create=function () {\r\n        save();\r\n        FM.dialogOpt({title:\"\", action:\"create\", onend:function (f) {\r\n            if (!f.exists()) {\r\n                createContent(f); //f.text(\"\");\r\n                ls();\r\n                open(f);\r\n                resetFiles();// See https://github.com/hoge1e3/tonyu2-compiler/commit/04ef9c655943b261eea47ed1f49b16c16797f564\r\n            }\r\n        }});\r\n    };\r\n    FM.mv=function () {\r\n        save();\r\n        const curFile=getCurFile();\r\n        if (!curFile) return;\r\n        var oldName=displayName(curFile);\r\n        FM.dialogOpt({title:\"\", name:oldName, action:\"mv\", extraUI:mvExtraUI, onend:async function (nf) {\r\n            if (!nf) return;\r\n            const doRefactor=refactorUI.$vars.chk.prop(\"checked\");\r\n            if (doRefactor) {\r\n                return await refactor(curFile,nf);\r\n            }\r\n            reloadFromFiles();\r\n            var t=curFile.text();\r\n            curFile.rm();\r\n            close(curFile);\r\n            nf.text(t);\r\n            ls();\r\n            open(nf);\r\n            resetFiles();\r\n        }});\r\n    };\r\n    let refactorUI;\r\n    function mvExtraUI(d) {\r\n        refactorUI=UI(\"div\",[\"input\",{type:\"checkbox\",$var:\"chk\",checked:\"true\",value:\"chked\"}],\"\");\r\n        d.append(refactorUI);\r\n    }\r\n    async function refactor(old,_new) {\r\n        var oldCN=old.truncExt(EXT);\r\n        var newCN=_new.truncExt(EXT);\r\n        try {\r\n            const ren=await ide.project.renameClassName(oldCN,newCN);\r\n            console.log(\"REN\",ren);\r\n            ls();\r\n            open(_new);\r\n        } catch(e) {\r\n            alert(\"\");\r\n            console.error(e);\r\n            console.log(e);\r\n        }\r\n        refactorUI=null;\r\n        if (root.SplashScreen) root.SplashScreen.hide();\r\n    }\r\n    FM.rm=function (){\r\n        save();\r\n        var curFile=getCurFile();\r\n        if (!curFile) return;\r\n        if (!confirm(curFile.name()+\"\")) return;\r\n        curFile.rm();\r\n        ls();\r\n        close(curFile);\r\n        resetFiles();\r\n    };\r\n    function createContent(f) {\r\n        f.text(\"\");\r\n    }\r\n    function displayName(f) {\r\n        var r=ide.dispName(f);\r\n        if (r) {\r\n            return r;\r\n        }\r\n        return f.name();\r\n    }\r\n    function resetFiles() {\r\n        ide.project.resetFiles();\r\n    }\r\n    function ls(dir){\r\n        FM.fileList.ls(dir);\r\n        ide.refreshRunMenu();\r\n    }\r\n    function save(){\r\n        ide.save();\r\n    }\r\n    function close(rm) { // rm or mv\r\n        const editors=ide.editors;\r\n        var i=editors[rm.path()]; //getCurrentEditorInfo();\r\n        if (i) {\r\n            i.editor.destroy();\r\n            i.dom.remove();\r\n            delete editors[rm.path()];\r\n            var remains;\r\n            for (var k in editors) remains=true||k;\r\n            if (!remains) $(\"#welcome\").show();\r\n        }\r\n    }\r\n    function fixName(name/*, options*/) {\r\n        const fl=FM.fileList;\r\n        var upcased=false;\r\n        //if (name==\"aaaa\") throw new Error(\"iikagen name error \"+EC.enter);\r\n        if (name.match(/^[a-z]/)) {\r\n            name= name.substring(0,1).toUpperCase()+name.substring(1);\r\n            upcased=true;\r\n        }\r\n        if (name.match(/^[A-Z_][a-zA-Z0-9_]*$/)) {\r\n            var dir=fl.curDir();\r\n            var sysdir={files:1, static:1 ,maps:1};\r\n            if (sysdir[dir.relPath(curPrjDir).replace(/\\/*/,\"\")]) {\r\n                return {ok:false, reason:dir.name()+\"\"};\r\n            }\r\n            if (isKernel(name)) {\r\n                return {ok:false, reason:name+\"\"};\r\n            }\r\n            if (upcased) {\r\n                //name= name.substring(0,1).toUpperCase()+name.substring(1);\r\n                return {ok:true, file: dir.rel(name+EXT), note: \"(\"+name+\") \"};\r\n            }\r\n            return {ok:true, file: dir.rel(name+EXT)};\r\n        } else {\r\n            return {ok:false, reason:\"(_)\"};\r\n        }\r\n    }\r\n    function isKernel(n) {\r\n        return kernelChecker.isKernel(n);\r\n    }\r\n    function reloadFromFiles() {\r\n        const editors=ide.editors;\r\n        for (var path in editors) {\r\n            var inf=editors[path];\r\n            var curFile=inf.file; //fl.curFile();\r\n            var prog=inf.editor; //getCurrentEditor();\r\n            if (curFile.exists() && prog) {\r\n                prog.setValue(curFile.text());\r\n                prog.clearSelection();\r\n            }\r\n        }\r\n    }\r\n\r\n    return FM;\r\n};\r\n});\r\n\ndefine('ErrorDialog',['require','exports','module','FS','UI'],function (require, exports, module) {\r\nconst FS=require(\"FS\");\r\nconst UI=require(\"UI\");\r\nclass ErrorDialog {\r\n    constructor(ide) {//{restart,stop,displayMode,jump}\r\n        this.ide=ide;\r\n        this.pluginAdded={};\r\n    }\r\n    showErrorPos(elem, err) {\r\n        function close(){\r\n            if ($.data(elem,\"opened\")) {\r\n                elem.dialog(\"close\");\r\n                $.data(elem,\"opened\",false);\r\n            }\r\n        }\r\n        function jump() {\r\n            ide.jump(src,row,col);\r\n            close();\r\n        }\r\n        const ide=this.ide;\r\n        //options=options||{};\r\n        let message=err.message, src, pos, row, col;\r\n        if (!err) {\r\n            close();\r\n            return;\r\n        }\r\n        if (err.isTError) {\r\n            src=err.src;\r\n            pos=err.pos;\r\n            row=err.row;\r\n            col=err.col;\r\n        } else {\r\n            src={name:function (){return \"\";},text:()=>null};\r\n            pos=0;\r\n        }\r\n        if (err.stack && err.stack.length>0 && err.stack[0].fileName) {\r\n            const compiler=ide.project.compiler;\r\n            for (let {columnNumber, lineNumber, fileName} of err.stack) {\r\n                console.log(columnNumber, lineNumber, fileName);\r\n                if (!fileName) continue;\r\n                if (typeof columnNumber!==\"number\") continue;\r\n                if (typeof lineNumber!==\"number\") continue;\r\n                fileName=compiler.convertFromWorkerPath(fileName);\r\n                if (fileName.match(/^http/)) continue; // for concat.js\r\n                try {\r\n                    src=FS.get(fileName);\r\n                    pos={row:lineNumber, col:columnNumber};\r\n                    if (src.exists()) break;\r\n                }catch(e){\r\n                    //console.log(\"ErrorDialog\",\"stack\",e);\r\n                }\r\n            }\r\n        }\r\n        if(typeof pos==\"object\") {row=pos.row; col=pos.col;}\r\n        elem.empty();\r\n        const mesgd=$(\"<div>\").text(message+\" \"+src.name()+(typeof row==\"number\"?\":\"+row+\":\"+col:\"\"));\r\n        if(typeof row===\"number\" && typeof col===\"number\") {\r\n            mesgd.append($(\"<button>\").text(\"\").click(jump));\r\n        }\r\n        //mesgd.append($(\"<button>\").text(\"\").click(close));\r\n        elem.append(mesgd);\r\n        elem.append($(\"<div>\").attr(\"class\",\"quickFix\"));\r\n        //console.log(\"src=\",src,err.stack, err.stack instanceof Array);\r\n        console.log(\"src.name\",src.name());\r\n        const str=src.text();\r\n        if (str && typeof pos==\"object\") {\r\n            let npos=0;\r\n            const lines=str.split(\"\\n\");\r\n            for (let i=0 ; i<lines.length && i+1<pos.row ; i++) {\r\n                npos+=lines[i].length+1;\r\n            }\r\n            npos+=pos.col;\r\n            pos=npos;\r\n        }\r\n        if (str) {\r\n            const srcd=$(\"<pre>\");\r\n            srcd.append($(\"<span>\").text(str.substring(0,pos)));\r\n            srcd.append($(\"<img>\").attr(\"src\",FS.expandPath(\"${sampleImg}/ecl.png\")));//MODJSL\r\n            srcd.append($(\"<span>\").text(str.substring(pos)));\r\n            elem.append(srcd);\r\n        }\r\n        elem.attr(\"title\",\"\");\r\n        elem.dialog({width:600,height:400});\r\n        $.data(elem,\"opened\",true);\r\n        return elem;\r\n    }\r\n    show(e) {\r\n        function showTrace() {\r\n            const st=(typeof e.stack===\"string\" ? e.stack :\r\n            typeof e.stack.join===\"function\" ? e.stack.join(\"\\n\") : e+\"\");\r\n            const trcpre=UI(\"pre\",st);\r\n            const html=trcpre.html().replace(/_trc_([\\w]*)/g,function (n) {\r\n                return \"<strong>\"+n+\"</strong>\";\r\n            });\r\n            trcpre.html(html);\r\n            $(\"#errorPos\").find(\".quickFix\").append(trcpre);\r\n        }\r\n        window.shownError=e;\r\n        console.log(\"ErrorDialog\",\"show\",e);\r\n        console.error(e);\r\n        const ide=this.ide;\r\n        const pluginAdded=this.pluginAdded;\r\n        const pluginName=e.pluginName || (e.error && e.error.pluginName);\r\n        if (pluginName && !pluginAdded[pluginName]) {\r\n            pluginAdded[pluginName]=true;\r\n            ide.restart();\r\n            return;\r\n        }\r\n        if (pluginName) {\r\n            alert(e.message);\r\n        } else {\r\n            const diag=this.showErrorPos($(\"#errorPos\"),e);\r\n            ide.displayMode(\"runtime_error\");\r\n            $(\"#errorPos\").find(\".quickFix\").append(\r\n                UI(\"button\",{on:{click:showTrace}},\"\"));\r\n        }\r\n        ide.stop();\r\n    }\r\n}\r\nmodule.exports=ErrorDialog;\r\n\r\n});//--- end of define\r\n;\ndefine('parser',['require','exports','module'],function(require,exports,module) {//used by fixIndent\r\nmodule.exports=function () {\r\n\tfunction extend(dst, src) {\r\n\t\tvar i;\r\n\t\tfor(i in src){\r\n\t\t\tdst[i]=src[i];\r\n\t\t}\r\n\t\treturn dst;\r\n\t}\r\n\tvar $={\r\n\t\tconsoleBuffer:\"\",\r\n\t\toptions: {traceTap:false, optimizeFirst: true, profile: false ,\r\n\t\tverboseFirst: false,traceFirstTbl:false},\r\n\t\tParser: Parser,\r\n\t\tStringParser: StringParser,\r\n\t\tnc: nc\r\n\t};\r\n\t$.dispTbl=function (tbl) {\r\n\t\tvar buf=\"\";\r\n\t\tvar h={};\r\n\t\tif (!tbl) return buf;\r\n\t\tfor (var i in tbl) {// tbl:{char:Parser}   i:char\r\n\t\t\tconst n=tbl[i].name;\r\n\t\t\tif (!h[n]) h[n]=\"\";\r\n\t\t\th[n]+=i;\r\n\t\t}\r\n\t\tfor (let n in h) {\r\n\t\t\tbuf+=h[n]+\"->\"+n+\",\";\r\n\t\t}\r\n\t\treturn buf;\r\n\t};\r\n\t//var console={log:function (s) { $.consoleBuffer+=s; }};\r\n\tfunction _debug(s) {console.log(s);}\r\n\tfunction Parser(parseFunc){\r\n\t\tif ($.options.traceTap) {\r\n\t\t\tthis.parse=function(s){\r\n\t\t\t\tconsole.log(\"tap: name=\"+this.name+\"  pos=\"+(s?s.pos:\"?\"));\r\n\t\t\t\tvar r=parseFunc.apply(this,[s]);\r\n\t\t\t\tvar img=\"NOIMG\";\r\n\t\t\t\tif (r.src && r.src.str) {\r\n\t\t\t\t\timg=r.src.str.substring(r.pos-3,r.pos)+\"^\"+r.src.str.substring(r.pos,r.pos+3);\r\n\t\t\t\t}\r\n\t\t\t\tif (r.src && r.src.tokens) {\r\n\t\t\t\t\timg=r.src.tokens[r.pos-1]+\"[\"+r.src.tokens[r.pos]+\"]\"+r.src.tokens[r.pos+1];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"/tap: name=\"+this.name+\r\n\t\t\t\t\t\t\" pos=\"+(s?s.pos:\"?\")+\"->\"+(r?r.pos:\"?\")+\" \"+img+\" res=\"+(r?r.success:\"?\"));\r\n\t\t\t\treturn r;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tthis.parse=parseFunc;\r\n\t\t}\r\n\t}\r\n\tParser.create=function(parseFunc) { // (State->State)->Parser\r\n\t\treturn new Parser(parseFunc);\r\n\t};\r\n\t$.create=Parser.create;\r\n\tfunction nc(v,name) {\r\n\t\tif (v==null) throw name+\" is null!\";\r\n\t\treturn v;\r\n\t}\r\n\textend(Parser.prototype, {// class Parser\r\n\t\t// Parser.parse:: State->State\r\n\t\texcept: function (f) {\r\n\t\t\tvar t=this;\r\n\t\t\treturn this.ret(Parser.create(function (res) {\r\n\t\t\t\t//var res=t.parse(s);\r\n\t\t\t\t//if (!res.success) return res;\r\n\t\t\t\tif (f.apply({}, res.result)) {\r\n\t\t\t\t\tres.success=false;\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}).setName(\"(except \"+t.name+\")\"));\r\n\t\t},\r\n\t\tnoFollow: function (p) {\r\n\t\t\tvar t=this;\r\n\t\t\tnc(p,\"p\");\r\n\t\t\treturn this.ret(Parser.create(function (res) {\r\n\t\t\t\t//var res=t.parse(s);\r\n\t\t\t\t//if (!res.success) return res;\r\n\t\t\t\tvar res2=p.parse(res);\r\n\t\t\t\tres.success=!res2.success;\r\n\t\t\t\treturn res;\r\n\t\t\t}).setName(\"(\"+t.name+\" noFollow \"+p.name+\")\"));\r\n\t\t},\r\n\t\tandNoUnify: function(next) {// Parser.and:: (Function|Parser)  -> Parser\r\n\t\t\tnc(next,\"next\"); // next==next\r\n\t\t\tvar t=this; // Parser\r\n\t\t\tvar res=Parser.create(function(s){ //s:State\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success) return r1;\r\n\t\t\t\tvar r2=next.parse(r1); //r2:State\r\n\t\t\t\tif (r2.success) {\r\n\t\t\t\t\tr2.result=r1.result.concat(r2.result); // concat===append built in func in Array\r\n\t\t\t\t}\r\n\t\t\t\treturn r2;\r\n\t\t\t});\r\n\t\t\treturn res.setName(\"(\"+this.name+\" \"+next.name+\")\");\r\n\t\t},\r\n\t\tand: function(next) {// Parser.and:: Parser  -> Parser\r\n\t\t\tvar res=this.andNoUnify(next);\r\n\t\t\t//if (!$.options.optimizeFirst) return res;\r\n\t\t\tif (!this._first) return res;\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tvar ntbl={};\r\n\t\t\t//  tbl           ALL:a1  b:b1     c:c1\r\n\t\t\t//  next.tbl      ALL:a2           c:c2     d:d2\r\n\t\t\t//           ALL:a1>>next   b:b1>>next c:c1>>next\r\n\t\t\tfor (var c in tbl) {\r\n\t\t\t\tntbl[c]=tbl[c].andNoUnify(next);\r\n\t\t\t}\r\n\t\t\tres=Parser.fromFirst(this._first.space, ntbl);\r\n\t\t\tres.setName(\"(\"+this.name+\" >> \"+next.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\tconsole.log(\"Created aunify name=\" +res.name+\" tbl=\"+$.dispTbl(ntbl));\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tretNoUnify: function (f) {\r\n\t\t\tvar t=this;\r\n\t\t\tvar p;\r\n\t\t\tif (typeof f==\"function\") {\r\n\t\t\t\tp=Parser.create(function (r1) {\r\n\t\t\t\t\tvar r2=r1.clone();\r\n\t\t\t\t\tr2.result=[ f.apply({}, r1.result) ];\r\n\t\t\t\t\treturn r2;\r\n\t\t\t\t}).setName(\"retfunc\");\r\n\t\t\t} else p=f;\r\n\t\t\tvar res=Parser.create(function(s){ //s:State\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success) return r1;\r\n\t\t\t\treturn p.parse(r1);\r\n\t\t\t\t/*var r2=r1.clone();\r\n\t\t\t\tr2.result=[ f.apply({}, r1.result) ];\r\n\t\t\t\treturn r2;*/\r\n\t\t\t}).setName(\"(\"+this.name+\" >= \"+p.name+\")\");\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tret: function(next) {// Parser.ret:: (Function|Parser)  -> Parser\r\n\t\t\tif (!this._first) return this.retNoUnify(next);\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tvar ntbl={};\r\n\t\t\tfor (var c in tbl) {\r\n\t\t\t\tntbl[c]=tbl[c].retNoUnify(next);\r\n\t\t\t}\r\n\t\t\tconst res=Parser.fromFirst(this._first.space, ntbl);\r\n\t\t\tres.setName(\"(\"+this.name+\" >>= \"+next.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\tconsole.log(\"Created runify name=\" +res.name+\" tbl=\"+$.dispTbl(ntbl));\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\tthis._first={space: space, chars:String};\r\n\t\tthis._first={space: space, tbl:{char:Parser}};\r\n\t*/\r\n\t\tfirst: function (space, ct) {\r\n\t\t\tif (!$.options.optimizeFirst) return this;\r\n\t\t\tif (space==null) throw \"Space is null2!\";\r\n\t\t\tif (typeof ct==\"string\") {\r\n\t\t\t\t\tvar tbl={};\r\n\t\t\t\t\tfor (var i=0; i<ct.length ; i++) {\r\n\t\t\t\t\t\ttbl[ct.substring(i,i+1)]=this;\r\n\t\t\t\t\t}\r\n\t\t\t\t//this._first={space: space, tbl:tbl};\r\n\t\t\t\treturn Parser.fromFirst(space,tbl).setName(\"(fst \"+this.name+\")\");\r\n//        \t\tthis._first={space: space, chars:ct};\r\n\t\t\t} else if (ct==null) {\r\n\t\t\t\treturn Parser.fromFirst(space,{ALL:this}).setName(\"(fst \"+this.name+\")\");\r\n\t\t\t\t//this._first={space:space, tbl:{ALL:this}};\r\n\t\t\t} else if (typeof ct==\"object\") {\r\n\t\t\t\tthrow \"this._first={space: space, tbl:ct}\";\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tfirstTokens: function (tokens) {\r\n\t\t\tif (!$.options.optimizeFirst) return this;\r\n\t\t\tif (typeof tokens==\"string\") tokens=[tokens];\r\n\t\t\tvar tbl={};\r\n\t\t\t\tif (tokens) {\r\n\t\t\t\t\tvar t=this;\r\n\t\t\t\t\ttokens.forEach(function (token) {\r\n\t\t\t\t\ttbl[token]=t;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttbl.ALL=this;\r\n\t\t\t}\r\n\t\t\treturn Parser.fromFirstTokens(tbl).setName(\"(fstT \"+this.name+\")\");\r\n\t\t},\r\n\t\tunifyFirst: function (other) {\r\n\t\t\tvar thiz=this;\r\n\t\t\tfunction or(a,b) {\r\n\t\t\t\tif (!a) return b;\r\n\t\t\t\tif (!b) return a;\r\n\t\t\t\treturn a.orNoUnify(b).checkTbl();\r\n\t\t\t}\r\n\t\t\tvar tbl={}; // tbl.* includes tbl.ALL\r\n\t\t\tthis.checkTbl();\r\n\t\t\tother.checkTbl();\r\n\t\t\tfunction mergeTbl() {\r\n\t\t\t//   {except_ALL: contains_ALL}\r\n\t\t\t\tvar t2=other._first.tbl;\r\n\t\t\t\t//before tbl={ALL:a1, b:b1, c:c1}   t2={ALL:a2,c:c2,d:d2}\r\n\t\t\t\t//       b1 conts a1  c1 conts a1     c2 conts a2   d2 conts a2\r\n\t\t\t\t//after  tbl={ALL:a1|a2 , b:b1|a2    c:c1|c2    d:a1|d2 }\r\n\t\t\t\tvar keys={};\r\n\t\t\t\tfor (let k in tbl) { /*if (d) console.log(\"tbl.k=\"+k);*/ keys[k]=1;}\r\n\t\t\t\tfor (let k in t2)  { /*if (d) console.log(\"t2.k=\"+k);*/ keys[k]=1;}\r\n\t\t\t\tdelete keys.ALL;\r\n\t\t\t\tif (tbl.ALL || t2.ALL) {\r\n\t\t\t\t\ttbl.ALL=or(tbl.ALL, t2.ALL);\r\n\t\t\t\t}\r\n\t\t\t\tfor (let k in keys ) {\r\n\t\t\t\t\t//if (d) console.log(\"k=\"+k);\r\n\t\t\t\t\t//if (tbl[k] && !tbl[k].parse) throw \"tbl[\"+k+\"] = \"+tbl[k];\r\n\t\t\t\t\t//if (t2[k] && !t2[k].parse) throw \"t2[\"+k+\"] = \"+tbl[k];\r\n\t\t\t\t\tif (tbl[k] && t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl[k],t2[k]);\r\n\t\t\t\t\t} else if (tbl[k] && !t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl[k],t2.ALL);\r\n\t\t\t\t\t} else if (!tbl[k] && t2[k]) {\r\n\t\t\t\t\t\ttbl[k]=or(tbl.ALL, t2[k]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\textend(tbl, this._first.tbl);\r\n\t\t\tmergeTbl();\r\n\t\t\tvar res=Parser.fromFirst(this._first.space, tbl).setName(\"(\"+this.name+\")U(\"+other.name+\")\");\r\n\t\t\tif ($.options.verboseFirst) console.log(\"Created unify name=\" +res.name+\" tbl=\"+$.dispTbl(tbl));\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tor: function(other) { // Parser->Parser\r\n\t\t\tnc(other,\"other\");\r\n\t\t\t\tif (this._first && other._first &&\r\n\t\t\t\t\t\tthis._first.space && this._first.space===other._first.space) {\r\n\t\t\t\treturn this.unifyFirst(other);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ($.options.verboseFirst) {\r\n\t\t\t\t\t\tconsole.log(\"Cannot unify\"+this.name+\" || \"+other.name+\" \"+this._first+\" - \"+other._first);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.orNoUnify(other);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\torNoUnify: function (other) {\r\n\t\t\t\tvar t=this;  // t:Parser\r\n\t\t\tvar res=Parser.create(function(s){\r\n\t\t\t\tvar r1=t.parse(s); // r1:State\r\n\t\t\t\tif (!r1.success){\r\n\t\t\t\t\tvar r2=other.parse(s); // r2:State\r\n\t\t\t\t\treturn r2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn r1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tres.name=\"(\"+this.name+\")|(\"+other.name+\")\";\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tsetName: function (n) {\r\n\t\t\tthis.name=n;\r\n\t\t\tif (this._first) {\r\n\t\t\t\t/*var tbl=this._first.tbl;\r\n\t\t\t\tfor (var i in tbl) {\r\n\t\t\t\t\ttbl[i].setName(\"(elm \"+i+\" of \"+n+\")\");\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tprofile: function (name) {\r\n\t\t\tif ($.options.profile) {\r\n\t\t\t\tthis.parse=this.parse.profile(name || this.name);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\trepN: function(min){\r\n\t\t\tvar p=this;\r\n\t\t\tif (!min) min=0;\r\n\t\t\tvar res=Parser.create(function(s) {\r\n\t\t\t\tvar current=s;\r\n\t\t\t\tvar result=[];\r\n\t\t\t\twhile(true){\r\n\t\t\t\t\tvar next=p.parse(current);\r\n\t\t\t\t\tif(!next.success) {\r\n\t\t\t\t\t\tvar res;\r\n\t\t\t\t\t\tif (result.length>=min) {\r\n\t\t\t\t\t\t\tres=current.clone();\r\n\t\t\t\t\t\t\tres.result=[result];\r\n\t\t\t\t\t\t\tres.success=true;\r\n\t\t\t\t\t\t\t//console.log(\"rep0 res=\"+disp(res.result));\r\n\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tres=s.clone();\r\n\t\t\t\t\t\t\tres.success=false;\r\n\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.push(next.result[0]);\r\n\t\t\t\t\t\tcurrent=next;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//if (min>0) res._first=p._first;\r\n\t\t\treturn res.setName(\"(\"+p.name+\" * \"+min+\")\");\r\n\t\t},\r\n\t\trep0: function () { return this.repN(0); },\r\n\t\trep1: function () { return this.repN(1); },\r\n\t\topt: function () {\r\n\t\t\tvar t=this;\r\n\t\t\treturn Parser.create(function (s) {\r\n\t\t\t\tvar r=t.parse(s);\r\n\t\t\t\tif (r.success) {\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts=s.clone();\r\n\t\t\t\t\ts.success=true;\r\n\t\t\t\t\ts.result=[null];\r\n\t\t\t\t\treturn s;\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"(\"+t.name+\")?\");\r\n\t\t},\r\n\t\tsep1: function(sep, valuesToArray) {\r\n\t\t\tvar value=this;\r\n\t\t\tnc(value,\"value\");nc(sep,\"sep\");\r\n\t\t\tvar tail=sep.and(value).ret(function(r1, r2) {\r\n\t\t\t\tif(valuesToArray) return r2;\r\n\t\t\t\treturn {sep:r1, value:r2};\r\n\t\t\t});\r\n\t\t\treturn value.and(tail.rep0()).ret(function(r1, r2){\r\n\t\t\t\tvar i;\r\n\t\t\t\tif (valuesToArray) {\r\n\t\t\t\t\tvar r=[r1];\r\n\t\t\t\t\t\tfor (i in r2) {\r\n\t\t\t\t\t\t\tr.push(r2[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {head:r1,tails:r2};\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"(sep1 \"+value.name+\"~~\"+sep.name+\")\");\r\n\t\t},\r\n\t\tsep0: function(s){\r\n\t\t\treturn this.sep1(s,true).opt().ret(function (r) {\r\n\t\t\t\tif (!r) return [];\r\n\t\t\t\treturn r;\r\n\t\t\t});\r\n\t\t},\r\n\t\ttap: function (msg) {\r\n\t\t\treturn this;\r\n\t\t\t/*if (!$.options.traceTap) return this;\r\n\t\t\tif (!msg) msg=\"\";\r\n\t\t\tvar t=this;\r\n\t\t\tvar res=Parser.create(function(s){\r\n\t\t\t\tconsole.log(\"tap:\"+msg+\" name:\"+t.name+\"  pos=\"+(s?s.pos:\"?\"));\r\n\t\t\t\tvar r=t.parse(s);\r\n\t\t\t\tvar img=r.src.str.substring(r.pos-3,r.pos)+\"^\"+r.src.str.substring(r.pos,r.pos+3);\r\n\t\t\t\tconsole.log(\"/tap:\"+msg+\" name:\"+t.name+\" pos=\"+(s?s.pos:\"?\")+\"->\"+(r?r.pos:\"?\")+\" \"+img+\" res=\"+(r?r.success:\"?\"));\r\n\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\treturn res.setName(\"(Tap \"+t.name+\")\");*/\r\n\t\t},\r\n\t\tretN: function (i) {\r\n\t\t\treturn this.ret(function () {\r\n\t\t\t\treturn arguments[i];\r\n\t\t\t});\r\n\t\t},\r\n\t\tparseStr: function (str,global) {\r\n\t\t\tvar st=new State(str,global);\r\n\t\t\treturn this.parse(st);\r\n\t\t},\r\n\t\tcheckTbl: function () {\r\n\t\t\tif (!this._first) return this;\r\n\t\t\tvar tbl=this._first.tbl;\r\n\t\t\tfor (var k in tbl) {\r\n\t\t\t\tif (!tbl[k].parse) throw this.name+\": tbl.\"+k+\" is not a parser :\"+tbl[k];\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\t});\r\n\tfunction State(strOrTokens, global) { // class State\r\n\t\tif (strOrTokens!=null) {\r\n\t\t\tthis.src={maxPos:0, global:global};// maxPos is shared by all state\r\n\t\t\tif (typeof strOrTokens==\"string\") {\r\n\t\t\t\tthis.src.str=strOrTokens;\r\n\t\t\t}\r\n\t\t\tif (strOrTokens instanceof Array) {\r\n\t\t\t\tthis.src.tokens=strOrTokens;\r\n\t\t\t}\r\n\t\t\tthis.pos=0;\r\n\t\t\tthis.result=[];\r\n\t\t\tthis.success=true;\r\n\t\t}\r\n\t}\r\n\textend(State.prototype, {\r\n\t\tclone: function() {\r\n\t\t\tvar s=new State();\r\n\t\t\ts.src=this.src;\r\n\t\t\ts.pos=this.pos;\r\n\t\t\ts.result=this.result.slice();\r\n\t\t\ts.success=this.success;\r\n\t\t\treturn s;\r\n\t\t},\r\n\t\tupdateMaxPos:function (npos) {\r\n\t\t\tif (npos > this.src.maxPos) {\r\n\t\t\t\tthis.src.maxPos=npos;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisSuccess: function () {\r\n\t\t\treturn this.success;\r\n\t\t},\r\n\t\tgetGlobal: function () {\r\n\t\t\t\tif (!this.src.global) this.src.global={};\r\n\t\t\t\treturn this.src.global;\r\n\t\t}\r\n\t});\r\n\tParser.fromFirst=function (space, tbl) {\r\n\t\tif (space==\"TOKEN\") {\r\n\t\t\treturn Parser.fromFirstTokens(tbl);\r\n\t\t}\r\n\t\tvar res=Parser.create(function (s0) {\r\n\t\t\tvar s=space.parse(s0);\r\n\t\t\tvar f=s.src.str.substring(s.pos,s.pos+1);\r\n\t\t\tif ($.options.traceFirstTbl) {\r\n\t\t\t\tconsole.log(this.name+\": first=\"+f+\" tbl=\"+( tbl[f]?tbl[f].name:\"-\") );\r\n\t\t\t}\r\n\t\t\tif (tbl[f]) {\r\n\t\t\t\treturn tbl[f].parse(s);\r\n\t\t\t}\r\n\t\t\tif (tbl.ALL) return tbl.ALL.parse(s);\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t});\r\n\t\tres._first={space:space,tbl:tbl};\r\n\t\tres.checkTbl();\r\n\t\treturn res;\r\n\t};\r\n\tParser.fromFirstTokens=function (tbl) {\r\n\t\tvar res=Parser.create(function (s) {\r\n\t\t\tvar t=s.src.tokens[s.pos];\r\n\t\t\tvar f=t?t.type:null;\r\n\t\t\tif ($.options.traceFirstTbl) {\r\n\t\t\t\tconsole.log(this.name+\": firstT=\"+f+\" tbl=\"+( tbl[f]?tbl[f].name:\"-\") );\r\n\t\t\t}\r\n\t\t\tif (f!=null && tbl[f]) {\r\n\t\t\t\treturn tbl[f].parse(s);\r\n\t\t\t}\r\n\t\t\tif (tbl.ALL) return tbl.ALL.parse(s);\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t});\r\n\t\tres._first={space:\"TOKEN\",tbl:tbl};\r\n\t\tres.checkTbl();\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar StringParser={\r\n\t\tempty: Parser.create(function(state) {\r\n\t\t\tvar res=state.clone();\r\n\t\t\tres.success=true;\r\n\t\t\tres.result=[null]; //{length:0, isEmpty:true}];\r\n\t\t\treturn res;\r\n\t\t}).setName(\"E\"),\r\n\t\tfail: Parser.create(function(s){\r\n\t\t\ts.success=false;\r\n\t\t\treturn s;\r\n\t\t}).setName(\"F\"),\r\n\t\tstr: function (st) { // st:String\r\n\t\t\treturn this.strLike(function (str,pos) {\r\n\t\t\t\tif (str.substring(pos, pos+st.length)===st) return {len:st.length};\r\n\t\t\t\treturn null;\r\n\t\t\t}).setName(st);\r\n\t\t},\r\n\t\treg: function (r) {//r: regex (must have ^ at the head)\r\n\t\t\tif (!(r+\"\").match(/^\\/\\^/)) console.log(\"Waring regex should have ^ at the head:\"+(r+\"\"));\r\n\t\t\treturn this.strLike(function (str,pos) {\r\n\t\t\t\tvar res=r.exec( str.substring(pos) );\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tres.len=res[0].length;\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}).setName(r+\"\");\r\n\t\t},\r\n\t\tstrLike: function (func) {\r\n\t\t\t// func :: str,pos, state? -> {len:int, other...}  (null for no match )\r\n\t\t\treturn Parser.create(function(state){\r\n\t\t\t\tvar str= state.src.str;\r\n\t\t\t\tif (str==null) throw \"strLike: str is null!\";\r\n\t\t\t\tvar spos=state.pos;\r\n\t\t\t\t//console.log(\" strlike: \"+str+\" pos:\"+spos);\r\n\t\t\t\tvar r1=func(str, spos, state);\r\n\t\t\t\tif ($.options.traceToken) console.log(\"pos=\"+spos+\" r=\"+r1);\r\n\t\t\t\tif(r1) {\r\n\t\t\t\t\tif ($.options.traceToken) console.log(\"str:succ\");\r\n\t\t\t\t\tr1.pos=spos;\r\n\t\t\t\t\tr1.src=state.src; // insert 2013/05/01\r\n\t\t\t\t\tvar ns=state.clone();\r\n\t\t\t\t\textend(ns, {pos:spos+r1.len, success:true, result:[r1]});\r\n\t\t\t\t\tstate.updateMaxPos(ns.pos);\r\n\t\t\t\t\treturn ns;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif ($.options.traceToken) console.log(\"str:fail\");\r\n\t\t\t\t\tstate.success=false;\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t}\r\n\t\t\t}).setName(\"STRLIKE\");\r\n\t\t},\r\n\t\tparse: function (parser, str,global) {\r\n\t\t\tvar st=new State(str,global);\r\n\t\t\treturn parser.parse(st);\r\n\t\t}\r\n\t};\r\n\t//  why not eof: ? because StringParser.strLike\r\n\tStringParser.eof=StringParser.strLike(function (str,pos) {\r\n\t\tif (pos==str.length) return {len:0};\r\n\t\treturn null;\r\n\t}).setName(\"EOF\");\r\n\t$.StringParser=StringParser;\r\n\tvar TokensParser={\r\n\t\ttoken: function (type) {\r\n\t\t\treturn Parser.create(function (s) {\r\n\t\t\t\tvar t=s.src.tokens[s.pos];\r\n\t\t\t\ts.success=false;\r\n\t\t\t\tif (!t) return s;\r\n\t\t\t\tif (t.type==type) {\r\n\t\t\t\t\ts=s.clone();\r\n\t\t\t\t\ts.updateMaxPos(s.pos);\r\n\t\t\t\ts.pos++;\r\n\t\t\t\t\ts.success=true;\r\n\t\t\t\t\ts.result=[t];\r\n\t\t\t\t}\r\n\t\t\t\treturn s;\r\n\t\t\t}).setName(type).firstTokens(type);\r\n\t\t},\r\n\t\tparse:function (parser, tokens, global) {\r\n\t\t\tvar st=new State(tokens,global);\r\n\t\t\treturn parser.parse(st);\r\n\t\t},\r\n\t\teof: Parser.create(function (s) {\r\n\t\t\tvar suc=(s.pos>=s.src.tokens.length);\r\n\t\t\ts.success=suc;\r\n\t\t\tif (suc) {\r\n\t\t\t\ts=s.clone();\r\n\t\t\t\ts.result=[{type:\"EOF\"}];\r\n\t\t\t}\r\n\t\t\treturn s;\r\n\t\t}).setName(\"EOT\")\r\n\t};\r\n\t$.TokensParser=TokensParser;\r\n\t$.lazy=function (pf) { //   ( ()->Parser ) ->Parser\r\n\t\tvar p=null;\r\n\t\treturn Parser.create(function (st) {\r\n\t\t\tif (!p) p=pf();\r\n\t\t\tif (!p) throw pf+\" returned null!\";\r\n\t\t\tthis.name=pf.name;\r\n\t\t\treturn p.parse(st);\r\n\t\t}).setName(\"LZ\");\r\n\t};\r\n\t$.addRange=function(res, newr) {\r\n\t\tif (newr==null) return res;\r\n\t\tif (typeof (res.pos)!=\"number\") {\r\n\t\t\tres.pos=newr.pos;\r\n\t\t\tres.len=newr.len;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\tvar newEnd=newr.pos+newr.len;\r\n\t\tvar curEnd=res.pos+res.len;\r\n\t\tif (newr.pos<res.pos) res.pos=newr.pos;\r\n\t\tif (newEnd>curEnd) res.len= newEnd-res.pos;\r\n\t\treturn res;\r\n\t};\r\n\t$.setRange=function (res) {\r\n\t\tif (res==null || typeof res==\"string\" || typeof res==\"number\" || typeof res==\"boolean\") return;\r\n\t\tvar exRange=$.getRange(res);\r\n\t\tif (exRange!=null) return res;\r\n\t\tfor (var i in res) {\r\n\t\t\tif (!res.hasOwnProperty(i)) continue;\r\n\t\t\tvar range=$.setRange(res[i]);\r\n\t\t\t$.addRange(res,range);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\t$.getRange=function(e) {\r\n\t\tif (e==null) return null;\r\n\t\tif (typeof e.pos!=\"number\") return null;\r\n\t\tif (typeof e.len==\"number\") return e;\r\n\t\treturn null;\r\n\t};\r\n\treturn $;\r\n}();\r\n});\r\n\ndefine('tonyu2_token',['require','exports','module','parser'],function(require,exports,module) {//used by fixIndent\r\nconst Parser=require(\"parser\");\r\n\r\nmodule.exports=function () {\r\n\tfunction profileTbl(parser, name) {\r\n\t\tvar tbl=parser._first.tbl;\r\n\t\tfor (var c in tbl) {\r\n\t\t\ttbl[c].profile();//(c+\" of \"+tbl[name);\r\n\t\t}\r\n\t}\r\n\r\n\tvar sp=Parser.StringParser;\r\n\tvar SAMENAME=\"SAMENAME\";\r\n\tvar DIV=1,REG=2;\r\n\tvar space=sp.reg(/^(\\s*(\\/\\*\\/?([^\\/]|[^*]\\/|\\r|\\n)*\\*\\/)*(\\/\\/.*\\r?\\n)*)*/).setName(\"space\");\r\n\tfunction tk(r, name) {\r\n\t\tvar pat;\r\n\t\tvar fst;\r\n\t\tif (typeof r==\"string\") {\r\n\t\t\tpat=sp.str(r);\r\n\t\t\tif (r.length>0) fst=r.substring(0,1);\r\n\t\t\tif (!name) name=r;\r\n\t\t} else {\r\n\t\t\tpat=sp.reg(r);\r\n\t\t\tif (!name) name=r+\"\";\r\n\t\t}\r\n\t\tvar res=space.and(pat).ret(function(a, b) {\r\n\t\t\tvar res={};\r\n\t\t\tres.pos=b.pos;\r\n\t\t\tif (typeof res.pos!=\"number\") throw \"no pos for \"+name+\" \";//+disp(b);\r\n\t\t\tres.len=b.len;\r\n\t\t\tres.text=b.src.str.substring(res.pos, res.pos+res.len);\r\n\t\t\tif (typeof res.text!=\"string\") throw \"no text(\"+res.text+\") for \"+name+\" \";//+disp(b);\r\n\t\t\tres.toString=function (){\r\n\t\t\t\treturn this.text;\r\n\t\t\t};\r\n\t\t\tres.isToken=true;\r\n\t\t\treturn res;\r\n\t\t});\r\n\t\tif (fst) res=res.first(space, fst);\r\n\t\treturn res.setName(name);//.profile();\r\n\t}\r\n\tvar parsers={},posts={};\r\n\tfunction dtk2(prev, name, parser, post) {\r\n\t\t//console.log(\"2reg=\"+prev+\" name=\"+name);\r\n\t\tif (typeof parser==\"string\") parser=tk(parser);\r\n\t\tparsers[prev]=or(parsers[prev], parser.ret(function (res) {\r\n\t\t\tres.type=name;\r\n\t\t\treturn res;\r\n\t\t}).setName(name) );\r\n\t}\r\n\tfunction dtk(prev, name, parser, post) {\r\n\t\tif(name==SAMENAME) name=parser;\r\n\t\tfor (var m=1; m<=prev; m*=2) {\r\n\t\t\t//prev=1  -> m=1\r\n\t\t\t//prev=2  -> m=1x,2\r\n\t\t\t//XXprev=3  -> m=1,2,3\r\n\t\t\tif ((prev&m)!=0) dtk2(prev&m, name,parser,post);\r\n\t\t}\r\n\t\tposts[name]=post;\r\n\t}\r\n\tfunction or(a,b){\r\n\t\tif (!a) return b;\r\n\t\treturn a.or(b);\r\n\t}\r\n\r\n\tvar all=Parser.create(function (st) {\r\n\t\tvar mode=REG;\r\n\t\tvar res=[];\r\n\t\twhile (true) {\r\n\t\t\tst=parsers[mode].parse(st);\r\n\t\t\tif (!st.success) break;\r\n\t\t\tvar e=st.result[0];\r\n\t\t\tmode=posts[e.type];\r\n\t\t\tres.push(e);\r\n\t\t}\r\n\t\tst=space.parse(st);\r\n\t\t//console.log(st.src.maxPos+\"==\"+st.src.str.length)\r\n\t\tst.success=st.src.maxPos==st.src.str.length;\r\n\t\tst.result[0]=res;\r\n\t\treturn st;\r\n\t});\r\n\tvar reserved={\"function\":true, \"var\":true , \"return\":true, \"typeof\": true, \"if\":true,\r\n\t\t\t\"__typeof\": true,\r\n\t\t\t\"for\":true,\r\n\t\t\t\"else\": true,\r\n\t\t\t\"super\": true,\r\n\t\t\t\"while\":true,\r\n\t\t\t\"continue\":true,\r\n\t\t\t\"break\":true,\r\n\t\t\t\"do\":true,\r\n\t\t\t\"switch\":true,\r\n\t\t\t\"case\":true,\r\n\t\t\t\"default\":true,\r\n\t\t\t\"try\": true,\r\n\t\t\t\"catch\": true,\r\n\t\t\t\"finally\": true,\r\n\t\t\t\"throw\": true,\r\n\t\t\t\"of\": true,\r\n\t\t\t\"in\": true,\r\n\t\t\tfiber:true,\r\n\t\t\t\"native\": true,\r\n\t\t\t\"instanceof\":true,\r\n\t\t\t\"new\": true,\r\n\t\t\t\"is\": true,\r\n\t\t\t\"true\": true,\r\n\t\t\t\"false\": true,\r\n\t\t\t\"null\":true,\r\n\t\t\t\"this\":true,\r\n\t\t\t\"undefined\": true,\r\n\t\t\t\"usethread\": true,\r\n\t\t\t\"constructor\": true,\r\n\t\t\tifwait:true,\r\n\t\t\tnowait:true,\r\n\t\t\t_thread:true,\r\n\t\t\targuments:true,\r\n\t\t\t\"delete\": true,\r\n\t\t\t\"extends\":true,\r\n\t\t\t\"includes\":true\r\n\t};\r\n\r\n\tvar num=tk(/^[0-9][xb]?[0-9a-f\\.]*/i).ret(function (n) {\r\n\t\tn.type=\"number\";\r\n\t\tn.value=n.text-0;//parseInt(n.text);\r\n\t\treturn n;\r\n\t}).first(space,\"0123456789\");\r\n\tvar literal=tk({exec: function (s) {\r\n\t\tvar head=s.substring(0,1);\r\n\t\tif (head!=='\"' && head!==\"'\") return false;\r\n\t\tfor (var i=1 ;i<s.length ; i++) {\r\n\t\t\tvar c=s.substring(i,i+1);\r\n\t\t\tif (c===head) {\r\n\t\t\t\treturn [s.substring(0,i+1)];\r\n\t\t\t} else if (c===\"\\\\\") {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},toString:function(){return\"literal\";}\r\n\t}).first(space,\"\\\"'\");\r\n\tvar regex=tk({exec: function (s) {\r\n\t\tif (s.substring(0,1)!=='/') return false;\r\n\t\tfor (var i=1 ;i<s.length ; i++) {\r\n\t\t\tvar c=s.substring(i,i+1);\r\n\t\t\tif (c==='/') {\r\n\t\t\t\tvar r=/^[ig]*/.exec( s.substring(i+1) );\r\n\t\t\t\treturn [s.substring(0,i+1+r[0].length)];\r\n\t\t\t} else if (c==\"\\n\") {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (c===\"\\\\\") {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},toString:function(){return\"regex\";}\r\n\t}).first(space,\"/\");\r\n\r\n\tdtk(REG|DIV, \"number\", num,DIV );\r\n\tdtk(REG,  \"regex\" ,regex,DIV );\r\n\tdtk(REG|DIV,  \"literal\" ,literal,DIV );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"++\",DIV );\r\n\tdtk(REG|DIV,SAMENAME ,\"--\",DIV );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"!==\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"===\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">>>\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"+=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"-=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"*=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"/=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"%=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"!=\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"==\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\">>\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<<\",REG );\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"&&\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"||\",REG );\r\n\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"(\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\")\",DIV );\r\n\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"[\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"]\",DIV );  // a[i]/3\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\"{\",REG );\r\n\t//dtk(REG|DIV,SAMENAME ,\"}\",REG );  // if () { .. }  /[a-z]/.exec()\r\n\tdtk(REG|DIV,SAMENAME ,\"}\",DIV ); //in tonyu:  a{x:5}/3\r\n\r\n\tdtk(REG|DIV,SAMENAME ,\">\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"<\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"^\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"+\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"-\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\".\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"?\",REG );\r\n\r\n\tdtk(REG|DIV, SAMENAME ,\"=\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\"*\",REG );\r\n\tdtk(REG|DIV, SAMENAME ,\"%\",REG );\r\n\tdtk(DIV, SAMENAME ,\"/\",REG );\r\n\r\n\tdtk(DIV|REG, SAMENAME ,\"^\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\"~\",REG );\r\n\r\n\tdtk(DIV|REG, SAMENAME ,\"\\\\\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\":\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\";\",REG );\r\n\tdtk(DIV|REG, SAMENAME ,\",\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"!\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"&\",REG );\r\n\tdtk(REG|DIV,SAMENAME ,\"|\",REG );\r\n\r\n\tvar symresv=tk(/^[a-zA-Z_$][a-zA-Z0-9_$]*/,\"symresv_reg\").ret(function (s) {\r\n\ts.type=(s.text==\"constructor\" ? \"tk_constructor\" :\r\n\t\treserved.hasOwnProperty(s.text) ? s.text : \"symbol\");\r\n\treturn s;\r\n\t}).first(space);\r\n\tfor (var n in reserved) {\r\n\t\tposts[n]=REG;\r\n\t}\r\n\tposts.tk_constructor=REG;\r\n\tposts.symbol=DIV;\r\n\tparsers[REG]=or(parsers[REG],symresv);\r\n\tparsers[DIV]=or(parsers[DIV],symresv);\r\n\r\n\tfunction parse(str) {\r\n\t\tvar res=Parser.StringParser.parse(all, str);\r\n\t\tif (res.success) {\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Stopped at \"+str.substring( res.src.maxPos-5, res.src.maxPos+5));\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\treturn {parse:parse, extension:\"js\",reserved:reserved};\r\n}();\r\n});\r\n\ndefine('IndentFixer',['require','exports','module'],function(require,exports,module) {\r\nmodule.exports=class IndentFixer {\r\n    constructor(t) {\r\n        this.tokenizer=t;\r\n    }\r\n    fix(str,indentStr=\"    \") {\r\n    \t//const incdec={\"{\":1, \"}\":-1};\r\n    \tconst linfo=[];// [\"{{}}\",\"{\",\"}\"...]\r\n        let tokens;\r\n    \ttry {\r\n    \t\tconst tokenRes=this.tokenizer.parse(str);\r\n    \t\ttokens=tokenRes;//.result[0];\r\n    \t\ttokens.forEach(token=>{\r\n                linfo[token.row]=linfo[token.row]||\"\";\r\n    \t\t\tif (this.tokenizer.isOpen(token) ) {\r\n    \t\t\t\tlinfo[token.row]+=\"{\";\r\n    \t\t\t}\r\n                if (this.tokenizer.isClose(token) ) {\r\n    \t\t\t\tlinfo[token.row]+=\"}\";\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}catch(e) {\r\n    \t\tconsole.log(\"ERR\",e);\r\n    \t}\r\n    \t//console.log(linfo);//Edge fails with error 'Could not complete the operation due to error 80020101.'\r\n        //Issue: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/23660690/\r\n    \tconst lines=str.split(\"\\n\");\r\n    \tlet curDepth=0;\r\n    \tlet row=0;\r\n        const depths=[];\r\n    \tlines.forEach((line,i)=>{\r\n    \t\tlet opens=0, closes=0;\r\n    \t\tline=line.replace(/^\\s*/,\"\");\r\n    \t\tif (linfo[row]!=null) {\r\n    \t\t\tlinfo[row].match(/^(\\}*)/);\r\n    \t\t\tcloses=RegExp.$1.length;\r\n    \t\t\tlinfo[row].match(/(\\{*)$/);\r\n    \t\t\topens=RegExp.$1.length;\r\n    \t\t}\r\n    \t\tcurDepth-=closes;\r\n            depths[row]=curDepth;\r\n    \t\tcurDepth+=opens;\r\n    \t\trow++;\r\n    \t});\r\n        row=-1;\r\n        const changeDepths=[];\r\n        for (let token of tokens) {\r\n            if (token.row>row) {\r\n                changeDepths[row]=depths[row];\r\n                row=token.row;\r\n            }\r\n        }\r\n        //console.log(depths, changeDepths);\r\n        return lines.map ((line,row)=>indStr(line, changeDepths[row])).join(\"\\n\");\r\n    \tfunction indStr(line, depth) {\r\n            if (typeof depth!==\"number\") return line;\r\n    \t\tlet res=\"\";\r\n    \t\tfor (let i=0 ;i<depth ;i++) {\r\n    \t\t\tres+=indentStr;\r\n    \t\t}\r\n    \t\treturn res+line.replace(/^\\s*/,\"\");\r\n    \t}\r\n    }\r\n};\r\n});\r\n\ndefine('fixIndent',['require','exports','module','tonyu2_token','IndentFixer'],function(require,exports,module) {\r\nconst TT=require(\"tonyu2_token\");\r\nconst IndentFixer=require(\"IndentFixer\");\r\nconst f=new IndentFixer({\r\n\tparse(str) {\r\n\t\ttry {\r\n\t\t\tconst tokenRes=TT.parse(str);\r\n\t\t\tconst tokens=tokenRes.result[0];\r\n\t\t\t//console.log(tokens);\r\n\t\t\tconst p2r=new Pos2RC(str);\r\n\t\t\treturn tokens.map(t=>Object.assign(t,p2r.get(t.pos)));\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t},\r\n\tisOpen(token) {return token.type===\"{\";},\r\n\tisClose(token) {return token.type===\"}\";}\r\n});\r\n\r\nmodule.exports=function (str,indentStr) {\r\n\treturn f.fix(str,indentStr);\r\n};\r\nclass Pos2RC{\r\n\tconstructor(str) {\r\n\t\tthis.str=str;\r\n\t\tthis.row=0;\r\n\t\tthis.col=0;\r\n\t\tthis.lastPos=0;\r\n\t}\r\n\tget(pos) {\r\n\t\tif (this.lastPos>pos) throw new Error(\"tokens Must be ordered.\");\r\n\t\tconst proc=this.str.substring(this.lastPos,pos);\r\n\t\tconst lines=proc.split(\"\\n\");\r\n\t\tconst lastLine=lines.pop();\r\n\t\tif (lines.length===0) this.col+=lastLine.length;\r\n\t\telse {\r\n\t\t\tthis.row+=lines.length;\r\n\t\t\tthis.col=lastLine.length;\r\n\t\t}\r\n\t\tthis.lastPos=pos;\r\n\t\treturn {row:this.row, col:this.col};\r\n\t}\r\n}\r\n/*\r\nfunction pos2RC(str, pos) {\r\n\tvar res={row:0, col:0};\r\n\tvar len=Math.min(str.length,pos);\r\n\tfor (var i=0 ; i<len ;i++) {\r\n\t\tif (str.substring(i,i+1)==\"\\n\") {\r\n\t\t\tres.row++;\r\n\t\t\tres.col=0;\r\n\t\t} else {\r\n\t\t\tres.col++;\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n}*/\r\n/*module.exports=function fixIndent(str, indentStr) {\r\n\tif (!indentStr) indentStr=\"    \";\r\n\tvar incdec={\"{\":1, \"}\":-1};\r\n\tvar linfo=[];\r\n\ttry {\r\n\t\tthrow \"koware\";\r\n\t\tvar tokenRes=TT.parse(str);\r\n\t\tvar tokens=tokenRes.result[0];\r\n\t\ttokens.forEach(function (token) {\r\n\t\t\tif (incdec[token.type]) {\r\n\t\t\t\tif (!linfo[token.row]) linfo[token.row]=\"\";\r\n\t\t\t\tlinfo[token.row]+=token.type;\r\n\t\t\t}\r\n\t\t});\r\n\t}catch(e) {\r\n\t\tvar r={row:0, col:0};\r\n\t\tvar len=str.length;\r\n\t\tfor (var i=0 ; i<len ;i++) {\r\n\t\t\tvar c=str.substring(i,i+1);\r\n\t\t\tif (incdec[c]) {\r\n\t\t\t\tif (!linfo[r.row]) linfo[r.row]=\"\";\r\n\t\t\t\tlinfo[r.row]+=c;\r\n\t\t\t} else if (c==\"\\n\") {\r\n\t\t\t\tr.row++;\r\n\t\t\t\tr.col=0;\r\n\t\t\t} else {\r\n\t\t\t\tr.col++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//console.log(linfo);\r\n\tvar res=\"\";\r\n\tvar lines=str.split(\"\\n\");\r\n\tvar curDepth=0;\r\n\tvar row=0;\r\n\tlines.forEach(function (line) {\r\n\t\tvar opens=0, closes=0;\r\n\t\tline=line.replace(/^\\s* ?/,\"\");\r\n\t\tif (linfo[row]!=null) {\r\n\t\t\tlinfo[row].match(/^(\\}*)/);\r\n\t\t\tcloses=RegExp.$1.length;\r\n\t\t\tlinfo[row].match(/(\\{*)$/);\r\n\t\t\topens=RegExp.$1.length;\r\n\t\t}\r\n\t\tcurDepth-=closes;\r\n\t\tline=indStr()+line;\r\n\t\tcurDepth+=opens;\r\n\t\tres+=line+\"\\n\";\r\n\t\trow++;\r\n\t});\r\n\tres=res.replace(/\\n$/,\"\");\r\n\t//console.log(res);\r\n\treturn res;\r\n\tfunction indStr() {\r\n\t\tvar res=\"\";\r\n\t\tfor (var i=0 ;i<curDepth ;i++) {\r\n\t\t\tres+=indentStr;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\tfunction pos2RC(str, pos) {\r\n\t\tvar res={row:0, col:0};\r\n\t\tvar len=Math.min(str.length,pos);\r\n\t\tfor (var i=0 ; i<len ;i++) {\r\n\t\t\tif (str.substring(i,i+1)==\"\\n\") {\r\n\t\t\t\tres.row++;\r\n\t\t\t\tres.col=0;\r\n\t\t\t} else {\r\n\t\t\t\tres.col++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n};*/\r\n});\r\n\ndefine('assert',[\"FS\"],function (FS){return FS.assert;});\r\n\ndefine('Klass',[\"assert\"],function (A) {\r\n    var Klass={};\r\n    Klass.define=function (pd) {\r\n        var p,parent;\r\n        if (pd.$parent) {\r\n            parent=pd.$parent;\r\n            p=Object.create(parent.prototype);\r\n            p.super=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                var n=a.shift();\r\n                return parent.prototype[n].apply(this,a);\r\n            };\r\n        } else {\r\n            p={};\r\n        }\r\n        var thisName,singletonName;\r\n        if (pd.$this) {\r\n            thisName=pd.$this;\r\n        }\r\n        if (pd.$singleton) {\r\n            singletonName=pd.$singleton;\r\n        }\r\n        var init=wrap(pd.$) || function (e) {\r\n            if (e && typeof e==\"object\") {\r\n                for (var k in e) {\r\n                    this[k]=e[k];\r\n                }\r\n            }\r\n        };\r\n        var fldinit;\r\n        var warn,wrapped,wrapCancelled;\r\n        //var check;\r\n        if (init instanceof Array) {\r\n            fldinit=init;\r\n            init=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                for (var i=0;i<fldinit.length;i++) {\r\n                    if (a.length>0) this[fldinit[i]]=a.shift();\r\n                }\r\n            };\r\n        }\r\n        var klass;\r\n        function checkSchema(self) {\r\n            if (pd.$fields) {\r\n                //console.log(\"Checking schema\",self,pd.$fields);\r\n                A.is(self,pd.$fields);\r\n            }\r\n        }\r\n        klass=function () {\r\n            if (! (this instanceof klass)) {\r\n                var res=Object.create(p);\r\n                init.apply(res,arguments);\r\n                checkSchema(res);\r\n                return res;\r\n            }\r\n            init.apply(this,arguments);\r\n            checkSchema(this);\r\n        };\r\n        if (parent) {\r\n            klass.super=function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                var t=a.shift();\r\n                var n=a.shift();\r\n                return parent.prototype[n].apply(t,a);\r\n            };\r\n        }\r\n        klass.inherit=function (pd) {\r\n            pd.$parent=klass;\r\n            return Klass.define(pd);\r\n        };\r\n        klass.prototype=p;\r\n        for (var name in pd) {\r\n            if (name[0]==\"$\") continue;\r\n            if (name.substring(0,7)==\"static$\") {\r\n                klass[name.substring(7)]=wrapStatic(pd[name]);\r\n            } else {\r\n                if (isPropDesc(pd[name])) {\r\n                    Object.defineProperty(p,name,wrap(pd[name]));\r\n                } else {\r\n                    p[name]=wrap(pd[name]);\r\n                }\r\n            }\r\n        }\r\n        function wrapStatic(m) {\r\n            if (!singletonName) return m;\r\n            var args=getArgs(m);\r\n            if (args[0]!==singletonName) return m;\r\n            return (function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                a.unshift(klass);\r\n                return m.apply(klass,a);\r\n            });\r\n        }\r\n        function wrap(m) {\r\n            if (!thisName) return m;\r\n            if (isPropDesc(m)) {\r\n                for (var k in m) {\r\n                    m[k]=wrap(m[k]);\r\n                }\r\n                return m;\r\n            }\r\n            if (typeof m!==\"function\") return m;\r\n            if (thisName!==true) {\r\n                var args=getArgs(m);\r\n                if (args[0]!==thisName) {\r\n                    wrapCancelled=true;\r\n                    return m;\r\n                }\r\n                warn=true;\r\n            }\r\n            wrapped=true;\r\n            return (function () {\r\n                var a=Array.prototype.slice.call(arguments);\r\n                a.unshift(this);\r\n                return m.apply(this,a);\r\n            });\r\n        }\r\n        p.$=init;\r\n        Object.defineProperty(p,\"$bind\",{\r\n            get: function () {\r\n                if (!this.__bounded) {\r\n                    this.__bounded=new Klass.Binder(this);\r\n                }\r\n                return this.__bounded;\r\n            }\r\n        });\r\n        if (warn) {\r\n            //console.warn(\"This declaration style may malfunction when minified\");\r\n            if (!wrapCancelled) {\r\n                console.warn(\"Use $this:true instead\");\r\n            } else {\r\n                console.warn(\"Use python style in all methods and Use $this:true instead\");\r\n            }\r\n            try{throw new Error(\"Trace\");}\r\n            catch(e) {console.log(e.stack);}\r\n        }\r\n        return klass;\r\n    };\r\n    function getArgs(f) {\r\n        var fpat=/function[^\\(]*\\(([^\\)]*)\\)/;\r\n        var r=fpat.exec(f+\"\");\r\n        if (r) {\r\n            return r[1].replace(/\\s/g,\"\").split(\",\");\r\n        }\r\n        return [];\r\n    }\r\n    function isPropDesc(o) {\r\n        if (typeof o!==\"object\") return false;\r\n        if (!o) return false;\r\n        var pk={configurable:1,enumerable:1,value:1,writable:1,get:1,set:1};\r\n        var c=0;\r\n        for (var k in o) {\r\n            if (!pk[k]) return false;\r\n            c+=pk[k];\r\n        }\r\n        return c;\r\n    }\r\n    Klass.Function=function () {throw new Error(\"Abstract\");};\r\n    Klass.opt=A.opt;\r\n    Klass.Binder=Klass.define({\r\n        $this:true,\r\n        $:function (t,target) {\r\n            function addMethod(k){\r\n                if (typeof target[k]!==\"function\") return;\r\n                t[k]=function () {\r\n                    var a=Array.prototype.slice.call(arguments);\r\n                    //console.log(this, this.__target);\r\n                    //A(this.__target,\"target is not set\");\r\n                    return target[k].apply(target,a);\r\n                };\r\n            }\r\n            for (var k in target) addMethod(k);\r\n        }\r\n    });\r\n    return Klass;\r\n});\r\n/*\r\nrequirejs([\"Klass\"],function (k) {\r\n  P=k.define ({\r\n     $:[\"x\",\"y\"]\r\n  });\r\n  p=P(2,3);\r\n  console.log(p.x,p.y);\r\n});\r\n*/\r\n;\ndefine('GlobalDialog',[\"UI\",\"Klass\"], function (UI,Klass) {\r\n    GlobalDialog=Klass.define({\r\n        $this:true,\r\n        $:[\"prj\"],\r\n        show: function (t,options) {\r\n            t.opt=t.prj.getOptions();\r\n            t.createDOM();\r\n            t.load();\r\n            t.dom.dialog({width:800,height:500});\r\n        },\r\n        load: function (t) {\r\n            if (!t.opt.run) t.opt.run={};\r\n            if (!t.opt.run.globals) t.opt.run.globals={};\r\n            var g=t.opt.run.globals;\r\n            var params=[];\r\n            for (var k in g) {\r\n                params.push({key:k,value:JSON.stringify(g[k])});\r\n            }\r\n            t.editor.keyvalueeditor(\"reset\",params);\r\n        },\r\n        createDOM:function (t) {\r\n            if (t.dom) return t.dom;\r\n            t.dom=UI(\"div\",{title:\"\"},\r\n                [\"ul\",\r\n                [\"li\",\"\"],\r\n                  [\"li\",\"JSON\"]\r\n                  //[\"li\",\"JSON\"]\r\n                ],\r\n                [\"div\",{$var:\"editor\",css:{height:\"350px\",\"overflow-y\":\"scroll\"}}],\r\n                [\"div\",[\"button\",{on:{click:t.$bind.save}},\"\"]]\r\n            );\r\n            t.vars=$.data(t.dom,\"vars\");\r\n            console.log(t.vars,t.dom.$vars);\r\n            t.editor=t.vars.editor;\r\n            var params = {\r\n                placeHolderKey:\"\",\r\n                placeHolderValue:\"\",\r\n                toggleButton: null,\r\n                deleteButton:'<img class=\"deleteButton\" src=\"images/delete.png\">'\r\n            };\r\n            t.editor.keyvalueeditor('init',params);\r\n            t.editor.on('change', '.keyvalueeditor-key', function () {\r\n                var val=this.value;\r\n                if (!val.match(/^[a-zA-Z0-9_$]+$/)) {\r\n                    alert(\"\");\r\n                    return;\r\n                }\r\n                if (!val.match(/^\\$/)) {\r\n                    this.value=\"$\"+this.value;\r\n                }\r\n                t.getValuesA();\r\n            });\r\n            t.editor.on('change', '.keyvalueeditor-value', function (e) {\r\n                var val=this.value;\r\n                try {\r\n                    var o=JSON.parse(val);\r\n                    this.value=JSON.stringify(o);\r\n                } catch (ex) {\r\n                    var qval=JSON.stringify(val);\r\n                    if (qval==='\"'+val+'\"') this.value=qval;\r\n                    else {\r\n                        alert(\"\\n\"+\r\n                        \" \\\\\\\" \\n\"+\r\n                        \"\\\\ \\\\\\\\ \\n\"\r\n                        );\r\n                        e.stopPropagation();\r\n                    }\r\n                }\r\n                t.getValuesA();\r\n            });\r\n            return t.dom;\r\n        },\r\n        save: function (t) {\r\n            var res=t.getValuesA();\r\n            if (res) {\r\n                t.opt.run.globals=res;\r\n                t.prj.setOptions(t.opt);\r\n                t.dom.dialog(\"close\");\r\n            }\r\n        },\r\n        getValuesA: function (t) {\r\n            try {\r\n                return t.getValues();\r\n            } catch(e) {\r\n                console.error(e.stack);\r\n                alert(e);\r\n            }\r\n        },\r\n        getValues: function (t) {\r\n            var vs=t.editor.keyvalueeditor(\"getValues\");\r\n            var res={};\r\n            vs.forEach(function (v) {\r\n                if (v.key in res) throw new Error(\"'\"+v.key+\"'\");\r\n                if (!v.key.match(/^\\$[a-zA-Z0-9_$]*$/)) {\r\n                    throw new Error(\"'\"+v.key+\"'\");\r\n                }\r\n                try {\r\n                    res[v.key]=JSON.parse(v.value);\r\n                } catch (e) {\r\n                    res[v.key]=v.value;\r\n                }\r\n            });\r\n            return res;\r\n        }\r\n    });\r\n    return GlobalDialog;\r\n});\r\n\ndefine('ProjectOptionsEditor',[\"UI\",\"GlobalDialog\"], function (UI,GlobalDialog) {\r\n    return function (TPR) {\r\n        const opt=TPR.getOptions();\r\n        if (!TPR.odiag) {\r\n            TPR.odiag=UI(\"div\",{title:\" \"},\r\n                    [\"h5\",\"\"],\r\n                    [\"div\",\r\n                     [\"input\", {type:\"checkbox\", $edit: \"compiler.diagnose\"}],\r\n                     \"()\"],\r\n                    [\"div\",\r\n                     [\"input\", {type:\"checkbox\", $edit: \"compiler.noLoopCheck\"}],\r\n                     \"\"],\r\n                     [\"div\",\r\n                      [\"input\", {type:\"checkbox\", $edit: \"compiler.field_strict\"}],\r\n                      \"(var n; )\"],\r\n                    [\"div\", \"\",\r\n                     [\"input\", {$edit: \"compiler.defaultSuperClass\"}]],\r\n                     [\"h5\",\"\"],\r\n                     [\"div\", \"Main \", [\"input\", {$edit: \"run.mainClass\"}] ],\r\n                     [\"div\", \"Boot \", [\"input\", {$edit: \"run.bootClass\"}] ],\r\n                     [\"div\", \"\",[\"button\", {on:{click: editG}},\"...\"] ],\r\n                     [\"h5\",\"\"],\r\n                     [\"div\",\r\n                      [\"input\", {type:\"checkbox\", $edit: \"kernelEditable\"}],\r\n                      \"Kernel\"],\r\n                      [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}]\r\n            );\r\n        }\r\n        var gdiag=new GlobalDialog(TPR);\r\n        function editG() {\r\n          gdiag.show();\r\n        }\r\n        TPR.odiag.$edits.load(opt);\r\n        TPR.odiag.dialog({\r\n            width: 600,\r\n            buttons: {\r\n                OK: function () {\r\n                    TPR.odiag.dialog(\"close\");\r\n                    //console.log(\"Project opt Saved \",JSON.stringify(opt));\r\n                    TPR.setOptions(opt);\r\n                    TPR.resetFiles();// does requestRebuild() by BuilderWorker\r\n                    //console.log(\"new opt \",JSON.stringify(TPR.getOptions()));\r\n                }\r\n            }\r\n        });\r\n    };\r\n});\r\n\ndefine('KeyEventChecker',[],function () {\r\n\tvar KEC={};\r\n\tKEC.down=function (elem, name, handler) {\r\n\t\tif (!(elem instanceof $)) elem=$(elem);\r\n\t\telem.bind(\"keydown\", function (e) {\r\n\t\t\tif (KEC.is(e, name)) {\r\n\t\t\t\treturn handler.call(elem[0],e);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tKEC.is=function (e,name) {\r\n\t\tname=name.toLowerCase();\r\n\t\te = e.originalEvent || e;\r\n\t\tvar s=\"\";\r\n\t\tif (e.altKey) {\r\n\t\t\ts+=\"alt+\";\r\n\t\t}\r\n\t\tif (e.ctrlKey) {\r\n\t\t\ts+=\"ctrl+\";\r\n\t\t}\r\n\t\tif (e.shiftKey) {\r\n\t\t\ts+=\"shift+\";\r\n\t\t}\r\n\t\tif (e.keyCode>=112 && e.keyCode<=123) {\r\n\t\t\ts+=\"f\"+(e.keyCode-111);\r\n\t\t} else {\r\n\t\t\ts+=String.fromCharCode(e.keyCode);\r\n\t\t}\r\n\t\ts=s.toLowerCase();\r\n\t\t//console.log(s);\r\n\t\treturn name==s;\r\n\t};\r\n\treturn KEC;\r\n});\ndefine('IFrameDialog',[], function () {\r\n    var WD={};\r\n    WD.create=function (home, options) {\r\n        options=options || {title:\"help\",topPage:\"index\"};\r\n        if (!options.height) {\r\n            options.height=$(window).height()*0.7;\r\n        }\r\n        if (!options.width) options.width=500;\r\n        var ifrm=$(\"<iframe>\").attr({\r\n            \"class\":\"wikiDialog\",frameBorder:0,\r\n            src:home//, width:options.width+100, height:options.height\r\n        });\r\n        var d=$(\"<div>\").attr({\"class\":\"wikiDialog\",title:options.title}).append(ifrm);\r\n        return {\r\n            show: function () {\r\n                d.dialog({\r\n                    width:options.width, height:options.height,\r\n                    resize:function (e,ui){\r\n                        //ifrm.width(ui.size.width-50);\r\n                        //ifrm.height(ui.size.height-50);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    };\r\n    return WD;\r\n});\ndefine('Shell',[\"FS\",\"assert\"],\r\n        function (FS,assert) {\r\n    var Shell={};\r\n    var PathUtil=assert(FS.PathUtil);\r\n    Shell.newCommand=function (name,func) {\r\n        this[name]=func;\r\n    };\r\n    Shell.cd=function (dir) {\r\n        Shell.cwd=resolve(dir,true);\r\n        return Shell.pwd();\r\n    };\r\n    Shell.vars=Object.create(FS.getEnv());\r\n    Shell.mount=function (options, path) {\r\n        //var r=resolve(path);\r\n        if (!options || !options.t) {\r\n            var fst=[];\r\n            for (var k in FS.getRootFS().availFSTypes()) {\r\n                fst.push(k);\r\n            }\r\n            sh.err(\"-t=(\"+fst.join(\"|\")+\") should be specified.\");\r\n            return;\r\n        }\r\n        FS.mount(path,options.t, options);\r\n    };\r\n    Shell.unmount=function (path) {\r\n        FS.unmount(path);\r\n    };\r\n    Shell.fstab=function () {\r\n        var rfs=FS.getRootFS();\r\n        var t=rfs.fstab();\r\n        var sh=this;\r\n        //sh.echo(rfs.fstype()+\"\\t\"+\"<Root>\");\r\n        t.forEach(function (fs) {\r\n            sh.echo(fs.fstype()+\"\\t\"+(fs.mountPoint||\"<Default>\"));\r\n        });\r\n    }\r\n    Shell.resolve=resolve;\r\n    function resolve(v, mustExist) {\r\n        var r=resolve2(v);\r\n        if (!FS.SFile.is(r)) {console.log(r,\" is not file\");}\r\n        if (mustExist && !r.exists()) throw new Error(r+\": no such file or directory\");\r\n        return r;\r\n    }\r\n    function resolve2(v) {\r\n        if (typeof v!=\"string\") return v;\r\n        var c=Shell.cwd;\r\n        if (PathUtil.isAbsolutePath(v)) return FS.resolve(v,c);\r\n        return c.rel(v);\r\n    }\r\n    Shell.pwd=function () {\r\n        return Shell.cwd+\"\";\r\n    };\r\n    Shell.ls=function (dir){\r\n    \tif (!dir) dir=Shell.cwd;\r\n    \telse dir=resolve(dir, true);\r\n        return dir.ls();\r\n    };\r\n    Shell.cp=function (from ,to ,options) {\r\n        if (!options) options={};\r\n        if (options.v) {\r\n            Shell.echo(\"cp\", from ,to);\r\n            options.echo=Shell.echo.bind(Shell);\r\n        }\r\n        var f=resolve(from, true);\r\n        var t=resolve(to);\r\n        return f.copyTo(t,options);\r\n    };\r\n    Shell.ln=function (to , from ,options) {\r\n        var f=resolve(from);\r\n        var t=resolve(to, true);\r\n        if (f.isDir() && f.exists()) {\r\n            f=f.rel(t.name());\r\n        }\r\n        if (f.exists()) {\r\n            throw new Error(f+\" exists\");\r\n        }\r\n        return f.link(t,options);\r\n    };\r\n    Shell.rm=function (file, options) {\r\n        if (!options) options={};\r\n        if (options.notrash) {\r\n            file=resolve(file, false);\r\n            file.removeWithoutTrash();\r\n            return 1;\r\n        }\r\n        file=resolve(file, true);\r\n        if (file.isDir() && options.r) {\r\n            var dir=file;\r\n            var sum=0;\r\n            dir.each(function (f) {\r\n                if (f.exists()) {\r\n                    sum+=Shell.rm(f, options);\r\n                }\r\n            });\r\n            dir.rm();\r\n            return sum+1;\r\n        } else {\r\n            file.rm();\r\n            return 1;\r\n        }\r\n    };\r\n    Shell.mkdir=function (file,options) {\r\n        file=resolve(file, false);\r\n        if (file.exists()) throw new Error(file+\" : exists\");\r\n        return file.mkdir();\r\n\r\n    };\r\n    Shell.cat=function (file,options) {\r\n        file=resolve(file, true);\r\n        return Shell.echo(file.getContent(function (c) {\r\n            if (file.isText()) {\r\n                return c.toPlainText();\r\n            } else {\r\n                return c.toURL();\r\n            }\r\n        }));\r\n    };\r\n    Shell.resolve=function (file) {\r\n        if (!file) file=\".\";\r\n        file=resolve(file);\r\n        return file;\r\n    };\r\n    Shell.grep=function (pattern, file, options) {\r\n        file=resolve(file, true);\r\n        if (!options) options={};\r\n        if (!options.res) options.res=[];\r\n        if (file.isDir()) {\r\n            file.each(function (e) {\r\n                Shell.grep(pattern, e, options);\r\n            });\r\n        } else {\r\n            if (typeof pattern==\"string\") {\r\n                file.lines().forEach(function (line, i) {\r\n                    if (line.indexOf(pattern)>=0) {\r\n                        report(file, i+1, line);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return options.res;\r\n        function report(file, lineNo, line) {\r\n            if (options.res) {\r\n                options.res.push({file:file, lineNo:lineNo,line:line});\r\n            }\r\n            Shell.echo(file+\"(\"+lineNo+\"): \"+line);\r\n\r\n        }\r\n    };\r\n    Shell.touch=function (f) {\r\n    \tf=resolve(f);\r\n    \tf.text(f.exists() ? f.text() : \"\");\r\n    \treturn 1;\r\n    };\r\n    Shell.setout=function (ui) {\r\n        Shell.outUI=ui;\r\n    };\r\n    Shell.echo=function () {\r\n        return $.when.apply($,arguments).then(function () {\r\n            console.log.apply(console,arguments);\r\n            if (Shell.outUI && Shell.outUI.log) Shell.outUI.log.apply(Shell.outUI,arguments);\r\n        });\r\n    };\r\n    Shell.err=function (e) {\r\n        console.log.apply(console,arguments);\r\n        if (e && e.stack) console.log(e.stack);\r\n        if (Shell.outUI && Shell.outUI.err) Shell.outUI.err.apply(Shell.outUI,arguments);\r\n    };\r\n    Shell.clone= function () {\r\n        var r=Object.create(this);\r\n        r.vars=Object.create(this.vars);\r\n        return r;\r\n    };\r\n    Shell.getvar=function (k) {\r\n        return this.vars[k] || (process && process.env[k]);\r\n    };\r\n    Shell.get=Shell.getvar;\r\n    Shell.set=function (k,v) {\r\n        return this.vars[k]=v;\r\n    };\r\n    Shell.strcat=function () {\r\n        if (arguments.length==1) return arguments[0];\r\n        var s=\"\";\r\n        for (var i=0;i<arguments.length;i++) s+=arguments[i];\r\n        return s;\r\n    };\r\n    Shell.exists=function (f) {\r\n        f=this.resolve(f);\r\n        return f.exists();\r\n    };\r\n    Shell.dl=function (f) {\r\n        f=this.resolve(f||\".\");\r\n        return f.download();\r\n    };\r\n    Shell.zip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.zip.apply(FS.zip,a);\r\n    };\r\n    Shell.unzip=function () {\r\n        var t=this;\r\n        var a=Array.prototype.slice.call(arguments).map(function (e) {\r\n            if (typeof e===\"string\") return t.resolve(e);\r\n            return e;\r\n        });\r\n        return FS.zip.unzip.apply(FS.zip,a);\r\n    };\r\n\r\n    Shell.prompt=function () {};\r\n    Shell.ASYNC={r:\"SH_ASYNC\"};\r\n    Shell.help=function () {\r\n        for (var k in Shell) {\r\n            var c=Shell[k];\r\n            if (typeof c==\"function\") {\r\n                Shell.echo(k+(c.description?\" - \"+c.description:\"\"));\r\n            }\r\n        }\r\n    };\r\n    if (!window.sh) window.sh=Shell;\r\n    if (typeof process==\"object\") {\r\n        sh.devtool=function () { require('nw.gui').Window.get().showDevTools();}\r\n        sh.cd(process.cwd().replace(/\\\\/g,\"/\"));\r\n    } else {\r\n        sh.cd(\"/\");\r\n    }\r\n    return Shell;\r\n});\r\n\ndefine('searchDialog',[\"UI\",\"Shell\"], function (UI,sh) {\r\n    var res={};\r\n    res.show=function (prjDir, onLineClick) {\r\n        var d=res.embed(prjDir,onLineClick);\r\n        d.dialog({width:600});\r\n    };\r\n    res.embed=function (prjDir, onLineClick) {\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                    [\"div\",\r\n                     [\"span\",\"\"],\r\n                     [\"input\",{$edit:\"word\",on:{enterkey:function () {\r\n                         res.d.start();\r\n                     }}}]],\r\n                     [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}],\r\n                     [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                         res.d.start();\r\n                     }}}, \"\"],\r\n                     [\"div\",{style:\"overflow-y:scroll; height:200px\"},\r\n                      [\"table\",{$var:\"searchRes\"}]]\r\n            );\r\n        }\r\n        var d=res.d;\r\n        var model={word:\"\"};\r\n        d.$edits.load(model);\r\n        d.start=function () {\r\n            d.$vars.searchRes.empty();\r\n            var sres=sh.grep(model.word, prjDir);\r\n            sres.forEach(function (l) {\r\n                if (l.file.name().match(/^concat\\.js/)) {\r\n                    return;\r\n                }\r\n                d.$vars.searchRes.append(\r\n                        UI(\"tr\",\r\n                                [\"td\",{on:{click:doLineClick}},l.file.name()+\"(\"+l.lineNo+\")\"],\r\n                                [\"td\",{on:{click:doLineClick}},l.line]\r\n                        ));\r\n                function doLineClick() {\r\n                    if (onLineClick) onLineClick(l);\r\n                }\r\n            });\r\n        };\r\n        return d;\r\n    };\r\n    return res;\r\n});\r\n\ndefine('PatternParser',[\"Tonyu\"], function (Tonyu) {\r\n    var PP=function (img, options) {\r\n        this.options=options || {};\r\n        this.img=img;\r\n        this.height = img.height;\r\n        this.width = img.width;\r\n        var cv=this.newImage(img.width, img.height);\r\n        var ctx=cv.getContext(\"2d\");\r\n        ctx.drawImage(img, 0,0);\r\n        this.ctx=ctx;\r\n        this.pixels=this.ctx.getImageData(0, 0, img.width, img.height).data;\r\n        this.base=this.getPixel(0,0);\r\n    };\r\n    Tonyu.extend(PP.prototype,{\r\n        newImage: function (w,h) {\r\n            var cv=document.createElement(\"canvas\");\r\n            cv.width=w;\r\n            cv.height=h;\r\n            return cv;\r\n        },\r\n        getPixel: function (x,y) {\r\n            var imagePixelData = this.pixels;\r\n            var ofs=(x+y*this.width)*4;\r\n            var R = imagePixelData[0+ofs];\r\n            var G = imagePixelData[1+ofs];\r\n            var B = imagePixelData[2+ofs];\r\n            var A = imagePixelData[3+ofs];\r\n            return ((((A*256)+B)*256)+G)*256+R;\r\n        },\r\n        setPixel: function (x,y,p) {\r\n            var ofs=(x+y*this.width)*4;\r\n            this.pixels[0+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[1+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[2+ofs]=p & 255;\r\n            p=(p-(p&255))/256;\r\n            this.pixels[3+ofs]=p & 255;\r\n        },\r\n        parse: function () {\r\n            try {\r\n                //console.log(\"parse()\");\r\n                var res=[];// List of charpattern\r\n                for (var y=0; y<this.height ;y++) {\r\n                    for (var x=0; x<this.width ;x++) {\r\n                        var c=this.getPixel(x, y);\r\n                        if (c!=this.base) {\r\n                            res.push(this.parse1Pattern(x,y));\r\n                        }\r\n                    }\r\n                }\r\n                //console.log(\"parsed:\"+res.lenth);\r\n                return res;\r\n            } catch (p) {\r\n                if (p.isParseError) {\r\n                    console.log(\"parse error! \"+p);\r\n                    return [{image: this.img, x:0, y:0, width:this.width, height:this.height}];\r\n                }\r\n                throw p;\r\n            }\r\n        },\r\n        parse1Pattern:function (x,y) {\r\n            function hex(s){return s;}\r\n            var trans=this.getPixel(x, y);\r\n            var dx=x,dy=y;\r\n            var base=this.base;\r\n            var width=this.width, height=this.height;\r\n            while (dx<width) {\r\n                var pixel = this.getPixel(dx,dy);\r\n                if (pixel!=trans) break;\r\n                dx++;\r\n            }\r\n            if (dx>=width || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dx--;\r\n            while (dy<height) {\r\n                if (this.getPixel(dx,dy)!=trans) break;\r\n                dy++;\r\n            }\r\n            if (dy>=height || this.getPixel(dx,dy)!=base) {\r\n                throw PatterParseError(dx,dy,hex(this.getPixel(dx,dy))+\"!=\"+hex(base));\r\n            }\r\n            dy--;\r\n            var sx=x+1,sy=y+1,w=dx-sx,h=dy-sy;\r\n            //console.log(\"PP\",sx,sy,w,h,dx,dy);\r\n            if (w*h==0) throw PatterParseError(dx, dy,\"w*h==0\");\r\n            var newim=this.newImage(w,h);\r\n            var nc=newim.getContext(\"2d\");\r\n            var newImD=nc.getImageData(0,0,w,h);\r\n            var newD=newImD.data;\r\n            var di=0;\r\n            for (var ey=sy ; ey<dy ; ey++) {\r\n                for (var ex=sx ; ex<dx ; ex++) {\r\n                    var p=this.getPixel(ex, ey);\r\n                    if (p==trans) {\r\n                        newD[di++]=0;\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                        newD[di++]=(0);\r\n                    } else {\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                        p=(p-(p&255))/256;\r\n                        newD[di++]=(p&255);\r\n                    }\r\n                }\r\n            }\r\n            nc.putImageData(newImD,0,0);\r\n            for (var yy=sy-1; yy<=dy; yy++) {\r\n                for (var xx=sx-1; xx<=dx; xx++) {\r\n                    this.setPixel(xx,yy, base);\r\n                }\r\n            }\r\n            if (this.options.boundsInSrc) {\r\n                return {x:sx,y:sy,width:w,height:h};\r\n            }\r\n            return {image:newim, x:0, y:0, width:w, height:h};\r\n            function PatterParseError(x,y,msg) {\r\n                return {toString: function () {\r\n                    return \"at (\"+x+\",\"+y+\") :\"+msg;\r\n                }, isParseError:true};\r\n            }\r\n        }\r\n\r\n    });\r\n    return PP;\r\n});\r\n\ndefine('Assets',[\"WebSite\",\"Util\",\"Tonyu\",\"FS\"],function (WebSite,Util,Tonyu,FS) {\r\n    var Assets={};\r\n    Assets.resolve=function (url, prj, options) {\r\n        options=options||{};\r\n        var baseDir=FS.isFile(prj)?prj:prj.getDir();\r\n        if (url==null) url=\"\";\r\n        url=url.replace(/\\$\\{([a-zA-Z0-9_]+)\\}/g, function (t,name) {\r\n            return WebSite[name];\r\n        });\r\n        if (WebSite.urlAliases[url]) url=WebSite.urlAliases[url];\r\n        if (Util.startsWith(url,\"ls:\")) {\r\n            var rel=url.substring(\"ls:\".length);\r\n            if (!baseDir) throw new Error(\"Basedir not specified\");\r\n            var f=baseDir.rel(rel);\r\n            if (!f.exists()) throw new Error(\"Resource file not found: \"+f);\r\n            if (\r\n                (WebSite.mp3Disabled && rel.match(/\\.(mp3)$/)) ||\r\n                (WebSite.mp4Disabled && rel.match(/\\.(mp4|m4a)$/))\r\n            ) {\r\n                var oggf=baseDir.rel(rel.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\"));\r\n                if (oggf.exists()) {\r\n                    f=oggf;\r\n                }\r\n            }\r\n            url=f.getURL();\r\n            if (options.asFile) return f;\r\n        }\r\n        return url;\r\n    };\r\n    Tonyu.Assets=Assets;\r\n    return Assets;\r\n});\r\n\ndefine('ImageList',[\"PatternParser\",\"Util\",\"Assets\",\"assert\"], function (PP,Util,Assets,assert) {\r\n    var cache={};\r\n    function excludeEmpty(resImgs) {\r\n        var r=[];\r\n        resImgs.forEach(function (resImg,i) {\r\n            if (!resImg || resImg.url==\"\") return;\r\n            r.push(resImg);\r\n        });\r\n        return r;\r\n    }\r\n    var IL;\r\n    IL=function (resImgs, onLoad,options) {\r\n        //  resImgs:[{url: , [pwidth: , pheight:]?  }]\r\n\t    if (!options) options={};\r\n        resImgs=excludeEmpty(resImgs);\r\n        var resa=[];\r\n        var cnt=resImgs.length;\r\n        if (cnt==0) setTimeout(function () {\r\n            var res=[];\r\n            res.names={};\r\n            onLoad(res);\r\n        },0);\r\n        resImgs.forEach(function (resImg,i) {\r\n            console.log(\"loading\", resImg,i);\r\n            var url=resImg.url;\r\n            var urlKey=url;\r\n            if (cache[urlKey]) {\r\n            \tproc.apply(cache[urlKey],[]);\r\n            \treturn;\r\n            }\r\n            url=Assets.resolve(url,options.prj||options.baseDir);\r\n            //if (!Util.startsWith(url,\"data:\")) url+=\"?\" + new Date().getTime();\r\n            var im=$(\"<img>\");\r\n            im.load(function () {\r\n            \tcache[urlKey]=this;\r\n            \tproc.apply(this,[]);\r\n            });\r\n            im.attr(\"src\",url);\r\n            function proc() {\r\n                var pw,ph;\r\n                if (resImg.type==\"single\") {\r\n                    resa[i]=[{image:this, x:0,y:0, width:this.width, height:this.height}];\r\n                } else if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n                    var x=0, y=0, w=this.width, h=this.height;\r\n                    var r=[];\r\n                    while (true) {\r\n                        var rw=pw,rh=ph;\r\n                        if (x+pw>w) rw=w-x;\r\n                        if (y+ph>h) rh=h-y;\r\n                        r.push({image:this, x:x,y:y, width:rw, height:rh});\r\n                        x+=pw;\r\n                        if (x+pw>w) {\r\n                            x=0;\r\n                            y+=ph;\r\n                            if (y+ph>h) break;\r\n                        }\r\n                    }\r\n                    resa[i]=r;\r\n                } else {\r\n                    var p=new PP(this);\r\n                    resa[i]=p.parse();\r\n                }\r\n                resa[i].name=resImg.name;\r\n                assert.is(resa[i],Array);\r\n                cnt--;\r\n                if (cnt==0) {\r\n                    var res=[];\r\n                    var names={};\r\n                    resa.forEach(function (a) {\r\n                        names[a.name]=res.length;\r\n                        res=res.concat(a);\r\n                    });\r\n                    res.names=names;\r\n                    onLoad(res);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    IL.load=IL;\r\n    IL.parse1=function (resImg, imgDOM, options) {\r\n        var pw,ph;\r\n        var res;\r\n        if ((pw=resImg.pwidth) && (ph=resImg.pheight)) {\r\n            var x=0, y=0, w=imgDOM.width, h=imgDOM.height;\r\n            var r=[];\r\n            while (true) {\r\n                r.push({image:this, x:x,y:y, width:pw, height:ph});\r\n                x+=pw;\r\n                if (x+pw>w) {\r\n                    x=0;\r\n                    y+=ph;\r\n                    if (y+ph>h) break;\r\n                }\r\n            }\r\n            res=r;\r\n        } else {\r\n            var p=new PP(imgDOM,options);\r\n            res=p.parse();\r\n        }\r\n        res.name=resImg.name;\r\n        return assert.is(res,Array);\r\n    };\r\n\twindow.ImageList=IL;\r\n    return IL;\r\n});\r\n\ndefine('Auth',[\"WebSite\"],function (WebSite) {\r\n    var auth={};\r\n    auth.currentUser=function (onend) {\r\n        //TODO: urlchange!\r\n        $.ajax({type:\"get\",url:WebSite.serverTop+\"/currentUser\",data:{withCsrfToken:true},\r\n            success:function (res) {\r\n                console.log(\"auth.currentUser\",res);\r\n                res=JSON.parse(res);\r\n                var u=res.user;\r\n                if (u==\"null\") u=null;\r\n                console.log(\"user\", u, \"csrfToken\",res.csrfToken);\r\n                onend(u,res.csrfToken);\r\n            }\r\n        });\r\n    };\r\n    auth.assertLogin=function (options) {\r\n        /*if (typeof options==\"function\") options={complete:options};\r\n        if (!options.confirm) options.confirm=\"\";\r\n        if (typeof options.confirm==\"string\") {\r\n            var mesg=options.confirm;\r\n            options.confirm=function () {\r\n                return confirm(mesg);\r\n            };\r\n        }*/\r\n        auth.currentUser(function (user,csrfToken) {\r\n            if (user) {\r\n                return options.success(user,csrfToken);\r\n            }\r\n            window.onLoggedIn=options.success;\r\n            //TODO: urlchange!\r\n            options.showLoginLink(WebSite.serverTop+\"/login\");\r\n        });\r\n    };\r\n    window.Auth=auth;\r\n    return auth;\r\n});\ndefine('Blob',[\"Auth\",\"WebSite\",\"Util\"],function (a,WebSite,Util) {\r\n    var Blob={};\r\n    var BLOB_PATH_EXPR=\"${blobPath}\";\r\n    Blob.BLOB_PATH_EXPR=BLOB_PATH_EXPR;\r\n    Blob.upload=function(user, project, file, options) {\r\n        var fd = new FormData(document.getElementById(\"fileinfo\"));\r\n        if (options.error) {\r\n            options.error=function (r) {alert(r);};\r\n        }\r\n        fd.append(\"theFile\", file);\r\n        fd.append(\"user\",user);\r\n        fd.append(\"project\",project);\r\n        fd.append(\"fileName\",file.name);\r\n      //TODO: urlchange!\r\n        $.ajax({\r\n            type : \"get\",\r\n            url : WebSite.serverTop+\"/blobURL\",\r\n            success : function(url) {\r\n                $.ajax({\r\n                    url : url,\r\n                    type : \"POST\",\r\n                    data : fd,\r\n                    processData : false, // jQuery \r\n                    contentType : false, // jQuery  contentType \r\n                    success : function(res) {\r\n                        console.log(\"Res = \" + res);\r\n                        options.success.apply({},arguments);// $(\"#drag\").append(res);\r\n                    },\r\n                    error: options.error\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Blob.isBlobURL=function (url) {\r\n        if (Util.startsWith(url,BLOB_PATH_EXPR)) {\r\n            var a=url.split(\"/\");\r\n            return {user:a[1], project:a[2], fileName:a[3]};\r\n        }\r\n    };\r\n    // actualURL;\r\n    Blob.url=function(user,project,fileName) {\r\n        return WebSite.blobPath+user+\"/\"+project+\"/\"+fileName;\r\n    };\r\n    Blob.uploadToExe=function (prj, options) {\r\n        var bis=prj.getBlobInfos();\r\n        var cnt=bis.length;\r\n        console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        if (cnt==0) return options.success();\r\n        if (!options.progress) options.progress=function (cnt) {\r\n            console.log(\"uploadBlobToExe cnt=\",cnt);\r\n        };\r\n        bis.forEach(function (bi) {\r\n            var data={csrfToken:options.csrfToken};\r\n            for (var i in bi) data[i]=bi[i];\r\n            $.ajax({\r\n                type:\"get\",\r\n                url: WebSite.serverTop+\"/uploadBlobToExe\",   //TODO: urlchange!\r\n                data:data,\r\n                success: function () {\r\n                     cnt--;\r\n                     if (cnt==0) return options.success();\r\n                     else options.progress(cnt);\r\n                },\r\n                error:options.error\r\n             });\r\n        });\r\n    };\r\n    return Blob;\r\n});\ndefine('ImageRect',[],function () {\r\n    function draw(img, canvas) {\r\n        if (typeof img==\"string\") {\r\n            var i=new Image();\r\n            var res=null;\r\n            var callback=null;\r\n            var onld=function (clb) {\r\n                if (clb) callback=clb;\r\n                if (callback && res) {\r\n                    callback(res);\r\n                }\r\n            };\r\n            i.onload=function () {\r\n                res=draw(i,canvas);\r\n                onld();\r\n            };\r\n            i.src=img;\r\n            return onld;\r\n        }\r\n        var cw=canvas.width;\r\n        var ch=canvas.height;\r\n        var cctx=canvas.getContext(\"2d\");\r\n        var width=img.width;\r\n        var height=img.height;\r\n        var calcw=ch/height*width; // calch=ch\r\n        var calch=cw/width*height; // calcw=cw\r\n        if (calch>ch) calch=ch;\r\n        if (calcw>cw) calcw=cw;\r\n        cctx.clearRect(0,0,cw,ch);\r\n        var marginw=Math.floor((cw-calcw)/2);\r\n        var marginh=Math.floor((ch-calch)/2);\r\n        cctx.drawImage(img,\r\n                0,0,width, height,\r\n                marginw,marginh,calcw, calch );\r\n        return {left: marginw, top:marginh, width:calcw, height:calch,src:img};\r\n    }\r\n    return draw;\r\n});\ndefine('ImageDetailEditor',[\"UI\",\"ImageList\",\"ImageRect\",\"PatternParser\",\"WebSite\",\"Assets\"],\r\n        function (UI,ImageList,ImageRect,PP,WebSite,Assets) {\r\n    var d=UI(\"div\",{title:\"\"},\r\n            [\"div\",\r\n             [\"div\",\"URL:\",[\"input\",{$var:\"url\",size:40,on:{change:setURL}}],\r\n               [\"a\",{$var:\"openImg\",target:\"_blank\"},\"...\"]],\r\n             [\"canvas\",{$edit:\"cv\",width:500,height:250,on:{mousemove:cvMouse,mousedown:cvClick}}] ],\r\n             [\"form\",{$var:\"theForm\"},\r\n               [\"div\",radio(\"single\"),\"\"],\r\n               [\"div\",radio(\"rc\"),\"\",\r\n                [\"input\",{$var:\"cols\",size:5,on:{realtimechange:setRC,focus:selRC}}],\"x\",\r\n                [\"input\",{$var:\"rows\",size:5,on:{realtimechange:setRC,focus:selRC}}]],\r\n               [\"div\",radio(\"wh\"),\"1\",\r\n                [\"input\",{$var:\"pwidth\",size:5,on:{realtimechange:setWH,focus:selWH}}],\"x\",\r\n                [\"input\",{$var:\"pheight\",size:5,on:{realtimechange:setWH,focus:selWH}}]],\r\n               [\"div\",radio(\"t1\"),\"Tonyu1\",\r\n                 [\"button\",{on:{click:tonyu1}},\"\"]],\r\n               [\"div\",\":\",[\"input\",{$var:\"patName\"}] ],\r\n               [\"button\",{on:{click:close}},\"OK\"]]\r\n    );\r\n    function radio(v) {\r\n        return UI(\"input\",{type:\"radio\",name:\"type\",value:v,on:{\r\n            click:function (){selval(v);}\r\n        }});\r\n    }\r\n    function selval(v) {\r\n        switch (v) {\r\n        case \"single\":\r\n            if (!item) return false;\r\n            cols=1;//nNan( parseInt(v.cols.val()) ,cols);\r\n            rows=1;//nNan( parseInt(v.rows.val()) ,rows);\r\n            calcWH();\r\n            setWH();//?\r\n            redrawImage();\r\n            return false;\r\n        case \"rc\":\r\n            return setRC();\r\n        case \"wh\":\r\n            return setWH();\r\n        }\r\n    }\r\n    var v=d.$vars;\r\n    var w,h,rows,cols;\r\n    var IMD={};\r\n    var item;\r\n    var srcImg;\r\n    var onclose;\r\n    var canvasRect;\r\n    var chipRects, curChipIndex=-1;\r\n    var curItemName;\r\n    function setURL() {\r\n        if (item) item.url=v.url.val();\r\n    }\r\n    function selRC() {\r\n        v.theForm[0].type.value=\"rc\";\r\n    }\r\n    function selWH() {\r\n        v.theForm[0].type.value=\"wh\";\r\n    }\r\n    function selSingle() {\r\n        v.theForm[0].type.value=\"single\";\r\n    }\r\n    IMD.show=function (_item, prj, itemName, options) {\r\n        if (!options) options={};\r\n        onclose=options.onclose;\r\n        item=_item;\r\n        curItemName=itemName;\r\n        d.dialog({width:600,height:520});\r\n        v.url.val(item.url);\r\n        var url=Assets.resolve(item.url,prj);\r\n\r\n        if (WebSite.isNW) {\r\n            var path;\r\n            // NW.jsWebSite.urlAliases\r\n            // \r\n            var urlAliases = {\r\n                \"images/Ball.png\":\"www/images/Ball.png\",\r\n                \"images/base.png\":\"www/images/base.png\",\r\n                \"images/Sample.png\":\"www/images/Sample.png\",\r\n                \"images/neko.png\":\"www/images/neko.png\",\r\n                \"images/mapchip.png\":\"www/images/mapchip.png\",\r\n                \"images/sound.png\":\"www/images/sound.png\",\r\n                \"images/sound_ogg.png\":\"www/images/sound_ogg.png\",\r\n                \"images/sound_mp3.png\":\"www/images/sound_mp3.png\",\r\n                \"images/sound_mp4.png\":\"www/images/sound_mp4.png\",\r\n                \"images/sound_m4a.png\":\"www/images/sound_m4a.png\",\r\n                \"images/sound_mid.png\":\"www/images/sound_mid.png\",\r\n                \"images/sound_wav.png\":\"www/images/sound_wav.png\",\r\n                \"images/ecl.png\":\"www/images/ecl.png\"\r\n            }\r\n            try {\r\n                path=urlAliases[item.url];\r\n                if(!path)path=url;\r\n            }catch(e) {\r\n                path=url;\r\n            }\r\n            var urlScript = \"javascript:nw.Window.open('\"+path+\"', {}, function(w) {w.y=20;w.width=700;w.height=600;})\";\r\n            v.openImg.attr(\"href\",urlScript);\r\n        } else {\r\n            v.openImg.attr(\"href\",url);\r\n        }\r\n        \r\n        ImageRect(url, v.cv[0])(function (res) {\r\n            canvasRect=res;\r\n            console.log(res);\r\n            srcImg=res.src;\r\n            w=srcImg.width;\r\n            h=srcImg.height;\r\n            if (item.type==\"single\") {\r\n                selSingle();\r\n            } else if (item.pwidth && item.pheight) {\r\n                v.pwidth.val(item.pwidth);\r\n                v.pheight.val(item.pheight);\r\n                calcRC();\r\n                selWH();\r\n            } else {\r\n                v.theForm[0].type.value=\"t1\";\r\n            }\r\n            drawFrame();\r\n        });\r\n    };\r\n    function redrawImage() {\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        var r=canvasRect;\r\n        if (!r) return;\r\n        if (!srcImg) return;\r\n        ctx.clearRect( r.left, r.top, r.width, r.height);\r\n        ctx.drawImage(srcImg, 0,0,w,h, r.left, r.top, r.width, r.height);\r\n        drawFrame();\r\n    }\r\n    function drawFrame() {\r\n        var rects=ImageList.parse1(item, srcImg, {boundsInSrc:true});\r\n//        console.log(\"drawFrame\", rects);\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        rects.forEach(function (r) {\r\n            rect(ctx,calcRect(r));\r\n        });\r\n        chipRects=rects;\r\n    }\r\n    function inRect(point,rect) {\r\n        return rect.left<= point.x && point.x<= rect.left+rect.width &&\r\n               rect.top<=point.y && point.y<=rect.top+rect.height ;\r\n    }\r\n    function calcRect(r) { // rect in srcImg:{x,y,width,height}\r\n        var s={};  // returns rect in canvas(v.cv):{left,top,width,hegiht};\r\n        var scaleX=canvasRect.width/w;\r\n        var scaleY=canvasRect.height/h;\r\n        s.left=canvasRect.left+r.x*scaleX;\r\n        s.top=canvasRect.top+r.y*scaleY;\r\n        s.width=r.width*scaleX;\r\n        s.height=r.height*scaleY;\r\n        return s;\r\n    }\r\n    function cvMouse(e) {\r\n        var ctx=v.cv[0].getContext(\"2d\");\r\n        var o=v.cv.offset();\r\n        var p={x:e.pageX-o.left, y:e.pageY-o.top};\r\n        if (!chipRects) {\r\n            console.log(\"cvMouse\");\r\n            return;\r\n        }\r\n        chipRects.forEach(function (r,i) {\r\n            var cr=calcRect(r);\r\n            //console.log(p.x, p.y, cr);\r\n            if (inRect(p,cr )) {\r\n                var pc=chipRects[curChipIndex];\r\n                if (pc) {\r\n                    var pcr=calcRect(pc);\r\n                    rect(ctx,pcr);\r\n                }\r\n                curChipIndex=i;\r\n                rect(ctx,cr,\"#ff0\");\r\n            }\r\n        })\r\n    }\r\n    function cvClick() {\r\n        var pc=chipRects[curChipIndex];\r\n        if (pc) {\r\n            var pv=curItemName+\"+\"+curChipIndex;\r\n            v.patName.val(pv);\r\n            copyToClipboard(pv);\r\n        }\r\n    }\r\n    function rect(ctx,rect,col) {\r\n        ctx.strokeStyle=col || \"#f0f\";\r\n        ctx.beginPath();\r\n        ctx.moveTo(rect.left,rect.top);\r\n        ctx.lineTo(rect.left+rect.width,rect.top);\r\n        ctx.lineTo(rect.left+rect.width,rect.top+rect.height);\r\n        ctx.lineTo(rect.left,rect.top+rect.height);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    function nNan(val,def) {\r\n        if (val===val) return val;\r\n        return def;\r\n    }\r\n    function setRC() {\r\n        if (v.theForm[0].type.value!=\"rc\") return false;\r\n        if (!item) return false;\r\n        //console.log(\"setRC\");\r\n        cols=nNan( parseInt(v.cols.val()) ,cols);\r\n        rows=nNan( parseInt(v.rows.val()) ,rows);\r\n        calcWH();\r\n        redrawImage();\r\n        return false;\r\n    }\r\n    function calcWH() {\r\n        if (!item) return false;\r\n        item.type=\"wh\";\r\n        item.pwidth=nNan( Math.floor(w/cols), w);//item.pwidth);\r\n        item.pheight=nNan( Math.floor(h/rows), h);//item.pheight);\r\n        console.log(\"calcWH\",item);\r\n        v.pwidth.val(item.pwidth);\r\n        v.pheight.val(item.pheight);\r\n    }\r\n    function setWH() {\r\n        if (v.theForm[0].type.value!=\"wh\") return false;\r\n        if (!item) return false;\r\n        //console.log(\"setWH\",item);\r\n        item.type=\"wh\";\r\n        item.pwidth=nNan( parseInt(v.pwidth.val()), item.pwidth);\r\n        item.pheight=nNan( parseInt(v.pheight.val()), item.pheight);\r\n        calcRC();\r\n        redrawImage();\r\n        return false;\r\n    }\r\n    function calcRC() {\r\n        if (!item) return false;\r\n        cols=nNan( Math.floor(w/item.pwidth),cols);\r\n        rows=nNan( Math.floor(h/item.pheight),rows);\r\n        v.rows.val(rows);\r\n        v.cols.val(cols);\r\n    }\r\n    function tonyu1() {\r\n        if (!item) return false;\r\n        delete item.pwidth;\r\n        delete item.pheight;\r\n        item.type=\"t1\";\r\n        v.theForm[0].type.value=\"t1\";\r\n        try {\r\n            redrawImage();\r\n        } catch (e) {\r\n            alert(e);\r\n        }\r\n        /*var p=new PP(srcImg);\r\n        p.parse();\r\n        */\r\n        return false;\r\n    }\r\n    function close() {\r\n        d.dialog(\"close\");\r\n        if (onclose) onclose();\r\n        return false;\r\n    }\r\n    function copyToClipboard(value) {\r\n        if (!WebSite.isNW) return;\r\n        var gui = require('nw.gui');\r\n        var clipboard = gui.Clipboard.get();\r\n        clipboard.set(value, 'text');\r\n    }\r\n\r\n    return IMD;\r\n});\r\n\ndefine('ResEditor',[\"FS\",\"Tonyu\",\"UI\",\"ImageList\",\"Blob\",\"Auth\",\"WebSite\",\r\n\"ImageDetailEditor\",\"Util\",\"Assets\"],\r\n        function (FS, Tonyu, UI,IL,Blob,Auth,WebSite,\r\n                ImageDetailEditor,Util,Assets) {\r\n    /*var mediaInfos={\r\n        image:{name:\"\",exts:[\"png\",\"gif\",\"jpg\"],path:\"images/\",key:\"images\",\r\n            extPattern:/\\.(png|gif|jpe?g)$/i,contentType:/image\\/(png|gif|jpe?g)/,\r\n            newItem:function (name) {\r\n                var r={type:\"single\"};//pwidth:32,pheight:32};\r\n                if (name) r.name=\"$pat_\"+name;\r\n                return r;\r\n            }\r\n        },\r\n        sound:{name:\"\",exts:[\"mp3\",\"ogg\",\"mp4\",\"m4a\",\"mid\",\"wav\",\"mzo\"],path:\"sounds/\",key:\"sounds\",\r\n            extPattern:/\\.(mp3|ogg|mp4|m4a|midi?|wav|mzo)$/i,contentType:/((audio\\/(mp3|ogg|x-m4a|midi?|wav|mzo))|(video\\/mp4))/,\r\n            newItem:function (name) {\r\n                var r={};\r\n                if (name) r.name=\"$se_\"+name;\r\n                return r;\r\n            }\r\n        }\r\n    };*/\r\n    var ResEditor=function (prj, mediaInfo) {\r\n        //var mediaInfo=mediaInfos[mediaType||\"image\"];\r\n        var d=UI(\"div\", {title:mediaInfo.name+\"\"});\r\n        d.css({height:200+\"px\", \"overflow-v\":\"scroll\"});\r\n        var rsrc=prj.getResource();\r\n        var items=rsrc[mediaInfo.key];\r\n        var tempFiles = items.slice();\r\n        var rsrcDir=prj.getDir().rel(mediaInfo.path);\r\n        var itemUIs=[];\r\n        var _dropAdd;\r\n        if (!rsrc) prj.setResource({images:[],sounds:[]});\r\n        function convURL(u) {\r\n            function cvs(u) {\r\n                return WebSite.urlAliases[u] || u;\r\n            }\r\n            try {\r\n                if (Util.endsWith(u,\".ogg\")) {\r\n                    u=cvs(\"images/sound_ogg.png\");\r\n                } else if (Util.endsWith(u,\".mp3\")) {\r\n                    u=cvs(\"images/sound_mp3.png\");\r\n                } else if (Util.endsWith(u,\".mzo\")) {\r\n                    u=cvs(\"images/sound_mzo.png\");\r\n                } else if (Util.endsWith(u,\".mp4\")) {\r\n                    u=cvs(\"images/sound_mp4.png\");\r\n                } else if (Util.endsWith(u,\".m4a\")) {\r\n                    u=cvs(\"images/sound_m4a.png\");\r\n                } else if (Util.endsWith(u,\".mid\") || Util.endsWith(u,\".midi\")) {\r\n                    u=cvs(\"images/sound_mid.png\");\r\n                } else if (Util.endsWith(u,\".wav\")) {\r\n                    u=cvs(\"images/sound_wav.png\");\r\n                }\r\n                return Assets.resolve(u,prj);\r\n            }catch(e) {\r\n                return WebSite.urlAliases[\"images/ecl.png\"];\r\n            }\r\n        }\r\n        function reload(action, args) {\r\n            if (action==\"del\") { // htmlremove\r\n                var delItem = $(\"#\"+args);\r\n                rsrc=prj.getResource();\r\n                items=rsrc[mediaInfo.key];\r\n                tempFiles = items.slice();\r\n                itemUIs.some(function (itemUI, idx){\r\n                    if (itemUI[0].id==args) {\r\n                        itemUIs.splice(idx, 1);\r\n                        return true;\r\n                    }\r\n                });\r\n                delItem.removeAttr(\"id\");\r\n                delItem.remove();\r\n            } else { // reloadhtml\r\n                d.empty();\r\n                rsrc=prj.getResource();\r\n                items=rsrc[mediaInfo.key];\r\n                tempFiles = items.slice();\r\n                itemUIs=[];\r\n                if (action!=\"close\") { // \r\n                    var dragMsg=\"\"+mediaInfo.name+\"(\"+mediaInfo.exts.join(\"/\")+\")\";\r\n                    var dragPoint=UI(\"div\", {style:\"margin:10px; padding:10px; border:solid blue 2px;\",\r\n                        on:{dragover: s, dragenter: s, drop:dropAdd}},dragMsg\r\n                    ).appendTo(d);\r\n                    var itemTbl=UI(\"div\").appendTo(d);\r\n                    items.forEach(function (item){\r\n                        var itemUI=genItemUI(item, items);\r\n                        itemUIs.push(itemUI);\r\n                        itemUI.appendTo(itemTbl);\r\n                    });\r\n                    d.append(UI(\"div\",{style:\"clear:left;\"},\r\n                                [\"button\", {on:{click:function (){ add();}}}, \"\"],\r\n                                [\"button\", {on:{click:function (){ d.dialog(\"close\"); }}}, \"\"]\r\n                    ));\r\n                }\r\n            }\r\n            _dropAdd=dropAdd;\r\n            function dropAdd(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                var eo=e.originalEvent;\r\n                var files = eo.dataTransfer.files;\r\n                var readFiles = new Array(files.length);\r\n                var readFileSum = files.length;\r\n                var notReadFiles = [];\r\n                var existsFiles = [];\r\n                var readCnt = 0;\r\n                for (var i=0; i<files.length; i++) loop(i);\r\n                function loop(i){\r\n                    var file = files[i];\r\n                    var filetype= file.type;\r\n                    if (file.name.match(/\\.mzo$/)) filetype=\"audio/mzo\";\r\n                    var useBlob=WebSite.serverType==\"GAE\" && (file.size>1000*300);\r\n                    if(!filetype.match(mediaInfo.contentType)) {\r\n                        readFileSum--;\r\n                        notReadFiles.push(file);\r\n                        return;//continue;\r\n                    }\r\n                    var itemName=file.name.replace(mediaInfo.extPattern,\"\").replace(/\\W/g,\"_\");\r\n                    var itemExt=\"\";\r\n                    if (file.name.match(mediaInfo.extPattern)) {\r\n                        itemExt=RegExp.lastMatch.toLowerCase();\r\n                    }\r\n                    var itemFile=rsrcDir.rel(itemName+itemExt);\r\n                    var itemRelPath=\"ls:\"+itemFile.relPath(prj.getDir());\r\n                    var existsFile;\r\n                    var fileExists=tempFiles.some(function(f){\r\n                        existsFile=f;\r\n                        var fNameTemp=f.url.replace(mediaInfo.extPattern,\"\");\r\n                        var fName=fNameTemp.substring(fNameTemp.lastIndexOf(\"/\")+1,fNameTemp.length);\r\n                        return fName==itemName;\r\n                    });\r\n                    if (fileExists) {\r\n                        readFileSum--;\r\n                        file.existsFile=existsFile;\r\n                        existsFiles.push(file);\r\n                        return;//continue;\r\n                    }\r\n\r\n                    var v=mediaInfo.newItem(itemName);\r\n                    v.url=itemRelPath;\r\n                    renameUnique(v);\r\n                    tempFiles.push(v);\r\n                    if (useBlob) {\r\n                        Auth.assertLogin({\r\n                            showLoginLink:function (u) {\r\n                                dragPoint.css(\"border\",\"solid red 2px\").empty().append(\r\n                                        UI(\"div\",\"\"+mediaInfo.name+\"\",\r\n                                           [\"a\",{href:u,target:\"login\",style:\"color: blue;\"},\"\"])\r\n                                );\r\n                            },success:function (u) {\r\n                                dragPoint.text(\"...\");\r\n                                var prjN=prj.getName();\r\n                                Blob.upload(u,prjN,file,{success:function (){\r\n                                    dragPoint.text(dragMsg);\r\n                                    v.url=\"${blobPath}/\"+u+\"/\"+prjN+\"/\"+file.name;\r\n                                    add(v);\r\n                                }});\r\n                            }\r\n                        });\r\n                    } else {\r\n                        var reader = new FileReader();\r\n                        reader.temp_file=file;\r\n                        reader.temp_itemName=itemName;\r\n                        reader.temp_itemExt=itemExt;\r\n                        reader.temp_v=v;\r\n                        reader.onloadend = function(e) {\r\n                            var target = e.target;\r\n                            var fileContent = target.result;\r\n                            if (target.error==null && fileContent!=null) {\r\n                                var itemFile=rsrcDir.rel(target.temp_itemName+target.temp_itemExt);\r\n                                itemFile.setBytes(fileContent);\r\n                                target.temp_v.url=\"ls:\"+itemFile.relPath(prj.getDir());// fileContent;\r\n                                for (var i=0;i<files.length;i++) {\r\n                                    if (files[i]==target.temp_file) {\r\n                                        readFiles[i]=target.temp_v;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                            readCnt++;\r\n                            if (readCnt == readFileSum) {\r\n                                addAry(readFiles);\r\n                            }\r\n                        };\r\n                        reader.readAsArrayBuffer(file);\r\n                    }\r\n                }\r\n                var mes;\r\n                if (notReadFiles.length>0) {\r\n                    mes=\"\\n\";\r\n                    notReadFiles.forEach(function(f){\r\n                        if (f) mes+=f.name+\"\\n\";\r\n                    });\r\n                    alert(mes);\r\n                }\r\n                if (existsFiles.length>0) {\r\n                    mes=\"\\n\";\r\n                    existsFiles.forEach(function(f){\r\n                        if (f) {\r\n                            var fNameTemp=f.existsFile.url;\r\n                            var fName=fNameTemp.substring(fNameTemp.lastIndexOf(\"/\")+1,fNameTemp.length);\r\n                            mes+=f.name+\"  \"+fName+\"(\"+f.existsFile.name+\") \\n\";\r\n                            //mes+=f.name+\" (\"+f.existsFile.name+\")\\n\";\r\n                        }\r\n                    });\r\n                    alert(mes);\r\n                }\r\n                return false;\r\n            }\r\n            function s(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n            }\r\n            function genItemUI(item) {\r\n                function detail() {\r\n                    if (mediaInfo.key==\"sounds\") return;\r\n                    ImageDetailEditor.show(item, prj, item.name, {\r\n                        onclose: function () {\r\n                            prj.setResource(rsrc);\r\n                            reload();\r\n                        }\r\n                    });\r\n                }\r\n                function del() {\r\n                    for (var i=items.length-1; i>=0 ; i--) {\r\n                        if (items[i].name==item.name) { // itemsobjecttrueitem.name\r\n                            try {\r\n                                var r=Assets.resolve( items[i].url, prj,{asFile:1});\r\n                                if (FS.isFile(r) && rsrcDir.contains(r)) {\r\n                                    console.log(r.path(),\" is removed.\");\r\n                                    r.rm();\r\n                                }\r\n                            } catch(e) {}\r\n                            items.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update(\"del\", item.name.substring(1));\r\n                }\r\n                function up() {\r\n                    for (var i=items.length-1; i>=1 ; i--) {\r\n                        if (items[i]===item) {\r\n                            items.splice(i,1);\r\n                            items.splice(i-1,0,item);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update();\r\n                }\r\n                function down() {\r\n                    for (var i=items.length-2; i>=0 ; i--) {\r\n                        if (items[i]===item) {\r\n                            items.splice(i,1);\r\n                            items.splice(i+1,0,item);\r\n                            break;\r\n                        }\r\n                    }\r\n                    update();\r\n                }\r\n\r\n                var res=UI(\"div\",{style:\"float:left;\", id:item.name.substring(1)}, // $se_bgm$\r\n                        [\"canvas\",{$var:\"c\",width:100,height:100,\"class\":\"clickable\",on:{click: detail}}],\r\n                        [\"div\",{style:\"float:right;\"},\r\n                        [\"button\",{on:{click:del}}, \"\"],[\"br\"],\r\n                        [\"button\",{on:{click:up}}, \"\"],[\"br\"],\r\n                        [\"button\",{on:{click:down}}, \"\"]],\r\n                        [\"div\",\r\n                            [\"input\", {$var:\"name\", size:12,value:item.name}]\r\n                            ]\r\n                   );\r\n                draw(convURL(item.url),res.$vars.c[0]);\r\n                var v=res.$vars;\r\n                v.data=item;\r\n                return res;\r\n            }\r\n            function add(v) {\r\n                items.push(v || mediaInfo.newItem());\r\n                update();\r\n            }\r\n            function addAry(vAry) {\r\n                vAry.forEach(function(v){\r\n                    if (v) items.push(v || mediaInfo.newItem());\r\n                });\r\n                update();\r\n            }\r\n            function renameUnique(v) {\r\n                var name=v.name;\r\n                var rename=name;\r\n                var cnt=1;\r\n                for (var i=tempFiles.length-1; i>=0 ; i--) {\r\n                    var o=tempFiles[i];\r\n                    if (o.name==rename) {\r\n                        rename=name+\"_\"+cnt;\r\n                        cnt++;\r\n                        i=tempFiles.length;\r\n                        continue;\r\n                    }\r\n                }\r\n                v.name=rename;\r\n            }\r\n        }\r\n        function update(action, args) {\r\n            itemUIs.forEach(function (itemUI) {\r\n                var v=itemUI.$vars;\r\n                var item=v.data;\r\n                item.name=v.name.val();\r\n            });\r\n            console.log(rsrc);\r\n            prj.setResource(rsrc);\r\n            reload(action, args);\r\n        }\r\n        /*function cleanFiles() {\r\n            var items=rsrc[mediaInfo.key];\r\n            Auth.currentUser(function (u,ct) {\r\n                if (!u) return;\r\n                var rtf=[];\r\n                items.forEach(function (item) {\r\n                    var a=Blob.isBlobURL(item.url),ogg;\r\n                    if (a) {\r\n                        rtf.push(a.fileName);\r\n                        ogg=a.fileName.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\");\r\n                        if (ogg!=a.fileName) rtf.push(ogg);\r\n                    }\r\n                });\r\n                var data={\r\n                        user:u,\r\n                        project:prj.getName(),\r\n                        mediaType:mediaType,\r\n                        csrfToken:ct,\r\n                        retainFileNames:JSON.stringify(rtf)\r\n                };\r\n                console.log(\"retainBlobs\",data);\r\n                //TODO: urlchange!\r\n                $.ajax({url:WebSite.serverTop+\"/retainBlobs\",type:\"get\",\r\n                    data:data\r\n                });\r\n            });\r\n            var cleanFile={};\r\n            if (rsrcDir.exists()) {\r\n                rsrcDir.each(function (f) {\r\n                    cleanFile[\"ls:\"+f.relPath(prj.getDir())]=f;\r\n                });\r\n            }\r\n            rsrc=prj.getResource();\r\n            items.forEach(function (item){\r\n                delete cleanFile[item.url];\r\n                delete cleanFile[item.url.replace(/\\.(mp3|mp4|m4a)$/,\".ogg\")];\r\n            });\r\n            console.log(cleanFile);\r\n        }*/\r\n        function toi(s) {\r\n            if (!s || s==\"\") return undefined;\r\n            return parseInt(s);\r\n        }\r\n        return {\r\n            dropAdd:function (e) {\r\n                _dropAdd(e);\r\n            },\r\n            open: function () {\r\n                reload();\r\n                d.dialog({\r\n                    modal:true,\r\n                    width: 800,\r\n                    height: 500,\r\n                    close: function () {\r\n                        update(\"close\");\r\n                        //cleanFiles();\r\n                        if (typeof mediaInfo.close===\"function\") {\r\n                            mediaInfo.close({\r\n                                items:items,\r\n                                resourceDir:rsrcDir,\r\n                                project:prj\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            close: function () {\r\n                d.dialog(\"close\");\r\n            }\r\n        };\r\n    };\r\n    function draw(img, canvas) {\r\n        if (typeof img==\"string\") {\r\n            var i=new Image();\r\n            i.onload=function () {\r\n                draw(i,canvas);\r\n            };\r\n            i.src=img;\r\n            return i;\r\n        }\r\n        var cw=canvas.width;\r\n        var ch=canvas.height;\r\n        var cctx=canvas.getContext(\"2d\");\r\n        var width=img.width;\r\n        var height=img.height;\r\n        var calcw=ch/height*width; // calch=ch\r\n        var calch=cw/width*height; // calcw=cw\r\n        if (calch>ch) calch=ch;\r\n        if (calcw>cw) calcw=cw;\r\n        cctx.clearRect(0,0,cw,ch);\r\n        var marginw=Math.floor((cw-calcw)/2);\r\n        var marginh=Math.floor((ch-calch)/2);\r\n        cctx.drawImage(img,\r\n        0,0,width, height,\r\n        marginw,marginh,calcw, calch );\r\n    }\r\n    return ResEditor;\r\n});\r\n\ndefine('OggConverter',[\"FS\",\"WebSite\"], function (FS,WebSite) {\r\n    var C={};\r\n    var spawn;//=require(\"child_process\").spawn;\r\n    if (WebSite.isNW) {spawn=require(\"child_process\").spawn;}\r\n    C.convert=function (dir) {\r\n        if (!WebSite.isNW) return;\r\n        var ffmpeg=FS.get(WebSite.ffmpeg);\r\n        if (!ffmpeg.exists()) return;\r\n        console.log(\"Convert mpx->ogg \",dir.path());\r\n        dir.each(function (src) {\r\n            if (/*src.endsWith(\".mp3\") ||*/ src.endsWith(\".mp4\") || src.endsWith(\".m4a\")) {\r\n                var ext;\r\n                if (src.endsWith(\".mp3\")) ext=\".mp3\";\r\n                if (src.endsWith(\".mp4\")) ext=\".mp4\";\r\n                if (src.endsWith(\".m4a\")) ext=\".m4a\";\r\n                var dst=src.up().rel(src.truncExt(ext)+\".ogg\");\r\n                if (!dst.exists()) {\r\n                    console.log(\"running\",ffmpeg.path(),\"-i\",src.path(),dst.path());\r\n                    var proc=spawn(ffmpeg.path(),[\"-i\",src.path(),dst.path()]);\r\n                    proc.stdin.end();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    return C;\r\n});\r\n\ndefine('ResEditors',[\"ResEditor\",\"Klass\",\"OggConverter\"],\r\nfunction (ResEditor,Klass,OggConverter) {\r\n    var mediaInfos={\r\n        image:{name:\"\",exts:[\"png\",\"gif\",\"jpg\"],path:\"images/\",key:\"images\",\r\n            extPattern:/\\.(png|gif|jpe?g)$/i,contentType:/image\\/(png|gif|jpe?g)/,\r\n            newItem:function (name) {\r\n                var r={type:\"single\"};//pwidth:32,pheight:32};\r\n                if (name) r.name=\"$pat_\"+name;\r\n                return r;\r\n            }\r\n        },\r\n        sound:{name:\"\",exts:[\"mp3\",\"ogg\",\"mp4\",\"m4a\",\"mid\",\"wav\",\"mzo\"],path:\"sounds/\",key:\"sounds\",\r\n            extPattern:/\\.(mp3|ogg|mp4|m4a|midi?|wav|mzo)$/i,contentType:/((audio\\/(mp3|ogg|x-m4a|midi?|wav|mzo))|(video\\/mp4))/,\r\n            newItem:function (name) {\r\n                var r={};\r\n                if (name) r.name=\"$se_\"+name;\r\n                return r;\r\n            },\r\n            close: function (context) {\r\n                var prj=context.project;\r\n                console.log(context);\r\n                var hasMZO=false,hasMIDI=false;\r\n                context.items.forEach(function (item) {\r\n                    if (item.url.match(/\\.mzo/)) hasMZO=true;\r\n                    if (item.url.match(/\\.midi?/)) hasMIDI=true;\r\n                });\r\n                if (hasMZO) prj.addPlugin(\"Mezonet\");\r\n                else prj.removePlugin(\"Mezonet\");\r\n                if (hasMIDI) prj.addPlugin(\"PicoAudio\");\r\n                else prj.removePlugin(\"PicoAudio\");\r\n\r\n                var rsrcDir=context.resourceDir;\r\n                if (rsrcDir.exists()) {\r\n                    OggConverter.convert(rsrcDir);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return Klass.define({\r\n        $: function (prj) {\r\n            this.prj=prj;\r\n            this.editors={};\r\n            $(\"body\").on(\"dragover\",s).on(\"dragenter\",s).on(\"drop\",this.dropAndOpen.bind(this));\r\n            function s(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        dropAndOpen: function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            var eo=e.originalEvent;\r\n            var files = Array.prototype.slice.call(eo.dataTransfer.files);\r\n            console.log(\"DROP\",e,files);\r\n            if (files.length==0) return;\r\n            for (var k in mediaInfos) {\r\n                if (mediaInfos[k].extPattern.exec(files[0].name)) {\r\n                    this.open(k);\r\n                    this.curResEditor.dropAdd(e);\r\n                }\r\n            }\r\n        },\r\n        open: function (type) {// type \"image\" / \"sound\"\r\n            this.editors[type]=this.editors[type]||ResEditor(this.prj,mediaInfos[type]);\r\n            if (this.curResEditor && this.curResEditor!==this.editors[type]) {\r\n                this.curResEditor.close();\r\n            }\r\n            this.curResEditor=this.editors[type];\r\n            this.curResEditor.open();\r\n        }\r\n    });\r\n});\r\n\ndefine('Log',[\"FS\",\"WebSite\",\"Shell\"], function (FS,WebSite,sh) {\r\n    var Log={};\r\n    var logHome=WebSite.logdir ? FS.resolve(\"${logdir}\") : null;\r\n    var doLog=logHome && logHome.exists();\r\n    Log.todayDir=function () {\r\n        var d=new Date();\r\n        var y=d.getFullYear();\r\n        var m=d.getMonth()+1;\r\n        var da=d.getDate();\r\n        return logHome.rel(y+\"/\").rel(m+\"/\").rel(da+\"/\");\r\n    };\r\n    Log.curFile=function () {\r\n        var d=new Date();\r\n        var y=d.getFullYear();\r\n        var m=d.getMonth()+1;\r\n        var da=d.getDate();\r\n        return Log.todayDir().rel(y+\"-\"+m+\"-\"+da+\".log\");\r\n    };\r\n    Log.curProject=function () {\r\n        var d=new Date();\r\n        var h=d.getHours();\r\n        var m=d.getMinutes();\r\n        var s=d.getSeconds();\r\n        return Log.todayDir().rel(\"Project/\").rel(digit(h,2)+\"_\"+digit(m,2)+\"_\"+digit(s,2)+\"/\");\r\n    };\r\n    function digit(n,zs) {\r\n        n=\"00000000000000\"+n;\r\n        return n.substring(n.length-zs);\r\n    }\r\n    Log.dumpProject=function (dir) {\r\n        if (!doLog) return;\r\n        var out=Log.curProject();\r\n        sh.cp(dir, out);\r\n        Log.append(\"Dumped project to \"+out.path());\r\n    };\r\n    if (!WebSite.logging && !WebSite.isNW) {\r\n        var varlog=FS.get(\"/var/log/\");\r\n        if (varlog.exists() && varlog.fs.storage===localStorage) {\r\n            varlog.removeWithoutTrash({r:true});\r\n        }\r\n    }\r\n    Log.append=function (line) {\r\n        if (!doLog) return;\r\n        //if (WebSite.isNW) return;\r\n        var f=Log.curFile();\r\n        //console.log(Log, \"append \"+f);\r\n        var t=(f.exists()?f.text():\"\");\r\n        f.text(t+line+\"\\n\");\r\n    };\r\n    function mul(con) {\r\n        return con.replace(/\\n/g,\"\\n|\");\r\n    }\r\n    Log.d=function (tag,con) {\r\n        Log.append(new Date()+\": [\"+tag+\"]\"+mul(con));\r\n    };\r\n    Log.e=function (tag,con) {\r\n        Log.append(new Date()+\": ERROR[\"+tag+\"]\"+mul(con));\r\n    };\r\n    return Log;\r\n});\ndefine('MainClassDialog',[\"UI\"],function (UI) {\r\n    var res={};\r\n    res.show=function (prj, options) {\r\n        var d=res.embed(prj, options);\r\n        d.dialog({width:600});\r\n        return d;\r\n    };\r\n    res.embed=function (prj, options) {\r\n        if (!options) options={};\r\n\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                    [\"div\",\r\n                          [\"select\",{$var:\"mainClass\"}],\r\n                          [\"div\", {$var:\"validationMessage\", css:{color:\"red\"}}],\r\n                          [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                              res.d.done(false);\r\n                          }}}, \"OK\"],\r\n                          [\"button\", {$var:\"RunButton\", on:{click: function () {\r\n                              res.d.done(true);\r\n                          }}}, \"\"]\r\n                    ]\r\n            );\r\n        }\r\n        var d=res.d;\r\n        var v=res.d.$vars;\r\n        prj.getDir();\r\n\r\n        var opt=prj.getOptions();\r\n\r\n        d.done=function (run) {\r\n            opt.run.mainClass=v.mainClass.val();\r\n            prj.setOptions(opt);\r\n            if (options.on && options.on.done) {\r\n                options.on.done(v.mainClass.val(),run);\r\n            }\r\n            d.dialog(\"close\");\r\n        };\r\n\r\n        return d;\r\n    };\r\n    return res;\r\n});\ndefine('PathUtil',[\"FS\"],function (FS){return FS.PathUtil;});\r\n\ndefine('extLink',[\"WebSite\",\"UI\",\"PathUtil\",\"Util\",\"assert\"],\r\n        function (WebSite,UI,PathUtil,Util,assert) {\r\n    var exec = (WebSite.isNW? require('child_process').exec : function (){});\r\n    function extLink(href,caption,options) {\r\n        options=options||{};\r\n        var opt=getOpt(href,options);\r\n        //for (var k in options) opt[k]=options[k];\r\n        return UI(\"a\",opt,caption);\r\n    };\r\n    function getOpt(href,options) {\r\n        var p=WebSite.platform;\r\n        options=options||{};\r\n        options.on=options.on||{};\r\n        var afterClick=(options.on && options.on.click) || function(){};\r\n        if (p==\"win32\") {\r\n            options.href=\"javascript:;\";\r\n            options.on.click=ext(\"start\",href,afterClick);\r\n        } else if (p==\"darwin\") {\r\n            options.href=\"javascript:;\";\r\n            options.on.click=ext(\"open\",href,afterClick);\r\n        } else {\r\n            options.href=href;\r\n            options.on.click=afterClick;\r\n            options.target=\"_new\";\r\n        }\r\n        return options;\r\n    }\r\n    function ext(cmd, href,afterClick) {\r\n        return function () {\r\n            exec(cmd+\" \"+href);\r\n            if (afterClick) afterClick();\r\n        };\r\n    }\r\n    extLink.all=function () {\r\n        if (!WebSite.isNW) return;\r\n        $(\"a\").each(function () {\r\n            var head=location.protocol+\"//\"+location.host+\"/\";\r\n            var a=$(this);\r\n            var href=a.attr(\"href\");\r\n            //console.log(\"href\",href);\r\n            if (href.match(/^http/) ) {\r\n                var opt=assert.is( getOpt(href),\r\n                        {href:String,on:{click:Function}} );\r\n                a.attr(\"href\",opt.href);\r\n                a.click(opt.on.click);\r\n            }\r\n        });\r\n    };\r\n    return extLink;\r\n});\r\n\ndefine('plugins',[\"WebSite\",\"root\"],function (WebSite,root){\r\n    var plugins={};\r\n    var installed= {\r\n        box2d:{src: \"Box2dWeb-2.1.a.3.min.js\",detection:/BodyActor/,symbol:\"Box2D\" },\r\n        timbre: {src:\"timbre.js\",symbol:\"T\" },\r\n        gif: {src:\"gif-concat.js\",detection:/GIFWriter/,symbol:\"GIF\"},\r\n        Mezonet: {src:\"Mezonet.js\", symbol: \"Mezonet\"},\r\n        PicoAudio: {src:\"PicoAudio.min.js\", symbol:\"PicoAudio\"},\r\n        // single js is required for runScript1.js\r\n        jquery_ui: {src:\"jquery-ui.js\", detection:/\\$InputBox/,symbol:\"$.ui\"}\r\n    };\r\n    plugins.installed=installed;\r\n    plugins.detectNeeded=function (src,res) {\r\n        for (var name in installed) {\r\n            var d=installed[name].detection;\r\n            if (d) {\r\n                var r=d.exec(src);\r\n                if (r) res[name]=1;\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    plugins.loaded=function (name) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        return hasInGlobal(i.symbol);\r\n    };\r\n    function hasInGlobal(name) {\r\n        // name: dot ok\r\n        var g=window;\r\n        name.split(\".\").forEach(function (e) {\r\n            if (!g) return;\r\n            g=g[e];\r\n        });\r\n        return g;\r\n    }\r\n    plugins.loadAll=function (names,options) {\r\n        options=convOpt(options);\r\n        var namea=[];\r\n        for (var name in names) {\r\n            if (installed[name] && !plugins.loaded(name)) {\r\n                namea.push(name);\r\n            }\r\n        }\r\n        var i=0;\r\n        console.log(\"loading plugins\",namea);\r\n        setTimeout(loadNext,0);\r\n        function loadNext() {\r\n            if (i>=namea.length) options.onload();\r\n            else plugins.load(namea[i++],loadNext);\r\n        }\r\n    };\r\n    function convOpt(options) {\r\n        if (typeof options==\"function\") options={onload:options};\r\n        if (!options) options={};\r\n        if (!options.onload) options.onload=function (){};\r\n        return options;\r\n    }\r\n    plugins.load=function (name,options) {\r\n        var i=installed[name];\r\n        if (!i) throw new Error(\"plugin not found: \"+name);\r\n        options=convOpt(options);\r\n        var src=WebSite.pluginTop+\"/\"+i.src;\r\n        var reqj=root.requirejs;\r\n        /*if (typeof requireSimulator===\"undefined\") {\r\n            if (typeof requirejs===\"function\") reqj=requirejs;\r\n        } else {\r\n            if (requireSimulator.real) reqj=requireSimulator.real.requirejs;\r\n        }*/\r\n        if (reqj) {\r\n            src=src.replace(/\\.js$/,\"\");\r\n            console.log(\"Loading plugin via requirejs\",src);\r\n            reqj([src], function (res) {\r\n                if (!window[i.symbol] && res) window[i.symbol]=res;\r\n                options.onload(res);\r\n            });\r\n        } else {\r\n            console.log(\"Loading plugin via <script>\",src);\r\n            var s=document.createElement(\"script\");\r\n            s.src=src;\r\n            s.onload=options.onload;\r\n            document.body.appendChild(s);\r\n            //$(\"<script>\").on(\"load\",options.onload).attr(\"src\",src).appendTo(\"body\");\r\n        }\r\n        //setTimeout(options.onload,500);\r\n\r\n    };\r\n    plugins.request=function (name) {\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"Plugin \"+name+\" required\");\r\n        req.pluginName=name;\r\n    };\r\n    return plugins;\r\n});\r\n\ndefine('splashElement',['require','exports','module'],function (require,exports,module) {//---\r\nreturn `<div id='splash' style='position:relative; height: 100%;'>\r\n    <!---->\r\n    <!--You can write here what you want to show while loading. -->\r\n    <div class='progress'>\r\n        <!-- div -->\r\n        <!-- This shows progress. If you don't want to show, remove this element. -->\r\n    </div>\r\n    <div class='unsupported' style=\"display:none;\">\r\n        <!-- div -->\r\n        <!-- This shows message for unsupported browsers. If you don't want to show, remove this element. -->\r\n        <p></p>\r\n        <p>The program does not run in this browser. Try another browser.</p>\r\n    </div>\r\n</div>\r\n<!--\r\nOpen this site when editing this game:\r\nhttps://edit.tonyu.jp/index.html?importFromHTML=1\r\n-->`;\r\n});//---of define\r\n;\ndefine('mkrun',[\"FS\",\"Util\",\"assert\",\"WebSite\",\"plugins\",\"Shell\",\"Tonyu\",\"splashElement\"],\r\n        function (FS,Util,assert,WebSite,plugins,sh,Tonyu,splashElement) {\r\n    var MkRun={};\r\n    sh.mkrun=function (dest) {\r\n        return MkRun.run( Tonyu.globals.$currentProject, FS.get(dest));\r\n    };\r\n    MkRun.run2=function (prj,type,options) {\r\n        // type: zip , prj, dir\r\n        // when type==\"dir\" , options.dest is required\r\n        var dest,destZip;\r\n        switch(type) {\r\n            case \"prj\":\r\n            destZip=this.tmpDir().rel(\"prj.zip\");\r\n            dest=this.tmpDir().rel(prj.getDir().name());\r\n            break;\r\n            case \"zip\":\r\n            dest=this.tmpDir().rel(prj.getDir().name());\r\n            break;\r\n            case \"dir\":\r\n            dest=options.dest;\r\n            break;\r\n        }\r\n        assert(dest,\"dest is not set\");\r\n        console.log(\"mkrun2\",dest,destZip);\r\n        return MkRun.run(prj,dest,options).then(function () {\r\n            switch(type) {\r\n                case \"zip\":\r\n                return FS.zip.zip(dest,options).finally(function () {\r\n                    return dest.rm({r:1});\r\n                });\r\n                case \"prj\":\r\n                return FS.zip.zip(dest,destZip,options).then(function () {\r\n                    return destZip.getContent(function (c) {\r\n                        var f=new FormData();\r\n                        var url=WebSite.uploadTmpUrl;\r\n                        f.append( \"content\" , new Blob( [c.toBin(ArrayBuffer)], {type:c.contentType} ) , destZip.name() );\r\n                        return $.ajax({url:url,method:\"POST\",data:f,processData: false, contentType: false});\r\n                    });\r\n                }).then(function (r) {\r\n                    console.log(r);\r\n                    if (!r.match(/^[\\w\\d\\.]+\\.zip$/)) {\r\n                        //alert(\": \"+r);\r\n                        throw new Error(\": \"+r);\r\n                    }\r\n                    //alert(r);\r\n                    return {tmpFileName:r};\r\n                }).finally(function (r) {\r\n                    return dest.rm({r:1}).then(function () {\r\n                        destZip.rm();\r\n                    }).then(function () {return r;});\r\n                });\r\n            }\r\n        });\r\n    };\r\n    MkRun.tmpDir=function () {\r\n        var mkramPath=\"/mkram/\";\r\n        if (!MkRun.mounted) FS.mount(mkramPath, FS.LSFS.ramDisk() );\r\n        MkRun.mounted=true;\r\n        var mkram=FS.get(mkramPath);\r\n        if (mkram.exists()) mkram.rm({r:1});\r\n        return mkram;\r\n    };\r\n    MkRun.run=function (prj,dest,options) {\r\n        options=options||{};\r\n        var prjDir=prj.getDir();\r\n        var resc=prj.getResource();\r\n        var opt=prj.getOptions();\r\n        var loadFilesBuf=\"function loadFiles(dir){\\n\"+\r\n        \"   if (WebSite.isNW) return;\\n\";\r\n        var wwwDir=FS.get(WebSite.wwwDir);\r\n        var jsDir=wwwDir.rel(\"js/\");\r\n        const runScrFileName=\"runScript2_concat.min.js\";\r\n        const genDir=options.IE?\"gen\":\"g2\";\r\n        const scriptServer=WebSite.scriptServer||\"https://edit.tonyu.jp/\";\r\n\r\n        console.log(\"jsDir\",jsDir);\r\n        //var sampleImgDir=wwwDir.rel(\"images/\");\r\n        if (options.copySrc) copySrc();\r\n        return $.when(\r\n                copySampleImages(),\r\n                convertLSURL(resc.images),\r\n                convertLSURL(resc.sounds),\r\n                genFilesJS(),\r\n                copyScripts(),\r\n                copyPlugins(),\r\n                copyLibs(),\r\n                copyResources(\"images/\"),\r\n                copyResources(\"sounds/\"),\r\n                copyIndexHtml(),\r\n                genReadme()\r\n        );\r\n\r\n        function genReadme() {\r\n            dest.rel(\"Readme.txt\").text(\r\n                    \"Web\\n\"+\r\n                    \"\\nhttps://www.tonyu.jp/tonyu2/runtime.html\\n\\n\"\r\n            );\r\n        }\r\n        function copyResources(dir) {\r\n            var src=prjDir.rel(dir);\r\n            if (src.exists()) src.copyTo(dest.rel(dir));\r\n        }\r\n        function genFilesJS(){\r\n            addFileToLoadFiles(\"res.json\",resc);\r\n            addFileToLoadFiles(\"options.json\",opt);\r\n            var mapd=prjDir.rel(\"maps/\");\r\n            if (mapd.exists()) {\r\n                mapd.recursive(function (mf) {\r\n                    addFileToLoadFiles( mf.relPath(prjDir), mf.obj());\r\n                });\r\n            }\r\n            var staticd=prjDir.rel(\"static/\");\r\n            if (staticd.exists()) {\r\n                staticd.recursive(function (mf) {\r\n                    addFileToLoadFiles( mf.relPath(prjDir));\r\n                });\r\n            }\r\n            dest.rel(\"js/files.js\").text(loadFilesBuf+\"}\");\r\n        }\r\n        function copyIndexHtml() {\r\n            var htmlfile=wwwDir.rel(\"html/runtimes/index.html\");\r\n            return htmlfile.text(function (htmlcont) {\r\n                htmlcont=htmlcont.replace(/<!--SPLASH-->/,splashElement);\r\n                if (!options.IE) {\r\n                    htmlcont=htmlcont.replace(/<!--UNSUP-->/,\r\n                        `<script src=\"${scriptServer}js/runtime/detectUnsupported.js\"></script>`);\r\n                }\r\n                htmlcont=htmlcont.replace(/TONYU_APP_VERSION/g,Math.floor(Math.random()*100000));\r\n                return dest.rel(htmlfile.name()).text(htmlcont);\r\n            });\r\n        }\r\n        function copyScripts() {\r\n            var usrjs=prjDir.rel(\"js/concat.js\");\r\n            var usrjsmap=prjDir.rel(\"js/concat.js.map\");\r\n            //TODO async...\r\n            //dest.rel(\"js/concat.js\").text(usrjs.text()+\"\\n//# sourceMappingURL=concat.js.map\");// js/ is needed??\r\n            var kerjs=FS.get(WebSite.kernelDir).rel(\"js/concat.js\");\r\n            var runScr2=jsDir.rel(`${genDir}/${runScrFileName}`);\r\n            var runScr2Map=jsDir.rel(`${genDir}/${runScrFileName}.map`);\r\n            return $.when(\r\n                usrjsmap.exists() && usrjsmap.copyTo(dest.rel(\"js/concat.js.map\")),\r\n                usrjs.copyTo(dest.rel(\"js/concat.js\")),\r\n                kerjs.copyTo(dest.rel(\"js/kernel.js\")),\r\n                runScr2.copyTo(dest.rel(`js/${runScrFileName}`)),\r\n                (runScr2Map.exists() ?\r\n                    runScr2Map.copyTo(dest.rel(`js/${runScrFileName}.map`)) :\r\n                    Promise.resolve()\r\n                )\r\n            );\r\n        }\r\n        function copyPlugins() {\r\n            var pluginDir=jsDir.rel(\"plugins/\");\r\n            if (!opt.plugins) return;\r\n            // TODO opt.plugins is now hash, but array is preferrable....\r\n            var args=[];\r\n            for (var n in opt.plugins) {\r\n                // TODO if src not found, do not copy and use src directory(maybe http://....)\r\n                var pf=pluginDir.rel(plugins.installed[n].src);\r\n                args.push( pf.copyTo(dest.rel(\"js/plugins/\")) );\r\n            }\r\n            return $.when.apply($,args);\r\n        }\r\n        function copyLibs() {\r\n            return $.when(\r\n                    jsDir.rel(\"lib/jquery-1.10.1.js\").copyTo(dest.rel(\"js/lib/\")),\r\n                    jsDir.rel(\"lib/require.js\").copyTo(dest.rel(\"js/lib/\"))\r\n            );\r\n        }\r\n        function addFileToLoadFiles(name, data) {\r\n            var file=prjDir.rel(name);\r\n            file.copyTo(dest.rel(name)); // needs on nwjs runtime\r\n            if (data==null) {\r\n                // in \"static\" folder\r\n                if (file.ext()===\".json\") {\r\n                    data=file.obj();\r\n                } else if (file.isText()) {\r\n                    //file.copyTo(dest.rel(name));\r\n                    data=file.text();\r\n                    loadFilesBuf+=\"\\tdir.rel('\"+name+\"').text(\"+JSON.stringify(data)+\");\\n\";\r\n                    return;\r\n                } else {\r\n                    //file.copyTo(dest.rel(name));\r\n                    data=file.dataURL();\r\n                    loadFilesBuf+=\"\\tdir.rel('\"+name+\"').dataURL(\"+JSON.stringify(data)+\");\\n\";\r\n                    return;\r\n                }\r\n            }\r\n            //dest.rel(name).obj(data);\r\n            loadFilesBuf+=\"\\tdir.rel('\"+name+\"').obj(\"+JSON.stringify(data)+\");\\n\";\r\n        }\r\n        function convertLSURL(r) {\r\n            for (var k in r) {\r\n                var url=r[k].url;\r\n                if (Util.startsWith(url,\"ls:\")) {\r\n                    var rel=url.substring(\"ls:\".length);\r\n                    r[k].url=rel;\r\n                }\r\n            }\r\n        }\r\n        function copySampleImages() {\r\n            var urlAliases= {\r\n                \"images/Ball.png\":1,\r\n                \"images/base.png\":1,\r\n                \"images/Sample.png\":\"../../images/Sample.png\",\r\n                \"images/neko.png\":\"../../images/neko.png\",\r\n                \"images/inputPad.png\":\"../../images/inputPad.png\",\r\n                \"images/mapchip.png\":\"../../images/mapchip.png\",\r\n                \"images/sound.png\":\"../../images/sound.png\",\r\n                \"images/sound_ogg.png\":\"../../images/sound_ogg.png\",\r\n                \"images/sound_mp3.png\":\"../../images/sound_mp3.png\",\r\n                \"images/sound_mp4.png\":\"../../images/sound_mp4.png\",\r\n                \"images/sound_m4a.png\":\"../../images/sound_m4a.png\",\r\n                \"images/sound_mid.png\":\"../../images/sound_mid.png\",\r\n                \"images/sound_wav.png\":\"../../images/sound_wav.png\",\r\n                    \"images/ecl.png\":\"../../images/ecl.png\"\r\n            };\r\n            var args=[];\r\n            for (var k in resc.images) {\r\n                var u= resc.images[k].url;\r\n                if (urlAliases[u] && !prjDir.rel(u).exists()) {\r\n                    var imgf=wwwDir.rel(u);\r\n                    if (imgf.exists()) {\r\n                        args.push( imgf.copyTo(dest.rel(u)) );\r\n                    } else {\r\n                        sh.echo(imgf+\" not exists!\");\r\n                    }\r\n                }\r\n            }\r\n            return $.when.apply($,args);\r\n        }\r\n        function copySrc() {\r\n            prjDir.copyTo(dest.rel(\"src/\"));\r\n        }\r\n    };\r\n    return MkRun;\r\n});\r\n\ndefine('zip',[\"FS\"],function (FS){return FS.zip;});\r\n\ndefine('DeferredUtil',[\"FS\"],function (FS){return FS.DeferredUtil;});\r\n\ndefine('mkrunDiag',[\"UI\",\"extLink\",\"mkrun\",\"Tonyu\",\"zip\",\"DeferredUtil\",\"FS\"],\r\nfunction (UI,extLink,mkrun,Tonyu,zip,DU,FS) {\r\n    var res={};\r\n    res.show=function (prj,dest,options) {\r\n        var d=res.embed(prj,dest,options);\r\n        d.dialog({width:800,height:400});\r\n    };\r\n    res.embed=function (prj,/*dest,*/options) {\r\n        options=options||{};\r\n        var dest=options.dest;\r\n        var onComplete=options.onComplete||(function(){});\r\n        var ote={\r\n            click: function () {\r\n                if (outtype.value===\"dir\") {\r\n                    vars.dest.prop(\"disabled\",false);\r\n                } else {\r\n                    vars.dest.prop(\"disabled\",true);\r\n                }\r\n            }\r\n        };\r\n        if (!res.d) {\r\n            res.d=UI(\"div\",{title:\"\"},\r\n                  // [\"span\", {$var:\"hiddenFolder\"},\r\n                  [\"form\",{action:\"javascript:;\",$var:\"form\",name:\"mkrunform\"},\r\n                [\"h1\",\"\"],\r\n                    [\"div\",\r\n                        [\"input\", {type:\"radio\",name:\"outtype\",value:\"zip\",on:ote}],\r\n                        [\"label\",{\"for\":\"outtype\"},\"ZIP\"]\r\n                    ],//],\r\n                    [\"div\",\r\n                        [\"input\", {type:\"radio\",name:\"outtype\",value:\"prj\",on:ote}],\r\n                        [\"label\",{\"for\":\"outtype\"},\"\"]\r\n                    ],//],\r\n                    [\"div\",{$var:\"folder\"},\r\n                        [\"input\",{type:\"radio\",name:\"outtype\",value:\"dir\",on:ote}],\r\n                        [\"label\",{\"for\":\"dest\"},\"\"],[\"br\"],\r\n                        [\"input\", {$var:\"dest\",id:\"dest\",$edit:\"dest\",size:60}]\r\n                    ],\r\n                [\"h1\",\"\"],\r\n                    [\"div\",\r\n                        [\"input\", {id:\"ie\",$edit:\"IE\",type:\"checkbox\"}],\r\n                        [\"label\",{\"for\":\"ie\"},\"Internet Explorer 11\"],\r\n                    ],\r\n                    [\"div\",\r\n                        [\"input\", {id:\"src\",$edit:\"src\",type:\"checkbox\"}],\r\n                        [\"label\",{\"for\":\"src\"},\"\"],\r\n                        [\"div\",\r\n                        {\"class\":\"srcwarn\"},\r\n                        \"\"+\r\n                        \"\"]\r\n                    ],\r\n                    [\"button\", {$var:\"OKButton\", on:{click: function () {\r\n                         res.run();\r\n                    }}}, \"\"],\r\n                    [\"span\",{$var:\"progress\"}]\r\n                ]\r\n            );\r\n        }\r\n        var vars=res.d.$vars;\r\n        vars.OKButton.prop(\"disabled\", false);\r\n        if (!options.dest) {\r\n            vars.folder.hide();\r\n        } else {\r\n            vars.folder.show();\r\n        }\r\n        var model={dest:(dest && dest.path)?dest.path():(dest||\"\"), src:true, zip:true,IE:false};\r\n        var form=vars.form[0];\r\n        var outtype=form.outtype;\r\n        vars.dest.prop(\"disabled\",true);\r\n        outtype.value=\"zip\";\r\n        res.d.$edits.load(model);\r\n        res.run=function () {\r\n            var type=outtype.value;\r\n            res.d.$vars.OKButton.prop(\"disabled\", true);\r\n            var opt={copySrc:model.src};\r\n            opt.progress=function (f) {\r\n                vars.progress.text(f.name());\r\n                return DU.timeout(0);\r\n            };\r\n            opt.IE=model.IE;\r\n            if (type===\"dir\") opt.dest=FS.get(FS.PathUtil.directorify(model.dest));\r\n            return mkrun.run2(prj,type, opt ).then(function (r) {\r\n                /*if (outtype.value===\"zip\") {\r\n                    zip.zip(FS.get(model.dest)).then(function () {\r\n                        console.log(\"ZIPPED?\");\r\n                    },function (e) {\r\n                        console.log(e.stack);\r\n                    });\r\n                }*/\r\n                switch(type) {\r\n                case \"dir\":\r\n                UIDiag.alert(UI(\"div\",\r\n                    [\"p\",\r\n                    [\"a\",{href:\"javascript:;\",\r\n                    style:\"color: blue;\",on:{click:openFolder}},model.dest],\r\n                    \"\"],\r\n                    [\"p\",\"Web\"],\r\n                    [\"ul\",\r\n                    [\"li\",\"Web\"],\r\n                    [\"li\",\"ZIP\",\r\n                      extLink(\"http://www.tonyu.jp/project/\",\r\n                              \"\",{style:\"color: blue;\"}),\r\n                    \"\"]]\r\n                    ),{width:\"auto\"}\r\n                );\r\n                break;\r\n                case \"zip\":\r\n                UIDiag.alert(UI(\"div\",\r\n                    [\"p\",\"\"],\r\n                    [\"p\",\"Web\"],\r\n                    [\"ul\",\r\n                    [\"li\",\"Web\"],\r\n                    [\"li\",\"ZIP\",\r\n                      extLink(\"http://www.tonyu.jp/project/\",\r\n                              \"\",{style:\"color: blue;\"}),\r\n                    \"\"]]\r\n                    ),{width:\"auto\"}\r\n                );\r\n                break;\r\n                case \"prj\":\r\n                var diag;\r\n                diag=UI(\"div\",\r\n                    [\"p\",[\"strong\",\"\"]],\r\n                    [\"p\",\r\n                      extLink(WebSite.newVersionUrl+\"?tmpFile=\"+r.tmpFileName,\r\n                        \"\",{\r\n                            style:\"color: blue;\",\r\n                            on:{\r\n                                click: function () {\r\n                                    diag.$vars.button.prop(\"disabled\", false);\r\n                                }\r\n                            }\r\n                        }),\r\n                        \"\"\r\n                    ],\r\n                    [\"button\",{\r\n                        $var:\"button\",\r\n                        on:{\r\n                            click: function () {\r\n                                diag.dialog(\"close\");\r\n                                diag.remove();\r\n                            }\r\n                        }\r\n                    },\"OK\"]\r\n                );\r\n                diag.$vars.button.prop(\"disabled\", true);\r\n                diag.dialog();\r\n                break;\r\n                }\r\n                onComplete({type:type,config:model});\r\n                res.d.$vars.OKButton.prop(\"disabled\", false);\r\n                if (res.d.dialog) res.d.dialog(\"close\");\r\n                if (options.onEnd) options.onEnd();\r\n            }).then(function (){},function (e) {\r\n              console.error(e);\r\n              alert(e);\r\n            });\r\n            function openFolder() {\r\n                var f=FS.get(model.dest);\r\n                var gui = require(\"nw.gui\");//nwDispatcher.requireNwGui();\r\n                gui.Shell.showItemInFolder(f.path().replace(/\\//g,\"\\\\\"));\r\n            }\r\n        };\r\n        return res.d;\r\n    };\r\n    return res;\r\n});\r\n\ndefine('WebFS',[\"FS\"],function (FS){return FS.WebFS;});\r\n\ndefine('exportAsScriptTags',[\"FS\",\"Util\",\"WebSite\",\"splashElement\"], function (FS,Util,WebSite,splashElement) {\r\n    var east=function (dir,options) {\r\n        options=options||{};\r\n        var excludes=options.excludes||{};\r\n        var includeJSScript=options.includeJSScript;\r\n        var buf=\"<!DOCTYPE html>\\n<html><head>\\n\";\r\n        buf+='<meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"/>\\n';\r\n        buf+=\"<script>WebSite_runType='singleHTML';</script>\\n\";\r\n        if (includeJSScript) {\r\n            var resFile=dir.rel(\"res.json\");\r\n            var resObj=resFile.obj();\r\n            var scriptServer=WebSite.scriptServer||\"https://edit.tonyu.jp/\";\r\n            const genPath=scriptServer+\"js/\"+(options.IE?\"gen\":\"g2\")+\"/\";\r\n            resObj.images.forEach(function (im) {\r\n                if (WebSite.builtinAssetNames[im.url]) {\r\n                    buf+='<script src=\"'+scriptServer+im.url+'.js\"></script>\\n';\r\n                }\r\n            });\r\n            buf+='<script src=\"'+scriptServer+'js/lib/jquery-1.10.1.js\" type=\"text/javascript\"></script>\\n';\r\n            buf+='<script src=\"'+genPath+'runScript_concat.min.js\" type=\"text/javascript\"></script>\\n';\r\n            if (!options.IE) {\r\n                buf+=`<script src=\"${scriptServer}js/runtime/detectUnsupported.js\"></script>`;\r\n            }\r\n        }\r\n        var binary=[],json=[];\r\n        //dir=FS.get(dir);\r\n        dir.recursive(function (f) {\r\n            var rel=f.relPath(dir);\r\n            if (excludes[rel]) return;\r\n            if (f.endsWith(\".json\") && rel.indexOf(\"maps/\")<0) {\r\n                json.push(f);\r\n                return;\r\n            } else if (f.endsWith(\".desktop\")) {\r\n                return;\r\n            } else if (f.endsWith(\".js.map\")) {\r\n                return;\r\n            } else if (f.endsWith(\".js\")) {\r\n                return;\r\n            } else if (!f.endsWith(\".tonyu\")) {\r\n                binary.push(f);\r\n                return;\r\n            }\r\n            //var name=f.truncExt(\".tonyu\");\r\n            var m=\"\";//(name==main?\" data-main='true'\":\"\");\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"'\"+lu+\">\";\r\n            buf+=escapeLoosely(f.text());\r\n            buf+=\"</script>\\n\\n\";\r\n        },{excludes:[\"files/\"]});\r\n        json.forEach(function (f) {\r\n            var rel=f.relPath(dir);\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"'\"+lu+\">\\n\";\r\n            buf+=beautifyJSON(f.text());\r\n            buf+=\"</script>\\n\\n\";\r\n        });\r\n        binary.forEach(function (f) {\r\n            var rel=f.relPath(dir);\r\n            var lu=\" data-lastupdate='\"+f.lastUpdate()+\"' \";\r\n            buf+=\"<script language='text/tonyu' type='text/tonyu' data-filename='\"+rel+\"' data-wrap='80'\"+lu+\">\";\r\n            buf+=wrap(f.text(),80);\r\n            buf+=\"</script>\\n\\n\";\r\n        });\r\n        buf+=\"</head><body>\"+(options.splashElement||splashElement)+\"</body></html>\";\r\n        return buf;\r\n        function wrap(str, cols) {\r\n            var lines=str.split(\"\\n\");\r\n            var buf=\"\";\r\n            lines.forEach(function (line) {\r\n                while (true) {\r\n                    if (line.length>cols) {\r\n                        buf+=line.substring(0,cols)+\"\\\\\\n\";\r\n                        line=line.substring(cols);\r\n                    } else {\r\n                        buf+=line+\"\\n\";\r\n                        break;\r\n                    }\r\n                }\r\n                return buf;\r\n            });\r\n            return buf;\r\n        }\r\n        function beautifyJSON(str) {\r\n            try {\r\n                var o=JSON.parse(str);\r\n                return JSON.stringify(o,null,4);\r\n            }catch(e) {\r\n                return str;\r\n            }\r\n        }\r\n    };\r\n    function escapeLoosely(text) {\r\n        text=text.replace(/&(#?[\\w\\d]+;)/g, function (_,a){\r\n            return \"&amp;\"+a;\r\n        });\r\n        text=text.replace(/<(\\s*)\\/(\\s*)script(\\s*)>/ig,function (_,s1,s2,s3) {\r\n            return \"&lt;\"+s1+\"/\"+s2+\"script\"+s3+\"&gt;\" ;\r\n        });\r\n        return text;\r\n    }\r\n    return east;\r\n});\r\n\ndefine('ExportHTMLDialog',[\"exportAsScriptTags\",\"UI\",\"Klass\",\"root\"], function (east,UI,Klass,root) {\r\n    root.ExportHTMLDialog=Klass.define({\r\n        $this:true,\r\n        $:[\"prj\"],\r\n        show: function (t,options) {\r\n            var dir=t.prj.getDir();\r\n            t.options=options||{IE:false};\r\n            t.createDOM();\r\n            t.dom.dialog({width:800,height:400});\r\n            t.write();\r\n        },\r\n        write: function (t) {\r\n            var dir=t.prj.getDir();\r\n            t.prog.val(\"\");\r\n            setTimeout(function () {\r\n                var buf=east(dir,t.options);\r\n                t.prog.val(buf);\r\n            },10);\r\n        },\r\n        createDOM:function (t) {\r\n            if (t.dom) return t.dom;\r\n            t.dom=UI(\"div\",{title:\"HTML\"},\r\n                [\"div\",\"HTMLcodepenJS\"],\r\n                [\"div\",\r\n                    [\"input\", {id:\"ie\",$edit:\"IE\",type:\"checkbox\"\r\n                    }],\r\n                    [\"label\",{\"for\":\"ie\"},\"Internet Explorer 11\"],\r\n                ],\r\n                [\"textarea\",{$var:\"prog\",rows:20,cols:60,placeholder:\"Please wait...\"}]\r\n            );\r\n            t.dom.$edits.load(t.options);\r\n            t.dom.$edits.on.writeToModel=r=>t.write();\r\n            t.prog=t.dom.$vars.prog;\r\n            return t.dom;\r\n        }\r\n    });\r\n    return root.ExportHTMLDialog;\r\n});\r\n\ndefine('DebugDialog',['require','exports','module','UI'],function (require,exports, module) {\r\nconst UI=require(\"UI\");\r\nmodule.exports=class {\r\n    constructor(param) {\r\n        const t=this;\r\n        // desktopEnv,  screenH, onClose\r\n        t.param=param;\r\n        var d=UI(\"div\",{\r\n                id:\"runArea\",\r\n                style:\"text-align : center ;overflow:hidden;\",\r\n                class:\"runArea\"\r\n            },\r\n            [\"iframe\",{\r\n                $var:\"iframe\",id:\"iframe\",src:\"about:blank\",width:465,height:465,\r\n                class:\"tonyu-canvas\",\r\n                style:\" margin-left : auto ; margin-right : auto ;\"\r\n            }]\r\n        );\r\n        t.dom=d;\r\n        t.iframe=d.$vars.iframe;\r\n    }\r\n    close() {\r\n        this.forceClose=true;\r\n        this.dom.dialog(\"close\");\r\n        this.forceClose=false;\r\n    }\r\n    show(reset) {\r\n        const t=this;\r\n        var d=t.dom;\r\n        var param=t.param;\r\n        var desktopEnv=param.desktopEnv;\r\n        if (reset) desktopEnv.runDialog={};\r\n        t.size=desktopEnv.runDialog||(desktopEnv.runDialog={});\r\n        var size=t.size;\r\n        t.iframe=d.$vars.iframe;\r\n        size.width=size.width||($(window).width()-100)/2-20;\r\n        size.height=size.height||param.screenH-20;\r\n        if (!t.shownOnce || reset) {\r\n            console.log(\"DIag::show\",size);\r\n            d.dialog({\r\n                width:size.width,\r\n                height:size.height,\r\n                position:size.top?\r\n                {\r\n                    my: \"left top\",\r\n                    at: \"left+\"+size.left+\" top+\"+size.top\r\n                }:\r\n                {my:\"right top\",at:\"right-10 bottom+10\",of:$(\"#navBar\")},\r\n                resize:function (e,ngeom) {\r\n                    size.width=d.width();\r\n                    size.height=d.height();\r\n                    t.resizeCanvas(d.width(),d.height());\r\n                    if (ngeom) {\r\n                        size.width=ngeom.size.width;\r\n                        size.height=ngeom.size.height;\r\n                        size.left=ngeom.position.left;\r\n                        size.top=ngeom.position.top;\r\n                        t.modified=true;\r\n                    }\r\n                },\r\n                drag: function (e,ngeom) {\r\n                    if (ngeom) {\r\n                        size.left=ngeom.position.left;\r\n                        size.top=ngeom.position.top;\r\n                        t.modified=true;\r\n                    }\r\n                },\r\n                close:function () {\r\n                    t.opened=false;\r\n                    if (t.param.onClose) t.param.onClose();\r\n                    t.iframe.attr(\"src\",\"about:blank\");\r\n                },\r\n                beforeClose: function () {\r\n                    if (t.forceClose) return true;\r\n                    t.param.ide.stop({closeAfterStop:true});\r\n                    return false;\r\n                }\r\n            });\r\n            t.shownOnce=true;\r\n        } else {\r\n            d.dialog();\r\n        }\r\n        t.iframe.attr(\"src\",\"debug.html?prj=\"+param.prj);\r\n        t.opened=true;\r\n        $(\".ui-dialog-titlebar-close\").blur();\r\n        t.iframe.focus();\r\n        t.resizeCanvas(d.width(),d.height());\r\n        console.log(\"Diag\",size);\r\n    }\r\n    resizeCanvas(w,h) {\r\n        //console.log(\"canvas size\",w,h);\r\n        this.iframe.attr(\"height\", h).attr(\"width\",w);\r\n        try {\r\n            this.iframe[0].contentWindow.Tonyu.globals.$mainCanvas.attr(\"height\", h).attr(\"width\",w);\r\n        }catch(e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n};\r\n});\r\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define('BuilderClient4Sys',[],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.TonyuBuilderClient = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\nconst root=require(\"../lib/root\");\r\nconst Worker=root.Worker;\r\nconst WS=require(\"../lib/WorkerServiceB\");\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst FileMap=require(\"../lib/FileMap\");\r\n//const FS=(root.parent && root.parent.FS) || root.FS;\r\nconst FS=root.FS;// TODO\r\n\r\nclass BuilderClient {\r\n    constructor(prj,config) {// dirBased\r\n        this.prj=prj;\r\n        let url=config.worker.url;\r\n        if (!url.match(/^blob/)) url+=\"?\"+Math.random();\r\n        this.w=new WS.Wrapper(new Worker(url));\r\n        this.config=config;\r\n        this.fileMap=new FileMap();\r\n    }\r\n    getOutputFile(...f) {return this.prj.getOutputFile(...f);}\r\n    getDir(){return this.prj.getDir();}\r\n    setDebugger(t) {this.debugger=t;}// t:iframe.contentWindow.Debugger\r\n    exec(srcraw) {\r\n        if (this.debugger) return this.debugger.exec(srcraw);\r\n    }\r\n    convertFromWorkerPath(path) {\r\n        return this.fileMap.convert(path,\"remote\",\"local\");\r\n    }\r\n    exportFiles() {\r\n        const localPrjDir=this.getDir();\r\n        const n2files=this.prj.sourceFiles();\r\n        const exported={base:localPrjDir.path(),data:{}};\r\n        for (var k in n2files) {\r\n            const f=n2files[k];\r\n            exported.data[f.relPath(localPrjDir)]=f.text();\r\n        }\r\n        const opt=this.prj.getOptionsFile();\r\n        exported.data[opt.relPath(localPrjDir)]=opt.text();\r\n        console.log(\"exported\",exported);\r\n        return exported;\r\n    }\r\n    async init() {\r\n        if (this.inited) return;\r\n        const fileMap=this.fileMap;\r\n        const localPrjDir=this.getDir();\r\n        const files=this.exportFiles();\r\n        const ns2depspec=this.config.worker.ns2depspec;\r\n        const {prjDir:remotePrjDir}=await this.w.run(\"compiler/init\",{\r\n            namespace:this.prj.getNamespace(),\r\n            files, ns2depspec\r\n        });\r\n        fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n        const deps=this.prj.getDependingProjects();//TODO recursive\r\n        for (let dep of deps) {\r\n            const ns=dep.getNamespace();\r\n            if (!ns2depspec[ns]) {\r\n                const localPrjDir=dep.getDir();\r\n                const files=localPrjDir.exportAsObject({\r\n                    excludesF: f=>f.ext()!==\".tonyu\" && f.name()!==\"options.json\"\r\n                });\r\n                const {prjDir:remotePrjDir}=await this.w.run(\"compiler/addDependingProject\",{\r\n                    namespace:ns, files\r\n                });\r\n                fileMap.add({local:localPrjDir, remote: remotePrjDir});\r\n            }\r\n        }\r\n        this.inited=true;\r\n    }\r\n    resetFiles() {\r\n        const files=this.exportFiles();\r\n        return this.w.run(\"compiler/resetFiles\",{\r\n            namespace:this.prj.getNamespace(),\r\n            files\r\n        });\r\n    }\r\n    async clean() {// Stands for eclipse \"Clean\" menu.\r\n        await this.resetFiles();\r\n        return await this.fullCompile();\r\n    }\r\n    async fullCompile() {\r\n        try {\r\n            this.partialCompilable=false;\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/fullCompile\");\r\n            console.log(compres);\r\n            const sf=SourceFiles.add(compres);\r\n            await sf.saveAs(this.getOutputFile());\r\n            await this.exec(compres);\r\n            this.partialCompilable=true;\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async partialCompile(f) {\r\n        if (!this.partialCompilable) {\r\n            return await this.clean();\r\n        }\r\n        try {\r\n            const files={};files[f.relPath(this.getDir())]=f.text();\r\n            await this.init();\r\n            const compres=await this.w.run(\"compiler/postChange\",{files});\r\n            console.log(compres);\r\n            await this.exec(compres);\r\n            return compres;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    async renameClassName(from,to) {\r\n        try {\r\n            await this.init();\r\n            let changed=await this.w.run(\"compiler/renameClassName\",{from,to});\r\n            for (let n in changed) {\r\n                let val=changed[n];\r\n                n=this.convertFromWorkerPath(n);\r\n                if (val==null) {\r\n                    FS.get(n).rm();\r\n                } else {\r\n                    FS.get(n).text(val);\r\n                }\r\n            }\r\n            return changed;\r\n        } catch(e) {\r\n            throw this.convertError(e);\r\n        }\r\n    }\r\n    convertError(e) {\r\n        if (e.isTError) {\r\n            e.src=FS.get(this.convertFromWorkerPath(e.src));\r\n        }\r\n        return e;\r\n    }\r\n    async run() {\r\n        await this.init();\r\n        await this.fullCompile();\r\n        this.getDir().watch(async (e,f)=>{\r\n            console.log(e,f.path());\r\n            if (f.ext()===\".tonyu\") {\r\n                const nsraw=await this.partialCompile(f);\r\n                if (this.config.onCompiled) this.config.onCompiled(nsraw);\r\n\r\n                //if (root.Tonyu.globals.$restart) root.Tonyu.globals.$restart();\r\n            }\r\n        });\r\n    }\r\n}\r\nBuilderClient.SourceFiles=SourceFiles;\r\n//root.TonyuBuilderClient=BuilderClient;\r\nmodule.exports=BuilderClient;\r\n\r\n},{\"../lang/SourceFiles\":4,\"../lib/FileMap\":9,\"../lib/WorkerServiceB\":10,\"../lib/root\":11}],2:[function(require,module,exports){\r\n// Add extra libraries for Tonyu System IDE\r\n//const root=require(\"../lib/root\");\r\nconst BuilderClient=require(\"./BuilderClient\");\r\n\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\nconst ProjectFactory=require(\"../project/ProjectFactory\");\r\nconst CompiledProject=require(\"../project/CompiledProject\");\r\nconst langMod=require(\"../lang/langMod\");\r\nconst StackDecoder=require(\"../lang/StackDecoder\");\r\nconst SourceMap=require(\"../lang/source-map\");\r\nconst DebuggerCore=require(\"../browser/DebuggerCore\");\r\nBuilderClient.SourceFiles=SourceFiles;\r\nBuilderClient.ProjectFactory=ProjectFactory;\r\nBuilderClient.CompiledProject=CompiledProject;\r\nBuilderClient.langMod=langMod;\r\nBuilderClient.StackDecoder=StackDecoder;\r\nBuilderClient.SourceMap=SourceMap;\r\nBuilderClient.DebuggerCore=DebuggerCore;\r\nmodule.exports=BuilderClient;\r\n//root.TonyuBuilderClient=BuilderClient;\r\n\r\n},{\"../browser/DebuggerCore\":3,\"../lang/SourceFiles\":4,\"../lang/StackDecoder\":5,\"../lang/langMod\":6,\"../lang/source-map\":7,\"../project/CompiledProject\":12,\"../project/ProjectFactory\":13,\"./BuilderClient\":1}],3:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n// module.exports:: DI_container -> Debugger\r\nconst SourceFiles=require(\"../lang/SourceFiles\");\r\n//const ProjectFactory=require(\"../project/ProjectFactory\");\r\nconst CompiledProject=require(\"../project/CompiledProject\");\r\nconst langMod=require(\"../lang/langMod\");\r\nconst StackDecoder=require(\"../lang/StackDecoder\");\r\nconst root=require(\"../lib/root\");\r\nmodule.exports=function ({\r\n    //-- Bundled in BuilderClient4Sys\r\n    /*SourceFiles,\r\n    ProjectFactory:F,\r\n    CompiledProject:CP,\r\n    langMod,\r\n    StackDecoder,*/\r\n    //--\r\n    Tonyu,\r\n}) {//------\r\nif (root.Debugger) return root.Debugger;\r\nconst Events={\r\n    handlers:{},\r\n    getHandler(t) {\r\n        this.handlers[t]=this.handlers[t]||[];\r\n        return this.handlers[t];\r\n    },\r\n    fire(type,evt) {\r\n        try {\r\n            this.getHandler(type).forEach(f=>f(evt));\r\n        } catch(e) {\r\n            if (!evt || !evt.noCatch) Tonyu.onRuntimeError(e);\r\n        }\r\n    },\r\n    on(type,...args) {\r\n        const f=args.pop();\r\n        this.getHandler(type).push(f);\r\n    }\r\n};\r\nroot.Debugger={\r\n    setErrorHandler: function () {\r\n        Tonyu.onRuntimeError=async e=>{\r\n            console.error(e);\r\n            const stack=await StackDecoder.decode(e);\r\n            const evt={error:e, message:e.message,stack,noCatch:true};\r\n            Events.fire(\"runtimeError\",evt);\r\n        };\r\n    },\r\n    init: async function (prj) {\r\n        //Tonyu=Tonyu||_Tonyu;\r\n        this.setErrorHandler();\r\n        Tonyu.globals.$currentProject=prj;\r\n        Tonyu.currentProject=prj;\r\n        Tonyu.globals.$debugger=root.Debugger;\r\n        await prj.loadClasses();\r\n        console.log(\"Loading classes COMPLETE\",Tonyu.ID,Tonyu.classes);\r\n    },\r\n    exec: async function (srcraw) {\r\n        await SourceFiles.add(srcraw).exec();\r\n        Events.fire(\"classChanged\");\r\n    },\r\n    create: function (className) {\r\n        try {\r\n            const klass=Tonyu.getClass(className);\r\n            return new klass();\r\n        }catch(e) {\r\n            Tonyu.onRuntimeError(e);\r\n            //console.error(e);\r\n            //StackDecoder.decode(e);\r\n        }\r\n    },\r\n    on:Events.on.bind(Events)\r\n};\r\nif (root.parent && root.parent.onTonyuDebuggerReady) {\r\n    root.parent.onTonyuDebuggerReady(root.Debugger);\r\n}\r\nreturn root.Debugger;\r\n};//--------\r\n//});//--- end of define\r\n\r\n},{\"../lang/SourceFiles\":4,\"../lang/StackDecoder\":5,\"../lang/langMod\":6,\"../lib/root\":11,\"../project/CompiledProject\":12}],4:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n/*const root=require(\"root\");*/\r\nconst root=require(\"../lib/root\");\r\nfunction timeout(t) {\r\n    return new Promise(s=>setTimeout(s,t));\r\n}\r\nlet vm;\r\n/*global global*/\r\nif (typeof global!==\"undefined\" && global.require) {\r\n    vm=global.require(\"vm\");\r\n}\r\nclass SourceFile {\r\n    // var text, sourceMap:S.Sourcemap;\r\n    constructor(text, sourceMap) {\r\n        if (typeof text===\"object\") {\r\n            const params=text;\r\n            sourceMap=params.sourceMap;\r\n            //functions=params.functions;\r\n            text=params.text;\r\n            if (params.url) {\r\n                this.url=params.url;\r\n            }\r\n        }\r\n        this.text=text;\r\n        this.sourceMap=sourceMap && sourceMap.toString();\r\n        //this.functions=functions;\r\n    }\r\n    async saveAs(outf) {\r\n        const mapFile=outf.sibling(outf.name()+\".map\");\r\n        let text=this.text;\r\n        //text+=\"\\n//# traceFunctions=\"+JSON.stringify(this.functions);\r\n        if (this.sourceMap) {\r\n            await mapFile.text(this.sourceMap);\r\n            text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n        }\r\n        await outf.text(text);\r\n        //return Promise.resolve();\r\n    }\r\n    exec(options) {\r\n        return new Promise((resolve, reject)=>{\r\n            if (root.window) {\r\n                const document=root.document;\r\n                let u;\r\n                if (this.url) {\r\n                    u=this.url;\r\n                } else {\r\n                    const b=new root.Blob([this.text], {type: 'text/plain'});\r\n                    u=root.URL.createObjectURL(b);\r\n                }\r\n                const s=document.createElement(\"script\");\r\n                console.log(\"load script\",u);\r\n                s.setAttribute(\"src\",u);\r\n                s.addEventListener(\"load\",e=>{\r\n                    resolve(e);\r\n                });\r\n                this.parent.url2SourceFile[u]=this;\r\n                document.body.appendChild(s);\r\n            } else if (options && options.tmpdir){\r\n                const tmpdir=options.tmpdir;\r\n                const uniqFile=tmpdir.rel(Math.random()+\".js\");\r\n                const mapFile=uniqFile.sibling(uniqFile.name()+\".map\");\r\n                let text=this.text;\r\n                text+=\"\\n//# sourceMappingURL=\"+mapFile.name();\r\n                uniqFile.text(text);\r\n                mapFile.text(this.sourceMap);\r\n                //console.log(\"EX\",uniqFile.exists());\r\n                require(uniqFile.path());\r\n                uniqFile.rm();\r\n                mapFile.rm();\r\n                resolve();\r\n            } else if (root.importScripts && this.url){\r\n                root.importScripts(this.url);\r\n                resolve();\r\n            } else {\r\n                const F=Function;\r\n                const f=(vm? vm.compileFunction(this.text) : new F(this.text));\r\n                resolve(f());\r\n            }\r\n        });\r\n    }\r\n    export() {\r\n        return {text:this.text, sourceMap:this.sourceMap, functions:this.functions};\r\n    }\r\n}\r\nclass SourceFiles {\r\n    constructor() {\r\n        this.url2SourceFile={};\r\n    }\r\n    add(text, sourceMap) {\r\n        const sourceFile=new SourceFile(text, sourceMap);\r\n        /*if (sourceFile.functions) for (let k in sourceFile.functions) {\r\n            this.functions[k]=sourceFile;\r\n        }*/\r\n        sourceFile.parent=this;\r\n        return sourceFile;\r\n    }\r\n\r\n}\r\nmodule.exports=new SourceFiles();\r\n//});/*--end of define--*/\r\n\r\n},{\"../lib/root\":11}],5:[function(require,module,exports){\r\nconst S=require(\"./source-map\");\r\nconst StackTrace=require(\"./stacktrace\");\r\nconst SourceFiles=require(\"./SourceFiles\");\r\nmodule.exports={\r\n    async decode(e) {\r\n        try{\r\n            const tr=await StackTrace.fromError(e,{offline:true});\r\n            tr.forEach(t=>{\r\n                try {\r\n                    const sf=SourceFiles.url2SourceFile[t.fileName];\r\n                    //console.log(\"sf\", t.fileName, sf, SourceFiles.url2SourceFile);\r\n                    if (sf) {\r\n                        const opt={\r\n                            line: t.lineNumber, column:t.columnNumber,\r\n                            bias:S.SourceMapConsumer.GREATEST_LOWER_BOUND\r\n                        };\r\n                        const pos=this.originalPositionFor(sf,opt);\r\n                        console.log(\"pos\",opt,pos);\r\n                        if (pos.source) t.fileName=pos.source;\r\n                        if (pos.line) t.lineNumber=pos.line;\r\n                        if (pos.column) t.columnNumber=pos.column;\r\n                    }\r\n                }catch(ex) {\r\n                    console.log(\"Sourcemap error\",ex);\r\n                }\r\n            });\r\n            console.log(\"Converted: \",tr);\r\n            return tr;\r\n        } catch(ex) {\r\n            console.log(\"StackTrace error\",ex);\r\n            if (!e || !e.stack) {\r\n                console.log(\"HennaError\",e);\r\n                return [];\r\n            }\r\n            return e.stack.split(\"\\n\");\r\n        }\r\n    },\r\n    originalPositionFor(sf,opt) {\r\n        const s=this.getSourceMapConsumer(sf);\r\n        if (!s) return opt;\r\n        return s.originalPositionFor(opt);\r\n    },\r\n    getSourceMapConsumer(sf) {\r\n        if (sf.sourceMapConsumer) return sf.sourceMapConsumer;\r\n        sf.sourceMapConsumer=new S.SourceMapConsumer(JSON.parse(sf.sourceMap));\r\n        //console.log(this.sourceMapConsumer);\r\n        return sf.sourceMapConsumer;\r\n    }\r\n};\r\n\r\n},{\"./SourceFiles\":4,\"./source-map\":7,\"./stacktrace\":8}],6:[function(require,module,exports){\r\n    module.exports={\r\n        getNamespace: function () {//override\r\n            var opt=this.getOptions();\r\n            if (opt.compiler && opt.compiler.namespace) return opt.compiler.namespace;\r\n            throw new Error(\"Namespace is not set\");\r\n        },\r\n        async loadDependingClasses() {\r\n            const myNsp=this.getNamespace();\r\n            for (let p of this.getDependingProjects()) {\r\n                if (p.getNamespace()===myNsp) continue;\r\n                await p.loadClasses();\r\n            }\r\n        },\r\n        getEXT() {return \".tonyu\";}\r\n        // loadClasses: stub\r\n    };\r\n\r\n},{}],7:[function(require,module,exports){\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine(\"source-map\",[], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"sourceMap\"] = factory();\r\n\telse\r\n\t\troot[\"sourceMap\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId])\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\texports: {},\r\n/******/ \t\t\tid: moduleId,\r\n/******/ \t\t\tloaded: false\r\n/******/ \t\t};\r\n\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.loaded = true;\r\n\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n\r\n\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/*\r\n\t* Copyright 2009-2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE.txt or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\texports.SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\texports.SourceMapConsumer = __webpack_require__(7).SourceMapConsumer;\r\n\texports.SourceNode = __webpack_require__(10).SourceNode;\r\n\r\n\r\n/***/ },\r\n/* 1 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar util = __webpack_require__(4);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar MappingList = __webpack_require__(6).MappingList;\r\n\r\n\t/**\r\n\t* An instance of the SourceMapGenerator represents a source map which is\r\n\t* being built incrementally. You may pass an object with the following\r\n\t* properties:\r\n\t*\r\n\t*   - file: The filename of the generated source.\r\n\t*   - sourceRoot: A root for all relative URLs in this source map.\r\n\t*/\r\n\tfunction SourceMapGenerator(aArgs) {\r\n\t\tif (!aArgs) {\r\n\t\taArgs = {};\r\n\t\t}\r\n\t\tthis._file = util.getArg(aArgs, 'file', null);\r\n\t\tthis._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\r\n\t\tthis._skipValidation = util.getArg(aArgs, 'skipValidation', false);\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\t\tthis._mappings = new MappingList();\r\n\t\tthis._sourcesContents = null;\r\n\t}\r\n\r\n\tSourceMapGenerator.prototype._version = 3;\r\n\r\n\t/**\r\n\t* Creates a new SourceMapGenerator based on a SourceMapConsumer\r\n\t*\r\n\t* @param aSourceMapConsumer The SourceMap.\r\n\t*/\r\n\tSourceMapGenerator.fromSourceMap =\r\n\t\tfunction SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\r\n\t\tvar sourceRoot = aSourceMapConsumer.sourceRoot;\r\n\t\tvar generator = new SourceMapGenerator({\r\n\t\t\tfile: aSourceMapConsumer.file,\r\n\t\t\tsourceRoot: sourceRoot\r\n\t\t});\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tvar newMapping = {\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: mapping.generatedLine,\r\n\t\t\t\tcolumn: mapping.generatedColumn\r\n\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tnewMapping.source = mapping.source;\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tnewMapping.source = util.relative(sourceRoot, newMapping.source);\r\n\t\t\t}\r\n\r\n\t\t\tnewMapping.original = {\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t};\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnewMapping.name = mapping.name;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgenerator.addMapping(newMapping);\r\n\t\t});\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tgenerator.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn generator;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a single mapping from original source line and column to the generated\r\n\t* source's line and column for this source map being created. The mapping\r\n\t* object should have the following properties:\r\n\t*\r\n\t*   - generated: An object with the generated line and column positions.\r\n\t*   - original: An object with the original line and column positions.\r\n\t*   - source: The original source file (relative to the sourceRoot).\r\n\t*   - name: An optional original token name for this mapping.\r\n\t*/\r\n\tSourceMapGenerator.prototype.addMapping =\r\n\t\tfunction SourceMapGenerator_addMapping(aArgs) {\r\n\t\tvar generated = util.getArg(aArgs, 'generated');\r\n\t\tvar original = util.getArg(aArgs, 'original', null);\r\n\t\tvar source = util.getArg(aArgs, 'source', null);\r\n\t\tvar name = util.getArg(aArgs, 'name', null);\r\n\r\n\t\tif (!this._skipValidation) {\r\n\t\t\tthis._validateMapping(generated, original, source, name);\r\n\t\t}\r\n\r\n\t\tif (source != null) {\r\n\t\t\tsource = String(source);\r\n\t\t\tif (!this._sources.has(source)) {\r\n\t\t\tthis._sources.add(source);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (name != null) {\r\n\t\t\tname = String(name);\r\n\t\t\tif (!this._names.has(name)) {\r\n\t\t\tthis._names.add(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mappings.add({\r\n\t\t\tgeneratedLine: generated.line,\r\n\t\t\tgeneratedColumn: generated.column,\r\n\t\t\toriginalLine: original != null && original.line,\r\n\t\t\toriginalColumn: original != null && original.column,\r\n\t\t\tsource: source,\r\n\t\t\tname: name\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file.\r\n\t*/\r\n\tSourceMapGenerator.prototype.setSourceContent =\r\n\t\tfunction SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tvar source = aSourceFile;\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tsource = util.relative(this._sourceRoot, source);\r\n\t\t}\r\n\r\n\t\tif (aSourceContent != null) {\r\n\t\t\t// Add the source content to the _sourcesContents map.\r\n\t\t\t// Create a new _sourcesContents map if the property is null.\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\tthis._sourcesContents = Object.create(null);\r\n\t\t\t}\r\n\t\t\tthis._sourcesContents[util.toSetString(source)] = aSourceContent;\r\n\t\t} else if (this._sourcesContents) {\r\n\t\t\t// Remove the source file from the _sourcesContents map.\r\n\t\t\t// If the _sourcesContents map is empty, set the property to null.\r\n\t\t\tdelete this._sourcesContents[util.toSetString(source)];\r\n\t\t\tif (Object.keys(this._sourcesContents).length === 0) {\r\n\t\t\tthis._sourcesContents = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Applies the mappings of a sub-source-map for a specific source file to the\r\n\t* source map being generated. Each mapping to the supplied source file is\r\n\t* rewritten using the supplied source map. Note: The resolution for the\r\n\t* resulting mappings is the minimium of this map and the supplied map.\r\n\t*\r\n\t* @param aSourceMapConsumer The source map to be applied.\r\n\t* @param aSourceFile Optional. The filename of the source file.\r\n\t*        If omitted, SourceMapConsumer's file property will be used.\r\n\t* @param aSourceMapPath Optional. The dirname of the path to the source map\r\n\t*        to be applied. If relative, it is relative to the SourceMapConsumer.\r\n\t*        This parameter is needed when the two source maps aren't in the same\r\n\t*        directory, and the source map to be applied contains relative source\r\n\t*        paths. If so, those relative source paths need to be rewritten\r\n\t*        relative to the SourceMapGenerator.\r\n\t*/\r\n\tSourceMapGenerator.prototype.applySourceMap =\r\n\t\tfunction SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\r\n\t\tvar sourceFile = aSourceFile;\r\n\t\t// If aSourceFile is omitted, we will use the file property of the SourceMap\r\n\t\tif (aSourceFile == null) {\r\n\t\t\tif (aSourceMapConsumer.file == null) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\r\n\t\t\t\t'or the source map\\'s \"file\" property. Both were omitted.'\r\n\t\t\t);\r\n\t\t\t}\r\n\t\t\tsourceFile = aSourceMapConsumer.file;\r\n\t\t}\r\n\t\tvar sourceRoot = this._sourceRoot;\r\n\t\t// Make \"sourceFile\" relative if an absolute Url is passed.\r\n\t\tif (sourceRoot != null) {\r\n\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t}\r\n\t\t// Applying the SourceMap can add and remove items from the sources and\r\n\t\t// the names array.\r\n\t\tvar newSources = new ArraySet();\r\n\t\tvar newNames = new ArraySet();\r\n\r\n\t\t// Find mappings for the \"sourceFile\"\r\n\t\tthis._mappings.unsortedForEach(function (mapping) {\r\n\t\t\tif (mapping.source === sourceFile && mapping.originalLine != null) {\r\n\t\t\t// Check if it can be mapped by the source map, then update the mapping.\r\n\t\t\tvar original = aSourceMapConsumer.originalPositionFor({\r\n\t\t\t\tline: mapping.originalLine,\r\n\t\t\t\tcolumn: mapping.originalColumn\r\n\t\t\t});\r\n\t\t\tif (original.source != null) {\r\n\t\t\t\t// Copy mapping\r\n\t\t\t\tmapping.source = original.source;\r\n\t\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tmapping.source = util.join(aSourceMapPath, mapping.source)\r\n\t\t\t\t}\r\n\t\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tmapping.source = util.relative(sourceRoot, mapping.source);\r\n\t\t\t\t}\r\n\t\t\t\tmapping.originalLine = original.line;\r\n\t\t\t\tmapping.originalColumn = original.column;\r\n\t\t\t\tif (original.name != null) {\r\n\t\t\t\tmapping.name = original.name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar source = mapping.source;\r\n\t\t\tif (source != null && !newSources.has(source)) {\r\n\t\t\tnewSources.add(source);\r\n\t\t\t}\r\n\r\n\t\t\tvar name = mapping.name;\r\n\t\t\tif (name != null && !newNames.has(name)) {\r\n\t\t\tnewNames.add(name);\r\n\t\t\t}\r\n\r\n\t\t}, this);\r\n\t\tthis._sources = newSources;\r\n\t\tthis._names = newNames;\r\n\r\n\t\t// Copy sourcesContents of applied map.\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aSourceMapPath != null) {\r\n\t\t\t\tsourceFile = util.join(aSourceMapPath, sourceFile);\r\n\t\t\t}\r\n\t\t\tif (sourceRoot != null) {\r\n\t\t\t\tsourceFile = util.relative(sourceRoot, sourceFile);\r\n\t\t\t}\r\n\t\t\tthis.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* A mapping can have one of the three levels of data:\r\n\t*\r\n\t*   1. Just the generated position.\r\n\t*   2. The Generated position, original position, and original source.\r\n\t*   3. Generated and original position, original source, as well as a name\r\n\t*      token.\r\n\t*\r\n\t* To maintain consistency, we validate that any new mapping being added falls\r\n\t* in to one of these categories.\r\n\t*/\r\n\tSourceMapGenerator.prototype._validateMapping =\r\n\t\tfunction SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taName) {\r\n\t\tif (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t&& !aOriginal && !aSource && !aName) {\r\n\t\t\t// Case 1.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\r\n\t\t\t\t&& aOriginal && 'line' in aOriginal && 'column' in aOriginal\r\n\t\t\t\t&& aGenerated.line > 0 && aGenerated.column >= 0\r\n\t\t\t\t&& aOriginal.line > 0 && aOriginal.column >= 0\r\n\t\t\t\t&& aSource) {\r\n\t\t\t// Cases 2 and 3.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('Invalid mapping: ' + JSON.stringify({\r\n\t\t\tgenerated: aGenerated,\r\n\t\t\tsource: aSource,\r\n\t\t\toriginal: aOriginal,\r\n\t\t\tname: aName\r\n\t\t\t}));\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Serialize the accumulated mappings in to the stream of base 64 VLQs\r\n\t* specified by the source map format.\r\n\t*/\r\n\tSourceMapGenerator.prototype._serializeMappings =\r\n\t\tfunction SourceMapGenerator_serializeMappings() {\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousGeneratedLine = 1;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar result = '';\r\n\t\tvar next;\r\n\t\tvar mapping;\r\n\t\tvar nameIdx;\r\n\t\tvar sourceIdx;\r\n\r\n\t\tvar mappings = this._mappings.toArray();\r\n\t\tfor (var i = 0, len = mappings.length; i < len; i++) {\r\n\t\t\tmapping = mappings[i];\r\n\t\t\tnext = ''\r\n\r\n\t\t\tif (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\twhile (mapping.generatedLine !== previousGeneratedLine) {\r\n\t\t\t\tnext += ';';\r\n\t\t\t\tpreviousGeneratedLine++;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tif (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tnext += ',';\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.generatedColumn\r\n\t\t\t\t\t\t\t\t\t- previousGeneratedColumn);\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (mapping.source != null) {\r\n\t\t\tsourceIdx = this._sources.indexOf(mapping.source);\r\n\t\t\tnext += base64VLQ.encode(sourceIdx - previousSource);\r\n\t\t\tpreviousSource = sourceIdx;\r\n\r\n\t\t\t// lines are stored 0-based in SourceMap spec version 3\r\n\t\t\tnext += base64VLQ.encode(mapping.originalLine - 1\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalLine);\r\n\t\t\tpreviousOriginalLine = mapping.originalLine - 1;\r\n\r\n\t\t\tnext += base64VLQ.encode(mapping.originalColumn\r\n\t\t\t\t\t\t\t\t\t\t- previousOriginalColumn);\r\n\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\tif (mapping.name != null) {\r\n\t\t\t\tnameIdx = this._names.indexOf(mapping.name);\r\n\t\t\t\tnext += base64VLQ.encode(nameIdx - previousName);\r\n\t\t\t\tpreviousName = nameIdx;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult += next;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t\t};\r\n\r\n\tSourceMapGenerator.prototype._generateSourcesContent =\r\n\t\tfunction SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\r\n\t\treturn aSources.map(function (source) {\r\n\t\t\tif (!this._sourcesContents) {\r\n\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (aSourceRoot != null) {\r\n\t\t\tsource = util.relative(aSourceRoot, source);\r\n\t\t\t}\r\n\t\t\tvar key = util.toSetString(source);\r\n\t\t\treturn Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\r\n\t\t\t? this._sourcesContents[key]\r\n\t\t\t: null;\r\n\t\t}, this);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Externalize the source map.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toJSON =\r\n\t\tfunction SourceMapGenerator_toJSON() {\r\n\t\tvar map = {\r\n\t\t\tversion: this._version,\r\n\t\t\tsources: this._sources.toArray(),\r\n\t\t\tnames: this._names.toArray(),\r\n\t\t\tmappings: this._serializeMappings()\r\n\t\t};\r\n\t\tif (this._file != null) {\r\n\t\t\tmap.file = this._file;\r\n\t\t}\r\n\t\tif (this._sourceRoot != null) {\r\n\t\t\tmap.sourceRoot = this._sourceRoot;\r\n\t\t}\r\n\t\tif (this._sourcesContents) {\r\n\t\t\tmap.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Render the source map being generated to a string.\r\n\t*/\r\n\tSourceMapGenerator.prototype.toString =\r\n\t\tfunction SourceMapGenerator_toString() {\r\n\t\treturn JSON.stringify(this.toJSON());\r\n\t\t};\r\n\r\n\texports.SourceMapGenerator = SourceMapGenerator;\r\n\r\n\r\n/***/ },\r\n/* 2 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*\r\n\t* Based on the Base 64 VLQ implementation in Closure Compiler:\r\n\t* https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\r\n\t*\r\n\t* Copyright 2011 The Closure Compiler Authors. All rights reserved.\r\n\t* Redistribution and use in source and binary forms, with or without\r\n\t* modification, are permitted provided that the following conditions are\r\n\t* met:\r\n\t*\r\n\t*  * Redistributions of source code must retain the above copyright\r\n\t*    notice, this list of conditions and the following disclaimer.\r\n\t*  * Redistributions in binary form must reproduce the above\r\n\t*    copyright notice, this list of conditions and the following\r\n\t*    disclaimer in the documentation and/or other materials provided\r\n\t*    with the distribution.\r\n\t*  * Neither the name of Google Inc. nor the names of its\r\n\t*    contributors may be used to endorse or promote products derived\r\n\t*    from this software without specific prior written permission.\r\n\t*\r\n\t* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n\t* \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n\t* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n\t* A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n\t* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n\t* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n\t* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n\t* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n\t* THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n\t* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n\t* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t*/\r\n\r\n\tvar base64 = __webpack_require__(3);\r\n\r\n\t// A single base 64 digit can contain 6 bits of data. For the base 64 variable\r\n\t// length quantities we use in the source map spec, the first bit is the sign,\r\n\t// the next four bits are the actual value, and the 6th bit is the\r\n\t// continuation bit. The continuation bit tells us whether there are more\r\n\t// digits in this value following this digit.\r\n\t//\r\n\t//   Continuation\r\n\t//   |    Sign\r\n\t//   |    |\r\n\t//   V    V\r\n\t//   101011\r\n\r\n\tvar VLQ_BASE_SHIFT = 5;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\r\n\r\n\t// binary: 011111\r\n\tvar VLQ_BASE_MASK = VLQ_BASE - 1;\r\n\r\n\t// binary: 100000\r\n\tvar VLQ_CONTINUATION_BIT = VLQ_BASE;\r\n\r\n\t/**\r\n\t* Converts from a two-complement value to a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\r\n\t*   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\r\n\t*/\r\n\tfunction toVLQSigned(aValue) {\r\n\t\treturn aValue < 0\r\n\t\t? ((-aValue) << 1) + 1\r\n\t\t: (aValue << 1) + 0;\r\n\t}\r\n\r\n\t/**\r\n\t* Converts to a two-complement value from a value where the sign bit is\r\n\t* placed in the least significant bit.  For example, as decimals:\r\n\t*   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\r\n\t*   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\r\n\t*/\r\n\tfunction fromVLQSigned(aValue) {\r\n\t\tvar isNegative = (aValue & 1) === 1;\r\n\t\tvar shifted = aValue >> 1;\r\n\t\treturn isNegative\r\n\t\t? -shifted\r\n\t\t: shifted;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the base 64 VLQ encoded value.\r\n\t*/\r\n\texports.encode = function base64VLQ_encode(aValue) {\r\n\t\tvar encoded = \"\";\r\n\t\tvar digit;\r\n\r\n\t\tvar vlq = toVLQSigned(aValue);\r\n\r\n\t\tdo {\r\n\t\tdigit = vlq & VLQ_BASE_MASK;\r\n\t\tvlq >>>= VLQ_BASE_SHIFT;\r\n\t\tif (vlq > 0) {\r\n\t\t\t// There are still more digits in this value, so we must make sure the\r\n\t\t\t// continuation bit is marked.\r\n\t\t\tdigit |= VLQ_CONTINUATION_BIT;\r\n\t\t}\r\n\t\tencoded += base64.encode(digit);\r\n\t\t} while (vlq > 0);\r\n\r\n\t\treturn encoded;\r\n\t};\r\n\r\n\t/**\r\n\t* Decodes the next base 64 VLQ value from the given string and returns the\r\n\t* value and the rest of the string via the out parameter.\r\n\t*/\r\n\texports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\r\n\t\tvar strLen = aStr.length;\r\n\t\tvar result = 0;\r\n\t\tvar shift = 0;\r\n\t\tvar continuation, digit;\r\n\r\n\t\tdo {\r\n\t\tif (aIndex >= strLen) {\r\n\t\t\tthrow new Error(\"Expected more digits in base 64 VLQ value.\");\r\n\t\t}\r\n\r\n\t\tdigit = base64.decode(aStr.charCodeAt(aIndex++));\r\n\t\tif (digit === -1) {\r\n\t\t\tthrow new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\r\n\t\t}\r\n\r\n\t\tcontinuation = !!(digit & VLQ_CONTINUATION_BIT);\r\n\t\tdigit &= VLQ_BASE_MASK;\r\n\t\tresult = result + (digit << shift);\r\n\t\tshift += VLQ_BASE_SHIFT;\r\n\t\t} while (continuation);\r\n\r\n\t\taOutParam.value = fromVLQSigned(result);\r\n\t\taOutParam.rest = aIndex;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 3 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\r\n\r\n\t/**\r\n\t* Encode an integer in the range of 0 to 63 to a single base 64 digit.\r\n\t*/\r\n\texports.encode = function (number) {\r\n\t\tif (0 <= number && number < intToCharMap.length) {\r\n\t\treturn intToCharMap[number];\r\n\t\t}\r\n\t\tthrow new TypeError(\"Must be between 0 and 63: \" + number);\r\n\t};\r\n\r\n\t/**\r\n\t* Decode a single base 64 character code digit to an integer. Returns -1 on\r\n\t* failure.\r\n\t*/\r\n\texports.decode = function (charCode) {\r\n\t\tvar bigA = 65;     // 'A'\r\n\t\tvar bigZ = 90;     // 'Z'\r\n\r\n\t\tvar littleA = 97;  // 'a'\r\n\t\tvar littleZ = 122; // 'z'\r\n\r\n\t\tvar zero = 48;     // '0'\r\n\t\tvar nine = 57;     // '9'\r\n\r\n\t\tvar plus = 43;     // '+'\r\n\t\tvar slash = 47;    // '/'\r\n\r\n\t\tvar littleOffset = 26;\r\n\t\tvar numberOffset = 52;\r\n\r\n\t\t// 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\r\n\t\tif (bigA <= charCode && charCode <= bigZ) {\r\n\t\treturn (charCode - bigA);\r\n\t\t}\r\n\r\n\t\t// 26 - 51: abcdefghijklmnopqrstuvwxyz\r\n\t\tif (littleA <= charCode && charCode <= littleZ) {\r\n\t\treturn (charCode - littleA + littleOffset);\r\n\t\t}\r\n\r\n\t\t// 52 - 61: 0123456789\r\n\t\tif (zero <= charCode && charCode <= nine) {\r\n\t\treturn (charCode - zero + numberOffset);\r\n\t\t}\r\n\r\n\t\t// 62: +\r\n\t\tif (charCode == plus) {\r\n\t\treturn 62;\r\n\t\t}\r\n\r\n\t\t// 63: /\r\n\t\tif (charCode == slash) {\r\n\t\treturn 63;\r\n\t\t}\r\n\r\n\t\t// Invalid base64 digit.\r\n\t\treturn -1;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 4 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t/**\r\n\t* This is a helper function for getting values from parameter/options\r\n\t* objects.\r\n\t*\r\n\t* @param args The object we are extracting values from\r\n\t* @param name The name of the property we are getting.\r\n\t* @param defaultValue An optional value to return if the property is missing\r\n\t* from the object. If this is not specified and the property is missing, an\r\n\t* error will be thrown.\r\n\t*/\r\n\tfunction getArg(aArgs, aName, aDefaultValue) {\r\n\t\tif (aName in aArgs) {\r\n\t\treturn aArgs[aName];\r\n\t\t} else if (arguments.length === 3) {\r\n\t\treturn aDefaultValue;\r\n\t\t} else {\r\n\t\tthrow new Error('\"' + aName + '\" is a required argument.');\r\n\t\t}\r\n\t}\r\n\texports.getArg = getArg;\r\n\r\n\tvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\r\n\tvar dataUrlRegexp = /^data:.+\\,.+$/;\r\n\r\n\tfunction urlParse(aUrl) {\r\n\t\tvar match = aUrl.match(urlRegexp);\r\n\t\tif (!match) {\r\n\t\treturn null;\r\n\t\t}\r\n\t\treturn {\r\n\t\tscheme: match[1],\r\n\t\tauth: match[2],\r\n\t\thost: match[3],\r\n\t\tport: match[4],\r\n\t\tpath: match[5]\r\n\t\t};\r\n\t}\r\n\texports.urlParse = urlParse;\r\n\r\n\tfunction urlGenerate(aParsedUrl) {\r\n\t\tvar url = '';\r\n\t\tif (aParsedUrl.scheme) {\r\n\t\turl += aParsedUrl.scheme + ':';\r\n\t\t}\r\n\t\turl += '//';\r\n\t\tif (aParsedUrl.auth) {\r\n\t\turl += aParsedUrl.auth + '@';\r\n\t\t}\r\n\t\tif (aParsedUrl.host) {\r\n\t\turl += aParsedUrl.host;\r\n\t\t}\r\n\t\tif (aParsedUrl.port) {\r\n\t\turl += \":\" + aParsedUrl.port\r\n\t\t}\r\n\t\tif (aParsedUrl.path) {\r\n\t\turl += aParsedUrl.path;\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\texports.urlGenerate = urlGenerate;\r\n\r\n\t/**\r\n\t* Normalizes a path, or the path portion of a URL:\r\n\t*\r\n\t* - Replaces consequtive slashes with one slash.\r\n\t* - Removes unnecessary '.' parts.\r\n\t* - Removes unnecessary '<dir>/..' parts.\r\n\t*\r\n\t* Based on code in the Node.js 'path' core module.\r\n\t*\r\n\t* @param aPath The path or url to normalize.\r\n\t*/\r\n\tfunction normalize(aPath) {\r\n\t\tvar path = aPath;\r\n\t\tvar url = urlParse(aPath);\r\n\t\tif (url) {\r\n\t\tif (!url.path) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\t\tpath = url.path;\r\n\t\t}\r\n\t\tvar isAbsolute = exports.isAbsolute(path);\r\n\r\n\t\tvar parts = path.split(/\\/+/);\r\n\t\tfor (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\r\n\t\tpart = parts[i];\r\n\t\tif (part === '.') {\r\n\t\t\tparts.splice(i, 1);\r\n\t\t} else if (part === '..') {\r\n\t\t\tup++;\r\n\t\t} else if (up > 0) {\r\n\t\t\tif (part === '') {\r\n\t\t\t// The first part is blank if the path is absolute. Trying to go\r\n\t\t\t// above the root is a no-op. Therefore we can remove all '..' parts\r\n\t\t\t// directly after the root.\r\n\t\t\tparts.splice(i + 1, up);\r\n\t\t\tup = 0;\r\n\t\t\t} else {\r\n\t\t\tparts.splice(i, 2);\r\n\t\t\tup--;\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t\tpath = parts.join('/');\r\n\r\n\t\tif (path === '') {\r\n\t\tpath = isAbsolute ? '/' : '.';\r\n\t\t}\r\n\r\n\t\tif (url) {\r\n\t\turl.path = path;\r\n\t\treturn urlGenerate(url);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\texports.normalize = normalize;\r\n\r\n\t/**\r\n\t* Joins two paths/URLs.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be joined with the root.\r\n\t*\r\n\t* - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\r\n\t*   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\r\n\t*   first.\r\n\t* - Otherwise aPath is a path. If aRoot is a URL, then its path portion\r\n\t*   is updated with the result and aRoot is returned. Otherwise the result\r\n\t*   is returned.\r\n\t*   - If aPath is absolute, the result is aPath.\r\n\t*   - Otherwise the two paths are joined with a slash.\r\n\t* - Joining for example 'http://' and 'www.example.com' is also supported.\r\n\t*/\r\n\tfunction join(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\t\tif (aPath === \"\") {\r\n\t\taPath = \".\";\r\n\t\t}\r\n\t\tvar aPathUrl = urlParse(aPath);\r\n\t\tvar aRootUrl = urlParse(aRoot);\r\n\t\tif (aRootUrl) {\r\n\t\taRoot = aRootUrl.path || '/';\r\n\t\t}\r\n\r\n\t\t// `join(foo, '//www.example.org')`\r\n\t\tif (aPathUrl && !aPathUrl.scheme) {\r\n\t\tif (aRootUrl) {\r\n\t\t\taPathUrl.scheme = aRootUrl.scheme;\r\n\t\t}\r\n\t\treturn urlGenerate(aPathUrl);\r\n\t\t}\r\n\r\n\t\tif (aPathUrl || aPath.match(dataUrlRegexp)) {\r\n\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// `join('http://', 'www.example.com')`\r\n\t\tif (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\r\n\t\taRootUrl.host = aPath;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\r\n\t\tvar joined = aPath.charAt(0) === '/'\r\n\t\t? aPath\r\n\t\t: normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\r\n\r\n\t\tif (aRootUrl) {\r\n\t\taRootUrl.path = joined;\r\n\t\treturn urlGenerate(aRootUrl);\r\n\t\t}\r\n\t\treturn joined;\r\n\t}\r\n\texports.join = join;\r\n\r\n\texports.isAbsolute = function (aPath) {\r\n\t\treturn aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\r\n\t};\r\n\r\n\t/**\r\n\t* Make a path relative to a URL or another path.\r\n\t*\r\n\t* @param aRoot The root path or URL.\r\n\t* @param aPath The path or URL to be made relative to aRoot.\r\n\t*/\r\n\tfunction relative(aRoot, aPath) {\r\n\t\tif (aRoot === \"\") {\r\n\t\taRoot = \".\";\r\n\t\t}\r\n\r\n\t\taRoot = aRoot.replace(/\\/$/, '');\r\n\r\n\t\t// It is possible for the path to be above the root. In this case, simply\r\n\t\t// checking whether the root is a prefix of the path won't work. Instead, we\r\n\t\t// need to remove components from the root one by one, until either we find\r\n\t\t// a prefix that fits, or we run out of components to remove.\r\n\t\tvar level = 0;\r\n\t\twhile (aPath.indexOf(aRoot + '/') !== 0) {\r\n\t\tvar index = aRoot.lastIndexOf(\"/\");\r\n\t\tif (index < 0) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t// If the only part of the root that is left is the scheme (i.e. http://,\r\n\t\t// file:///, etc.), one or more slashes (/), or simply nothing at all, we\r\n\t\t// have exhausted all components, so the path is not relative to the root.\r\n\t\taRoot = aRoot.slice(0, index);\r\n\t\tif (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\r\n\t\t\treturn aPath;\r\n\t\t}\r\n\r\n\t\t++level;\r\n\t\t}\r\n\r\n\t\t// Make sure we add a \"../\" for each component we removed from the root.\r\n\t\treturn Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\r\n\t}\r\n\texports.relative = relative;\r\n\r\n\tvar supportsNullProto = (function () {\r\n\t\tvar obj = Object.create(null);\r\n\t\treturn !('__proto__' in obj);\r\n\t}());\r\n\r\n\tfunction identity (s) {\r\n\t\treturn s;\r\n\t}\r\n\r\n\t/**\r\n\t* Because behavior goes wacky when you set `__proto__` on objects, we\r\n\t* have to prefix all the strings in our set with an arbitrary character.\r\n\t*\r\n\t* See https://github.com/mozilla/source-map/pull/31 and\r\n\t* https://github.com/mozilla/source-map/issues/30\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tfunction toSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn '$' + aStr;\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.toSetString = supportsNullProto ? identity : toSetString;\r\n\r\n\tfunction fromSetString(aStr) {\r\n\t\tif (isProtoString(aStr)) {\r\n\t\treturn aStr.slice(1);\r\n\t\t}\r\n\r\n\t\treturn aStr;\r\n\t}\r\n\texports.fromSetString = supportsNullProto ? identity : fromSetString;\r\n\r\n\tfunction isProtoString(s) {\r\n\t\tif (!s) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar length = s.length;\r\n\r\n\t\tif (length < 9 /* \"__proto__\".length */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 2) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 3) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 4) !== 116 /* 't' */ ||\r\n\t\t\ts.charCodeAt(length - 5) !== 111 /* 'o' */ ||\r\n\t\t\ts.charCodeAt(length - 6) !== 114 /* 'r' */ ||\r\n\t\t\ts.charCodeAt(length - 7) !== 112 /* 'p' */ ||\r\n\t\t\ts.charCodeAt(length - 8) !== 95  /* '_' */ ||\r\n\t\t\ts.charCodeAt(length - 9) !== 95  /* '_' */) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor (var i = length - 10; i >= 0; i--) {\r\n\t\tif (s.charCodeAt(i) !== 36 /* '$' */) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings where the original positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same original source/line/column, but different generated\r\n\t* line and column the same. Useful when searching for a mapping with a\r\n\t* stubbed out mapping.\r\n\t*/\r\n\tfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\r\n\t\tvar cmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0 || onlyCompareOriginal) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByOriginalPositions = compareByOriginalPositions;\r\n\r\n\t/**\r\n\t* Comparator between two mappings with deflated source and name indices where\r\n\t* the generated positions are compared.\r\n\t*\r\n\t* Optionally pass in `true` as `onlyCompareGenerated` to consider two\r\n\t* mappings with the same generated line and column, but different\r\n\t* source/name/original line and column the same. Useful when searching for a\r\n\t* mapping with a stubbed out mapping.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0 || onlyCompareGenerated) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.source - mappingB.source;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn mappingA.name - mappingB.name;\r\n\t}\r\n\texports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\r\n\r\n\tfunction strcmp(aStr1, aStr2) {\r\n\t\tif (aStr1 === aStr2) {\r\n\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif (aStr1 > aStr2) {\r\n\t\treturn 1;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t* Comparator between two mappings with inflated source and name strings where\r\n\t* the generated positions are compared.\r\n\t*/\r\n\tfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\r\n\t\tvar cmp = mappingA.generatedLine - mappingB.generatedLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.generatedColumn - mappingB.generatedColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = strcmp(mappingA.source, mappingB.source);\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalLine - mappingB.originalLine;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\tcmp = mappingA.originalColumn - mappingB.originalColumn;\r\n\t\tif (cmp !== 0) {\r\n\t\treturn cmp;\r\n\t\t}\r\n\r\n\t\treturn strcmp(mappingA.name, mappingB.name);\r\n\t}\r\n\texports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\r\n\r\n\r\n/***/ },\r\n/* 5 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar has = Object.prototype.hasOwnProperty;\r\n\r\n\t/**\r\n\t* A data structure which is a combination of an array and a set. Adding a new\r\n\t* member is O(1), testing for membership is O(1), and finding the index of an\r\n\t* element is O(1). Removing elements from the set is not supported. Only\r\n\t* strings are supported for membership.\r\n\t*/\r\n\tfunction ArraySet() {\r\n\t\tthis._array = [];\r\n\t\tthis._set = Object.create(null);\r\n\t}\r\n\r\n\t/**\r\n\t* Static method for creating ArraySet instances from an existing array.\r\n\t*/\r\n\tArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\r\n\t\tvar set = new ArraySet();\r\n\t\tfor (var i = 0, len = aArray.length; i < len; i++) {\r\n\t\tset.add(aArray[i], aAllowDuplicates);\r\n\t\t}\r\n\t\treturn set;\r\n\t};\r\n\r\n\t/**\r\n\t* Return how many unique items are in this ArraySet. If duplicates have been\r\n\t* added, than those do not count towards the size.\r\n\t*\r\n\t* @returns Number\r\n\t*/\r\n\tArraySet.prototype.size = function ArraySet_size() {\r\n\t\treturn Object.getOwnPropertyNames(this._set).length;\r\n\t};\r\n\r\n\t/**\r\n\t* Add the given string to this set.\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tvar isDuplicate = has.call(this._set, sStr);\r\n\t\tvar idx = this._array.length;\r\n\t\tif (!isDuplicate || aAllowDuplicates) {\r\n\t\tthis._array.push(aStr);\r\n\t\t}\r\n\t\tif (!isDuplicate) {\r\n\t\tthis._set[sStr] = idx;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Is the given string a member of this set?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.has = function ArraySet_has(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\treturn has.call(this._set, sStr);\r\n\t};\r\n\r\n\t/**\r\n\t* What is the index of the given string in the array?\r\n\t*\r\n\t* @param String aStr\r\n\t*/\r\n\tArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\r\n\t\tvar sStr = util.toSetString(aStr);\r\n\t\tif (has.call(this._set, sStr)) {\r\n\t\treturn this._set[sStr];\r\n\t\t}\r\n\t\tthrow new Error('\"' + aStr + '\" is not in the set.');\r\n\t};\r\n\r\n\t/**\r\n\t* What is the element at the given index?\r\n\t*\r\n\t* @param Number aIdx\r\n\t*/\r\n\tArraySet.prototype.at = function ArraySet_at(aIdx) {\r\n\t\tif (aIdx >= 0 && aIdx < this._array.length) {\r\n\t\treturn this._array[aIdx];\r\n\t\t}\r\n\t\tthrow new Error('No element indexed by ' + aIdx);\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the array representation of this set (which has the proper indices\r\n\t* indicated by indexOf). Note that this is a copy of the internal array used\r\n\t* for storing the members so that no one can mess with internal state.\r\n\t*/\r\n\tArraySet.prototype.toArray = function ArraySet_toArray() {\r\n\t\treturn this._array.slice();\r\n\t};\r\n\r\n\texports.ArraySet = ArraySet;\r\n\r\n\r\n/***/ },\r\n/* 6 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2014 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t/**\r\n\t* Determine whether mappingB is after mappingA with respect to generated\r\n\t* position.\r\n\t*/\r\n\tfunction generatedPositionAfter(mappingA, mappingB) {\r\n\t\t// Optimized for most common case\r\n\t\tvar lineA = mappingA.generatedLine;\r\n\t\tvar lineB = mappingB.generatedLine;\r\n\t\tvar columnA = mappingA.generatedColumn;\r\n\t\tvar columnB = mappingB.generatedColumn;\r\n\t\treturn lineB > lineA || lineB == lineA && columnB >= columnA ||\r\n\t\t\tutil.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\r\n\t}\r\n\r\n\t/**\r\n\t* A data structure to provide a sorted view of accumulated mappings in a\r\n\t* performance conscious manner. It trades a neglibable overhead in general\r\n\t* case for a large speedup in case of mappings being added in order.\r\n\t*/\r\n\tfunction MappingList() {\r\n\t\tthis._array = [];\r\n\t\tthis._sorted = true;\r\n\t\t// Serves as infimum\r\n\t\tthis._last = {generatedLine: -1, generatedColumn: 0};\r\n\t}\r\n\r\n\t/**\r\n\t* Iterate through internal items. This method takes the same arguments that\r\n\t* `Array.prototype.forEach` takes.\r\n\t*\r\n\t* NOTE: The order of the mappings is NOT guaranteed.\r\n\t*/\r\n\tMappingList.prototype.unsortedForEach =\r\n\t\tfunction MappingList_forEach(aCallback, aThisArg) {\r\n\t\tthis._array.forEach(aCallback, aThisArg);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add the given source mapping.\r\n\t*\r\n\t* @param Object aMapping\r\n\t*/\r\n\tMappingList.prototype.add = function MappingList_add(aMapping) {\r\n\t\tif (generatedPositionAfter(this._last, aMapping)) {\r\n\t\tthis._last = aMapping;\r\n\t\tthis._array.push(aMapping);\r\n\t\t} else {\r\n\t\tthis._sorted = false;\r\n\t\tthis._array.push(aMapping);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the flat, sorted array of mappings. The mappings are sorted by\r\n\t* generated position.\r\n\t*\r\n\t* WARNING: This method returns internal data without copying, for\r\n\t* performance. The return value must NOT be mutated, and should be treated as\r\n\t* an immutable borrow. If you want to take ownership, you must make your own\r\n\t* copy.\r\n\t*/\r\n\tMappingList.prototype.toArray = function MappingList_toArray() {\r\n\t\tif (!this._sorted) {\r\n\t\tthis._array.sort(util.compareByGeneratedPositionsInflated);\r\n\t\tthis._sorted = true;\r\n\t\t}\r\n\t\treturn this._array;\r\n\t};\r\n\r\n\texports.MappingList = MappingList;\r\n\r\n\r\n/***/ },\r\n/* 7 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar util = __webpack_require__(4);\r\n\tvar binarySearch = __webpack_require__(8);\r\n\tvar ArraySet = __webpack_require__(5).ArraySet;\r\n\tvar base64VLQ = __webpack_require__(2);\r\n\tvar quickSort = __webpack_require__(9).quickSort;\r\n\r\n\tfunction SourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\treturn sourceMap.sections != null\r\n\t\t? new IndexedSourceMapConsumer(sourceMap)\r\n\t\t: new BasicSourceMapConsumer(sourceMap);\r\n\t}\r\n\r\n\tSourceMapConsumer.fromSourceMap = function(aSourceMap) {\r\n\t\treturn BasicSourceMapConsumer.fromSourceMap(aSourceMap);\r\n\t}\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tSourceMapConsumer.prototype._version = 3;\r\n\r\n\t// `__generatedMappings` and `__originalMappings` are arrays that hold the\r\n\t// parsed mapping coordinates from the source map's \"mappings\" attribute. They\r\n\t// are lazily instantiated, accessed via the `_generatedMappings` and\r\n\t// `_originalMappings` getters respectively, and we only parse the mappings\r\n\t// and create these arrays once queried for a source location. We jump through\r\n\t// these hoops because there can be many thousands of mappings, and parsing\r\n\t// them is expensive, so we only want to do it if we must.\r\n\t//\r\n\t// Each object in the arrays is of the form:\r\n\t//\r\n\t//     {\r\n\t//       generatedLine: The line number in the generated code,\r\n\t//       generatedColumn: The column number in the generated code,\r\n\t//       source: The path to the original source file that generated this\r\n\t//               chunk of code,\r\n\t//       originalLine: The line number in the original source that\r\n\t//                     corresponds to this chunk of generated code,\r\n\t//       originalColumn: The column number in the original source that\r\n\t//                       corresponds to this chunk of generated code,\r\n\t//       name: The name of the original symbol which generated this chunk of\r\n\t//             code.\r\n\t//     }\r\n\t//\r\n\t// All properties except for `generatedLine` and `generatedColumn` can be\r\n\t// `null`.\r\n\t//\r\n\t// `_generatedMappings` is ordered by the generated positions.\r\n\t//\r\n\t// `_originalMappings` is ordered by the original positions.\r\n\r\n\tSourceMapConsumer.prototype.__generatedMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__generatedMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__generatedMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype.__originalMappings = null;\r\n\tObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\r\n\t\tget: function () {\r\n\t\tif (!this.__originalMappings) {\r\n\t\t\tthis._parseMappings(this._mappings, this.sourceRoot);\r\n\t\t}\r\n\r\n\t\treturn this.__originalMappings;\r\n\t\t}\r\n\t});\r\n\r\n\tSourceMapConsumer.prototype._charIsMappingSeparator =\r\n\t\tfunction SourceMapConsumer_charIsMappingSeparator(aStr, index) {\r\n\t\tvar c = aStr.charAt(index);\r\n\t\treturn c === \";\" || c === \",\";\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthrow new Error(\"Subclasses must implement _parseMappings\");\r\n\t\t};\r\n\r\n\tSourceMapConsumer.GENERATED_ORDER = 1;\r\n\tSourceMapConsumer.ORIGINAL_ORDER = 2;\r\n\r\n\tSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\r\n\tSourceMapConsumer.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Iterate over each mapping between an original source/line/column and a\r\n\t* generated line/column in this source map.\r\n\t*\r\n\t* @param Function aCallback\r\n\t*        The function that is called with each mapping.\r\n\t* @param Object aContext\r\n\t*        Optional. If specified, this object will be the value of `this` every\r\n\t*        time that `aCallback` is called.\r\n\t* @param aOrder\r\n\t*        Either `SourceMapConsumer.GENERATED_ORDER` or\r\n\t*        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\r\n\t*        iterate over the mappings sorted by the generated file's line/column\r\n\t*        order or the original's source/line/column order, respectively. Defaults to\r\n\t*        `SourceMapConsumer.GENERATED_ORDER`.\r\n\t*/\r\n\tSourceMapConsumer.prototype.eachMapping =\r\n\t\tfunction SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\r\n\t\tvar context = aContext || null;\r\n\t\tvar order = aOrder || SourceMapConsumer.GENERATED_ORDER;\r\n\r\n\t\tvar mappings;\r\n\t\tswitch (order) {\r\n\t\tcase SourceMapConsumer.GENERATED_ORDER:\r\n\t\t\tmappings = this._generatedMappings;\r\n\t\t\tbreak;\r\n\t\tcase SourceMapConsumer.ORIGINAL_ORDER:\r\n\t\t\tmappings = this._originalMappings;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(\"Unknown order of iteration.\");\r\n\t\t}\r\n\r\n\t\tvar sourceRoot = this.sourceRoot;\r\n\t\tmappings.map(function (mapping) {\r\n\t\t\tvar source = mapping.source === null ? null : this._sources.at(mapping.source);\r\n\t\t\tif (source != null && sourceRoot != null) {\r\n\t\t\tsource = util.join(sourceRoot, source);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\tsource: source,\r\n\t\t\tgeneratedLine: mapping.generatedLine,\r\n\t\t\tgeneratedColumn: mapping.generatedColumn,\r\n\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\tname: mapping.name === null ? null : this._names.at(mapping.name)\r\n\t\t\t};\r\n\t\t}, this).forEach(aCallback, context);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns all generated line and column information for the original source,\r\n\t* line, and column provided. If no column is provided, returns all mappings\r\n\t* corresponding to a either the line we are searching for or the next\r\n\t* closest line that has any mappings. Otherwise, returns all mappings\r\n\t* corresponding to the given line and either the column we are searching for\r\n\t* or the next closest column that has any offsets.\r\n\t*\r\n\t* The only argument is an object with the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: Optional. the column number in the original source.\r\n\t*\r\n\t* and an array of objects is returned, each with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tSourceMapConsumer.prototype.allGeneratedPositionsFor =\r\n\t\tfunction SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\r\n\t\tvar line = util.getArg(aArgs, 'line');\r\n\r\n\t\t// When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\r\n\t\t// returns the index of the closest mapping less than the needle. By\r\n\t\t// setting needle.originalColumn to 0, we thus find the last mapping for\r\n\t\t// the given line, provided such a mapping exists.\r\n\t\tvar needle = {\r\n\t\t\tsource: util.getArg(aArgs, 'source'),\r\n\t\t\toriginalLine: line,\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column', 0)\r\n\t\t};\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tneedle.source = util.relative(this.sourceRoot, needle.source);\r\n\t\t}\r\n\t\tif (!this._sources.has(needle.source)) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tneedle.source = this._sources.indexOf(needle.source);\r\n\r\n\t\tvar mappings = [];\r\n\r\n\t\tvar index = this._findMapping(needle,\r\n\t\t\t\t\t\t\t\t\t\tthis._originalMappings,\r\n\t\t\t\t\t\t\t\t\t\t\"originalLine\",\r\n\t\t\t\t\t\t\t\t\t\t\"originalColumn\",\r\n\t\t\t\t\t\t\t\t\t\tutil.compareByOriginalPositions,\r\n\t\t\t\t\t\t\t\t\t\tbinarySearch.LEAST_UPPER_BOUND);\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (aArgs.column === undefined) {\r\n\t\t\tvar originalLine = mapping.originalLine;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we found. Since\r\n\t\t\t// mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we found.\r\n\t\t\twhile (mapping && mapping.originalLine === originalLine) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tvar originalColumn = mapping.originalColumn;\r\n\r\n\t\t\t// Iterate until either we run out of mappings, or we run into\r\n\t\t\t// a mapping for a different line than the one we were searching for.\r\n\t\t\t// Since mappings are sorted, this is guaranteed to find all mappings for\r\n\t\t\t// the line we are searching for.\r\n\t\t\twhile (mapping &&\r\n\t\t\t\t\tmapping.originalLine === line &&\r\n\t\t\t\t\tmapping.originalColumn == originalColumn) {\r\n\t\t\t\tmappings.push({\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapping = this._originalMappings[++index];\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mappings;\r\n\t\t};\r\n\r\n\texports.SourceMapConsumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* A BasicSourceMapConsumer instance represents a parsed source map which we can\r\n\t* query for information about the original file positions by giving it a file\r\n\t* position in the generated source.\r\n\t*\r\n\t* The only parameter is the raw source map (either as a JSON string, or\r\n\t* already parsed to an object). According to the spec, source maps have the\r\n\t* following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - sources: An array of URLs to the original source files.\r\n\t*   - names: An array of identifiers which can be referrenced by individual mappings.\r\n\t*   - sourceRoot: Optional. The URL root from which all sources are relative.\r\n\t*   - sourcesContent: Optional. An array of contents of the original source files.\r\n\t*   - mappings: A string of base64 VLQs which contain the actual mappings.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*\r\n\t* Here is an example source map, taken from the source map spec[0]:\r\n\t*\r\n\t*     {\r\n\t*       version : 3,\r\n\t*       file: \"out.js\",\r\n\t*       sourceRoot : \"\",\r\n\t*       sources: [\"foo.js\", \"bar.js\"],\r\n\t*       names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*       mappings: \"AA,AB;;ABCDE;\"\r\n\t*     }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\r\n\t*/\r\n\tfunction BasicSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sources = util.getArg(sourceMap, 'sources');\r\n\t\t// Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\r\n\t\t// requires the array) to play nice here.\r\n\t\tvar names = util.getArg(sourceMap, 'names', []);\r\n\t\tvar sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\r\n\t\tvar sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\r\n\t\tvar mappings = util.getArg(sourceMap, 'mappings');\r\n\t\tvar file = util.getArg(sourceMap, 'file', null);\r\n\r\n\t\t// Once again, Sass deviates from the spec and supplies the version as a\r\n\t\t// string rather than a number, so we use loose equality checking here.\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tsources = sources\r\n\t\t.map(String)\r\n\t\t// Some source maps produce relative source paths like \"./foo.js\" instead of\r\n\t\t// \"foo.js\".  Normalize these first so that future comparisons will succeed.\r\n\t\t// See bugzil.la/1090768.\r\n\t\t.map(util.normalize)\r\n\t\t// Always ensure that absolute sources are internally stored relative to\r\n\t\t// the source root, if the source root is absolute. Not doing this would\r\n\t\t// be particularly problematic when the source root is a prefix of the\r\n\t\t// source (valid, but why??). See github issue #199 and bugzil.la/1188982.\r\n\t\t.map(function (source) {\r\n\t\t\treturn sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\r\n\t\t\t? util.relative(sourceRoot, source)\r\n\t\t\t: source;\r\n\t\t});\r\n\r\n\t\t// Pass `true` below to allow duplicate names and sources. While source maps\r\n\t\t// are intended to be compressed and deduplicated, the TypeScript compiler\r\n\t\t// sometimes generates source maps with duplicates in them. See Github issue\r\n\t\t// #72 and bugzil.la/889492.\r\n\t\tthis._names = ArraySet.fromArray(names.map(String), true);\r\n\t\tthis._sources = ArraySet.fromArray(sources, true);\r\n\r\n\t\tthis.sourceRoot = sourceRoot;\r\n\t\tthis.sourcesContent = sourcesContent;\r\n\t\tthis._mappings = mappings;\r\n\t\tthis.file = file;\r\n\t}\r\n\r\n\tBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* Create a BasicSourceMapConsumer from a SourceMapGenerator.\r\n\t*\r\n\t* @param SourceMapGenerator aSourceMap\r\n\t*        The source map that will be consumed.\r\n\t* @returns BasicSourceMapConsumer\r\n\t*/\r\n\tBasicSourceMapConsumer.fromSourceMap =\r\n\t\tfunction SourceMapConsumer_fromSourceMap(aSourceMap) {\r\n\t\tvar smc = Object.create(BasicSourceMapConsumer.prototype);\r\n\r\n\t\tvar names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\r\n\t\tvar sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\r\n\t\tsmc.sourceRoot = aSourceMap._sourceRoot;\r\n\t\tsmc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmc.sourceRoot);\r\n\t\tsmc.file = aSourceMap._file;\r\n\r\n\t\t// Because we are modifying the entries (by converting string sources and\r\n\t\t// names to indices into the sources and names ArraySets), we have to make\r\n\t\t// a copy of the entry or else bad things happen. Shared mutable state\r\n\t\t// strikes again! See github issue #191.\r\n\r\n\t\tvar generatedMappings = aSourceMap._mappings.toArray().slice();\r\n\t\tvar destGeneratedMappings = smc.__generatedMappings = [];\r\n\t\tvar destOriginalMappings = smc.__originalMappings = [];\r\n\r\n\t\tfor (var i = 0, length = generatedMappings.length; i < length; i++) {\r\n\t\t\tvar srcMapping = generatedMappings[i];\r\n\t\t\tvar destMapping = new Mapping;\r\n\t\t\tdestMapping.generatedLine = srcMapping.generatedLine;\r\n\t\t\tdestMapping.generatedColumn = srcMapping.generatedColumn;\r\n\r\n\t\t\tif (srcMapping.source) {\r\n\t\t\tdestMapping.source = sources.indexOf(srcMapping.source);\r\n\t\t\tdestMapping.originalLine = srcMapping.originalLine;\r\n\t\t\tdestMapping.originalColumn = srcMapping.originalColumn;\r\n\r\n\t\t\tif (srcMapping.name) {\r\n\t\t\t\tdestMapping.name = names.indexOf(srcMapping.name);\r\n\t\t\t}\r\n\r\n\t\t\tdestOriginalMappings.push(destMapping);\r\n\t\t\t}\r\n\r\n\t\t\tdestGeneratedMappings.push(destMapping);\r\n\t\t}\r\n\r\n\t\tquickSort(smc.__originalMappings, util.compareByOriginalPositions);\r\n\r\n\t\treturn smc;\r\n\t\t};\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\treturn this._sources.toArray().map(function (s) {\r\n\t\t\treturn this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\r\n\t\t}, this);\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Provide the JIT with a nice shape / hidden class.\r\n\t*/\r\n\tfunction Mapping() {\r\n\t\tthis.generatedLine = 0;\r\n\t\tthis.generatedColumn = 0;\r\n\t\tthis.source = null;\r\n\t\tthis.originalLine = null;\r\n\t\tthis.originalColumn = null;\r\n\t\tthis.name = null;\r\n\t}\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tvar generatedLine = 1;\r\n\t\tvar previousGeneratedColumn = 0;\r\n\t\tvar previousOriginalLine = 0;\r\n\t\tvar previousOriginalColumn = 0;\r\n\t\tvar previousSource = 0;\r\n\t\tvar previousName = 0;\r\n\t\tvar length = aStr.length;\r\n\t\tvar index = 0;\r\n\t\tvar cachedSegments = {};\r\n\t\tvar temp = {};\r\n\t\tvar originalMappings = [];\r\n\t\tvar generatedMappings = [];\r\n\t\tvar mapping, str, segment, end, value;\r\n\r\n\t\twhile (index < length) {\r\n\t\t\tif (aStr.charAt(index) === ';') {\r\n\t\t\tgeneratedLine++;\r\n\t\t\tindex++;\r\n\t\t\tpreviousGeneratedColumn = 0;\r\n\t\t\t}\r\n\t\t\telse if (aStr.charAt(index) === ',') {\r\n\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tmapping = new Mapping();\r\n\t\t\tmapping.generatedLine = generatedLine;\r\n\r\n\t\t\t// Because each offset is encoded relative to the previous one,\r\n\t\t\t// many segments often have the same encoding. We can exploit this\r\n\t\t\t// fact by caching the parsed variable length fields of each segment,\r\n\t\t\t// allowing us to avoid a second parse if we encounter the same\r\n\t\t\t// segment again.\r\n\t\t\tfor (end = index; end < length; end++) {\r\n\t\t\t\tif (this._charIsMappingSeparator(aStr, end)) {\r\n\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstr = aStr.slice(index, end);\r\n\r\n\t\t\tsegment = cachedSegments[str];\r\n\t\t\tif (segment) {\r\n\t\t\t\tindex += str.length;\r\n\t\t\t} else {\r\n\t\t\t\tsegment = [];\r\n\t\t\t\twhile (index < end) {\r\n\t\t\t\tbase64VLQ.decode(aStr, index, temp);\r\n\t\t\t\tvalue = temp.value;\r\n\t\t\t\tindex = temp.rest;\r\n\t\t\t\tsegment.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 2) {\r\n\t\t\t\tthrow new Error('Found a source, but no line and column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (segment.length === 3) {\r\n\t\t\t\tthrow new Error('Found a source and line, but no column');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcachedSegments[str] = segment;\r\n\t\t\t}\r\n\r\n\t\t\t// Generated column.\r\n\t\t\tmapping.generatedColumn = previousGeneratedColumn + segment[0];\r\n\t\t\tpreviousGeneratedColumn = mapping.generatedColumn;\r\n\r\n\t\t\tif (segment.length > 1) {\r\n\t\t\t\t// Original source.\r\n\t\t\t\tmapping.source = previousSource + segment[1];\r\n\t\t\t\tpreviousSource += segment[1];\r\n\r\n\t\t\t\t// Original line.\r\n\t\t\t\tmapping.originalLine = previousOriginalLine + segment[2];\r\n\t\t\t\tpreviousOriginalLine = mapping.originalLine;\r\n\t\t\t\t// Lines are stored 0-based\r\n\t\t\t\tmapping.originalLine += 1;\r\n\r\n\t\t\t\t// Original column.\r\n\t\t\t\tmapping.originalColumn = previousOriginalColumn + segment[3];\r\n\t\t\t\tpreviousOriginalColumn = mapping.originalColumn;\r\n\r\n\t\t\t\tif (segment.length > 4) {\r\n\t\t\t\t// Original name.\r\n\t\t\t\tmapping.name = previousName + segment[4];\r\n\t\t\t\tpreviousName += segment[4];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgeneratedMappings.push(mapping);\r\n\t\t\tif (typeof mapping.originalLine === 'number') {\r\n\t\t\t\toriginalMappings.push(mapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tthis.__generatedMappings = generatedMappings;\r\n\r\n\t\tquickSort(originalMappings, util.compareByOriginalPositions);\r\n\t\tthis.__originalMappings = originalMappings;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Find the mapping that best matches the hypothetical \"needle\" mapping that\r\n\t* we are searching for in the given \"haystack\" of mappings.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype._findMapping =\r\n\t\tfunction SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\r\n\t\t\t\t\t\t\t\t\t\t\taColumnName, aComparator, aBias) {\r\n\t\t// To return the position we are searching for, we must first find the\r\n\t\t// mapping for the given position and then return the opposite position it\r\n\t\t// points to. Because the mappings are sorted, we can use binary search to\r\n\t\t// find the best mapping.\r\n\r\n\t\tif (aNeedle[aLineName] <= 0) {\r\n\t\t\tthrow new TypeError('Line must be greater than or equal to 1, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aLineName]);\r\n\t\t}\r\n\t\tif (aNeedle[aColumnName] < 0) {\r\n\t\t\tthrow new TypeError('Column must be greater than or equal to 0, got '\r\n\t\t\t\t\t\t\t\t+ aNeedle[aColumnName]);\r\n\t\t}\r\n\r\n\t\treturn binarySearch.search(aNeedle, aMappings, aComparator, aBias);\r\n\t\t};\r\n\r\n\t/**\r\n\t* Compute the last column for each generated mapping. The last column is\r\n\t* inclusive.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.computeColumnSpans =\r\n\t\tfunction SourceMapConsumer_computeColumnSpans() {\r\n\t\tfor (var index = 0; index < this._generatedMappings.length; ++index) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\t// Mappings do not contain a field for the last generated columnt. We\r\n\t\t\t// can come up with an optimistic estimate, however, by assuming that\r\n\t\t\t// mappings are contiguous (i.e. given two consecutive mappings, the\r\n\t\t\t// first mapping ends where the second one starts).\r\n\t\t\tif (index + 1 < this._generatedMappings.length) {\r\n\t\t\tvar nextMapping = this._generatedMappings[index + 1];\r\n\r\n\t\t\tif (mapping.generatedLine === nextMapping.generatedLine) {\r\n\t\t\t\tmapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// The last mapping for each line spans the entire line.\r\n\t\t\tmapping.lastGeneratedColumn = Infinity;\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction SourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._generatedMappings,\r\n\t\t\t\"generatedLine\",\r\n\t\t\t\"generatedColumn\",\r\n\t\t\tutil.compareByGeneratedPositionsDeflated,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._generatedMappings[index];\r\n\r\n\t\t\tif (mapping.generatedLine === needle.generatedLine) {\r\n\t\t\tvar source = util.getArg(mapping, 'source', null);\r\n\t\t\tif (source !== null) {\r\n\t\t\t\tsource = this._sources.at(source);\r\n\t\t\t\tif (this.sourceRoot != null) {\r\n\t\t\t\tsource = util.join(this.sourceRoot, source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar name = util.getArg(mapping, 'name', null);\r\n\t\t\tif (name !== null) {\r\n\t\t\t\tname = this._names.at(name);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tline: util.getArg(mapping, 'originalLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'originalColumn', null),\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction BasicSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.sourcesContent.length >= this._sources.size() &&\r\n\t\t\t!this.sourcesContent.some(function (sc) { return sc == null; });\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tif (!this.sourcesContent) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\taSource = util.relative(this.sourceRoot, aSource);\r\n\t\t}\r\n\r\n\t\tif (this._sources.has(aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(aSource)];\r\n\t\t}\r\n\r\n\t\tvar url;\r\n\t\tif (this.sourceRoot != null\r\n\t\t\t&& (url = util.urlParse(this.sourceRoot))) {\r\n\t\t\t// XXX: file:// URIs and absolute paths lead to unexpected behavior for\r\n\t\t\t// many users. We can help them out when they expect file:// URIs to\r\n\t\t\t// behave like it would if they were running a local HTTP server. See\r\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\r\n\t\t\tvar fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\r\n\t\t\tif (url.scheme == \"file\"\r\n\t\t\t\t&& this._sources.has(fileUriAbsPath)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\r\n\t\t\t}\r\n\r\n\t\t\tif ((!url.path || url.path == \"/\")\r\n\t\t\t\t&& this._sources.has(\"/\" + aSource)) {\r\n\t\t\treturn this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// This function is used recursively from\r\n\t\t// IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\r\n\t\t// don't want to throw if we can't find the source - we just want to\r\n\t\t// return null, so we provide a flag to exit gracefully.\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\r\n\t*     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tBasicSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction SourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tvar source = util.getArg(aArgs, 'source');\r\n\t\tif (this.sourceRoot != null) {\r\n\t\t\tsource = util.relative(this.sourceRoot, source);\r\n\t\t}\r\n\t\tif (!this._sources.has(source)) {\r\n\t\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t\t};\r\n\t\t}\r\n\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\tvar needle = {\r\n\t\t\tsource: source,\r\n\t\t\toriginalLine: util.getArg(aArgs, 'line'),\r\n\t\t\toriginalColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\tvar index = this._findMapping(\r\n\t\t\tneedle,\r\n\t\t\tthis._originalMappings,\r\n\t\t\t\"originalLine\",\r\n\t\t\t\"originalColumn\",\r\n\t\t\tutil.compareByOriginalPositions,\r\n\t\t\tutil.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\r\n\t\t);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tvar mapping = this._originalMappings[index];\r\n\r\n\t\t\tif (mapping.source === needle.source) {\r\n\t\t\treturn {\r\n\t\t\t\tline: util.getArg(mapping, 'generatedLine', null),\r\n\t\t\t\tcolumn: util.getArg(mapping, 'generatedColumn', null),\r\n\t\t\t\tlastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tlastColumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\texports.BasicSourceMapConsumer = BasicSourceMapConsumer;\r\n\r\n\t/**\r\n\t* An IndexedSourceMapConsumer instance represents a parsed source map which\r\n\t* we can query for information. It differs from BasicSourceMapConsumer in\r\n\t* that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\r\n\t* input.\r\n\t*\r\n\t* The only parameter is a raw source map (either as a JSON string, or already\r\n\t* parsed to an object). According to the spec for indexed source maps, they\r\n\t* have the following attributes:\r\n\t*\r\n\t*   - version: Which version of the source map spec this map is following.\r\n\t*   - file: Optional. The generated file this source map is associated with.\r\n\t*   - sections: A list of section definitions.\r\n\t*\r\n\t* Each value under the \"sections\" field has two fields:\r\n\t*   - offset: The offset into the original specified at which this section\r\n\t*       begins to apply, defined as an object with a \"line\" and \"column\"\r\n\t*       field.\r\n\t*   - map: A source map definition. This source map could also be indexed,\r\n\t*       but doesn't have to be.\r\n\t*\r\n\t* Instead of the \"map\" field, it's also possible to have a \"url\" field\r\n\t* specifying a URL to retrieve a source map from, but that's currently\r\n\t* unsupported.\r\n\t*\r\n\t* Here's an example source map, taken from the source map spec[0], but\r\n\t* modified to omit a section which uses the \"url\" field.\r\n\t*\r\n\t*  {\r\n\t*    version : 3,\r\n\t*    file: \"app.js\",\r\n\t*    sections: [{\r\n\t*      offset: {line:100, column:10},\r\n\t*      map: {\r\n\t*        version : 3,\r\n\t*        file: \"section.js\",\r\n\t*        sources: [\"foo.js\", \"bar.js\"],\r\n\t*        names: [\"src\", \"maps\", \"are\", \"fun\"],\r\n\t*        mappings: \"AAAA,E;;ABCDE;\"\r\n\t*      }\r\n\t*    }],\r\n\t*  }\r\n\t*\r\n\t* [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\r\n\t*/\r\n\tfunction IndexedSourceMapConsumer(aSourceMap) {\r\n\t\tvar sourceMap = aSourceMap;\r\n\t\tif (typeof aSourceMap === 'string') {\r\n\t\tsourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\r\n\t\t}\r\n\r\n\t\tvar version = util.getArg(sourceMap, 'version');\r\n\t\tvar sections = util.getArg(sourceMap, 'sections');\r\n\r\n\t\tif (version != this._version) {\r\n\t\tthrow new Error('Unsupported version: ' + version);\r\n\t\t}\r\n\r\n\t\tthis._sources = new ArraySet();\r\n\t\tthis._names = new ArraySet();\r\n\r\n\t\tvar lastOffset = {\r\n\t\tline: -1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tthis._sections = sections.map(function (s) {\r\n\t\tif (s.url) {\r\n\t\t\t// The url field will require support for asynchronicity.\r\n\t\t\t// See https://github.com/mozilla/source-map/issues/16\r\n\t\t\tthrow new Error('Support for url field in sections not implemented.');\r\n\t\t}\r\n\t\tvar offset = util.getArg(s, 'offset');\r\n\t\tvar offsetLine = util.getArg(offset, 'line');\r\n\t\tvar offsetColumn = util.getArg(offset, 'column');\r\n\r\n\t\tif (offsetLine < lastOffset.line ||\r\n\t\t\t(offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\r\n\t\t\tthrow new Error('Section offsets must be ordered and non-overlapping.');\r\n\t\t}\r\n\t\tlastOffset = offset;\r\n\r\n\t\treturn {\r\n\t\t\tgeneratedOffset: {\r\n\t\t\t// The offset fields are 0-based, but we use 1-based indices when\r\n\t\t\t// encoding/decoding from VLQ.\r\n\t\t\tgeneratedLine: offsetLine + 1,\r\n\t\t\tgeneratedColumn: offsetColumn + 1\r\n\t\t\t},\r\n\t\t\tconsumer: new SourceMapConsumer(util.getArg(s, 'map'))\r\n\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\r\n\tIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\r\n\r\n\t/**\r\n\t* The version of the source mapping spec that we are consuming.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._version = 3;\r\n\r\n\t/**\r\n\t* The list of original sources.\r\n\t*/\r\n\tObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\r\n\t\tget: function () {\r\n\t\tvar sources = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tfor (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\r\n\t\t\tsources.push(this._sections[i].consumer.sources[j]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sources;\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t* Returns the original source, line, and column information for the generated\r\n\t* source's line and column positions provided. The only argument is an object\r\n\t* with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source.\r\n\t*   - column: The column number in the generated source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - source: The original source file, or null.\r\n\t*   - line: The line number in the original source, or null.\r\n\t*   - column: The column number in the original source, or null.\r\n\t*   - name: The original identifier, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.originalPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_originalPositionFor(aArgs) {\r\n\t\tvar needle = {\r\n\t\t\tgeneratedLine: util.getArg(aArgs, 'line'),\r\n\t\t\tgeneratedColumn: util.getArg(aArgs, 'column')\r\n\t\t};\r\n\r\n\t\t// Find the section containing the generated position we're trying to map\r\n\t\t// to an original position.\r\n\t\tvar sectionIndex = binarySearch.search(needle, this._sections,\r\n\t\t\tfunction(needle, section) {\r\n\t\t\tvar cmp = needle.generatedLine - section.generatedOffset.generatedLine;\r\n\t\t\tif (cmp) {\r\n\t\t\t\treturn cmp;\r\n\t\t\t}\r\n\r\n\t\t\treturn (needle.generatedColumn -\r\n\t\t\t\t\tsection.generatedOffset.generatedColumn);\r\n\t\t\t});\r\n\t\tvar section = this._sections[sectionIndex];\r\n\r\n\t\tif (!section) {\r\n\t\t\treturn {\r\n\t\t\tsource: null,\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null,\r\n\t\t\tname: null\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn section.consumer.originalPositionFor({\r\n\t\t\tline: needle.generatedLine -\r\n\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\tcolumn: needle.generatedColumn -\r\n\t\t\t(section.generatedOffset.generatedLine === needle.generatedLine\r\n\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t: 0),\r\n\t\t\tbias: aArgs.bias\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return true if we have the source content for every source in the source\r\n\t* map, false otherwise.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\r\n\t\tfunction IndexedSourceMapConsumer_hasContentsOfAllSources() {\r\n\t\treturn this._sections.every(function (s) {\r\n\t\t\treturn s.consumer.hasContentsOfAllSources();\r\n\t\t});\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the original source content. The only argument is the url of the\r\n\t* original source file. Returns null if no original source content is\r\n\t* available.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.sourceContentFor =\r\n\t\tfunction IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\tvar content = section.consumer.sourceContentFor(aSource, true);\r\n\t\t\tif (content) {\r\n\t\t\treturn content;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nullOnMissing) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('\"' + aSource + '\" is not in the SourceMap.');\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Returns the generated line and column information for the original source,\r\n\t* line, and column positions provided. The only argument is an object with\r\n\t* the following properties:\r\n\t*\r\n\t*   - source: The filename of the original source.\r\n\t*   - line: The line number in the original source.\r\n\t*   - column: The column number in the original source.\r\n\t*\r\n\t* and an object is returned with the following properties:\r\n\t*\r\n\t*   - line: The line number in the generated source, or null.\r\n\t*   - column: The column number in the generated source, or null.\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype.generatedPositionFor =\r\n\t\tfunction IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\r\n\t\t\t// Only consider this section if the requested source is in the list of\r\n\t\t\t// sources of the consumer.\r\n\t\t\tif (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\r\n\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar generatedPosition = section.consumer.generatedPositionFor(aArgs);\r\n\t\t\tif (generatedPosition) {\r\n\t\t\tvar ret = {\r\n\t\t\t\tline: generatedPosition.line +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tcolumn: generatedPosition.column +\r\n\t\t\t\t(section.generatedOffset.generatedLine === generatedPosition.line\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0)\r\n\t\t\t};\r\n\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tline: null,\r\n\t\t\tcolumn: null\r\n\t\t};\r\n\t\t};\r\n\r\n\t/**\r\n\t* Parse the mappings in a string in to a data structure which we can easily\r\n\t* query (the ordered arrays in the `this.__generatedMappings` and\r\n\t* `this.__originalMappings` properties).\r\n\t*/\r\n\tIndexedSourceMapConsumer.prototype._parseMappings =\r\n\t\tfunction IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\r\n\t\tthis.__generatedMappings = [];\r\n\t\tthis.__originalMappings = [];\r\n\t\tfor (var i = 0; i < this._sections.length; i++) {\r\n\t\t\tvar section = this._sections[i];\r\n\t\t\tvar sectionMappings = section.consumer._generatedMappings;\r\n\t\t\tfor (var j = 0; j < sectionMappings.length; j++) {\r\n\t\t\tvar mapping = sectionMappings[j];\r\n\r\n\t\t\tvar source = section.consumer._sources.at(mapping.source);\r\n\t\t\tif (section.consumer.sourceRoot !== null) {\r\n\t\t\t\tsource = util.join(section.consumer.sourceRoot, source);\r\n\t\t\t}\r\n\t\t\tthis._sources.add(source);\r\n\t\t\tsource = this._sources.indexOf(source);\r\n\r\n\t\t\tvar name = section.consumer._names.at(mapping.name);\r\n\t\t\tthis._names.add(name);\r\n\t\t\tname = this._names.indexOf(name);\r\n\r\n\t\t\t// The mappings coming from the consumer for the section have\r\n\t\t\t// generated positions relative to the start of the section, so we\r\n\t\t\t// need to offset them to be relative to the start of the concatenated\r\n\t\t\t// generated file.\r\n\t\t\tvar adjustedMapping = {\r\n\t\t\t\tsource: source,\r\n\t\t\t\tgeneratedLine: mapping.generatedLine +\r\n\t\t\t\t(section.generatedOffset.generatedLine - 1),\r\n\t\t\t\tgeneratedColumn: mapping.generatedColumn +\r\n\t\t\t\t(section.generatedOffset.generatedLine === mapping.generatedLine\r\n\t\t\t\t? section.generatedOffset.generatedColumn - 1\r\n\t\t\t\t: 0),\r\n\t\t\t\toriginalLine: mapping.originalLine,\r\n\t\t\t\toriginalColumn: mapping.originalColumn,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t\tthis.__generatedMappings.push(adjustedMapping);\r\n\t\t\tif (typeof adjustedMapping.originalLine === 'number') {\r\n\t\t\t\tthis.__originalMappings.push(adjustedMapping);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tquickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\r\n\t\tquickSort(this.__originalMappings, util.compareByOriginalPositions);\r\n\t\t};\r\n\r\n\texports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\r\n\r\n\r\n/***/ },\r\n/* 8 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\texports.GREATEST_LOWER_BOUND = 1;\r\n\texports.LEAST_UPPER_BOUND = 2;\r\n\r\n\t/**\r\n\t* Recursive implementation of binary search.\r\n\t*\r\n\t* @param aLow Indices here and lower do not contain the needle.\r\n\t* @param aHigh Indices here and higher do not contain the needle.\r\n\t* @param aNeedle The element being searched for.\r\n\t* @param aHaystack The non-empty array being searched.\r\n\t* @param aCompare Function which takes two elements and returns -1, 0, or 1.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*/\r\n\tfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\r\n\t\t// This function terminates when one of the following is true:\r\n\t\t//\r\n\t\t//   1. We find the exact element we are looking for.\r\n\t\t//\r\n\t\t//   2. We did not find the exact element, but we can return the index of\r\n\t\t//      the next-closest element.\r\n\t\t//\r\n\t\t//   3. We did not find the exact element, and there is no next-closest\r\n\t\t//      element than the one we are searching for, so we return -1.\r\n\t\tvar mid = Math.floor((aHigh - aLow) / 2) + aLow;\r\n\t\tvar cmp = aCompare(aNeedle, aHaystack[mid], true);\r\n\t\tif (cmp === 0) {\r\n\t\t// Found the element we are looking for.\r\n\t\treturn mid;\r\n\t\t}\r\n\t\telse if (cmp > 0) {\r\n\t\t// Our needle is greater than aHaystack[mid].\r\n\t\tif (aHigh - mid > 1) {\r\n\t\t\t// The element is in the upper half.\r\n\t\t\treturn recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// The exact needle element was not found in this haystack. Determine if\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn aHigh < aHaystack.length ? aHigh : -1;\r\n\t\t} else {\r\n\t\t\treturn mid;\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t// Our needle is less than aHaystack[mid].\r\n\t\tif (mid - aLow > 1) {\r\n\t\t\t// The element is in the lower half.\r\n\t\t\treturn recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\r\n\t\t}\r\n\r\n\t\t// we are in termination case (3) or (2) and return the appropriate thing.\r\n\t\tif (aBias == exports.LEAST_UPPER_BOUND) {\r\n\t\t\treturn mid;\r\n\t\t} else {\r\n\t\t\treturn aLow < 0 ? -1 : aLow;\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* This is an implementation of binary search which will always try and return\r\n\t* the index of the closest element if there is no exact hit. This is because\r\n\t* mappings between original and generated line/col pairs are single points,\r\n\t* and there is an implicit region between each of them, so a miss just means\r\n\t* that you aren't on the very start of a region.\r\n\t*\r\n\t* @param aNeedle The element you are looking for.\r\n\t* @param aHaystack The array that is being searched.\r\n\t* @param aCompare A function which takes the needle and an element in the\r\n\t*     array and returns -1, 0, or 1 depending on whether the needle is less\r\n\t*     than, equal to, or greater than the element, respectively.\r\n\t* @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\r\n\t*     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\r\n\t*     closest element that is smaller than or greater than the one we are\r\n\t*     searching for, respectively, if the exact element cannot be found.\r\n\t*     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\r\n\t*/\r\n\texports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\r\n\t\tif (aHaystack.length === 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tvar index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\r\n\t\t\t\t\t\t\t\t\taCompare, aBias || exports.GREATEST_LOWER_BOUND);\r\n\t\tif (index < 0) {\r\n\t\treturn -1;\r\n\t\t}\r\n\r\n\t\t// We have found either the exact element, or the next-closest element than\r\n\t\t// the one we are searching for. However, there may be more than one such\r\n\t\t// element. Make sure we always return the smallest of these.\r\n\t\twhile (index - 1 >= 0) {\r\n\t\tif (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t--index;\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 9 */\r\n/***/ function(module, exports) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\t// It turns out that some (most?) JavaScript engines don't self-host\r\n\t// `Array.prototype.sort`. This makes sense because C++ will likely remain\r\n\t// faster than JS when doing raw CPU-intensive sorting. However, when using a\r\n\t// custom comparator function, calling back and forth between the VM's C++ and\r\n\t// JIT'd JS is rather slow *and* loses JIT type information, resulting in\r\n\t// worse generated code for the comparator function than would be optimal. In\r\n\t// fact, when sorting with a comparator, these costs outweigh the benefits of\r\n\t// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\r\n\t// a ~3500ms mean speed-up in `bench/bench.html`.\r\n\r\n\t/**\r\n\t* Swap the elements indexed by `x` and `y` in the array `ary`.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        The array.\r\n\t* @param {Number} x\r\n\t*        The index of the first item.\r\n\t* @param {Number} y\r\n\t*        The index of the second item.\r\n\t*/\r\n\tfunction swap(ary, x, y) {\r\n\t\tvar temp = ary[x];\r\n\t\tary[x] = ary[y];\r\n\t\tary[y] = temp;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a random integer within the range `low .. high` inclusive.\r\n\t*\r\n\t* @param {Number} low\r\n\t*        The lower bound on the range.\r\n\t* @param {Number} high\r\n\t*        The upper bound on the range.\r\n\t*/\r\n\tfunction randomIntInRange(low, high) {\r\n\t\treturn Math.round(low + (Math.random() * (high - low)));\r\n\t}\r\n\r\n\t/**\r\n\t* The Quick Sort algorithm.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t* @param {Number} p\r\n\t*        Start index of the array\r\n\t* @param {Number} r\r\n\t*        End index of the array\r\n\t*/\r\n\tfunction doQuickSort(ary, comparator, p, r) {\r\n\t\t// If our lower bound is less than our upper bound, we (1) partition the\r\n\t\t// array into two pieces and (2) recurse on each half. If it is not, this is\r\n\t\t// the empty array and our base case.\r\n\r\n\t\tif (p < r) {\r\n\t\t// (1) Partitioning.\r\n\t\t//\r\n\t\t// The partitioning chooses a pivot between `p` and `r` and moves all\r\n\t\t// elements that are less than or equal to the pivot to the before it, and\r\n\t\t// all the elements that are greater than it after it. The effect is that\r\n\t\t// once partition is done, the pivot is in the exact place it will be when\r\n\t\t// the array is put in sorted order, and it will not need to be moved\r\n\t\t// again. This runs in O(n) time.\r\n\r\n\t\t// Always choose a random pivot so that an input array which is reverse\r\n\t\t// sorted does not cause O(n^2) running time.\r\n\t\tvar pivotIndex = randomIntInRange(p, r);\r\n\t\tvar i = p - 1;\r\n\r\n\t\tswap(ary, pivotIndex, r);\r\n\t\tvar pivot = ary[r];\r\n\r\n\t\t// Immediately after `j` is incremented in this loop, the following hold\r\n\t\t// true:\r\n\t\t//\r\n\t\t//   * Every element in `ary[p .. i]` is less than or equal to the pivot.\r\n\t\t//\r\n\t\t//   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\r\n\t\tfor (var j = p; j < r; j++) {\r\n\t\t\tif (comparator(ary[j], pivot) <= 0) {\r\n\t\t\ti += 1;\r\n\t\t\tswap(ary, i, j);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswap(ary, i + 1, j);\r\n\t\tvar q = i + 1;\r\n\r\n\t\t// (2) Recurse on each half.\r\n\r\n\t\tdoQuickSort(ary, comparator, p, q - 1);\r\n\t\tdoQuickSort(ary, comparator, q + 1, r);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Sort the given array in-place with the given comparator function.\r\n\t*\r\n\t* @param {Array} ary\r\n\t*        An array to sort.\r\n\t* @param {function} comparator\r\n\t*        Function to use to compare two items.\r\n\t*/\r\n\texports.quickSort = function (ary, comparator) {\r\n\t\tdoQuickSort(ary, comparator, 0, ary.length - 1);\r\n\t};\r\n\r\n\r\n/***/ },\r\n/* 10 */\r\n/***/ function(module, exports, __webpack_require__) {\r\n\r\n\t/* -*- Mode: js; js-indent-level: 2; -*- */\r\n\t/*\r\n\t* Copyright 2011 Mozilla Foundation and contributors\r\n\t* Licensed under the New BSD license. See LICENSE or:\r\n\t* http://opensource.org/licenses/BSD-3-Clause\r\n\t*/\r\n\r\n\tvar SourceMapGenerator = __webpack_require__(1).SourceMapGenerator;\r\n\tvar util = __webpack_require__(4);\r\n\r\n\t// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\r\n\t// operating systems these days (capturing the result).\r\n\tvar REGEX_NEWLINE = /(\\r?\\n)/;\r\n\r\n\t// Newline character code for charCodeAt() comparisons\r\n\tvar NEWLINE_CODE = 10;\r\n\r\n\t// Private symbol for identifying `SourceNode`s when multiple versions of\r\n\t// the source-map library are loaded. This MUST NOT CHANGE across\r\n\t// versions!\r\n\tvar isSourceNode = \"$$$isSourceNode$$$\";\r\n\r\n\t/**\r\n\t* SourceNodes provide a way to abstract over interpolating/concatenating\r\n\t* snippets of generated JavaScript source code while maintaining the line and\r\n\t* column information associated with the original source code.\r\n\t*\r\n\t* @param aLine The original line number.\r\n\t* @param aColumn The original column number.\r\n\t* @param aSource The original source's filename.\r\n\t* @param aChunks Optional. An array of strings which are snippets of\r\n\t*        generated JS, or other SourceNodes.\r\n\t* @param aName The original identifier.\r\n\t*/\r\n\tfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\r\n\t\tthis.children = [];\r\n\t\tthis.sourceContents = {};\r\n\t\tthis.line = aLine == null ? null : aLine;\r\n\t\tthis.column = aColumn == null ? null : aColumn;\r\n\t\tthis.source = aSource == null ? null : aSource;\r\n\t\tthis.name = aName == null ? null : aName;\r\n\t\tthis[isSourceNode] = true;\r\n\t\tif (aChunks != null) this.add(aChunks);\r\n\t}\r\n\r\n\t/**\r\n\t* Creates a SourceNode from generated code and a SourceMapConsumer.\r\n\t*\r\n\t* @param aGeneratedCode The generated code\r\n\t* @param aSourceMapConsumer The SourceMap for the generated code\r\n\t* @param aRelativePath Optional. The path that relative sources in the\r\n\t*        SourceMapConsumer should be relative to.\r\n\t*/\r\n\tSourceNode.fromStringWithSourceMap =\r\n\t\tfunction SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\r\n\t\t// The SourceNode we want to fill with the generated code\r\n\t\t// and the SourceMap\r\n\t\tvar node = new SourceNode();\r\n\r\n\t\t// All even indices of this array are one line of the generated code,\r\n\t\t// while all odd indices are the newlines between two adjacent lines\r\n\t\t// (since `REGEX_NEWLINE` captures its match).\r\n\t\t// Processed fragments are removed from this array, by calling `shiftNextLine`.\r\n\t\tvar remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\r\n\t\tvar shiftNextLine = function() {\r\n\t\t\tvar lineContents = remainingLines.shift();\r\n\t\t\t// The last line of a file might not have a newline.\r\n\t\t\tvar newLine = remainingLines.shift() || \"\";\r\n\t\t\treturn lineContents + newLine;\r\n\t\t};\r\n\r\n\t\t// We need to remember the position of \"remainingLines\"\r\n\t\tvar lastGeneratedLine = 1, lastGeneratedColumn = 0;\r\n\r\n\t\t// The generate SourceNodes we need a code range.\r\n\t\t// To extract it current and last mapping is used.\r\n\t\t// Here we store the last mapping.\r\n\t\tvar lastMapping = null;\r\n\r\n\t\taSourceMapConsumer.eachMapping(function (mapping) {\r\n\t\t\tif (lastMapping !== null) {\r\n\t\t\t// We add the code from \"lastMapping\" to \"mapping\":\r\n\t\t\t// First check if there is a new line in between.\r\n\t\t\tif (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\t\t// Associate first line with \"lastMapping\"\r\n\t\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t\tlastGeneratedLine++;\r\n\t\t\t\tlastGeneratedColumn = 0;\r\n\t\t\t\t// The remaining code is added without mapping\r\n\t\t\t} else {\r\n\t\t\t\t// There is no new line in between.\r\n\t\t\t\t// Associate the code between \"lastGeneratedColumn\" and\r\n\t\t\t\t// \"mapping.generatedColumn\" with \"lastMapping\"\r\n\t\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\t\tvar code = nextLine.substr(0, mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlastGeneratedColumn);\r\n\t\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t\taddMappingWithCode(lastMapping, code);\r\n\t\t\t\t// No more remaining code, continue\r\n\t\t\t\tlastMapping = mapping;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\t// We add the generated code until the first mapping\r\n\t\t\t// to the SourceNode without any mapping.\r\n\t\t\t// Each line is added as separate string.\r\n\t\t\twhile (lastGeneratedLine < mapping.generatedLine) {\r\n\t\t\tnode.add(shiftNextLine());\r\n\t\t\tlastGeneratedLine++;\r\n\t\t\t}\r\n\t\t\tif (lastGeneratedColumn < mapping.generatedColumn) {\r\n\t\t\tvar nextLine = remainingLines[0];\r\n\t\t\tnode.add(nextLine.substr(0, mapping.generatedColumn));\r\n\t\t\tremainingLines[0] = nextLine.substr(mapping.generatedColumn);\r\n\t\t\tlastGeneratedColumn = mapping.generatedColumn;\r\n\t\t\t}\r\n\t\t\tlastMapping = mapping;\r\n\t\t}, this);\r\n\t\t// We have processed all mappings.\r\n\t\tif (remainingLines.length > 0) {\r\n\t\t\tif (lastMapping) {\r\n\t\t\t// Associate the remaining code in the current line with \"lastMapping\"\r\n\t\t\taddMappingWithCode(lastMapping, shiftNextLine());\r\n\t\t\t}\r\n\t\t\t// and add the remaining lines without any mapping\r\n\t\t\tnode.add(remainingLines.join(\"\"));\r\n\t\t}\r\n\r\n\t\t// Copy sourcesContent into SourceNode\r\n\t\taSourceMapConsumer.sources.forEach(function (sourceFile) {\r\n\t\t\tvar content = aSourceMapConsumer.sourceContentFor(sourceFile);\r\n\t\t\tif (content != null) {\r\n\t\t\tif (aRelativePath != null) {\r\n\t\t\t\tsourceFile = util.join(aRelativePath, sourceFile);\r\n\t\t\t}\r\n\t\t\tnode.setSourceContent(sourceFile, content);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn node;\r\n\r\n\t\tfunction addMappingWithCode(mapping, code) {\r\n\t\t\tif (mapping === null || mapping.source === undefined) {\r\n\t\t\tnode.add(code);\r\n\t\t\t} else {\r\n\t\t\tvar source = aRelativePath\r\n\t\t\t\t? util.join(aRelativePath, mapping.source)\r\n\t\t\t\t: mapping.source;\r\n\t\t\tnode.add(new SourceNode(mapping.originalLine,\r\n\t\t\t\t\t\t\t\t\tmapping.originalColumn,\r\n\t\t\t\t\t\t\t\t\tsource,\r\n\t\t\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\t\t\tmapping.name));\r\n\t\t\t}\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.add = function SourceNode_add(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\taChunk.forEach(function (chunk) {\r\n\t\t\tthis.add(chunk);\r\n\t\t}, this);\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tif (aChunk) {\r\n\t\t\tthis.children.push(aChunk);\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Add a chunk of generated JS to the beginning of this source node.\r\n\t*\r\n\t* @param aChunk A string snippet of generated JS code, another instance of\r\n\t*        SourceNode, or an array where each member is one of those things.\r\n\t*/\r\n\tSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\r\n\t\tif (Array.isArray(aChunk)) {\r\n\t\tfor (var i = aChunk.length-1; i >= 0; i--) {\r\n\t\t\tthis.prepend(aChunk[i]);\r\n\t\t}\r\n\t\t}\r\n\t\telse if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\r\n\t\tthis.children.unshift(aChunk);\r\n\t\t}\r\n\t\telse {\r\n\t\tthrow new TypeError(\r\n\t\t\t\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\r\n\t\t);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of JS snippets in this node and its children. The\r\n\t* walking function is called once for each snippet of JS and is passed that\r\n\t* snippet and the its original associated source's line/column location.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walk = function SourceNode_walk(aFn) {\r\n\t\tvar chunk;\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\tchunk = this.children[i];\r\n\t\tif (chunk[isSourceNode]) {\r\n\t\t\tchunk.walk(aFn);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (chunk !== '') {\r\n\t\t\taFn(chunk, { source: this.source,\r\n\t\t\t\t\t\tline: this.line,\r\n\t\t\t\t\t\tcolumn: this.column,\r\n\t\t\t\t\t\tname: this.name });\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\r\n\t* each of `this.children`.\r\n\t*\r\n\t* @param aSep The separator.\r\n\t*/\r\n\tSourceNode.prototype.join = function SourceNode_join(aSep) {\r\n\t\tvar newChildren;\r\n\t\tvar i;\r\n\t\tvar len = this.children.length;\r\n\t\tif (len > 0) {\r\n\t\tnewChildren = [];\r\n\t\tfor (i = 0; i < len-1; i++) {\r\n\t\t\tnewChildren.push(this.children[i]);\r\n\t\t\tnewChildren.push(aSep);\r\n\t\t}\r\n\t\tnewChildren.push(this.children[i]);\r\n\t\tthis.children = newChildren;\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Call String.prototype.replace on the very right-most source snippet. Useful\r\n\t* for trimming whitespace from the end of a source node, etc.\r\n\t*\r\n\t* @param aPattern The pattern to replace.\r\n\t* @param aReplacement The thing to replace the pattern with.\r\n\t*/\r\n\tSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\r\n\t\tvar lastChild = this.children[this.children.length - 1];\r\n\t\tif (lastChild[isSourceNode]) {\r\n\t\tlastChild.replaceRight(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse if (typeof lastChild === 'string') {\r\n\t\tthis.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\r\n\t\t}\r\n\t\telse {\r\n\t\tthis.children.push(''.replace(aPattern, aReplacement));\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t* Set the source content for a source file. This will be added to the SourceMapGenerator\r\n\t* in the sourcesContent field.\r\n\t*\r\n\t* @param aSourceFile The filename of the source file\r\n\t* @param aSourceContent The content of the source file\r\n\t*/\r\n\tSourceNode.prototype.setSourceContent =\r\n\t\tfunction SourceNode_setSourceContent(aSourceFile, aSourceContent) {\r\n\t\tthis.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\r\n\t\t};\r\n\r\n\t/**\r\n\t* Walk over the tree of SourceNodes. The walking function is called for each\r\n\t* source file content and is passed the filename and source content.\r\n\t*\r\n\t* @param aFn The traversal function.\r\n\t*/\r\n\tSourceNode.prototype.walkSourceContents =\r\n\t\tfunction SourceNode_walkSourceContents(aFn) {\r\n\t\tfor (var i = 0, len = this.children.length; i < len; i++) {\r\n\t\t\tif (this.children[i][isSourceNode]) {\r\n\t\t\tthis.children[i].walkSourceContents(aFn);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sources = Object.keys(this.sourceContents);\r\n\t\tfor (var i = 0, len = sources.length; i < len; i++) {\r\n\t\t\taFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\r\n\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t* Return the string representation of this source node. Walks over the tree\r\n\t* and concatenates all the various snippets together to one string.\r\n\t*/\r\n\tSourceNode.prototype.toString = function SourceNode_toString() {\r\n\t\tvar str = \"\";\r\n\t\tthis.walk(function (chunk) {\r\n\t\tstr += chunk;\r\n\t\t});\r\n\t\treturn str;\r\n\t};\r\n\r\n\t/**\r\n\t* Returns the string representation of this source node along with a source\r\n\t* map.\r\n\t*/\r\n\tSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\r\n\t\tvar generated = {\r\n\t\tcode: \"\",\r\n\t\tline: 1,\r\n\t\tcolumn: 0\r\n\t\t};\r\n\t\tvar map = new SourceMapGenerator(aArgs);\r\n\t\tvar sourceMappingActive = false;\r\n\t\tvar lastOriginalSource = null;\r\n\t\tvar lastOriginalLine = null;\r\n\t\tvar lastOriginalColumn = null;\r\n\t\tvar lastOriginalName = null;\r\n\t\tthis.walk(function (chunk, original) {\r\n\t\tgenerated.code += chunk;\r\n\t\tif (original.source !== null\r\n\t\t\t&& original.line !== null\r\n\t\t\t&& original.column !== null) {\r\n\t\t\tif(lastOriginalSource !== original.source\r\n\t\t\t|| lastOriginalLine !== original.line\r\n\t\t\t|| lastOriginalColumn !== original.column\r\n\t\t\t|| lastOriginalName !== original.name) {\r\n\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\tline: original.line,\r\n\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t});\r\n\t\t\t}\r\n\t\t\tlastOriginalSource = original.source;\r\n\t\t\tlastOriginalLine = original.line;\r\n\t\t\tlastOriginalColumn = original.column;\r\n\t\t\tlastOriginalName = original.name;\r\n\t\t\tsourceMappingActive = true;\r\n\t\t} else if (sourceMappingActive) {\r\n\t\t\tmap.addMapping({\r\n\t\t\tgenerated: {\r\n\t\t\t\tline: generated.line,\r\n\t\t\t\tcolumn: generated.column\r\n\t\t\t}\r\n\t\t\t});\r\n\t\t\tlastOriginalSource = null;\r\n\t\t\tsourceMappingActive = false;\r\n\t\t}\r\n\t\tfor (var idx = 0, length = chunk.length; idx < length; idx++) {\r\n\t\t\tif (chunk.charCodeAt(idx) === NEWLINE_CODE) {\r\n\t\t\tgenerated.line++;\r\n\t\t\tgenerated.column = 0;\r\n\t\t\t// Mappings end at eol\r\n\t\t\tif (idx + 1 === length) {\r\n\t\t\t\tlastOriginalSource = null;\r\n\t\t\t\tsourceMappingActive = false;\r\n\t\t\t} else if (sourceMappingActive) {\r\n\t\t\t\tmap.addMapping({\r\n\t\t\t\tsource: original.source,\r\n\t\t\t\toriginal: {\r\n\t\t\t\t\tline: original.line,\r\n\t\t\t\t\tcolumn: original.column\r\n\t\t\t\t},\r\n\t\t\t\tgenerated: {\r\n\t\t\t\t\tline: generated.line,\r\n\t\t\t\t\tcolumn: generated.column\r\n\t\t\t\t},\r\n\t\t\t\tname: original.name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\tgenerated.column++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t});\r\n\t\tthis.walkSourceContents(function (sourceFile, sourceContent) {\r\n\t\tmap.setSourceContent(sourceFile, sourceContent);\r\n\t\t});\r\n\r\n\t\treturn { code: generated.code, map: map };\r\n\t};\r\n\r\n\texports.SourceNode = SourceNode;\r\n\r\n\r\n/***/ }\r\n/******/ ])\r\n});\r\n;\r\n},{}],8:[function(require,module,exports){\r\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.StackTrace=e()}}(function(){var e;return function n(e,r,t){function o(a,s){if(!r[a]){if(!e[a]){var u=\"function\"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error(\"Cannot find module '\"+a+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(n){var r=e[a][1][n];return o(r?r:n)},l,l.exports,n,e,r,t)}return r[a].exports}for(var i=\"function\"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"error-stack-parser\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){\"use strict\";var n=/(^|@)\\S+\\:\\d+/,r=/^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m,t=/^(eval@)?(\\[native code\\])?$/;return{parse:function(e){if(\"undefined\"!=typeof e.stacktrace||\"undefined\"!=typeof e[\"opera#sourceloc\"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error(\"Cannot parse given Error object\")},extractLocation:function(e){if(e.indexOf(\":\")===-1)return[e];var n=/(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/,r=n.exec(e.replace(/[\\(\\)]/g,\"\"));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(n){var t=n.stack.split(\"\\n\").filter(function(e){return!!e.match(r)},this);return t.map(function(n){n.indexOf(\"(eval \")>-1&&(n=n.replace(/eval code/g,\"eval\").replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g,\"\"));var r=n.replace(/^\\s+/,\"\").replace(/\\(eval code/g,\"(\").split(/\\s+/).slice(1),t=this.extractLocation(r.pop()),o=r.join(\" \")||void 0,i=[\"eval\",\"<anonymous>\"].indexOf(t[0])>-1?void 0:t[0];return new e({functionName:o,fileName:i,lineNumber:t[1],columnNumber:t[2],source:n})},this)},parseFFOrSafari:function(n){var r=n.stack.split(\"\\n\").filter(function(e){return!e.match(t)},this);return r.map(function(n){if(n.indexOf(\" > eval\")>-1&&(n=n.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g,\":$1\")),n.indexOf(\"@\")===-1&&n.indexOf(\":\")===-1)return new e({functionName:n});var r=/((.*\".+\"[^@]*)?[^@]*)(?:@)/,t=n.match(r),o=t&&t[1]?t[1]:void 0,i=this.extractLocation(n.replace(r,\"\"));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:n})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(\"\\n\")>-1&&e.message.split(\"\\n\").length>e.stacktrace.split(\"\\n\").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)/i,t=n.message.split(\"\\n\"),o=[],i=2,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera10:function(n){for(var r=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i,t=n.stacktrace.split(\"\\n\"),o=[],i=0,a=t.length;i<a;i+=2){var s=r.exec(t[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:t[i]}))}return o},parseOpera11:function(r){var t=r.stack.split(\"\\n\").filter(function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return t.map(function(n){var r,t=n.split(\"@\"),o=this.extractLocation(t.pop()),i=t.shift()||\"\",a=i.replace(/<anonymous function(: (\\w+))?>/,\"$2\").replace(/\\([^\\)]*\\)/g,\"\")||void 0;i.match(/\\(([^\\)]*)\\)/)&&(r=i.replace(/^[^\\(]+\\(([^\\)]*)\\)$/,\"$1\"));var s=void 0===r||\"[arguments not available]\"===r?void 0:r.split(\",\");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:n})},this)}}})},{stackframe:3}],2:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stack-generator\",[\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"stackframe\")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(n){var r=[],t=10;\"object\"==typeof n&&\"number\"==typeof n.maxStackSize&&(t=n.maxStackSize);for(var o=arguments.callee;o&&r.length<t&&o.arguments;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\\s+([\\w$]+))+\\s*\\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch(s){break}}return r}}})},{stackframe:3}],3:[function(n,r,t){!function(n,o){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stackframe\",[],o):\"object\"==typeof t?r.exports=o():n.StackFrame=o()}(this,function(){\"use strict\";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function t(e){if(e instanceof Object)for(var r=0;r<u.length;r++)e.hasOwnProperty(u[r])&&void 0!==e[u[r]]&&this[\"set\"+n(u[r])](e[u[r]])}var o=[\"isConstructor\",\"isEval\",\"isNative\",\"isToplevel\"],i=[\"columnNumber\",\"lineNumber\"],a=[\"fileName\",\"functionName\",\"source\"],s=[\"args\"],u=o.concat(i,a,s);t.prototype={getArgs:function(){return this.args},setArgs:function(e){if(\"[object Array]\"!==Object.prototype.toString.call(e))throw new TypeError(\"Args must be an Array\");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof t)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError(\"Eval Origin must be an Object or StackFrame\");this.evalOrigin=new t(e)}},toString:function(){var n=this.getFunctionName()||\"{anonymous}\",r=\"(\"+(this.getArgs()||[]).join(\",\")+\")\",t=this.getFileName()?\"@\"+this.getFileName():\"\",o=e(this.getLineNumber())?\":\"+this.getLineNumber():\"\",i=e(this.getColumnNumber())?\":\"+this.getColumnNumber():\"\";return n+r+t+o+i}};for(var c=0;c<o.length;c++)t.prototype[\"get\"+n(o[c])]=r(o[c]),t.prototype[\"set\"+n(o[c])]=function(e){return function(n){this[e]=Boolean(n)}}(o[c]);for(var l=0;l<i.length;l++)t.prototype[\"get\"+n(i[l])]=r(i[l]),t.prototype[\"set\"+n(i[l])]=function(n){return function(r){if(!e(r))throw new TypeError(n+\" must be a Number\");this[n]=Number(r)}}(i[l]);for(var f=0;f<a.length;f++)t.prototype[\"get\"+n(a[f])]=r(a[f]),t.prototype[\"set\"+n(a[f])]=function(e){return function(n){this[e]=String(n)}}(a[f]);return t})},{}],4:[function(e,n,r){function t(){this._array=[],this._set=Object.create(null)}var o=e(\"./util\"),i=Object.prototype.hasOwnProperty;t.fromArray=function(e,n){for(var r=new t,o=0,i=e.length;o<i;o++)r.add(e[o],n);return r},t.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},t.prototype.add=function(e,n){var r=o.toSetString(e),t=i.call(this._set,r),a=this._array.length;t&&!n||this._array.push(e),t||(this._set[r]=a)},t.prototype.has=function(e){var n=o.toSetString(e);return i.call(this._set,n)},t.prototype.indexOf=function(e){var n=o.toSetString(e);if(i.call(this._set,n))return this._set[n];throw new Error('\"'+e+'\" is not in the set.')},t.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error(\"No element indexed by \"+e)},t.prototype.toArray=function(){return this._array.slice()},r.ArraySet=t},{\"./util\":10}],5:[function(e,n,r){function t(e){return e<0?(-e<<1)+1:(e<<1)+0}function o(e){var n=1===(1&e),r=e>>1;return n?-r:r}var i=e(\"./base64\"),a=5,s=1<<a,u=s-1,c=s;r.encode=function(e){var n,r=\"\",o=t(e);do n=o&u,o>>>=a,o>0&&(n|=c),r+=i.encode(n);while(o>0);return r},r.decode=function(e,n,r){var t,s,l=e.length,f=0,p=0;do{if(n>=l)throw new Error(\"Expected more digits in base 64 VLQ value.\");if(s=i.decode(e.charCodeAt(n++)),s===-1)throw new Error(\"Invalid base64 digit: \"+e.charAt(n-1));t=!!(s&c),s&=u,f+=s<<p,p+=a}while(t);r.value=o(f),r.rest=n}},{\"./base64\":6}],6:[function(e,n,r){var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\"\");r.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError(\"Must be between 0 and 63: \"+e)},r.decode=function(e){var n=65,r=90,t=97,o=122,i=48,a=57,s=43,u=47,c=26,l=52;return n<=e&&e<=r?e-n:t<=e&&e<=o?e-t+c:i<=e&&e<=a?e-i+l:e==s?62:e==u?63:-1}},{}],7:[function(e,n,r){function t(e,n,o,i,a,s){var u=Math.floor((n-e)/2)+e,c=a(o,i[u],!0);return 0===c?u:c>0?n-u>1?t(u,n,o,i,a,s):s==r.LEAST_UPPER_BOUND?n<i.length?n:-1:u:u-e>1?t(e,u,o,i,a,s):s==r.LEAST_UPPER_BOUND?u:e<0?-1:e}r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,n,o,i){if(0===n.length)return-1;var a=t(-1,n.length,e,n,o,i||r.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===o(n[a],n[a-1],!0);)--a;return a}},{}],8:[function(e,n,r){function t(e,n,r){var t=e[n];e[n]=e[r],e[r]=t}function o(e,n){return Math.round(e+Math.random()*(n-e))}function i(e,n,r,a){if(r<a){var s=o(r,a),u=r-1;t(e,s,a);for(var c=e[a],l=r;l<a;l++)n(e[l],c)<=0&&(u+=1,t(e,u,l));t(e,u+1,l);var f=u+1;i(e,n,r,f-1),i(e,n,f+1,a)}}r.quickSort=function(e,n){i(e,n,0,e.length-1)}},{}],9:[function(e,n,r){function t(e){var n=e;return\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\"))),null!=n.sections?new a(n):new o(n)}function o(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),t=s.getArg(n,\"sources\"),o=s.getArg(n,\"names\",[]),i=s.getArg(n,\"sourceRoot\",null),a=s.getArg(n,\"sourcesContent\",null),u=s.getArg(n,\"mappings\"),l=s.getArg(n,\"file\",null);if(r!=this._version)throw new Error(\"Unsupported version: \"+r);t=t.map(String).map(s.normalize).map(function(e){return i&&s.isAbsolute(i)&&s.isAbsolute(e)?s.relative(i,e):e}),this._names=c.fromArray(o.map(String),!0),this._sources=c.fromArray(t,!0),this.sourceRoot=i,this.sourcesContent=a,this._mappings=u,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function a(e){var n=e;\"string\"==typeof e&&(n=JSON.parse(e.replace(/^\\)\\]\\}'/,\"\")));var r=s.getArg(n,\"version\"),o=s.getArg(n,\"sections\");if(r!=this._version)throw new Error(\"Unsupported version: \"+r);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error(\"Support for url field in sections not implemented.\");var n=s.getArg(e,\"offset\"),r=s.getArg(n,\"line\"),o=s.getArg(n,\"column\");if(r<i.line||r===i.line&&o<i.column)throw new Error(\"Section offsets must be ordered and non-overlapping.\");return i=n,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new t(s.getArg(e,\"map\"))}})}var s=e(\"./util\"),u=e(\"./binary-search\"),c=e(\"./array-set\").ArraySet,l=e(\"./base64-vlq\"),f=e(\"./quick-sort\").quickSort;t.fromSourceMap=function(e){return o.fromSourceMap(e)},t.prototype._version=3,t.prototype.__generatedMappings=null,Object.defineProperty(t.prototype,\"_generatedMappings\",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),t.prototype.__originalMappings=null,Object.defineProperty(t.prototype,\"_originalMappings\",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),t.prototype._charIsMappingSeparator=function(e,n){var r=e.charAt(n);return\";\"===r||\",\"===r},t.prototype._parseMappings=function(e,n){throw new Error(\"Subclasses must implement _parseMappings\")},t.GENERATED_ORDER=1,t.ORIGINAL_ORDER=2,t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.prototype.eachMapping=function(e,n,r){var o,i=n||null,a=r||t.GENERATED_ORDER;switch(a){case t.GENERATED_ORDER:o=this._generatedMappings;break;case t.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error(\"Unknown order of iteration.\")}var u=this.sourceRoot;o.map(function(e){var n=null===e.source?null:this._sources.at(e.source);return null!=n&&null!=u&&(n=s.join(u,n)),{source:n,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},t.prototype.allGeneratedPositionsFor=function(e){var n=s.getArg(e,\"line\"),r={source:s.getArg(e,\"source\"),originalLine:n,originalColumn:s.getArg(e,\"column\",0)};if(null!=this.sourceRoot&&(r.source=s.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var t=[],o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var a=i.originalLine;i&&i.originalLine===a;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===n&&i.originalColumn==c;)t.push({line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}),i=this._originalMappings[++o]}return t},r.SourceMapConsumer=t,o.prototype=Object.create(t.prototype),o.prototype.consumer=t,o.fromSourceMap=function(e){var n=Object.create(o.prototype),r=n._names=c.fromArray(e._names.toArray(),!0),t=n._sources=c.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file;for(var a=e._mappings.toArray().slice(),u=n.__generatedMappings=[],l=n.__originalMappings=[],p=0,g=a.length;p<g;p++){var h=a[p],m=new i;m.generatedLine=h.generatedLine,m.generatedColumn=h.generatedColumn,h.source&&(m.source=t.indexOf(h.source),m.originalLine=h.originalLine,m.originalColumn=h.originalColumn,h.name&&(m.name=r.indexOf(h.name)),l.push(m)),u.push(m)}return f(n.__originalMappings,s.compareByOriginalPositions),n},o.prototype._version=3,Object.defineProperty(o.prototype,\"sources\",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?s.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,n){for(var r,t,o,a,u,c=1,p=0,g=0,h=0,m=0,d=0,v=e.length,_=0,y={},w={},b=[],C=[];_<v;)if(\";\"===e.charAt(_))c++,_++,p=0;else if(\",\"===e.charAt(_))_++;else{for(r=new i,r.generatedLine=c,a=_;a<v&&!this._charIsMappingSeparator(e,a);a++);if(t=e.slice(_,a),o=y[t])_+=t.length;else{for(o=[];_<a;)l.decode(e,_,w),u=w.value,_=w.rest,o.push(u);if(2===o.length)throw new Error(\"Found a source, but no line and column\");if(3===o.length)throw new Error(\"Found a source and line, but no column\");y[t]=o}r.generatedColumn=p+o[0],p=r.generatedColumn,o.length>1&&(r.source=m+o[1],m+=o[1],r.originalLine=g+o[2],g=r.originalLine,r.originalLine+=1,r.originalColumn=h+o[3],h=r.originalColumn,o.length>4&&(r.name=d+o[4],d+=o[4])),C.push(r),\"number\"==typeof r.originalLine&&b.push(r)}f(C,s.compareByGeneratedPositionsDeflated),this.__generatedMappings=C,f(b,s.compareByOriginalPositions),this.__originalMappings=b},o.prototype._findMapping=function(e,n,r,t,o,i){if(e[r]<=0)throw new TypeError(\"Line must be greater than or equal to 1, got \"+e[r]);if(e[t]<0)throw new TypeError(\"Column must be greater than or equal to 0, got \"+e[t]);return u.search(e,n,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=this._findMapping(n,this._generatedMappings,\"generatedLine\",\"generatedColumn\",s.compareByGeneratedPositionsDeflated,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===n.generatedLine){var i=s.getArg(o,\"source\",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=s.join(this.sourceRoot,i)));var a=s.getArg(o,\"name\",null);return null!==a&&(a=this._names.at(a)),{source:i,line:s.getArg(o,\"originalLine\",null),column:s.getArg(o,\"originalColumn\",null),name:a}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=s.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=s.urlParse(this.sourceRoot))){var t=e.replace(/^file:\\/\\//,\"\");if(\"file\"==r.scheme&&this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];if((!r.path||\"/\"==r.path)&&this._sources.has(\"/\"+e))return this.sourcesContent[this._sources.indexOf(\"/\"+e)]}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var n=s.getArg(e,\"source\");if(null!=this.sourceRoot&&(n=s.relative(this.sourceRoot,n)),!this._sources.has(n))return{line:null,column:null,lastColumn:null};n=this._sources.indexOf(n);var r={source:n,originalLine:s.getArg(e,\"line\"),originalColumn:s.getArg(e,\"column\")},o=this._findMapping(r,this._originalMappings,\"originalLine\",\"originalColumn\",s.compareByOriginalPositions,s.getArg(e,\"bias\",t.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:s.getArg(i,\"generatedLine\",null),column:s.getArg(i,\"generatedColumn\",null),lastColumn:s.getArg(i,\"lastGeneratedColumn\",null)}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=o,a.prototype=Object.create(t.prototype),a.prototype.constructor=t,a.prototype._version=3,Object.defineProperty(a.prototype,\"sources\",{get:function(){for(var e=[],n=0;n<this._sections.length;n++)for(var r=0;r<this._sections[n].consumer.sources.length;r++)e.push(this._sections[n].consumer.sources[r]);return e}}),a.prototype.originalPositionFor=function(e){var n={generatedLine:s.getArg(e,\"line\"),generatedColumn:s.getArg(e,\"column\")},r=u.search(n,this._sections,function(e,n){var r=e.generatedLine-n.generatedOffset.generatedLine;return r?r:e.generatedColumn-n.generatedOffset.generatedColumn}),t=this._sections[r];return t?t.consumer.originalPositionFor({line:n.generatedLine-(t.generatedOffset.generatedLine-1),column:n.generatedColumn-(t.generatedOffset.generatedLine===n.generatedLine?t.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},a.prototype.sourceContentFor=function(e,n){for(var r=0;r<this._sections.length;r++){var t=this._sections[r],o=t.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('\"'+e+'\" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer.sources.indexOf(s.getArg(e,\"source\"))!==-1){var t=r.consumer.generatedPositionFor(e);if(t){var o={line:t.line+(r.generatedOffset.generatedLine-1),column:t.column+(r.generatedOffset.generatedLine===t.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},a.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var t=this._sections[r],o=t.consumer._generatedMappings,i=0;i<o.length;i++){var a=o[i],u=t.consumer._sources.at(a.source);null!==t.consumer.sourceRoot&&(u=s.join(t.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var c=t.consumer._names.at(a.name);this._names.add(c),c=this._names.indexOf(c);var l={source:u,generatedLine:a.generatedLine+(t.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(t.generatedOffset.generatedLine===a.generatedLine?t.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),\"number\"==typeof l.originalLine&&this.__originalMappings.push(l)}f(this.__generatedMappings,s.compareByGeneratedPositionsDeflated),f(this.__originalMappings,s.compareByOriginalPositions)},r.IndexedSourceMapConsumer=a},{\"./array-set\":4,\"./base64-vlq\":5,\"./binary-search\":7,\"./quick-sort\":8,\"./util\":10}],10:[function(e,n,r){function t(e,n,r){if(n in e)return e[n];if(3===arguments.length)return r;throw new Error('\"'+n+'\" is a required argument.')}function o(e){var n=e.match(v);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var n=\"\";return e.scheme&&(n+=e.scheme+\":\"),n+=\"//\",e.auth&&(n+=e.auth+\"@\"),e.host&&(n+=e.host),e.port&&(n+=\":\"+e.port),e.path&&(n+=e.path),n}function a(e){var n=e,t=o(e);if(t){if(!t.path)return e;n=t.path}for(var a,s=r.isAbsolute(n),u=n.split(/\\/+/),c=0,l=u.length-1;l>=0;l--)a=u[l],\".\"===a?u.splice(l,1):\"..\"===a?c++:c>0&&(\"\"===a?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return n=u.join(\"/\"),\"\"===n&&(n=s?\"/\":\".\"),t?(t.path=n,i(t)):n}function s(e,n){\"\"===e&&(e=\".\"),\"\"===n&&(n=\".\");var r=o(n),t=o(e);if(t&&(e=t.path||\"/\"),r&&!r.scheme)return t&&(r.scheme=t.scheme),i(r);if(r||n.match(_))return n;if(t&&!t.host&&!t.path)return t.host=n,i(t);var s=\"/\"===n.charAt(0)?n:a(e.replace(/\\/+$/,\"\")+\"/\"+n);return t?(t.path=s,i(t)):s}function u(e,n){\"\"===e&&(e=\".\"),e=e.replace(/\\/$/,\"\");for(var r=0;0!==n.indexOf(e+\"/\");){var t=e.lastIndexOf(\"/\");if(t<0)return n;if(e=e.slice(0,t),e.match(/^([^\\/]+:\\/)?\\/*$/))return n;++r}return Array(r+1).join(\"../\")+n.substr(e.length+1)}function c(e){return e}function l(e){return p(e)?\"$\"+e:e}function f(e){return p(e)?e.slice(1):e}function p(e){if(!e)return!1;var n=e.length;if(n<9)return!1;if(95!==e.charCodeAt(n-1)||95!==e.charCodeAt(n-2)||111!==e.charCodeAt(n-3)||116!==e.charCodeAt(n-4)||111!==e.charCodeAt(n-5)||114!==e.charCodeAt(n-6)||112!==e.charCodeAt(n-7)||95!==e.charCodeAt(n-8)||95!==e.charCodeAt(n-9))return!1;for(var r=n-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function g(e,n,r){var t=e.source-n.source;return 0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t||r?t:(t=e.generatedColumn-n.generatedColumn,0!==t?t:(t=e.generatedLine-n.generatedLine,0!==t?t:e.name-n.name))))}function h(e,n,r){var t=e.generatedLine-n.generatedLine;return 0!==t?t:(t=e.generatedColumn-n.generatedColumn,0!==t||r?t:(t=e.source-n.source,0!==t?t:(t=e.originalLine-n.originalLine,0!==t?t:(t=e.originalColumn-n.originalColumn,0!==t?t:e.name-n.name))))}function m(e,n){return e===n?0:e>n?1:-1}function d(e,n){var r=e.generatedLine-n.generatedLine;return 0!==r?r:(r=e.generatedColumn-n.generatedColumn,0!==r?r:(r=m(e.source,n.source),0!==r?r:(r=e.originalLine-n.originalLine,0!==r?r:(r=e.originalColumn-n.originalColumn,0!==r?r:m(e.name,n.name)))))}r.getArg=t;var v=/^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/,_=/^data:.+\\,.+$/;r.urlParse=o,r.urlGenerate=i,r.normalize=a,r.join=s,r.isAbsolute=function(e){return\"/\"===e.charAt(0)||!!e.match(v)},r.relative=u;var y=function(){var e=Object.create(null);return!(\"__proto__\"in e)}();r.toSetString=y?c:l,r.fromSetString=y?c:f,r.compareByOriginalPositions=g,r.compareByGeneratedPositionsDeflated=h,r.compareByGeneratedPositionsInflated=d},{}],11:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace-gps\",[\"source-map\",\"stackframe\"],i):\"object\"==typeof t?r.exports=i(n(\"source-map/lib/source-map-consumer\"),n(\"stackframe\")):o.StackTraceGPS=i(o.SourceMap||o.sourceMap,o.StackFrame)}(this,function(e,n){\"use strict\";function r(e){return new Promise(function(n,r){var t=new XMLHttpRequest;t.open(\"get\",e),t.onerror=r,t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<300||\"file://\"===e.substr(0,7)&&t.responseText?n(t.responseText):r(new Error(\"HTTP status: \"+t.status+\" retrieving \"+e)))},t.send()})}function t(e){if(\"undefined\"!=typeof window&&window.atob)return window.atob(e);throw new Error(\"You must supply a polyfill for window.atob in this environment\")}function o(e){if(\"undefined\"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error(\"You must supply a polyfill for JSON.parse in this environment\")}function i(e,n){for(var r=[/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/,/function\\s+([^('\"`]*?)\\s*\\(([^)]*)\\)/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/,/\\b(?!(?:if|for|switch|while|with|catch)\\b)(?:(?:static)\\s+)?(\\S+)\\s*\\(.*?\\)\\s*\\{/,/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*\\(.*?\\)\\s*=>/],t=e.split(\"\\n\"),o=\"\",i=Math.min(n,20),a=0;a<i;++a){var s=t[n-a-1],u=s.indexOf(\"//\");if(u>=0&&(s=s.substr(0,u)),s){o=s+o;for(var c=r.length,l=0;l<c;l++){var f=r[l].exec(o);if(f&&f[1])return f[1]}}}}function a(){if(\"function\"!=typeof Object.defineProperty||\"function\"!=typeof Object.create)throw new Error(\"Unable to consume source maps in older browsers\")}function s(e){if(\"object\"!=typeof e)throw new TypeError(\"Given StackFrame is not an object\");if(\"string\"!=typeof e.fileName)throw new TypeError(\"Given file name is not a String\");if(\"number\"!=typeof e.lineNumber||e.lineNumber%1!==0||e.lineNumber<1)throw new TypeError(\"Given line number must be a positive integer\");if(\"number\"!=typeof e.columnNumber||e.columnNumber%1!==0||e.columnNumber<0)throw new TypeError(\"Given column number must be a non-negative integer\");return!0}function u(e){for(var n,r,t=/\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/gm;r=t.exec(e);)n=r[1];if(n)return n;throw new Error(\"sourceMappingURL not found\")}function c(e,r,t){return new Promise(function(o,i){var a=r.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(a.source){var s=r.sourceContentFor(a.source);s&&(t[a.source]=s),o(new n({functionName:a.name||e.functionName,args:e.args,fileName:a.source,lineNumber:a.line,columnNumber:a.column}))}else i(new Error(\"Could not get original source for given stackframe and source map\"))})}return function l(f){return this instanceof l?(f=f||{},this.sourceCache=f.sourceCache||{},this.sourceMapConsumerCache=f.sourceMapConsumerCache||{},this.ajax=f.ajax||r,this._atob=f.atob||t,this._get=function(e){return new Promise(function(n,r){var t=\"data:\"===e.substr(0,5);if(this.sourceCache[e])n(this.sourceCache[e]);else if(f.offline&&!t)r(new Error(\"Cannot make network requests in offline mode\"));else if(t){var o=/^data:application\\/json;([\\w=:\"-]+;)*base64,/,i=e.match(o);if(i){var a=i[0].length,s=e.substr(a),u=this._atob(s);this.sourceCache[e]=u,n(u)}else r(new Error(\"The encoding of the inline sourcemap is not supported\"))}else{var c=this.ajax(e,{method:\"get\"});this.sourceCache[e]=c,c.then(n,r)}}.bind(this))},this._getSourceMapConsumer=function(n,r){return new Promise(function(t,i){if(this.sourceMapConsumerCache[n])t(this.sourceMapConsumerCache[n]);else{var a=new Promise(function(t,i){return this._get(n).then(function(n){\"string\"==typeof n&&(n=o(n.replace(/^\\)\\]\\}'/,\"\"))),\"undefined\"==typeof n.sourceRoot&&(n.sourceRoot=r),t(new e.SourceMapConsumer(n))},i)}.bind(this));this.sourceMapConsumerCache[n]=a,t(a)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(n,r){this.getMappedLocation(e).then(function(e){function r(){n(e)}this.findFunctionName(e).then(n,r)[\"catch\"](r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(r,t){s(e),this._get(e.fileName).then(function(t){var o=e.lineNumber,a=e.columnNumber,s=i(t,o,a);r(s?new n({functionName:s,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:a}):e)},t)[\"catch\"](t)}.bind(this))},void(this.getMappedLocation=function(e){return new Promise(function(n,r){a(),s(e);var t=this.sourceCache,o=e.fileName;this._get(o).then(function(r){var i=u(r),a=\"data:\"===i.substr(0,5),s=o.substring(0,o.lastIndexOf(\"/\")+1);return\"/\"===i[0]||a||/^https?:\\/\\/|^\\/\\//i.test(i)||(i=s+i),this._getSourceMapConsumer(i,s).then(function(r){return c(e,r,t).then(n)[\"catch\"](function(){n(e)})})}.bind(this),r)[\"catch\"](r)}.bind(this))})):new l(f)}})},{\"source-map/lib/source-map-consumer\":9,stackframe:3}],12:[function(n,r,t){!function(o,i){\"use strict\";\"function\"==typeof e&&e.amd?e(\"stacktrace\",[\"error-stack-parser\",\"stack-generator\",\"stacktrace-gps\"],i):\"object\"==typeof t?r.exports=i(n(\"error-stack-parser\"),n(\"stack-generator\"),n(\"stacktrace-gps\")):o.StackTrace=i(o.ErrorStackParser,o.StackGenerator,o.StackTraceGPS)}(this,function(e,n,r){function t(e,n){var r={};return[e,n].forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}),r}function o(e){return e.stack||e[\"opera#sourceloc\"]}function i(e,n){return\"function\"==typeof n?e.filter(n):e}var a={filter:function(e){return(e.functionName||\"\").indexOf(\"StackTrace$$\")===-1&&(e.functionName||\"\").indexOf(\"ErrorStackParser$$\")===-1&&(e.functionName||\"\").indexOf(\"StackTraceGPS$$\")===-1&&(e.functionName||\"\").indexOf(\"StackGenerator$$\")===-1},sourceCache:{}},s=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var n=s();return o(n)?this.fromError(n,e):this.generateArtificially(e)},getSync:function(r){r=t(a,r);var u=s(),c=o(u)?e.parse(u):n.backtrace(r);return i(c,r.filter)},fromError:function(n,o){o=t(a,o);var s=new r(o);return new Promise(function(r){var t=i(e.parse(n),o.filter);r(Promise.all(t.map(function(e){return new Promise(function(n){function r(){n(e)}s.pinpoint(e).then(n,r)[\"catch\"](r)})})))}.bind(this))},generateArtificially:function(e){e=t(a,e);var r=n.backtrace(e);return\"function\"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,n,r,t){if(\"function\"!=typeof e)throw new Error(\"Cannot instrument non-function object\");if(\"function\"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(n,r)[\"catch\"](r),e.apply(t||this,arguments)}catch(i){throw o(i)&&this.fromError(i).then(n,r)[\"catch\"](r),i}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if(\"function\"!=typeof e)throw new Error(\"Cannot de-instrument non-function object\");return\"function\"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,n,r,t){return new Promise(function(o,i){var a=new XMLHttpRequest;if(a.onerror=i,a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<400?o(a.responseText):i(new Error(\"POST to \"+n+\" failed with status: \"+a.status)))},a.open(\"post\",n),a.setRequestHeader(\"Content-Type\",\"application/json\"),t&&\"object\"==typeof t.headers){var s=t.headers;for(var u in s)s.hasOwnProperty(u)&&a.setRequestHeader(u,s[u])}var c={stack:e};void 0!==r&&null!==r&&(c.message=r),a.send(JSON.stringify(c))})}}})},{\"error-stack-parser\":1,\"stack-generator\":2,\"stacktrace-gps\":11}]},{},[12])(12)});\r\n\r\n\r\n},{}],9:[function(require,module,exports){\r\nclass FileMap {\r\n    constructor(){this.sidesList=[];}\r\n    add(sides) {// {sideA:path, sideB:path}\r\n        this.sidesList.push(sides);\r\n    }\r\n    convert(path, fromSide, toSide) {\r\n        for (let sides of this.sidesList) {\r\n            if (path.startsWith(sides[fromSide])) {\r\n                return sides[toSide]+path.substring(sides[fromSide].length);\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n}\r\nmodule.exports=FileMap;\r\n\r\n},{}],10:[function(require,module,exports){\r\n/*global Worker*/\r\n// Browser Side\r\nlet idseq=0;\r\nclass Wrapper {\r\n    constructor(worker) {\r\n        const t=this;\r\n        t.idseq=1;\r\n        t.queue={};\r\n        t.worker=worker;\r\n        t.readyQueue=[];\r\n        worker.addEventListener(\"message\",function (e) {\r\n            var d=e.data;\r\n            if (d.reverse) {\r\n                t.procReverse(e);\r\n            } else if (d.ready) {\r\n                t.ready();\r\n            } else if (d.id) {\r\n                t.queue[d.id](d);\r\n                delete t.queue[d.id];\r\n            }\r\n        });\r\n        t.run(\"WorkerService/isReady\").then(function (r) {\r\n            if (r) t.ready();\r\n        });\r\n    }\r\n    procReverse(e) {\r\n        const t=this;\r\n        var d=e.data;\r\n        var id=d.id;\r\n        var path=d.path;\r\n        var params=d.params;\r\n        try {\r\n            Promise.resolve(paths[path](params)).then(function (r) {\r\n                t.worker.postMessage({\r\n                    reverse:true,\r\n                    status:\"ok\",\r\n                    id:id,\r\n                    result: r\r\n                });\r\n            },sendError);\r\n        } catch(err) {\r\n            sendError(err);\r\n        }\r\n        function sendError(e) {\r\n            e=Object.assign({name:e.name, message:e.message, stack:e.stack},e||{});\r\n            try {\r\n                const j=JSON.stringify(e);\r\n                e=JSON.parse(j);\r\n            } catch(je) {\r\n                e=e ? e.message || e+\"\" : \"unknown\";\r\n                console.log(\"WorkerServiceW\", je, e);\r\n            }\r\n            t.worker.postMessage({\r\n                reverse: true,\r\n                id:id, error:e, status:\"error\"\r\n            });\r\n        }\r\n    }\r\n    ready() {\r\n        const t=this;\r\n        if (t.isReady) return;\r\n        t.isReady=true;\r\n        console.log(\"Worker is ready!\");\r\n        t.readyQueue.forEach(function (f){ f();});\r\n    }\r\n    readyPromise() {\r\n        const t=this;\r\n        return new Promise(function (succ) {\r\n            if (t.isReady) return succ();\r\n            t.readyQueue.push(succ);\r\n        });\r\n    }\r\n    run(path, params) {\r\n        const t=this;\r\n        return t.readyPromise().then(function() {\r\n            return new Promise(function (succ,err) {\r\n                var id=t.idseq++;\r\n                t.queue[id]=function (e) {\r\n                    //console.log(\"Status\",e);\r\n                    if (e.status==\"ok\") {\r\n                        succ(e.result);\r\n                    } else {\r\n                        err(e.error);\r\n                    }\r\n                };\r\n                t.worker.postMessage({\r\n                    id: id,\r\n                    path: path,\r\n                    params: params\r\n                });\r\n            });\r\n        });\r\n    }\r\n    terminate() {\r\n        const t=this;\r\n        t.worker.terminate();\r\n    }\r\n}\r\nvar paths={};\r\nconst WorkerService={\r\n    Wrapper:Wrapper,\r\n    load: function (src) {\r\n        var w=new Worker(src);\r\n        return new Wrapper(w);\r\n    },\r\n    install: function (path, func) {\r\n        paths[path]=func;\r\n    },\r\n    serv: function (path,func) {\r\n        this.install(path,func);\r\n    }\r\n};\r\nWorkerService.serv(\"console/log\", function (params){\r\n    console.log.apply(console,params);\r\n});\r\nmodule.exports=WorkerService;\r\n\r\n},{}],11:[function(require,module,exports){\r\n/*global window,self,global*/\r\n(function (deps, factory) {\r\n    module.exports=factory();\r\n})([],function (){\r\n    if (typeof window!==\"undefined\") return window;\r\n    if (typeof self!==\"undefined\") return self;\r\n    if (typeof global!==\"undefined\") return global;\r\n    return (function (){return this;})();\r\n});\r\n\r\n},{}],12:[function(require,module,exports){\r\n/*define(function (require,exports,module) {\r\n    const F=require(\"ProjectFactory\");\r\n    const root=require(\"root\");\r\n    const SourceFiles=require(\"SourceFiles\");\r\n    const langMod=require(\"langMod\");\r\n    */\r\n    const F=require(\"./ProjectFactory\");\r\n    const root=require(\"../lib/root\");\r\n    const SourceFiles=require(\"../lang/SourceFiles\");\r\n    //const A=require(\"../lib/assert\");\r\n    const langMod=require(\"../lang/langMod\");\r\n\r\n    F.addType(\"compiled\",params=> {\r\n        if (params.namespace && params.url) return urlBased(params);\r\n        if (params.dir) return dirBased(params);\r\n        console.error(\"Invalid compiled project\", params);\r\n        throw new Error(\"Invalid compiled project\");\r\n    });\r\n    function urlBased(params) {\r\n        const ns=params.namespace;\r\n        const url=params.url;\r\n        const res=F.createCore();\r\n        return res.include(langMod).include({\r\n            getNamespace:function () {return ns;},\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes ns=\",ns,\"url=\",url);\r\n                await this.loadDependingClasses();\r\n                const s=SourceFiles.add({url});\r\n                await s.exec();\r\n                console.log(\"Loaded compiled classes ns=\",ns,\"url=\",url);\r\n            },\r\n        });\r\n    }\r\n    function dirBased(params) {\r\n        const res=F.createDirBasedCore(params);\r\n        return res.include(langMod).include({\r\n            loadClasses: async function (ctx) {\r\n                console.log(\"Loading compiled classes params=\",params);\r\n                await this.loadDependingClasses();\r\n                const outJS=this.getOutputFile();\r\n                const map=outJS.sibling(outJS.name()+\".map\");\r\n                const sf=SourceFiles.add({\r\n                    text:outJS.text(),\r\n                    sourceMap:map.exists() && map.text(),\r\n                });\r\n                await sf.exec();\r\n                console.log(\"Loaded compiled classes params=\",params);\r\n            }\r\n        });\r\n    }\r\n    exports.create=params=>F.create(\"compiled\",params);\r\n    F.addDependencyResolver((prj, spec)=> {\r\n        if (spec.dir && prj.resolve) {\r\n            return F.create(\"compiled\",{dir:prj.resolve(spec.dir)});\r\n        }\r\n        if (spec.namespace && spec.url) {\r\n            return F.create(\"compiled\",spec);\r\n        }\r\n    });\r\n//});/*--end of define--*/\r\n\r\n},{\"../lang/SourceFiles\":4,\"../lang/langMod\":6,\"../lib/root\":11,\"./ProjectFactory\":13}],13:[function(require,module,exports){\r\n//define(function (require,exports,module) {\r\n    // This factory will be widely used, even BitArrow.\r\n\r\n\r\n    let Compiler, SourceFiles,sysMod,run2Mod;\r\n    const  resolvers=[],types={};\r\n    exports.addDependencyResolver=(f)=>{\r\n        //f: (prj, spec) => prj\r\n        resolvers.push(f);\r\n    };\r\n    exports.addType=(n,f)=>{\r\n        types[n]=f;\r\n    };\r\n    exports.fromDependencySpec=function (prj,spec) {\r\n        if (typeof spec==\"string\") {\r\n            var prjDir=prj.resolve(spec);\r\n            return this.fromDir(prjDir);\r\n        }\r\n        for (let f of resolvers) {\r\n            const res=f(prj,spec);\r\n            if (res) return res;\r\n        }\r\n        console.error(\"Invalid dep spec\", spec);\r\n        throw new Error(\"Invalid dep spec\", spec);\r\n        /* else if (typeof dprj==\"object\") {\r\n            return this.create(\"compiled\", {\r\n                namespace:dprj.namespace,\r\n                url: FS.expandPath(dprj.compiledURL)\r\n            });\r\n        }*/\r\n    };\r\n    exports.create=function (type,params) {\r\n        if (!types[type]) throw new Error(`Invalid type ${type}`);\r\n        return types[type](params);\r\n    };\r\n    class ProjectCore {\r\n        getPublishedURL(){}//TODO\r\n        getOptions(opt) {return {};}//stub\r\n        getName() {\r\n            return this.dir.name().replace(/\\/$/,\"\");\r\n        }\r\n        getDependingProjects() {\r\n            var opt=this.getOptions();\r\n            var dp=(opt.compiler && opt.compiler.dependingProjects) || [];\r\n            return dp.map(dprj=>\r\n                ProjectCore.factory.fromDependencySpec(this,dprj)\r\n            );\r\n        }\r\n        include(mod) {\r\n            for (let k of Object.getOwnPropertyNames(mod)) {\r\n                if (typeof mod[k]===\"function\") this[k]=mod[k];\r\n            }\r\n            return this;\r\n        }\r\n        delegate(obj) {\r\n            if (obj.constructor.prototype) {\r\n                const add=k=>{\r\n                    if (typeof obj[k]===\"function\") this[k]=(...args)=>obj[k](...args);\r\n                };\r\n                for (let k of Object.getOwnPropertyNames(obj.constructor.prototype)) add(k);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n    ProjectCore.factory=exports;\r\n    exports.createCore=()=>new ProjectCore();\r\n    const dirBasedMod={\r\n        getDir() {return this.dir;},\r\n        resolve(rdir){// not in compiledProject\r\n            if (rdir instanceof Array) {\r\n                var res=[];\r\n                rdir.forEach(function (e) {\r\n                    res.push(this.resolve(e));\r\n                });\r\n                return res;\r\n            }\r\n            if (typeof rdir==\"string\") {\r\n                /*global FS*/ //TODO\r\n                if (typeof FS!==\"undefined\") {\r\n                    return FS.resolve(rdir, this.getDir().path());\r\n                } else {\r\n                    return this.getDir().rel(rdir);\r\n                }\r\n            }\r\n            if (!rdir || !rdir.isDir) throw new Error(\"Cannot TPR.resolve: \"+rdir);\r\n            return rdir;\r\n        },\r\n        getOptions(opt) {\r\n            return this.getOptionsFile().obj();\r\n        },\r\n        getOptionsFile() {// not in compiledProject\r\n            var resFile=this.dir.rel(\"options.json\");\r\n            return resFile;\r\n        },\r\n        setOptions(opt) {// not in compiledProject\r\n            return this.getOptionsFile().obj(opt);\r\n        },\r\n        getOutputFile(lang) {// not in compiledProject\r\n            var opt=this.getOptions();\r\n            var outF=this.resolve(opt.compiler.outputFile||\"js/concat.js\");\r\n            if (outF.isDir()) {\r\n                throw new Error(\"out: directory style not supported\");\r\n            }\r\n            return outF;\r\n        },\r\n        removeOutputFile() {// not in compiledProject\r\n            this.getOutputFile().rm();\r\n        },\r\n        path(){return this.dir.path();},// not in compiledProject\r\n        getEXT() {throw new Error(\"getEXT must be overriden.\");},//stub\r\n        sourceFiles() {\r\n            const res={};\r\n            const ext=this.getEXT();\r\n    \t\tthis.dir.recursive(collect);\r\n    \t\tfunction collect(f) {\r\n    \t\t\tif (f.endsWith(ext)) {\r\n    \t\t\t\tvar nb=f.truncExt(ext);\r\n    \t\t\t\tres[nb]=f;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn res;\r\n        }\r\n    };\r\n    exports.createDirBasedCore=function (params) {\r\n        const res=this.createCore();\r\n        res.dir=params.dir;\r\n        return res.include(dirBasedMod);\r\n    };\r\n//});/*--end of define--*/\r\n\r\n},{}]},{},[2])(2)\r\n});\r\n\ndefine('ProjectFactory',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.ProjectFactory;\r\n});\r\n\ndefine('BuilderClient',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient;\r\n});\r\n\ndefine('Content',[\"FS\"],function (FS){return FS.Content;});\r\n\ndefine('thumbnail',[\"ImageRect\",\"Content\",\"root\"],function (IR,Content,root) {\r\n    var TN={};\r\n    var createThumbnail;\r\n    var NAME=\"$icon_thumbnail\";\r\n    var WIDTH=200,HEIGHT=200;\r\n    TN.set=function (prj,delay) {\r\n        setTimeout(function () { crt(prj);} ,delay);\r\n    };\r\n    TN.get=function (prj) {\r\n        var f=TN.file(prj);\r\n        if (!f.exists()) return null;\r\n        return f.text();\r\n    };\r\n    TN.file=function (prj) {\r\n        var prjdir=prj.getDir();\r\n        var imfile= prjdir.rel(\"images/\").rel(\"icon_thumbnail.png\");\r\n        //console.log(\"Thumb file=\",imfile.path(),imfile.exists());\r\n        return imfile;\r\n    };\r\n    function crt(prj) {\r\n        try {\r\n            var img=root.Tonyu.globals.$Screen.buf[0];\r\n            var cv=$(\"<canvas>\").attr({width:WIDTH,height:HEIGHT});\r\n            IR(img, cv[0]);\r\n            var url=cv[0].toDataURL();\r\n            var rsrc=prj.getResource();\r\n            var prjdir=prj.getDir();\r\n            var imfile=TN.file(prj);\r\n            imfile.text( url );\r\n            var item={\r\n                name:NAME,\r\n                pwidth:WIDTH,pheight:HEIGHT,\r\n                url:\"ls:\"+imfile.relPath(prjdir)\r\n            };\r\n            var imgs=rsrc.images;\r\n            var add=false;\r\n            for (var i=0 ; i<imgs.length ; i++) {\r\n                if (imgs[i].name==NAME) {\r\n                    imgs[i]=item;\r\n                    add=true;\r\n                }\r\n            }\r\n            if (!add) imgs.push(item);\r\n\r\n            prj.setResource(rsrc);\r\n            console.log(\"setRSRC\",rsrc);\r\n        } catch (e) {\r\n            console.log(\"Create thumbnail failed\",e);\r\n            console.log(e.stack);\r\n        }\r\n    }\r\n    return TN;\r\n});\r\n\ndefine('sysMod',[\"Tonyu\", \"FS\", \"ImageList\",\r\n        \"Blob\",\"thumbnail\",\"WebSite\",\"plugins\",\r\n        \"DeferredUtil\"],\r\n        function (Tonyu, FS, ImageList,\r\n                Blob,thumbnail,WebSite,plugins,\r\n                DU) {\r\n// (was TonyuProject)\r\nreturn {\r\n    /*stop:function () {\r\n        var cur=this.runningThread; // Tonyu.getGlobal(\"$currentThreadGroup\");\r\n        if (cur) cur.kill();\r\n        var main=this.runningObj;\r\n        if (main && main.stop) return main.stop();\r\n    },*/\r\n    rawRun:function (bootClassName) {\r\n        if (WebSite.removeJSOutput) {\r\n            var o=this.getOutputFile();\r\n            if (o.exists()) o.rm();\r\n        }\r\n        return this.loadClasses().then(()=>{\r\n            //TPR.compile();\r\n            this.detectPlugins();\r\n            this.fixBootRunClasses();\r\n            if (!this.runScriptMode) thumbnail.set(this, 2000);\r\n            this.rawBoot(bootClassName);\r\n        });\r\n    },\r\n    getResourceFile: function () {\r\n        return this.getDir().rel(\"res.json\");\r\n    },\r\n    getResource: function () {\r\n        var resFile=this.getResourceFile();\r\n        if (resFile.exists()) {\r\n            var res=resFile.obj();\r\n            var chg=false;\r\n            for (var imgSnd in res) {\r\n                var ary=res[imgSnd];\r\n                for (var i=ary.length-1; i>=0 ;i--) {\r\n                    if (!ary[i].url) {\r\n                        ary.splice(i,1);\r\n                        chg=true;\r\n                    }\r\n                }\r\n            }\r\n            if (chg) this.setResource(res);\r\n            return res;\r\n        }\r\n        return Tonyu.defaultResource;\r\n    },\r\n    hasSoundResource: function () {\r\n        var res=this.getResource();\r\n        return res && res.sounds && res.sounds.length>0;\r\n    },\r\n    setResource: function (rsrc) {\r\n        var resFile=this.getResourceFile();\r\n        resFile.obj(rsrc);\r\n    },\r\n    getThumbnail: function () {\r\n        return thumbnail.get(this);\r\n    },\r\n    convertBlobInfos: function (user) {\r\n        var rsrc=this.getResource();\r\n        var name=this.getName();\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        o[k]=[Blob.BLOB_PATH_EXPR,user,name,a.fileName].join(\"/\");\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        this.setResource(rsrc);\r\n    },\r\n    getBlobInfos: function () {\r\n        var rsrc=this.getResource();\r\n        var res=[];\r\n        function loop(o) {\r\n            if (typeof o!=\"object\") return;\r\n            for (var k in o) {\r\n                if (!o.hasOwnProperty(k)) continue;\r\n                var v=o[k];\r\n                if (k==\"url\") {\r\n                    var a=Blob.isBlobURL(v);\r\n                    if (a) {\r\n                        res.push(a);\r\n                    }\r\n                }\r\n                loop(v);\r\n            }\r\n        }\r\n        loop(rsrc);\r\n        return res;\r\n    },\r\n    loadResource: function (next) {\r\n        var r=this.getResource();\r\n        ImageList( r.images, function (r) {\r\n            var sp=Tonyu.getGlobal(\"$Sprites\");\r\n            if (sp) {\r\n                //console.log(\"$Sprites set!\");\r\n                sp.setImageList(r);\r\n            }\r\n            //Sprites.setImageList(r);\r\n            for (var i in r.names) {\r\n                Tonyu.setGlobal(i, r.names[i]);\r\n            }\r\n            if (next) next();\r\n        });\r\n    },\r\n    detectPlugins: function () {\r\n        var opt=this.getOptions();\r\n        var plugins=opt.plugins=opt.plugins||{};\r\n        if (!plugins.Mezonet || !plugins.PicoAudio) {\r\n            var res=this.getResource();\r\n            var hasMZO=false,hasMIDI=false;\r\n            if (res.sounds) res.sounds.forEach(function (item) {\r\n                if (item.url.match(/\\.mzo/)) hasMZO=true;\r\n                if (item.url.match(/\\.midi?/)) hasMIDI=true;\r\n            });\r\n            if (hasMZO) this.addPlugin(\"Mezonet\");\r\n            else this.removePlugin(\"Mezonet\");\r\n            if (hasMIDI) this.addPlugin(\"PicoAudio\");\r\n            else this.removePlugin(\"PicoAudio\");\r\n        }\r\n    },\r\n    addPlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        opt.plugins=opt.plugins||{};\r\n        if (!opt.plugins[name]) {\r\n            opt.plugins[name]=1;\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    removePlugin: function (name) {\r\n        var opt=this.getOptions();\r\n        if (opt.plugins[name]) {\r\n            delete opt.plugins[name];\r\n            this.setOptions(opt);\r\n        }\r\n    },\r\n    requestPlugin: function (name) {\r\n        this.addPlugin(name);\r\n        if (plugins.loaded(name)) return;\r\n        var req=new Error(\"\"+name+\"\");\r\n        req.pluginName=name;\r\n        throw req;\r\n    },\r\n    loadPlugins: function (onload) {\r\n        var opt=this.getOptions();\r\n        return plugins.loadAll(opt.plugins,onload);\r\n    },\r\n    fixBootRunClasses: function () {\r\n        var opt=this.getOptions();\r\n        if (opt.run) {\r\n            var mc=this.fixClassName(opt.run.mainClass);\r\n            var bc=this.fixClassName(opt.run.bootClass);\r\n            if (mc!=opt.run.mainClass  ||  bc!=opt.run.bootClass) {\r\n                opt.run.mainClass=mc;\r\n                opt.run.bootClass=bc;\r\n                this.setOptions(opt);\r\n            }\r\n        }\r\n    },\r\n    fixClassName: function (className) {\r\n        if (Tonyu.classMetas[className]) return className;\r\n        const ns=this.getNamespace();\r\n        console.log(\"NS\", ns);\r\n        let res=Tonyu.classes[ns][className];\r\n        if (res) return `${ns}.${className}`;\r\n        for (var k in Tonyu.classes) {\r\n            res=Tonyu.classes[k][className];\r\n            if (res) return `${k}.${className}`;\r\n        }\r\n        throw new Error(`Cannot fix className ${className}`);\r\n    },\r\n    rawBoot: function (bootClassName) {\r\n        this.showProgress(\"Running \"+bootClassName);\r\n        this.initCanvas();\r\n        Tonyu.run(bootClassName);\r\n    },\r\n    initCanvas: function () {\r\n        Tonyu.globals.$mainCanvas=$(\"canvas\");\r\n    },\r\n    /*isKernelEditable: function () {\r\n    \treturn env.options.kernelEditable;\r\n    },*/\r\n    //TPR.getDir=function () {return dir;};\r\n    //TPR.getName=function () { return dir.name().replace(/\\/$/,\"\"); };\r\n\r\n    showProgress: function (m) {\r\n        console.log(\"PROGRESS\",m);\r\n        /*global SplashScreen*/\r\n        if (typeof SplashScreen!=\"undefined\") {\r\n            SplashScreen.progress(m);\r\n        }\r\n        return DU.promise(function (succ) {\r\n            setTimeout(succ,0);\r\n        });\r\n    }\r\n};\r\n});\r\n\ndefine('CompiledProject',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.CompiledProject;\r\n});\r\n\ndefine('IDEProject',['require','exports','module','ProjectFactory','BuilderClient','root','sysMod','CompiledProject','WebSite'],function (require,exports,module) {\r\n    const F=require(\"ProjectFactory\");\r\n    //const A=require(\"assert\");\r\n    const BuilderClient=require(\"BuilderClient\");\r\n    const root=require(\"root\");\r\n    const sysMod=require(\"sysMod\");\r\n    const CP=require(\"CompiledProject\");\r\n    const WebSite=require(\"WebSite\");\r\n    const langMod=BuilderClient.langMod;\r\n    F.addType(\"IDE\",params=>{\r\n        const ide=params.ide;\r\n        const res=F.createDirBasedCore(params);\r\n        const ns2depspec= {\r\n            kernel: {namespace:\"kernel\", url: WebSite.compiledKernel}\r\n        };\r\n        const c=new BuilderClient(res ,{\r\n            worker: {ns2depspec, url: \"BuilderWorker.js\"/*WORKER_URL*/}\r\n        });\r\n        F.addDependencyResolver((prj,spec)=>{\r\n            if (ns2depspec[spec.namespace]) {\r\n                return CP.create(ns2depspec[spec.namespace]);\r\n            }\r\n        });\r\n        c.onCompiled=function (src) {\r\n            console.log(\"Sending src\",src);\r\n            const rp=res.getIframeProject();\r\n            if (rp) rp.exec(src).catch(e=>console.error(e));\r\n        };\r\n        let curDebugger;\r\n        root.onTonyuDebuggerReady=d=>{\r\n            d.on(\"runtimeError\",e=>{\r\n                console.log(\"runt\",e.stack.map(s=>s+\"\").join(\"\\n\"));\r\n                ide.showError(e);\r\n            });\r\n            curDebugger=d;\r\n            d.requestStop=o=>ide.stop(o);\r\n            c.setDebugger(d);\r\n        };\r\n        res.setDebugger=d=>c.setDebugger(d);\r\n        res.compiler=c;\r\n        res.getIframeProject=()=>{\r\n            const ifrm=root.document.querySelector(\"iframe\");\r\n            if (ifrm) return ifrm.contentWindow.Project;\r\n        };\r\n        res.disconnectDebugger=()=>c.setDebugger();\r\n        res.fullCompile=c.fullCompile.bind(c);\r\n        res.partialCompile=c.partialCompile.bind(c);\r\n        res.renameClassName=c.renameClassName.bind(c);\r\n        res.resetFiles=c.resetFiles.bind(c);\r\n        res.include(sysMod).include(langMod);\r\n        res.stop=()=>{\r\n            try {\r\n                if (curDebugger) return curDebugger.stop();\r\n            }catch(e) {\r\n                //Edge: Can't execute code from a freed script\r\n                console.error(e);\r\n            }\r\n        };\r\n        console.log(\"res.loadClasses\", res.loadClasses) ;\r\n        return res;\r\n    });\r\n    exports.create=params=>F.create(\"IDE\",params);\r\n\r\n});\r\n\ndefine('optionFixer',[\"Tonyu\"],function (Tonyu) {\r\n    const NSP_USR=\"user\",NSP_KER=\"kernel\";\r\n    const defaultOptions={\r\n        compiler: {\r\n            namespace:NSP_USR,\r\n            defaultSuperClass: `${NSP_KER}.Actor`,\r\n            // relative path in outputFile will fail old version\r\n            //outputFile: \"js/concat.js\",\r\n            dependingProjects: [{namespace:NSP_KER}],\r\n        },\r\n        run: {\r\n            mainClass: `${NSP_USR}.Main`,\r\n            bootClass: `${NSP_KER}.Boot`,\r\n            globals:{\r\n                $defaultFPS:60,\r\n                $imageSmoothingDisabled:true,\r\n                $soundLoadAndDecode:false\r\n            }\r\n        },\r\n        plugins: {},\r\n        kernelEditable: false,\r\n        language:\"tonyu\",\r\n        version: Tonyu.VERSION\r\n    };\r\n    Tonyu.defaultOptions=defaultOptions;\r\n    return {\r\n        fixFile: function (f) {\r\n            if (!f.exists()) {\r\n                f.obj(defaultOptions);\r\n                return;\r\n            }\r\n            const t=f.text();\r\n            const o=JSON.parse(t);\r\n            const fo=this.fixObject(o);\r\n            const ft=JSON.stringify(fo);\r\n            if(t!==ft) f.text(ft);\r\n        },\r\n        fixObject:function (o) {\r\n            this.fixOptions(o);\r\n            this.fixBootRunClasses(o);\r\n            return o;\r\n        },\r\n        fixOptions: function (opt) {//override\r\n            if (!opt.compiler) opt.compiler={};\r\n            //opt.compiler.commentLastPos=TPR.runScriptMode || StackTrace.isAvailable();\r\n            if (!opt.plugins) {\r\n                opt.plugins={};\r\n                /*dir.each(function (f) {\r\n                    if (f.endsWith(TPR.EXT)) {\r\n                        plugins.detectNeeded(  f.text(), opt.plugins);\r\n                    }\r\n                });*/\r\n            }\r\n            opt.compiler.dependingProjects=opt.compiler.dependingProjects||[{namespace:\"kernel\"}];\r\n            opt.compiler.namespace=opt.compiler.namespace||\"user\";\r\n            // relative path in outputFile will fail old version\r\n            //opt.compiler.outputFile=opt.compiler.outputFile||\"js/concat.js\";\r\n            opt.run=opt.run||{};\r\n            opt.language=\"tonyu\";\r\n        },\r\n        fixBootRunClasses: function (opt) {\r\n            if (opt.run) {\r\n                var mc=this.fixClassName(opt.run.mainClass);\r\n                var bc=this.fixClassName(opt.run.bootClass);\r\n                if (mc!=opt.run.mainClass  ||  bc!=opt.run.bootClass) {\r\n                    opt.run.mainClass=mc;\r\n                    opt.run.bootClass=bc;\r\n                }\r\n            }\r\n        },\r\n        fixClassName: function (cn) {\r\n            //if (TPR.classExists(cn)) return cn;\r\n            if (Tonyu.getClass(cn)) return cn;\r\n            var cna=cn.split(\".\");\r\n            var sn=cna.pop();\r\n            var res;\r\n            res=NSP_USR+\".\"+sn;\r\n            if (Tonyu.getClass(res)) return res;\r\n            //if (TPR.classExists(res)) return res;\r\n            res=NSP_KER+\".\"+sn;\r\n            if (Tonyu.getClass(res)) return res;\r\n            //if (TPR.classExists(res)) return res;\r\n            return cn;\r\n        }\r\n    };\r\n\r\n});\r\n\ndefine('SourceFiles',['require','exports','module','BuilderClient4Sys'],function (require,exports,module) {\r\n    //--- stub\r\n    const BuilderClient=require(\"BuilderClient4Sys\");\r\n    module.exports=BuilderClient.SourceFiles;\r\n});\r\n\ndefine('editor',['require','Util','Tonyu','FS','FileList','FileMenu','ErrorDialog','fixIndent','ProjectOptionsEditor','KeyEventChecker','IFrameDialog','searchDialog','UI','Shell','ResEditors','WebSite','exceptionCatcher','Log','MainClassDialog','mkrunDiag','WebFS','extLink','ExportHTMLDialog','DebugDialog','root','IDEProject','optionFixer','SourceFiles'],function (require) {\r\nconst Util=require(\"Util\");\r\nconst Tonyu=require(\"Tonyu\");\r\nconst FS=require(\"FS\");\r\nconst FileList=require(\"FileList\");\r\nconst FileMenu=require(\"FileMenu\");\r\nconst ErrorDialog=require(\"ErrorDialog\");\r\nconst fixIndent=require(\"fixIndent\");\r\nconst ProjectOptionsEditor=require(\"ProjectOptionsEditor\");\r\nconst KeyEventChecker=require(\"KeyEventChecker\");\r\nconst IFrameDialog=require(\"IFrameDialog\");\r\nconst searchDialog=require(\"searchDialog\");\r\nconst UI=require(\"UI\");\r\nconst sh=require(\"Shell\");\r\nconst ResEditors=require(\"ResEditors\");\r\nconst WebSite=require(\"WebSite\");\r\nconst EC=require(\"exceptionCatcher\");\r\nconst Log=require(\"Log\");\r\nconst MainClassDialog=require(\"MainClassDialog\");\r\nconst mkrunDiag=require(\"mkrunDiag\");\r\nconst WebFS=require(\"WebFS\");\r\nconst extLink=require(\"extLink\");\r\nconst ExportHTMLDialog=require(\"ExportHTMLDialog\");\r\nconst DebugDialog=require(\"DebugDialog\");\r\nconst root=require(\"root\");\r\nconst IDEProject=require(\"IDEProject\");\r\nconst optionFixer=require(\"optionFixer\");\r\nconst SourceFiles=require(\"SourceFiles\");\r\n$(function () {\r\n    if (!WebSite.isNW) {\r\n        FS.mount(location.protocol+\"//\"+location.host+\"/\", new WebFS());\r\n    }\r\n    if (WebSite.serverType===\"projectBoard\") {\r\n        $.ajax(\"../../../a.php?Test/test\").then(function (r){console.log(\"Session\",r);});\r\n    }\r\n    $.get(\"https://edit.tonyu.jp/doc/welcome_edit.html?a\").then(function (t) {\r\n        $(\"#welcome\").append(t);\r\n    });\r\n    var F=EC.f;\r\n    root.$LASTPOS=0;\r\n    var mobile=WebSite.mobile || FS.get(WebSite.tonyuHome).rel(\"mobile.txt\").exists();\r\n    if (mobile) {\r\n        $(\"#fileViewer\").hide();\r\n        $(\"#runAreaParent\").hide();\r\n        $(\"#mainArea\").attr(\"class\",\"col-xs-12\");\r\n        $(\"#fileSel\").show();\r\n    }\r\n    var dir=Util.getQueryString(\"dir\", \"/Tonyu/Projects/SandBox/\");\r\n    var curPrjDir=FS.get(dir);\r\n    const optionFile=curPrjDir.rel(\"options.json\");\r\n    optionFixer.fixFile(optionFile);\r\n    const editors={};\r\n    const ide={restart,stop,save,displayMode,dispName,jump,refreshRunMenu,editors};\r\n    const curPrj=IDEProject.create({dir:curPrjDir,ide});//, kernelDir);\r\n    ide.project=curPrj;\r\n    const EXT=curPrj.getEXT();\r\n    const NSP_USR=curPrj.getNamespace();\r\n    root.curPrj=curPrj;\r\n    const resEditors=new ResEditors(curPrj);\r\n    Tonyu.globals.$currentProject=curPrj;\r\n    Tonyu.currentProject=curPrj;\r\n    const desktopEnv=loadDesktopEnv();\r\n    const runMenuOrd=desktopEnv.runMenuOrd;\r\n    const exportHTMLDialog=new ExportHTMLDialog(curPrj);\r\n    function setDiagMode(d) {\r\n        var opt=curPrj.getOptions();\r\n        if (opt.compiler.diagnose!=d) {\r\n            opt.compiler.diagnose=d;\r\n            curPrj.setOptions(opt);\r\n        }\r\n    }\r\n    Tonyu.defaultResource={\r\n       images:[\r\n          {name:\"$pat_base\", url: \"images/base.png\", pwidth:32, pheight:32},\r\n          {name:\"$pat_sample\", url: \"images/Sample.png\"},\r\n          {name:\"$pat_neko\", url: \"images/neko.png\", pwidth:32, pheight:32},\r\n          {name:\"$pat_mapchip\", url: \"images/mapchip.png\", pwidth:32, pheight:32}\r\n       ],\r\n       sounds:[]\r\n    };\r\n    const resf=curPrj.getResourceFile();\r\n    if (!resf.exists()) resf.obj(Tonyu.defaultResource);\r\n    setDiagMode(false);\r\n    const runDialogParam={\r\n        screenH:200,\r\n        desktopEnv: desktopEnv,\r\n        prj: curPrjDir.path(),\r\n        ide\r\n    };\r\n    function onResize() {\r\n        var h=$(window).height()-$(\"#navBar\").height();\r\n        h-=20;\r\n        runDialogParam.screenH=h;\r\n        $(\"#progs pre\").css(\"height\",h+\"px\");\r\n        $(\"#fileItemList\").height(h);\r\n    }\r\n    onResize();\r\n    KeyEventChecker.down(document,\"F9\",F(run));\r\n    KeyEventChecker.down(document,\"F2\",F(stop));\r\n    KeyEventChecker.down(document,\"ctrl+s\",F(function (e) {\r\n    \tsave();\r\n    \te.stopPropagation();\r\n    \te.preventDefault();\r\n    \treturn false;\r\n    }));\r\n    $(window).resize(F(onResize));\r\n    $(\"body\")[0].spellcheck=false;\r\n    sh.cd(curPrjDir);\r\n    var fl=FileList($(mobile?\"#fileSel\":\"#fileItemList\"),{\r\n        topDir: curPrjDir,\r\n        ide,\r\n        runDialogParam,\r\n        on:{\r\n            displayName: dispName\r\n        }\r\n    });\r\n    var FM=FileMenu(ide);\r\n    FM.fileList=fl;\r\n    $(\"#newFile\").click(F(FM.create));\r\n    $(\"#mvFile\").click(F(FM.mv));\r\n    $(\"#rmFile\").click(F(FM.rm));\r\n    $(\"#closeFile\").click(F(function () {\r\n        var inf=getCurrentEditorInfo();\r\n        if (inf) {\r\n            close(inf.file);\r\n        }\r\n    }));\r\n    $(\"#runDialog\").click(F(function () {\r\n        runDialog.show(true);\r\n    }));\r\n    fl.ls(curPrjDir);\r\n    refreshRunMenu();\r\n    function refreshRunMenu() {\r\n        curPrjDir.each(function (f) {\r\n            if (f.endsWith(EXT)) {\r\n                var n=f.truncExt(EXT);\r\n                if (runMenuOrd.indexOf(n)<0) {\r\n                    runMenuOrd.push(n);\r\n                }\r\n            }\r\n        });\r\n        var i;\r\n        for (i=runMenuOrd.length-1; i>=0 ; i--) {\r\n            var f=curPrjDir.rel(runMenuOrd[i]+EXT);\r\n            if (!f.exists()) {\r\n                runMenuOrd.splice(i,1);\r\n            }\r\n        }\r\n        $(\"#runMenu\").empty();\r\n        i=0;\r\n        runMenuOrd.forEach(function(n) {\r\n            var ii=i;\r\n            if (typeof n!=\"string\") {console.log(n); alert(\"not a string: \"+n);}\r\n            if (ii>=15) return;\r\n            $(\"#runMenu\").append(\r\n                    $(\"<li>\").append(\r\n                            $(\"<a>\").attr(\"href\",\"#\").text(n+\"\"+(i==0?\"(F9)\":\"\")).click(F(function () {\r\n                                if (typeof n!=\"string\") {console.log(n); alert(\"not a string2: \"+n);}\r\n                                run(`${NSP_USR}.${n}`);\r\n                                if (ii>0) {\r\n                                    runMenuOrd.splice(ii, 1);\r\n                                    runMenuOrd.unshift(n);\r\n                                    refreshRunMenu();\r\n                                    saveDesktopEnv();\r\n                                }\r\n                            }))));\r\n            i++;\r\n        });\r\n        $(\"#runMenu\").append(\r\n                $(\"<li>\").append(\r\n                        $(\"<a>\").attr(\"href\",\"#\").text(\"(F2)\").click(F(function () {\r\n                            stop();\r\n                        }))));\r\n        $(\"#runMenu\").append(\r\n                $(\"<li>\").append(\r\n                        $(\"<a>\").attr(\"href\",\"#\").text(\"...\").click(F(function () {\r\n                            var diag=MainClassDialog.show(curPrj,{on:{done:function (n,dorun) {\r\n                                var ii=runMenuOrd.indexOf(n);\r\n                                if (ii>0) {\r\n                                    runMenuOrd.splice(ii, 1);\r\n                                    runMenuOrd.unshift(n);\r\n                                    refreshRunMenu();\r\n                                    saveDesktopEnv();\r\n                                }\r\n                                if (dorun) run(n);\r\n                            }}});\r\n                            diag.$vars.mainClass.empty();\r\n                            runMenuOrd.forEach(function (m) {\r\n                                diag.$vars.mainClass.append(UI(\"option\",{value:m},m));\r\n                            });\r\n                        }))));\r\n\r\n        //saveDesktopEnv();\r\n        $(\"#exportToJsdoit\").attr(\"href\", \"javascriptoo\".replace(\"oo\",\":;\")).click(function () {\r\n            exportHTMLDialog.show({\r\n                excludes:{\"js/concat.js\":1,\"js/concat.js.map\":1},\r\n                includeJSScript:true\r\n            });\r\n        });\r\n        //$(\"#exportToJsdoit\").attr(\"href\", \"exportToJsdoit.html?dir=\"+curPrjDir.path());//+\"&main=\"+runMenuOrd[0]);\r\n        $(\"#exportToExe\").attr(\"href\", \"exportToExe.html?dir=\"+curPrjDir.path());//+\"&main=\"+runMenuOrd[0]);\r\n    }\r\n    function dispName(f) {\r\n        var name=f.name();\r\n        if (f.isDir()) return name;\r\n        if (f.endsWith(EXT)) return f.truncExt(EXT);\r\n        return null;\r\n    }\r\n    function getCurrentEditorInfo() {\r\n        var f=fl.curFile();\r\n        if (!f) return null;\r\n        return editors[f.path()];\r\n    }\r\n    function getCurrentEditor() {\r\n        var i=getCurrentEditorInfo();\r\n        if (i) return i.editor;\r\n        return null;\r\n    }\r\n    const runDialog=new DebugDialog(runDialogParam);\r\n    function displayMode(mode/*, next*/) {\r\n        // mode == run     compile_error     runtime_error    edit\r\n        var prog=getCurrentEditor();\r\n        switch(mode) {\r\n        case \"run\":\r\n            if (prog) prog.blur();\r\n            errorDialog.close();\r\n            if (mobile) {\r\n                //$(\"#fileViewer\").hide();\r\n                $(\"#runAreaParent\").show().attr(\"class\",\"col-xs-12\");\r\n                $(\"#mainArea\").hide();//attr(\"class\",\"col-xs-12\");\r\n                onResize();\r\n            }\r\n            if (!runDialog.opened) {\r\n                runDialog.show();\r\n            }\r\n            break;\r\n        case \"compile_error\":\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n            break;\r\n        case \"runtime_error\":\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n            break;\r\n        case \"edit\":\r\n            if (runDialog.modified) {\r\n                delete runDialog.modified;\r\n                saveDesktopEnv();\r\n            }\r\n            if (mobile) {\r\n                //$(\"#fileViewer\").hide();\r\n                $(\"#runAreaParent\").hide();//.attr(\"class\",\"col-xs-12\");\r\n                $(\"#mainArea\").show();//attr(\"class\",\"col-xs-12\");\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    let cmdStat;\r\n    function setCmdStat(c) {\r\n        console.log(\"setCmtStat\",cmdStat,\"to\",c);\r\n        if (c && cmdStat) {\r\n            alert(\"(\"+cmdStat+\")\\n\"+\r\n                \"Home\");\r\n            return;\r\n        }\r\n        cmdStat=c;\r\n        return c;\r\n    }\r\n    function stop(opt) {\r\n        if (!setCmdStat(\"stop\")) return;\r\n        return $.when(curPrj.stop()).then(function () {\r\n            curPrj.disconnectDebugger();\r\n            displayMode(\"edit\");\r\n            console.log(\"Boot stopped\");\r\n            if (opt && opt.closeAfterStop) runDialog.close();\r\n        }).finally(function () {\r\n            setCmdStat();\r\n        });\r\n    }\r\n    //\\run\r\n    function run(name) {\r\n        if (!setCmdStat(\"run\")) return;\r\n        return $.when(curPrj.stop()).then(function () {\r\n            return run2(name);\r\n        }).catch(Tonyu.onRuntimeError).finally(function () {\r\n            setCmdStat();\r\n        });\r\n    }\r\n    function run2(fullName) {\r\n        if (typeof fullName!=\"string\") {\r\n            if (runMenuOrd.length==0) {\r\n                alert(\"\");\r\n                return;\r\n            }\r\n            fullName=`${NSP_USR}.${runMenuOrd[0]}`;// curFile.name().replace(/\\.tonyu$/,\"\");\r\n        }\r\n        save();\r\n        curPrj.initCanvas=function () {\r\n            displayMode(\"run\");\r\n            Tonyu.globals.$mainCanvas=runDialog.canvas;\r\n        };\r\n        Log.dumpProject(curPrjDir);\r\n        if (root.SplashScreen) root.SplashScreen.show();\r\n        var o=curPrj.getOptions();\r\n        if (o.run.mainClass!=fullName) {\r\n            o.run.mainClass=fullName;\r\n            curPrj.setOptions(o);\r\n        }\r\n        curPrjDir.touch();\r\n        return curPrj.fullCompile().then(async r=>{\r\n            await SourceFiles.add(r).saveAs(curPrj.getOutputFile());\r\n            runDialog.show();\r\n        },showError).finally(function () {\r\n            if (root.SplashScreen) root.SplashScreen.hide();\r\n        });\r\n    }\r\n    var alertOnce;\r\n    alertOnce=function (e) {\r\n        alert(e);\r\n        alertOnce=function(){};\r\n    };\r\n    function jump(file,row,col) {\r\n        //alert(file+\":\"+row+\":\"+col);\r\n        fl.select(file);\r\n        var inf=getCurrentEditorInfo();\r\n        if (inf) {\r\n            setTimeout(function () {\r\n                var prog=getCurrentEditor();\r\n                if (prog) prog.gotoLine(row,col);\r\n            },50);\r\n        }\r\n    }\r\n    function restart(){\r\n        stop();\r\n        runDialog.close();\r\n        setTimeout(run,100);\r\n    }\r\n    //var pluginAdded={};\r\n    const errorDialog=new ErrorDialog(ide);\r\n    function showError(e) {\r\n        try{\r\n            errorDialog.show(e);\r\n        } catch(ee) {\r\n            console.log(ee);\r\n            stop();\r\n            //alert(ee);\r\n        }\r\n    }\r\n    window.onerror=EC.handleException=Tonyu.onRuntimeError=ide.showError=showError;\r\n    $(\"#mapEditor\").click(F(function () {\r\n        console.log(\"run map\");\r\n        run(\"kernel.MapEditor\");\r\n    }));\r\n    $(\"#search\").click(F(function () {\r\n        console.log(\"src diag\");\r\n        searchDialog.show(curPrjDir,function (info){\r\n            fl.select(info.file);\r\n            setTimeout(function () {\r\n                var prog=getCurrentEditor();\r\n                if (prog) prog.gotoLine(info.lineNo);\r\n            },50);\r\n        });\r\n    }));\r\n    function fixEditorIndent(prog) {\r\n        var cur=prog.getCursorPosition();\r\n        var orig=prog.getValue();\r\n        var fixed=fixIndent( orig );\r\n        if (orig!=fixed) {\r\n            prog.setValue(fixed);\r\n            prog.clearSelection();\r\n            prog.moveCursorTo(cur.row, cur.column);\r\n        }\r\n    }\r\n    function save() {\r\n        var inf=getCurrentEditorInfo();\r\n        if (!inf) return;\r\n        var curFile=inf.file; //fl.curFile();\r\n        var prog=inf.editor; //getCurrentEditor();\r\n        if (curFile && prog && !curFile.isReadOnly()) {\r\n            fixEditorIndent(prog);\r\n            var old=curFile.text();\r\n            var nw=prog.getValue();\r\n            if (old!=nw) {\r\n                curFile.text(nw);\r\n                curPrj.partialCompile(curFile).catch(Tonyu.onRunTimeError);\r\n                inf.lastTimeStamp=curFile.lastUpdate();\r\n            }\r\n        }\r\n        fl.setModified(false);\r\n    }\r\n    function watchModified() {\r\n        var inf=getCurrentEditorInfo();\r\n        if (!inf) return;\r\n        if (!inf.file.exists()) return;\r\n        if (inf.lastTimeStamp<inf.file.lastUpdate()) {\r\n            inf.editor.setValue(inf.file.text());\r\n            inf.editor.clearSelection();\r\n            inf.lastTimeStamp=inf.file.lastUpdate();\r\n        }\r\n    \tfl.setModified(inf.file.text()!=inf.editor.getValue());\r\n    }\r\n    setInterval(watchModified,1000);\r\n    function loadDesktopEnv() {\r\n        var d=curPrjDir.rel(\".desktop\");\r\n        var res;\r\n        if (d.exists()) {\r\n            res=d.obj();\r\n        } else {\r\n            res={};\r\n        }\r\n        if (!res.runMenuOrd) res.runMenuOrd=[];\r\n        //desktopEnv=res;\r\n        return res;\r\n    }\r\n    function saveDesktopEnv() {\r\n        var d=curPrjDir.rel(\".desktop\");\r\n        d.obj(desktopEnv);\r\n    }\r\n    $(\"#mkrun\").click(F(function () {\r\n        var dest;\r\n        if (WebSite.isNW) {\r\n            if (desktopEnv && desktopEnv.runtimeConfig) {\r\n                dest=desktopEnv.runtimeConfig.dest;\r\n            } else {\r\n                dest=FS.get(WebSite.cwd).rel(\"Runtimes/\").rel( curPrjDir.name());\r\n            }\r\n            mkrunDiag.show(curPrj,{\r\n                dest: dest,\r\n                onComplete: function (e) {\r\n                    if (e.type===\"dir\" && desktopEnv) {\r\n                        desktopEnv.runtimeConfig=e.config;\r\n                        saveDesktopEnv();\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            mkrunDiag.show(curPrj, {\r\n                hiddenFolder:true,\r\n                onEnd:function () {}\r\n            });\r\n        }\r\n    }));\r\n    $(\"#imgResEditor\").click(F(function () {\r\n        resEditors.open(\"image\");\r\n    }));\r\n    $(\"#soundResEditor\").click(F(function () {\r\n        resEditors.open(\"sound\");\r\n    }));\r\n    $(\"#prjOptEditor\").click(F(function () {\r\n        ProjectOptionsEditor(curPrj);\r\n    }));\r\n    var helpd=null;\r\n    $(\"#refHelp\").click(F(function () {\r\n    \t//if (!helpd) helpd=WikiDialog.create(home.rel(\"doc/tonyu2/\"));\r\n        if (!helpd) helpd=IFrameDialog.create(WebSite.top+\"/doc/index.html\");\r\n    \thelpd.show();\r\n    }));\r\n    window.startTutorial=F(function () {\r\n        if (!helpd) helpd=IFrameDialog.create(WebSite.top+\"/doc/tutorial.html\");\r\n    \thelpd.show();\r\n    });\r\n    $(\"#rmPRJ\").click(F(function () {\r\n        if (prompt(curPrjDir+\"DELETE \",\"\")!=\"DELETE\") {\r\n            return;\r\n        }\r\n        sh.rm(curPrjDir,{r:1});\r\n        document.location.href=\"index.html\";\r\n    }));\r\n    $(\"#mvPRJ\").click(F(function () {\r\n        var np=prompt(\"\", curPrjDir.name().replace(/\\//g,\"\"));\r\n        if (!np || np==\"\") return;\r\n        if (!np.match(/\\/$/)) np+=\"/\";\r\n        var npd=curPrjDir.up().rel(np);\r\n        if (npd.exists()) {\r\n            alert(npd+\" \");\r\n            return;\r\n        }\r\n        sh.cp(curPrjDir,npd);\r\n        sh.rm(curPrjDir,{r:1});\r\n        document.location.href=\"project.html?dir=\"+npd;\r\n    }));\r\n    $(\"#editorEditor\").click(F(function () {\r\n        var prog=getCurrentEditor();\r\n        var s=prompt(\"\", desktopEnv.editorFontSize||16);\r\n        desktopEnv.editorFontSize=parseInt(s);\r\n        if (prog) prog.setFontSize(desktopEnv.editorFontSize||16);\r\n        saveDesktopEnv();\r\n    }));\r\n    $(\"#openFolder\").click(F(function () {\r\n        var f=curPrjDir;\r\n        var gui = root.require(\"nw.gui\");//(global.nwDispatcher||global.nw).requireNwGui();\r\n        gui.Shell.showItemInFolder(f.path().replace(/\\//g,root.require(\"path\").sep));\r\n    }));\r\n    sh.curFile=function () {\r\n        return fl.curFile();\r\n    };\r\n    if (root.SplashScreen) root.SplashScreen.hide();\r\n    extLink.all();\r\n});\r\n});\r\n\n})();\r\n"]}