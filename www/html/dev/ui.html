<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Tonyu System 2">
<meta name="author" content="hoge1e3">
<link rel="shortcut icon" type="image/x-icon" href="../../images/tnu.ico">

<title>Tonyu System 2</title>

<!-- Bootstrap core CSS -->
<link href="../../css/bootstrap.css" rel="stylesheet">
<!-- Custom styles for this template -->
<!--
<link href="../../css/tonyu.css" rel="stylesheet">
-->

<!-- Custom styles for this template -->
<link href="../../css/jquery-ui.css" rel="stylesheet">


<script src="../../js/lib/jquery-1.10.1.js" type="text/javascript"></script>
<script src="../../js/lib/jquery-ui.js" type="text/javascript"></script>


</head>
<body>
	<div id=navBar class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-collapse">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Tonyu System 2</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="index.html">Home</a></li>
					<li><a id="fileMenu" href="#" class="dropdown-toggle" data-toggle="dropdown">ファイル</a>
						<ul class="dropdown-menu">
							<li><a href="#" id="newFile">新規</a></li>
							<li><a href="#" id="mvFile">名前変更</a></li>
							<li><a href="#" id="rmFile">削除</a></li>
							<!--li><a href="#" id="restore">初期状態に戻す</a></li-->
							<li><a href="#" id="mvPRJ">プロジェクト名を変更</a></li>
							<li><a href="#" id="rmPRJ">このプロジェクト自身を削除</a></li>
						</ul>
					</li>
					<li><a href="#" id="run" class="dropdown-toggle" data-toggle="dropdown">実行</a>
						<ul class="dropdown-menu" id="runMenu">
						</ul>
					</li>
					<li><a href="#" id="tool" class="dropdown-toggle" data-toggle="dropdown">ツール</a>
						<ul class="dropdown-menu" id="toolMenu">
							<li><a href="#" id="mapEditor">マップエディタ</a></li>
							<li><a href="#" id="search">検索</a></li>
                            <li><a href="#" onclick="sh.window()">Open shell</a></li>
						</ul>
					</li>
					<li><a href="#" id="window" class="dropdown-toggle" data-toggle="dropdown">ウィンドウ</a>
						<ul class="dropdown-menu">
							<li><a href="#" id="imgResEditor">画像リスト</a></li>
                            <li><a href="#" id="soundResEditor">音声リスト</a></li>
							<li><a href="#" id="prjOptEditor">プロジェクト オプション</a></li>
							<li><a href="#" id="editorEditor">エディタの設定</a></li>
							<li><a href="#" id="openFolder">フォルダを開く</a></li>
							<li><a href="#" id="runDialog">ダイアログで実行</a></li>
						</ul>
					</li>
					<li><a href="#" id="publish" class="dropdown-toggle" data-toggle="dropdown">公開</a>
						<ul class="dropdown-menu" id="publishMenu">
                            <li><a href="#" id="mkrun">ランタイム作成</a></li>
                            <li><a href="#" id="exportToExe">tonyuexeで公開する</a></li>
							<li><a href="#" id="exportToJsdoit">jsdo.itで公開する</a></li>
						</ul>
					</li>
					<li><a href="#" id="publish" class="dropdown-toggle" data-toggle="dropdown">ヘルプ</a>
						<ul class="dropdown-menu" id="helpMenu">
                            <li><a href="#" id="refHelp">この画面でヘルプを見る</a></li>
                            <li><a href="javascript:window.open('../../doc/index.html','width=800,height=400,menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes')" target="helpext">別画面でヘルプを見る</a></li>
						</ul>
					</li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div id=fileViewer class="col-xs-1">
				<div id="fileItemList"></div>
			</div>
			<div id=mainArea class="col-xs-6">
				<div id=errorPos >
				</div>
				<select id="fileSel" style="display:none;"></select>
				<div id=progs>
				</div>
			</div>
			<div id=runAreaParent class="col-xs-5">
				<div id="runArea" style="text-align : center ; overflow:none;" class="runArea">
					<canvas id="cv" width=465 height=465 style=" margin-left : auto ; margin-right : auto ;"></canvas>
				</div>
			</div>
		</div>
	</div>

	<!-- /.container -->
<script src="../../js/lib/bootstrap.min.js"></script>

<script type="text/javascript">
$(function () {
    draw();    
    $("#runArea").dialog({title:"dialog",resize:rsz});
});
var rszt;
function rsz(e,r) {
    //$("#cv").width( r.size.width);
    //$("#cv").height( r.size.height);
    var d=$("#runArea").closest(".ui-dialog");
    var t=d.find(".ui-dialog-titlebar");
    var dw=d.width(),dh=d.height(),th=t.height();
    var pad=30;
    var sz={w:dw-pad, h:dh-th-pad};
    if (rszt) clearTimeout(rszt);
    rszt=setTimeout(function () {
        $("#runArea").css({width:sz.w,height:sz.h});
        draw();
    },1000);
    $("#runArea").siblings(".ui-dialog-titlebar").text(r.size.width+"x"+r.size.height);
}
function draw() {
    var c=$("#cv");
    var ctx=c[0].getContext("2d");
    var w=$("#runArea").width()-10;
    var h=$("#runArea").height()-10;
    $("#cv").attr({width:w, height:h});
    //$("#helloWorld").siblings(".ui-dialog-titlebar").text(w+"x"+h);
    ctx.fillStyle="red";
    ctx.fillRect(0,0,w,h);
    ctx.fillStyle="orange";
    ctx.fillRect(10,10,w-20,h-20);
    ctx.fillStyle="cyan";
    ctx.fillText(w+"x"+h,30,50);
}
</script>
</body>
</html>
