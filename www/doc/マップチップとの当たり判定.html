<html><body class="markdown-body">
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" href="css/style.css"/>
<script src="js/jquery-1.10.1.js"></script>
<script src="js/doc.js"></script>
<p><!-- Konbaatiddo from Tonyu2 non-md document -->
</p>
<p><a href="用途別リファレンス">用途別リファレンス</a></p>
<h1 id="-">マップチップとの当たり判定</h1>
<ul>
<li>まず、<a href="mapEditor">マップを作成</a>します。このとき、当たり判定のあるマップはonモードを用いて手前のレイヤーに配置してください。</li>
</ul>
<p>Main</p>
<pre><code class="lang-JS">$map=new Map{chipWidth:32,chipHeight:32};
$map.load(&quot;stage1.json&quot;);
new Player;
</code></pre>
<p>Player</p>
<pre><code class="lang-JS">x=100;
y=100;
while(true){
    //移動前の座標を覚える
    sx=x;sy=y;
    if(getkey(&quot;right&quot;)&gt;0){
        x+=3;
    }
    if(getkey(&quot;left&quot;)&gt;0){
        x-=3;
    }
    if(getkey(&quot;down&quot;)&gt;0){
        y+=3;
    }
    if(getkey(&quot;up&quot;)&gt;0){
        y-=3;
    }
    //マップチップとの当たり判定
    if($map.getOnAt(x,y)&gt;-1){
        //マップチップにぶつかっていたら、移動前の座標に戻す
        x=sx;y=sy;
    }
    update();
}
</code></pre>
<h1 id="-">応用</h1>
<ul>
<li><a href="マップチップとの当たり判定 - 当たり判定を大きくする">マップチップとの当たり判定 - 当たり判定を大きくする</a></li>
<li><p><a href="マップチップとの当たり判定 - 斜め移動をスムーズにする">マップチップとの当たり判定 - 斜め移動をスムーズにする</a></p>
</li>
<li><p><a href="マップと物理オブジェクトに当たり判定を設定する">マップと物理オブジェクトに当たり判定を設定する</a></p>
</li>
</ul>
<h1 id="-">参考</h1>
<ul>
<li><a href="mapEditor">マップを描く</a></li>
<li><a href="mapGet">マップチップを取得する</a></li>
<li><a href="マップチップとの当たり判定">マップチップとの当たり判定</a></li>
<li><a href="マップを書き換える">マップを書き換える</a></li>
<li><a href="mapEditor">マップを描く</a></li>
<li><a href="当たり判定で壁にぶつかる">当たり判定で壁にぶつかる</a></li>
</ul>
<p>.</p>
</body></html>
