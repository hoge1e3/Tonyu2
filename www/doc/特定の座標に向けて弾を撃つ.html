<html><body class="markdown-body">
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" href="css/style.css"/>
<script src="js/jquery-1.10.1.js"></script>
<script src="js/doc.js"></script>
<p><!--Konbaatiddo from Tonyu2 non-md document-->
</p>
<p><a href="用途別リファレンス">用途別リファレンス</a></p>
<p><a href="オブジェクトを動かす">オブジェクトを動かす</a></p>
<h1 id="-">特定の座標に向けて弾を撃つ</h1>
<p>下のプログラムにおいて，</p>
<ul>
<li>ShooterオブジェクトはBulletオブジェクトを発射します．</li>
<li>Bulletオブジェクトは$playerに向かって移動します．</li>
</ul>
<p>Main</p>
<pre><code class="lang-JS">$player=new Player{x=100,y=100};
new Shooter{x=200,y=200};
</code></pre>
<p>Player</p>
<pre><code class="lang-JS">pad=new APad; // APadの作成
while(true){
  x+=pad.vx*5;
  y+=pad.vy*5;
  update();
}
</code></pre>
<p>Shooter</p>
<pre><code class="lang-JS">while(true) {
    if(rnd(60)==0){
        new Bullet{x:x, y:y, p:25};
    }
    update();
}
</code></pre>
<p>Bullet</p>
<pre><code class="lang-JS">// $playerの座標と自分の座標を比較
dx=$player.x-x;
dy=$player.y-y;
d=dist(dx,dy);//$playerまでの距離
vx=dx/d*5; // 移動速度(x座標)
vy=dy/d*5; // 移動速度(y座標)
while(!screenOut()){
  x+=vx;//移動速度の分だけxを変化させる
  y+=vy;//移動速度の分だけyを変化させる
  update();
}
die();
</code></pre>
<h2 id="-">角度を指定して発射</h2>
<p>Bulletオブジェクトは次のように書くこともできます．特定の座標から角度をずらして発射<br>したい場合はこちらのほうが便利です．</p>
<p>Bullet</p>
<pre><code class="lang-JS">// $playerの座標と自分の座標を比較
dx=$player.x-x;
dy=$player.y-y;
dir=atanxy(dx,dy);//角度を計算
vx=cos(dir)*5;//角度に応じてvx,vyを設定
vy=sin(dir)*5;
while(!screenOut()){
  x+=vx;//移動速度の分だけxを変化させる
  y+=vy;//移動速度の分だけyを変化させる
  update();
}
die();
</code></pre>
<h1 id="-">参考</h1>
<p><a href="弾を撃つ">弾を撃つ</a><br>.</p>
</body></html>
