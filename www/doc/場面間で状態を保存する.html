<html><body class="markdown-body">
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" href="css/style.css"/>
<script src="js/jquery-1.10.1.js"></script>
<script src="js/doc.js"></script>
<p><a href="用途別リファレンス">用途別リファレンス</a></p>
<h1 id="-">場面間で状態を保存する</h1>
<p><a href="loadPage-実例">場面の切り替え</a>で，別のページに移動して，また元のページに戻ってきたときに，プレイヤーの位置などの状態がゲームスタート時の状態にリセットされてしまうことがあります．</p>
<p>ページを切り替える前に状態をグローバル変数に保存しておき，元のページに戻ったときに状態を復元させることでこの問題を解決できます．</p>
<p>例：</p>
<p>Main</p>
<pre><code>$player_x=100;
loadPage(Field);
</code></pre><p>Field</p>
<pre><code>new Player;
</code></pre><p>Player</p>
<pre><code>// $player_xからxを復元
x=$player_x;
y=200;
while(true) {
    if(getkey(&quot;left&quot;)) x--;
    if(getkey(&quot;right&quot;)) x++;
    if (getkey(&quot;space&quot;)==1) {
        // $player_xに値を保存
        $player_x=x;
        loadPage(Battle);
    }
    update();
}
</code></pre><p>Battle</p>
<pre><code>new Label{text:&quot;Battle&quot;, x:100, y:100};
updateEx(60);
loadPage(Field);
</code></pre></body></html>
